"use strict";(self.webpackChunksd_survey=self.webpackChunksd_survey||[]).push([[179],{6217:(hn,dt,B)=>{B.d(dt,{nm:()=>$i});var u=B(2122);B(4650),B(259);var gt=B(5861),qe=B(9681),ze=B(4859),$t=B(2090),rt=B(1877);const Ue=new Map,bt={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function Ge(ct){return Ue.get(ct)||Object.assign({},bt)}function nt(){return Ne}class ie{constructor(Xe,vt,Wt,cn,Pn){if(this.operation=Xe,this.retryPolicy=vt,this.getWaitDuration=Wt,this.lowerBound=cn,this.upperBound=Pn,this.pending=null,this.nextErrorWaitInterval=cn,cn>Pn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Xe){var vt=this;return(0,gt.Z)(function*(){vt.stop();try{vt.pending=new $t.BH,yield function Bt(ct){return new Promise(Xe=>{setTimeout(Xe,ct)})}(vt.getNextRun(Xe)),vt.pending.resolve(),yield vt.pending.promise,vt.pending=new $t.BH,yield vt.operation(),vt.pending.resolve(),yield vt.pending.promise,vt.process(!0).catch(()=>{})}catch(Wt){vt.retryPolicy(Wt)?vt.process(!1).catch(()=>{}):vt.stop()}})()}getNextRun(Xe){if(Xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const vt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),vt}}}const Qe=new $t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function st(ct){if(!Ge(ct).activated)throw Qe.create("use-before-activation",{appName:ct.name})}function Dr(ct,Xe){return jn.apply(this,arguments)}function jn(){return(jn=(0,gt.Z)(function*({url:ct,body:Xe},vt){const Wt={"Content-Type":"application/json"},cn=vt.getImmediate({optional:!0});if(cn){const Vi=yield cn.getHeartbeatsHeader();Vi&&(Wt["X-Firebase-Client"]=Vi)}const Pn={method:"POST",body:JSON.stringify(Xe),headers:Wt};let or,Ei;try{or=yield fetch(ct,Pn)}catch(Vi){throw Qe.create("fetch-network-error",{originalErrorMessage:Vi?.message})}if(200!==or.status)throw Qe.create("fetch-status-error",{httpStatus:or.status});try{Ei=yield or.json()}catch(Vi){throw Qe.create("fetch-parse-error",{originalErrorMessage:Vi?.message})}const ei=Ei.ttl.match(/^([\d.]+)(s)$/);if(!ei||!ei[2]||isNaN(Number(ei[1])))throw Qe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ei.ttl}`});const yo=1e3*Number(ei[1]),Es=Date.now();return{token:Ei.token,expireTimeMillis:Es+yo,issuedAtTimeMillis:Es}})).apply(this,arguments)}function Nr(ct,Xe){const{projectId:vt,appId:Wt,apiKey:cn}=ct.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${vt}/apps/${Wt}:exchangeDebugToken?key=${cn}`,body:{debug_token:Xe}}}const Tr="firebase-app-check-store";let Rr=null;function er(){return Rr||(Rr=new Promise((ct,Xe)=>{try{const vt=indexedDB.open("firebase-app-check-database",1);vt.onsuccess=Wt=>{ct(Wt.target.result)},vt.onerror=Wt=>{var cn;Xe(Qe.create("storage-open",{originalErrorMessage:null===(cn=Wt.target.error)||void 0===cn?void 0:cn.message}))},vt.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(vt){Xe(Qe.create("storage-open",{originalErrorMessage:vt?.message}))}}),Rr)}function dr(){return(dr=(0,gt.Z)(function*(ct,Xe){const Wt=(yield er()).transaction(Tr,"readwrite"),Pn=Wt.objectStore(Tr).put({compositeKey:ct,value:Xe});return new Promise((or,Ei)=>{Pn.onsuccess=ei=>{or()},Wt.onerror=ei=>{var yo;Ei(Qe.create("storage-set",{originalErrorMessage:null===(yo=ei.target.error)||void 0===yo?void 0:yo.message}))}})})).apply(this,arguments)}const xn=new rt.Yd("@firebase/app-check");function Vn(ct,Xe){return(0,$t.hl)()?function Xr(ct,Xe){return function pr(ct,Xe){return dr.apply(this,arguments)}(function kn(ct){return`${ct.options.appId}-${ct.name}`}(ct),Xe)}(ct,Xe).catch(vt=>{xn.warn(`Failed to write token to IndexedDB. Error: ${vt}`)}):Promise.resolve()}function Di(){return nt().enabled}function _r(){return si.apply(this,arguments)}function si(){return(si=(0,gt.Z)(function*(){const ct=nt();if(ct.enabled&&ct.token)return ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yn={error:"UNKNOWN_ERROR"};function Ut(ct){return $t.US.encodeString(JSON.stringify(ct),!1)}function En(ct){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,gt.Z)(function*(ct,Xe=!1){const vt=ct.app;st(vt);const Wt=Ge(vt);let Pn,cn=Wt.token;if(cn&&!Te(cn)&&(Wt.token=void 0,cn=void 0),!cn){const ei=yield Wt.cachedTokenPromise;ei&&(Te(ei)?cn=ei:yield Vn(vt,void 0))}if(!Xe&&cn&&Te(cn))return{token:cn.token};let Ei,or=!1;if(Di()){Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Dr(Nr(vt,yield _r()),ct.heartbeatServiceProvider).finally(()=>{Wt.exchangeTokenPromise=void 0}),or=!0);const ei=yield Wt.exchangeTokenPromise;return yield Vn(vt,ei),Wt.token=ei,{token:ei.token}}try{Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Wt.provider.getToken().finally(()=>{Wt.exchangeTokenPromise=void 0}),or=!0),cn=yield Ge(vt).exchangeTokenPromise}catch(ei){"appCheck/throttled"===ei.code?xn.warn(ei.message):xn.error(ei),Pn=ei}return cn?Pn?Ei=Te(cn)?{token:cn.token,internalError:Pn}:se(Pn):(Ei={token:cn.token},Wt.token=cn,yield Vn(vt,cn)):Ei=se(Pn),or&&Ze(vt,Ei),Ei})).apply(this,arguments)}function tr(ct,Xe){const vt=Ge(ct),Wt=vt.tokenObservers.filter(cn=>cn.next!==Xe);0===Wt.length&&vt.tokenRefresher&&vt.tokenRefresher.isRunning()&&vt.tokenRefresher.stop(),vt.tokenObservers=Wt}function Be(ct){const{app:Xe}=ct,vt=Ge(Xe);let Wt=vt.tokenRefresher;Wt||(Wt=function Pe(ct){const{app:Xe}=ct;return new ie((0,gt.Z)(function*(){let Wt;if(Wt=Ge(Xe).token?yield En(ct,!0):yield En(ct),Wt.error)throw Wt.error;if(Wt.internalError)throw Wt.internalError}),()=>!0,()=>{const vt=Ge(Xe);if(vt.token){let Wt=vt.token.issuedAtTimeMillis+.5*(vt.token.expireTimeMillis-vt.token.issuedAtTimeMillis)+3e5;return Wt=Math.min(Wt,vt.token.expireTimeMillis-3e5),Math.max(0,Wt-Date.now())}return 0},3e4,96e4)}(ct),vt.tokenRefresher=Wt),!Wt.isRunning()&&vt.isTokenAutoRefreshEnabled&&Wt.start()}function Ze(ct,Xe){const vt=Ge(ct).tokenObservers;for(const Wt of vt)try{"EXTERNAL"===Wt.type&&null!=Xe.error?Wt.error(Xe.error):Wt.next(Xe)}catch{}}function Te(ct){return ct.expireTimeMillis-Date.now()>0}function se(ct){return{token:Ut(yn),error:ct}}class be{constructor(Xe,vt){this.app=Xe,this.heartbeatServiceProvider=vt}_delete(){const{tokenObservers:Xe}=Ge(this.app);for(const vt of Xe)tr(this.app,vt.next);return Promise.resolve()}}const as="app-check-internal";!function ws(){(0,qe._registerComponent)(new ze.wA("app-check",ct=>function ht(ct,Xe){return new be(ct,Xe)}(ct.getProvider("app").getImmediate(),ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ct,Xe,vt)=>{ct.getProvider(as).initialize()})),(0,qe._registerComponent)(new ze.wA(as,ct=>function qt(ct){return{getToken:Xe=>En(ct,Xe),addTokenListener:Xe=>function Ln(ct,Xe,vt,Wt){const{app:cn}=ct,Pn=Ge(cn);if(Pn.tokenObservers=[...Pn.tokenObservers,{next:vt,error:Wt,type:Xe}],Pn.token&&Te(Pn.token)){const Ei=Pn.token;Promise.resolve().then(()=>{vt({token:Ei.token}),Be(ct)}).catch(()=>{})}Pn.cachedTokenPromise.then(()=>Be(ct))}(ct,"INTERNAL",Xe),removeTokenListener:Xe=>tr(ct.app,Xe)}}(ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qe.registerVersion)("@firebase/app-check","0.6.0")}();class $i{constructor(){return(0,u.vb)("app-check")}}typeof window<"u"&&window},3385:(hn,dt,B)=>{B.d(dt,{zQ:()=>Ge,ww:()=>wt,rT:()=>rt,f7:()=>bt,L6:()=>ze,_Q:()=>$t,lh:()=>Ue,Qv:()=>qe,nw:()=>Ne});var u=B(4650),L=B(7579),ee=B(9646),Se=B(9751),Oe=B(8996),Me=B(6451),We=B(5363),ke=B(3900),Je=B(4004),we=B(3151),ye=B(590),He=B(576);function Nt(nt,Ht){return(0,He.m)(Ht)?(0,ke.w)(()=>nt,Ht):(0,ke.w)(()=>nt)}var mt=B(9468),lt=B(9300),xt=B(2122),yt=B(2011),ut=B(6895),$e=B(6217),jt=B(9260);const qe=new u.OlP("angularfire2.auth.use-emulator"),ze=new u.OlP("angularfire2.auth.settings"),$t=new u.OlP("angularfire2.auth.tenant-id"),rt=new u.OlP("angularfire2.auth.langugage-code"),Ue=new u.OlP("angularfire2.auth.use-device-language"),bt=new u.OlP("angularfire.auth.persistence"),Ne=(nt,Ht,Kt,Mn,Mt,en,ge,ie)=>(0,yt.cc)(`${nt.name}.auth`,"AngularFireAuth",nt.name,()=>{const Bt=Ht.runOutsideAngular(()=>nt.auth());if(Kt&&Bt.useEmulator(...Kt),Mn&&(Bt.tenantId=Mn),Bt.languageCode=Mt,en&&Bt.useDeviceLanguage(),ge)for(const[Le,Qe]of Object.entries(ge))Bt.settings[Le]=Qe;return ie&&Bt.setPersistence(ie),Bt},[Kt,Mn,Mt,en,ge,ie]);let Ge=(()=>{class nt{constructor(Kt,Mn,Mt,en,ge,ie,Bt,Le,Qe,Fe,st,Xt){const an=new L.x,Dr=(0,ee.of)(void 0).pipe((0,We.Q)(ge.outsideAngular),(0,ke.w)(()=>en.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9568)))),(0,Je.U)(()=>(0,yt.on)(Kt,en,Mn)),(0,Je.U)(jn=>Ne(jn,en,ie,Le,Qe,Fe,Bt,st)),(0,we.d)({bufferSize:1,refCount:!1}));if((0,ut.PM)(Mt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{Dr.pipe((0,ye.P)()).subscribe();const ii=Dr.pipe((0,ke.w)(Wn=>Wn.getRedirectResult().then(sr=>sr,()=>null)),xt.iC,(0,we.d)({bufferSize:1,refCount:!1})),br=Dr.pipe((0,ke.w)(Wn=>new Se.y(sr=>({unsubscribe:en.runOutsideAngular(()=>Wn.onAuthStateChanged(Tr=>sr.next(Tr),Tr=>sr.error(Tr),()=>sr.complete()))})))),Nr=Dr.pipe((0,ke.w)(Wn=>new Se.y(sr=>({unsubscribe:en.runOutsideAngular(()=>Wn.onIdTokenChanged(Tr=>sr.next(Tr),Tr=>sr.error(Tr),()=>sr.complete()))}))));this.authState=ii.pipe(Nt(br),(0,mt.R)(ge.outsideAngular),(0,We.Q)(ge.insideAngular)),this.user=ii.pipe(Nt(Nr),(0,mt.R)(ge.outsideAngular),(0,We.Q)(ge.insideAngular)),this.idToken=this.user.pipe((0,ke.w)(Wn=>Wn?(0,Oe.D)(Wn.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,ke.w)(Wn=>Wn?(0,Oe.D)(Wn.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Me.T)(ii,an,this.authState.pipe((0,lt.h)(Wn=>!Wn))).pipe((0,Je.U)(Wn=>Wn?.user?Wn:null),(0,mt.R)(ge.outsideAngular),(0,We.Q)(ge.insideAngular))}return(0,yt.pX)(this,Dr,en,{spy:{apply:(jn,ii,br)=>{(jn.startsWith("signIn")||jn.startsWith("createUser"))&&br.then(Nr=>an.next(Nr))}}})}}return nt.\u0275fac=function(Kt){return new(Kt||nt)(u.LFG(yt.Dh),u.LFG(yt.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(xt.HU),u.LFG(qe,8),u.LFG(ze,8),u.LFG($t,8),u.LFG(rt,8),u.LFG(Ue,8),u.LFG(bt,8),u.LFG($e.nm,8))},nt.\u0275prov=u.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"any"}),nt})(),wt=(()=>{class nt{constructor(){jt.Z.registerVersion("angularfire",xt.q4.full,"auth-compat")}}return nt.\u0275fac=function(Kt){return new(Kt||nt)},nt.\u0275mod=u.oAB({type:nt}),nt.\u0275inj=u.cJS({providers:[Ge]}),nt})()},3101:(hn,dt,B)=>{B.d(dt,{ST:()=>hy,yb:()=>rv});var u=B(4650),L=B(4986),ee=B(9751),Se=B(8996),Oe=B(9646),Me=B(2122),We=B(8675),ke=B(4482),Je=B(5403);function we(){return(0,ke.e)((i,e)=>{let t,a=!1;i.subscribe((0,Je.x)(e,f=>{const y=t;t=f,a&&e.next([y,f]),a=!0}))})}var Ue,ye=B(4004),He=B(5026),Nt=B(1884),mt=B(9300),lt=B(2011),xt=B(6895),ut=(B(9568),B(3942)),$e=B(5861),jt=B(9681),gt=B(4859),qe=B(1877),ze=B(2090),$t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rt={},bt=bt||{},Ne=$t||self;function Ge(){}function wt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function nt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Kt="closure_uid_"+(1e9*Math.random()>>>0),Mn=0;function Mt(i,e,t){return i.call.apply(i.bind,arguments)}function en(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,a),i.apply(e,f)}}return function(){return i.apply(e,arguments)}}function ge(i,e,t){return(ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mt:en).apply(null,arguments)}function ie(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Bt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(a,f,y){for(var C=Array(arguments.length-2),P=2;P<arguments.length;P++)C[P-2]=arguments[P];return e.prototype[f].apply(a,C)}}function Le(){this.s=this.s,this.o=this.o}Le.prototype.s=!1,Le.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ht(i){Object.prototype.hasOwnProperty.call(i,Kt)&&i[Kt]||(i[Kt]=++Mn)}(this)},Le.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function st(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function Xt(i,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(wt(a)){const f=i.length||0,y=a.length||0;i.length=f+y;for(let C=0;C<y;C++)i[f+C]=a[C]}else i.push(a)}}function an(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var Dr=function(){if(!Ne.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ne.addEventListener("test",Ge,e),Ne.removeEventListener("test",Ge,e)}catch{}return i}();function jn(i){return/^[\s\xa0]*$/.test(i)}var ii=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function br(i,e){return i<e?-1:i>e?1:0}function Nr(){var i=Ne.navigator;return i&&(i=i.userAgent)?i:""}function Wn(i){return-1!=Nr().indexOf(i)}function sr(i){return sr[" "](i),i}sr[" "]=Ge;var pr,i,un=Wn("Opera"),Rr=Wn("Trident")||Wn("MSIE"),er=Wn("Edge"),ur=er||Rr,Xr=Wn("Gecko")&&!(-1!=Nr().toLowerCase().indexOf("webkit")&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),ji=-1!=Nr().toLowerCase().indexOf("webkit")&&!Wn("Edge");function Kn(){var i=Ne.document;return i?i.documentMode:void 0}e:{var dr="",Tn=(i=Nr(),Xr?/rv:([^\);]+)(\)|;)/.exec(i):er?/Edge\/([\d\.]+)/.exec(i):Rr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ji?/WebKit\/(\S+)/.exec(i):un?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Tn&&(dr=Tn?Tn[1]:""),Rr){var In=Kn();if(null!=In&&In>parseFloat(dr)){pr=String(In);break e}}pr=dr}var kn={};var Vn=Ne.document&&Rr&&(Kn()||parseInt(pr,10))||void 0;function ci(i,e){if(an.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Xr){e:{try{sr(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:vn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ci.X.h.call(this)}}Bt(ci,an);var vn={2:"touch",3:"pen",4:"mouse"};ci.prototype.h=function(){ci.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Di="closure_listenable_"+(1e6*Math.random()|0),_r=0;function si(i,e,t,a,f){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ha=f,this.key=++_r,this.ba=this.ea=!1}function Pr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function yn(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function Ut(i){const e={};for(const t in i)e[t]=i[t];return e}const En="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gn(i,e){let t,a;for(let f=1;f<arguments.length;f++){for(t in a=arguments[f],a)i[t]=a[t];for(let y=0;y<En.length;y++)t=En[y],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function Ln(i){this.src=i,this.g={},this.h=0}function tr(i,e){var t=e.type;if(t in i.g){var y,a=i.g[t],f=Fe(a,e);(y=0<=f)&&Array.prototype.splice.call(a,f,1),y&&(Pr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Be(i,e,t,a){for(var f=0;f<i.length;++f){var y=i[f];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==a)return f}return-1}Ln.prototype.add=function(i,e,t,a,f){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var C=Be(i,e,a,f);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new si(e,this.src,y,!!a,f)).ea=t,i.push(e)),e};var Pe="closure_lm_"+(1e6*Math.random()|0),Ze={};function Te(i,e,t,a,f){if(a&&a.once)return ht(i,e,t,a,f);if(Array.isArray(e)){for(var y=0;y<e.length;y++)Te(i,e[y],t,a,f);return null}return t=tt(t),i&&i[Di]?i.N(e,t,nt(a)?!!a.capture:!!a,f):se(i,e,t,!1,a,f)}function se(i,e,t,a,f,y){if(!e)throw Error("Invalid event type");var C=nt(f)?!!f.capture:!!f,P=ve(i);if(P||(i[Pe]=P=new Ln(i)),(t=P.add(e,t,a,C,y)).proxy)return t;if(a=function be(){const e=Ee;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)Dr||(f=C),void 0===f&&(f=!1),i.addEventListener(e.toString(),a,f);else if(i.attachEvent)i.attachEvent(Nn(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function ht(i,e,t,a,f){if(Array.isArray(e)){for(var y=0;y<e.length;y++)ht(i,e[y],t,a,f);return null}return t=tt(t),i&&i[Di]?i.O(e,t,nt(a)?!!a.capture:!!a,f):se(i,e,t,!0,a,f)}function qt(i,e,t,a,f){if(Array.isArray(e))for(var y=0;y<e.length;y++)qt(i,e[y],t,a,f);else a=nt(a)?!!a.capture:!!a,t=tt(t),i&&i[Di]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Be(y=i.g[e],t,a,f))&&(Pr(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=ve(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Be(e,t,a,f)),(t=-1<i?e[i]:null)&&bn(t))}function bn(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Di])tr(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(Nn(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=ve(e))?(tr(t,i),0==t.h&&(t.src=null,e[Pe]=null)):Pr(i)}}}function Nn(i){return i in Ze?Ze[i]:Ze[i]="on"+i}function Ee(i,e){if(i.ba)i=!0;else{e=new ci(e,this);var t=i.listener,a=i.ha||i.src;i.ea&&bn(i),i=t.call(a,e)}return i}function ve(i){return(i=i[Pe])instanceof Ln?i:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function tt(i){return"function"==typeof i?i:(i[pe]||(i[pe]=function(e){return i.handleEvent(e)}),i[pe])}function ft(){Le.call(this),this.i=new Ln(this),this.P=this,this.I=null}function tn(i,e){var t,a=i.I;if(a)for(t=[];a;a=a.I)t.push(a);if(i=i.P,a=e.type||e,"string"==typeof e)e=new an(e,i);else if(e instanceof an)e.target=e.target||i;else{var f=e;Gn(e=new an(a,i),f)}if(f=!0,t)for(var y=t.length-1;0<=y;y--){var C=e.g=t[y];f=Zn(C,a,!0,e)&&f}if(f=Zn(C=e.g=i,a,!0,e)&&f,f=Zn(C,a,!1,e)&&f,t)for(y=0;y<t.length;y++)f=Zn(C=e.g=t[y],a,!1,e)&&f}function Zn(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,y=0;y<e.length;++y){var C=e[y];if(C&&!C.ba&&C.capture==t){var P=C.listener,J=C.ha||C.src;C.ea&&tr(i.i,C),f=!1!==P.call(J,a)&&f}}return f&&!a.defaultPrevented}Bt(ft,Le),ft.prototype[Di]=!0,ft.prototype.removeEventListener=function(i,e,t,a){qt(this,i,e,t,a)},ft.prototype.M=function(){if(ft.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)Pr(t[a]);delete i.g[e],i.h--}}this.I=null},ft.prototype.N=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},ft.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var hr=Ne.JSON.stringify;function Ar(){var i=vs;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Zi,Rn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ys,i=>i.reset());class ys{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Js(i){Ne.setTimeout(()=>{throw i},0)}function Xs(i,e){Zi||function wi(){var i=Ne.Promise.resolve(void 0);Zi=function(){i.then(bs)}}(),Fs||(Zi(),Fs=!0),vs.add(i,e)}var Fs=!1,vs=new class gi{constructor(){this.h=this.g=null}add(e,t){const a=Rn.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function bs(){for(var i;i=Ar();){try{i.h.call(i.g)}catch(t){Js(t)}var e=Rn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Fs=!1}function Ti(i,e){ft.call(this),this.h=i||1,this.g=e||Ne,this.j=ge(this.lb,this),this.l=Date.now()}function ho(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function $r(i,e,t){if("function"==typeof i)t&&(i=ge(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ge(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ne.setTimeout(i,e||0)}function Ba(i){i.g=$r(()=>{i.g=null,i.i&&(i.i=!1,Ba(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Bt(Ti,ft),(Ue=Ti.prototype).ca=!1,Ue.R=null,Ue.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),tn(this,"tick"),this.ca&&(ho(this),this.start()))}},Ue.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ue.M=function(){Ti.X.M.call(this),ho(this),delete this.g};class as extends Le{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ba(this)}M(){super.M(),this.g&&(Ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(i){Le.call(this),this.h=i,this.g={}}Bt(ws,Le);var Ls=[];function Rs(i,e,t,a){Array.isArray(t)||(t&&(Ls[0]=t.toString()),t=Ls);for(var f=0;f<t.length;f++){var y=Te(e,t[f],a||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function $i(i){yn(i.g,function(e,t){this.g.hasOwnProperty(t)&&bn(e)},i),i.g={}}function Bs(){this.g=!0}function fr(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function na(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var f=a[1];if(Array.isArray(f)&&!(1>f.length)){var y=f[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var C=1;C<f.length;C++)f[C]=""}}}return hr(t)}catch{return e}}(i,t)+(a?" "+a:"")})}ws.prototype.M=function(){ws.X.M.call(this),$i(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bs.prototype.Aa=function(){this.g=!1},Bs.prototype.info=function(){};var zs={},Ks=null;function Gi(){return Ks=Ks||new ft}function Vo(i){an.call(this,zs.Pa,i)}function Us(i){const e=Gi();tn(e,new Vo(e))}function ra(i,e){an.call(this,zs.STAT_EVENT,i),this.stat=e}function Qi(i){const e=Gi();tn(e,new ra(e,i))}function Uo(i,e){an.call(this,zs.Qa,i),this.size=e}function ns(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ne.setTimeout(function(){i()},e)}zs.Pa="serverreachability",Bt(Vo,an),zs.STAT_EVENT="statevent",Bt(ra,an),zs.Qa="timingevent",Bt(Uo,an);var ct={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Xe={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vt(){}function cn(){}vt.prototype.h=null;var ei,Pn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function or(){an.call(this,"d")}function Ei(){an.call(this,"c")}function yo(){}function Es(i,e,t,a){this.l=i,this.j=e,this.m=t,this.U=a||1,this.S=new ws(this),this.O=Ca,this.T=new Ti(i=ur?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}Bt(or,an),Bt(Ei,an),Bt(yo,vt),yo.prototype.g=function(){return new XMLHttpRequest},yo.prototype.i=function(){return{}},ei=new yo;var Ca=45e3,Mo={},Oo={};function kr(i,e,t){i.K=1,i.v=fo(no(e)),i.s=t,i.P=!0,Fr(i,null)}function Fr(i,e){i.F=Date.now(),eo(i),i.A=no(i.v);var t=i.A,a=i.U;Array.isArray(a)||(a=[String(a)]),$s(t.i,"t",a),i.C=0,t=i.l.H,i.h=new Vi,i.g=fa(i.l,t?e:null,!i.s),0<i.N&&(i.L=new as(ge(i.La,i,i.g),i.N)),Rs(i.S,i.g,"readystatechange",i.ib),e=i.H?Ut(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Us(),function oi(i,e,t,a,f,y){i.info(function(){if(i.g)if(y)for(var C="",P=y.split("&"),J=0;J<P.length;J++){var re=P[J].split("=");if(1<re.length){var me=re[0];re=re[1];var Ke=me.split("_");C=2<=Ke.length&&"type"==Ke[1]?C+(me+"=")+re+"&":C+(me+"=redacted&")}}else C=null;else C=y;return"XMLHTTP REQ ("+a+") [attempt "+f+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Xn(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function fs(i,e,t){let f,a=!0;for(;!i.I&&i.C<t.length;){if(f=Wr(i,t),f==Oo){4==e&&(i.o=4,Qi(14),a=!1),fr(i.j,i.m,null,"[Incomplete Response]");break}if(f==Mo){i.o=4,Qi(15),fr(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}fr(i.j,i.m,f,null),wr(i,f)}Xn(i)&&f!=Oo&&f!=Mo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Qi(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),di(e),e.K=!0,Qi(11))):(fr(i.j,i.m,t,"[Invalid Chunked Response]"),Vr(i),To(i))}function Wr(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?Oo:(t=Number(e.substring(t,a)),isNaN(t)?Mo:(a+=1)+t>e.length?Oo:(e=e.substr(a,t),i.C=a+t,e))}function eo(i){i.V=Date.now()+i.O,Va(i,i.O)}function Va(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ns(ge(i.gb,i),e)}function Hs(i){i.B&&(Ne.clearTimeout(i.B),i.B=null)}function To(i){0==i.l.G||i.I||ss(i.l,i)}function Vr(i){Hs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ho(i.T),$i(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function wr(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Yt(t.h,i)))if(!i.J&&Yt(t.h,i)&&3==t.G){try{var a=t.Fa.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var f=a;if(0==f[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Qr(t),F(t)}ai(t),Qi(18)}}else t.Ba=f[1],0<t.Ba-t.T&&37500>f[2]&&t.L&&0==t.A&&!t.v&&(t.v=ns(ge(t.cb,t),6e3));if(1>=la(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else xi(t,11)}else if((i.J||t.g==i)&&Qr(t),!jn(e))for(f=t.Fa.g.parse(e),e=0;e<f.length;e++){let re=f[e];if(t.T=re[0],re=re[1],2==t.G)if("c"==re[0]){t.I=re[1],t.ka=re[2];const me=re[3];null!=me&&(t.ma=me,t.j.info("VER="+t.ma));const Ke=re[4];null!=Ke&&(t.Ca=Ke,t.j.info("SVER="+t.Ca));const It=re[5];null!=It&&"number"==typeof It&&0<It&&(t.J=a=1.5*It,t.j.info("backChannelRequestTimeoutMs_="+a)),a=t;const Jt=i.g;if(Jt){const ln=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ln){var y=a.h;y.g||-1==ln.indexOf("spdy")&&-1==ln.indexOf("quic")&&-1==ln.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(gr(y,y.h),y.h=null))}if(a.D){const Yn=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yn&&(a.za=Yn,mi(a.F,a.D,Yn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((a=t).sa=ha(a,a.H?a.ka:null,a.V),C.J){ua(a.h,C);var P=C,J=a.J;J&&P.setTimeout(J),P.B&&(Hs(P),eo(P)),a.g=C}else Fn(a);0<t.i.length&&$(t)}else"stop"!=re[0]&&"close"!=re[0]||xi(t,7);else 3==t.G&&("stop"==re[0]||"close"==re[0]?"stop"==re[0]?xi(t,7):vo(t):"noop"!=re[0]&&t.l&&t.l.wa(re),t.A=0)}Us()}catch{}}function Ms(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(wt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ia(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(wt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const a in i)e[t++]=a;return e}}}(i),a=function Ni(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(wt(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),f=a.length,y=0;y<f;y++)e.call(void 0,a[y],t&&t[y],i)}(Ue=Es.prototype).setTimeout=function(i){this.O=i},Ue.ib=function(i){i=i.target;const e=this.L;e&&3==qr(i)?e.l():this.La(i)},Ue.La=function(i){try{if(i==this.g)e:{const me=qr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>me)&&(3!=me||ur||this.g&&(this.h.h||this.g.fa()||gs(this.g)))){this.I||4!=me||7==e||Us(),Hs(this);var t=this.g.aa();this.Y=t;t:if(Xn(this)){var a=gs(this.g);i="";var f=a.length,y=4==qr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),To(this);var C="";break t}this.h.i=new Ne.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:y&&e==f-1});a.splice(0,f),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function Ta(i,e,t,a,f,y,C){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+f+"]: "+e+"\n"+t+"\n"+y+" "+C})}(this.j,this.u,this.A,this.m,this.U,me,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var P,J=this.g;if((P=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(P)){var re=P;break t}}re=null}if(!(t=re)){this.i=!1,this.o=3,Qi(12),Vr(this),To(this);break e}fr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wr(this,t)}this.P?(fs(this,me,C),ur&&this.i&&3==me&&(Rs(this.S,this.T,"tick",this.hb),this.T.start())):(fr(this.j,this.m,C,null),wr(this,C)),4==me&&Vr(this),this.i&&!this.I&&(4==me?ss(this.l,this):(this.i=!1,eo(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),Vr(this),To(this)}}}catch{}},Ue.hb=function(){if(this.g){var i=qr(this.g),e=this.g.fa();this.C<e.length&&(Hs(this),fs(this,i,e),this.i&&4!=i&&eo(this))}},Ue.cancel=function(){this.I=!0,Vr(this)},Ue.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Vs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Us(),Qi(17)),Vr(this),this.o=2,To(this)):Va(this,this.V-i)};var Ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function to(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof to){this.h=void 0!==e?e:i.h,sa(this,i.j),this.s=i.s,this.g=i.g,zr(this,i.m),this.l=i.l,e=i.i;var t=new Ji;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ia(this,t),this.o=i.o}else i&&(t=String(i).match(Ui))?(this.h=!!e,sa(this,t[1]||"",!0),this.s=ls(t[2]||""),this.g=ls(t[3]||"",!0),zr(this,t[4]),this.l=ls(t[5]||"",!0),Ia(this,t[6]||"",!0),this.o=ls(t[7]||"")):(this.h=!!e,this.i=new Ji(null,this.h))}function no(i){return new to(i)}function sa(i,e,t){i.j=t?ls(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function zr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ia(i,e,t){e instanceof Ji?(i.i=e,function ps(i,e){e&&!i.j&&(Oi(i),i.i=null,i.g.forEach(function(t,a){var f=a.toLowerCase();a!=f&&(Zr(this,a),$s(this,f,t))},i)),i.j=e}(i.i,i.h)):(t||(e=xo(e,ar)),i.i=new Ji(e,i.h))}function mi(i,e,t){i.i.set(e,t)}function fo(i){return mi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ls(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function xo(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,oa),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function oa(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}to.prototype.toString=function(){var i=[],e=this.j;e&&i.push(xo(e,Po,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(xo(e,Po,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(xo(t,"/"==t.charAt(0)?Ho:Kr,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",xo(t,Ds)),i.join("")};var Po=/[#\/\?@]/g,Kr=/[#\?:]/g,Ho=/[#\?]/g,ar=/[#\?@]/g,Ds=/#/g;function Ji(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Oi(i){i.g||(i.g=new Map,i.h=0,i.i&&function js(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),f=null;if(0<=a){var y=i[t].substring(0,a);f=i[t].substring(a+1)}else y=i[t];e(y,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zr(i,e){Oi(i),e=aa(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function cr(i,e){return Oi(i),e=aa(i,e),i.g.has(e)}function $s(i,e,t){Zr(i,e),0<t.length&&(i.i=null,i.g.set(aa(i,e),st(t)),i.h+=t.length)}function aa(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function po(i){this.l=i||ro,i=Ne.PerformanceNavigationTiming?0<(i=Ne.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ne.g&&Ne.g.Ga&&Ne.g.Ga()&&Ne.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ue=Ji.prototype).add=function(i,e){Oi(this),this.i=null,i=aa(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Ue.forEach=function(i,e){Oi(this),this.g.forEach(function(t,a){t.forEach(function(f){i.call(e,f,a,this)},this)},this)},Ue.oa=function(){Oi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const f=i[a];for(let y=0;y<f.length;y++)t.push(e[a])}return t},Ue.W=function(i){Oi(this);let e=[];if("string"==typeof i)cr(this,i)&&(e=e.concat(this.g.get(aa(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Ue.set=function(i,e){return Oi(this),this.i=null,cr(this,i=aa(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ue.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const y=encodeURIComponent(String(a)),C=this.W(a);for(a=0;a<C.length;a++){var f=y;""!==C[a]&&(f+="="+encodeURIComponent(String(C[a]))),i.push(f)}}return this.i=i.join("&")};var ro=10;function Ua(i){return!!i.h||!!i.g&&i.g.size>=i.j}function la(i){return i.h?1:i.g?i.g.size:0}function Yt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function gr(i,e){i.g?i.g.add(e):i.h=e}function ua(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ca(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return st(i.i)}function rs(){}function Q(){this.g=new rs}function W(i,e,t){const a=t||"";try{Ms(i,function(f,y){let C=f;nt(f)&&(C=hr(f)),e.push(a+y+"="+encodeURIComponent(C))})}catch(f){throw e.push(a+"type="+encodeURIComponent("_badmap")),f}}function ue(i,e,t,a,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(a)}catch{}}function Pt(i){this.l=i.ac||null,this.j=i.jb||!1}function Z(i,e){ft.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}po.prototype.cancel=function(){if(this.i=ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},rs.prototype.stringify=function(i){return Ne.JSON.stringify(i,void 0)},rs.prototype.parse=function(i){return Ne.JSON.parse(i,void 0)},Bt(Pt,vt),Pt.prototype.g=function(){return new Z(this.l,this.j)},Pt.prototype.i=function(i){return function(){return i}}({}),Bt(Z,ft);var q=0;function fe(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ae(i){i.readyState=4,i.l=null,i.j=null,i.A=null,je(i)}function je(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ue=Z.prototype).open=function(i,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,je(this)},Ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Ne).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ae(this)),this.readyState=q},Ue.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,je(this)),this.g&&(this.readyState=3,je(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ne.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fe(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Ue.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ae(this):je(this),3==this.readyState&&fe(this)}},Ue.Va=function(i){this.g&&(this.response=this.responseText=i,Ae(this))},Ue.Ua=function(i){this.g&&(this.response=i,Ae(this))},Ue.ga=function(){this.g&&Ae(this)},Ue.setRequestHeader=function(i,e){this.v.append(i,e)},Ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Z.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Tt=Ne.JSON.parse;function _t(i){ft.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bn,this.K=this.L=!1}Bt(_t,ft);var Bn="",Dn=/^https?$/i,lr=["POST","PUT"];function Wi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,zi(i),Ci(i)}function zi(i){i.D||(i.D=!0,tn(i,"complete"),tn(i,"error"))}function _i(i){if(i.h&&typeof bt<"u"&&(!i.C[1]||4!=qr(i)||2!=i.aa()))if(i.v&&4==qr(i))$r(i.Ha,0,i);else if(tn(i,"readystatechange"),4==qr(i)){i.h=!1;try{const P=i.aa();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===P){var f=String(i.H).match(Ui)[1]||null;if(!f&&Ne.self&&Ne.self.location){var y=Ne.self.location.protocol;f=y.substr(0,y.length-1)}a=!Dn.test(f?f.toLowerCase():"")}t=a}if(t)tn(i,"complete"),tn(i,"success");else{i.m=6;try{var C=2<qr(i)?i.g.statusText:""}catch{C=""}i.j=C+" ["+i.aa()+"]",zi(i)}}finally{Ci(i)}}}function Ci(i,e){if(i.g){is(i);const t=i.g,a=i.C[0]?Ge:null;i.g=null,i.C=null,e||tn(i,"ready");try{t.onreadystatechange=a}catch{}}}function is(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Ne.clearTimeout(i.A),i.A=null)}function qr(i){return i.g?i.g.readyState:0}function gs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Bn:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function jo(i){let e="";return yn(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function Ki(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=jo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):mi(i,e,t))}function qi(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function $o(i){this.Ca=0,this.i=[],this.j=new Bs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qi("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qi("baseRetryDelayMs",5e3,i),this.bb=qi("retryDelaySeedMs",1e4,i),this.$a=qi("forwardChannelMaxRetries",2,i),this.ta=qi("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new po(i&&i.concurrentRequestLimit),this.Fa=new Q,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vo(i){if(ne(i),3==i.G){var e=i.U++,t=no(i.F);mi(t,"SID",i.I),mi(t,"RID",e),mi(t,"TYPE","terminate"),Ct(i,t),(e=new Es(i,i.j,e,void 0)).K=2,e.v=fo(no(t)),t=!1,Ne.navigator&&Ne.navigator.sendBeacon&&(t=Ne.navigator.sendBeacon(e.v.toString(),"")),!t&&Ne.Image&&((new Image).src=e.v,t=!0),t||(e.g=fa(e.l,null),e.g.da(e.v)),e.F=Date.now(),eo(e)}da(i)}function F(i){i.g&&(di(i),i.g.cancel(),i.g=null)}function ne(i){F(i),i.u&&(Ne.clearTimeout(i.u),i.u=null),Qr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Ne.clearTimeout(i.m),i.m=null)}function $(i){Ua(i.h)||i.m||(i.m=!0,Xs(i.Ja,i),i.C=0)}function Ve(i,e){var t;t=e?e.m:i.U++;const a=no(i.F);mi(a,"SID",i.I),mi(a,"RID",t),mi(a,"AID",i.T),Ct(i,a),i.o&&i.s&&Ki(a,i.o,i.s),t=new Es(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Vt(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),gr(i.h,t),kr(t,a,e)}function Ct(i,e){i.ia&&yn(i.ia,function(t,a){mi(e,a,t)}),i.l&&Ms({},function(t,a){mi(e,a,t)})}function Vt(i,e,t){t=Math.min(i.i.length,t);var a=i.l?ge(i.l.Ra,i.l,i):null;e:{var f=i.i;let y=-1;for(;;){const C=["count="+t];-1==y?0<t?(y=f[0].h,C.push("ofs="+y)):y=0:C.push("ofs="+y);let P=!0;for(let J=0;J<t;J++){let re=f[J].h;const me=f[J].g;if(re-=y,0>re)y=Math.max(0,f[J].h-100),P=!1;else try{W(me,C,"req"+re+"_")}catch{a&&a(me)}}if(P){a=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,a}function Fn(i){i.g||i.u||(i.Z=1,Xs(i.Ia,i),i.A=0)}function ai(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ns(ge(i.Ia,i),hi(i,i.A)),i.A++,0))}function di(i){null!=i.B&&(Ne.clearTimeout(i.B),i.B=null)}function li(i){i.g=new Es(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=no(i.sa);mi(e,"RID","rpc"),mi(e,"SID",i.I),mi(e,"CI",i.L?"0":"1"),mi(e,"AID",i.T),mi(e,"TYPE","xmlhttp"),Ct(i,e),i.o&&i.s&&Ki(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=fo(no(e)),t.s=null,t.P=!0,Fr(t,i)}function Qr(i){null!=i.v&&(Ne.clearTimeout(i.v),i.v=null)}function ss(i,e){var t=null;if(i.g==e){Qr(i),di(i),i.g=null;var a=2}else{if(!Yt(i.h,e))return;t=e.D,ua(i.h,e),a=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var f=i.C;tn(a=Gi(),new Uo(a,t)),$(i)}else Fn(i);else if(3==(f=e.o)||0==f&&0<i.pa||!(1==a&&function ce(i,e){return!(la(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ns(ge(i.Ja,i,e),hi(i,i.C)),i.C++,0)))}(i,e)||2==a&&ai(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),f){case 1:xi(i,5);break;case 4:xi(i,10);break;case 3:xi(i,6);break;default:xi(i,2)}}function hi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function xi(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var a=ge(i.kb,i);t||(t=new to("//www.google.com/images/cleardot.gif"),Ne.location&&"http"==Ne.location.protocol||sa(t,"https"),fo(t)),function j(i,e){const t=new Bs;if(Ne.Image){const a=new Image;a.onload=ie(ue,t,a,"TestLoadImage: loaded",!0,e),a.onerror=ie(ue,t,a,"TestLoadImage: error",!1,e),a.onabort=ie(ue,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=ie(ue,t,a,"TestLoadImage: timeout",!1,e),Ne.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else Qi(2);i.G=0,i.l&&i.l.va(e),da(i),ne(i)}function da(i){if(i.G=0,i.la=[],i.l){const e=ca(i.h);(0!=e.length||0!=i.i.length)&&(Xt(i.la,e),Xt(i.la,i.i),i.h.i.length=0,st(i.i),i.i.length=0),i.l.ua()}}function ha(i,e,t){var a=t instanceof to?no(t):new to(t,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),zr(a,a.m);else{var f=Ne.location;a=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var y=new to(null,void 0);a&&sa(y,a),e&&(y.g=e),f&&zr(y,f),t&&(y.l=t),a=y}return e=i.za,(t=i.D)&&e&&mi(a,t,e),mi(a,"VER",i.ma),Ct(i,a),a}function fa(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _t(t&&i.Da&&!i.ra?new Pt({jb:!0}):i.ra)).Ka(i.H),e}function Ha(){}function Co(){if(Rr&&!(10<=Number(Vn)))throw Error("Environmental error: no available transport.")}function os(i,e){ft.call(this),this.g=new $o(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!jn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Xi(this)}function Vl(i){or.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Go(){Ei.call(this),this.status=1}function Xi(i){this.g=i}(Ue=_t.prototype).Ka=function(i){this.L=i},Ue.da=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ei.g(),this.C=function Wt(i){return i.h||(i.h=i.i())}(this.u?this.u:ei),this.g.onreadystatechange=ge(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void Wi(this,y)}if(i=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var f in a)t.set(f,a[f]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const y of a.keys())t.set(y,a.get(y))}a=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),f=Ne.FormData&&i instanceof Ne.FormData,!(0<=Fe(lr,e))||a||f||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,C]of t)this.g.setRequestHeader(y,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{is(this),0<this.B&&((this.K=function qn(i){return Rr&&function xn(){return function Tr(i){var e=kn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ii(String(pr)).split("."),t=ii("9").split("."),a=Math.max(e.length,t.length);for(let C=0;0==i&&C<a;C++){var f=e[C]||"",y=t[C]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==f[0].length&&0==y[0].length)break;i=br(0==f[1].length?0:parseInt(f[1],10),0==y[1].length?0:parseInt(y[1],10))||br(0==f[2].length,0==y[2].length)||br(f[2],y[2]),f=f[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ge(this.qa,this)):this.A=$r(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){Wi(this,y)}},Ue.qa=function(){typeof bt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tn(this,"timeout"),this.abort(8))},Ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,tn(this,"complete"),tn(this,"abort"),Ci(this))},Ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ci(this,!0)),_t.X.M.call(this)},Ue.Ha=function(){this.s||(this.F||this.v||this.l?_i(this):this.fb())},Ue.fb=function(){_i(this)},Ue.aa=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},Ue.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ue.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Tt(e)}},Ue.Ea=function(){return this.m},Ue.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ue=$o.prototype).ma=8,Ue.G=1,Ue.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const f=new Es(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=Ut(y),Gn(y,this.S)):y=this.S),null!==this.o||this.N||(f.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var a=this.i[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vt(this,f,e),mi(t=no(this.F),"RID",i),mi(t,"CVER",22),this.D&&mi(t,"X-HTTP-Session-Id",this.D),Ct(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(jo(y)))+"&"+e:this.o&&Ki(t,this.o,y)),gr(this.h,f),this.Ya&&mi(t,"TYPE","init"),this.O?(mi(t,"$req",e),mi(t,"SID","null"),f.Z=!0,kr(f,t,null)):kr(f,t,e),this.G=2}}else 3==this.G&&(i?Ve(this,i):0==this.i.length||Ua(this.h)||Ve(this))},Ue.Ia=function(){if(this.u=null,li(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ns(ge(this.eb,this),i)}},Ue.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qi(10),F(this),li(this))},Ue.cb=function(){null!=this.v&&(this.v=null,F(this),ai(this),Qi(19))},Ue.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Qi(2)):(this.j.info("Failed to ping google.com"),Qi(1))},(Ue=Ha.prototype).xa=function(){},Ue.wa=function(){},Ue.va=function(){},Ue.ua=function(){},Ue.Ra=function(){},Co.prototype.g=function(i,e){return new os(i,e)},Bt(os,ft),os.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Qi(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=ha(i,null,i.V),$(i)},os.prototype.close=function(){vo(this.g)},os.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=hr(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&$(e)},os.prototype.M=function(){this.g.l=null,delete this.j,vo(this.g),delete this.g,os.X.M.call(this)},Bt(Vl,or),Bt(Go,Ei),Bt(Xi,Ha),Xi.prototype.xa=function(){tn(this.g,"a")},Xi.prototype.wa=function(i){tn(this.g,new Vl(i))},Xi.prototype.va=function(i){tn(this.g,new Go)},Xi.prototype.ua=function(){tn(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,Xe.COMPLETE="complete",cn.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",ft.prototype.listen=ft.prototype.N,_t.prototype.listenOnce=_t.prototype.O,_t.prototype.getLastError=_t.prototype.Oa,_t.prototype.getLastErrorCode=_t.prototype.Ea,_t.prototype.getStatus=_t.prototype.aa,_t.prototype.getResponseJson=_t.prototype.Sa,_t.prototype.getResponseText=_t.prototype.fa,_t.prototype.send=_t.prototype.da,_t.prototype.setWithCredentials=_t.prototype.Ka;var Ul=rt.createWebChannelTransport=function(){return new Co},Gu=rt.getStatEventTarget=function(){return Gi()},yl=rt.ErrorCode=ct,lu=rt.EventType=Xe,Cl=rt.Event=zs,pa=rt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Sa=rt.FetchXmlHttpFactory=Pt,bu=rt.WebChannel=cn,Wu=rt.XhrIo=_t;const vl="@firebase/firestore";class io{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}io.UNAUTHENTICATED=new io(null),io.GOOGLE_CREDENTIALS=new io("google-credentials-uid"),io.FIRST_PARTY=new io("first-party-uid"),io.MOCK_USER=new io("mock-user");let Ts="9.15.0";const tl=new qe.Yd("@firebase/firestore");function ga(){return tl.logLevel}function rn(i,...e){if(tl.logLevel<=qe.in.DEBUG){const t=e.map(us);tl.debug(`Firestore (${Ts}): ${i}`,...t)}}function Hi(i,...e){if(tl.logLevel<=qe.in.ERROR){const t=e.map(us);tl.error(`Firestore (${Ts}): ${i}`,...t)}}function cl(i,...e){if(tl.logLevel<=qe.in.WARN){const t=e.map(us);tl.warn(`Firestore (${Ts}): ${i}`,...t)}}function us(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function fn(i="Unexpected state"){const e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+i;throw Hi(e),new Error(e)}function wn(i,e){i||fn()}function on(i,e){return i}const kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Is{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(io.UNAUTHENTICATED))}shutdown(){}}class ma{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Aa{constructor(e){this.t=e,this.currentUser=io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let f=this.i;const y=re=>this.i!==f?(f=this.i,t(re)):Promise.resolve();let C=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Ii,e.enqueueRetryable(()=>y(this.currentUser))};const P=()=>{const re=C;e.enqueueRetryable((0,$e.Z)(function*(){yield re.promise,yield y(a.currentUser)}))},J=re=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=re,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(re=>J(re)),setTimeout(()=>{if(!this.auth){const re=this.t.getImmediate({optional:!0});re?J(re):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Ii)}},0),P()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wn("string"==typeof a.accessToken),new Cs(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new io(e)}}class nl{constructor(e,t,a,f){this.h=e,this.l=t,this.m=a,this.g=f,this.type="FirstParty",this.user=io.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qs{constructor(e,t,a,f){this.h=e,this.l=t,this.m=a,this.g=f}getToken(){return Promise.resolve(new nl(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(io.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hl{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const a=y=>{null!=y.error&&rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const C=y.token!==this.A;return this.A=y.token,rn("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>a(y))};const f=y=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>f(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?f(y):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wn("string"==typeof t.token),this.A=t.token,new Sl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wu(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class Al{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const f=wu(40);for(let y=0;y<f.length;++y)a.length<20&&f[y]<t&&(a+=e.charAt(f[y]%e.length))}return a}}function Er(i,e){return i<e?-1:i>e?1:0}function Zo(i,e,t){return i.length===e.length&&i.every((a,f)=>t(a,e[f]))}function Ku(i){return i+"\0"}class Ss{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ss.fromMillis(Date.now())}static fromDate(e){return Ss.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Ss(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Er(this.nanoseconds,e.nanoseconds):Er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zn(e)}static min(){return new zn(new Ss(0,0))}static max(){return new zn(new Ss(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ys{constructor(e,t,a){void 0===t?t=0:t>e.length&&fn(),void 0===a?a=e.length-t:a>e.length-t&&fn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Ys.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let f=0;f<a;f++){const y=e.get(f),C=t.get(f);if(y<C)return-1;if(y>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ti extends Ys{construct(e,t,a){return new ti(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Zt(kt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(f=>f.length>0))}return new ti(t)}static emptyPath(){return new ti([])}}const jl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends Ys{construct(e,t,a){return new ui(e,t,a)}static isValidIdentifier(e){return jl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ui(["__name__"])}static fromServerFormat(e){const t=[];let a="",f=0;const y=()=>{if(0===a.length)throw new Zt(kt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let C=!1;for(;f<e.length;){const P=e[f];if("\\"===P){if(f+1===e.length)throw new Zt(kt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const J=e[f+1];if("\\"!==J&&"."!==J&&"`"!==J)throw new Zt(kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=J,f+=2}else"`"===P?(C=!C,f++):"."!==P||C?(a+=P,f++):(y(),f++)}if(y(),C)throw new Zt(kt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(t)}static emptyPath(){return new ui([])}}class _n{constructor(e){this.path=e}static fromPath(e){return new _n(ti.fromString(e))}static fromName(e){return new _n(ti.fromString(e).popFirst(5))}static empty(){return new _n(ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ti.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ti.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _n(new ti(e.slice()))}}class go{constructor(e,t,a,f){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=f}}function Na(i){return i.fields.find(e=>2===e.kind)}function Ra(i){return i.fields.filter(e=>2!==e.kind)}go.UNKNOWN_ID=-1;class ko{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pi(0,ja.min())}}function qu(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,f=zn.fromTimestamp(1e9===a?new Ss(t+1,0):new Ss(t,a));return new ja(f,_n.empty(),e)}function Eu(i){return new ja(i.readTime,i.key,-1)}class ja{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ja(zn.min(),_n.empty(),-1)}static max(){return new ja(zn.max(),_n.empty(),-1)}}function Du(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=_n.comparator(i.documentKey,e.documentKey),0!==t?t:Er(i.largestBatchId,e.largestBatchId))}const Kc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tu(i){return rl.apply(this,arguments)}function rl(){return rl=(0,$e.Z)(function*(i){if(i.code!==kt.FAILED_PRECONDITION||i.message!==Kc)throw i;rn("LocalStore","Unexpectedly lost primary lease")}),rl.apply(this,arguments)}class At{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new At((a,f)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(a,f)},this.catchCallback=y=>{this.wrapFailure(t,y).next(a,f)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof At?t:At.resolve(t)}catch(t){return At.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):At.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):At.reject(t)}static resolve(e){return new At((t,a)=>{t(e)})}static reject(e){return new At((t,a)=>{a(e)})}static waitFor(e){return new At((t,a)=>{let f=0,y=0,C=!1;e.forEach(P=>{++f,P.next(()=>{++y,C&&y===f&&t()},J=>a(J))}),C=!0,y===f&&t()})}static or(e){let t=At.resolve(!1);for(const a of e)t=t.next(f=>f?At.resolve(f):a());return t}static forEach(e,t){const a=[];return e.forEach((f,y)=>{a.push(t.call(this,f,y))}),this.waitFor(a)}static mapArray(e,t){return new At((a,f)=>{const y=e.length,C=new Array(y);let P=0;for(let J=0;J<y;J++){const re=J;t(e[re]).next(me=>{C[re]=me,++P,P===y&&a(C)},me=>f(me))}})}static doWhile(e,t){return new At((a,f)=>{const y=()=>{!0===e()?t().next(()=>{y()},f):a()};y()})}}class Cu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ii,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hl(e,t.error)):this.P.resolve()},this.transaction.onerror=a=>{const f=$l(a.target.error);this.P.reject(new hl(e,f))}}static open(e,t,a,f){try{return new Cu(t,e.transaction(f,a))}catch(y){throw new hl(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(rn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Yu(t)}}class yi{constructor(e,t,a){this.name=e,this.version=t,this.S=a,12.2===yi.D((0,ze.z$)())&&Hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rn("SimpleDb","Removing database:",e),Os(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ze.hl)())return!1;if(yi.N())return!0;const e=(0,ze.z$)(),t=yi.D(e),a=0<t&&t<10,f=yi.k(e),y=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||y)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var t=this;return(0,$e.Z)(function*(){return t.db||(rn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,f)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=C=>{a(C.target.result)},y.onblocked=()=>{f(new hl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=C=>{const P=C.target.error;f("VersionError"===P.name?new Zt(kt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new Zt(kt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new hl(e,P))},y.onupgradeneeded=C=>{rn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.$(C.target.result,y.transaction,C.oldVersion,t.version).next(()=>{rn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=a=>t.B(a)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,f){var y=this;return(0,$e.Z)(function*(){const C="readonly"===t;let P=0;for(;;){++P;try{y.db=yield y.F(e);const J=Cu.open(y.db,e,C?"readonly":"readwrite",a),re=f(J).next(me=>(J.V(),me)).catch(me=>(J.abort(me),At.reject(me))).toPromise();return re.catch(()=>{}),yield J.v,re}catch(J){const re=J,me="FirebaseError"!==re.name&&P<3;if(rn("SimpleDb","Transaction failed with error:",re.message,"Retrying:",me),y.close(),!me)return Promise.reject(re)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class il{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Os(this.q.delete())}}class hl extends Zt{constructor(e,t){super(kt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(i){return"IndexedDbTransactionError"===i.name}class Yu{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(rn("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Os(a)}add(e){return rn("SimpleDb","ADD",this.store.name,e,e),Os(this.store.add(e))}get(e){return Os(this.store.get(e)).next(t=>(void 0===t&&(t=null),rn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rn("SimpleDb","DELETE",this.store.name,e),Os(this.store.delete(e))}count(){return rn("SimpleDb","COUNT",this.store.name),Os(this.store.count())}W(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const f=this.cursor(a),y=[];return this.H(f,(C,P)=>{y.push(P)}).next(()=>y)}{const f=this.store.getAll(a.range);return new At((y,C)=>{f.onerror=P=>{C(P.target.error)},f.onsuccess=P=>{y(P.target.result)}})}}J(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new At((f,y)=>{a.onerror=C=>{y(C.target.error)},a.onsuccess=C=>{f(C.target.result)}})}Y(e,t){rn("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.X=!1;const f=this.cursor(a);return this.H(f,(y,C,P)=>P.delete())}Z(e,t){let a;t?a=e:(a={},t=e);const f=this.cursor(a);return this.H(f,t)}tt(e){const t=this.cursor({});return new At((a,f)=>{t.onerror=y=>{const C=$l(y.target.error);f(C)},t.onsuccess=y=>{const C=y.target.result;C?e(C.primaryKey,C.value).next(P=>{P?C.continue():a()}):a()}})}H(e,t){const a=[];return new At((f,y)=>{e.onerror=C=>{y(C.target.error)},e.onsuccess=C=>{const P=C.target.result;if(!P)return void f();const J=new il(P),re=t(P.primaryKey,P.value,J);if(re instanceof At){const me=re.catch(Ke=>(J.done(),At.reject(Ke)));a.push(me)}J.isDone?f():null===J.G?P.continue():P.continue(J.G)}}).next(()=>At.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Os(i){return new At((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const f=$l(a.target.error);t(f)}})}let Oa=!1;function $l(i){const e=yi.D((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oa||(Oa=!0,setTimeout(()=>{throw a},0)),a}}return i}class xa{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;rn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,$e.Z)(function*(){t.task=null;try{rn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(a){sl(a)?rn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield Tu(a)}yield t.nt(6e4)}))}}class A{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,$e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.it(a,e))})()}it(e,t){const a=new Set;let f=t,y=!0;return At.doWhile(()=>!0===y&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!a.has(C))return rn("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,f).next(P=>{f-=P,a.add(C)});y=!1})).next(()=>t-f)}rt(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(f=>this.localStore.localDocuments.getNextDocuments(e,t,f,a).next(y=>{const C=y.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(f,y)).next(P=>(rn("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,t,P))).next(()=>C.size)}))}ot(e,t){let a=e;return t.changes.forEach((f,y)=>{const C=Eu(y);Du(C,a)>0&&(a=C)}),new ja(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let M=(()=>{class i{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=f=>this.ut(f),this.ct=f=>a.writeSequenceNumber(f))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class S{constructor(e,t,a,f,y,C,P,J){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=f,this.ssl=y,this.forceLongPolling=C,this.autoDetectLongPolling=P,this.useFetchStreams=J}}class U{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new U("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof U&&e.projectId===this.projectId&&e.database===this.database}}function K(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ae(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Re(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function xe(i){return null==i}function Lt(i){return 0===i&&1/i==-1/0}function pn(i){return"number"==typeof i&&Number.isInteger(i)&&!Lt(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new gn(t)}static fromUint8Array(e){const t=function(a){let f="";for(let y=0;y<a.length;++y)f+=String.fromCharCode(a[y]);return f}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const ki=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(wn(!!i),"string"==typeof i){let e=0;const t=ki.exec(i);if(wn(!!t),t[1]){let f=t[1];f=(f+"000000000").substr(0,9),e=Number(f)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ri(i.seconds),nanos:Ri(i.nanos)}}function Ri(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fo(i){return"string"==typeof i?gn.fromBase64String(i):gn.fromUint8Array(i)}function _a(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Iu(i){const e=i.mapValue.fields.__previous_value__;return _a(e)?Iu(e):e}function ya(i){const e=ms(i.mapValue.fields.__local_write_time__.timestampValue);return new Ss(e.seconds,e.nanos)}const va={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},so={nullValue:"NULL_VALUE"};function $a(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_a(i)?4:le(i)?9007199254740991:10:fn()}function Qo(i,e){if(i===e)return!0;const t=$a(i);if(t!==$a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ya(i).isEqual(ya(e));case 3:return function(a,f){if("string"==typeof a.timestampValue&&"string"==typeof f.timestampValue&&a.timestampValue.length===f.timestampValue.length)return a.timestampValue===f.timestampValue;const y=ms(a.timestampValue),C=ms(f.timestampValue);return y.seconds===C.seconds&&y.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return f=e,Fo(i.bytesValue).isEqual(Fo(f.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,f){return Ri(a.geoPointValue.latitude)===Ri(f.geoPointValue.latitude)&&Ri(a.geoPointValue.longitude)===Ri(f.geoPointValue.longitude)}(i,e);case 2:return function(a,f){if("integerValue"in a&&"integerValue"in f)return Ri(a.integerValue)===Ri(f.integerValue);if("doubleValue"in a&&"doubleValue"in f){const y=Ri(a.doubleValue),C=Ri(f.doubleValue);return y===C?Lt(y)===Lt(C):isNaN(y)&&isNaN(C)}return!1}(i,e);case 9:return Zo(i.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(a,f){const y=a.mapValue.fields||{},C=f.mapValue.fields||{};if(K(y)!==K(C))return!1;for(const P in y)if(y.hasOwnProperty(P)&&(void 0===C[P]||!Qo(y[P],C[P])))return!1;return!0}(i,e);default:return fn()}var f}function zo(i,e){return void 0!==(i.values||[]).find(t=>Qo(t,e))}function Io(i,e){if(i===e)return 0;const t=$a(i),a=$a(e);if(t!==a)return Er(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Er(i.booleanValue,e.booleanValue);case 2:return function(f,y){const C=Ri(f.integerValue||f.doubleValue),P=Ri(y.integerValue||y.doubleValue);return C<P?-1:C>P?1:C===P?0:isNaN(C)?isNaN(P)?0:-1:1}(i,e);case 3:return Ga(i.timestampValue,e.timestampValue);case 4:return Ga(ya(i),ya(e));case 5:return Er(i.stringValue,e.stringValue);case 6:return function(f,y){const C=Fo(f),P=Fo(y);return C.compareTo(P)}(i.bytesValue,e.bytesValue);case 7:return function(f,y){const C=f.split("/"),P=y.split("/");for(let J=0;J<C.length&&J<P.length;J++){const re=Er(C[J],P[J]);if(0!==re)return re}return Er(C.length,P.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,y){const C=Er(Ri(f.latitude),Ri(y.latitude));return 0!==C?C:Er(Ri(f.longitude),Ri(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(f,y){const C=f.values||[],P=y.values||[];for(let J=0;J<C.length&&J<P.length;++J){const re=Io(C[J],P[J]);if(re)return re}return Er(C.length,P.length)}(i.arrayValue,e.arrayValue);case 10:return function(f,y){if(f===va.mapValue&&y===va.mapValue)return 0;if(f===va.mapValue)return 1;if(y===va.mapValue)return-1;const C=f.fields||{},P=Object.keys(C),J=y.fields||{},re=Object.keys(J);P.sort(),re.sort();for(let me=0;me<P.length&&me<re.length;++me){const Ke=Er(P[me],re[me]);if(0!==Ke)return Ke;const It=Io(C[P[me]],J[re[me]]);if(0!==It)return It}return Er(P.length,re.length)}(i.mapValue,e.mapValue);default:throw fn()}}function Ga(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Er(i,e);const t=ms(i),a=ms(e),f=Er(t.seconds,a.seconds);return 0!==f?f:Er(t.nanos,a.nanos)}function ol(i){return cu(i)}function cu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const f=ms(a);return`time(${f.seconds},${f.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fo(i.bytesValue).toBase64():"referenceValue"in i?_n.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let f="[",y=!0;for(const C of a.values||[])y?y=!1:f+=",",f+=cu(C);return f+"]"}(i.arrayValue):"mapValue"in i?function(a){const f=Object.keys(a.fields||{}).sort();let y="{",C=!0;for(const P of f)C?C=!1:y+=",",y+=`${P}:${cu(a.fields[P])}`;return y+"}"}(i.mapValue):fn();var e}function Jo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wa(i){return!!i&&"integerValue"in i}function du(i){return!!i&&"arrayValue"in i}function Zs(i){return!!i&&"nullValue"in i}function fl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function H(i){return!!i&&"mapValue"in i}function Y(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ae(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Y(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Y(i.arrayValue.values[t]);return e}return Object.assign({},i)}function le(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ce(i){return"nullValue"in i?so:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Jo(U.empty(),_n.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:fn()}function pt(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Jo(U.empty(),_n.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?va:fn()}function Rt(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function sn(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class On{constructor(e,t){this.position=e,this.inclusive=t}}function Qn(i,e,t){let a=0;for(let f=0;f<i.position.length;f++){const y=e[f],C=i.position[f];if(a=y.field.isKeyField()?_n.comparator(_n.fromName(C.referenceValue),t.key):Io(C,t.data.field(y.field)),"desc"===y.dir&&(a*=-1),0!==a)break}return a}function rr(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Qo(i.position[t],e.position[t]))return!1;return!0}class Gr{}class Cn extends Gr{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new Bh(e,t,a):"array-contains"===t?new vd(e,a):"in"===t?new Vh(e,a):"not-in"===t?new Su(e,a):"array-contains-any"===t?new oh(e,a):new Cn(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new sh(e,a):new rp(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Io(t,this.value)):null!==t&&$a(this.value)===$a(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Lr extends Gr{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Lr(e,t)}matches(e){return cs(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function cs(i){return"and"===i.op}function za(i){return"or"===i.op}function Nl(i){return Gl(i)&&cs(i)}function Gl(i){for(const e of i.filters)if(e instanceof Lr)return!1;return!0}function bo(i){if(i instanceof Cn)return i.field.canonicalString()+i.op.toString()+ol(i.value);{const e=i.filters.map(t=>bo(t)).join(",");return`${i.op}(${e})`}}function Ko(i,e){return i instanceof Cn?(t=i,(a=e)instanceof Cn&&t.op===a.op&&t.field.isEqual(a.field)&&Qo(t.value,a.value)):i instanceof Lr?function(t,a){return a instanceof Lr&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((f,y,C)=>f&&Ko(y,a.filters[C]),!0)}(i,e):void fn();var t,a}function qc(i,e){const t=i.filters.concat(e);return Lr.create(t,i.op)}function Yc(i){return i instanceof Cn?`${(e=i).field.canonicalString()} ${e.op} ${ol(e.value)}`:i instanceof Lr?function(e){return e.op.toString()+" {"+e.getFilters().map(Yc).join(" ,")+"}"}(i):"Filter";var e}class Bh extends Cn{constructor(e,t,a){super(e,t,a),this.key=_n.fromName(a.referenceValue)}matches(e){const t=_n.comparator(e.key,this.key);return this.matchesComparison(t)}}class sh extends Cn{constructor(e,t){super(e,"in",t),this.keys=yd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class rp extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=yd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>_n.fromName(a.referenceValue))}class vd extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return du(t)&&zo(t.arrayValue,this.value)}}class Vh extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zo(this.value.arrayValue,t)}}class Su extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zo(this.value.arrayValue,t)}}class oh extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!du(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>zo(this.value.arrayValue,a))}}class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function bd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class oo{constructor(e,t){this.comparator=e,this.root=t||Xo.EMPTY}insert(e,t){return new oo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new oo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const f=this.comparator(e,a.key);if(0===f)return t+a.left.size;f<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,t,a,f){this.isReverse=f,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?a(e.key,t):1,t&&f&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,t,a,f,y){this.key=e,this.value=t,this.color=a??Xo.RED,this.left=f??Xo.EMPTY,this.right=y??Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,f,y){return new Xo(e??this.key,t??this.value,a??this.color,f??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let f=this;const y=a(e,f.key);return f=y<0?f.copy(null,null,null,f.left.insert(e,t,a),null):0===y?f.copy(null,t,null,null,null):f.copy(null,null,null,null,f.right.insert(e,t,a)),f.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,f=this;if(t(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,t),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===t(e,f.key)){if(f.right.isEmpty())return Xo.EMPTY;a=f.right.min(),f=f.copy(a.key,a.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,t))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fn();const e=this.left.check();if(e!==this.right.check())throw fn();return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw fn()}get value(){throw fn()}get color(){throw fn()}get left(){throw fn()}get right(){throw fn()}copy(i,e,t,a,f){return this}insert(i,e,t){return new Xo(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class es{constructor(e){this.comparator=e,this.data=new oo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const f=a.getNext();if(this.comparator(f.key,e[1])>=0)return;t(f.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(e){return new Nu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof es)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=a.getNext().key;if(0!==this.comparator(f,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new es(this.comparator);return t.data=e,t}}class Nu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(i){return i.hasNext()?i.getNext():void 0}class wl{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new wl([])}unionWith(e){let t=new es(ui.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new wl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Ka{constructor(e){this.value=e}static empty(){return new Ka({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!H(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Y(t)}setAll(e){let t=ui.emptyPath(),a={},f=[];e.forEach((C,P)=>{if(!t.isImmediateParentOf(P)){const J=this.getFieldsMap(t);this.applyChanges(J,a,f),a={},f=[],t=P.popLast()}C?a[P.lastSegment()]=Y(C):f.push(P.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,a,f)}delete(e){const t=this.field(e.popLast());H(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let f=t.mapValue.fields[e.get(a)];H(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=f),t=f}return t.mapValue.fields}applyChanges(e,t,a){ae(t,(f,y)=>e[f]=y);for(const f of a)delete e[f]}clone(){return new Ka(Y(this.value))}}function Ec(i){const e=[];return ae(i.fields,(t,a)=>{const f=new ui([t]);if(H(a)){const y=Ec(a.mapValue).fields;if(0===y.length)e.push(f);else for(const C of y)e.push(f.child(C))}else e.push(f)}),new wl(e)}class ao{constructor(e,t,a,f,y,C,P){this.key=e,this.documentType=t,this.version=a,this.readTime=f,this.createTime=y,this.data=C,this.documentState=P}static newInvalidDocument(e){return new ao(e,0,zn.min(),zn.min(),zn.min(),Ka.empty(),0)}static newFoundDocument(e,t,a,f){return new ao(e,1,t,zn.min(),a,f,0)}static newNoDocument(e,t){return new ao(e,2,t,zn.min(),zn.min(),Ka.empty(),0)}static newUnknownDocument(e,t){return new ao(e,3,t,zn.min(),zn.min(),Ka.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ka.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ka.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ao&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pg{constructor(e,t=null,a=[],f=[],y=null,C=null,P=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=f,this.limit=y,this.startAt=C,this.endAt=P,this.ft=null}}function Dc(i,e=null,t=[],a=[],f=null,y=null,C=null){return new pg(i,e,t,a,f,y,C)}function Qu(i){const e=on(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>bo(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(f=a).field.canonicalString()+f.dir;var f}).join(","),xe(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ol(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ol(a)).join(",")),e.ft=t}return e.ft}function ah(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!bd(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Ko(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!rr(i.startAt,e.startAt)&&rr(i.endAt,e.endAt)}function lh(i){return _n.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function wd(i,e){return i.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function Ju(i,e,t){let a=so,f=!0;for(const y of wd(i,e)){let C=so,P=!0;switch(y.op){case"<":case"<=":C=Ce(y.value);break;case"==":case"in":case">=":C=y.value;break;case">":C=y.value,P=!1;break;case"!=":case"not-in":C=so}Rt({value:a,inclusive:f},{value:C,inclusive:P})<0&&(a=C,f=P)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];Rt({value:a,inclusive:f},{value:C,inclusive:t.inclusive})<0&&(a=C,f=t.inclusive);break}return{value:a,inclusive:f}}function Zc(i,e,t){let a=va,f=!0;for(const y of wd(i,e)){let C=va,P=!0;switch(y.op){case">=":case">":C=pt(y.value),P=!1;break;case"==":case"in":case"<=":C=y.value;break;case"<":C=y.value,P=!1;break;case"!=":case"not-in":C=va}sn({value:a,inclusive:f},{value:C,inclusive:P})>0&&(a=C,f=P)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];sn({value:a,inclusive:f},{value:C,inclusive:t.inclusive})>0&&(a=C,f=t.inclusive);break}return{value:a,inclusive:f}}class El{constructor(e,t=null,a=[],f=[],y=null,C="F",P=null,J=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=f,this.limit=y,this.limitType=C,this.startAt=P,this.endAt=J,this.dt=null,this._t=null}}function uh(i,e,t,a,f,y,C,P){return new El(i,e,t,a,f,y,C,P)}function qo(i){return new El(i)}function Wl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ru(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function ch(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Qc(i){return null!==i.collectionGroup}function Rl(i){const e=on(i);if(null===e.dt){e.dt=[];const t=ch(e),a=Ru(e);if(null!==t&&null===a)t.isKeyField()||e.dt.push(new Zu(t)),e.dt.push(new Zu(ui.keyField(),"asc"));else{let f=!1;for(const y of e.explicitOrderBy)e.dt.push(y),y.field.isKeyField()&&(f=!0);if(!f){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Zu(ui.keyField(),y))}}}return e.dt}function Lo(i){const e=on(i);if(!e._t)if("F"===e.limitType)e._t=Dc(e.path,e.collectionGroup,Rl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of Rl(e))t.push(new Zu(y.field,"desc"===y.dir?"asc":"desc"));const a=e.endAt?new On(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new On(e.startAt.position,e.startAt.inclusive):null;e._t=Dc(e.path,e.collectionGroup,t,e.filters,e.limit,a,f)}return e._t}function Tc(i,e){e.getFirstInequalityField(),ch(i);const t=i.filters.concat([e]);return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function al(i,e,t){return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function fi(i,e){return ah(Lo(i),Lo(e))&&i.limitType===e.limitType}function Jc(i){return`${Qu(Lo(i))}|lt:${i.limitType}`}function Xc(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>Yc(a)).join(", ")}]`),xe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(f=a).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ol(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ol(a)).join(",")),`Target(${t})`}(Lo(i))}; limitType=${i.limitType})`}function wo(i,e){return e.isFoundDocument()&&function(t,a){const f=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(f):_n.isDocumentKey(t.path)?t.path.isEqual(f):t.path.isImmediateParentOf(f)}(i,e)&&function(t,a){for(const f of Rl(t))if(!f.field.isKeyField()&&null===a.data.field(f.field))return!1;return!0}(i,e)&&function(t,a){for(const f of t.filters)if(!f.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(f,y,C){const P=Qn(f,y,C);return f.inclusive?P<=0:P<0}(t.startAt,Rl(t),a)||t.endAt&&!function(f,y,C){const P=Qn(f,y,C);return f.inclusive?P>=0:P>0}(t.endAt,Rl(t),a)));var t,a}function Ed(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function N(i){return(e,t)=>{let a=!1;for(const f of Rl(i)){const y=b(f,e,t);if(0!==y)return y;a=a||f.field.isKeyField()}return 0}}function b(i,e,t){const a=i.field.isKeyField()?_n.comparator(e.key,t.key):function(f,y,C){const P=y.data.field(f),J=C.data.field(f);return null!==P&&null!==J?Io(P,J):fn()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return fn()}}function D(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lt(e)?"-0":e}}function k(i){return{integerValue:""+i}}function oe(i,e){return pn(e)?k(e):D(i,e)}class _e{constructor(){this._=void 0}}function Et(i,e,t){return i instanceof nr?function(a,f){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return f&&(y.fields.__previous_value__=f),{mapValue:y}}(t,e):i instanceof Ir?ts(i,e):i instanceof Eo?qa(i,e):function(a,f){const y=Hn(a,f),C=zl(y)+zl(a.gt);return Wa(y)&&Wa(a.gt)?k(C):D(a.yt,C)}(i,e)}function nn(i,e,t){return i instanceof Ir?ts(i,e):i instanceof Eo?qa(i,e):t}function Hn(i,e){return i instanceof Dl?Wa(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class nr extends _e{}class Ir extends _e{constructor(e){super(),this.elements=e}}function ts(i,e){const t=Kl(e);for(const a of i.elements)t.some(f=>Qo(f,a))||t.push(a);return{arrayValue:{values:t}}}class Eo extends _e{constructor(e){super(),this.elements=e}}function qa(i,e){let t=Kl(e);for(const a of i.elements)t=t.filter(f=>!Qo(f,a));return{arrayValue:{values:t}}}class Dl extends _e{constructor(e,t){super(),this.yt=e,this.gt=t}}function zl(i){return Ri(i.integerValue||i.doubleValue)}function Kl(i){return du(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Mu{constructor(e,t){this.field=e,this.transform=t}}class Xu{constructor(e,t){this.version=e,this.transformResults=t}}class lo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lo}static exists(e){return new lo(void 0,e)}static updateTime(e){return new lo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class ec{}function Cc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new td(i.key,lo.none()):new Td(i.key,i.data,lo.none());{const t=i.data,a=Ka.empty();let f=new es(ui.comparator);for(let y of e.fields)if(!f.has(y)){let C=t.field(y);null===C&&y.length>1&&(y=y.popLast(),C=t.field(y)),null===C?a.delete(y):a.set(y,C),f=f.add(y)}return new xu(i.key,a,new wl(f.toArray()),lo.none())}}function Uh(i,e,t){i instanceof Td?function(a,f,y){const C=a.value.clone(),P=gg(a.fieldTransforms,f,y.transformResults);C.setAll(P),f.convertToFoundDocument(y.version,C).setHasCommittedMutations()}(i,e,t):i instanceof xu?function(a,f,y){if(!Dd(a.precondition,f))return void f.convertToUnknownDocument(y.version);const C=gg(a.fieldTransforms,f,y.transformResults),P=f.data;P.setAll(Cd(a)),P.setAll(C),f.convertToFoundDocument(y.version,P).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ed(i,e,t,a){return i instanceof Td?function(f,y,C,P){if(!Dd(f.precondition,y))return C;const J=f.value.clone(),re=Id(f.fieldTransforms,P,y);return J.setAll(re),y.convertToFoundDocument(y.version,J).setHasLocalMutations(),null}(i,e,t,a):i instanceof xu?function(f,y,C,P){if(!Dd(f.precondition,y))return C;const J=Id(f.fieldTransforms,P,y),re=y.data;return re.setAll(Cd(f)),re.setAll(J),y.convertToFoundDocument(y.version,re).setHasLocalMutations(),null===C?null:C.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(me=>me.field))}(i,e,t,a):(C=t,Dd(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):C);var y,C}function ql(i,e){let t=null;for(const a of i.fieldTransforms){const f=e.data.field(a.field),y=Hn(a.transform,f||null);null!=y&&(null===t&&(t=Ka.empty()),t.set(a.field,y))}return t||null}function Ou(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&Zo(t,a,(f,y)=>function wf(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof Ir&&a instanceof Ir||t instanceof Eo&&a instanceof Eo?Zo(t.elements,a.elements,Qo):t instanceof Dl&&a instanceof Dl?Qo(t.gt,a.gt):t instanceof nr&&a instanceof nr);var t,a}(f,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}class Td extends ec{constructor(e,t,a,f=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class xu extends ec{constructor(e,t,a,f,y=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=f,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function Cd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function gg(i,e,t){const a=new Map;wn(i.length===t.length);for(let f=0;f<t.length;f++){const y=i[f],C=y.transform,P=e.data.field(y.field);a.set(y.field,nn(C,P,t[f]))}return a}function Id(i,e,t){const a=new Map;for(const f of i){const y=f.transform,C=t.data.field(f.field);a.set(f.field,Et(y,C,e))}return a}class td extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hh extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ef{constructor(e){this.count=e}}var Bo,Si;function tc(i){switch(i){default:return fn();case kt.CANCELLED:case kt.UNKNOWN:case kt.DEADLINE_EXCEEDED:case kt.RESOURCE_EXHAUSTED:case kt.INTERNAL:case kt.UNAVAILABLE:case kt.UNAUTHENTICATED:return!1;case kt.INVALID_ARGUMENT:case kt.NOT_FOUND:case kt.ALREADY_EXISTS:case kt.PERMISSION_DENIED:case kt.FAILED_PRECONDITION:case kt.ABORTED:case kt.OUT_OF_RANGE:case kt.UNIMPLEMENTED:case kt.DATA_LOSS:return!0}}function dh(i){if(void 0===i)return Hi("GRPC error has no .code"),kt.UNKNOWN;switch(i){case Bo.OK:return kt.OK;case Bo.CANCELLED:return kt.CANCELLED;case Bo.UNKNOWN:return kt.UNKNOWN;case Bo.DEADLINE_EXCEEDED:return kt.DEADLINE_EXCEEDED;case Bo.RESOURCE_EXHAUSTED:return kt.RESOURCE_EXHAUSTED;case Bo.INTERNAL:return kt.INTERNAL;case Bo.UNAVAILABLE:return kt.UNAVAILABLE;case Bo.UNAUTHENTICATED:return kt.UNAUTHENTICATED;case Bo.INVALID_ARGUMENT:return kt.INVALID_ARGUMENT;case Bo.NOT_FOUND:return kt.NOT_FOUND;case Bo.ALREADY_EXISTS:return kt.ALREADY_EXISTS;case Bo.PERMISSION_DENIED:return kt.PERMISSION_DENIED;case Bo.FAILED_PRECONDITION:return kt.FAILED_PRECONDITION;case Bo.ABORTED:return kt.ABORTED;case Bo.OUT_OF_RANGE:return kt.OUT_OF_RANGE;case Bo.UNIMPLEMENTED:return kt.UNIMPLEMENTED;case Bo.DATA_LOSS:return kt.DATA_LOSS;default:return fn()}}(Si=Bo||(Bo={}))[Si.OK=0]="OK",Si[Si.CANCELLED=1]="CANCELLED",Si[Si.UNKNOWN=2]="UNKNOWN",Si[Si.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Si[Si.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Si[Si.NOT_FOUND=5]="NOT_FOUND",Si[Si.ALREADY_EXISTS=6]="ALREADY_EXISTS",Si[Si.PERMISSION_DENIED=7]="PERMISSION_DENIED",Si[Si.UNAUTHENTICATED=16]="UNAUTHENTICATED",Si[Si.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Si[Si.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Si[Si.ABORTED=10]="ABORTED",Si[Si.OUT_OF_RANGE=11]="OUT_OF_RANGE",Si[Si.UNIMPLEMENTED=12]="UNIMPLEMENTED",Si[Si.INTERNAL=13]="INTERNAL",Si[Si.UNAVAILABLE=14]="UNAVAILABLE",Si[Si.DATA_LOSS=15]="DATA_LOSS";class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[f,y]of a)if(this.equalsFn(f,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),f=this.inner[a];if(void 0===f)return this.inner[a]=[[e,t]],void this.innerSize++;for(let y=0;y<f.length;y++)if(this.equalsFn(f[y][0],e))return void(f[y]=[e,t]);f.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let f=0;f<a.length;f++)if(this.equalsFn(a[f][0],e))return 1===a.length?delete this.inner[t]:a.splice(f,1),this.innerSize--,!0;return!1}forEach(e){ae(this.inner,(t,a)=>{for(const[f,y]of a)e(f,y)})}isEmpty(){return Re(this.inner)}size(){return this.innerSize}}const Dm=new oo(_n.comparator);function Ya(){return Dm}const nc=new oo(_n.comparator);function Sd(...i){let e=nc;for(const t of i)e=e.insert(t.key,t);return e}function Ic(i){let e=nc;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Ol(){return hu()}function jh(){return hu()}function hu(){return new Ml(i=>i.toString(),(i,e)=>i.isEqual(e))}const mg=new oo(_n.comparator),Za=new es(_n.comparator);function Jr(...i){let e=Za;for(const t of i)e=e.add(t);return e}const rc=new es(Er);function Sc(){return rc}class Pa{constructor(e,t,a,f,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=f,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const f=new Map;return f.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Pa(zn.min(),f,Sc(),Ya(),Jr())}}class xl{constructor(e,t,a,f,y){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=f,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new xl(a,t,Jr(),Jr(),Jr())}}class nd{constructor(e,t,a,f){this.It=e,this.removedTargetIds=t,this.key=a,this.Tt=f}}class Ad{constructor(e,t){this.targetId=e,this.Et=t}}class Yl{constructor(e,t,a=gn.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=f}}class $h{constructor(){this.At=0,this.Rt=Nd(),this.bt=gn.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Jr(),t=Jr(),a=Jr();return this.Rt.forEach((f,y)=>{switch(y){case 0:e=e.add(f);break;case 2:t=t.add(f);break;case 1:a=a.add(f);break;default:fn()}}),new xl(this.bt,this.Pt,e,t,a)}xt(){this.vt=!1,this.Rt=Nd()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class hh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ya(),this.qt=fh(),this.Ut=new es(Er)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const a=this.Wt(t);switch(e.state){case 0:this.zt(t)&&a.Dt(e.resumeToken);break;case 1:a.Mt(),a.Vt||a.xt(),a.Dt(e.resumeToken);break;case 2:a.Mt(),a.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(a.Ft(),a.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),a.Dt(e.resumeToken));break;default:fn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((a,f)=>{this.zt(f)&&t(f)})}Jt(e){const t=e.targetId,a=e.Et.count,f=this.Yt(t);if(f){const y=f.target;if(lh(y))if(0===a){const C=new _n(y.path);this.Qt(t,C,ao.newNoDocument(C,zn.min()))}else wn(1===a);else this.Xt(t)!==a&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((y,C)=>{const P=this.Yt(C);if(P){if(y.current&&lh(P.target)){const J=new _n(P.target.path);null!==this.Lt.get(J)||this.te(C,J)||this.Qt(C,J,ao.newNoDocument(J,e))}y.St&&(t.set(C,y.Ct()),y.xt())}});let a=Jr();this.qt.forEach((y,C)=>{let P=!0;C.forEachWhile(J=>{const re=this.Yt(J);return!re||2===re.purpose||(P=!1,!1)}),P&&(a=a.add(y))}),this.Lt.forEach((y,C)=>C.setReadTime(e));const f=new Pa(e,t,this.Ut,this.Lt,a);return this.Lt=Ya(),this.qt=fh(),this.Ut=new es(Er),f}Gt(e,t){if(!this.zt(e))return;const a=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,a),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,a){if(!this.zt(e))return;const f=this.Wt(e);this.te(e,t)?f.Nt(t,1):f.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),a&&(this.Lt=this.Lt.insert(t,a))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new $h,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new es(Er),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new $h),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function fh(){return new oo(_n.comparator)}function Nd(){return new oo(_n.comparator)}const ph={asc:"ASCENDING",desc:"DESCENDING"},Df={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_g={and:"AND",or:"OR"};class Tm{constructor(e,t){this.databaseId=e,this.wt=t}}function fu(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rd(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Ac(i,e){return fu(i,e.toTimestamp())}function Qs(i){return wn(!!i),zn.fromTimestamp(function(e){const t=ms(e);return new Ss(t.seconds,t.nanos)}(i))}function rd(i,e){return(t=i,new ti(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Pu(i){const e=ti.fromString(i);return wn(bg(e)),e}function id(i,e){return rd(i.databaseId,e.path)}function Zl(i,e){const t=Pu(e);if(t.get(1)!==i.databaseId.projectId)throw new Zt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Zt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new _n(Wh(t))}function Gh(i,e){return rd(i.databaseId,e)}function pu(i){const e=Pu(i);return 4===e.length?ti.emptyPath():Wh(e)}function sd(i){return new ti(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Wh(i){return wn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Tf(i,e,t){return{name:id(i,e),fields:t.value.mapValue.fields}}function gh(i,e,t){const a=Zl(i,e.name),f=Qs(e.updateTime),y=e.createTime?Qs(e.createTime):zn.min(),C=new Ka({mapValue:{fields:e.fields}}),P=ao.newFoundDocument(a,f,y,C);return t&&P.setHasCommittedMutations(),t?P.setHasCommittedMutations():P}function od(i,e){let t;if(e instanceof Td)t={update:Tf(i,e.key,e.value)};else if(e instanceof td)t={delete:id(i,e.key)};else if(e instanceof xu)t={update:Tf(i,e.key,e.data),updateMask:Im(e.fieldMask)};else{if(!(e instanceof Hh))return fn();t={verify:id(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,y){const C=y.transform;if(C instanceof nr)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Ir)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Eo)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Dl)return{fieldPath:y.field.canonicalString(),increment:C.gt};throw fn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:Ac(i,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:fn()),t;var f}function Kh(i,e){const t=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?lo.updateTime(Qs(f.updateTime)):void 0!==f.exists?lo.exists(f.exists):lo.none():lo.none(),a=e.updateTransforms?e.updateTransforms.map(f=>function(y,C){let P=null;"setToServerValue"in C?(wn("REQUEST_TIME"===C.setToServerValue),P=new nr):"appendMissingElements"in C?P=new Ir(C.appendMissingElements.values||[]):"removeAllFromArray"in C?P=new Eo(C.removeAllFromArray.values||[]):"increment"in C?P=new Dl(y,C.increment):fn();const J=ui.fromServerFormat(C.fieldPath);return new Mu(J,P)}(i,f)):[];var f;if(e.update){const f=Zl(i,e.update.name),y=new Ka({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new wl((e.updateMask.fieldPaths||[]).map(re=>ui.fromServerFormat(re)));return new xu(f,y,C,t,a)}return new Td(f,y,t,a)}if(e.delete){const f=Zl(i,e.delete);return new td(f,t)}if(e.verify){const f=Zl(i,e.verify);return new Hh(f,t)}return fn()}function yg(i,e){return{documents:[Gh(i,e.path)]}}function sp(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=Gh(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Gh(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const f=function(J){if(0!==J.length)return If(Lr.create(J,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const y=function(J){if(0!==J.length)return J.map(re=>{return{field:_h((me=re).field),direction:Nc(me.dir)};var me})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const C=(re=e.limit,i.wt||xe(re)?re:{value:re});var re,P,J;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt={before:!(J=e.endAt).inclusive,values:J.position}),t}function vg(i){let e=pu(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let f=null;if(a>0){wn(1===a);const me=t.from[0];me.allDescendants?f=me.collectionId:e=e.child(me.collectionId)}let y=[];t.where&&(y=function(me){const Ke=Cf(me);return Ke instanceof Lr&&Nl(Ke)?Ke.getFilters():[Ke]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(me=>{return new Zu(yh((Ke=me).field),function(It){switch(It){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ke.direction));var Ke}));let P=null;t.limit&&(P=function(me){let Ke;return Ke="object"==typeof me?me.value:me,xe(Ke)?null:Ke}(t.limit));let J=null;var me;t.startAt&&(J=new On((me=t.startAt).values||[],!!me.before));let re=null;return t.endAt&&(re=function(me){return new On(me.values||[],!me.before)}(t.endAt)),uh(e,f,C,y,P,"F",J,re)}function Cf(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yh(e.unaryFilter.field);return Cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=yh(e.unaryFilter.field);return Cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=yh(e.unaryFilter.field);return Cn.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=yh(e.unaryFilter.field);return Cn.create(y,"!=",{nullValue:"NULL_VALUE"});default:return fn()}}(i):void 0!==i.fieldFilter?Cn.create(yh((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Lr.create(e.compositeFilter.filters.map(t=>Cf(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return fn()}}(e.compositeFilter.op))}(i):fn();var e}function Nc(i){return ph[i]}function mh(i){return Df[i]}function op(i){return _g[i]}function _h(i){return{fieldPath:i.canonicalString()}}function yh(i){return ui.fromServerFormat(i.fieldPath)}function If(i){return i instanceof Cn?function(e){if("=="===e.op){if(fl(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NAN"}};if(Zs(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fl(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NAN"}};if(Zs(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_h(e.field),op:mh(e.op),value:e.value}}}(i):i instanceof Lr?function(e){const t=e.getFilters().map(a=>If(a));return 1===t.length?t[0]:{compositeFilter:{op:op(e.op),filters:t}}}(i):fn()}function Im(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function mo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=qh(e)),e=Sm(i.get(t),e);return qh(e)}function Sm(i,e){let t=e;const a=i.length;for(let f=0;f<a;f++){const y=i.charAt(f);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function qh(i){return i+"\x01\x01"}function ku(i){const e=i.length;if(wn(e>=2),2===e)return wn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ti.emptyPath();const t=e-2,a=[];let f="";for(let y=0;y<e;){const C=i.indexOf("\x01",y);switch((C<0||C>t)&&fn(),i.charAt(C+1)){case"\x01":const P=i.substring(y,C);let J;0===f.length?J=P:(f+=P,J=f,f=""),a.push(J);break;case"\x10":f+=i.substring(y,C),f+="\0";break;case"\x11":f+=i.substring(y,C+1);break;default:fn()}y=C+2}return new ti(a)}const wg=["userId","batchId"];function Rc(i,e){return[i,mo(e)]}function ic(i,e,t){return[i,mo(e),t]}const Yh={},Sf=["prefixPath","collectionGroup","readTime","documentId"],Eg=["prefixPath","collectionGroup","documentId"],ap=["collectionGroup","readTime","prefixPath","documentId"],N_=["canonicalId","targetId"],R_=["targetId","path"],_y=["path","targetId"],vh=["collectionId","parent"],lp=["indexId","uid"],M_=["uid","sequenceNumber"],O_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dg=["indexId","uid","orderedDocumentKey"],up=["userId","collectionPath","documentId"],Am=["userId","collectionPath","largestBatchId"],Nm=["userId","collectionGroup","largestBatchId"],Tg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cg=[...Tg,"documentOverlays"],Zh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ig=Zh,cp=[...Ig,"indexConfiguration","indexState","indexEntries"];class dp extends uu{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Fi(i,e){const t=on(i);return yi.M(t.se,e)}class ad{constructor(e,t,a,f){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=f}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let f=0;f<this.mutations.length;f++){const y=this.mutations[f];y.key.isEqual(e.key)&&Uh(y,e,a[f])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ed(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ed(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=jh();return this.mutations.forEach(f=>{const y=e.get(f.key),C=y.overlayedDocument;let P=this.applyToLocalView(C,y.mutatedFields);P=t.has(f.key)?null:P;const J=Cc(C,P);null!==J&&a.set(f.key,J),C.isValidDocument()||C.convertToNoDocument(zn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jr())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(t,a)=>Ou(t,a))&&Zo(this.baseMutations,e.baseMutations,(t,a)=>Ou(t,a))}}class hp{constructor(e,t,a,f){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=f}static from(e,t,a){wn(e.mutations.length===a.length);let f=mg;const y=e.mutations;for(let C=0;C<y.length;C++)f=f.insert(y[C].key,a[C].version);return new hp(e,t,a,f)}}class Qh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mc{constructor(e,t,a,f,y=zn.min(),C=zn.min(),P=gn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=f,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=P}withSequenceNumber(e){return new Mc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sg{constructor(e){this.ie=e}}function Qa(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:id(f=i.ie,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:fu(f,y.version.toTimestamp()),createTime:fu(f,y.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Fu(e.version)};else{if(!e.isUnknownDocument())return fn();a.unknownDocument={path:t.path.toArray(),version:Fu(e.version)}}var f,y;return a}function pl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Fu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ud(i){const e=new Ss(i.seconds,i.nanoseconds);return zn.fromTimestamp(e)}function Od(i,e){const t=(e.baseMutations||[]).map(y=>Kh(i.ie,y));for(let y=0;y<e.mutations.length-1;++y){const C=e.mutations[y];y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(C.updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y)}const a=e.mutations.map(y=>Kh(i.ie,y)),f=Ss.fromMillis(e.localWriteTimeMs);return new ad(e.batchId,f,t,a)}function sc(i){const e=ud(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ud(i.lastLimboFreeSnapshotVersion):zn.min();let a;var f;return void 0!==i.query.documents?(wn(1===(f=i.query).documents.length),a=Lo(qo(pu(f.documents[0])))):a=Lo(vg(i.query)),new Mc(a,i.targetId,0,i.lastListenSequenceNumber,e,t,gn.fromBase64String(i.resumeToken))}function m(i,e){const t=Fu(e.snapshotVersion),a=Fu(e.lastLimboFreeSnapshotVersion);let f;f=lh(e.target)?yg(i.ie,e.target):sp(i.ie,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qu(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:f}}function E(i){const e=vg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?al(e,e.limit,"L"):e}function p(i,e){return new Qh(e.largestBatchId,Kh(i.ie,e.overlayMutation))}function w(i,e){const t=e.path.lastSegment();return[i,mo(e.path.popLast()),t]}function R(i,e,t,a){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Fu(a.readTime),documentKey:mo(a.documentKey.path),largestBatchId:a.largestBatchId}}class z{getBundleMetadata(e,t){return De(e).get(t).next(a=>{if(a)return{id:(f=a).bundleId,createTime:ud(f.createTime),version:f.version};var f})}saveBundleMetadata(e,t){return De(e).put({bundleId:(a=t).id,createTime:Fu(Qs(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return Ye(e).get(t).next(a=>{if(a)return{name:(f=a).name,query:E(f.bundledQuery),readTime:ud(f.readTime)};var f})}saveNamedQuery(e,t){return Ye(e).put({name:(a=t).name,readTime:Fu(Qs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function De(i){return Fi(i,"bundles")}function Ye(i){return Fi(i,"namedQueries")}class it{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new it(e,t.uid||"")}getOverlay(e,t){return Ft(e).get(w(this.userId,t)).next(a=>a?p(this.yt,a):null)}getOverlays(e,t){const a=Ol();return At.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&a.set(f,y)})).next(()=>a)}saveOverlays(e,t,a){const f=[];return a.forEach((y,C)=>{const P=new Qh(t,C);f.push(this.oe(e,P))}),At.waitFor(f)}removeOverlaysForBatchId(e,t,a){const f=new Set;t.forEach(C=>f.add(mo(C.getCollectionPath())));const y=[];return f.forEach(C=>{const P=IDBKeyRange.bound([this.userId,C,a],[this.userId,C,a+1],!1,!0);y.push(Ft(e).Y("collectionPathOverlayIndex",P))}),At.waitFor(y)}getOverlaysForCollection(e,t,a){const f=Ol(),y=mo(t),C=IDBKeyRange.bound([this.userId,y,a],[this.userId,y,Number.POSITIVE_INFINITY],!0);return Ft(e).W("collectionPathOverlayIndex",C).next(P=>{for(const J of P){const re=p(this.yt,J);f.set(re.getKey(),re)}return f})}getOverlaysForCollectionGroup(e,t,a,f){const y=Ol();let C;const P=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ft(e).Z({index:"collectionGroupOverlayIndex",range:P},(J,re,me)=>{const Ke=p(this.yt,re);y.size()<f||Ke.largestBatchId===C?(y.set(Ke.getKey(),Ke),C=Ke.largestBatchId):me.done()}).next(()=>y)}oe(e,t){return Ft(e).put(function(a,f,y){const[C,P,J]=w(f,y.mutation.key);return{userId:f,collectionPath:P,documentId:J,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:od(a.ie,y.mutation)}}(this.yt,this.userId,t))}}function Ft(i){return Fi(i,"documentOverlays")}class Ot{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Ri(e.integerValue));else if("doubleValue"in e){const a=Ri(e.doubleValue);isNaN(a)?this.he(t,13):(this.he(t,15),Lt(a)?t.le(0):t.le(a))}else if("timestampValue"in e){const a=e.timestampValue;this.he(t,20),"string"==typeof a?t.fe(a):(t.fe(`${a.seconds||""}`),t.le(a.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Fo(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.he(t,45),t.le(a.latitude||0),t.le(a.longitude||0)}else"mapValue"in e?le(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):fn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const a=e.fields||{};this.he(t,55);for(const f of Object.keys(a))this.de(f,t),this.ce(a[f],t)}ye(e,t){const a=e.values||[];this.he(t,50);for(const f of a)this.ce(f,t)}me(e,t){this.he(t,37),_n.fromName(e).path.forEach(a=>{this.he(t,60),this.pe(a,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Un(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function mn(i){const e=64-function(t){let a=0;for(let f=0;f<8;++f){const y=Un(255&t[f]);if(a+=y,8!==y)break}return a}(i);return Math.ceil(e/8)}Ot.Ie=new Ot;class Jn{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ee(a.value),a=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.be(a.value),a=t.next();this.Pe()}ve(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ee(a);else if(a<2048)this.Ee(960|a>>>6),this.Ee(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a);else{const f=t.codePointAt(0);this.Ee(240|f>>>18),this.Ee(128|63&f>>>12),this.Ee(128|63&f>>>6),this.Ee(128|63&f)}}this.Ae()}Ve(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.be(a);else if(a<2048)this.be(960|a>>>6),this.be(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.be(480|a>>>12),this.be(128|63&a>>>6),this.be(128|63&a);else{const f=t.codePointAt(0);this.be(240|f>>>18),this.be(128|63&f>>>12),this.be(128|63&f>>>6),this.be(128|63&f)}}this.Pe()}Se(e){const t=this.De(e),a=mn(t);this.Ce(1+a),this.buffer[this.position++]=255&a;for(let f=t.length-a;f<t.length;++f)this.buffer[this.position++]=255&t[f]}xe(e){const t=this.De(e),a=mn(t);this.Ce(1+a),this.buffer[this.position++]=~(255&a);for(let f=t.length-a;f<t.length;++f)this.buffer[this.position++]=~(255&t[f])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(f){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,f,!1),new Uint8Array(y.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let f=1;f<t.length;++f)t[f]^=a?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const f=new Uint8Array(a);f.set(this.buffer),this.buffer=f}}class Li{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class yr{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class xr{constructor(){this.$e=new Jn,this.Be=new Li(this.$e),this.Le=new yr(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class pi{constructor(e,t,a,f){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=f}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new pi(this.indexId,this.documentKey,this.arrayValue,a)}}function Yr(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=xs(i.arrayValue,e.arrayValue),0!==t?t:(t=xs(i.directionalValue,e.directionalValue),0!==t?t:_n.comparator(i.documentKey,e.documentKey)))}function xs(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class vi{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const a=t;a.isInequality()?this.Qe=a:this.Ge.push(a)}}je(e){wn(e.collectionGroup===this.collectionId);const t=Na(e);if(void 0!==t&&!this.We(t))return!1;const a=Ra(e);let f=0,y=0;for(;f<a.length&&this.We(a[f]);++f);if(f===a.length)return!0;if(void 0!==this.Qe){const C=a[f];if(!this.ze(this.Qe,C)||!this.He(this.Ke[y++],C))return!1;++f}for(;f<a.length;++f){const C=a[f];if(y>=this.Ke.length||!this.He(this.Ke[y++],C))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Bi(i){var e,t;if(wn(i instanceof Cn||i instanceof Lr),i instanceof Cn){if(i instanceof Vh){const f=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>Cn.create(i.field,"==",y)))||[];return Lr.create(f,"or")}return i}const a=i.filters.map(f=>Bi(f));return Lr.create(a,i.op)}function Yi(i){if(0===i.getFilters().length)return[];const e=uo(Bi(i));return wn(Yo(e)),Ps(e)||As(e)?[e]:e.getFilters()}function Ps(i){return i instanceof Cn}function As(i){return i instanceof Lr&&Nl(i)}function Yo(i){return Ps(i)||As(i)||function(e){if(e instanceof Lr&&za(e)){for(const t of e.getFilters())if(!Ps(t)&&!As(t))return!1;return!0}return!1}(i)}function uo(i){if(wn(i instanceof Cn||i instanceof Lr),i instanceof Cn)return i;if(1===i.filters.length)return uo(i.filters[0]);const e=i.filters.map(a=>uo(a));let t=Lr.create(e,i.op);return t=ka(t),Yo(t)?t:(wn(t instanceof Lr),wn(cs(t)),wn(t.filters.length>1),t.filters.reduce((a,f)=>So(a,f)))}function So(i,e){let t;return wn(i instanceof Cn||i instanceof Lr),wn(e instanceof Cn||e instanceof Lr),t=i instanceof Cn?e instanceof Cn?Lr.create([i,e],"and"):Ql(i,e):e instanceof Cn?Ql(e,i):function(a,f){if(wn(a.filters.length>0&&f.filters.length>0),cs(a)&&cs(f))return qc(a,f.getFilters());const y=za(a)?a:f,C=za(a)?f:a,P=y.filters.map(J=>So(J,C));return Lr.create(P,"or")}(i,e),ka(t)}function Ql(i,e){if(cs(e))return qc(e,i.getFilters());{const t=e.filters.map(a=>So(i,a));return Lr.create(t,"or")}}function ka(i){if(wn(i instanceof Cn||i instanceof Lr),i instanceof Cn)return i;const e=i.getFilters();if(1===e.length)return ka(e[0]);if(Gl(i))return i;const t=e.map(f=>ka(f)),a=[];return t.forEach(f=>{f instanceof Cn?a.push(f):f instanceof Lr&&(f.op===i.op?a.push(...f.filters):a.push(f))}),1===a.length?a[0]:Lr.create(a,i.op)}class cd{constructor(){this.Je=new gu}addToCollectionParentIndex(e,t){return this.Je.add(t),At.resolve()}getCollectionParents(e,t){return At.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return At.resolve()}deleteFieldIndex(e,t){return At.resolve()}getDocumentsMatchingTarget(e,t){return At.resolve(null)}getIndexType(e,t){return At.resolve(0)}getFieldIndexes(e,t){return At.resolve([])}getNextCollectionGroupToUpdate(e){return At.resolve(null)}getMinOffset(e,t){return At.resolve(ja.min())}getMinOffsetFromCollectionGroup(e,t){return At.resolve(ja.min())}updateCollectionGroup(e,t,a){return At.resolve()}updateIndexEntries(e,t){return At.resolve()}}class gu{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),f=this.index[t]||new es(ti.comparator),y=!f.has(a);return this.index[t]=f.add(a),y}has(e){const t=e.lastSegment(),a=e.popLast(),f=this.index[t];return f&&f.has(a)}getEntries(e){return(this.index[e]||new es(ti.comparator)).toArray()}}const Ja=new Uint8Array(0);class Jl{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new gu,this.Xe=new Ml(a=>Qu(a),(a,f)=>ah(a,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const a=t.lastSegment(),f=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const y={collectionId:a,parent:mo(f)};return bh(e).put(y)}return At.resolve()}getCollectionParents(e,t){const a=[],f=IDBKeyRange.bound([t,""],[Ku(t),""],!1,!0);return bh(e).W(f).next(y=>{for(const C of y){if(C.collectionId!==t)break;a.push(ku(C.parent))}return a})}addFieldIndex(e,t){const a=xd(e),f={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var C;delete f.indexId;const y=a.add(f);if(t.indexState){const C=dd(e);return y.next(P=>{C.put(R(P,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const a=xd(e),f=dd(e),y=Xl(e);return a.delete(t.indexId).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=Xl(e);let f=!0;const y=new Map;return At.forEach(this.Ze(t),C=>this.tn(e,C).next(P=>{f&&(f=!!P),y.set(C,P)})).next(()=>{if(f){let C=Jr();const P=[];return At.forEach(y,(J,re)=>{var me;rn("IndexedDbIndexManager",`Using index ${me=J,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(Ns=>`${Ns.fieldPath}:${Ns.kind}`).join(",")}`} to execute ${Qu(t)}`);const Ke=function(Ns,Ea){const ks=Na(Ea);if(void 0===ks)return null;for(const Ws of wd(Ns,ks.fieldPath))switch(Ws.op){case"array-contains-any":return Ws.value.arrayValue.values||[];case"array-contains":return[Ws.value]}return null}(re,J),It=function(Ns,Ea){const ks=new Map;for(const Ws of Ra(Ea))for(const Da of wd(Ns,Ws.fieldPath))switch(Da.op){case"==":case"in":ks.set(Ws.fieldPath.canonicalString(),Da.value);break;case"not-in":case"!=":return ks.set(Ws.fieldPath.canonicalString(),Da.value),Array.from(ks.values())}return null}(re,J),Jt=function(Ns,Ea){const ks=[];let Ws=!0;for(const Da of Ra(Ea)){const bm=0===Da.kind?Ju(Ns,Da.fieldPath,Ns.startAt):Zc(Ns,Da.fieldPath,Ns.startAt);ks.push(bm.value),Ws&&(Ws=bm.inclusive)}return new On(ks,Ws)}(re,J),ln=function(Ns,Ea){const ks=[];let Ws=!0;for(const Da of Ra(Ea)){const bm=0===Da.kind?Zc(Ns,Da.fieldPath,Ns.endAt):Ju(Ns,Da.fieldPath,Ns.endAt);ks.push(bm.value),Ws&&(Ws=bm.inclusive)}return new On(ks,Ws)}(re,J),Yn=this.en(J,re,Jt),vr=this.en(J,re,ln),Do=this.nn(J,re,It),ta=this.sn(J.indexId,Ke,Yn,Jt.inclusive,vr,ln.inclusive,Do);return At.forEach(ta,Ns=>a.J(Ns,t.limit).next(Ea=>{Ea.forEach(ks=>{const Ws=_n.fromSegments(ks.documentKey);C.has(Ws)||(C=C.add(Ws),P.push(Ws))})}))}).next(()=>P)}return At.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Yi(Lr.create(e.filters,"and")).map(a=>Dc(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,a,f,y,C,P){const J=(null!=t?t.length:1)*Math.max(a.length,y.length),re=J/(null!=t?t.length:1),me=[];for(let Ke=0;Ke<J;++Ke){const It=t?this.rn(t[Ke/re]):Ja,Jt=this.on(e,It,a[Ke%re],f),ln=this.un(e,It,y[Ke%re],C),Yn=P.map(vr=>this.on(e,It,vr,!0));me.push(...this.createRange(Jt,ln,Yn))}return me}on(e,t,a,f){const y=new pi(e,_n.empty(),t,a);return f?y:y.Ue()}un(e,t,a,f){const y=new pi(e,_n.empty(),t,a);return f?y.Ue():y}tn(e,t){const a=new vi(t),f=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,f).next(y=>{let C=null;for(const P of y)a.je(P)&&(!C||P.fields.length>C.fields.length)&&(C=P);return C})}getIndexType(e,t){let a=2;const f=this.Ze(t);return At.forEach(f,y=>this.tn(e,y).next(C=>{C?0!==a&&C.fields.length<function(P){let J=new es(ui.comparator),re=!1;for(const me of P.filters)for(const Ke of me.getFlattenedFilters())Ke.field.isKeyField()||("array-contains"===Ke.op||"array-contains-any"===Ke.op?re=!0:J=J.add(Ke.field));for(const me of P.orderBy)me.field.isKeyField()||(J=J.add(me.field));return J.size+(re?1:0)}(y)&&(a=1):a=0})).next(()=>null!==t.limit&&f.length>1&&2===a?1:a)}cn(e,t){const a=new xr;for(const f of Ra(e)){const y=t.data.field(f.fieldPath);if(null==y)return null;const C=a.qe(f.kind);Ot.Ie.ue(y,C)}return a.Fe()}rn(e){const t=new xr;return Ot.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const a=new xr;return Ot.Ie.ue(Jo(this.databaseId,t),a.qe(function(f){const y=Ra(f);return 0===y.length?0:y[y.length-1].kind}(e))),a.Fe()}nn(e,t,a){if(null===a)return[];let f=[];f.push(new xr);let y=0;for(const C of Ra(e)){const P=a[y++];for(const J of f)if(this.hn(t,C.fieldPath)&&du(P))f=this.ln(f,C,P);else{const re=J.qe(C.kind);Ot.Ie.ue(P,re)}}return this.fn(f)}en(e,t,a){return this.nn(e,t,a.position)}fn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Fe();return t}ln(e,t,a){const f=[...e],y=[];for(const C of a.arrayValue.values||[])for(const P of f){const J=new xr;J.seed(P.Fe()),Ot.Ie.ue(C,J.qe(t.kind)),y.push(J)}return y}hn(e,t){return!!e.filters.find(a=>a instanceof Cn&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=xd(e),f=dd(e);return(t?a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.W()).next(y=>{const C=[];return At.forEach(y,P=>f.get([P.indexId,this.uid]).next(J=>{C.push(function(re,me){const Ke=me?new Pi(me.sequenceNumber,new ja(ud(me.readTime),new _n(ku(me.documentKey)),me.largestBatchId)):Pi.empty(),It=re.fields.map(([Jt,ln])=>new ko(ui.fromServerFormat(Jt),ln));return new go(re.indexId,re.collectionGroup,It,Ke)}(P,J))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,f)=>{const y=a.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==y?y:Er(a.collectionGroup,f.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const f=xd(e),y=dd(e);return this.dn(e).next(C=>f.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(P=>At.forEach(P,J=>y.put(R(J.indexId,this.user,C,a)))))}updateIndexEntries(e,t){const a=new Map;return At.forEach(t,(f,y)=>{const C=a.get(f.collectionGroup);return(C?At.resolve(C):this.getFieldIndexes(e,f.collectionGroup)).next(P=>(a.set(f.collectionGroup,P),At.forEach(P,J=>this._n(e,f,J).next(re=>{const me=this.wn(y,J);return re.isEqual(me)?At.resolve():this.mn(e,y,J,re,me)}))))})}gn(e,t,a,f){return Xl(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.an(a,t.key),documentKey:t.key.path.toArray()})}yn(e,t,a,f){return Xl(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.an(a,t.key),t.key.path.toArray()])}_n(e,t,a){const f=Xl(e);let y=new es(Yr);return f.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.an(a,t)])},(C,P)=>{y=y.add(new pi(a.indexId,t,P.arrayValue,P.directionalValue))}).next(()=>y)}wn(e,t){let a=new es(Yr);const f=this.cn(t,e);if(null==f)return a;const y=Na(t);if(null!=y){const C=e.data.field(y.fieldPath);if(du(C))for(const P of C.arrayValue.values||[])a=a.add(new pi(t.indexId,e.key,this.rn(P),f))}else a=a.add(new pi(t.indexId,e.key,Ja,f));return a}mn(e,t,a,f,y){rn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(P,J,re,me,Ke){const It=P.getIterator(),Jt=J.getIterator();let ln=bl(It),Yn=bl(Jt);for(;ln||Yn;){let vr=!1,Do=!1;if(ln&&Yn){const ta=re(ln,Yn);ta<0?Do=!0:ta>0&&(vr=!0)}else null!=ln?Do=!0:vr=!0;vr?(me(Yn),Yn=bl(Jt)):Do?(Ke(ln),ln=bl(It)):(ln=bl(It),Yn=bl(Jt))}}(f,y,Yr,P=>{C.push(this.gn(e,t,a,P))},P=>{C.push(this.yn(e,t,a,P))}),At.waitFor(C)}dn(e){let t=1;return dd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,f,y)=>{y.done(),t=f.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((C,P)=>Yr(C,P)).filter((C,P,J)=>!P||0!==Yr(C,J[P-1]));const f=[];f.push(e);for(const C of a){const P=Yr(C,e),J=Yr(C,t);if(0===P)f[0]=e.Ue();else if(P>0&&J<0)f.push(C),f.push(C.Ue());else if(J>0)break}f.push(t);const y=[];for(let C=0;C<f.length;C+=2){if(this.pn(f[C],f[C+1]))return[];y.push(IDBKeyRange.bound([f[C].indexId,this.uid,f[C].arrayValue,f[C].directionalValue,Ja,[]],[f[C+1].indexId,this.uid,f[C+1].arrayValue,f[C+1].directionalValue,Ja,[]]))}return y}pn(e,t){return Yr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mu)}getMinOffset(e,t){return At.mapArray(this.Ze(t),a=>this.tn(e,a).next(f=>f||fn())).next(mu)}}function bh(i){return Fi(i,"collectionParents")}function Xl(i){return Fi(i,"indexEntries")}function xd(i){return Fi(i,"indexConfiguration")}function dd(i){return Fi(i,"indexState")}function mu(i){wn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const f=i[a].indexState.offset;Du(f,e)<0&&(e=f),t<f.largestBatchId&&(t=f.largestBatchId)}return new ja(e.readTime,e.documentKey,t)}const Pd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ds{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eu(i,e,t){const a=i.store("mutations"),f=i.store("documentMutations"),y=[],C=IDBKeyRange.only(t.batchId);let P=0;const J=a.Z({range:C},(me,Ke,It)=>(P++,It.delete()));y.push(J.next(()=>{wn(1===P)}));const re=[];for(const me of t.mutations){const Ke=ic(e,me.key.path,t.batchId);y.push(f.delete(Ke)),re.push(me.key)}return At.waitFor(y).next(()=>re)}function Oc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw fn();e=i.noDocument}return JSON.stringify(e).length}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(41943040,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class kd{constructor(e,t,a,f){this.userId=e,this.yt=t,this.indexManager=a,this.referenceDelegate=f,this.In={}}static re(e,t,a,f){wn(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new kd(y,t,a,f)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lu(e).Z({index:"userMutationsIndex",range:a},(f,y,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,a,f){const y=hd(e),C=Lu(e);return C.add({}).next(P=>{wn("number"==typeof P);const J=new ad(P,t,a,f),re=function(It,Jt,ln){const Yn=ln.baseMutations.map(Do=>od(It.ie,Do)),vr=ln.mutations.map(Do=>od(It.ie,Do));return{userId:Jt,batchId:ln.batchId,localWriteTimeMs:ln.localWriteTime.toMillis(),baseMutations:Yn,mutations:vr}}(this.yt,this.userId,J),me=[];let Ke=new es((It,Jt)=>Er(It.canonicalString(),Jt.canonicalString()));for(const It of f){const Jt=ic(this.userId,It.key.path,P);Ke=Ke.add(It.key.path.popLast()),me.push(C.put(re)),me.push(y.put(Jt,Yh))}return Ke.forEach(It=>{me.push(this.indexManager.addToCollectionParentIndex(e,It))}),e.addOnCommittedListener(()=>{this.In[P]=J.keys()}),At.waitFor(me).next(()=>J)})}lookupMutationBatch(e,t){return Lu(e).get(t).next(a=>a?(wn(a.userId===this.userId),Od(this.yt,a)):null)}Tn(e,t){return this.In[t]?At.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const f=a.keys();return this.In[t]=f,f}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,f=IDBKeyRange.lowerBound([this.userId,a]);let y=null;return Lu(e).Z({index:"userMutationsIndex",range:f},(C,P,J)=>{P.userId===this.userId&&(wn(P.batchId>=a),y=Od(this.yt,P)),J.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Lu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(f,y,C)=>{a=y.batchId,C.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lu(e).W("userMutationsIndex",t).next(a=>a.map(f=>Od(this.yt,f)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Rc(this.userId,t.path),f=IDBKeyRange.lowerBound(a),y=[];return hd(e).Z({range:f},(C,P,J)=>{const[re,me,Ke]=C,It=ku(me);if(re===this.userId&&t.path.isEqual(It))return Lu(e).get(Ke).next(Jt=>{if(!Jt)throw fn();wn(Jt.userId===this.userId),y.push(Od(this.yt,Jt))});J.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new es(Er);const f=[];return t.forEach(y=>{const C=Rc(this.userId,y.path),P=IDBKeyRange.lowerBound(C),J=hd(e).Z({range:P},(re,me,Ke)=>{const[It,Jt,ln]=re,Yn=ku(Jt);It===this.userId&&y.path.isEqual(Yn)?a=a.add(ln):Ke.done()});f.push(J)}),At.waitFor(f).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,f=a.length+1,y=Rc(this.userId,a),C=IDBKeyRange.lowerBound(y);let P=new es(Er);return hd(e).Z({range:C},(J,re,me)=>{const[Ke,It,Jt]=J,ln=ku(It);Ke===this.userId&&a.isPrefixOf(ln)?ln.length===f&&(P=P.add(Jt)):me.done()}).next(()=>this.En(e,P))}En(e,t){const a=[],f=[];return t.forEach(y=>{f.push(Lu(e).get(y).next(C=>{if(null===C)throw fn();wn(C.userId===this.userId),a.push(Od(this.yt,C))}))}),At.waitFor(f).next(()=>a)}removeMutationBatch(e,t){return eu(e.se,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),At.forEach(a,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return At.resolve();const a=IDBKeyRange.lowerBound([this.userId]),f=[];return hd(e).Z({range:a},(y,C,P)=>{if(y[0]===this.userId){const J=ku(y[1]);f.push(J)}else P.done()}).next(()=>{wn(0===f.length)})})}containsKey(e,t){return oc(e,this.userId,t)}Rn(e){return fd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oc(i,e,t){const a=Rc(e,t.path),f=a[1],y=IDBKeyRange.lowerBound(a);let C=!1;return hd(i).Z({range:y,X:!0},(P,J,re)=>{const[me,Ke,It]=P;me===e&&Ke===f&&(C=!0),re.done()}).next(()=>C)}function Lu(i){return Fi(i,"mutations")}function hd(i){return Fi(i,"documentMutations")}function fd(i){return Fi(i,"mutationQueues")}class gl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gl(0)}static vn(){return new gl(-1)}}class fp{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const a=new gl(t.highestTargetId);return t.highestTargetId=a.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>zn.fromTimestamp(new Ss(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.Vn(e).next(f=>(f.highestListenSequenceNumber=t,a&&(f.lastRemoteSnapshotVersion=a.toTimestamp()),t>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=t),this.Sn(e,f)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(t,a),this.Sn(e,a))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(a=>(wn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,t,a){let f=0;const y=[];return xc(e).Z((C,P)=>{const J=sc(P);J.sequenceNumber<=t&&null===a.get(J.targetId)&&(f++,y.push(this.removeTargetData(e,J)))}).next(()=>At.waitFor(y)).next(()=>f)}forEachTarget(e,t){return xc(e).Z((a,f)=>{const y=sc(f);t(y)})}Vn(e){return Jh(e).get("targetGlobalKey").next(t=>(wn(null!==t),t))}Sn(e,t){return Jh(e).put("targetGlobalKey",t)}Dn(e,t){return xc(e).put(m(this.yt,t))}Cn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Qu(t),f=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let y=null;return xc(e).Z({range:f,index:"queryTargetsIndex"},(C,P,J)=>{const re=sc(P);ah(t,re.target)&&(y=re,J.done())}).next(()=>y)}addMatchingKeys(e,t,a){const f=[],y=Bu(e);return t.forEach(C=>{const P=mo(C.path);f.push(y.put({targetId:a,path:P})),f.push(this.referenceDelegate.addReference(e,a,C))}),At.waitFor(f)}removeMatchingKeys(e,t,a){const f=Bu(e);return At.forEach(t,y=>{const C=mo(y.path);return At.waitFor([f.delete([a,C]),this.referenceDelegate.removeReference(e,a,y)])})}removeMatchingKeysForTargetId(e,t){const a=Bu(e),f=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(f)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),f=Bu(e);let y=Jr();return f.Z({range:a,X:!0},(C,P,J)=>{const re=ku(C[1]),me=new _n(re);y=y.add(me)}).next(()=>y)}containsKey(e,t){const a=mo(t.path),f=IDBKeyRange.bound([a],[Ku(a)],!1,!0);let y=0;return Bu(e).Z({index:"documentTargetsIndex",X:!0,range:f},([C,P],J,re)=>{0!==C&&(y++,re.done())}).next(()=>y>0)}ne(e,t){return xc(e).get(t).next(a=>a?sc(a):null)}}function xc(i){return Fi(i,"targets")}function Jh(i){return Fi(i,"targetGlobal")}function Bu(i){return Fi(i,"targetDocuments")}function Fd([i,e],[t,a]){const f=Er(i,t);return 0===f?Er(e,a):f}class Ld{constructor(e){this.xn=e,this.buffer=new es(Fd),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Fd(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ag{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;rn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,$e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){sl(a)?rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Tu(a)}yield t.Fn(3e5)}))}}class _u{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return At.resolve(M.at);const a=new Ld(t);return this.$n.forEachTarget(e,f=>a.On(f.sequenceNumber)).next(()=>this.$n.Ln(e,f=>a.On(f))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.$n.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),At.resolve(Pd)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pd):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let a,f,y,C,P,J,re;const me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ke=>(Ke>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ke}`),f=this.params.maximumSequenceNumbersToCollect):f=Ke,C=Date.now(),this.nthSequenceNumber(e,f))).next(Ke=>(a=Ke,P=Date.now(),this.removeTargets(e,a,t))).next(Ke=>(y=Ke,J=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ke=>(re=Date.now(),ga()<=qe.in.DEBUG&&rn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-me}ms\n\tDetermined least recently used ${f} in `+(P-C)+`ms\n\tRemoved ${y} targets in `+(J-P)+`ms\n\tRemoved ${Ke} documents in `+(re-J)+`ms\nTotal Duration: ${re-me}ms`),At.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:y,documentsRemoved:Ke})))}}class Ao{constructor(e,t){this.db=e,this.garbageCollector=new _u(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(f=>a+f))}Un(e){let t=0;return this.Ln(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(a,f)=>t(f))}addReference(e,t,a){return pd(e,a)}removeReference(e,t,a){return pd(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return pd(e,t)}Gn(e,t){return function(a,f){let y=!1;return fd(a).tt(C=>oc(a,C,f).next(P=>(P&&(y=!0),At.resolve(!P)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let y=0;return this.Kn(e,(C,P)=>{if(P<=t){const J=this.Gn(e,C).next(re=>{if(!re)return y++,a.getEntry(e,C).next(()=>(a.removeEntry(C,zn.min()),Bu(e).delete([0,mo(C.path)])))});f.push(J)}}).next(()=>At.waitFor(f)).next(()=>a.apply(e)).next(()=>y)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return pd(e,t)}Kn(e,t){const a=Bu(e);let f,y=M.at;return a.Z({index:"documentTargetsIndex"},([C,P],{path:J,sequenceNumber:re})=>{0===C?(y!==M.at&&t(new _n(ku(f)),y),y=re,f=J):y=M.at}).next(()=>{y!==M.at&&t(new _n(ku(f)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pd(i,e){return Bu(i).put((a=i.currentSequenceNumber,{targetId:0,path:mo(e.path),sequenceNumber:a}));var a}class wh{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ao.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?At.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bd{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return lc(e).put(a)}removeEntry(e,t,a){return lc(e).delete(function(f,y){const C=f.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],pl(y),C[C.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Qn(e,a)))}getEntry(e,t){let a=ao.newInvalidDocument(t);return lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(f,y)=>{a=this.jn(t,y)}).next(()=>a)}Wn(e,t){let a={size:0,document:ao.newInvalidDocument(t)};return lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(f,y)=>{a={document:this.jn(t,y),size:Oc(y)}}).next(()=>a)}getEntries(e,t){let a=Ya();return this.zn(e,t,(f,y)=>{const C=this.jn(f,y);a=a.insert(f,C)}).next(()=>a)}Hn(e,t){let a=Ya(),f=new oo(_n.comparator);return this.zn(e,t,(y,C)=>{const P=this.jn(y,C);a=a.insert(y,P),f=f.insert(y,Oc(C))}).next(()=>({documents:a,Jn:f}))}zn(e,t,a){if(t.isEmpty())return At.resolve();let f=new es(yy);t.forEach(J=>f=f.add(J));const y=IDBKeyRange.bound(Vd(f.first()),Vd(f.last())),C=f.getIterator();let P=C.getNext();return lc(e).Z({index:"documentKeyIndex",range:y},(J,re,me)=>{const Ke=_n.fromSegments([...re.prefixPath,re.collectionGroup,re.documentId]);for(;P&&yy(P,Ke)<0;)a(P,null),P=C.getNext();P&&P.isEqual(Ke)&&(a(P,re),P=C.hasNext()?C.getNext():null),P?me.j(Vd(P)):me.done()}).next(()=>{for(;P;)a(P,null),P=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,a){const f=[t.popLast().toArray(),t.lastSegment(),pl(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],y=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lc(e).W(IDBKeyRange.bound(f,y,!0)).next(C=>{let P=Ya();for(const J of C){const re=this.jn(_n.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);P=P.insert(re.key,re)}return P})}getAllFromCollectionGroup(e,t,a,f){let y=Ya();const C=x_(t,a),P=x_(t,ja.max());return lc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,P,!0)},(J,re,me)=>{const Ke=this.jn(_n.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);y=y.insert(Ke.key,Ke),y.size===f&&me.done()}).next(()=>y)}newChangeBuffer(e){return new ac(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tu(e).get("remoteDocumentGlobalKey").next(t=>(wn(!!t),t))}Qn(e,t){return tu(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const a=function ld(i,e){let t;if(e.document)t=gh(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=_n.fromSegments(e.noDocument.path),f=ud(e.noDocument.readTime);t=ao.newNoDocument(a,f),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return fn();{const a=_n.fromSegments(e.unknownDocument.path),f=ud(e.unknownDocument.version);t=ao.newUnknownDocument(a,f)}}return e.readTime&&t.setReadTime(function(a){const f=new Ss(a[0],a[1]);return zn.fromTimestamp(f)}(e.readTime)),t}(this.yt,t);if(!a.isNoDocument()||!a.version.isEqual(zn.min()))return a}return ao.newInvalidDocument(e)}}function Xh(i){return new Bd(i)}class ac extends wh{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ml(a=>a.toString(),(a,f)=>a.isEqual(f))}applyChanges(e){const t=[];let a=0,f=new es((y,C)=>Er(y.canonicalString(),C.canonicalString()));return this.changes.forEach((y,C)=>{const P=this.Xn.get(y);if(t.push(this.Yn.removeEntry(e,y,P.readTime)),C.isValidDocument()){const J=Qa(this.Yn.yt,C);f=f.add(y.path.popLast()),a+=Oc(J)-P.size,t.push(this.Yn.addEntry(e,y,J))}else if(a-=P.size,this.trackRemovals){const J=Qa(this.Yn.yt,C.convertToNoDocument(zn.min()));t.push(this.Yn.addEntry(e,y,J))}}),f.forEach(y=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Yn.updateMetadata(e,a)),At.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(a=>(this.Xn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:a,Jn:f})=>(f.forEach((y,C)=>{this.Xn.set(y,{size:C,readTime:a.get(y).readTime})}),a))}}function tu(i){return Fi(i,"remoteDocumentGlobal")}function lc(i){return Fi(i,"remoteDocumentsV14")}function Vd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function x_(i,e){const t=e.documentKey.path.toArray();return[i,pl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yy(i,e){const t=i.path.toArray(),a=e.path.toArray();let f=0;for(let y=0;y<t.length-2&&y<a.length-2;++y)if(f=Er(t[y],a[y]),f)return f;return f=Er(t.length,a.length),f||(f=Er(t[t.length-2],a[a.length-2]),f||Er(t[t.length-1],a[a.length-1]))}class P_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vy{constructor(e,t,a,f){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=f}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(f=>(a=f,this.remoteDocumentCache.getEntry(e,t))).next(f=>(null!==a&&ed(a.mutation,f,wl.empty(),Ss.now()),f))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Jr()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Jr()){const f=Ol();return this.populateOverlays(e,f,t).next(()=>this.computeViews(e,t,f,a).next(y=>{let C=Sd();return y.forEach((P,J)=>{C=C.insert(P,J.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const a=Ol();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Jr()))}populateOverlays(e,t,a){const f=[];return a.forEach(y=>{t.has(y)||f.push(y)}),this.documentOverlayCache.getOverlays(e,f).next(y=>{y.forEach((C,P)=>{t.set(C,P)})})}computeViews(e,t,a,f){let y=Ya();const C=hu(),P=hu();return t.forEach((J,re)=>{const me=a.get(re.key);f.has(re.key)&&(void 0===me||me.mutation instanceof xu)?y=y.insert(re.key,re):void 0!==me&&(C.set(re.key,me.mutation.getFieldMask()),ed(me.mutation,re,me.mutation.getFieldMask(),Ss.now()))}),this.recalculateAndSaveOverlays(e,y).next(J=>(J.forEach((re,me)=>C.set(re,me)),t.forEach((re,me)=>{var Ke;return P.set(re,new P_(me,null!==(Ke=C.get(re))&&void 0!==Ke?Ke:null))}),P))}recalculateAndSaveOverlays(e,t){const a=hu();let f=new oo((C,P)=>C-P),y=Jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const P of C)P.keys().forEach(J=>{const re=t.get(J);if(null===re)return;let me=a.get(J)||wl.empty();me=P.applyToLocalView(re,me),a.set(J,me);const Ke=(f.get(P.batchId)||Jr()).add(J);f=f.insert(P.batchId,Ke)})}).next(()=>{const C=[],P=f.getReverseIterator();for(;P.hasNext();){const J=P.getNext(),re=J.key,me=J.value,Ke=jh();me.forEach(It=>{if(!y.has(It)){const Jt=Cc(t.get(It),a.get(It));null!==Jt&&Ke.set(It,Jt),y=y.add(It)}}),C.push(this.documentOverlayCache.saveOverlays(e,re,Ke))}return At.waitFor(C)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return _n.isDocumentKey((f=t).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Qc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var f}getNextDocuments(e,t,a,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,f).next(y=>{const C=f-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,f-y.size):At.resolve(Ol());let P=-1,J=y;return C.next(re=>At.forEach(re,(me,Ke)=>(P<Ke.largestBatchId&&(P=Ke.largestBatchId),y.get(me)?At.resolve():this.remoteDocumentCache.getEntry(e,me).next(It=>{J=J.insert(me,It)}))).next(()=>this.populateOverlays(e,re,y)).next(()=>this.computeViews(e,J,re,Jr())).next(me=>({batchId:P,changes:Ic(me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _n(t)).next(a=>{let f=Sd();return a.isFoundDocument()&&(f=f.insert(a.key,a)),f})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const f=t.collectionGroup;let y=Sd();return this.indexManager.getCollectionParents(e,f).next(C=>At.forEach(C,P=>{const J=(re=t,me=P.child(f),new El(me,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));var re,me;return this.getDocumentsMatchingCollectionQuery(e,J,a).next(re=>{re.forEach((me,Ke)=>{y=y.insert(me,Ke)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,a){let f;return this.remoteDocumentCache.getAllFromCollection(e,t.path,a).next(y=>(f=y,this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId))).next(y=>{y.forEach((P,J)=>{const re=J.getKey();null===f.get(re)&&(f=f.insert(re,ao.newInvalidDocument(re)))});let C=Sd();return f.forEach((P,J)=>{const re=y.get(P);void 0!==re&&ed(re.mutation,J,wl.empty(),Ss.now()),wo(t,J)&&(C=C.insert(P,J))}),C})}}class k_{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return At.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var a;return this.Zn.set(t.id,{id:(a=t).id,version:a.version,createTime:Qs(a.createTime)}),At.resolve()}getNamedQuery(e,t){return At.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(a=t).name,query:E(a.bundledQuery),readTime:Qs(a.readTime)}),At.resolve();var a}}class pv{constructor(){this.overlays=new oo(_n.comparator),this.es=new Map}getOverlay(e,t){return At.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ol();return At.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&a.set(f,y)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((f,y)=>{this.oe(e,t,y)}),At.resolve()}removeOverlaysForBatchId(e,t,a){const f=this.es.get(a);return void 0!==f&&(f.forEach(y=>this.overlays=this.overlays.remove(y)),this.es.delete(a)),At.resolve()}getOverlaysForCollection(e,t,a){const f=Ol(),y=t.length+1,C=new _n(t.child("")),P=this.overlays.getIteratorFrom(C);for(;P.hasNext();){const J=P.getNext().value,re=J.getKey();if(!t.isPrefixOf(re.path))break;re.path.length===y&&J.largestBatchId>a&&f.set(J.getKey(),J)}return At.resolve(f)}getOverlaysForCollectionGroup(e,t,a,f){let y=new oo((re,me)=>re-me);const C=this.overlays.getIterator();for(;C.hasNext();){const re=C.getNext().value;if(re.getKey().getCollectionGroup()===t&&re.largestBatchId>a){let me=y.get(re.largestBatchId);null===me&&(me=Ol(),y=y.insert(re.largestBatchId,me)),me.set(re.getKey(),re)}}const P=Ol(),J=y.getIterator();for(;J.hasNext()&&(J.getNext().value.forEach((re,me)=>P.set(re,me)),!(P.size()>=f)););return At.resolve(P)}oe(e,t,a){const f=this.overlays.get(a.key);if(null!==f){const C=this.es.get(f.largestBatchId).delete(a.key);this.es.set(f.largestBatchId,C)}this.overlays=this.overlays.insert(a.key,new Qh(t,a));let y=this.es.get(t);void 0===y&&(y=Jr(),this.es.set(t,y)),this.es.set(t,y.add(a.key))}}class Ng{constructor(){this.ns=new es(ml.ss),this.rs=new es(ml.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const a=new ml(e,t);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.cs(new ml(e,t))}hs(e,t){e.forEach(a=>this.removeReference(a,t))}ls(e){const t=new _n(new ti([])),a=new ml(t,e),f=new ml(t,e+1),y=[];return this.rs.forEachInRange([a,f],C=>{this.cs(C),y.push(C.key)}),y}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new _n(new ti([])),a=new ml(t,e),f=new ml(t,e+1);let y=Jr();return this.rs.forEachInRange([a,f],C=>{y=y.add(C.key)}),y}containsKey(e){const t=new ml(e,0),a=this.ns.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class ml{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return _n.comparator(e.key,t.key)||Er(e._s,t._s)}static os(e,t){return Er(e._s,t._s)||_n.comparator(e.key,t.key)}}class F_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new es(ml.ss)}checkEmpty(e){return At.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,f){const y=this.ws;this.ws++;const C=new ad(y,t,a,f);this.mutationQueue.push(C);for(const P of f)this.gs=this.gs.add(new ml(P.key,y)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return At.resolve(C)}lookupMutationBatch(e,t){return At.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const f=this.ps(t+1),y=f<0?0:f;return At.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new ml(t,0),f=new ml(t,Number.POSITIVE_INFINITY),y=[];return this.gs.forEachInRange([a,f],C=>{const P=this.ys(C._s);y.push(P)}),At.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new es(Er);return t.forEach(f=>{const y=new ml(f,0),C=new ml(f,Number.POSITIVE_INFINITY);this.gs.forEachInRange([y,C],P=>{a=a.add(P._s)})}),At.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,f=a.length+1;let y=a;_n.isDocumentKey(y)||(y=y.child(""));const C=new ml(new _n(y),0);let P=new es(Er);return this.gs.forEachWhile(J=>{const re=J.key.path;return!!a.isPrefixOf(re)&&(re.length===f&&(P=P.add(J._s)),!0)},C),At.resolve(this.Is(P))}Is(e){const t=[];return e.forEach(a=>{const f=this.ys(a);null!==f&&t.push(f)}),t}removeMutationBatch(e,t){wn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return At.forEach(t.mutations,f=>{const y=new ml(f.key,t.batchId);return a=a.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,t){const a=new ml(t,0),f=this.gs.firstAfterOrEqual(a);return At.resolve(t.isEqual(f&&f.key))}performConsistencyCheck(e){return At.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class by{constructor(e){this.Es=e,this.docs=new oo(_n.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,f=this.docs.get(a),y=f?f.size:0,C=this.Es(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:C}),this.size+=C-y,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return At.resolve(a?a.document.mutableCopy():ao.newInvalidDocument(t))}getEntries(e,t){let a=Ya();return t.forEach(f=>{const y=this.docs.get(f);a=a.insert(f,y?y.document.mutableCopy():ao.newInvalidDocument(f))}),At.resolve(a)}getAllFromCollection(e,t,a){let f=Ya();const y=new _n(t.child("")),C=this.docs.getIteratorFrom(y);for(;C.hasNext();){const{key:P,value:{document:J}}=C.getNext();if(!t.isPrefixOf(P.path))break;P.path.length>t.length+1||Du(Eu(J),a)<=0||(f=f.insert(J.key,J.mutableCopy()))}return At.resolve(f)}getAllFromCollectionGroup(e,t,a,f){fn()}As(e,t){return At.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new L_(this)}getSize(e){return At.resolve(this.size)}}class L_ extends wh{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((a,f)=>{f.isValidDocument()?t.push(this.Yn.addEntry(e,f)):this.Yn.removeEntry(a)}),At.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class uc{constructor(e){this.persistence=e,this.Rs=new Ml(t=>Qu(t),ah),this.lastRemoteSnapshotVersion=zn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ng,this.targetCount=0,this.vs=gl.Pn()}forEachTarget(e,t){return this.Rs.forEach((a,f)=>t(f)),At.resolve()}getLastRemoteSnapshotVersion(e){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return At.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.bs&&(this.bs=t),At.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,At.resolve()}updateTargetData(e,t){return this.Dn(t),At.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,At.resolve()}removeTargets(e,t,a){let f=0;const y=[];return this.Rs.forEach((C,P)=>{P.sequenceNumber<=t&&null===a.get(P.targetId)&&(this.Rs.delete(C),y.push(this.removeMatchingKeysForTargetId(e,P.targetId)),f++)}),At.waitFor(y).next(()=>f)}getTargetCount(e){return At.resolve(this.targetCount)}getTargetData(e,t){const a=this.Rs.get(t)||null;return At.resolve(a)}addMatchingKeys(e,t,a){return this.Ps.us(t,a),At.resolve()}removeMatchingKeys(e,t,a){this.Ps.hs(t,a);const f=this.persistence.referenceDelegate,y=[];return f&&t.forEach(C=>{y.push(f.markPotentiallyOrphaned(e,C))}),At.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),At.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Ps.ds(t);return At.resolve(a)}containsKey(e,t){return At.resolve(this.Ps.containsKey(t))}}class Rg{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new M(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new uc(this),this.indexManager=new cd,this.remoteDocumentCache=new by(a=>this.referenceDelegate.xs(a)),this.yt=new Sg(t),this.Ns=new k_(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Vs[e.toKey()];return a||(a=new F_(t,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,a){rn("MemoryPersistence","Starting transaction:",e);const f=new pp(this.Ss.next());return this.referenceDelegate.ks(),a(f).next(y=>this.referenceDelegate.Os(f).next(()=>y)).toPromise().then(y=>(f.raiseOnCommittedEvent(),y))}Ms(e,t){return At.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,t)))}}class pp extends uu{constructor(e){super(),this.currentSequenceNumber=e}}class ef{constructor(e){this.persistence=e,this.Fs=new Ng,this.$s=null}static Bs(e){return new ef(e)}get Ls(){if(this.$s)return this.$s;throw fn()}addReference(e,t,a){return this.Fs.addReference(a,t),this.Ls.delete(a.toString()),At.resolve()}removeReference(e,t,a){return this.Fs.removeReference(a,t),this.Ls.add(a.toString()),At.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),At.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(f=>this.Ls.add(f.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(f=>{f.forEach(y=>this.Ls.add(y.toString()))}).next(()=>a.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.Ls,a=>{const f=_n.fromPath(a);return this.qs(e,f).next(y=>{y||t.removeEntry(f,zn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(a=>{a?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return At.or([()=>At.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Rm{constructor(e){this.yt=e}$(e,t,a,f){const y=new Cu("createOrUpgrade",t);var P;a<1&&f>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wg,{unique:!0}),P.createObjectStore("documentMutations"),Mm(e),function(P){P.createObjectStore("remoteDocuments")}(e));let C=At.resolve();return a<3&&f>=3&&(0!==a&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),Mm(e)),C=C.next(()=>function(P){const J=P.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zn.min().toTimestamp(),targetCount:0};return J.put("targetGlobalKey",re)}(y))),a<4&&f>=4&&(0!==a&&(C=C.next(()=>function(P,J){return J.store("mutations").W().next(re=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wg,{unique:!0});const me=J.store("mutations"),Ke=re.map(It=>me.put(It));return At.waitFor(Ke)})}(e,y))),C=C.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&f>=5&&(C=C.next(()=>this.Us(y))),a<6&&f>=6&&(C=C.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(y)))),a<7&&f>=7&&(C=C.next(()=>this.Gs(y))),a<8&&f>=8&&(C=C.next(()=>this.Qs(e,y))),a<9&&f>=9&&(C=C.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&f>=10&&(C=C.next(()=>this.js(y))),a<11&&f>=11&&(C=C.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&f>=12&&(C=C.next(()=>{!function(P){const J=P.createObjectStore("documentOverlays",{keyPath:up});J.createIndex("collectionPathOverlayIndex",Am,{unique:!1}),J.createIndex("collectionGroupOverlayIndex",Nm,{unique:!1})}(e)})),a<13&&f>=13&&(C=C.next(()=>function(P){const J=P.createObjectStore("remoteDocumentsV14",{keyPath:Sf});J.createIndex("documentKeyIndex",Eg),J.createIndex("collectionGroupIndex",ap)}(e)).next(()=>this.Ws(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&f>=14&&(C=C.next(()=>this.zs(e,y))),a<15&&f>=15&&(C=C.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:lp}).createIndex("sequenceNumberIndex",M_,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:O_}).createIndex("documentKeyIndex",Dg,{unique:!1})}(e))),C}Ks(e){let t=0;return e.store("remoteDocuments").Z((a,f)=>{t+=Oc(f)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Us(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.W().next(f=>At.forEach(f,y=>{const C=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",C).next(P=>At.forEach(P,J=>{wn(J.userId===y.userId);const re=Od(this.yt,J);return eu(e,y.userId,re).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const y=[];return a.Z((C,P)=>{const J=new ti(C),re=[0,mo(J)];y.push(t.get(re).next(me=>me?At.resolve():t.put({targetId:0,path:mo(J),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>At.waitFor(y))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:vh});const a=t.store("collectionParents"),f=new gu,y=C=>{if(f.add(C)){const P=C.lastSegment(),J=C.popLast();return a.put({collectionId:P,parent:mo(J)})}};return t.store("remoteDocuments").Z({X:!0},(C,P)=>{const J=new ti(C);return y(J.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([C,P,J],re)=>{const me=ku(P);return y(me.popLast())}))}js(e){const t=e.store("targets");return t.Z((a,f)=>{const y=sc(f),C=m(this.yt,y);return t.put(C)})}Ws(e,t){const a=t.store("remoteDocuments"),f=[];return a.Z((y,C)=>{const P=t.store("remoteDocumentsV14"),J=(re=C,re.document?new _n(ti.fromString(re.document.name).popFirst(5)):re.noDocument?_n.fromSegments(re.noDocument.path):re.unknownDocument?_n.fromSegments(re.unknownDocument.path):fn()).path.toArray();var re;const me={prefixPath:J.slice(0,J.length-2),collectionGroup:J[J.length-2],documentId:J[J.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};f.push(P.put(me))}).next(()=>At.waitFor(f))}zs(e,t){const a=t.store("mutations"),f=Xh(this.yt),y=new Rg(ef.Bs,this.yt.ie);return a.W().next(C=>{const P=new Map;return C.forEach(J=>{var re;let me=null!==(re=P.get(J.userId))&&void 0!==re?re:Jr();Od(this.yt,J).keys().forEach(Ke=>me=me.add(Ke)),P.set(J.userId,me)}),At.forEach(P,(J,re)=>{const me=new io(re),Ke=it.re(this.yt,me),It=y.getIndexManager(me),Jt=kd.re(me,this.yt,It,y.referenceDelegate);return new vy(f,Jt,Ke,It).recalculateAndSaveOverlaysForDocumentKeys(new dp(t,M.at),J).next()})})}}function Mm(i){i.createObjectStore("targetDocuments",{keyPath:R_}).createIndex("documentTargetsIndex",_y,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N_,{unique:!0}),i.createObjectStore("targetGlobal")}const Af="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gp{constructor(e,t,a,f,y,C,P,J,re,me,Ke=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Hs=y,this.window=C,this.document=P,this.Js=re,this.Ys=me,this.Xs=Ke,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=It=>Promise.resolve(),!gp.C())throw new Zt(kt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ao(this,f),this.ii=t+"main",this.yt=new Sg(J),this.ri=new yi(this.ii,this.Xs,new Rm(this.yt)),this.Cs=new fp(this.referenceDelegate,this.yt),this.remoteDocumentCache=Xh(this.yt),this.Ns=new z,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===me&&Hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(kt.FAILED_PRECONDITION,Af);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new M(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var a=(0,$e.Z)(function*(f){if(t.started)return e(f)});return function(f){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,$e.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,$e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(sl(e))return rn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return mp(e).get("owner").next(t=>At.resolve(this.mi(t)))}gi(e){return Mg(e).delete(this.clientId)}yi(){var e=this;return(0,$e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const f=Fi(a,"clientMetadata");return f.W().next(y=>{const C=e.Ii(y,18e5),P=y.filter(J=>-1===C.indexOf(J));return At.forEach(P,J=>f.delete(J.clientId)).next(()=>P)})}).catch(()=>[]);if(e.oi)for(const a of t)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?At.resolve(!0):mp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Zt(kt.FAILED_PRECONDITION,Af);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mg(e).W().next(a=>void 0===this.Ii(a,5e3).find(f=>{if(this.clientId!==f.clientId){const C=!this.inForeground&&f.inForeground,P=this.networkEnabled===f.networkEnabled;if(!this.networkEnabled&&f.networkEnabled||C&&P)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&rn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,$e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new dp(t,M.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(a=>this.pi(a.updateTimeMs,t)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Mg(e).W().next(t=>this.Ii(t,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return kd.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jl(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return it.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,a){rn("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===t?"readonly":"readwrite",y=15===(C=this.Xs)?cp:14===C?Ig:13===C?Zh:12===C?Cg:11===C?Tg:void fn();var C;let P;return this.ri.runTransaction(e,f,y,J=>(P=new dp(J,this.Ss?this.Ss.next():M.at),"readwrite-primary"===t?this.fi(P).next(re=>!!re||this.di(P)).next(re=>{if(!re)throw Hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Zt(kt.FAILED_PRECONDITION,Kc);return a(P)}).next(re=>this.wi(P).next(()=>re)):this.Vi(P).next(()=>a(P)))).then(J=>(P.raiseOnCommittedEvent(),J))}Vi(e){return mp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(kt.FAILED_PRECONDITION,Af)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mp(e).put("owner",t)}static C(){return yi.C()}_i(e){const t=mp(e);return t.get("owner").next(a=>this.mi(a)?(rn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):At.resolve())}pi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Hi(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ze.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const a=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rn("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Hi("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mp(i){return Fi(i,"owner")}function Mg(i){return Fi(i,"clientMetadata")}function Og(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class ni{constructor(e,t,a,f){this.targetId=e,this.fromCache=t,this.Si=a,this.Di=f}static Ci(e,t){let a=Jr(),f=Jr();for(const y of t.docChanges)switch(y.type){case 0:a=a.add(y.doc.key);break;case 1:f=f.add(y.doc.key)}return new ni(e,t.fromCache,a,f)}}class Om{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,a,f){return this.ki(e,t).next(y=>y||this.Oi(e,t,f,a)).next(y=>y||this.Mi(e,t))}ki(e,t){if(Wl(t))return At.resolve(null);let a=Lo(t);return this.indexManager.getIndexType(e,a).next(f=>0===f?null:(null!==t.limit&&1===f&&(t=al(t,null,"F"),a=Lo(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(y=>{const C=Jr(...y);return this.Ni.getDocuments(e,C).next(P=>this.indexManager.getMinOffset(e,a).next(J=>{const re=this.Fi(t,P);return this.$i(t,re,C,J.readTime)?this.ki(e,al(t,null,"F")):this.Bi(e,re,t,J)}))})))}Oi(e,t,a,f){return Wl(t)||f.isEqual(zn.min())?this.Mi(e,t):this.Ni.getDocuments(e,a).next(y=>{const C=this.Fi(t,y);return this.$i(t,C,a,f)?this.Mi(e,t):(ga()<=qe.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),Xc(t)),this.Bi(e,C,t,qu(f,-1)))})}Fi(e,t){let a=new es(N(e));return t.forEach((f,y)=>{wo(e,y)&&(a=a.add(y))}),a}$i(e,t,a,f){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(f)>0)}Mi(e,t){return ga()<=qe.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",Xc(t)),this.Ni.getDocumentsMatchingQuery(e,t,ja.min())}Bi(e,t,a,f){return this.Ni.getDocumentsMatchingQuery(e,a,f).next(y=>(t.forEach(C=>{y=y.insert(C.key,C)}),y))}}class B_{constructor(e,t,a,f){this.persistence=e,this.Li=t,this.yt=f,this.qi=new oo(Er),this.Ui=new Ml(y=>Qu(y),ah),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function co(i,e,t,a){return new B_(i,e,t,a)}function V_(i,e){return _p.apply(this,arguments)}function _p(){return _p=(0,$e.Z)(function*(i,e){const t=on(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let f;return t.mutationQueue.getAllMutationBatches(a).next(y=>(f=y,t.Qi(e),t.mutationQueue.getAllMutationBatches(a))).next(y=>{const C=[],P=[];let J=Jr();for(const re of f){C.push(re.batchId);for(const me of re.mutations)J=J.add(me.key)}for(const re of y){P.push(re.batchId);for(const me of re.mutations)J=J.add(me.key)}return t.localDocuments.getDocuments(a,J).next(re=>({ji:re,removedBatchIds:C,addedBatchIds:P}))})})}),_p.apply(this,arguments)}function xm(i,e){const t=on(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const f=e.batch.keys(),y=t.Gi.newChangeBuffer({trackRemovals:!0});return function(C,P,J,re){const me=J.batch,Ke=me.keys();let It=At.resolve();return Ke.forEach(Jt=>{It=It.next(()=>re.getEntry(P,Jt)).next(ln=>{const Yn=J.docVersions.get(Jt);wn(null!==Yn),ln.version.compareTo(Yn)<0&&(me.applyToRemoteDocument(ln,J),ln.isValidDocument()&&(ln.setReadTime(J.commitVersion),re.addEntry(ln)))})}),It.next(()=>C.mutationQueue.removeMutationBatch(P,me))}(t,a,e,y).next(()=>y.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,f,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(C){let P=Jr();for(let J=0;J<C.mutationResults.length;++J)C.mutationResults[J].transformResults.length>0&&(P=P.add(C.batch.mutations[J].key));return P}(e))).next(()=>t.localDocuments.getDocuments(a,f))})}function Pm(i){const e=on(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function km(i,e){const t=on(i),a=e.snapshotVersion;let f=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const C=t.Gi.newChangeBuffer({trackRemovals:!0});f=t.qi;const P=[];e.targetChanges.forEach((me,Ke)=>{const It=f.get(Ke);if(!It)return;P.push(t.Cs.removeMatchingKeys(y,me.removedDocuments,Ke).next(()=>t.Cs.addMatchingKeys(y,me.addedDocuments,Ke)));let Jt=It.withSequenceNumber(y.currentSequenceNumber);var ln,Yn,vr;e.targetMismatches.has(Ke)?Jt=Jt.withResumeToken(gn.EMPTY_BYTE_STRING,zn.min()).withLastLimboFreeSnapshotVersion(zn.min()):me.resumeToken.approximateByteSize()>0&&(Jt=Jt.withResumeToken(me.resumeToken,a)),f=f.insert(Ke,Jt),Yn=Jt,vr=me,(0===(ln=It).resumeToken.approximateByteSize()||Yn.snapshotVersion.toMicroseconds()-ln.snapshotVersion.toMicroseconds()>=3e8||vr.addedDocuments.size+vr.modifiedDocuments.size+vr.removedDocuments.size>0)&&P.push(t.Cs.updateTargetData(y,Jt))});let J=Ya(),re=Jr();if(e.documentUpdates.forEach(me=>{e.resolvedLimboDocuments.has(me)&&P.push(t.persistence.referenceDelegate.updateLimboDocument(y,me))}),P.push(Fm(y,C,e.documentUpdates).next(me=>{J=me.Wi,re=me.zi})),!a.isEqual(zn.min())){const me=t.Cs.getLastRemoteSnapshotVersion(y).next(Ke=>t.Cs.setTargetsMetadata(y,y.currentSequenceNumber,a));P.push(me)}return At.waitFor(P).next(()=>C.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,J,re)).next(()=>J)}).then(y=>(t.qi=f,y))}function Fm(i,e,t){let a=Jr(),f=Jr();return t.forEach(y=>a=a.add(y)),e.getEntries(i,a).next(y=>{let C=Ya();return t.forEach((P,J)=>{const re=y.get(P);J.isFoundDocument()!==re.isFoundDocument()&&(f=f.add(P)),J.isNoDocument()&&J.version.isEqual(zn.min())?(e.removeEntry(P,J.readTime),C=C.insert(P,J)):!re.isValidDocument()||J.version.compareTo(re.version)>0||0===J.version.compareTo(re.version)&&re.hasPendingWrites?(e.addEntry(J),C=C.insert(P,J)):rn("LocalStore","Ignoring outdated watch update for ",P,". Current version:",re.version," Watch version:",J.version)}),{Wi:C,zi:f}})}function U_(i,e){const t=on(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Nf(i,e){const t=on(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let f;return t.Cs.getTargetData(a,e).next(y=>y?(f=y,At.resolve(f)):t.Cs.allocateTargetId(a).next(C=>(f=new Mc(e,C,0,a.currentSequenceNumber),t.Cs.addTargetData(a,f).next(()=>f))))}).then(a=>{const f=t.qi.get(a.targetId);return(null===f||a.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(t.qi=t.qi.insert(a.targetId,a),t.Ui.set(e,a.targetId)),a})}function Eh(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,$e.Z)(function*(i,e,t){const a=on(i),f=a.qi.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",y,C=>a.persistence.referenceDelegate.removeTarget(C,f)))}catch(C){if(!sl(C))throw C;rn("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}a.qi=a.qi.remove(e),a.Ui.delete(f.target)}),yp.apply(this,arguments)}function Pc(i,e,t){const a=on(i);let f=zn.min(),y=Jr();return a.persistence.runTransaction("Execute query","readonly",C=>function(P,J,re){const me=on(P),Ke=me.Ui.get(re);return void 0!==Ke?At.resolve(me.qi.get(Ke)):me.Cs.getTargetData(J,re)}(a,C,Lo(e)).next(P=>{if(P)return f=P.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(C,P.targetId).next(J=>{y=J})}).next(()=>a.Li.getDocumentsMatchingQuery(C,e,t?f:zn.min(),t?y:Jr())).next(P=>(vp(a,Ed(e),P),{documents:P,Hi:y})))}function Lm(i,e){const t=on(i),a=on(t.Cs),f=t.qi.get(e);return f?Promise.resolve(f.target):t.persistence.runTransaction("Get target data","readonly",y=>a.ne(y,e).next(C=>C?C.target:null))}function xg(i,e){const t=on(i),a=t.Ki.get(e)||zn.min();return t.persistence.runTransaction("Get new document changes","readonly",f=>t.Gi.getAllFromCollectionGroup(f,e,qu(a,-1),Number.MAX_SAFE_INTEGER)).then(f=>(vp(t,e,f),f))}function vp(i,e,t){let a=i.Ki.get(e)||zn.min();t.forEach((f,y)=>{y.readTime.compareTo(a)>0&&(a=y.readTime)}),i.Ki.set(e,a)}function Bm(){return Bm=(0,$e.Z)(function*(i,e,t,a){const f=on(i);let y=Jr(),C=Ya();for(const re of t){const me=e.Ji(re.metadata.name);re.document&&(y=y.add(me));const Ke=e.Yi(re);Ke.setReadTime(e.Xi(re.metadata.readTime)),C=C.insert(me,Ke)}const P=f.Gi.newChangeBuffer({trackRemovals:!0}),J=yield Nf(f,(re=a,Lo(qo(ti.fromString(`__bundle__/docs/${re}`)))));var re;return f.persistence.runTransaction("Apply bundle documents","readwrite",re=>Fm(re,P,C).next(me=>(P.apply(re),me)).next(me=>f.Cs.removeMatchingKeysForTargetId(re,J.targetId).next(()=>f.Cs.addMatchingKeys(re,y,J.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(re,me.Wi,me.zi)).next(()=>me.Wi)))}),Bm.apply(this,arguments)}function wy(i,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,$e.Z)(function*(i,e,t=Jr()){const a=yield Nf(i,Lo(E(e.bundledQuery))),f=on(i);return f.persistence.runTransaction("Save named query","readwrite",y=>{const C=Qs(e.readTime);if(a.snapshotVersion.compareTo(C)>=0)return f.Ns.saveNamedQuery(y,e);const P=a.withResumeToken(gn.EMPTY_BYTE_STRING,C);return f.qi=f.qi.insert(P.targetId,P),f.Cs.updateTargetData(y,P).next(()=>f.Cs.removeMatchingKeysForTargetId(y,a.targetId)).next(()=>f.Cs.addMatchingKeys(y,t,a.targetId)).next(()=>f.Ns.saveNamedQuery(y,e))})}),Vm.apply(this,arguments)}function Um(i,e){return`firestore_clients_${i}_${e}`}function Pg(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Hm(i,e){return`firestore_targets_${i}_${e}`}class bp{constructor(e,t,a,f){this.user=e,this.batchId=t,this.state=a,this.error=f}static Zi(e,t,a){const f=JSON.parse(a);let y,C="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return C&&f.error&&(C="string"==typeof f.error.message&&"string"==typeof f.error.code,C&&(y=new Zt(f.error.code,f.error.message))),C?new bp(e,t,f.state,y):(Hi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kc{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Zi(e,t){const a=JSON.parse(t);let f,y="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return y&&a.error&&(y="string"==typeof a.error.message&&"string"==typeof a.error.code,y&&(f=new Zt(a.error.code,a.error.message))),y?new kc(e,a.state,f):(Hi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const a=JSON.parse(t);let f="object"==typeof a&&a.activeTargetIds instanceof Array,y=Sc();for(let C=0;f&&C<a.activeTargetIds.length;++C)f=pn(a.activeTargetIds[C]),y=y.add(a.activeTargetIds[C]);return f?new wp(e,y):(Hi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ep{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ep(t.clientId,t.onlineState):(Hi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tf{constructor(){this.activeTargetIds=Sc()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kg{constructor(e,t,a,f,y){this.window=e,this.Hs=t,this.persistenceKey=a,this.sr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new oo(Er),this.started=!1,this.cr=[];const C=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.ar=Um(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tf),this.lr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,$e.Z)(function*(){const t=yield e.syncEngine.vi();for(const f of t){if(f===e.sr)continue;const y=e.getItem(Um(e.persistenceKey,f));if(y){const C=wp.Zi(f,y);C&&(e.ur=e.ur.insert(C.clientId,C))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const f=e.yr(a);f&&e.pr(f)}for(const f of e.cr)e.rr(f);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((a,f)=>{f.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,a){this.Tr(e,t,a),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Hm(this.persistenceKey,e));if(a){const f=kc.Zi(e,a);f&&(t=f.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hm(this.persistenceKey,e))}updateQueryState(e,t,a){this.Rr(e,t,a)}handleUserChange(e,t,a){t.forEach(f=>{this.Er(f)}),this.currentUser=e,a.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rn("SharedClientState","READ",e,t),t}setItem(e,t){rn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(rn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void Hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,$e.Z)(function*(){if(t.started){if(null!==a.key)if(t.lr.test(a.key)){if(null==a.newValue){const f=t.vr(a.key);return t.Vr(f,null)}{const f=t.Sr(a.key,a.newValue);if(f)return t.Vr(f.clientId,f)}}else if(t.dr.test(a.key)){if(null!==a.newValue){const f=t.Dr(a.key,a.newValue);if(f)return t.Cr(f)}}else if(t._r.test(a.key)){if(null!==a.newValue){const f=t.Nr(a.key,a.newValue);if(f)return t.kr(f)}}else if(a.key===t.wr){if(null!==a.newValue){const f=t.yr(a.newValue);if(f)return t.pr(f)}}else if(a.key===t.hr){const f=function(y){let C=M.at;if(null!=y)try{const P=JSON.parse(y);wn("number"==typeof P),C=P}catch(P){Hi("SharedClientState","Failed to read sequence number from WebStorage",P)}return C}(a.newValue);f!==M.at&&t.sequenceNumberHandler(f)}else if(a.key===t.mr){const f=t.Or(a.newValue);yield Promise.all(f.map(y=>t.syncEngine.Mr(y)))}}else t.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,a){const f=new bp(this.currentUser,e,t,a),y=Pg(this.persistenceKey,this.currentUser,e);this.setItem(y,f.tr())}Er(e){const t=Pg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,a){const f=Hm(this.persistenceKey,e),y=new kc(e,t,a);this.setItem(f,y.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const a=this.vr(e);return wp.Zi(a,t)}Dr(e,t){const a=this.dr.exec(e),f=Number(a[1]);return bp.Zi(new io(void 0!==a[2]?a[2]:null),f,t)}Nr(e,t){const a=this._r.exec(e),f=Number(a[1]);return kc.Zi(f,t)}yr(e){return Ep.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,$e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);rn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const a=t?this.ur.insert(e,t):this.ur.remove(e),f=this.Ir(this.ur),y=this.Ir(a),C=[],P=[];return y.forEach(J=>{f.has(J)||C.push(J)}),f.forEach(J=>{y.has(J)||P.push(J)}),this.syncEngine.Br(C,P).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Sc();return e.forEach((a,f)=>{t=t.unionWith(f.activeTargetIds)}),t}}class Fg{constructor(){this.Lr=new tf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,a){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tf,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class j_{Ur(e){}shutdown(){}}class jm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class G_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class W_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,a,f,y){const C=this.ho(e,t);rn("RestConnection","Sending: ",C,a);const P={};return this.lo(P,f,y),this.fo(e,C,P,a).then(J=>(rn("RestConnection","Received: ",J),J),J=>{throw cl("RestConnection",`${e} failed with error: `,J,"url: ",C,"request:",a),J})}_o(e,t,a,f,y,C){return this.ao(e,t,a,f,y)}lo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ts,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((f,y)=>e[y]=f),a&&a.headers.forEach((f,y)=>e[y]=f)}ho(e,t){return`${this.oo}/v1/${t}:${$_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,a,f){return new Promise((y,C)=>{const P=new Wu;P.setWithCredentials(!0),P.listenOnce(lu.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case yl.NO_ERROR:const re=P.getResponseJson();rn("Connection","XHR received:",JSON.stringify(re)),y(re);break;case yl.TIMEOUT:rn("Connection",'RPC "'+e+'" timed out'),C(new Zt(kt.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const me=P.getStatus();if(rn("Connection",'RPC "'+e+'" failed with status:',me,"response text:",P.getResponseText()),me>0){let Ke=P.getResponseJson();Array.isArray(Ke)&&(Ke=Ke[0]);const It=Ke?.error;if(It&&It.status&&It.message){const Jt=function(ln){const Yn=ln.toLowerCase().replace(/_/g,"-");return Object.values(kt).indexOf(Yn)>=0?Yn:kt.UNKNOWN}(It.status);C(new Zt(Jt,It.message))}else C(new Zt(kt.UNKNOWN,"Server responded with status "+P.getStatus()))}else C(new Zt(kt.UNAVAILABLE,"Connection failed."));break;default:fn()}}finally{rn("Connection",'RPC "'+e+'" completed.')}});const J=JSON.stringify(f);P.send(t,"POST",J,a,15)})}wo(e,t,a){const f=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Ul(),C=Gu(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new Sa({})),this.lo(P.initMessageHeaders,t,a),P.encodeInitMessageHeaders=!0;const J=f.join("");rn("Connection","Creating WebChannel: "+J,P);const re=y.createWebChannel(J,P);let me=!1,Ke=!1;const It=new G_({Hr:ln=>{Ke?rn("Connection","Not sending because WebChannel is closed:",ln):(me||(rn("Connection","Opening WebChannel transport."),re.open(),me=!0),rn("Connection","WebChannel sending:",ln),re.send(ln))},Jr:()=>re.close()}),Jt=(ln,Yn,vr)=>{ln.listen(Yn,Do=>{try{vr(Do)}catch(ta){setTimeout(()=>{throw ta},0)}})};return Jt(re,bu.EventType.OPEN,()=>{Ke||rn("Connection","WebChannel transport opened.")}),Jt(re,bu.EventType.CLOSE,()=>{Ke||(Ke=!0,rn("Connection","WebChannel transport closed"),It.io())}),Jt(re,bu.EventType.ERROR,ln=>{Ke||(Ke=!0,cl("Connection","WebChannel transport errored:",ln),It.io(new Zt(kt.UNAVAILABLE,"The operation could not be completed")))}),Jt(re,bu.EventType.MESSAGE,ln=>{var Yn;if(!Ke){const vr=ln.data[0];wn(!!vr);const Do=vr,ta=Do.error||(null===(Yn=Do[0])||void 0===Yn?void 0:Yn.error);if(ta){rn("Connection","WebChannel received error:",ta);const Ns=ta.status;let Ea=function(Ws){const Da=Bo[Ws];if(void 0!==Da)return dh(Da)}(Ns),ks=ta.message;void 0===Ea&&(Ea=kt.INTERNAL,ks="Unknown error status: "+Ns+" with message "+ta.message),Ke=!0,It.io(new Zt(Ea,ks)),re.close()}else rn("Connection","WebChannel received:",vr),It.ro(vr)}}),Jt(C,Cl.STAT_EVENT,ln=>{ln.stat===pa.PROXY?rn("Connection","Detected buffering proxy"):ln.stat===pa.NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(()=>{It.so()},0),It}}function Lg(){return typeof window<"u"?window:null}function Dp(){return typeof document<"u"?document:null}function Rf(i){return new Tm(i,!0)}class Tp{constructor(e,t,a=1e3,f=1.5,y=6e4){this.Hs=e,this.timerId=t,this.mo=a,this.yo=f,this.po=y,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),f=Math.max(0,t-a);f>0&&rn("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,f,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Cp{constructor(e,t,a,f,y,C,P,J){this.Hs=e,this.vo=a,this.Vo=f,this.connection=y,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=P,this.listener=J,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Tp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,$e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,$e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var a=this;return(0,$e.Z)(function*(){a.Lo(),a.qo(),a.xo.cancel(),a.So++,4!==e?a.xo.reset():t&&t.code===kt.RESOURCE_EXHAUSTED?(Hi(t.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),a.xo.Ao()):t&&t.code===kt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Uo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,f])=>{this.So===t&&this.Go(a,f)},a=>{e(()=>{const f=new Zt(kt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.Qo(f)})})}Go(e,t){const a=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{a(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(f=>{a(()=>this.Qo(f))}),this.stream.onMessage(f=>{a(()=>this.onMessage(f))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,$e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return rn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ey extends Cp{constructor(e,t,a,f,y,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,f,C),this.yt=y}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ip(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(J=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===J?1:"REMOVE"===J?2:"CURRENT"===J?3:"RESET"===J?4:fn(),f=e.targetChange.targetIds||[],y=function(J,re){return J.wt?(wn(void 0===re||"string"==typeof re),gn.fromBase64String(re||"")):(wn(void 0===re||re instanceof Uint8Array),gn.fromUint8Array(re||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,P=C&&function(J){const re=void 0===J.code?kt.UNKNOWN:dh(J.code);return new Zt(re,J.message||"")}(C);t=new Yl(a,f,y,P||null)}else if("documentChange"in e){const a=e.documentChange,f=Zl(i,a.document.name),y=Qs(a.document.updateTime),C=a.document.createTime?Qs(a.document.createTime):zn.min(),P=new Ka({mapValue:{fields:a.document.fields}}),J=ao.newFoundDocument(f,y,C,P);t=new nd(a.targetIds||[],a.removedTargetIds||[],J.key,J)}else if("documentDelete"in e){const a=e.documentDelete,f=Zl(i,a.document),y=a.readTime?Qs(a.readTime):zn.min(),C=ao.newNoDocument(f,y);t=new nd([],a.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const a=e.documentRemove,f=Zl(i,a.document);t=new nd([],a.removedTargetIds||[],f,null)}else{if(!("filter"in e))return fn();{const a=e.filter,y=new Ef(a.count||0);t=new Ad(a.targetId,y)}}var J;return t}(this.yt,e),a=function(f){if(!("targetChange"in f))return zn.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?zn.min():y.readTime?Qs(y.readTime):zn.min()}(e);return this.listener.Wo(t,a)}zo(e){const t={};t.database=sd(this.yt),t.addTarget=function(f,y){let C;const P=y.target;return C=lh(P)?{documents:yg(f,P)}:{query:sp(f,P)},C.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?C.resumeToken=Rd(f,y.resumeToken):y.snapshotVersion.compareTo(zn.min())>0&&(C.readTime=fu(f,y.snapshotVersion.toTimestamp())),C}(this.yt,e);const a=function Cm(i,e){const t=function(a,f){switch(f){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Bo(t)}Ho(e){const t={};t.database=sd(this.yt),t.removeTarget=e,this.Bo(t)}}class Mf extends Cp{constructor(e,t,a,f,y,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,f,C),this.yt=y,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Md(i,e){return i&&i.length>0?(wn(void 0!==e),i.map(t=>function(a,f){let y=Qs(a.updateTime?a.updateTime:f);return y.isEqual(zn.min())&&(y=Qs(f)),new Xu(y,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Qs(e.commitTime);return this.listener.Zo(a,t)}return wn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=sd(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>od(this.yt,a))};this.Bo(t)}}class Ud extends class{}{constructor(e,t,a,f){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.yt=f,this.nu=!1}su(){if(this.nu)throw new Zt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.ao(e,t,a,f,y)).catch(f=>{throw"FirebaseError"===f.name?(f.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Zt(kt.UNKNOWN,f.toString())})}_o(e,t,a,f){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,C])=>this.connection._o(e,t,a,y,C,f)).catch(y=>{throw"FirebaseError"===y.name?(y.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new Zt(kt.UNKNOWN,y.toString())})}terminate(){this.nu=!0}}class Ip{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hi(t),this.ou=!1):rn("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Sp{constructor(e,t,a,f,y){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=y,this.mu.Ur(P=>{a.enqueueAndForget((0,$e.Z)(function*(){var J;Lc(C)&&(rn("RemoteStore","Restarting streams for network reachability change."),yield(J=(0,$e.Z)(function*(re){const me=on(re);me._u.add(4),yield gd(me),me.gu.set("Unknown"),me._u.delete(4),yield Fa(me)}),function(re){return J.apply(this,arguments)})(C))}))}),this.gu=new Ip(a,f)}}function Fa(i){return nu.apply(this,arguments)}function nu(){return nu=(0,$e.Z)(function*(i){if(Lc(i))for(const e of i.wu)yield e(!0)}),nu.apply(this,arguments)}function gd(i){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,$e.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Ap.apply(this,arguments)}function Dh(i,e){const t=on(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Vg(t)?cc(t):hc(t).ko()&&Np(t,e))}function Pl(i,e){const t=on(i),a=hc(t);t.du.delete(e),a.ko()&&Bg(t,e),0===t.du.size&&(a.ko()?a.Fo():Lc(t)&&t.gu.set("Unknown"))}function Np(i,e){i.yu.Ot(e.targetId),hc(i).zo(e)}function Bg(i,e){i.yu.Ot(e),hc(i).Ho(e)}function cc(i){i.yu=new hh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),hc(i).start(),i.gu.uu()}function Vg(i){return Lc(i)&&!hc(i).No()&&i.du.size>0}function Lc(i){return 0===on(i)._u.size}function Dy(i){i.yu=void 0}function Rp(i){return Th.apply(this,arguments)}function Th(){return Th=(0,$e.Z)(function*(i){i.du.forEach((e,t)=>{Np(i,e)})}),Th.apply(this,arguments)}function Mp(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,$e.Z)(function*(i,e){Dy(i),Vg(i)?(i.gu.hu(e),cc(i)):i.gu.set("Unknown")}),Op.apply(this,arguments)}function xp(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,$e.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Yl&&2===e.state&&e.cause)try{yield(a=(0,$e.Z)(function*(f,y){const C=y.cause;for(const P of y.targetIds)f.du.has(P)&&(yield f.remoteSyncer.rejectListen(P,C),f.du.delete(P),f.yu.removeTarget(P))}),function(f,y){return a.apply(this,arguments)})(i,e)}catch(a){rn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield kp(i,a)}else if(e instanceof nd?i.yu.Kt(e):e instanceof Ad?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(zn.min()))try{const a=yield Pm(i.localStore);t.compareTo(a)>=0&&(yield function(f,y){const C=f.yu.Zt(y);return C.targetChanges.forEach((P,J)=>{if(P.resumeToken.approximateByteSize()>0){const re=f.du.get(J);re&&f.du.set(J,re.withResumeToken(P.resumeToken,y))}}),C.targetMismatches.forEach(P=>{const J=f.du.get(P);if(!J)return;f.du.set(P,J.withResumeToken(gn.EMPTY_BYTE_STRING,J.snapshotVersion)),Bg(f,P);const re=new Mc(J.target,P,1,J.sequenceNumber);Np(f,re)}),f.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(a){rn("RemoteStore","Failed to raise snapshot:",a),yield kp(i,a)}var a}),Pp.apply(this,arguments)}function kp(i,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,$e.Z)(function*(i,e,t){if(!sl(e))throw e;i._u.add(1),yield gd(i),i.gu.set("Offline"),t||(t=()=>Pm(i.localStore)),i.asyncQueue.enqueueRetryable((0,$e.Z)(function*(){rn("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Fa(i)}))}),Fp.apply(this,arguments)}function $m(i,e){return e().catch(t=>kp(i,t,e))}function Hd(i){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,$e.Z)(function*(i){const e=on(i),t=Xa(e);let a=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Ug(e);)try{const f=yield U_(e.localStore,a);if(null===f){0===e.fu.length&&t.Fo();break}a=f.batchId,Lp(e,f)}catch(f){yield kp(e,f)}Gm(e)&&Of(e)}),Ch.apply(this,arguments)}function Ug(i){return Lc(i)&&i.fu.length<10}function Lp(i,e){i.fu.push(e);const t=Xa(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Gm(i){return Lc(i)&&!Xa(i).No()&&i.fu.length>0}function Of(i){Xa(i).start()}function Bc(i){return xf.apply(this,arguments)}function xf(){return xf=(0,$e.Z)(function*(i){Xa(i).eu()}),xf.apply(this,arguments)}function nf(i){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,$e.Z)(function*(i){const e=Xa(i);for(const t of i.fu)e.Xo(t.mutations)}),Wm.apply(this,arguments)}function Bp(i,e,t){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,$e.Z)(function*(i,e,t){const a=i.fu.shift(),f=hp.from(a,e,t);yield $m(i,()=>i.remoteSyncer.applySuccessfulWrite(f)),yield Hd(i)}),Hg.apply(this,arguments)}function Ty(i,e){return jg.apply(this,arguments)}function jg(){return jg=(0,$e.Z)(function*(i,e){var t;e&&Xa(i).Yo&&(yield(t=(0,$e.Z)(function*(a,f){if(tc(y=f.code)&&y!==kt.ABORTED){const C=a.fu.shift();Xa(a).Mo(),yield $m(a,()=>a.remoteSyncer.rejectFailedWrite(C.batchId,f)),yield Hd(a)}var y}),function(a,f){return t.apply(this,arguments)})(i,e)),Gm(i)&&Of(i)}),jg.apply(this,arguments)}function jd(i,e){return $g.apply(this,arguments)}function $g(){return $g=(0,$e.Z)(function*(i,e){const t=on(i);t.asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials");const a=Lc(t);t._u.add(3),yield gd(t),a&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Fa(t)}),$g.apply(this,arguments)}function Gg(i,e){return dc.apply(this,arguments)}function dc(){return dc=(0,$e.Z)(function*(i,e){const t=on(i);e?(t._u.delete(2),yield Fa(t)):e||(t._u.add(2),yield gd(t),t.gu.set("Unknown"))}),dc.apply(this,arguments)}function hc(i){return i.pu||(i.pu=function(e,t,a){const f=on(e);return f.su(),new Ey(t,f.connection,f.authCredentials,f.appCheckCredentials,f.yt,a)}(i.datastore,i.asyncQueue,{Yr:Rp.bind(null,i),Zr:Mp.bind(null,i),Wo:xp.bind(null,i)}),i.wu.push(function(){var e=(0,$e.Z)(function*(t){t?(i.pu.Mo(),Vg(i)?cc(i):i.gu.set("Unknown")):(yield i.pu.stop(),Dy(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Xa(i){return i.Iu||(i.Iu=function(e,t,a){const f=on(e);return f.su(),new Mf(t,f.connection,f.authCredentials,f.appCheckCredentials,f.yt,a)}(i.datastore,i.asyncQueue,{Yr:Bc.bind(null,i),Zr:Ty.bind(null,i),tu:nf.bind(null,i),Zo:Bp.bind(null,i)}),i.wu.push(function(){var e=(0,$e.Z)(function*(t){t?(i.Iu.Mo(),yield Hd(i)):(yield i.Iu.stop(),i.fu.length>0&&(rn("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Pf{constructor(e,t,a,f,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=f,this.removalCallback=y,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,a,f,y){const C=Date.now()+a,P=new Pf(e,t,C,f,y);return P.start(a),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(kt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(i,e){if(Hi("AsyncQueue",`${e}: ${i}`),sl(i))return new Zt(kt.UNAVAILABLE,`${e}: ${i}`);throw i}class Gd{constructor(e){this.comparator=e?(t,a)=>e(t,a)||_n.comparator(t.key,a.key):(t,a)=>_n.comparator(t.key,a.key),this.keyedMap=Sd(),this.sortedSet=new oo(this.comparator)}static emptySet(e){return new Gd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=a.getNext().key;if(!f.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Gd;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Wd{constructor(){this.Tu=new oo(_n.comparator)}track(e){const t=e.doc.key,a=this.Tu.get(t);a?0!==e.type&&3===a.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==a.type?this.Tu=this.Tu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Tu=this.Tu.remove(t):1===e.type&&2===a.type?this.Tu=this.Tu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):fn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,a)=>{e.push(a)}),e}}class Vc{constructor(e,t,a,f,y,C,P,J,re){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=f,this.mutatedKeys=y,this.fromCache=C,this.syncStateChanged=P,this.excludesMetadataChanges=J,this.hasCachedResults=re}static fromInitialDocuments(e,t,a,f,y){const C=[];return t.forEach(P=>{C.push({type:0,doc:P})}),new Vc(e,t,Gd.emptySet(t),C,a,f,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let f=0;f<t.length;f++)if(t[f].type!==a[f].type||!t[f].doc.isEqual(a[f].doc))return!1;return!0}}class Wg{constructor(){this.Au=void 0,this.listeners=[]}}class zg{constructor(){this.queries=new Ml(e=>Jc(e),fi),this.onlineState="Unknown",this.Ru=new Set}}function Uc(i,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,$e.Z)(function*(i,e){const t=on(i),a=e.query;let f=!1,y=t.queries.get(a);if(y||(f=!0,y=new Wg),f)try{y.Au=yield t.onListen(a)}catch(C){const P=$d(C,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(P)}t.queries.set(a,y),y.listeners.push(e),e.bu(t.onlineState),y.Au&&e.Pu(y.Au)&&rf(t)}),Vp.apply(this,arguments)}function Kg(i,e){return kl.apply(this,arguments)}function kl(){return kl=(0,$e.Z)(function*(i,e){const t=on(i),a=e.query;let f=!1;const y=t.queries.get(a);if(y){const C=y.listeners.indexOf(e);C>=0&&(y.listeners.splice(C,1),f=0===y.listeners.length)}if(f)return t.queries.delete(a),t.onUnlisten(a)}),kl.apply(this,arguments)}function qg(i,e){const t=on(i);let a=!1;for(const f of e){const C=t.queries.get(f.query);if(C){for(const P of C.listeners)P.Pu(f)&&(a=!0);C.Au=f}}a&&rf(t)}function Up(i,e,t){const a=on(i),f=a.queries.get(e);if(f)for(const y of f.listeners)y.onError(t);a.queries.delete(e)}function rf(i){i.Ru.forEach(e=>{e.next()})}class sf{constructor(e,t,a){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=a||{}}Pu(e){if(!this.options.includeMetadataChanges){const a=[];for(const f of e.docChanges)3!==f.type&&a.push(f);e=new Vc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class af{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Hp{constructor(e){this.yt=e}Ji(e){return Zl(this.yt,e)}Yi(e){return e.metadata.exists?gh(this.yt,e.document,!1):ao.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Qs(e)}}class kf{constructor(e,t,a){this.Mu=e,this.localStore=t,this.yt=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yg(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const a=ti.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,a=new Hp(this.yt);for(const f of e)if(f.metadata.queries){const y=a.Ji(f.metadata.name);for(const C of f.metadata.queries){const P=(t.get(C)||Jr()).add(y);t.set(C,P)}}return t}complete(){var e=this;return(0,$e.Z)(function*(){const t=yield function H_(i,e,t,a){return Bm.apply(this,arguments)}(e.localStore,new Hp(e.yt),e.documents,e.Mu.id),a=e.$u(e.documents);for(const f of e.queries)yield wy(e.localStore,f,a.get(f.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Yg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class zd{constructor(e){this.key=e}}class Zg{constructor(e){this.key=e}}class Qg{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jr(),this.mutatedKeys=Jr(),this.Gu=N(e),this.Qu=new Gd(this.Gu)}get ju(){return this.qu}Wu(e,t){const a=t?t.zu:new Wd,f=t?t.Qu:this.Qu;let y=t?t.mutatedKeys:this.mutatedKeys,C=f,P=!1;const J="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,re="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((me,Ke)=>{const It=f.get(me),Jt=wo(this.query,Ke)?Ke:null,ln=!!It&&this.mutatedKeys.has(It.key),Yn=!!Jt&&(Jt.hasLocalMutations||this.mutatedKeys.has(Jt.key)&&Jt.hasCommittedMutations);let vr=!1;It&&Jt?It.data.isEqual(Jt.data)?ln!==Yn&&(a.track({type:3,doc:Jt}),vr=!0):this.Hu(It,Jt)||(a.track({type:2,doc:Jt}),vr=!0,(J&&this.Gu(Jt,J)>0||re&&this.Gu(Jt,re)<0)&&(P=!0)):!It&&Jt?(a.track({type:0,doc:Jt}),vr=!0):It&&!Jt&&(a.track({type:1,doc:It}),vr=!0,(J||re)&&(P=!0)),vr&&(Jt?(C=C.add(Jt),y=Yn?y.add(me):y.delete(me)):(C=C.delete(me),y=y.delete(me)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const me="F"===this.query.limitType?C.last():C.first();C=C.delete(me.key),y=y.delete(me.key),a.track({type:1,doc:me})}return{Qu:C,zu:a,$i:P,mutatedKeys:y}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const f=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const y=e.zu.Eu();y.sort((re,me)=>function(Ke,It){const Jt=ln=>{switch(ln){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fn()}};return Jt(Ke)-Jt(It)}(re.type,me.type)||this.Gu(re.doc,me.doc)),this.Ju(a);const C=t?this.Yu():[],P=0===this.Ku.size&&this.current?1:0,J=P!==this.Uu;return this.Uu=P,0!==y.length||J?{snapshot:new Vc(this.query,e.Qu,f,y,e.mutatedKeys,0===P,J,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Wd,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const t=[];return e.forEach(a=>{this.Ku.has(a)||t.push(new Zg(a))}),this.Ku.forEach(a=>{e.has(a)||t.push(new zd(a))}),t}tc(e){this.qu=e.Hi,this.Ku=Jr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Vc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Jg{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class lf{constructor(e){this.key=e,this.nc=!1}}class Ff{constructor(e,t,a,f,y,C){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=f,this.currentUser=y,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new Ml(P=>Jc(P),fi),this.rc=new Map,this.oc=new Set,this.uc=new oo(_n.comparator),this.cc=new Map,this.ac=new Ng,this.hc={},this.lc=new Map,this.fc=gl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function jp(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,$e.Z)(function*(i,e){const t=Qp(i);let a,f;const y=t.ic.get(e);if(y)a=y.targetId,t.sharedClientState.addLocalQueryTarget(a),f=y.view.ec();else{const C=yield Nf(t.localStore,Lo(e));t.isPrimaryClient&&Dh(t.remoteStore,C);const P=t.sharedClientState.addLocalQueryTarget(C.targetId);a=C.targetId,f=yield zm(t,e,a,"current"===P,C.resumeToken)}return f}),$p.apply(this,arguments)}function zm(i,e,t,a,f){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,$e.Z)(function*(i,e,t,a,f){i._c=(Ke,It,Jt)=>{return(ln=(0,$e.Z)(function*(Yn,vr,Do,ta){let Ns=vr.view.Wu(Do);Ns.$i&&(Ns=yield Pc(Yn.localStore,vr.query,!1).then(({documents:Ws})=>vr.view.Wu(Ws,Ns)));const Ea=ta&&ta.targetChanges.get(vr.targetId),ks=vr.view.applyChanges(Ns,Yn.isPrimaryClient,Ea);return Uf(Yn,vr.targetId,ks.Xu),ks.snapshot}),function(Yn,vr,Do,ta){return ln.apply(this,arguments)})(i,Ke,It,Jt);var ln};const y=yield Pc(i.localStore,e,!0),C=new Qg(e,y.Hi),P=C.Wu(y.documents),J=xl.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState,f),re=C.applyChanges(P,i.isPrimaryClient,J);Uf(i,t,re.Xu);const me=new Jg(e,t,C);return i.ic.set(e,me),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),re.snapshot}),Lf.apply(this,arguments)}function Xg(i,e){return em.apply(this,arguments)}function em(){return em=(0,$e.Z)(function*(i,e){const t=on(i),a=t.ic.get(e),f=t.rc.get(a.targetId);if(f.length>1)return t.rc.set(a.targetId,f.filter(y=>!fi(y,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Eh(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),Pl(t.remoteStore,a.targetId),Sh(t,a.targetId)}).catch(Tu))):(Sh(t,a.targetId),yield Eh(t.localStore,a.targetId,!0))}),em.apply(this,arguments)}function Gp(){return Gp=(0,$e.Z)(function*(i,e,t){const a=uf(i);try{const f=yield function(y,C){const P=on(y),J=Ss.now(),re=C.reduce((It,Jt)=>It.add(Jt.key),Jr());let me,Ke;return P.persistence.runTransaction("Locally write mutations","readwrite",It=>{let Jt=Ya(),ln=Jr();return P.Gi.getEntries(It,re).next(Yn=>{Jt=Yn,Jt.forEach((vr,Do)=>{Do.isValidDocument()||(ln=ln.add(vr))})}).next(()=>P.localDocuments.getOverlayedDocuments(It,Jt)).next(Yn=>{me=Yn;const vr=[];for(const Do of C){const ta=ql(Do,me.get(Do.key).overlayedDocument);null!=ta&&vr.push(new xu(Do.key,ta,Ec(ta.value.mapValue),lo.exists(!0)))}return P.mutationQueue.addMutationBatch(It,J,vr,C)}).next(Yn=>{Ke=Yn;const vr=Yn.applyToLocalDocumentSet(me,ln);return P.documentOverlayCache.saveOverlays(It,Yn.batchId,vr)})}).then(()=>({batchId:Ke.batchId,changes:Ic(me)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(f.batchId),function(y,C,P){let J=y.hc[y.currentUser.toKey()];J||(J=new oo(Er)),J=J.insert(C,P),y.hc[y.currentUser.toKey()]=J}(a,f.batchId,t),yield Hc(a,f.changes),yield Hd(a.remoteStore)}catch(f){const y=$d(f,"Failed to persist write");t.reject(y)}}),Gp.apply(this,arguments)}function qm(i,e){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,$e.Z)(function*(i,e){const t=on(i);try{const a=yield km(t.localStore,e);e.targetChanges.forEach((f,y)=>{const C=t.cc.get(y);C&&(wn(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?C.nc=!0:f.modifiedDocuments.size>0?wn(C.nc):f.removedDocuments.size>0&&(wn(C.nc),C.nc=!1))}),yield Hc(t,a,e)}catch(a){yield Tu(a)}}),Fl.apply(this,arguments)}function tm(i,e,t){const a=on(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const f=[];a.ic.forEach((y,C)=>{const P=C.view.bu(e);P.snapshot&&f.push(P.snapshot)}),function(y,C){const P=on(y);P.onlineState=C;let J=!1;P.queries.forEach((re,me)=>{for(const Ke of me.listeners)Ke.bu(C)&&(J=!0)}),J&&rf(P)}(a.eventManager,e),f.length&&a.sc.Wo(f),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Ih(i,e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,$e.Z)(function*(i,e,t){const a=on(i);a.sharedClientState.updateQueryState(e,"rejected",t);const f=a.cc.get(e),y=f&&f.key;if(y){let C=new oo(_n.comparator);C=C.insert(y,ao.newNoDocument(y,zn.min()));const P=Jr().add(y),J=new Pa(zn.min(),new Map,new es(Er),C,P);yield qm(a,J),a.uc=a.uc.remove(y),a.cc.delete(e),Kp(a)}else yield Eh(a.localStore,e,!1).then(()=>Sh(a,e,t)).catch(Tu)}),Wp.apply(this,arguments)}function nm(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,$e.Z)(function*(i,e){const t=on(i),a=e.batch.batchId;try{const f=yield xm(t.localStore,e);Bf(t,a,null),zp(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield Hc(t,f)}catch(f){yield Tu(f)}}),Kd.apply(this,arguments)}function Ym(i,e,t){return rm.apply(this,arguments)}function rm(){return rm=(0,$e.Z)(function*(i,e,t){const a=on(i);try{const f=yield function(y,C){const P=on(y);return P.persistence.runTransaction("Reject batch","readwrite-primary",J=>{let re;return P.mutationQueue.lookupMutationBatch(J,C).next(me=>(wn(null!==me),re=me.keys(),P.mutationQueue.removeMutationBatch(J,me))).next(()=>P.mutationQueue.performConsistencyCheck(J)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(J,re,C)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(J,re)).next(()=>P.localDocuments.getDocuments(J,re))})}(a.localStore,e);Bf(a,e,t),zp(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield Hc(a,f)}catch(f){yield Tu(f)}}),rm.apply(this,arguments)}function im(){return im=(0,$e.Z)(function*(i,e){const t=on(i);Lc(t.remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(y){const C=on(y);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>C.mutationQueue.getHighestUnacknowledgedBatchId(P))}(t.localStore);if(-1===a)return void e.resolve();const f=t.lc.get(a)||[];f.push(e),t.lc.set(a,f)}catch(a){const f=$d(a,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),im.apply(this,arguments)}function zp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Bf(i,e,t){const a=on(i);let f=a.hc[a.currentUser.toKey()];if(f){const y=f.get(e);y&&(t?y.reject(t):y.resolve(),f=f.remove(e)),a.hc[a.currentUser.toKey()]=f}}function Sh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.rc.get(e))i.ic.delete(a),t&&i.sc.wc(a,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(a=>{i.ac.containsKey(a)||Vf(i,a)})}function Vf(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Pl(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Kp(i))}function Uf(i,e,t){for(const a of t)a instanceof zd?(i.ac.addReference(a.key,e),Hf(i,a)):a instanceof Zg?(rn("SyncEngine","Document no longer in limbo: "+a.key),i.ac.removeReference(a.key,e),i.ac.containsKey(a.key)||Vf(i,a.key)):fn()}function Hf(i,e){const t=e.key,a=t.path.canonicalString();i.uc.get(t)||i.oc.has(a)||(rn("SyncEngine","New document in limbo: "+t),i.oc.add(a),Kp(i))}function Kp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new _n(ti.fromString(e)),a=i.fc.next();i.cc.set(a,new lf(t)),i.uc=i.uc.insert(t,a),Dh(i.remoteStore,new Mc(Lo(qo(t.path)),a,2,M.at))}}function Hc(i,e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,$e.Z)(function*(i,e,t){const a=on(i),f=[],y=[],C=[];var P;a.ic.isEmpty()||(a.ic.forEach((P,J)=>{C.push(a._c(J,e,t).then(re=>{if((re||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(J.targetId,re?.fromCache?"not-current":"current"),re){f.push(re);const me=ni.Ci(J.targetId,re);y.push(me)}}))}),yield Promise.all(C),a.sc.Wo(f),yield(P=(0,$e.Z)(function*(J,re){const me=on(J);try{yield me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ke=>At.forEach(re,It=>At.forEach(It.Si,Jt=>me.persistence.referenceDelegate.addReference(Ke,It.targetId,Jt)).next(()=>At.forEach(It.Di,Jt=>me.persistence.referenceDelegate.removeReference(Ke,It.targetId,Jt)))))}catch(Ke){if(!sl(Ke))throw Ke;rn("LocalStore","Failed to update sequence numbers: "+Ke)}for(const Ke of re){const It=Ke.targetId;if(!Ke.fromCache){const Jt=me.qi.get(It),Yn=Jt.withLastLimboFreeSnapshotVersion(Jt.snapshotVersion);me.qi=me.qi.insert(It,Yn)}}}),function(J,re){return P.apply(this,arguments)})(a.localStore,y))}),Vu.apply(this,arguments)}function Zm(i,e){return jf.apply(this,arguments)}function jf(){return jf=(0,$e.Z)(function*(i,e){const t=on(i);if(!t.currentUser.isEqual(e)){rn("SyncEngine","User change. New user:",e.toKey());const a=yield V_(t.localStore,e);t.currentUser=e,(f=t).lc.forEach(C=>{C.forEach(P=>{P.reject(new Zt(kt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.lc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Hc(t,a.ji)}var f}),jf.apply(this,arguments)}function Cy(i,e){const t=on(i),a=t.cc.get(e);if(a&&a.nc)return Jr().add(a.key);{let f=Jr();const y=t.rc.get(e);if(!y)return f;for(const C of y){const P=t.ic.get(C);f=f.unionWith(P.view.ju)}return f}}function Iy(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,$e.Z)(function*(i,e){const t=on(i),a=yield Pc(t.localStore,e.query,!0),f=e.view.tc(a);return t.isPrimaryClient&&Uf(t,e.targetId,f.Xu),f}),qp.apply(this,arguments)}function Qm(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,$e.Z)(function*(i,e){const t=on(i);return xg(t.localStore,e).then(a=>Hc(t,a))}),$f.apply(this,arguments)}function Jm(i,e,t,a){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,$e.Z)(function*(i,e,t,a){const f=on(i),y=yield function(C,P){const J=on(C),re=on(J.mutationQueue);return J.persistence.runTransaction("Lookup mutation documents","readonly",me=>re.Tn(me,P).next(Ke=>Ke?J.localDocuments.getDocuments(me,Ke):At.resolve(null)))}(f.localStore,e);var P;null!==y?("pending"===t?yield Hd(f.remoteStore):"acknowledged"===t||"rejected"===t?(Bf(f,e,a||null),zp(f,e),P=e,on(on(f.localStore).mutationQueue).An(P)):fn(),yield Hc(f,y)):rn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yp.apply(this,arguments)}function sm(){return sm=(0,$e.Z)(function*(i,e){const t=on(i);if(Qp(t),uf(t),!0===e&&!0!==t.dc){const a=t.sharedClientState.getAllActiveQueryTargets(),f=yield Gf(t,a.toArray());t.dc=!0,yield Gg(t.remoteStore,!0);for(const y of f)Dh(t.remoteStore,y)}else if(!1===e&&!1!==t.dc){const a=[];let f=Promise.resolve();t.rc.forEach((y,C)=>{t.sharedClientState.isLocalQueryTarget(C)?a.push(C):f=f.then(()=>(Sh(t,C),Eh(t.localStore,C,!0))),Pl(t.remoteStore,C)}),yield f,yield Gf(t,a),function(y){const C=on(y);C.cc.forEach((P,J)=>{Pl(C.remoteStore,J)}),C.ac.fs(),C.cc=new Map,C.uc=new oo(_n.comparator)}(t),t.dc=!1,yield Gg(t.remoteStore,!1)}}),sm.apply(this,arguments)}function Gf(i,e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,$e.Z)(function*(i,e,t){const a=on(i),f=[],y=[];for(const C of e){let P;const J=a.rc.get(C);if(J&&0!==J.length){P=yield Nf(a.localStore,Lo(J[0]));for(const re of J){const me=a.ic.get(re),Ke=yield Iy(a,me);Ke.snapshot&&y.push(Ke.snapshot)}}else{const re=yield Lm(a.localStore,C);P=yield Nf(a.localStore,re),yield zm(a,zf(re),C,!1,P.resumeToken)}f.push(P)}return a.sc.Wo(y),f}),Wf.apply(this,arguments)}function zf(i){return uh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Sy(i){const e=on(i);return on(on(e.localStore).persistence).vi()}function Zp(i,e,t,a){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,$e.Z)(function*(i,e,t,a){const f=on(i);if(f.dc)return void rn("SyncEngine","Ignoring unexpected query state notification.");const y=f.rc.get(e);if(y&&y.length>0)switch(t){case"current":case"not-current":{const C=yield xg(f.localStore,Ed(y[0])),P=Pa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gn.EMPTY_BYTE_STRING);yield Hc(f,C,P);break}case"rejected":yield Eh(f.localStore,e,!0),Sh(f,e,a);break;default:fn()}}),Xm.apply(this,arguments)}function e_(i,e,t){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,$e.Z)(function*(i,e,t){const a=Qp(i);if(a.dc){for(const f of e){if(a.rc.has(f)){rn("SyncEngine","Adding an already active target "+f);continue}const y=yield Lm(a.localStore,f),C=yield Nf(a.localStore,y);yield zm(a,zf(y),C.targetId,!1,C.resumeToken),Dh(a.remoteStore,C)}for(const f of t)a.rc.has(f)&&(yield Eh(a.localStore,f,!1).then(()=>{Pl(a.remoteStore,f),Sh(a,f)}).catch(Tu))}}),Kf.apply(this,arguments)}function Qp(i){const e=on(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=qm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ih.bind(null,e),e.sc.Wo=qg.bind(null,e.eventManager),e.sc.wc=Up.bind(null,e.eventManager),e}function uf(i){const e=on(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ym.bind(null,e),e}class jc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,$e.Z)(function*(){t.yt=Rf(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return co(this.persistence,new Om,e.initialUser,this.yt)}yc(e){return new Rg(ef.Bs,this.yt)}gc(e){return new Fg}terminate(){var e=this;return(0,$e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qf extends jc{constructor(e,t,a){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,$e.Z)(function*(){yield t().call(a,e),yield a.Ac.initialize(a,e),yield uf(a.Ac.syncEngine),yield Hd(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return co(this.persistence,new Om,e.initialUser,this.yt)}Tc(e,t){return new Ag(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const a=new A(t,this.persistence);return new xa(e.asyncQueue,a)}yc(e){const t=Og(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new gp(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,Lg(),Dp(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Fg}}class Jp extends qf{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,$e.Z)(function*(){yield t().call(a,e);const f=a.Ac.syncEngine;a.sharedClientState instanceof kg&&(a.sharedClientState.syncEngine={Fr:Jm.bind(null,f),$r:Zp.bind(null,f),Br:e_.bind(null,f),vi:Sy.bind(null,f),Mr:Qm.bind(null,f)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var y=(0,$e.Z)(function*(C){yield function q_(i,e){return sm.apply(this,arguments)}(a.Ac.syncEngine,C),a.gcScheduler&&(C&&!a.gcScheduler.started?a.gcScheduler.start():C||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(C&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():C||a.indexBackfillerScheduler.stop())});return function(C){return y.apply(this,arguments)}}())})()}gc(e){const t=Lg();if(!kg.C(t))throw new Zt(kt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Og(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kg(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class qd{initialize(e,t){var a=this;return(0,$e.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=f=>tm(a.syncEngine,f,1),a.remoteStore.remoteSyncer.handleCredentialChange=Zm.bind(null,a.syncEngine),yield Gg(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zg}createDatastore(e){const t=Rf(e.databaseInfo.databaseId),a=new W_(e.databaseInfo);return new Ud(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,f=e.asyncQueue,y=P=>tm(this.syncEngine,P,0),C=jm.C()?new jm:new j_,new Sp(t,a,f,y,C);var t,a,f,y,C}createSyncEngine(e,t){return function(a,f,y,C,P,J,re){const me=new Ff(a,f,y,C,P,J);return re&&(me.dc=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,$e.Z)(function*(t){const a=on(t);rn("RemoteStore","RemoteStore shutting down."),a._u.add(5),yield gd(a),a.mu.shutdown(),a.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function am(i,e,t){if(!t)throw new Zt(kt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Ll(i,e,t,a){if(!0===e&&!0===a)throw new Zt(kt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Yf(i){if(!_n.isDocumentKey(i))throw new Zt(kt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function cf(i){if(_n.isDocumentKey(i))throw new Zt(kt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function df(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":fn()}function Mi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Zt(kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=df(i);throw new Zt(kt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function t_(i,e){if(e<=0)throw new Zt(kt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const lm=new Map;class n_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ll("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,a,f){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zt(kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Is;switch(t.type){case"gapi":return new qs(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zt(kt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lm.get(e);t&&(rn("ComponentProvider","Removing Datastore"),lm.delete(e),t.terminate())}(this),Promise.resolve()}}class No{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new No(this.firestore,e,this._key)}}class ll{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class Uu extends ll{constructor(e,t,a){super(e,t,qo(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new No(this.firestore,null,new _n(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function Qf(i,e,...t){if(i=(0,ze.m9)(i),am("collection","path",e),i instanceof Xp){const a=ti.fromString(e,...t);return cf(a),new Uu(i,null,a)}{if(!(i instanceof No||i instanceof Uu))throw new Zt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ti.fromString(e,...t));return cf(a),new Uu(i.firestore,null,a)}}function fc(i,e,...t){if(i=(0,ze.m9)(i),1===arguments.length&&(e=Al.R()),am("doc","path",e),i instanceof Xp){const a=ti.fromString(e,...t);return Yf(a),new No(i,null,new _n(a))}{if(!(i instanceof No||i instanceof Uu))throw new Zt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ti.fromString(e,...t));return Yf(a),new No(i.firestore,i instanceof Uu?i.converter:null,new _n(a))}}function r_(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),(i instanceof No||i instanceof Uu)&&(e instanceof No||e instanceof Uu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function um(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),i instanceof ll&&e instanceof ll&&i.firestore===e.firestore&&fi(i._query,e._query)&&i.converter===e.converter}function cm(i,e=10240){let t=0;return{read:()=>(0,$e.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,$e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class i_{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.ku)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,$e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,$e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,$e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const a=e.vc.decode(t),f=Number(a);isNaN(f)&&e.Dc(`length string (${a}) is not valid number`);const y=yield e.Cc(f);return new af(JSON.parse(y),t.length+f)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,$e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}Cc(e){var t=this;return(0,$e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const a=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,$e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class s_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,$e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(kt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(f=(0,$e.Z)(function*(y,C){const P=on(y),J=sd(P.yt)+"/documents",re={documents:C.map(Jt=>id(P.yt,Jt))},me=yield P._o("BatchGetDocuments",J,re,C.length),Ke=new Map;me.forEach(Jt=>{const ln=function zh(i,e){return"found"in e?function(t,a){wn(!!a.found);const f=Zl(t,a.found.name),y=Qs(a.found.updateTime),C=a.found.createTime?Qs(a.found.createTime):zn.min(),P=new Ka({mapValue:{fields:a.found.fields}});return ao.newFoundDocument(f,y,C,P)}(i,e):"missing"in e?function(t,a){wn(!!a.missing),wn(!!a.readTime);const f=Zl(t,a.missing),y=Qs(a.readTime);return ao.newNoDocument(f,y)}(i,e):fn()}(P.yt,Jt);Ke.set(ln.key.toString(),ln)});const It=[];return C.forEach(Jt=>{const ln=Ke.get(Jt.toString());wn(!!ln),It.push(ln)}),It}),function(y,C){return f.apply(this,arguments)})(t.datastore,e);var f;return a.forEach(f=>t.recordVersion(f)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,$e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,f)=>{const y=_n.fromPath(f);e.mutations.push(new Hh(y,e.precondition(y)))}),yield(a=(0,$e.Z)(function*(f,y){const C=on(f),P=sd(C.yt)+"/documents",J={writes:y.map(re=>od(C.yt,re))};yield C.ao("Commit",P,J)}),function(f,y){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fn();t=zn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Zt(kt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(zn.min())?lo.exists(!1):lo.updateTime(t):lo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zn.min()))throw new Zt(kt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lo.updateTime(t)}return lo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jf{constructor(e,t,a,f,y){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=f,this.deferred=y,this.kc=a.maxAttempts,this.xo=new Tp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,$e.Z)(function*(){const t=new s_(e.datastore),a=e.Mc(t);a&&a.then(f=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(f)}).catch(y=>{e.Fc(y)}))}).catch(f=>{e.Fc(f)})}))}Mc(e){try{const t=this.updateFunction(e);return!xe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tc(t)}return!1}}class o_{constructor(e,t,a,f){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=f,this.user=io.UNAUTHENTICATED,this.clientId=Al.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var C=(0,$e.Z)(function*(P){rn("FirestoreClient","Received user=",P.uid),yield y.authCredentialListener(P),y.user=P});return function(P){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(a,C=>(rn("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,$e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const f=$d(a,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}function a_(i,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,$e.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var f=(0,$e.Z)(function*(y){a.isEqual(y)||(yield V_(e.localStore,y),a=y)});return function(y){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Xf.apply(this,arguments)}function l_(i,e){return ju.apply(this,arguments)}function ju(){return ju=(0,$e.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Yd(i);rn("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(f=>jd(e.remoteStore,f)),i.setAppCheckTokenChangeListener((f,y)=>jd(e.remoteStore,y)),i.onlineComponents=e}),ju.apply(this,arguments)}function Yd(i){return ba.apply(this,arguments)}function ba(){return ba=(0,$e.Z)(function*(i){return i.offlineComponents||(rn("FirestoreClient","Using default OfflineComponentProvider"),yield a_(i,new jc)),i.offlineComponents}),ba.apply(this,arguments)}function pc(i){return hf.apply(this,arguments)}function hf(){return hf=(0,$e.Z)(function*(i){return i.onlineComponents||(rn("FirestoreClient","Using default OnlineComponentProvider"),yield l_(i,new qd)),i.onlineComponents}),hf.apply(this,arguments)}function ru(i){return Yd(i).then(e=>e.persistence)}function ff(i){return Yd(i).then(e=>e.localStore)}function Zd(i){return pc(i).then(e=>e.remoteStore)}function Qd(i){return pc(i).then(e=>e.syncEngine)}function gc(i){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,$e.Z)(function*(i){const e=yield pc(i),t=e.eventManager;return t.onListen=jp.bind(null,e.syncEngine),t.onUnlisten=Xg.bind(null,e.syncEngine),t}),Jd.apply(this,arguments)}function Oh(i,e,t={}){const a=new Ii;return i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(f,y,C,P,J){const re=new eg({next:Ke=>{y.enqueueAndForget(()=>Kg(f,me));const It=Ke.docs.has(C);!It&&Ke.fromCache?J.reject(new Zt(kt.UNAVAILABLE,"Failed to get document because the client is offline.")):It&&Ke.fromCache&&P&&"server"===P.source?J.reject(new Zt(kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):J.resolve(Ke)},error:Ke=>J.reject(Ke)}),me=new sf(qo(C.path),re,{includeMetadataChanges:!0,Nu:!0});return Uc(f,me)}(yield gc(i),i.asyncQueue,e,t,a)})),a.promise}function u_(i,e,t={}){const a=new Ii;return i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(f,y,C,P,J){const re=new eg({next:Ke=>{y.enqueueAndForget(()=>Kg(f,me)),Ke.fromCache&&"server"===P.source?J.reject(new Zt(kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):J.resolve(Ke)},error:Ke=>J.reject(Ke)}),me=new sf(C,re,{includeMetadataChanges:!0,Nu:!0});return Uc(f,me)}(yield gc(i),i.asyncQueue,e,t,a)})),a.promise}class h_{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Tp(this,"async_queue_retry"),this.Wc=()=>{const t=Dp();t&&rn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ii;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,$e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!sl(t))throw t;rn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,Hi("INTERNAL UNHANDLED ERROR: ",function(y){let C=y.message||"";return y.stack&&(C=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),C}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=t,t}enqueueAfterDelay(e,t,a){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const f=Pf.createAndSchedule(this,e,t,a,y=>this.Yc(y));return this.Uc.push(f),f}zc(){this.Kc&&fn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,$e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ng(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const f of["next","error","complete"])if(f in a&&"function"==typeof a[f])return!0;return!1}(i)}class c{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class o extends Xp{constructor(e,t,a,f){super(e,t,a,f),this.type="firestore",this._queue=new h_,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||O(this),this._firestoreClient.terminate()}}function T(i){return i._firestoreClient||O(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function O(i){var e;const t=i._freezeSettings(),a=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new S(i._databaseId,y,i._persistenceKey,(P=t).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));var y,P;i._firestoreClient=new o_(i._authCredentials,i._appCheckCredentials,i._queue,a)}function de(i,e,t){const a=new Ii;return i.asyncQueue.enqueue((0,$e.Z)(function*(){try{yield a_(i,t),yield l_(i,e),a.resolve()}catch(f){const y=f;if(!("FirebaseError"===(C=y).name?C.code===kt.FAILED_PRECONDITION||C.code===kt.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw y;cl("Error enabling offline persistence. Falling back to persistence disabled: "+y),a.reject(y)}var C})).then(()=>a.promise)}function Or(i){if(i._initialized||i._terminated)throw new Zt(kt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(gn.fromBase64String(e))}catch(t){throw new Zt(kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _s{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iu{constructor(e){this._methodName=e}}class su{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Er(this._lat,e._lat)||Er(this._long,e._long)}}const Bl=/^__.*__$/;class $c{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Td(e,this.data,t,this.fieldTransforms)}}class mc{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _c(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fn()}}class pf{constructor(e,t,a,f,y,C){this.settings=e,this.databaseId=t,this.yt=a,this.ignoreUndefinedProperties=f,void 0===y&&this.na(),this.fieldTransforms=y||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new pf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ia({path:a,oa:!1});return f.ua(e),f}ca(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ia({path:a,oa:!1});return f.na(),f}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return xh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(_c(this.sa)&&Bl.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ep{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=a||Rf(e)}da(e,t,a,f=!1){return new pf({sa:e,methodName:t,fa:a,path:ui.emptyPath(),oa:!1,la:f},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function ou(i){const e=i._freezeSettings(),t=Rf(i._databaseId);return new ep(i._databaseId,!!e.ignoreUndefinedProperties,t)}function gf(i,e,t,a,f,y={}){const C=i.da(y.merge||y.mergeFields?2:0,e,t,f);ul("Data must be an object, but it was:",C,a);const P=f_(a,C);let J,re;if(y.merge)J=new wl(C.fieldMask),re=C.fieldTransforms;else if(y.mergeFields){const me=[];for(const Ke of y.mergeFields){const It=Wc(e,Ke,t);if(!C.contains(It))throw new Zt(kt.INVALID_ARGUMENT,`Field '${It}' is specified in your field mask but missing from your input data.`);Ay(me,It)||me.push(It)}J=new wl(me),re=C.fieldTransforms.filter(Ke=>J.covers(Ke.field))}else J=null,re=C.fieldTransforms;return new $c(new Ka(P),J,re)}class eh extends iu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function ir(i,e,t){return new pf({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sr extends iu{_toFieldTransform(e){return new Mu(e.path,new nr)}isEqual(e){return e instanceof Sr}}class Hr extends iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ir(this,e,!0),a=this._a.map(y=>Gs(y,t)),f=new Ir(a);return new Mu(e.path,f)}isEqual(e){return this===e}}class hs extends iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ir(this,e,!0),a=this._a.map(y=>Gs(y,t)),f=new Eo(a);return new Mu(e.path,f)}isEqual(e){return this===e}}class el extends iu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Dl(e.yt,oe(e.yt,this.wa));return new Mu(e.path,t)}isEqual(e){return this===e}}function yu(i,e,t,a){const f=i.da(1,e,t);ul("Data must be an object, but it was:",f,a);const y=[],C=Ka.empty();ae(a,(J,re)=>{const me=Ro(e,J,t);re=(0,ze.m9)(re);const Ke=f.ca(me);if(re instanceof eh)y.push(me);else{const It=Gs(re,Ke);null!=It&&(y.push(me),C.set(me,It))}});const P=new wl(y);return new mc(C,P,f.fieldTransforms)}function Tl(i,e,t,a,f,y){const C=i.da(1,e,t),P=[Wc(e,a,t)],J=[f];if(y.length%2!=0)throw new Zt(kt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let It=0;It<y.length;It+=2)P.push(Wc(e,y[It])),J.push(y[It+1]);const re=[],me=Ka.empty();for(let It=P.length-1;It>=0;--It)if(!Ay(re,P[It])){const Jt=P[It];let ln=J[It];ln=(0,ze.m9)(ln);const Yn=C.ca(Jt);if(ln instanceof eh)re.push(Jt);else{const vr=Gs(ln,Yn);null!=vr&&(re.push(Jt),me.set(Jt,vr))}}const Ke=new wl(re);return new mc(me,Ke,C.fieldTransforms)}function Gc(i,e,t,a=!1){return Gs(t,i.da(a?4:3,e))}function Gs(i,e){if(p_(i=(0,ze.m9)(i)))return ul("Unsupported field value:",e,i),f_(i,e);if(i instanceof iu)return function(t,a){if(!_c(a.sa))throw a.ha(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${t._methodName}() is not currently supported inside arrays`);const f=t._toFieldTransform(a);f&&a.fieldTransforms.push(f)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,a){const f=[];let y=0;for(const C of t){let P=Gs(C,a.aa(y));null==P&&(P={nullValue:"NULL_VALUE"}),f.push(P),y++}return{arrayValue:{values:f}}}(i,e)}return function(t,a){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oe(a.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const f=Ss.fromDate(t);return{timestampValue:fu(a.yt,f)}}if(t instanceof Ss){const f=new Ss(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fu(a.yt,f)}}if(t instanceof su)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bi)return{bytesValue:Rd(a.yt,t._byteString)};if(t instanceof No){const f=a.databaseId,y=t.firestore._databaseId;if(!y.isEqual(f))throw a.ha(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:rd(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.ha(`Unsupported field value: ${df(t)}`)}(i,e)}function f_(i,e){const t={};return Re(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ae(i,(a,f)=>{const y=Gs(f,e.ra(a));null!=y&&(t[a]=y)}),{mapValue:{fields:t}}}function p_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ss||i instanceof su||i instanceof bi||i instanceof No||i instanceof iu)}function ul(i,e,t){if(!p_(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=df(t);throw e.ha("an object"===a?i+" a custom object":i+" "+a)}var a}function Wc(i,e,t){if((e=(0,ze.m9)(e))instanceof _s)return e._internalPath;if("string"==typeof e)return Ro(i,e);throw xh("Field path arguments must be of type string or ",i,!1,void 0,t)}const $u=new RegExp("[~\\*/\\[\\]]");function Ro(i,e,t){if(e.search($u)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _s(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function xh(i,e,t,a,f){const y=a&&!a.isEmpty(),C=void 0!==f;let P=`Function ${e}() called with invalid data`;t&&(P+=" (via `toFirestore()`)"),P+=". ";let J="";return(y||C)&&(J+=" (found",y&&(J+=` in field ${a}`),C&&(J+=` in document ${f}`),J+=")"),new Zt(kt.INVALID_ARGUMENT,P+i+J)}function Ay(i,e){return i.some(t=>t.isEqual(e))}class hm{constructor(e,t,a,f,y){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=f,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new No(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(g_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ny extends hm{data(){return super.data()}}function g_(i,e){return"string"==typeof e?Ro(i,e):e instanceof _s?e._internalPath:e._delegate._internalPath}function Q_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Zt(kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class th extends m_{}function mf(i,e,...t){let a=[];e instanceof m_&&a.push(e),a=a.concat(t),function(f){const y=f.filter(P=>P instanceof rg).length,C=f.filter(P=>P instanceof fm).length;if(y>1||y>0&&C>0)throw new Zt(kt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const f of a)i=f._apply(i);return i}class fm extends th{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new fm(e,t,a)}_apply(e){const t=this._parse(e);return __(e._query,t),new ll(e.firestore,e.converter,Tc(e._query,t))}_parse(e){const t=ou(e.firestore);return function(f,y,C,P,J,re,me){let Ke;if(J.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new Zt(kt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){ky(me,re);const It=[];for(const Jt of me)It.push(Py(P,f,Jt));Ke={arrayValue:{values:It}}}else Ke=Py(P,f,me)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||ky(me,re),Ke=Gc(C,"where",me,"in"===re||"not-in"===re);return Cn.create(J,re,Ke)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class rg extends m_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:Lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,f){let y=a;const C=f.getFlattenedFilters();for(const P of C)__(y,P),y=Tc(y,P)}(e._query,t),new ll(e.firestore,e.converter,Tc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pm extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=function(a,f,y){if(null!==a.startAt)throw new Zt(kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Zt(kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Zu(f,y);return function(P,J){if(null===Ru(P)){const re=ch(P);null!==re&&ig(0,re,J.field)}}(a,C),C}(e._query,this._field,this._direction);return new ll(e.firestore,e.converter,function(a,f){const y=a.explicitOrderBy.concat([f]);return new El(a.path,a.collectionGroup,y,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class yc extends th{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new yc(e,t,a)}_apply(e){return new ll(e.firestore,e.converter,al(e._query,this._limit,this._limitType))}}class vc extends th{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new vc(e,t,a)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ll(e.firestore,e.converter,(f=t,new El((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,f,a.endAt)));var a,f}}class gm extends th{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new gm(e,t,a)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ll(e.firestore,e.converter,(f=t,new El((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,f)));var a,f}}function xy(i,e,t,a){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof hm)return function(f,y,C,P,J){if(!P)throw new Zt(kt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const re=[];for(const me of Rl(f))if(me.field.isKeyField())re.push(Jo(y,P.key));else{const Ke=P.data.field(me.field);if(_a(Ke))throw new Zt(kt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ke){const It=me.field.canonicalString();throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${It}' (used as the orderBy) does not exist.`)}re.push(Ke)}return new On(re,J)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const f=ou(i.firestore);return function(y,C,P,J,re,me){const Ke=y.explicitOrderBy;if(re.length>Ke.length)throw new Zt(kt.INVALID_ARGUMENT,`Too many arguments provided to ${J}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const It=[];for(let Jt=0;Jt<re.length;Jt++){const ln=re[Jt];if(Ke[Jt].field.isKeyField()){if("string"!=typeof ln)throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${J}(), but got a ${typeof ln}`);if(!Qc(y)&&-1!==ln.indexOf("/"))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${J}() must be a plain document ID, but '${ln}' contains a slash.`);const Yn=y.path.child(ti.fromString(ln));if(!_n.isDocumentKey(Yn))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${J}() must result in a valid document path, but '${Yn}' is not because it contains an odd number of segments.`);const vr=new _n(Yn);It.push(Jo(C,vr))}else{const Yn=Gc(P,J,ln);It.push(Yn)}}return new On(It,me)}(i._query,i.firestore._databaseId,f,e,t,a)}}function Py(i,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new Zt(kt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qc(e)&&-1!==t.indexOf("/"))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ti.fromString(t));if(!_n.isDocumentKey(a))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Jo(i,new _n(a))}if(t instanceof No)return Jo(i,t._key);throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(t)}.`)}function ky(i,e){if(!Array.isArray(i)||0===i.length)throw new Zt(kt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Zt(kt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function __(i,e){if(e.isInequality()){const a=ch(i),f=e.field;if(null!==a&&!a.isEqual(f))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${f.toString()}'`);const y=Ru(i);null!==y&&ig(0,f,y)}const t=function(a,f){for(const y of a)for(const C of y.getFlattenedFilters())if(f.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Zt(kt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ig(i,e,t){if(!t.isEqual(e))throw new Zt(kt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class y_{convertValue(e,t="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fn()}}convertObject(e,t){const a={};return ae(e.fields,(f,y)=>{a[f]=this.convertValue(y,t)}),a}convertGeoPoint(e){return new su(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Iu(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Ss(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ti.fromString(e);wn(bg(a));const f=new U(a.get(1),a.get(3)),y=new _n(a.popFirst(5));return f.isEqual(t)||Hi(`Document ${y} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}function v_(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class Ly extends y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}class _f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends hm{constructor(e,t,a,f,y,C){super(e,t,a,f,C),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(g_("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class mm extends zc{data(e={}){return super.data(e)}}class Ph{constructor(e,t,a,f){this._firestore=e,this._userDataWriter=t,this._snapshot=f,this.metadata=new _f(f.hasPendingWrites,f.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new mm(this._firestore,this._userDataWriter,a.key,a,new _f(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,f){if(a._snapshot.oldDocs.isEmpty()){let y=0;return a._snapshot.docChanges.map(C=>({type:"added",doc:new mm(a._firestore,a._userDataWriter,C.doc.key,C.doc,new _f(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:y++}))}{let y=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(C=>f||3!==C.type).map(C=>{const P=new mm(a._firestore,a._userDataWriter,C.doc.key,C.doc,new _f(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter);let J=-1,re=-1;return 0!==C.type&&(J=y.indexOf(C.doc.key),y=y.delete(C.doc.key)),1!==C.type&&(y=y.add(C.doc),re=y.indexOf(C.doc.key)),{type:By(C.type),doc:P,oldIndex:J,newIndex:re}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function By(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fn()}}function b_(i,e){return i instanceof zc&&e instanceof zc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ph&&e instanceof Ph&&i._firestore===e._firestore&&um(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class nh extends y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}function X_(i,e,t){i=Mi(i,No);const a=Mi(i.firestore,o),f=v_(i.converter,e,t);return sg(a,[gf(ou(a),"setDoc",i._key,f,null!==i.converter,t).toMutation(i._key,lo.none())])}function ey(i,e,t,...a){i=Mi(i,No);const f=Mi(i.firestore,o),y=ou(f);let C;return C="string"==typeof(e=(0,ze.m9)(e))||e instanceof _s?Tl(y,"updateDoc",i._key,e,t,a):yu(y,"updateDoc",i._key,e),sg(f,[C.toMutation(i._key,lo.exists(!0))])}function Gy(i,...e){var t,a,f;i=(0,ze.m9)(i);let y={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||ng(e[C])||(y=e[C],C++);const P={includeMetadataChanges:y.includeMetadataChanges};if(ng(e[C])){const Ke=e[C];e[C]=null===(t=Ke.next)||void 0===t?void 0:t.bind(Ke),e[C+1]=null===(a=Ke.error)||void 0===a?void 0:a.bind(Ke),e[C+2]=null===(f=Ke.complete)||void 0===f?void 0:f.bind(Ke)}let J,re,me;if(i instanceof No)re=Mi(i.firestore,o),me=qo(i._key.path),J={next:Ke=>{e[C]&&e[C](ty(re,i,Ke))},error:e[C+1],complete:e[C+2]};else{const Ke=Mi(i,ll);re=Mi(Ke.firestore,o),me=Ke._query;const It=new nh(re);J={next:Jt=>{e[C]&&e[C](new Ph(re,It,Ke,Jt))},error:e[C+1],complete:e[C+2]},Q_(i._query)}return function(Ke,It,Jt,ln){const Yn=new eg(ln),vr=new sf(It,Yn,Jt);return Ke.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Uc(yield gc(Ke),vr)})),()=>{Yn.bc(),Ke.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Kg(yield gc(Ke),vr)}))}}(T(re),me,P,J)}function sg(i,e){return function(t,a){const f=new Ii;return t.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function Km(i,e,t){return Gp.apply(this,arguments)}(yield Qd(t),a,f)})),f.promise}(T(i),e)}function ty(i,e,t){const a=t.docs.get(e._key),f=new nh(i);return new zc(i,f,e._key,a,new _f(t.hasPendingWrites,t.fromCache),e.converter)}const wv={maxAttempts:5};class Wy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ou(e)}set(e,t,a){this._verifyNotCommitted();const f=yf(e,this._firestore),y=v_(f.converter,t,a),C=gf(this._dataReader,"WriteBatch.set",f._key,y,null!==f.converter,a);return this._mutations.push(C.toMutation(f._key,lo.none())),this}update(e,t,a,...f){this._verifyNotCommitted();const y=yf(e,this._firestore);let C;return C="string"==typeof(t=(0,ze.m9)(t))||t instanceof _s?Tl(this._dataReader,"WriteBatch.update",y._key,t,a,f):yu(this._dataReader,"WriteBatch.update",y._key,t),this._mutations.push(C.toMutation(y._key,lo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yf(e,this._firestore);return this._mutations=this._mutations.concat(new td(t._key,lo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yf(i,e){if((i=(0,ze.m9)(i)).firestore!==e)throw new Zt(kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Ev extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ou(e)}get(e){const t=yf(e,this._firestore),a=new Ly(this._firestore);return this._transaction.lookup([t._key]).then(f=>{if(!f||1!==f.length)return fn();const y=f[0];if(y.isFoundDocument())return new hm(this._firestore,a,y.key,y,t.converter);if(y.isNoDocument())return new hm(this._firestore,a,t._key,null,t.converter);throw fn()})}set(e,t,a){const f=yf(e,this._firestore),y=v_(f.converter,t,a),C=gf(this._dataReader,"Transaction.set",f._key,y,null!==f.converter,a);return this._transaction.set(f._key,C),this}update(e,t,a,...f){const y=yf(e,this._firestore);let C;return C="string"==typeof(t=(0,ze.m9)(t))||t instanceof _s?Tl(this._dataReader,"Transaction.update",y._key,t,a,f):yu(this._dataReader,"Transaction.update",y._key,t),this._transaction.update(y._key,C),this}delete(e){const t=yf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yf(e,this._firestore),a=new nh(this._firestore);return super.get(e).then(f=>new zc(this._firestore,a,t._key,f._document,new _f(!1,!1),t.converter))}}function E_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function ry(){if(typeof Uint8Array>"u")throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function iy(){if(!function Cr(){return typeof atob<"u"}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Ts=jt.SDK_VERSION,(0,jt._registerComponent)(new gt.wA("firestore",(t,{instanceIdentifier:a,options:f})=>{const y=t.getProvider("app").getImmediate(),C=new o(new Aa(t.getProvider("auth-internal")),new Hl(t.getProvider("app-check-internal")),function(P,J){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Zt(kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new U(P.options.projectId,J)}(y,a),y);return f=Object.assign({useFetchStreams:e},f),C._setSettings(f),C},"PUBLIC").setMultipleInstances(!0)),(0,jt.registerVersion)(vl,"3.8.0",i),(0,jt.registerVersion)(vl,"3.8.0","esm2017")}();class og{constructor(e){this._delegate=e}static fromBase64String(e){return iy(),new og(bi.fromBase64String(e))}static fromUint8Array(e){return ry(),new og(bi.fromUint8Array(e))}toBase64(){return iy(),this._delegate.toBase64()}toUint8Array(){return ry(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _m(i){return function sy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class tp{enableIndexedDbPersistence(e,t){return function G(i,e){Or(i=Mi(i,o));const t=T(i),a=i._freezeSettings(),f=new qd;return de(t,f,new qf(f,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function te(i){Or(i=Mi(i,o));const e=T(i),t=i._freezeSettings(),a=new qd;return de(e,a,new Jp(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function et(i){if(i._initialized&&!i._terminated)throw new Zt(kt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return i._queue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{yield(t=(0,$e.Z)(function*(a){if(!yi.C())return Promise.resolve();const f=a+"main";yield yi.delete(f)}),function(a){return t.apply(this,arguments)})(Og(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qy{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof U||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function Zf(i,e,t,a={}){var f;const y=(i=Mi(i,Xp))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&cl("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let C,P;if("string"==typeof a.mockUserToken)C=a.mockUserToken,P=io.MOCK_USER;else{C=(0,ze.Sg)(a.mockUserToken,null===(f=i._app)||void 0===f?void 0:f.options.projectId);const J=a.mockUserToken.sub||a.mockUserToken.user_id;if(!J)throw new Zt(kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new io(J)}i._authCredentials=new ma(new Cs(C,P))}}(this._delegate,e,t,a)}enableNetwork(){return function Dt(i){return function Rh(i){return i.asyncQueue.enqueue((0,$e.Z)(function*(){const e=yield ru(i),t=yield Zd(i);return e.setNetworkEnabled(!0),function(a){const f=on(a);return f._u.delete(0),Fa(f)}(t)}))}(T(i=Mi(i,o)))}(this._delegate)}disableNetwork(){return function Gt(i){return function Xd(i){return i.asyncQueue.enqueue((0,$e.Z)(function*(){const e=yield ru(i),t=yield Zd(i);return e.setNetworkEnabled(!1),(a=(0,$e.Z)(function*(f){const y=on(f);y._u.add(0),yield gd(y),y.gu.set("Offline")}),function(f){return a.apply(this,arguments)})(t);var a}))}(T(i=Mi(i,o)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,Ll("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ot(i){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function K_(i,e){return im.apply(this,arguments)}(yield Qd(e),t)})),t.promise}(T(i=Mi(i,o)))}(this._delegate)}onSnapshotsInSync(e){return function bv(i,e){return function Z_(i,e){const t=new eg(e);return i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return a=yield gc(i),f=t,on(a).Ru.add(f),void f.next();var a,f})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return a=yield gc(i),f=t,void on(a).Ru.delete(f);var a,f}))}}(T(i=Mi(i,o)),ng(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kh(this,Qf(this._delegate,e))}catch(t){throw au(t,"collection()","Firestore.collection()")}}doc(e){try{return new bc(this,fc(this._delegate,e))}catch(t){throw au(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vu(this,function Hu(i,e){if(i=Mi(i,Xp),am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(kt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ll(i,null,(t=e,new El(ti.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw au(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dv(i,e,t){i=Mi(i,o);const a=Object.assign(Object.assign({},wv),t);return function(f){if(f.maxAttempts<1)throw new Zt(kt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(f,y,C){const P=new Ii;return f.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){const J=yield function Nh(i){return pc(i).then(e=>e.datastore)}(f);new Jf(f.asyncQueue,J,C,y,P).run()})),P.promise}(T(i),f=>e(new Ev(i,f)),a)}(this._delegate,t=>e(new Mv(this,t)))}batch(){return T(this._delegate),new T_(new Wy(this._delegate,e=>sg(this._delegate,e)))}loadBundle(e){return function Sn(i,e){const t=T(i=Mi(i,o)),a=new c;return function c_(i,e,t,a){const f=function(y,C){let P;return P="string"==typeof y?(new TextEncoder).encode(y):y,J=function(J,re){if(J instanceof Uint8Array)return cm(J,void 0);if(J instanceof ArrayBuffer)return cm(new Uint8Array(J),void 0);if(J instanceof ReadableStream)return J.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new i_(J,C);var J}(t,Rf(e));i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){!function om(i,e,t){const a=on(i);var f;(f=(0,$e.Z)(function*(y,C,P){try{const J=yield C.getMetadata();if(yield function(It,Jt){const ln=on(It),Yn=Qs(Jt.createTime);return ln.persistence.runTransaction("hasNewerBundle","readonly",vr=>ln.Ns.getBundleMetadata(vr,Jt.id)).then(vr=>!!vr&&vr.createTime.compareTo(Yn)>=0)}(y.localStore,J))return yield C.close(),P._completeWith({taskState:"Success",documentsLoaded:(It=J).totalDocuments,bytesLoaded:It.totalBytes,totalDocuments:It.totalDocuments,totalBytes:It.totalBytes}),Promise.resolve(new Set);P._updateProgress(Yg(J));const re=new kf(J,y.localStore,C.yt);let me=yield C.mc();for(;me;){const It=yield re.Fu(me);It&&P._updateProgress(It),me=yield C.mc()}const Ke=yield re.complete();return yield Hc(y,Ke.Lu,void 0),yield function(It,Jt){const ln=on(It);return ln.persistence.runTransaction("Save bundle","readwrite",Yn=>ln.Ns.saveBundleMetadata(Yn,Jt))}(y.localStore,J),P._completeWith(Ke.progress),Promise.resolve(Ke.Bu)}catch(J){return cl("SyncEngine",`Loading bundle failed with ${J}`),P._failWith(J),Promise.resolve(new Set)}var It}),function(y,C,P){return f.apply(this,arguments)})(a,e,t).then(f=>{a.sharedClientState.notifyBundleLoaded(f)})}(yield Qd(i),f,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Br(i,e){return function d_(i,e){return i.asyncQueue.enqueue((0,$e.Z)(function*(){return function(t,a){const f=on(t);return f.persistence.runTransaction("Get named query","readonly",y=>f.Ns.getNamedQuery(y,a))}(yield ff(i),e)}))}(T(i=Mi(i,o)),e).then(t=>t?new ll(i,null,t.query):null)}(this._delegate,e).then(t=>t?new vu(this,t):null)}}class D_ extends y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new og(new bi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bc.forKey(t,this.firestore,null)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new D_(e)}get(e){const t=rh(e);return this._delegate.get(t).then(a=>new ym(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const f=rh(e);return a?(E_("Transaction.set",a),this._delegate.set(f,t,a)):this._delegate.set(f,t),this}update(e,t,a,...f){const y=rh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...f),this}delete(e){const t=rh(e);return this._delegate.delete(t),this}}class T_{constructor(e){this._delegate=e}set(e,t,a){const f=rh(e);return a?(E_("WriteBatch.set",a),this._delegate.set(f,t,a)):this._delegate.set(f,t),this}update(e,t,a,...f){const y=rh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...f),this}delete(e){const t=rh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lg{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new mm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vm(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=lg.INSTANCES;let f=a.get(e);f||(f=new WeakMap,a.set(e,f));let y=f.get(t);return y||(y=new lg(e,new D_(e),t),f.set(t,y)),y}}lg.INSTANCES=new WeakMap;class bc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D_(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bc(t,new No(t._delegate,a,new _n(e)))}static forKey(e,t,a){return new bc(t,new No(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new kh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kh(this.firestore,Qf(this._delegate,e))}catch(t){throw au(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof No&&r_(this._delegate,e)}set(e,t){t=E_("DocumentReference.set",t);try{return t?X_(this._delegate,e,t):X_(this._delegate,e)}catch(a){throw au(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?ey(this._delegate,e):ey(this._delegate,e,t,...a)}catch(f){throw au(f,"updateDoc()","DocumentReference.update()")}}delete(){return function yv(i){return sg(Mi(i.firestore,o),[new td(i._key,lo.none())])}(this._delegate)}onSnapshot(...e){const t=Ov(e),a=Ur(e,f=>new ym(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return Gy(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function Vy(i){i=Mi(i,No);const e=Mi(i.firestore,o),t=T(e),a=new nh(e);return function Mh(i,e){const t=new Ii;return i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(a=(0,$e.Z)(function*(f,y,C){try{const P=yield function(J,re){const me=on(J);return me.persistence.runTransaction("read document","readonly",Ke=>me.localDocuments.getDocument(Ke,re))}(f,y);P.isFoundDocument()?C.resolve(P):P.isNoDocument()?C.resolve(null):C.reject(new Zt(kt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const J=$d(P,`Failed to get document '${y} from cache`);C.reject(J)}}),function(f,y,C){return a.apply(this,arguments)})(yield ff(i),e,t);var a})),t.promise}(t,i._key).then(f=>new zc(e,a,i._key,f,new _f(null!==f&&f.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Uy(i){i=Mi(i,No);const e=Mi(i.firestore,o);return Oh(T(e),i._key,{source:"server"}).then(t=>ty(e,i,t))}(this._delegate):function w_(i){i=Mi(i,No);const e=Mi(i.firestore,o);return Oh(T(e),i._key).then(t=>ty(e,i,t))}(this._delegate),t.then(a=>new ym(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new bc(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function au(i,e,t){return i.message=i.message.replace(e,t),i}function Ov(i){for(const e of i)if("object"==typeof e&&!_m(e))return e;return{}}function Ur(i,e){var t,a;let f;return f=_m(i[0])?i[0]:_m(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:y=>{f.next&&f.next(e(y))},error:null===(t=f.error)||void 0===t?void 0:t.bind(f),complete:null===(a=f.complete)||void 0===a?void 0:a.bind(f)}}class ym{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return b_(this._delegate,e._delegate)}}class vm extends ym{data(e){const t=this._delegate.data(e);return function Il(i,e){i||fn()}(void 0!==t),t}}class vu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D_(e)}where(e,t,a){try{return new vu(this.firestore,mf(this._delegate,function Ry(i,e,t){const a=e,f=g_("where",i);return fm._create(f,a,t)}(e,t,a)))}catch(f){throw au(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vu(this.firestore,mf(this._delegate,function J_(i,e="asc"){const t=e,a=g_("orderBy",i);return pm._create(a,t)}(e,t)))}catch(a){throw au(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vu(this.firestore,mf(this._delegate,function mv(i){return t_("limit",i),yc._create("limit",i,"F")}(e)))}catch(t){throw au(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vu(this.firestore,mf(this._delegate,function My(i){return t_("limitToLast",i),yc._create("limitToLast",i,"L")}(e)))}catch(t){throw au(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vu(this.firestore,mf(this._delegate,function md(...i){return vc._create("startAt",i,!0)}(...e)))}catch(t){throw au(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vu(this.firestore,mf(this._delegate,function _d(...i){return vc._create("startAfter",i,!1)}(...e)))}catch(t){throw au(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vu(this.firestore,mf(this._delegate,function Oy(...i){return gm._create("endBefore",i,!1)}(...e)))}catch(t){throw au(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vu(this.firestore,mf(this._delegate,function _v(...i){return gm._create("endAt",i,!0)}(...e)))}catch(t){throw au(t,"endAt()","Query.endAt()")}}isEqual(e){return um(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function jy(i){i=Mi(i,ll);const e=Mi(i.firestore,o),t=T(e),a=new nh(e);return function Y_(i,e){const t=new Ii;return i.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(a=(0,$e.Z)(function*(f,y,C){try{const P=yield Pc(f,y,!0),J=new Qg(y,P.Hi),re=J.Wu(P.documents),me=J.applyChanges(re,!1);C.resolve(me.snapshot)}catch(P){const J=$d(P,`Failed to execute query '${y} against cache`);C.reject(J)}}),function(f,y,C){return a.apply(this,arguments)})(yield ff(i),e,t);var a})),t.promise}(t,i._query).then(f=>new Ph(e,a,i,f))}(this._delegate):"server"===e?.source?function $y(i){i=Mi(i,ll);const e=Mi(i.firestore,o),t=T(e),a=new nh(e);return u_(t,i._query,{source:"server"}).then(f=>new Ph(e,a,i,f))}(this._delegate):function Hy(i){i=Mi(i,ll);const e=Mi(i.firestore,o),t=T(e),a=new nh(e);return Q_(i._query),u_(t,i._query).then(f=>new Ph(e,a,i,f))}(this._delegate),t.then(a=>new oy(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=Ov(e),a=Ur(e,f=>new oy(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return Gy(this._delegate,t,a)}withConverter(e){return new vu(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ug(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new vm(this._firestore,a))})}isEqual(e){return b_(this._delegate,e._delegate)}}class kh extends vu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bc(this.firestore,e):null}doc(e){try{return new bc(this.firestore,void 0===e?fc(this._delegate):fc(this._delegate,e))}catch(t){throw au(t,"doc()","CollectionReference.doc()")}}add(e){return function vv(i,e){const t=Mi(i.firestore,o),a=fc(i),f=v_(i.converter,e);return sg(t,[gf(ou(i.firestore),"addDoc",a._key,f,null!==i.converter,{}).toMutation(a._key,lo.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new bc(this.firestore,t))}isEqual(e){return r_(this._delegate,e._delegate)}withConverter(e){return new kh(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function rh(i){return Mi(i,No)}class ea{constructor(...e){this._delegate=new _s(...e)}static documentId(){return new ea(ui.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof _s&&this._delegate._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cv(){return new Sr("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cg(e)}static delete(){const e=function Tv(){return new eh("deleteField")}();return e._methodName="FieldValue.delete",new cg(e)}static arrayUnion(...e){const t=function Iv(...i){return new Hr("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new cg(t)}static arrayRemove(...e){const t=function Sv(...i){return new hs("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new cg(t)}static increment(e){const t=function Av(i){return new el("increment",i)}(e);return t._methodName="FieldValue.increment",new cg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yy={Firestore:qy,GeoPoint:su,Timestamp:Ss,Blob:og,Transaction:Mv,WriteBatch:T_,DocumentReference:bc,DocumentSnapshot:ym,Query:vu,QueryDocumentSnapshot:vm,QuerySnapshot:oy,CollectionReference:kh,FieldPath:ea,FieldValue:cg,setLogLevel:function ag(i){!function zu(i){tl.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function xv(i){(function Zy(i,e){i.INTERNAL.registerComponent(new gt.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),f=t.getProvider("firestore").getImmediate();return e(a,f)},"PUBLIC").setServiceProps(Object.assign({},Yy)))})(i,(e,t)=>new qy(e,t,new tp)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(ut.Z);var Fh=B(3385),Qy=B(6217),Jy=B(9260);function ev(i,e){return function Xy(i,e=L.z){return new ee.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(i,e)}function ay(i,e){return ev(i,e).pipe((0,ye.U)(t=>({payload:t,type:"query"})))}function vf(i,e){return ay(i,e).pipe((0,We.O)(void 0),we(),(0,ye.U)(([t,a])=>{const f=a.payload.docChanges(),y=f.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((C,P)=>{const J=f.find(me=>me.doc.ref.isEqual(C.ref)),re=t?.payload.docs.find(me=>me.ref.isEqual(C.ref));J&&JSON.stringify(J.doc.metadata)===JSON.stringify(C.metadata)||!J&&re&&JSON.stringify(re.metadata)===JSON.stringify(C.metadata)||y.push({type:"modified",payload:{oldIndex:P,newIndex:P,type:"modified",doc:C}})}),y}))}function tv(i,e,t){return vf(i,t).pipe((0,He.R)((a,f)=>function kv(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function C_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ly(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ly(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ly(i,e.oldIndex,1)}return i}(i,a))}),i}(a,f.map(y=>y.payload),e),[]),(0,Nt.x)(),(0,ye.U)(a=>a.map(f=>({type:f.type,payload:f}))))}function ly(i,e,t,...a){const f=i.slice();return f.splice(e,t,...a),f}function uy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class cy{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=vf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ye.U)(a=>a.filter(f=>e.indexOf(f.type)>-1)))),t.pipe((0,We.O)(void 0),we(),(0,mt.h)(([a,f])=>f.length>0||!a),(0,ye.U)(([a,f])=>f),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=uy(e);return tv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return ay(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Me.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new dy(this.ref.doc(e),this.afs)}}class dy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:f,query:y}=nv(a,t);return new cy(f,y,this.afs)}snapshotChanges(){return function Pv(i,e){return ev(i,e).pipe((0,We.O)(void 0),we(),(0,ye.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ye.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Se.D)(this.ref.get(e)).pipe(Me.iC)}}class Fv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,mt.h)(t=>t.length>0),Me.iC):vf(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=uy(e);return tv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return ay(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(a=>a.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),Me.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Me.iC)}}const dg=new u.OlP("angularfire2.enableFirestorePersistence"),hg=new u.OlP("angularfire2.firestore.persistenceSettings"),Lv=new u.OlP("angularfire2.firestore.settings"),Bv=new u.OlP("angularfire2.firestore.use-emulator");function nv(i,e=(t=>t)){return{query:e(i),ref:i}}let hy=(()=>{class i{constructor(t,a,f,y,C,P,J,re,me,Ke,It,Jt,ln,Yn,vr,Do,ta){this.schedulers=J;const Ns=(0,lt.on)(t,P,a),Ea=me;Ke&&(0,Fh.nw)(Ns,P,It,ln,Yn,vr,Jt,Do),[this.firestore,this.persistenceEnabled$]=(0,lt.cc)(`${Ns.name}.firestore`,"AngularFirestore",Ns.name,()=>{const ks=P.runOutsideAngular(()=>Ns.firestore());if(y&&ks.settings(y),Ea&&ks.useEmulator(...Ea),f&&!(0,xt.PM)(C)){const Ws=()=>{try{return(0,Se.D)(ks.enablePersistence(re||void 0).then(()=>!0,()=>!1))}catch(Da){return typeof console<"u"&&console.warn(Da),(0,Oe.of)(!1)}};return[ks,P.runOutsideAngular(Ws)]}return[ks,(0,Oe.of)(!1)]},[y,Ea,f])}collection(t,a){let f;f="string"==typeof t?this.firestore.collection(t):t;const{ref:y,query:C}=nv(f,a),P=this.schedulers.ngZone.run(()=>y);return new cy(P,C,this)}collectionGroup(t,a){const f=a||(C=>C),y=this.firestore.collectionGroup(t);return new Fv(f(y),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const f=this.schedulers.ngZone.run(()=>a);return new dy(f,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(lt.Dh),u.LFG(lt.xv,8),u.LFG(dg,8),u.LFG(Lv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Me.HU),u.LFG(hg,8),u.LFG(Bv,8),u.LFG(Fh.zQ,8),u.LFG(Fh.Qv,8),u.LFG(Fh.L6,8),u.LFG(Fh._Q,8),u.LFG(Fh.rT,8),u.LFG(Fh.lh,8),u.LFG(Fh.f7,8),u.LFG(Qy.nm,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),rv=(()=>{class i{constructor(){Jy.Z.registerVersion("angularfire",Me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:dg,useValue:!0},{provide:hg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[hy]}),i})()},377:(hn,dt,B)=>{B.d(dt,{Q1:()=>W,TE:()=>Pt,hP:()=>ua});var u=B(9751),L=B(9646),ee=B(8996),Se=B(4986),Oe=B(4482),Me=B(5403),ke=B(4004),Je=B(3900),we=B(2122),ye=B(4650),He=B(2011),Nt=B(3942),mt=B(5861),lt=B(9681),xt=B(2090),yt=B(4859);const ut="firebasestorage.googleapis.com",$e="storageBucket";class ze extends xt.ZR{constructor(q,fe,Ae=0){super($t(q),`Firebase Storage: ${fe} (${$t(q)})`),this.status_=Ae,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(q){this.status_=q}_codeEquals(q){return $t(q)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(q){this.customData.serverResponse=q,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $t(Z){return"storage/"+Z}function rt(){return new ze("unknown","An unknown error occurred, please check the error payload for server response.")}function nt(){return new ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Ht(){return new ze("canceled","User canceled the upload/download.")}function en(){return new ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Le(Z){return new ze("invalid-argument",Z)}function Qe(){return new ze("app-deleted","The Firebase app was deleted.")}function Fe(Z){return new ze("invalid-root-operation","The operation '"+Z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function st(Z,q){return new ze("invalid-format","String does not match format '"+Z+"': "+q)}function Xt(Z){throw new ze("internal-error","Internal error: "+Z)}class an{constructor(q,fe){this.bucket=q,this.path_=fe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const q=encodeURIComponent;return"/b/"+q(this.bucket)+"/o/"+q(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(q,fe){let Ae;try{Ae=an.makeFromUrl(q,fe)}catch{return new an(q,"")}if(""===Ae.path)return Ae;throw function Mn(Z){return new ze("invalid-default-bucket","Invalid default bucket '"+Z+"'.")}(q)}static makeFromUrl(q,fe){let Ae=null;const je="([A-Za-z0-9.\\-_]+)",Bn=new RegExp("^gs://"+je+"(/(.*))?$","i");function lr(qi){qi.path_=decodeURIComponent(qi.path)}const Wi=fe.replace(/[.]/g,"\\."),Ki=[{regex:Bn,indices:{bucket:1,path:3},postModify:function Tt(qi){"/"===qi.path.charAt(qi.path.length-1)&&(qi.path_=qi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Wi}/v[A-Za-z0-9_]+/b/${je}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:lr},{regex:new RegExp(`^https?://${fe===ut?"(?:storage.googleapis.com|storage.cloud.google.com)":fe}/${je}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:lr}];for(let qi=0;qi<Ki.length;qi++){const $o=Ki[qi],vo=$o.regex.exec(q);if(vo){let ne=vo[$o.indices.path];ne||(ne=""),Ae=new an(vo[$o.indices.bucket],ne),$o.postModify(Ae);break}}if(null==Ae)throw function Kt(Z){return new ze("invalid-url","Invalid URL '"+Z+"'.")}(q);return Ae}}class Dr{constructor(q){this.promise_=Promise.reject(q)}getPromise(){return this.promise_}cancel(q=!1){}}function sr(Z){return"string"==typeof Z||Z instanceof String}function Tr(Z){return un()&&Z instanceof Blob}function un(){return typeof Blob<"u"&&!(0,xt.UG)()}function Rr(Z,q,fe,Ae){if(Ae<q)throw Le(`Invalid value for '${Z}'. Expected ${q} or greater.`);if(Ae>fe)throw Le(`Invalid value for '${Z}'. Expected ${fe} or less.`)}function er(Z,q,fe){let Ae=q;return null==fe&&(Ae=`https://${q}`),`${fe}://${Ae}/v0${Z}`}function ur(Z){const q=encodeURIComponent;let fe="?";for(const Ae in Z)Z.hasOwnProperty(Ae)&&(fe=fe+(q(Ae)+"=")+q(Z[Ae])+"&");return fe=fe.slice(0,-1),fe}var Xr=(()=>{return(Z=Xr||(Xr={}))[Z.NO_ERROR=0]="NO_ERROR",Z[Z.NETWORK_ERROR=1]="NETWORK_ERROR",Z[Z.ABORT=2]="ABORT",Xr;var Z})();function ji(Z,q){const fe=Z>=500&&Z<600,je=-1!==[408,429].indexOf(Z),Tt=-1!==q.indexOf(Z);return fe||je||Tt}class Kn{constructor(q,fe,Ae,je,Tt,_t,Bn,Dn,lr,qn,Wi,zi=!0){this.url_=q,this.method_=fe,this.headers_=Ae,this.body_=je,this.successCodes_=Tt,this.additionalRetryCodes_=_t,this.callback_=Bn,this.errorCallback_=Dn,this.timeout_=lr,this.progressCallback_=qn,this.connectionFactory_=Wi,this.retry=zi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_i,Ci)=>{this.resolve_=_i,this.reject_=Ci,this.start_()})}start_(){const fe=(Ae,je)=>{const Tt=this.resolve_,_t=this.reject_,Bn=je.connection;if(je.wasSuccessCode)try{const Dn=this.callback_(Bn,Bn.getResponse());!function br(Z){return void 0!==Z}(Dn)?Tt():Tt(Dn)}catch(Dn){_t(Dn)}else if(null!==Bn){const Dn=rt();Dn.serverResponse=Bn.getErrorText(),_t(this.errorCallback_?this.errorCallback_(Bn,Dn):Dn)}else _t(je.canceled?this.appDelete_?Qe():Ht():nt())};this.canceled_?fe(0,new pr(!1,null,!0)):this.backoffId_=function jn(Z,q,fe){let Ae=1,je=null,Tt=null,_t=!1,Bn=0;function Dn(){return 2===Bn}let lr=!1;function qn(...qr){lr||(lr=!0,q.apply(null,qr))}function Wi(qr){je=setTimeout(()=>{je=null,Z(_i,Dn())},qr)}function zi(){Tt&&clearTimeout(Tt)}function _i(qr,...gs){if(lr)return void zi();if(qr)return zi(),void qn.call(null,qr,...gs);if(Dn()||_t)return zi(),void qn.call(null,qr,...gs);let Ki;Ae<64&&(Ae*=2),1===Bn?(Bn=2,Ki=0):Ki=1e3*(Ae+Math.random()),Wi(Ki)}let Ci=!1;function is(qr){Ci||(Ci=!0,zi(),!lr&&(null!==je?(qr||(Bn=2),clearTimeout(je),Wi(0)):qr||(Bn=1)))}return Wi(0),Tt=setTimeout(()=>{_t=!0,is(!0)},fe),is}((Ae,je)=>{if(je)return void Ae(!1,new pr(!1,null,!0));const Tt=this.connectionFactory_();this.pendingConnection_=Tt;const _t=Bn=>{null!==this.progressCallback_&&this.progressCallback_(Bn.loaded,Bn.lengthComputable?Bn.total:-1)};null!==this.progressCallback_&&Tt.addUploadProgressListener(_t),Tt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Tt.removeUploadProgressListener(_t),this.pendingConnection_=null;const Bn=Tt.getErrorCode()===Xr.NO_ERROR,Dn=Tt.getStatus();if((!Bn||ji(Dn,this.additionalRetryCodes_))&&this.retry){const qn=Tt.getErrorCode()===Xr.ABORT;return void Ae(!1,new pr(!1,null,qn))}const lr=-1!==this.successCodes_.indexOf(Dn);Ae(!0,new pr(lr,Tt))})},fe,this.timeout_)}getPromise(){return this.promise_}cancel(q){this.canceled_=!0,this.appDelete_=q||!1,null!==this.backoffId_&&function ii(Z){Z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class pr{constructor(q,fe,Ae){this.wasSuccessCode=q,this.connection=fe,this.canceled=!!Ae}}function Ai(...Z){const q=function Mr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==q){const fe=new q;for(let Ae=0;Ae<Z.length;Ae++)fe.append(Z[Ae]);return fe.getBlob()}if(un())return new Blob(Z);throw new ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}const vn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Di{constructor(q,fe){this.data=q,this.contentType=fe||null}}function _r(Z,q){switch(Z){case vn.RAW:return new Di(si(q));case vn.BASE64:case vn.BASE64URL:return new Di(yn(Z,q));case vn.DATA_URL:return new Di(function En(Z){const q=new Ut(Z);return q.base64?yn(vn.BASE64,q.rest):function Pr(Z){let q;try{q=decodeURIComponent(Z)}catch{throw st(vn.DATA_URL,"Malformed data URL.")}return si(q)}(q.rest)}(q),function Gn(Z){return new Ut(Z).contentType}(q))}throw rt()}function si(Z){const q=[];for(let fe=0;fe<Z.length;fe++){let Ae=Z.charCodeAt(fe);Ae<=127?q.push(Ae):Ae<=2047?q.push(192|Ae>>6,128|63&Ae):55296==(64512&Ae)?fe<Z.length-1&&56320==(64512&Z.charCodeAt(fe+1))?(Ae=65536|(1023&Ae)<<10|1023&Z.charCodeAt(++fe),q.push(240|Ae>>18,128|Ae>>12&63,128|Ae>>6&63,128|63&Ae)):q.push(239,191,189):56320==(64512&Ae)?q.push(239,191,189):q.push(224|Ae>>12,128|Ae>>6&63,128|63&Ae)}return new Uint8Array(q)}function yn(Z,q){switch(Z){case vn.BASE64:{const je=-1!==q.indexOf("-"),Tt=-1!==q.indexOf("_");if(je||Tt)throw st(Z,"Invalid character '"+(je?"-":"_")+"' found: is it base64url encoded?");break}case vn.BASE64URL:{const je=-1!==q.indexOf("+"),Tt=-1!==q.indexOf("/");if(je||Tt)throw st(Z,"Invalid character '"+(je?"+":"/")+"' found: is it base64 encoded?");q=q.replace(/-/g,"+").replace(/_/g,"/");break}}let fe;try{fe=function ci(Z){if(typeof atob>"u")throw function Bt(Z){return new ze("unsupported-environment",`${Z} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Z)}(q)}catch(je){throw je.message.includes("polyfill")?je:st(Z,"Invalid character found")}const Ae=new Uint8Array(fe.length);for(let je=0;je<fe.length;je++)Ae[je]=fe.charCodeAt(je);return Ae}class Ut{constructor(q){this.base64=!1,this.contentType=null;const fe=q.match(/^data:([^,]+)?,/);if(null===fe)throw st(vn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ae=fe[1]||null;null!=Ae&&(this.base64=function Ln(Z,q){return Z.length>=q.length&&Z.substring(Z.length-q.length)===q}(Ae,";base64"),this.contentType=this.base64?Ae.substring(0,Ae.length-7):Ae),this.rest=q.substring(q.indexOf(",")+1)}}class tr{constructor(q,fe){let Ae=0,je="";Tr(q)?(this.data_=q,Ae=q.size,je=q.type):q instanceof ArrayBuffer?(fe?this.data_=new Uint8Array(q):(this.data_=new Uint8Array(q.byteLength),this.data_.set(new Uint8Array(q))),Ae=this.data_.length):q instanceof Uint8Array&&(fe?this.data_=q:(this.data_=new Uint8Array(q.length),this.data_.set(q)),Ae=q.length),this.size_=Ae,this.type_=je}size(){return this.size_}type(){return this.type_}slice(q,fe){if(Tr(this.data_)){const je=function Vn(Z,q,fe){return Z.webkitSlice?Z.webkitSlice(q,fe):Z.mozSlice?Z.mozSlice(q,fe):Z.slice?Z.slice(q,fe):null}(this.data_,q,fe);return null===je?null:new tr(je)}{const Ae=new Uint8Array(this.data_.buffer,q,fe-q);return new tr(Ae,!0)}}static getBlob(...q){if(un()){const fe=q.map(Ae=>Ae instanceof tr?Ae.data_:Ae);return new tr(Ai.apply(null,fe))}{const fe=q.map(_t=>sr(_t)?_r(vn.RAW,_t).data:_t.data_);let Ae=0;fe.forEach(_t=>{Ae+=_t.byteLength});const je=new Uint8Array(Ae);let Tt=0;return fe.forEach(_t=>{for(let Bn=0;Bn<_t.length;Bn++)je[Tt++]=_t[Bn]}),new tr(je,!0)}}uploadData(){return this.data_}}function Be(Z){let q;try{q=JSON.parse(Z)}catch{return null}return function Wn(Z){return"object"==typeof Z&&!Array.isArray(Z)}(q)?q:null}function Te(Z){const q=Z.lastIndexOf("/",Z.length-2);return-1===q?Z:Z.slice(q+1)}function se(Z,q){return q}class be{constructor(q,fe,Ae,je){this.server=q,this.local=fe||q,this.writable=!!Ae,this.xform=je||se}}let ht=null;function bn(){if(ht)return ht;const Z=[];Z.push(new be("bucket")),Z.push(new be("generation")),Z.push(new be("metageneration")),Z.push(new be("name","fullPath",!0));const fe=new be("name");fe.xform=function q(Tt,_t){return function qt(Z){return!sr(Z)||Z.length<2?Z:Te(Z)}(_t)},Z.push(fe);const je=new be("size");return je.xform=function Ae(Tt,_t){return void 0!==_t?Number(_t):_t},Z.push(je),Z.push(new be("timeCreated")),Z.push(new be("updated")),Z.push(new be("md5Hash",null,!0)),Z.push(new be("cacheControl",null,!0)),Z.push(new be("contentDisposition",null,!0)),Z.push(new be("contentEncoding",null,!0)),Z.push(new be("contentLanguage",null,!0)),Z.push(new be("contentType",null,!0)),Z.push(new be("metadata","customMetadata",!0)),ht=Z,ht}function ve(Z,q,fe){const Ae=Be(q);return null===Ae?null:function Ee(Z,q,fe){const Ae={type:"file"},je=fe.length;for(let Tt=0;Tt<je;Tt++){const _t=fe[Tt];Ae[_t.local]=_t.xform(Ae,q[_t.server])}return function Nn(Z,q){Object.defineProperty(Z,"ref",{get:function fe(){const Tt=new an(Z.bucket,Z.fullPath);return q._makeStorageReference(Tt)}})}(Ae,Z),Ae}(Z,Ae,fe)}function tt(Z,q){const fe={},Ae=q.length;for(let je=0;je<Ae;je++){const Tt=q[je];Tt.writable&&(fe[Tt.server]=Z[Tt.local])}return JSON.stringify(fe)}const ft="prefixes";class Ar{constructor(q,fe,Ae,je){this.url=q,this.method=fe,this.handler=Ae,this.timeout=je,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gi(Z){if(!Z)throw rt()}function Rn(Z,q){return function fe(Ae,je){const Tt=ve(Z,je,q);return gi(null!==Tt),Tt}}function Xs(Z){return function q(fe,Ae){let je;return je=401===fe.getStatus()?fe.getErrorText().includes("Firebase App Check token is invalid")?function Ge(){return new ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ne(){return new ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===fe.getStatus()?function bt(Z){return new ze("quota-exceeded","Quota for bucket '"+Z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Z.bucket):403===fe.getStatus()?function wt(Z){return new ze("unauthorized","User does not have permission to access '"+Z+"'.")}(Z.path):Ae,je.status=fe.getStatus(),je.serverResponse=Ae.serverResponse,je}}function Zi(Z){const q=Xs(Z);return function fe(Ae,je){let Tt=q(Ae,je);return 404===Ae.getStatus()&&(Tt=function Ue(Z){return new ze("object-not-found","Object '"+Z+"' does not exist.")}(Z.path)),Tt.serverResponse=je.serverResponse,Tt}}function wi(Z,q,fe){const je=er(q.fullServerUrl(),Z.host,Z._protocol),_t=Z.maxOperationRetryTime,Bn=new Ar(je,"GET",Rn(Z,fe),_t);return Bn.errorHandler=Zi(q),Bn}function Fs(Z,q,fe,Ae,je){const Tt={};Tt.prefix=q.isRoot?"":q.path+"/",fe&&fe.length>0&&(Tt.delimiter=fe),Ae&&(Tt.pageToken=Ae),je&&(Tt.maxResults=je);const Bn=er(q.bucketOnlyServerUrl(),Z.host,Z._protocol),lr=Z.maxOperationRetryTime,qn=new Ar(Bn,"GET",function ys(Z,q){return function fe(Ae,je){const Tt=function hr(Z,q,fe){const Ae=Be(fe);return null===Ae?null:function Zn(Z,q,fe){const Ae={prefixes:[],items:[],nextPageToken:fe.nextPageToken};if(fe[ft])for(const je of fe[ft]){const Tt=je.replace(/\/$/,""),_t=Z._makeStorageReference(new an(q,Tt));Ae.prefixes.push(_t)}if(fe.items)for(const je of fe.items){const Tt=Z._makeStorageReference(new an(q,je.name));Ae.items.push(Tt)}return Ae}(Z,q,Ae)}(Z,q,je);return gi(null!==Tt),Tt}}(Z,q.bucket),lr);return qn.urlParams=Tt,qn.errorHandler=Xs(q),qn}function Ba(Z,q,fe){const Ae=Object.assign({},fe);return Ae.fullPath=Z.path,Ae.size=q.size(),Ae.contentType||(Ae.contentType=function $r(Z,q){return Z&&Z.contentType||q&&q.type()||"application/octet-stream"}(null,q)),Ae}class ws{constructor(q,fe,Ae,je){this.current=q,this.total=fe,this.finalized=!!Ae,this.metadata=je||null}}function Ls(Z,q){let fe=null;try{fe=Z.getResponseHeader("X-Goog-Upload-Status")}catch{gi(!1)}return gi(!!fe&&-1!==(q||["active"]).indexOf(fe)),fe}const Ta={STATE_CHANGED:"state_changed"},fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vs(Z){switch(Z){case"running":case"pausing":case"canceling":return fr.RUNNING;case"paused":return fr.PAUSED;case"success":return fr.SUCCESS;case"canceled":return fr.CANCELED;default:return fr.ERROR}}class na{constructor(q,fe,Ae){if(function Nr(Z){return"function"==typeof Z}(q)||null!=fe||null!=Ae)this.next=q,this.error=fe??void 0,this.complete=Ae??void 0;else{const Tt=q;this.next=Tt.next,this.error=Tt.error,this.complete=Tt.complete}}}function zs(Z){return(...q)=>{Promise.resolve().then(()=>Z(...q))}}class Vo extends class Gi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(q=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,q()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,q()}),this.xhr_.addEventListener("load",()=>{q()})})}send(q,fe,Ae,je){if(this.sent_)throw Xt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(fe,q,!0),void 0!==je)for(const Tt in je)je.hasOwnProperty(Tt)&&this.xhr_.setRequestHeader(Tt,je[Tt].toString());return void 0!==Ae?this.xhr_.send(Ae):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xt("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(q){return this.xhr_.getResponseHeader(q)}addUploadProgressListener(q){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",q)}removeUploadProgressListener(q){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",q)}}{initXhr(){this.xhr_.responseType="text"}}function Us(){return new Vo}class ct{constructor(q,fe,Ae=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=q,this._blob=fe,this._metadata=Ae,this._mappings=bn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=je=>{if(this._request=void 0,this._chunkMultiplier=1,je._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Tt=this.isExponentialBackoffExpired();if(ji(je.status,[])){if(!Tt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();je=nt()}this._error=je,this._transition("error")}},this._metadataErrorHandler=je=>{this._request=void 0,je._codeEquals("canceled")?this.completeTransitions_():(this._error=je,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((je,Tt)=>{this._resolve=je,this._reject=Tt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const q=this._transferred;return fe=>this._updateProgress(q+fe)}_shouldDoResumable(q){return q.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(q){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([fe,Ae])=>{switch(this._state){case"running":q(fe,Ae);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((q,fe)=>{const Ae=function Rs(Z,q,fe,Ae,je){const Tt=q.bucketOnlyServerUrl(),_t=Ba(q,Ae,je),Bn={name:_t.fullPath},Dn=er(Tt,Z.host,Z._protocol),qn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ae.size()}`,"X-Goog-Upload-Header-Content-Type":_t.contentType,"Content-Type":"application/json; charset=utf-8"},Wi=tt(_t,fe),Ci=new Ar(Dn,"POST",function _i(is){let qr;Ls(is);try{qr=is.getResponseHeader("X-Goog-Upload-URL")}catch{gi(!1)}return gi(sr(qr)),qr},Z.maxUploadRetryTime);return Ci.urlParams=Bn,Ci.headers=qn,Ci.body=Wi,Ci.errorHandler=Xs(q),Ci}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),je=this._ref.storage._makeRequest(Ae,Us,q,fe);this._request=je,je.getPromise().then(Tt=>{this._request=void 0,this._uploadUrl=Tt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const q=this._uploadUrl;this._resolveToken((fe,Ae)=>{const je=function $i(Z,q,fe,Ae){const Dn=new Ar(fe,"POST",function Tt(lr){const qn=Ls(lr,["active","final"]);let Wi=null;try{Wi=lr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gi(!1)}Wi||gi(!1);const zi=Number(Wi);return gi(!isNaN(zi)),new ws(zi,Ae.size(),"final"===qn)},Z.maxUploadRetryTime);return Dn.headers={"X-Goog-Upload-Command":"query"},Dn.errorHandler=Xs(q),Dn}(this._ref.storage,this._ref._location,q,this._blob),Tt=this._ref.storage._makeRequest(je,Us,fe,Ae);this._request=Tt,Tt.getPromise().then(_t=>{this._request=void 0,this._updateProgress(_t.current),this._needToFetchStatus=!1,_t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const q=262144*this._chunkMultiplier,fe=new ws(this._transferred,this._blob.size()),Ae=this._uploadUrl;this._resolveToken((je,Tt)=>{let _t;try{_t=function oi(Z,q,fe,Ae,je,Tt,_t,Bn){const Dn=new ws(0,0);if(_t?(Dn.current=_t.current,Dn.total=_t.total):(Dn.current=0,Dn.total=Ae.size()),Ae.size()!==Dn.total)throw function ge(){return new ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const lr=Dn.total-Dn.current;let qn=lr;je>0&&(qn=Math.min(qn,je));const Wi=Dn.current;let _i="";_i=0===qn?"finalize":lr===qn?"upload, finalize":"upload";const Ci={"X-Goog-Upload-Command":_i,"X-Goog-Upload-Offset":`${Dn.current}`},is=Ae.slice(Wi,Wi+qn);if(null===is)throw en();const Ki=new Ar(fe,"POST",function qr(qi,$o){const vo=Ls(qi,["active","final"]),F=Dn.current+qn,ne=Ae.size();let $;return $="final"===vo?Rn(q,Tt)(qi,$o):null,new ws(F,ne,"final"===vo,$)},q.maxUploadRetryTime);return Ki.headers=Ci,Ki.body=is.uploadData(),Ki.progressCallback=Bn||null,Ki.errorHandler=Xs(Z),Ki}(this._ref._location,this._ref.storage,Ae,this._blob,q,this._mappings,fe,this._makeProgressCallback())}catch(Dn){return this._error=Dn,void this._transition("error")}const Bn=this._ref.storage._makeRequest(_t,Us,je,Tt,!1);this._request=Bn,Bn.getPromise().then(Dn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Dn.current),Dn.finalized?(this._metadata=Dn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((q,fe)=>{const Ae=wi(this._ref.storage,this._ref._location,this._mappings),je=this._ref.storage._makeRequest(Ae,Us,q,fe);this._request=je,je.getPromise().then(Tt=>{this._request=void 0,this._metadata=Tt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((q,fe)=>{const Ae=function as(Z,q,fe,Ae,je){const Tt=q.bucketOnlyServerUrl(),_t={"X-Goog-Upload-Protocol":"multipart"},Dn=function Bn(){let Ki="";for(let qi=0;qi<2;qi++)Ki+=Math.random().toString().slice(2);return Ki}();_t["Content-Type"]="multipart/related; boundary="+Dn;const lr=Ba(q,Ae,je),qn=tt(lr,fe),_i=tr.getBlob("--"+Dn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qn+"\r\n--"+Dn+"\r\nContent-Type: "+lr.contentType+"\r\n\r\n",Ae,"\r\n--"+Dn+"--");if(null===_i)throw en();const Ci={name:lr.fullPath},is=er(Tt,Z.host,Z._protocol),gs=Z.maxUploadRetryTime,jo=new Ar(is,"POST",Rn(Z,fe),gs);return jo.urlParams=Ci,jo.headers=_t,jo.body=_i.uploadData(),jo.errorHandler=Xs(q),jo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),je=this._ref.storage._makeRequest(Ae,Us,q,fe);this._request=je,je.getPromise().then(Tt=>{this._request=void 0,this._metadata=Tt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(q){const fe=this._transferred;this._transferred=q,this._transferred!==fe&&this._notifyObservers()}_transition(q){if(this._state!==q)switch(q){case"canceling":case"pausing":this._state=q,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const fe="paused"===this._state;this._state=q,fe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=q,this._notifyObservers();break;case"canceled":this._error=Ht(),this._state=q,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const q=Vs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:q,metadata:this._metadata,task:this,ref:this._ref}}on(q,fe,Ae,je){const Tt=new na(fe||void 0,Ae||void 0,je||void 0);return this._addObserver(Tt),()=>{this._removeObserver(Tt)}}then(q,fe){return this._promise.then(q,fe)}catch(q){return this.then(null,q)}_addObserver(q){this._observers.push(q),this._notifyObserver(q)}_removeObserver(q){const fe=this._observers.indexOf(q);-1!==fe&&this._observers.splice(fe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(fe=>{this._notifyObserver(fe)})}_finishPromise(){if(void 0!==this._resolve){let q=!0;switch(Vs(this._state)){case fr.SUCCESS:zs(this._resolve.bind(null,this.snapshot))();break;case fr.CANCELED:case fr.ERROR:zs(this._reject.bind(null,this._error))();break;default:q=!1}q&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(q){switch(Vs(this._state)){case fr.RUNNING:case fr.PAUSED:q.next&&zs(q.next.bind(q,this.snapshot))();break;case fr.SUCCESS:q.complete&&zs(q.complete.bind(q))();break;default:q.error&&zs(q.error.bind(q,this._error))()}}resume(){const q="paused"===this._state||"pausing"===this._state;return q&&this._transition("running"),q}pause(){const q="running"===this._state;return q&&this._transition("pausing"),q}cancel(){const q="running"===this._state||"pausing"===this._state;return q&&this._transition("canceling"),q}}class Xe{constructor(q,fe){this._service=q,this._location=fe instanceof an?fe:an.makeFromUrl(fe,q.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(q,fe){return new Xe(q,fe)}get root(){const q=new an(this._location.bucket,"");return this._newRef(this._service,q)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Te(this._location.path)}get storage(){return this._service}get parent(){const q=function Pe(Z){if(0===Z.length)return null;const q=Z.lastIndexOf("/");return-1===q?"":Z.slice(0,q)}(this._location.path);if(null===q)return null;const fe=new an(this._location.bucket,q);return new Xe(this._service,fe)}_throwIfRoot(q){if(""===this._location.path)throw Fe(q)}}function ei(Z,q,fe){return yo.apply(this,arguments)}function yo(){return(yo=(0,mt.Z)(function*(Z,q,fe){const je=yield Es(Z,{pageToken:fe});q.prefixes.push(...je.prefixes),q.items.push(...je.items),null!=je.nextPageToken&&(yield ei(Z,q,je.nextPageToken))})).apply(this,arguments)}function Es(Z,q){null!=q&&"number"==typeof q.maxResults&&Rr("options.maxResults",1,1e3,q.maxResults);const fe=q||{},Ae=Fs(Z.storage,Z._location,"/",fe.pageToken,fe.maxResults);return Z.storage.makeRequestWithTokens(Ae,Us)}function Mo(Z){Z._throwIfRoot("getDownloadURL");const q=function bs(Z,q,fe){const je=er(q.fullServerUrl(),Z.host,Z._protocol),_t=Z.maxOperationRetryTime,Bn=new Ar(je,"GET",function Js(Z,q){return function fe(Ae,je){const Tt=ve(Z,je,q);return gi(null!==Tt),function pe(Z,q,fe,Ae){const je=Be(q);if(null===je||!sr(je.downloadTokens))return null;const Tt=je.downloadTokens;if(0===Tt.length)return null;const _t=encodeURIComponent;return Tt.split(",").map(lr=>{const Wi=Z.fullPath;return er("/b/"+_t(Z.bucket)+"/o/"+_t(Wi),fe,Ae)+ur({alt:"media",token:lr})})[0]}(Tt,je,Z.host,Z._protocol)}}(Z,fe),_t);return Bn.errorHandler=Zi(q),Bn}(Z.storage,Z._location,bn());return Z.storage.makeRequestWithTokens(q,Us).then(fe=>{if(null===fe)throw function ie(){return new ze("no-download-url","The given file does not have any download URLs.")}();return fe})}function kr(Z,q){const fe=function Ze(Z,q){const fe=q.split("/").filter(Ae=>Ae.length>0).join("/");return 0===Z.length?fe:Z+"/"+fe}(Z._location.path,q),Ae=new an(Z._location.bucket,fe);return new Xe(Z.storage,Ae)}function fs(Z,q){if(Z instanceof Hs){const fe=Z;if(null==fe._bucket)throw function Mt(){return new ze("no-default-bucket","No default bucket found. Did you set the '"+$e+"' property when initializing the app?")}();const Ae=new Xe(fe,fe._bucket);return null!=q?fs(Ae,q):Ae}return void 0!==q?kr(Z,q):Z}function Wr(Z,q){if(q&&function Fr(Z){return/^[A-Za-z]+:\/\//.test(Z)}(q)){if(Z instanceof Hs)return function Xn(Z,q){return new Xe(Z,q)}(Z,q);throw Le("To use ref(service, url), the first argument must be a Storage instance.")}return fs(Z,q)}function eo(Z,q){const fe=q?.[$e];return null==fe?null:an.makeFromBucketSpec(fe,Z)}class Hs{constructor(q,fe,Ae,je,Tt){this.app=q,this._authProvider=fe,this._appCheckProvider=Ae,this._url=je,this._firebaseVersion=Tt,this._bucket=null,this._host=ut,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=je?an.makeFromBucketSpec(je,this._host):eo(this._host,this.app.options)}get host(){return this._host}set host(q){this._host=q,this._bucket=null!=this._url?an.makeFromBucketSpec(this._url,q):eo(q,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(q){Rr("time",0,Number.POSITIVE_INFINITY,q),this._maxUploadRetryTime=q}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(q){Rr("time",0,Number.POSITIVE_INFINITY,q),this._maxOperationRetryTime=q}_getAuthToken(){var q=this;return(0,mt.Z)(function*(){if(q._overrideAuthToken)return q._overrideAuthToken;const fe=q._authProvider.getImmediate({optional:!0});if(fe){const Ae=yield fe.getToken();if(null!==Ae)return Ae.accessToken}return null})()}_getAppCheckToken(){var q=this;return(0,mt.Z)(function*(){const fe=q._appCheckProvider.getImmediate({optional:!0});return fe?(yield fe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(q=>q.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(q){return new Xe(this,q)}_makeRequest(q,fe,Ae,je,Tt=!0){if(this._deleted)return new Dr(Qe());{const _t=function xn(Z,q,fe,Ae,je,Tt,_t=!0){const Bn=ur(Z.urlParams),Dn=Z.url+Bn,lr=Object.assign({},Z.headers);return function In(Z,q){q&&(Z["X-Firebase-GMPID"]=q)}(lr,q),function dr(Z,q){null!==q&&q.length>0&&(Z.Authorization="Firebase "+q)}(lr,fe),function Tn(Z,q){Z["X-Firebase-Storage-Version"]="webjs/"+(q??"AppManager")}(lr,Tt),function kn(Z,q){null!==q&&(Z["X-Firebase-AppCheck"]=q)}(lr,Ae),new Kn(Dn,Z.method,lr,Z.body,Z.successCodes,Z.additionalRetryCodes,Z.handler,Z.errorHandler,Z.timeout,Z.progressCallback,je,_t)}(q,this._appId,Ae,je,fe,this._firebaseVersion,Tt);return this._requests.add(_t),_t.getPromise().then(()=>this._requests.delete(_t),()=>this._requests.delete(_t)),_t}}makeRequestWithTokens(q,fe){var Ae=this;return(0,mt.Z)(function*(){const[je,Tt]=yield Promise.all([Ae._getAuthToken(),Ae._getAppCheckToken()]);return Ae._makeRequest(q,fe,je,Tt).getPromise()})()}}const To="@firebase/storage";function mi(Z,q){return Wr(Z=(0,xt.m9)(Z),q)}function Kr(Z,{instanceIdentifier:q}){const fe=Z.getProvider("app").getImmediate(),Ae=Z.getProvider("auth-internal"),je=Z.getProvider("app-check-internal");return new Hs(fe,Ae,je,q,lt.SDK_VERSION)}!function Ho(){(0,lt._registerComponent)(new yt.wA("storage",Kr,"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(To,"0.10.0",""),(0,lt.registerVersion)(To,"0.10.0","esm2017")}();class ar{constructor(q,fe,Ae){this._delegate=q,this.task=fe,this.ref=Ae}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ds{constructor(q,fe){this._delegate=q,this._ref=fe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ar(this._delegate.snapshot,this,this._ref)}then(q,fe){return this._delegate.then(Ae=>{if(q)return q(new ar(Ae,this,this._ref))},fe)}on(q,fe,Ae,je){let Tt;return fe&&(Tt="function"==typeof fe?_t=>fe(new ar(_t,this,this._ref)):{next:fe.next?_t=>fe.next(new ar(_t,this,this._ref)):void 0,complete:fe.complete||void 0,error:fe.error||void 0}),this._delegate.on(q,Tt,Ae||void 0,je||void 0)}}class Ji{constructor(q,fe){this._delegate=q,this._service=fe}get prefixes(){return this._delegate.prefixes.map(q=>new Oi(q,this._service))}get items(){return this._delegate.items.map(q=>new Oi(q,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Oi{constructor(q,fe){this._delegate=q,this.storage=fe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(q){const fe=function fo(Z,q){return kr(Z,q)}(this._delegate,q);return new Oi(fe,this.storage)}get root(){return new Oi(this._delegate.root,this.storage)}get parent(){const q=this._delegate.parent;return null==q?null:new Oi(q,this.storage)}put(q,fe){return this._throwIfRoot("put"),new Ds(function Ui(Z,q,fe){return function Pn(Z,q,fe){return Z._throwIfRoot("uploadBytesResumable"),new ct(Z,new tr(q),fe)}(Z=(0,xt.m9)(Z),q,fe)}(this._delegate,q,fe),this)}putString(q,fe=vn.RAW,Ae){this._throwIfRoot("putString");const je=_r(fe,q),Tt=Object.assign({},Ae);return null==Tt.contentType&&null!=je.contentType&&(Tt.contentType=je.contentType),new Ds(new ct(this._delegate,new tr(je.data,!0),Tt),this)}listAll(){return function sa(Z){return function Ei(Z){const q={prefixes:[],items:[]};return ei(Z,q).then(()=>q)}(Z=(0,xt.m9)(Z))}(this._delegate).then(q=>new Ji(q,this.storage))}list(q){return function no(Z,q){return Es(Z=(0,xt.m9)(Z),q)}(this._delegate,q||void 0).then(fe=>new Ji(fe,this.storage))}getMetadata(){return function js(Z){return function Vi(Z){Z._throwIfRoot("getMetadata");const q=wi(Z.storage,Z._location,bn());return Z.storage.makeRequestWithTokens(q,Us)}(Z=(0,xt.m9)(Z))}(this._delegate)}updateMetadata(q){return function to(Z,q){return function Ca(Z,q){Z._throwIfRoot("updateMetadata");const fe=function Ti(Z,q,fe,Ae){const Tt=er(q.fullServerUrl(),Z.host,Z._protocol),Bn=tt(fe,Ae),lr=Z.maxOperationRetryTime,qn=new Ar(Tt,"PATCH",Rn(Z,Ae),lr);return qn.headers={"Content-Type":"application/json; charset=utf-8"},qn.body=Bn,qn.errorHandler=Zi(q),qn}(Z.storage,Z._location,q,bn());return Z.storage.makeRequestWithTokens(fe,Us)}(Z=(0,xt.m9)(Z),q)}(this._delegate,q)}getDownloadURL(){return function zr(Z){return Mo(Z=(0,xt.m9)(Z))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ia(Z){return function Oo(Z){Z._throwIfRoot("deleteObject");const q=function ho(Z,q){const Ae=er(q.fullServerUrl(),Z.host,Z._protocol),Bn=new Ar(Ae,"DELETE",function _t(Dn,lr){},Z.maxOperationRetryTime);return Bn.successCodes=[200,204],Bn.errorHandler=Zi(q),Bn}(Z.storage,Z._location);return Z.storage.makeRequestWithTokens(q,Us)}(Z=(0,xt.m9)(Z))}(this._delegate)}_throwIfRoot(q){if(""===this._delegate._location.path)throw Fe(q)}}class Zr{constructor(q,fe){this.app=q,this._delegate=fe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(q){if(cr(q))throw Le("ref() expected a child path but got a URL, use refFromURL instead.");return new Oi(mi(this._delegate,q),this)}refFromURL(q){if(!cr(q))throw Le("refFromURL() expected a full URL but got a child path, use ref() instead.");try{an.makeFromUrl(q,this._delegate.host)}catch{throw Le("refFromUrl() expected a valid full URL but got an invalid one.")}return new Oi(mi(this._delegate,q),this)}setMaxUploadRetryTime(q){this._delegate.maxUploadRetryTime=q}setMaxOperationRetryTime(q){this._delegate.maxOperationRetryTime=q}useEmulator(q,fe,Ae={}){!function xo(Z,q,fe,Ae={}){!function Va(Z,q,fe,Ae={}){Z.host=`${q}:${fe}`,Z._protocol="http";const{mockUserToken:je}=Ae;je&&(Z._overrideAuthToken="string"==typeof je?je:(0,xt.Sg)(je,Z.app.options.projectId))}(Z,q,fe,Ae)}(this._delegate,q,fe,Ae)}}function cr(Z){return/^[A-Za-z]+:\/\//.test(Z)}function _l(Z,{instanceIdentifier:q}){const fe=Z.getProvider("app-compat").getImmediate(),Ae=Z.getProvider("storage").getImmediate({identifier:q});return new Zr(fe,Ae)}!function po(Z){const q={TaskState:fr,TaskEvent:Ta,StringFormat:vn,Storage:Zr,Reference:Oi};Z.INTERNAL.registerComponent(new yt.wA("storage-compat",_l,"PUBLIC").setServiceProps(q).setMultipleInstances(!0)),Z.registerVersion("@firebase/storage-compat","0.2.0")}(Nt.Z);var ro=B(6217),Ua=B(9260);function Yt(Z){const q=function la(Z){return new u.y(q=>{const fe=_t=>q.next(_t);fe(Z.snapshot);const Tt=Z.on("state_changed",fe);return Z.then(_t=>{fe(_t),q.complete()},_t=>{fe(Z.snapshot),(_t=>{q.error(_t)})(_t)}),function(){Tt()}}).pipe(function We(Z,q=Se.z){return(0,Oe.e)((fe,Ae)=>{let je=null,Tt=null,_t=null;const Bn=()=>{if(je){je.unsubscribe(),je=null;const lr=Tt;Tt=null,Ae.next(lr)}};function Dn(){const lr=_t+Z,qn=q.now();if(qn<lr)return je=this.schedule(void 0,lr-qn),void Ae.add(je);Bn()}fe.subscribe((0,Me.x)(Ae,lr=>{Tt=lr,_t=q.now(),je||(je=q.schedule(Dn,Z),Ae.add(je))},()=>{Bn(),Ae.complete()},void 0,()=>{Tt=je=null}))})}(0))}(Z);return{task:Z,then:Z.then.bind(Z),catch:Z.catch.bind(Z),pause:Z.pause.bind(Z),cancel:Z.cancel.bind(Z),resume:Z.resume.bind(Z),snapshotChanges:()=>q,percentageChanges:()=>q.pipe((0,ke.U)(fe=>fe.bytesTransferred/fe.totalBytes*100))}}function gr(Z){return{getDownloadURL:()=>(0,L.of)(void 0).pipe(we.fc,(0,Je.w)(()=>Z.getDownloadURL()),we.iC),getMetadata:()=>(0,L.of)(void 0).pipe(we.fc,(0,Je.w)(()=>Z.getMetadata()),we.iC),delete:()=>(0,ee.D)(Z.delete()),child:q=>gr(Z.child(q)),updateMetadata:q=>(0,ee.D)(Z.updateMetadata(q)),put:(q,fe)=>Yt(Z.put(q,fe)),putString:(q,fe,Ae)=>Yt(Z.putString(q,fe,Ae)),list:q=>(0,ee.D)(Z.list(q)),listAll:()=>(0,ee.D)(Z.listAll())}}const ua=new ye.OlP("angularfire2.storageBucket"),ca=new ye.OlP("angularfire2.storage.maxUploadRetryTime"),rs=new ye.OlP("angularfire2.storage.maxOperationRetryTime"),Q=new ye.OlP("angularfire2.storage.use-emulator");let W=(()=>{class Z{constructor(fe,Ae,je,Tt,_t,Bn,Dn,lr,qn,Wi){const zi=(0,He.on)(fe,_t,Ae);this.storage=(0,He.cc)(`${zi.name}.storage.${je}`,"AngularFireStorage",zi.name,()=>{const _i=_t.runOutsideAngular(()=>zi.storage(je||void 0)),Ci=qn;return Ci&&_i.useEmulator(...Ci),Dn&&_i.setMaxUploadRetryTime(Dn),lr&&_i.setMaxOperationRetryTime(lr),_i},[Dn,lr])}ref(fe){return gr(this.storage.ref(fe))}refFromURL(fe){return gr(this.storage.refFromURL(fe))}upload(fe,Ae,je){return gr(this.storage.ref(fe)).put(Ae,je)}}return Z.\u0275fac=function(fe){return new(fe||Z)(ye.LFG(He.Dh),ye.LFG(He.xv,8),ye.LFG(ua,8),ye.LFG(ye.Lbi),ye.LFG(ye.R0b),ye.LFG(we.HU),ye.LFG(ca,8),ye.LFG(rs,8),ye.LFG(Q,8),ye.LFG(ro.nm,8))},Z.\u0275prov=ye.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"any"}),Z})(),ue=(()=>{class Z{}return Z.\u0275fac=function(fe){return new(fe||Z)},Z.\u0275mod=ye.oAB({type:Z}),Z.\u0275inj=ye.cJS({}),Z})(),Pt=(()=>{class Z{constructor(){Ua.Z.registerVersion("angularfire",we.q4.full,"gcs-compat")}}return Z.\u0275fac=function(fe){return new(fe||Z)},Z.\u0275mod=ye.oAB({type:Z}),Z.\u0275inj=ye.cJS({providers:[W],imports:[ue]}),Z})()},2011:(hn,dt,B)=>{B.d(dt,{Dh:()=>ke,GT:()=>Me,cc:()=>mt,hO:()=>Nt,on:()=>we,pX:()=>Oe,xv:()=>Je});var u=B(4650),L=B(9260),ee=B(2122);hn=B.hmd(hn);const Se=["ngOnDestroy"],Oe=(ut,$e,jt,gt={})=>new Proxy(ut,{get:(qe,ze)=>jt.runOutsideAngular(()=>{var $t;if(ut[ze])return!(null===($t=gt?.spy)||void 0===$t)&&$t.get&&gt.spy.get(ze,ut[ze]),ut[ze];if(Se.indexOf(ze)>-1)return()=>{};const rt=$e.toPromise().then(Ue=>{const bt=Ue&&Ue[ze];return"function"==typeof bt?bt.bind(Ue):bt&&bt.then?bt.then(Ne=>jt.run(()=>Ne)):jt.run(()=>bt)});return new Proxy(()=>{},{get:(Ue,bt)=>rt[bt],apply:(Ue,bt,Ne)=>rt.then(Ge=>{var wt;const nt=Ge&&Ge(...Ne);return!(null===(wt=gt?.spy)||void 0===wt)&&wt.apply&&gt.spy.apply(ze,Ne,nt),nt})})})}),Me=(ut,$e)=>{$e.forEach(jt=>{Object.getOwnPropertyNames(jt.prototype||jt).forEach(gt=>{Object.defineProperty(ut.prototype,gt,Object.getOwnPropertyDescriptor(jt.prototype||jt,gt))})})};class We{constructor($e){return $e}}const ke=new u.OlP("angularfire2.app.options"),Je=new u.OlP("angularfire2.app.name");function we(ut,$e,jt){const qe="object"==typeof jt&&jt||{};qe.name=qe.name||"string"==typeof jt&&jt||"[DEFAULT]";const $t=L.Z.apps.filter(rt=>rt&&rt.name===qe.name)[0]||$e.runOutsideAngular(()=>L.Z.initializeApp(ut,qe));try{JSON.stringify(ut)!==JSON.stringify($t.options)&&ye("error",`${$t.name} Firebase App already initialized with different options${hn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new We($t)}const ye=(ut,...$e)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ut](...$e)},He={provide:We,useFactory:we,deps:[ke,u.R0b,[new u.FiY,Je]]};let Nt=(()=>{class ut{constructor(jt){L.Z.registerVersion("angularfire",ee.q4.full,"core"),L.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),L.Z.registerVersion("angular",u.q4F.full,jt.toString())}static initializeApp(jt,gt){return{ngModule:ut,providers:[{provide:ke,useValue:jt},{provide:Je,useValue:gt}]}}}return ut.\u0275fac=function(jt){return new(jt||ut)(u.LFG(u.Lbi))},ut.\u0275mod=u.oAB({type:ut}),ut.\u0275inj=u.cJS({providers:[He]}),ut})();function mt(ut,$e,jt,gt,qe){const[,ze,$t]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===ut)||[];if(ze)return function lt(ut,$e){try{return ut.toString()===$e.toString()}catch{return ut===$e}}(qe,$t)||(yt("error",`${$e} was already initialized on the ${jt} Firebase App with different settings.${xt?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:qe,was:$t})),ze;{const rt=gt();return globalThis.\u0275AngularfireInstanceCache.push([ut,rt,qe]),rt}}const xt=!!hn.hot,yt=(ut,...$e)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ut](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(hn,dt,B)=>{B.d(dt,{q4:()=>xe,iC:()=>Wa,fc:()=>cu,HU:()=>zo,vb:()=>va,JM:()=>ya});var u=B(4650),L=B(259),ee=B(5861),Se=B(9681),Oe=B(2090),Me=B(4859),We=B(1877),ke=B(8766);const Je="@firebase/installations",He="w:0.6.0",Nt="FIS_v2",$e=new Oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jt(H){return H instanceof Oe.ZR&&H.code.includes("request-failed")}function gt({projectId:H}){return`https://firebaseinstallations.googleapis.com/v1/projects/${H}/installations`}function qe(H){return{token:H.token,requestStatus:2,expiresIn:Ge(H.expiresIn),creationTime:Date.now()}}function ze(H,Y){return $t.apply(this,arguments)}function $t(){return($t=(0,ee.Z)(function*(H,Y){const Ce=(yield Y.json()).error;return $e.create("request-failed",{requestName:H,serverCode:Ce.code,serverMessage:Ce.message,serverStatus:Ce.status})})).apply(this,arguments)}function rt({apiKey:H}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H})}function Ue(H,{refreshToken:Y}){const le=rt(H);return le.append("Authorization",function wt(H){return`${Nt} ${H}`}(Y)),le}function bt(H){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,ee.Z)(function*(H){const Y=yield H();return Y.status>=500&&Y.status<600?H():Y})).apply(this,arguments)}function Ge(H){return Number(H.replace("s","000"))}function nt(H,Y){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,ee.Z)(function*({appConfig:H,heartbeatServiceProvider:Y},{fid:le}){const Ce=gt(H),pt=rt(H),Rt=Y.getImmediate({optional:!0});if(Rt){const rr=yield Rt.getHeartbeatsHeader();rr&&pt.append("x-firebase-client",rr)}const On={method:"POST",headers:pt,body:JSON.stringify({fid:le,authVersion:Nt,appId:H.appId,sdkVersion:He})},Qn=yield bt(()=>fetch(Ce,On));if(Qn.ok){const rr=yield Qn.json();return{fid:rr.fid||le,registrationStatus:2,refreshToken:rr.refreshToken,authToken:qe(rr.authToken)}}throw yield ze("Create Installation",Qn)})).apply(this,arguments)}function Kt(H){return new Promise(Y=>{setTimeout(Y,H)})}const Mt=/^[cdef][\w-]{21}$/;function ge(){try{const H=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(H),H[0]=112+H[0]%16;const le=function ie(H){return function Mn(H){return btoa(String.fromCharCode(...H)).replace(/\+/g,"-").replace(/\//g,"_")}(H).substr(0,22)}(H);return Mt.test(le)?le:""}catch{return""}}function Bt(H){return`${H.appName}!${H.appId}`}const Le=new Map;function Qe(H,Y){const le=Bt(H);Xt(le,Y),function an(H,Y){const le=function jn(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=H=>{Xt(H.data.key,H.data.fid)}),Dr}();le&&le.postMessage({key:H,fid:Y}),function ii(){0===Le.size&&Dr&&(Dr.close(),Dr=null)}()}(le,Y)}function Xt(H,Y){const le=Le.get(H);if(le)for(const Ce of le)Ce(Y)}let Dr=null;const Wn="firebase-installations-store";let sr=null;function Tr(){return sr||(sr=(0,ke.X3)("firebase-installations-database",1,{upgrade:(H,Y)=>{0===Y&&H.createObjectStore(Wn)}})),sr}function un(H,Y){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,ee.Z)(function*(H,Y){const le=Bt(H),pt=(yield Tr()).transaction(Wn,"readwrite"),Rt=pt.objectStore(Wn),sn=yield Rt.get(le);return yield Rt.put(Y,le),yield pt.done,(!sn||sn.fid!==Y.fid)&&Qe(H,Y.fid),Y})).apply(this,arguments)}function er(H){return ur.apply(this,arguments)}function ur(){return(ur=(0,ee.Z)(function*(H){const Y=Bt(H),Ce=(yield Tr()).transaction(Wn,"readwrite");yield Ce.objectStore(Wn).delete(Y),yield Ce.done})).apply(this,arguments)}function Xr(H,Y){return ji.apply(this,arguments)}function ji(){return(ji=(0,ee.Z)(function*(H,Y){const le=Bt(H),pt=(yield Tr()).transaction(Wn,"readwrite"),Rt=pt.objectStore(Wn),sn=yield Rt.get(le),On=Y(sn);return void 0===On?yield Rt.delete(le):yield Rt.put(On,le),yield pt.done,On&&(!sn||sn.fid!==On.fid)&&Qe(H,On.fid),On})).apply(this,arguments)}function Kn(H){return pr.apply(this,arguments)}function pr(){return(pr=(0,ee.Z)(function*(H){let Y;const le=yield Xr(H.appConfig,Ce=>{const pt=dr(Ce),Rt=Tn(H,pt);return Y=Rt.registrationPromise,Rt.installationEntry});return""===le.fid?{installationEntry:yield Y}:{installationEntry:le,registrationPromise:Y}})).apply(this,arguments)}function dr(H){return Vn(H||{fid:ge(),registrationStatus:0})}function Tn(H,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject($e.create("app-offline"))};const le={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},Ce=function In(H,Y){return kn.apply(this,arguments)}(H,le);return{installationEntry:le,registrationPromise:Ce}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:xn(H)}:{installationEntry:Y}}function kn(){return(kn=(0,ee.Z)(function*(H,Y){try{const le=yield nt(H,Y);return un(H.appConfig,le)}catch(le){throw jt(le)&&409===le.customData.serverCode?yield er(H.appConfig):yield un(H.appConfig,{fid:Y.fid,registrationStatus:0}),le}})).apply(this,arguments)}function xn(H){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,ee.Z)(function*(H){let Y=yield Ai(H.appConfig);for(;1===Y.registrationStatus;)yield Kt(100),Y=yield Ai(H.appConfig);if(0===Y.registrationStatus){const{installationEntry:le,registrationPromise:Ce}=yield Kn(H);return Ce||le}return Y})).apply(this,arguments)}function Ai(H){return Xr(H,Y=>{if(!Y)throw $e.create("installation-not-found");return Vn(Y)})}function Vn(H){return function ci(H){return 1===H.registrationStatus&&H.registrationTime+1e4<Date.now()}(H)?{fid:H.fid,registrationStatus:0}:H}function vn(H,Y){return Di.apply(this,arguments)}function Di(){return(Di=(0,ee.Z)(function*({appConfig:H,heartbeatServiceProvider:Y},le){const Ce=_r(H,le),pt=Ue(H,le),Rt=Y.getImmediate({optional:!0});if(Rt){const rr=yield Rt.getHeartbeatsHeader();rr&&pt.append("x-firebase-client",rr)}const On={method:"POST",headers:pt,body:JSON.stringify({installation:{sdkVersion:He,appId:H.appId}})},Qn=yield bt(()=>fetch(Ce,On));if(Qn.ok)return qe(yield Qn.json());throw yield ze("Generate Auth Token",Qn)})).apply(this,arguments)}function _r(H,{fid:Y}){return`${gt(H)}/${Y}/authTokens:generate`}function si(H){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,ee.Z)(function*(H,Y=!1){let le;const Ce=yield Xr(H.appConfig,Rt=>{if(!tr(Rt))throw $e.create("not-registered");const sn=Rt.authToken;if(!Y&&Be(sn))return Rt;if(1===sn.requestStatus)return le=yn(H,Y),Rt;{if(!navigator.onLine)throw $e.create("app-offline");const On=Ze(Rt);return le=Gn(H,On),On}});return le?yield le:Ce.authToken})).apply(this,arguments)}function yn(H,Y){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,ee.Z)(function*(H,Y){let le=yield En(H.appConfig);for(;1===le.authToken.requestStatus;)yield Kt(100),le=yield En(H.appConfig);const Ce=le.authToken;return 0===Ce.requestStatus?si(H,Y):Ce})).apply(this,arguments)}function En(H){return Xr(H,Y=>{if(!tr(Y))throw $e.create("not-registered");return function Te(H){return 1===H.requestStatus&&H.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function Gn(H,Y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,ee.Z)(function*(H,Y){try{const le=yield vn(H,Y),Ce=Object.assign(Object.assign({},Y),{authToken:le});return yield un(H.appConfig,Ce),le}catch(le){if(!jt(le)||401!==le.customData.serverCode&&404!==le.customData.serverCode){const Ce=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield un(H.appConfig,Ce)}else yield er(H.appConfig);throw le}})).apply(this,arguments)}function tr(H){return void 0!==H&&2===H.registrationStatus}function Be(H){return 2===H.requestStatus&&!function Pe(H){const Y=Date.now();return Y<H.creationTime||H.creationTime+H.expiresIn<Y+36e5}(H)}function Ze(H){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},H),{authToken:Y})}function be(){return(be=(0,ee.Z)(function*(H){const Y=H,{installationEntry:le,registrationPromise:Ce}=yield Kn(Y);return Ce?Ce.catch(console.error):si(Y).catch(console.error),le.fid})).apply(this,arguments)}function qt(){return(qt=(0,ee.Z)(function*(H,Y=!1){const le=H;return yield bn(le),(yield si(le,Y)).token})).apply(this,arguments)}function bn(H){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,ee.Z)(function*(H){const{registrationPromise:Y}=yield Kn(H);Y&&(yield Y)})).apply(this,arguments)}function Ar(H){return $e.create("missing-app-config-values",{valueName:H})}const gi="installations",ys=H=>{const Y=H.getProvider("app").getImmediate(),le=function hr(H){if(!H||!H.options)throw Ar("App Configuration");if(!H.name)throw Ar("App Name");const Y=["projectId","apiKey","appId"];for(const le of Y)if(!H.options[le])throw Ar(le);return{appName:H.name,projectId:H.options.projectId,apiKey:H.options.apiKey,appId:H.options.appId}}(Y);return{app:Y,appConfig:le,heartbeatServiceProvider:(0,Se._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},Js=H=>{const Y=H.getProvider("app").getImmediate(),le=(0,Se._getProvider)(Y,gi).getImmediate();return{getId:()=>function se(H){return be.apply(this,arguments)}(le),getToken:pt=>function ht(H){return qt.apply(this,arguments)}(le,pt)}};(function Xs(){(0,Se._registerComponent)(new Me.wA(gi,ys,"PUBLIC")),(0,Se._registerComponent)(new Me.wA("installations-internal",Js,"PRIVATE"))})(),(0,Se.registerVersion)(Je,"0.6.0"),(0,Se.registerVersion)(Je,"0.6.0","esm2017");const Zi="@firebase/remote-config",Ti=new Oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ra{constructor(Y,le,Ce,pt){this.client=Y,this.storage=le,this.storageCache=Ce,this.logger=pt}isCachedDataFresh(Y,le){if(!le)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ce=Date.now()-le,pt=Ce<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${pt}.`),pt}fetch(Y){var le=this;return(0,ee.Z)(function*(){const[Ce,pt]=yield Promise.all([le.storage.getLastSuccessfulFetchTimestampMillis(),le.storage.getLastSuccessfulFetchResponse()]);if(pt&&le.isCachedDataFresh(Y.cacheMaxAgeMillis,Ce))return pt;Y.eTag=pt&&pt.eTag;const Rt=yield le.client.fetch(Y),sn=[le.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&sn.push(le.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(sn),Rt})()}}function Qi(H=navigator){return H.languages&&H.languages[0]||H.language}class Uo{constructor(Y,le,Ce,pt,Rt,sn){this.firebaseInstallations=Y,this.sdkVersion=le,this.namespace=Ce,this.projectId=pt,this.apiKey=Rt,this.appId=sn}fetch(Y){var le=this;return(0,ee.Z)(function*(){const[Ce,pt]=yield Promise.all([le.firebaseInstallations.getId(),le.firebaseInstallations.getToken()]),sn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${le.projectId}/namespaces/${le.namespace}:fetch?key=${le.apiKey}`,On={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},Qn={sdk_version:le.sdkVersion,app_instance_id:Ce,app_instance_id_token:pt,app_id:le.appId,language_code:Qi()},rr={method:"POST",headers:On,body:JSON.stringify(Qn)},Gr=fetch(sn,rr),Cn=new Promise((bo,Ko)=>{Y.signal.addEventListener(()=>{const qc=new Error("The operation was aborted.");qc.name="AbortError",Ko(qc)})});let Lr;try{yield Promise.race([Gr,Cn]),Lr=yield Gr}catch(bo){let Ko="fetch-client-network";throw"AbortError"===bo?.name&&(Ko="fetch-timeout"),Ti.create(Ko,{originalErrorMessage:bo?.message})}let cs=Lr.status;const za=Lr.headers.get("ETag")||void 0;let Nl,Gl;if(200===Lr.status){let bo;try{bo=yield Lr.json()}catch(Ko){throw Ti.create("fetch-client-parse",{originalErrorMessage:Ko?.message})}Nl=bo.entries,Gl=bo.state}if("INSTANCE_STATE_UNSPECIFIED"===Gl?cs=500:"NO_CHANGE"===Gl?cs=304:("NO_TEMPLATE"===Gl||"EMPTY_CONFIG"===Gl)&&(Nl={}),304!==cs&&200!==cs)throw Ti.create("fetch-status",{httpStatus:cs});return{status:cs,eTag:za,config:Nl}})()}}class Xe{constructor(Y,le){this.client=Y,this.storage=le}fetch(Y){var le=this;return(0,ee.Z)(function*(){const Ce=(yield le.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return le.attemptFetch(Y,Ce)})()}attemptFetch(Y,{throttleEndTimeMillis:le,backoffCount:Ce}){var pt=this;return(0,ee.Z)(function*(){yield function ns(H,Y){return new Promise((le,Ce)=>{const pt=Math.max(Y-Date.now(),0),Rt=setTimeout(le,pt);H.addEventListener(()=>{clearTimeout(Rt),Ce(Ti.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,le);try{const Rt=yield pt.client.fetch(Y);return yield pt.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function ct(H){if(!(H instanceof Oe.ZR&&H.customData))return!1;const Y=Number(H.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Rt))throw Rt;const sn={throttleEndTimeMillis:Date.now()+(0,Oe.$s)(Ce),backoffCount:Ce+1};return yield pt.storage.setThrottleMetadata(sn),pt.attemptFetch(Y,sn)}})()}}class cn{constructor(Y,le,Ce,pt,Rt){this.app=Y,this._client=le,this._storageCache=Ce,this._storage=pt,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pn(H,Y){const le=H.target.error||void 0;return Ti.create(Y,{originalErrorMessage:le&&le?.message})}const or="app_namespace_store";class Es{constructor(Y,le,Ce,pt=function yo(){return new Promise((H,Y)=>{try{const le=indexedDB.open("firebase_remote_config",1);le.onerror=Ce=>{Y(Pn(Ce,"storage-open"))},le.onsuccess=Ce=>{H(Ce.target.result)},le.onupgradeneeded=Ce=>{0===Ce.oldVersion&&Ce.target.result.createObjectStore(or,{keyPath:"compositeKey"})}}catch(le){Y(Ti.create("storage-open",{originalErrorMessage:le?.message}))}})}()){this.appId=Y,this.appName=le,this.namespace=Ce,this.openDbPromise=pt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var le=this;return(0,ee.Z)(function*(){const Ce=yield le.openDbPromise;return new Promise((pt,Rt)=>{const On=Ce.transaction([or],"readonly").objectStore(or),Qn=le.createCompositeKey(Y);try{const rr=On.get(Qn);rr.onerror=Gr=>{Rt(Pn(Gr,"storage-get"))},rr.onsuccess=Gr=>{const Cn=Gr.target.result;pt(Cn?Cn.value:void 0)}}catch(rr){Rt(Ti.create("storage-get",{originalErrorMessage:rr?.message}))}})})()}set(Y,le){var Ce=this;return(0,ee.Z)(function*(){const pt=yield Ce.openDbPromise;return new Promise((Rt,sn)=>{const Qn=pt.transaction([or],"readwrite").objectStore(or),rr=Ce.createCompositeKey(Y);try{const Gr=Qn.put({compositeKey:rr,value:le});Gr.onerror=Cn=>{sn(Pn(Cn,"storage-set"))},Gr.onsuccess=()=>{Rt()}}catch(Gr){sn(Ti.create("storage-set",{originalErrorMessage:Gr?.message}))}})})()}delete(Y){var le=this;return(0,ee.Z)(function*(){const Ce=yield le.openDbPromise;return new Promise((pt,Rt)=>{const On=Ce.transaction([or],"readwrite").objectStore(or),Qn=le.createCompositeKey(Y);try{const rr=On.delete(Qn);rr.onerror=Gr=>{Rt(Pn(Gr,"storage-delete"))},rr.onsuccess=()=>{pt()}}catch(rr){Rt(Ti.create("storage-delete",{originalErrorMessage:rr?.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class Vi{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,ee.Z)(function*(){const le=Y.storage.getLastFetchStatus(),Ce=Y.storage.getLastSuccessfulFetchTimestampMillis(),pt=Y.storage.getActiveConfig(),Rt=yield le;Rt&&(Y.lastFetchStatus=Rt);const sn=yield Ce;sn&&(Y.lastSuccessfulFetchTimestampMillis=sn);const On=yield pt;On&&(Y.activeConfig=On)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function kr(){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,ee.Z)(function*(){if(!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ca(){(0,Se._registerComponent)(new Me.wA("remote-config",function H(Y,{instanceIdentifier:le}){const Ce=Y.getProvider("app").getImmediate(),pt=Y.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ti.create("registration-window");if(!(0,Oe.hl)())throw Ti.create("indexed-db-unavailable");const{projectId:Rt,apiKey:sn,appId:On}=Ce.options;if(!Rt)throw Ti.create("registration-project-id");if(!sn)throw Ti.create("registration-api-key");if(!On)throw Ti.create("registration-app-id");const Qn=new Es(On,Ce.name,le=le||"firebase"),rr=new Vi(Qn),Gr=new We.Yd(Zi);Gr.logLevel=We.in.ERROR;const Cn=new Uo(pt,Se.SDK_VERSION,le,Rt,sn,On),Lr=new Xe(Cn,Qn),cs=new ra(Lr,Qn,rr,Gr),za=new cn(Ce,cs,rr,Qn,Gr);return function oi(H){const Y=(0,Oe.m9)(H);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(za),za},"PUBLIC").setMultipleInstances(!0)),(0,Se.registerVersion)(Zi,"0.4.0"),(0,Se.registerVersion)(Zi,"0.4.0","esm2017")}();const Xn="/firebase-messaging-sw.js",fs="/firebase-cloud-messaging-push-scope",Wr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Va="google.c.a.c_id",Hs="google.c.a.c_l",To="google.c.a.ts",Vr="google.c.a.e";var Ni=(()=>{return(H=Ni||(Ni={})).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked",Ni;var H})();function ia(H){const Y=new Uint8Array(H);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ms(H){const le=(H+"=".repeat((4-H.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ce=atob(le),pt=new Uint8Array(Ce.length);for(let Rt=0;Rt<Ce.length;++Rt)pt[Rt]=Ce.charCodeAt(Rt);return pt}const Ui="fcm_token_details_db",to="fcm_token_object_Store";function no(H){return sa.apply(this,arguments)}function sa(){return sa=(0,ee.Z)(function*(H){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(Ui))return null;let Y=null;return(yield(0,ke.X3)(Ui,5,{upgrade:(Ce=(0,ee.Z)(function*(pt,Rt,sn,On){var Qn;if(Rt<2||!pt.objectStoreNames.contains(to))return;const rr=On.objectStore(to),Gr=yield rr.index("fcmSenderId").get(H);if(yield rr.clear(),Gr)if(2===Rt){const Cn=Gr;if(!Cn.auth||!Cn.p256dh||!Cn.endpoint)return;Y={token:Cn.fcmToken,createTime:null!==(Qn=Cn.createTime)&&void 0!==Qn?Qn:Date.now(),subscriptionOptions:{auth:Cn.auth,p256dh:Cn.p256dh,endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:"string"==typeof Cn.vapidKey?Cn.vapidKey:ia(Cn.vapidKey)}}}else if(3===Rt){const Cn=Gr;Y={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:ia(Cn.auth),p256dh:ia(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:ia(Cn.vapidKey)}}}else if(4===Rt){const Cn=Gr;Y={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:ia(Cn.auth),p256dh:ia(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:ia(Cn.vapidKey)}}}}),function(Rt,sn,On,Qn){return Ce.apply(this,arguments)})})).close(),yield(0,ke.Lj)(Ui),yield(0,ke.Lj)("fcm_vapid_details_db"),yield(0,ke.Lj)("undefined"),zr(Y)?Y:null;var Ce}),sa.apply(this,arguments)}function zr(H){if(!H||!H.subscriptionOptions)return!1;const{subscriptionOptions:Y}=H;return"number"==typeof H.createTime&&H.createTime>0&&"string"==typeof H.token&&H.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const fo="firebase-messaging-store";let ls=null;function xo(){return ls||(ls=(0,ke.X3)("firebase-messaging-database",1,{upgrade:(H,Y)=>{0===Y&&H.createObjectStore(fo)}})),ls}function oa(H){return Po.apply(this,arguments)}function Po(){return(Po=(0,ee.Z)(function*(H){const Y=Ji(H),Ce=yield(yield xo()).transaction(fo).objectStore(fo).get(Y);if(Ce)return Ce;{const pt=yield no(H.appConfig.senderId);if(pt)return yield Kr(H,pt),pt}})).apply(this,arguments)}function Kr(H,Y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,ee.Z)(function*(H,Y){const le=Ji(H),pt=(yield xo()).transaction(fo,"readwrite");return yield pt.objectStore(fo).put(Y,le),yield pt.done,Y})).apply(this,arguments)}function ar(H){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,ee.Z)(function*(H){const Y=Ji(H),Ce=(yield xo()).transaction(fo,"readwrite");yield Ce.objectStore(fo).delete(Y),yield Ce.done})).apply(this,arguments)}function Ji({appConfig:H}){return H.appId}const Zr=new Oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cr(H,Y){return $s.apply(this,arguments)}function $s(){return($s=(0,ee.Z)(function*(H,Y){const le=yield Ua(H),Ce=Yt(Y),pt={method:"POST",headers:le,body:JSON.stringify(Ce)};let Rt;try{Rt=yield(yield fetch(ro(H.appConfig),pt)).json()}catch(sn){throw Zr.create("token-subscribe-failed",{errorInfo:sn?.toString()})}if(Rt.error)throw Zr.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw Zr.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function aa(H,Y){return ps.apply(this,arguments)}function ps(){return(ps=(0,ee.Z)(function*(H,Y){const le=yield Ua(H),Ce=Yt(Y.subscriptionOptions),pt={method:"PATCH",headers:le,body:JSON.stringify(Ce)};let Rt;try{Rt=yield(yield fetch(`${ro(H.appConfig)}/${Y.token}`,pt)).json()}catch(sn){throw Zr.create("token-update-failed",{errorInfo:sn?.toString()})}if(Rt.error)throw Zr.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw Zr.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function _l(H,Y){return po.apply(this,arguments)}function po(){return(po=(0,ee.Z)(function*(H,Y){const Ce={method:"DELETE",headers:yield Ua(H)};try{const Rt=yield(yield fetch(`${ro(H.appConfig)}/${Y}`,Ce)).json();if(Rt.error)throw Zr.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(pt){throw Zr.create("token-unsubscribe-failed",{errorInfo:pt?.toString()})}})).apply(this,arguments)}function ro({projectId:H}){return`https://fcmregistrations.googleapis.com/v1/projects/${H}/registrations`}function Ua(H){return la.apply(this,arguments)}function la(){return(la=(0,ee.Z)(function*({appConfig:H,installations:Y}){const le=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${le}`})})).apply(this,arguments)}function Yt({p256dh:H,auth:Y,endpoint:le,vapidKey:Ce}){const pt={web:{endpoint:le,auth:Y,p256dh:H}};return Ce!==Wr&&(pt.web.applicationPubKey=Ce),pt}const gr=6048e5;function ua(H){return ca.apply(this,arguments)}function ca(){return(ca=(0,ee.Z)(function*(H){const Y=yield Z(H.swRegistration,H.vapidKey),le={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:Y.endpoint,auth:ia(Y.getKey("auth")),p256dh:ia(Y.getKey("p256dh"))},Ce=yield oa(H.firebaseDependencies);if(Ce){if(fe(Ce.subscriptionOptions,le))return Date.now()>=Ce.createTime+gr?W(H,{token:Ce.token,createTime:Date.now(),subscriptionOptions:le}):Ce.token;try{yield _l(H.firebaseDependencies,Ce.token)}catch(pt){console.warn(pt)}return ue(H.firebaseDependencies,le)}return ue(H.firebaseDependencies,le)})).apply(this,arguments)}function rs(H){return Q.apply(this,arguments)}function Q(){return(Q=(0,ee.Z)(function*(H){const Y=yield oa(H.firebaseDependencies);Y&&(yield _l(H.firebaseDependencies,Y.token),yield ar(H.firebaseDependencies));const le=yield H.swRegistration.pushManager.getSubscription();return!le||le.unsubscribe()})).apply(this,arguments)}function W(H,Y){return j.apply(this,arguments)}function j(){return(j=(0,ee.Z)(function*(H,Y){try{const le=yield aa(H.firebaseDependencies,Y),Ce=Object.assign(Object.assign({},Y),{token:le,createTime:Date.now()});return yield Kr(H.firebaseDependencies,Ce),le}catch(le){throw yield rs(H),le}})).apply(this,arguments)}function ue(H,Y){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,ee.Z)(function*(H,Y){const Ce={token:yield cr(H,Y),createTime:Date.now(),subscriptionOptions:Y};return yield Kr(H,Ce),Ce.token})).apply(this,arguments)}function Z(H,Y){return q.apply(this,arguments)}function q(){return(q=(0,ee.Z)(function*(H,Y){return(yield H.pushManager.getSubscription())||H.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ms(Y)})})).apply(this,arguments)}function fe(H,Y){return Y.vapidKey===H.vapidKey&&Y.endpoint===H.endpoint&&Y.auth===H.auth&&Y.p256dh===H.p256dh}function Ae(H){const Y={from:H.from,collapseKey:H.collapse_key,messageId:H.fcmMessageId};return function je(H,Y){if(!Y.notification)return;H.notification={};const le=Y.notification.title;le&&(H.notification.title=le);const Ce=Y.notification.body;Ce&&(H.notification.body=Ce);const pt=Y.notification.image;pt&&(H.notification.image=pt);const Rt=Y.notification.icon;Rt&&(H.notification.icon=Rt)}(Y,H),function Tt(H,Y){!Y.data||(H.data=Y.data)}(Y,H),function _t(H,Y){var le,Ce,pt,Rt,sn;if(!(Y.fcmOptions||null!==(le=Y.notification)&&void 0!==le&&le.click_action))return;H.fcmOptions={};const On=null!==(pt=null===(Ce=Y.fcmOptions)||void 0===Ce?void 0:Ce.link)&&void 0!==pt?pt:null===(Rt=Y.notification)||void 0===Rt?void 0:Rt.click_action;On&&(H.fcmOptions.link=On);const Qn=null===(sn=Y.fcmOptions)||void 0===sn?void 0:sn.analytics_label;Qn&&(H.fcmOptions.analyticsLabel=Qn)}(Y,H),Y}function Bn(H){return"object"==typeof H&&!!H&&Va in H}function Dn(H,Y){const le=[];for(let Ce=0;Ce<H.length;Ce++)le.push(H.charAt(Ce)),Ce<Y.length&&le.push(Y.charAt(Ce));return le.join("")}function qn(H){return Zr.create("missing-app-config-values",{valueName:H})}Dn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wi{constructor(Y,le,Ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pt=function lr(H){if(!H||!H.options)throw qn("App Configuration Object");if(!H.name)throw qn("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:le}=H;for(const Ce of Y)if(!le[Ce])throw qn(Ce);return{appName:H.name,projectId:le.projectId,apiKey:le.apiKey,appId:le.appId,senderId:le.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:pt,installations:le,analyticsProvider:Ce}}_delete(){return Promise.resolve()}}function zi(H){return _i.apply(this,arguments)}function _i(){return(_i=(0,ee.Z)(function*(H){try{H.swRegistration=yield navigator.serviceWorker.register(Xn,{scope:fs}),H.swRegistration.update().catch(()=>{})}catch(Y){throw Zr.create("failed-service-worker-registration",{browserErrorMessage:Y?.message})}})).apply(this,arguments)}function Ci(H,Y){return is.apply(this,arguments)}function is(){return(is=(0,ee.Z)(function*(H,Y){if(!Y&&!H.swRegistration&&(yield zi(H)),Y||!H.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw Zr.create("invalid-sw-registration");H.swRegistration=Y}})).apply(this,arguments)}function qr(H,Y){return gs.apply(this,arguments)}function gs(){return(gs=(0,ee.Z)(function*(H,Y){Y?H.vapidKey=Y:H.vapidKey||(H.vapidKey=Wr)})).apply(this,arguments)}function Ki(){return(Ki=(0,ee.Z)(function*(H,Y){if(!navigator)throw Zr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zr.create("permission-blocked");return yield qr(H,Y?.vapidKey),yield Ci(H,Y?.serviceWorkerRegistration),ua(H)})).apply(this,arguments)}function qi(H,Y,le){return $o.apply(this,arguments)}function $o(){return($o=(0,ee.Z)(function*(H,Y,le){const Ce=vo(Y);(yield H.firebaseDependencies.analyticsProvider.get()).logEvent(Ce,{message_id:le[Va],message_name:le[Hs],message_time:le[To],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vo(H){switch(H){case Ni.NOTIFICATION_CLICKED:return"notification_open";case Ni.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ne(){return(ne=(0,ee.Z)(function*(H,Y){const le=Y.data;if(!le.isFirebaseMessaging)return;H.onMessageHandler&&le.messageType===Ni.PUSH_RECEIVED&&("function"==typeof H.onMessageHandler?H.onMessageHandler(Ae(le)):H.onMessageHandler.next(Ae(le)));const Ce=le.data;Bn(Ce)&&"1"===Ce[Vr]&&(yield qi(H,le.messageType,Ce))})).apply(this,arguments)}const $="@firebase/messaging",Ve=H=>{const Y=new Wi(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),H.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",le=>function F(H,Y){return ne.apply(this,arguments)}(Y,le)),Y},Ct=H=>{const Y=H.getProvider("messaging").getImmediate();return{getToken:Ce=>function jo(H,Y){return Ki.apply(this,arguments)}(Y,Ce)}};function Fn(){return ai.apply(this,arguments)}function ai(){return(ai=(0,ee.Z)(function*(){try{yield(0,Oe.eu)()}catch{return!1}return typeof window<"u"&&(0,Oe.hl)()&&(0,Oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vt(){(0,Se._registerComponent)(new Me.wA("messaging",Ve,"PUBLIC")),(0,Se._registerComponent)(new Me.wA("messaging-internal",Ct,"PRIVATE")),(0,Se.registerVersion)($,"0.12.0"),(0,Se.registerVersion)($,"0.12.0","esm2017")}();const fa="analytics",Ha="firebase_id",Vl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Go="https://www.googletagmanager.com/gtag/js",Xi=new We.Yd("@firebase/analytics");function Ul(H){return Promise.all(H.map(Y=>Y.catch(le=>le)))}function Gu(H,Y){const le=document.createElement("script");le.src=`${Go}?l=${H}&id=${Y}`,le.async=!0,document.head.appendChild(le)}function lu(H,Y,le,Ce,pt,Rt){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,ee.Z)(function*(H,Y,le,Ce,pt,Rt){const sn=Ce[pt];try{if(sn)yield Y[sn];else{const Qn=(yield Ul(le)).find(rr=>rr.measurementId===pt);Qn&&(yield Y[Qn.appId])}}catch(On){Xi.error(On)}H("config",pt,Rt)})).apply(this,arguments)}function pa(H,Y,le,Ce,pt){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,ee.Z)(function*(H,Y,le,Ce,pt){try{let Rt=[];if(pt&&pt.send_to){let sn=pt.send_to;Array.isArray(sn)||(sn=[sn]);const On=yield Ul(le);for(const Qn of sn){const rr=On.find(Cn=>Cn.measurementId===Qn),Gr=rr&&Y[rr.appId];if(!Gr){Rt=[];break}Rt.push(Gr)}}0===Rt.length&&(Rt=Object.values(Y)),yield Promise.all(Rt),H("event",Ce,pt||{})}catch(Rt){Xi.error(Rt)}})).apply(this,arguments)}function vl(H){const Y=window.document.getElementsByTagName("script");for(const le of Object.values(Y))if(le.src&&le.src.includes(Go)&&le.src.includes(H))return le;return null}const Ts=new Oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rn=new class zu{constructor(Y={},le=1e3){this.throttleMetadata=Y,this.intervalMillis=le}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,le){this.throttleMetadata[Y]=le}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function Hi(H){return new Headers({Accept:"application/json","x-goog-api-key":H})}function cl(H){return us.apply(this,arguments)}function us(){return(us=(0,ee.Z)(function*(H){var Y;const{appId:le,apiKey:Ce}=H,pt={method:"GET",headers:Hi(Ce)},Rt=Vl.replace("{app-id}",le),sn=yield fetch(Rt,pt);if(200!==sn.status&&304!==sn.status){let On="";try{const Qn=yield sn.json();null!==(Y=Qn.error)&&void 0!==Y&&Y.message&&(On=Qn.error.message)}catch{}throw Ts.create("config-fetch-failed",{httpStatus:sn.status,responseMessage:On})}return sn.json()})).apply(this,arguments)}function fn(H){return wn.apply(this,arguments)}function wn(){return(wn=(0,ee.Z)(function*(H,Y=rn,le){const{appId:Ce,apiKey:pt,measurementId:Rt}=H.options;if(!Ce)throw Ts.create("no-app-id");if(!pt){if(Rt)return{measurementId:Rt,appId:Ce};throw Ts.create("no-api-key")}const sn=Y.getThrottleMetadata(Ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},On=new Ii;return setTimeout((0,ee.Z)(function*(){On.abort()}),void 0!==le?le:6e4),Il({appId:Ce,apiKey:pt,measurementId:Rt},sn,On,Y)})).apply(this,arguments)}function Il(H,Y,le){return on.apply(this,arguments)}function on(){return(on=(0,ee.Z)(function*(H,{throttleEndTimeMillis:Y,backoffCount:le},Ce,pt=rn){var Rt;const{appId:sn,measurementId:On}=H;try{yield kt(Ce,Y)}catch(Qn){if(On)return Xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${On} provided in the "measurementId" field in the local Firebase config. [${Qn?.message}]`),{appId:sn,measurementId:On};throw Qn}try{const Qn=yield cl(H);return pt.deleteThrottleMetadata(sn),Qn}catch(Qn){const rr=Qn;if(!Zt(rr)){if(pt.deleteThrottleMetadata(sn),On)return Xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${On} provided in the "measurementId" field in the local Firebase config. [${rr?.message}]`),{appId:sn,measurementId:On};throw Qn}const Gr=503===Number(null===(Rt=rr?.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,Oe.$s)(le,pt.intervalMillis,30):(0,Oe.$s)(le,pt.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+Gr,backoffCount:le+1};return pt.setThrottleMetadata(sn,Cn),Xi.debug(`Calling attemptFetch again in ${Gr} millis`),Il(H,Cn,Ce,pt)}})).apply(this,arguments)}function kt(H,Y){return new Promise((le,Ce)=>{const pt=Math.max(Y-Date.now(),0),Rt=setTimeout(le,pt);H.addEventListener(()=>{clearTimeout(Rt),Ce(Ts.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function Zt(H){if(!(H instanceof Oe.ZR&&H.customData))return!1;const Y=Number(H.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class Ii{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let Cs,Er;function ma(){return(ma=(0,ee.Z)(function*(H,Y,le,Ce,pt){if(pt&&pt.global)H("event",le,Ce);else{const Rt=yield Y;H("event",le,Object.assign(Object.assign({},Ce),{send_to:Rt}))}})).apply(this,arguments)}function Zo(H){Er=H}function Ku(H){Cs=H}function Ss(){return zn.apply(this,arguments)}function zn(){return(zn=(0,ee.Z)(function*(){if(!(0,Oe.hl)())return Xi.warn(Ts.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Oe.eu)()}catch(H){return Xi.warn(Ts.create("indexeddb-unavailable",{errorInfo:H?.toString()}).message),!1}return!0})).apply(this,arguments)}function ti(){return(ti=(0,ee.Z)(function*(H,Y,le,Ce,pt,Rt,sn){var On;const Qn=fn(H);Qn.then(cs=>{le[cs.measurementId]=cs.appId,H.options.measurementId&&cs.measurementId!==H.options.measurementId&&Xi.warn(`The measurement ID in the local Firebase config (${H.options.measurementId}) does not match the measurement ID fetched from the server (${cs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cs=>Xi.error(cs)),Y.push(Qn);const rr=Ss().then(cs=>{if(cs)return Ce.getId()}),[Gr,Cn]=yield Promise.all([Qn,rr]);vl(Rt)||Gu(Rt,Gr.measurementId),Er&&(pt("consent","default",Er),Zo(void 0)),pt("js",new Date);const Lr=null!==(On=sn?.config)&&void 0!==On?On:{};return Lr.origin="firebase",Lr.update=!0,null!=Cn&&(Lr[Ha]=Cn),pt("config",Gr.measurementId,Lr),Cs&&(pt("set",Cs),Ku(void 0)),Gr.measurementId})).apply(this,arguments)}class jl{constructor(Y){this.app=Y}_delete(){return delete ui[this.app.options.appId],Promise.resolve()}}let ui={},_n=[];const go={};let Ma,ko,Na="dataLayer",dl=!1;function Eu(H,Y,le){!function qu(){const H=[];if((0,Oe.ru)()&&H.push("This is a browser extension environment."),(0,Oe.zI)()||H.push("Cookies are not available."),H.length>0){const Y=H.map((Ce,pt)=>`(${pt+1}) ${Ce}`).join(" "),le=Ts.create("invalid-analytics-context",{errorInfo:Y});Xi.warn(le.message)}}();const Ce=H.options.appId;if(!Ce)throw Ts.create("no-app-id");if(!H.options.apiKey){if(!H.options.measurementId)throw Ts.create("no-api-key");Xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${H.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ui[Ce])throw Ts.create("already-exists",{id:Ce});if(!dl){!function yl(H){let Y=[];Array.isArray(window[H])?Y=window[H]:window[H]=Y}(Na);const{wrappedGtag:Rt,gtagCore:sn}=function Wu(H,Y,le,Ce,pt){let Rt=function(...sn){window[Ce].push(arguments)};return window[pt]&&"function"==typeof window[pt]&&(Rt=window[pt]),window[pt]=function bu(H,Y,le,Ce){function Rt(){return(Rt=(0,ee.Z)(function*(sn,On,Qn){try{"event"===sn?yield pa(H,Y,le,On,Qn):"config"===sn?yield lu(H,Y,le,Ce,On,Qn):"consent"===sn?H("consent","update",Qn):H("set",On)}catch(rr){Xi.error(rr)}})).apply(this,arguments)}return function pt(sn,On,Qn){return Rt.apply(this,arguments)}}(Rt,H,Y,le),{gtagCore:Rt,wrappedGtag:window[pt]}}(ui,_n,go,Na,"gtag");ko=Rt,Ma=sn,dl=!0}return ui[Ce]=function Ys(H,Y,le,Ce,pt,Rt,sn){return ti.apply(this,arguments)}(H,_n,go,Y,Ma,Na,le),new jl(H)}function Kc(){return uu.apply(this,arguments)}function uu(){return(uu=(0,ee.Z)(function*(){if((0,Oe.ru)()||!(0,Oe.zI)()||!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch{return!1}})).apply(this,arguments)}const sl="@firebase/analytics";!function Os(){(0,Se._registerComponent)(new Me.wA(fa,(Y,{options:le})=>Eu(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),le),"PUBLIC")),(0,Se._registerComponent)(new Me.wA("analytics-internal",function H(Y){try{const le=Y.getProvider(fa).getImmediate();return{logEvent:(Ce,pt,Rt)=>function il(H,Y,le,Ce){H=(0,Oe.m9)(H),function Is(H,Y,le,Ce,pt){return ma.apply(this,arguments)}(ko,ui[H.app.options.appId],Y,le,Ce).catch(pt=>Xi.error(pt))}(le,Ce,pt,Rt)}}catch(le){throw Ts.create("interop-component-reg-failed",{reason:le})}},"PRIVATE")),(0,Se.registerVersion)(sl,"0.9.0"),(0,Se.registerVersion)(sl,"0.9.0","esm2017")}();var Oa=B(4408),xa=B(7565);const M=new class A extends xa.v{}(class $l extends Oa.o{constructor(Y,le){super(Y,le),this.scheduler=Y,this.work=le}schedule(Y,le=0){return le>0?super.schedule(Y,le):(this.delay=le,this.state=Y,this.scheduler.flush(this),this)}execute(Y,le){return le>0||this.closed?super.execute(Y,le):this._execute(Y,le)}requestAsyncId(Y,le,Ce=0){return null!=Ce&&Ce>0||null==Ce&&this.delay>0?super.requestAsyncId(Y,le,Ce):(Y.flush(this),0)}});var U=B(4986),K=B(8505),ae=B(5363),Re=B(9468);const xe=new u.GfV("7.5.0"),Lt="__angularfire_symbol__analyticsIsSupportedValue",pn="__angularfire_symbol__analyticsIsSupported",Cr="__angularfire_symbol__remoteConfigIsSupportedValue",gn="__angularfire_symbol__remoteConfigIsSupported",ki="__angularfire_symbol__messagingIsSupportedValue",ms="__angularfire_symbol__messagingIsSupported";function ya(H,Y,le){if(Y){if(1===Y.length)return Y[0];const Rt=Y.filter(sn=>sn.app===le);if(1===Rt.length)return Rt[0]}return le.container.getProvider(H).getImmediate({optional:!0})}globalThis[pn]||(globalThis[pn]=Kc().then(H=>globalThis[Lt]=H).catch(()=>globalThis[Lt]=!1)),globalThis[ms]||(globalThis[ms]=Fn().then(H=>globalThis[ki]=H).catch(()=>globalThis[ki]=!1)),globalThis[gn]||(globalThis[gn]=kr().then(H=>globalThis[Cr]=H).catch(()=>globalThis[Cr]=!1));const va=(H,Y)=>{const le=Y?[Y]:(0,L.C6)(),Ce=[];return le.forEach(pt=>{pt.container.getProvider(H).instances.forEach(sn=>{Ce.includes(sn)||Ce.push(sn)})}),Ce};function so(){}class $a{constructor(Y,le=M){this.zone=Y,this.delegate=le}now(){return this.delegate.now()}schedule(Y,le,Ce){const pt=this.zone;return this.delegate.schedule(function(sn){pt.runGuarded(()=>{Y.apply(this,[sn])})},le,Ce)}}class Qo{constructor(Y){this.zone=Y,this.task=null}call(Y,le){const Ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",so,{},so,so)),le.pipe((0,K.b)({next:Ce,complete:Ce,error:Ce})).subscribe(Y).add(Ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zo=(()=>{class H{constructor(le){this.ngZone=le,this.outsideAngular=le.runOutsideAngular(()=>new $a(Zone.current)),this.insideAngular=le.run(()=>new $a(Zone.current,U.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return H.\u0275fac=function(le){return new(le||H)(u.LFG(u.R0b))},H.\u0275prov=u.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();function Io(){const H=globalThis.\u0275AngularFireScheduler;if(!H)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return H}function cu(H){return H.pipe((0,ae.Q)(Io().outsideAngular))}function Wa(H){return Io(),function du(H){return function(le){return(le=le.lift(new Qo(H.ngZone))).pipe((0,Re.R)(H.outsideAngular),(0,ae.Q)(H.insideAngular))}}(Io())(H)}},552:(hn,dt,B)=>{B.d(dt,{$:()=>ro,A:()=>ye,B:()=>mt,G:()=>Js,H:()=>vs,J:()=>Xe,L:()=>Be,M:()=>Fr,N:()=>eo,P:()=>U,Q:()=>Va,R:()=>Cu,T:()=>Hs,U:()=>Wr,V:()=>Ni,W:()=>ia,X:()=>no,Y:()=>Oi,Z:()=>cr,_:()=>aa,a:()=>ga,a0:()=>ua,a1:()=>rs,a2:()=>W,a3:()=>ue,a4:()=>Z,a5:()=>fe,a6:()=>je,a7:()=>Tt,a8:()=>Bn,a9:()=>Dn,aA:()=>Pe,aB:()=>Qn,aC:()=>cu,aD:()=>ol,aE:()=>Rn,aI:()=>Hi,aL:()=>Vr,aa:()=>zi,ab:()=>Ci,ac:()=>qr,af:()=>qi,ag:()=>vo,ah:()=>F,ak:()=>fo,al:()=>li,an:()=>Go,ao:()=>Cl,ap:()=>bt,aq:()=>ve,ar:()=>bn,as:()=>jt,at:()=>Ju,au:()=>bo,av:()=>pe,aw:()=>gt,ax:()=>rt,ay:()=>cs,az:()=>Ge,b:()=>Ts,c:()=>ki,d:()=>_a,e:()=>Ri,f:()=>du,g:()=>Ce,h:()=>H,i:()=>zn,j:()=>sn,k:()=>qo,l:()=>Yu,m:()=>ch,o:()=>ke,r:()=>Oa,s:()=>hl,u:()=>M});var u=B(5861),L=B(2090),ee=B(9681),Se=B(1877),Oe=B(655),Me=B(4859);const ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ye={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mt=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function Nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new Se.Yd("@firebase/auth");function $e(N,...b){ut.logLevel<=Se.in.ERROR&&ut.error(`Auth (${ee.SDK_VERSION}): ${N}`,...b)}function jt(N,...b){throw $t(N,...b)}function gt(N,...b){return $t(N,...b)}function qe(N,b,D){const k=Object.assign(Object.assign({},lt()),{[b]:D});return new L.LL("auth","Firebase",k).create(b,{appName:N.name})}function ze(N,b,D){if(!(b instanceof D))throw D.name!==b.constructor.name&&jt(N,"argument-error"),qe(N,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $t(N,...b){if("string"!=typeof N){const D=b[0],k=[...b.slice(1)];return k[0]&&(k[0].appName=N.name),N._errorFactory.create(D,...k)}return xt.create(N,...b)}function rt(N,b,...D){if(!N)throw $t(b,...D)}function Ue(N){const b="INTERNAL ASSERTION FAILED: "+N;throw $e(b),new Error(b)}function bt(N,b){N||Ue(b)}const Ne=new Map;function Ge(N){bt(N instanceof Function,"Expected a class definition");let b=Ne.get(N);return b?(bt(b instanceof N,"Instance stored in cache mismatched with class"),b):(b=new N,Ne.set(N,b),b)}function Ht(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.href)||""}function Kt(){return"http:"===Mn()||"https:"===Mn()}function Mn(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class ge{constructor(b,D){this.shortDelay=b,this.longDelay=D,bt(D>b,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(N,b){bt(N.emulator,"Emulator should always be set here");const{url:D}=N.emulator;return b?`${D}${b.startsWith("/")?b.slice(1):b}`:D}class Bt{static initialize(b,D,k){this.fetchImpl=b,D&&(this.headersImpl=D),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qe=new ge(3e4,6e4);function Fe(N,b){return N.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:N.tenantId}):b}function st(N,b,D,k){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,u.Z)(function*(N,b,D,k,oe={}){return an(N,oe,(0,u.Z)(function*(){let _e={},Et={};k&&("GET"===b?Et=k:_e={body:JSON.stringify(k)});const nn=(0,L.xO)(Object.assign({key:N.config.apiKey},Et)).slice(1),Hn=yield N._getAdditionalHeaders();return Hn["Content-Type"]="application/json",N.languageCode&&(Hn["X-Firebase-Locale"]=N.languageCode),Bt.fetch()(br(N,N.config.apiHost,D,nn),Object.assign({method:b,headers:Hn,referrerPolicy:"no-referrer"},_e))}))})).apply(this,arguments)}function an(N,b,D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(N,b,D){N._canInitEmulator=!1;const k=Object.assign(Object.assign({},Le),b);try{const oe=new Nr(N),_e=yield Promise.race([D(),oe.promise]);oe.clearNetworkTimeout();const Et=yield _e.json();if("needConfirmation"in Et)throw Wn(N,"account-exists-with-different-credential",Et);if(_e.ok&&!("errorMessage"in Et))return Et;{const nn=_e.ok?Et.errorMessage:Et.error.message,[Hn,nr]=nn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Hn)throw Wn(N,"credential-already-in-use",Et);if("EMAIL_EXISTS"===Hn)throw Wn(N,"email-already-in-use",Et);if("USER_DISABLED"===Hn)throw Wn(N,"user-disabled",Et);const Ir=k[Hn]||Hn.toLowerCase().replace(/[_\s]+/g,"-");if(nr)throw qe(N,Ir,nr);jt(N,Ir)}}catch(oe){if(oe instanceof L.ZR)throw oe;jt(N,"network-request-failed")}})).apply(this,arguments)}function jn(N,b,D,k){return ii.apply(this,arguments)}function ii(){return(ii=(0,u.Z)(function*(N,b,D,k,oe={}){const _e=yield st(N,b,D,k,oe);return"mfaPendingCredential"in _e&&jt(N,"multi-factor-auth-required",{_serverResponse:_e}),_e})).apply(this,arguments)}function br(N,b,D,k){const oe=`${b}${D}?${k}`;return N.config.emulator?ie(N.config,oe):`${N.config.apiScheme}://${oe}`}class Nr{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((D,k)=>{this.timer=setTimeout(()=>k(gt(this.auth,"network-request-failed")),Qe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(N,b,D){const k={appName:N.name};D.email&&(k.email=D.email),D.phoneNumber&&(k.phoneNumber=D.phoneNumber);const oe=gt(N,b,k);return oe.customData._tokenResponse=D,oe}function Tr(){return(Tr=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function un(N,b){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function er(N,b){return ur.apply(this,arguments)}function ur(){return(ur=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function Xr(N){if(N)try{const b=new Date(Number(N));if(!isNaN(b.getTime()))return b.toUTCString()}catch{}}function pr(){return(pr=(0,u.Z)(function*(N,b=!1){const D=(0,L.m9)(N),k=yield D.getIdToken(b),oe=Tn(k);rt(oe&&oe.exp&&oe.auth_time&&oe.iat,D.auth,"internal-error");const _e="object"==typeof oe.firebase?oe.firebase:void 0,Et=_e?.sign_in_provider;return{claims:oe,token:k,authTime:Xr(dr(oe.auth_time)),issuedAtTime:Xr(dr(oe.iat)),expirationTime:Xr(dr(oe.exp)),signInProvider:Et||null,signInSecondFactor:_e?.sign_in_second_factor||null}})).apply(this,arguments)}function dr(N){return 1e3*Number(N)}function Tn(N){const[b,D,k]=N.split(".");if(void 0===b||void 0===D||void 0===k)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const oe=(0,L.tV)(D);return oe?JSON.parse(oe):($e("Failed to decode base64 JWT payload"),null)}catch(oe){return $e("Caught error parsing JWT payload as JSON",oe?.toString()),null}}function kn(N,b){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(N,b,D=!1){if(D)return b;try{return yield b}catch(k){throw k instanceof L.ZR&&Mr(k)&&N.auth.currentUser===N&&(yield N.auth.signOut()),k}})).apply(this,arguments)}function Mr({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}class Ai{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var D;if(b){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const oe=(null!==(D=this.user.stsTokenManager.expirationTime)&&void 0!==D?D:0)-Date.now()-3e5;return Math.max(0,oe)}}schedule(b=!1){var D=this;if(!this.isRunning)return;const k=this.getInterval(b);this.timerId=setTimeout((0,u.Z)(function*(){yield D.iteration()}),k)}iteration(){var b=this;return(0,u.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===D?.code&&b.schedule(!0))}b.schedule()})()}}class Vn{constructor(b,D){this.createdAt=b,this.lastLoginAt=D,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(N){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(N){var b;const D=N.auth,k=yield N.getIdToken(),oe=yield kn(N,er(D,{idToken:k}));rt(oe?.users.length,D,"internal-error");const _e=oe.users[0];N._notifyReloadListener(_e);const Et=null!==(b=_e.providerUserInfo)&&void 0!==b&&b.length?Pr(_e.providerUserInfo):[],nn=si(N.providerData,Et),Ir=!!N.isAnonymous&&!(N.email&&_e.passwordHash||nn?.length),ts={uid:_e.localId,displayName:_e.displayName||null,photoURL:_e.photoUrl||null,email:_e.email||null,emailVerified:_e.emailVerified||!1,phoneNumber:_e.phoneNumber||null,tenantId:_e.tenantId||null,providerData:nn,metadata:new Vn(_e.createdAt,_e.lastLoginAt),isAnonymous:Ir};Object.assign(N,ts)})).apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(N){const b=(0,L.m9)(N);yield ci(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function si(N,b){return[...N.filter(k=>!b.some(oe=>oe.providerId===k.providerId)),...b]}function Pr(N){return N.map(b=>{var{providerId:D}=b,k=(0,Oe._T)(b,["providerId"]);return{providerId:D,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function Ut(){return(Ut=(0,u.Z)(function*(N,b){const D=yield an(N,{},(0,u.Z)(function*(){const k=(0,L.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:oe,apiKey:_e}=N.config,Et=br(N,oe,"/v1/token",`key=${_e}`),nn=yield N._getAdditionalHeaders();return nn["Content-Type"]="application/x-www-form-urlencoded",Bt.fetch()(Et,{method:"POST",headers:nn,body:k})}));return{accessToken:D.access_token,expiresIn:D.expires_in,refreshToken:D.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){rt(b.idToken,"internal-error"),rt(typeof b.idToken<"u","internal-error"),rt(typeof b.refreshToken<"u","internal-error");const D="expiresIn"in b&&typeof b.expiresIn<"u"?Number(b.expiresIn):function In(N){const b=Tn(N);return rt(b,"internal-error"),rt(typeof b.exp<"u","internal-error"),rt(typeof b.iat<"u","internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,D)}getToken(b,D=!1){var k=this;return(0,u.Z)(function*(){return rt(!k.accessToken||k.refreshToken,b,"user-token-expired"),D||!k.accessToken||k.isExpired?k.refreshToken?(yield k.refresh(b,k.refreshToken),k.accessToken):null:k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,D){var k=this;return(0,u.Z)(function*(){const{accessToken:oe,refreshToken:_e,expiresIn:Et}=yield function yn(N,b){return Ut.apply(this,arguments)}(b,D);k.updateTokensAndExpiration(oe,_e,Number(Et))})()}updateTokensAndExpiration(b,D,k){this.refreshToken=D||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(b,D){const{refreshToken:k,accessToken:oe,expirationTime:_e}=D,Et=new En;return k&&(rt("string"==typeof k,"internal-error",{appName:b}),Et.refreshToken=k),oe&&(rt("string"==typeof oe,"internal-error",{appName:b}),Et.accessToken=oe),_e&&(rt("number"==typeof _e,"internal-error",{appName:b}),Et.expirationTime=_e),Et}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return Ue("not implemented")}}function Gn(N,b){rt("string"==typeof N||typeof N>"u","internal-error",{appName:b})}class Ln{constructor(b){var{uid:D,auth:k,stsTokenManager:oe}=b,_e=(0,Oe._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=D,this.auth=k,this.stsTokenManager=oe,this.accessToken=oe.accessToken,this.displayName=_e.displayName||null,this.email=_e.email||null,this.emailVerified=_e.emailVerified||!1,this.phoneNumber=_e.phoneNumber||null,this.photoURL=_e.photoURL||null,this.isAnonymous=_e.isAnonymous||!1,this.tenantId=_e.tenantId||null,this.providerData=_e.providerData?[..._e.providerData]:[],this.metadata=new Vn(_e.createdAt||void 0,_e.lastLoginAt||void 0)}getIdToken(b){var D=this;return(0,u.Z)(function*(){const k=yield kn(D,D.stsTokenManager.getToken(D.auth,b));return rt(k,D.auth,"internal-error"),D.accessToken!==k&&(D.accessToken=k,yield D.auth._persistUserIfCurrent(D),D.auth._notifyListenersIfCurrent(D)),k})()}getIdTokenResult(b){return function Kn(N){return pr.apply(this,arguments)}(this,b)}reload(){return function Di(N){return _r.apply(this,arguments)}(this)}_assign(b){this!==b&&(rt(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(D=>Object.assign({},D)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new Ln(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,D=!1){var k=this;return(0,u.Z)(function*(){let oe=!1;b.idToken&&b.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(b),oe=!0),D&&(yield ci(k)),yield k.auth._persistUserIfCurrent(k),oe&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var b=this;return(0,u.Z)(function*(){const D=yield b.getIdToken();return yield kn(b,function sr(N,b){return Tr.apply(this,arguments)}(b.auth,{idToken:D})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,D){var k,oe,_e,Et,nn,Hn,nr,Ir;const ts=null!==(k=D.displayName)&&void 0!==k?k:void 0,Eo=null!==(oe=D.email)&&void 0!==oe?oe:void 0,qa=null!==(_e=D.phoneNumber)&&void 0!==_e?_e:void 0,Dl=null!==(Et=D.photoURL)&&void 0!==Et?Et:void 0,zl=null!==(nn=D.tenantId)&&void 0!==nn?nn:void 0,Kl=null!==(Hn=D._redirectEventId)&&void 0!==Hn?Hn:void 0,Mu=null!==(nr=D.createdAt)&&void 0!==nr?nr:void 0,wf=null!==(Ir=D.lastLoginAt)&&void 0!==Ir?Ir:void 0,{uid:Xu,emailVerified:lo,isAnonymous:Dd,providerData:ec,stsTokenManager:Cc}=D;rt(Xu&&Cc,b,"internal-error");const Uh=En.fromJSON(this.name,Cc);rt("string"==typeof Xu,b,"internal-error"),Gn(ts,b.name),Gn(Eo,b.name),rt("boolean"==typeof lo,b,"internal-error"),rt("boolean"==typeof Dd,b,"internal-error"),Gn(qa,b.name),Gn(Dl,b.name),Gn(zl,b.name),Gn(Kl,b.name),Gn(Mu,b.name),Gn(wf,b.name);const ed=new Ln({uid:Xu,auth:b,email:Eo,emailVerified:lo,displayName:ts,isAnonymous:Dd,photoURL:Dl,phoneNumber:qa,tenantId:zl,stsTokenManager:Uh,createdAt:Mu,lastLoginAt:wf});return ec&&Array.isArray(ec)&&(ed.providerData=ec.map(ql=>Object.assign({},ql))),Kl&&(ed._redirectEventId=Kl),ed}static _fromIdTokenResponse(b,D,k=!1){return(0,u.Z)(function*(){const oe=new En;oe.updateFromServerResponse(D);const _e=new Ln({uid:D.localId,auth:b,stsTokenManager:oe,isAnonymous:k});return yield ci(_e),_e})()}}const Be=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(D,k){var oe=this;return(0,u.Z)(function*(){oe.storage[D]=k})()}_get(D){var k=this;return(0,u.Z)(function*(){const oe=k.storage[D];return void 0===oe?null:oe})()}_remove(D){var k=this;return(0,u.Z)(function*(){delete k.storage[D]})()}_addListener(D,k){}_removeListener(D,k){}}return N.type="NONE",N})();function Pe(N,b,D){return`firebase:${N}:${b}:${D}`}class Ze{constructor(b,D,k){this.persistence=b,this.auth=D,this.userKey=k;const{config:oe,name:_e}=this.auth;this.fullUserKey=Pe(this.userKey,oe.apiKey,_e),this.fullPersistenceKey=Pe("persistence",oe.apiKey,_e),this.boundEventHandler=D._onStorageEvent.bind(D),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,u.Z)(function*(){const D=yield b.persistence._get(b.fullUserKey);return D?Ln._fromJSON(b.auth,D):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var D=this;return(0,u.Z)(function*(){if(D.persistence===b)return;const k=yield D.getCurrentUser();return yield D.removeCurrentUser(),D.persistence=b,k?D.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,D,k="authUser"){return(0,u.Z)(function*(){if(!D.length)return new Ze(Ge(Be),b,k);const oe=(yield Promise.all(D.map(function(){var nr=(0,u.Z)(function*(Ir){if(yield Ir._isAvailable())return Ir});return function(Ir){return nr.apply(this,arguments)}}()))).filter(nr=>nr);let _e=oe[0]||Ge(Be);const Et=Pe(k,b.config.apiKey,b.name);let nn=null;for(const nr of D)try{const Ir=yield nr._get(Et);if(Ir){const ts=Ln._fromJSON(b,Ir);nr!==_e&&(nn=ts),_e=nr;break}}catch{}const Hn=oe.filter(nr=>nr._shouldAllowMigration);return _e._shouldAllowMigration&&Hn.length?(_e=Hn[0],nn&&(yield _e._set(Et,nn.toJSON())),yield Promise.all(D.map(function(){var nr=(0,u.Z)(function*(Ir){if(Ir!==_e)try{yield Ir._remove(Et)}catch{}});return function(Ir){return nr.apply(this,arguments)}}())),new Ze(_e,b,k)):new Ze(_e,b,k)})()}}function Te(N){const b=N.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(qt(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(se(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(Nn(b))return"Blackberry";if(Ee(b))return"Webos";if(be(b))return"Safari";if((b.includes("chrome/")||ht(b))&&!b.includes("edge/"))return"Chrome";if(bn(b))return"Android";{const k=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function se(N=(0,L.z$)()){return/firefox\//i.test(N)}function be(N=(0,L.z$)()){const b=N.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function ht(N=(0,L.z$)()){return/crios\//i.test(N)}function qt(N=(0,L.z$)()){return/iemobile/i.test(N)}function bn(N=(0,L.z$)()){return/android/i.test(N)}function Nn(N=(0,L.z$)()){return/blackberry/i.test(N)}function Ee(N=(0,L.z$)()){return/webos/i.test(N)}function ve(N=(0,L.z$)()){return/iphone|ipad|ipod/i.test(N)||/macintosh/i.test(N)&&/mobile/i.test(N)}function pe(N=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(N)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(N)}function tn(N=(0,L.z$)()){return ve(N)||bn(N)||Ee(N)||Nn(N)||/windows phone/i.test(N)||qt(N)}function hr(N,b=[]){let D;switch(N){case"Browser":D=Te((0,L.z$)());break;case"Worker":D=`${Te((0,L.z$)())}-${N}`;break;default:D=N}const k=b.length?b.join(","):"FirebaseCore-web";return`${D}/JsCore/${ee.SDK_VERSION}/${k}`}class Ar{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,D){const k=_e=>new Promise((Et,nn)=>{try{Et(b(_e))}catch(Hn){nn(Hn)}});k.onAbort=D,this.queue.push(k);const oe=this.queue.length-1;return()=>{this.queue[oe]=()=>Promise.resolve()}}runMiddleware(b){var D=this;return(0,u.Z)(function*(){if(D.auth.currentUser===b)return;const k=[];try{for(const oe of D.queue)yield oe(b),oe.onAbort&&k.push(oe.onAbort)}catch(oe){k.reverse();for(const _e of k)try{_e()}catch{}throw D.auth._errorFactory.create("login-blocked",{originalMessage:oe?.message})}})()}}class gi{constructor(b,D,k){this.app=b,this.heartbeatServiceProvider=D,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ys(this),this.idTokenSubscription=new ys(this),this.beforeStateQueue=new Ar(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(b,D){var k=this;return D&&(this._popupRedirectResolver=Ge(D)),this._initializationPromise=this.queue((0,u.Z)(function*(){var oe,_e;if(!k._deleted&&(k.persistenceManager=yield Ze.create(k,b),!k._deleted)){if(null!==(oe=k._popupRedirectResolver)&&void 0!==oe&&oe._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(D),k.lastNotifiedUid=(null===(_e=k.currentUser)||void 0===_e?void 0:_e.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,u.Z)(function*(){if(b._deleted)return;const D=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||D){if(b.currentUser&&D&&b.currentUser.uid===D.uid)return b._currentUser._assign(D),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(D,!0)}})()}initializeCurrentUser(b){var D=this;return(0,u.Z)(function*(){var k;const oe=yield D.assertedPersistence.getCurrentUser();let _e=oe,Et=!1;if(b&&D.config.authDomain){yield D.getOrInitRedirectPersistenceManager();const nn=null===(k=D.redirectUser)||void 0===k?void 0:k._redirectEventId,Hn=_e?._redirectEventId,nr=yield D.tryRedirectSignIn(b);(!nn||nn===Hn)&&nr?.user&&(_e=nr.user,Et=!0)}if(!_e)return D.directlySetCurrentUser(null);if(!_e._redirectEventId){if(Et)try{yield D.beforeStateQueue.runMiddleware(_e)}catch(nn){_e=oe,D._popupRedirectResolver._overrideRedirectResult(D,()=>Promise.reject(nn))}return _e?D.reloadAndSetCurrentUserOrClear(_e):D.directlySetCurrentUser(null)}return rt(D._popupRedirectResolver,D,"argument-error"),yield D.getOrInitRedirectPersistenceManager(),D.redirectUser&&D.redirectUser._redirectEventId===_e._redirectEventId?D.directlySetCurrentUser(_e):D.reloadAndSetCurrentUserOrClear(_e)})()}tryRedirectSignIn(b){var D=this;return(0,u.Z)(function*(){let k=null;try{k=yield D._popupRedirectResolver._completeRedirectFn(D,b,!0)}catch{yield D._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(b){var D=this;return(0,u.Z)(function*(){try{yield ci(b)}catch(k){if("auth/network-request-failed"!==k?.code)return D.directlySetCurrentUser(null)}return D.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function en(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var b=this;return(0,u.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var D=this;return(0,u.Z)(function*(){const k=b?(0,L.m9)(b):null;return k&&rt(k.auth.config.apiKey===D.config.apiKey,D,"invalid-user-token"),D._updateCurrentUser(k&&k._clone(D))})()}_updateCurrentUser(b,D=!1){var k=this;return(0,u.Z)(function*(){if(!k._deleted)return b&&rt(k.tenantId===b.tenantId,k,"tenant-id-mismatch"),D||(yield k.beforeStateQueue.runMiddleware(b)),k.queue((0,u.Z)(function*(){yield k.directlySetCurrentUser(b),k.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,u.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var D=this;return this.queue((0,u.Z)(function*(){yield D.assertedPersistence.setPersistence(Ge(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new L.LL("auth","Firebase",b())}onAuthStateChanged(b,D,k){return this.registerStateListener(this.authStateSubscription,b,D,k)}beforeAuthStateChanged(b,D){return this.beforeStateQueue.pushCallback(b,D)}onIdTokenChanged(b,D,k){return this.registerStateListener(this.idTokenSubscription,b,D,k)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,D){var k=this;return(0,u.Z)(function*(){const oe=yield k.getOrInitRedirectPersistenceManager(D);return null===b?oe.removeCurrentUser():oe.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var D=this;return(0,u.Z)(function*(){if(!D.redirectPersistenceManager){const k=b&&Ge(b)||D._popupRedirectResolver;rt(k,D,"argument-error"),D.redirectPersistenceManager=yield Ze.create(D,[Ge(k._redirectPersistence)],"redirectUser"),D.redirectUser=yield D.redirectPersistenceManager.getCurrentUser()}return D.redirectPersistenceManager})()}_redirectUserForId(b){var D=this;return(0,u.Z)(function*(){var k,oe;return D._isInitialized&&(yield D.queue((0,u.Z)(function*(){}))),(null===(k=D._currentUser)||void 0===k?void 0:k._redirectEventId)===b?D._currentUser:(null===(oe=D.redirectUser)||void 0===oe?void 0:oe._redirectEventId)===b?D.redirectUser:null})()}_persistUserIfCurrent(b){var D=this;return(0,u.Z)(function*(){if(b===D.currentUser)return D.queue((0,u.Z)(function*(){return D.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,D;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(D=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==D?D:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,D,k,oe){if(this._deleted)return()=>{};const _e="function"==typeof D?D:D.next.bind(D),Et=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(Et,this,"internal-error"),Et.then(()=>_e(this.currentUser)),"function"==typeof D?b.addObserver(D,k,oe):b.addObserver(D)}directlySetCurrentUser(b){var D=this;return(0,u.Z)(function*(){D.currentUser&&D.currentUser!==b&&D._currentUser._stopProactiveRefresh(),b&&D.isProactiveRefreshEnabled&&b._startProactiveRefresh(),D.currentUser=b,b?yield D.assertedPersistence.setCurrentUser(b):yield D.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,u.Z)(function*(){var D;const k={"X-Client-Version":b.clientVersion};b.app.options.appId&&(k["X-Firebase-gmpid"]=b.app.options.appId);const oe=yield null===(D=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===D?void 0:D.getHeartbeatsHeader();return oe&&(k["X-Firebase-Client"]=oe),k})()}}function Rn(N){return(0,L.m9)(N)}class ys{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,L.ne)(D=>this.observer=D)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Js(N,b,D){const k=Rn(N);rt(k._canInitEmulator,k,"emulator-config-failed"),rt(/^https?:\/\//.test(b),k,"invalid-emulator-scheme");const oe=!!D?.disableWarnings,_e=Xs(b),{host:Et,port:nn}=function Zi(N){const b=Xs(N),D=/(\/\/)?([^?#/]+)/.exec(N.substr(b.length));if(!D)return{host:"",port:null};const k=D[2].split("@").pop()||"",oe=/^(\[[^\]]+\])(:|$)/.exec(k);if(oe){const _e=oe[1];return{host:_e,port:wi(k.substr(_e.length+1))}}{const[_e,Et]=k.split(":");return{host:_e,port:wi(Et)}}}(b);k.config.emulator={url:`${_e}//${Et}${null===nn?"":`:${nn}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:Et,port:nn,protocol:_e.replace(":",""),options:Object.freeze({disableWarnings:oe})}),oe||function Fs(){function N(){const b=document.createElement("p"),D=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",N):N())}()}function Xs(N){const b=N.indexOf(":");return b<0?"":N.substr(0,b+1)}function wi(N){if(!N)return null;const b=Number(N);return isNaN(b)?null:b}class vs{constructor(b,D){this.providerId=b,this.signInMethod=D}toJSON(){return Ue("not implemented")}_getIdTokenResponse(b){return Ue("not implemented")}_linkToIdToken(b,D){return Ue("not implemented")}_getReauthenticationResolver(b){return Ue("not implemented")}}function bs(N,b){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:resetPassword",Fe(N,b))})).apply(this,arguments)}function ho(N,b){return $r.apply(this,arguments)}function $r(){return($r=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Ba(N,b){return as.apply(this,arguments)}function as(){return(as=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:update",Fe(N,b))})).apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPassword",Fe(N,b))})).apply(this,arguments)}function Rs(N,b){return $i.apply(this,arguments)}function $i(){return($i=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:sendOobCode",Fe(N,b))})).apply(this,arguments)}function Bs(N,b){return oi.apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(N,b){return Rs(N,b)})).apply(this,arguments)}function Ta(N,b){return fr.apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(N,b){return Rs(N,b)})).apply(this,arguments)}function Vs(N,b){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(N,b){return Rs(N,b)})).apply(this,arguments)}function zs(N,b){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(N,b){return Rs(N,b)})).apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithEmailLink",Fe(N,b))})).apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithEmailLink",Fe(N,b))})).apply(this,arguments)}class Qi extends vs{constructor(b,D,k,oe=null){super("password",k),this._email=b,this._password=D,this._tenantId=oe}static _fromEmailAndPassword(b,D){return new Qi(b,D,"password")}static _fromEmailAndCode(b,D,k=null){return new Qi(b,D,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const D="string"==typeof b?JSON.parse(b):b;if(D?.email&&D?.password){if("password"===D.signInMethod)return this._fromEmailAndPassword(D.email,D.password);if("emailLink"===D.signInMethod)return this._fromEmailAndCode(D.email,D.password,D.tenantId)}return null}_getIdTokenResponse(b){var D=this;return(0,u.Z)(function*(){switch(D.signInMethod){case"password":return function ws(N,b){return Ls.apply(this,arguments)}(b,{returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Gi(N,b){return Vo.apply(this,arguments)}(b,{email:D._email,oobCode:D._password});default:jt(b,"internal-error")}})()}_linkToIdToken(b,D){var k=this;return(0,u.Z)(function*(){switch(k.signInMethod){case"password":return ho(b,{idToken:D,returnSecureToken:!0,email:k._email,password:k._password});case"emailLink":return function Us(N,b){return ra.apply(this,arguments)}(b,{idToken:D,email:k._email,oobCode:k._password});default:jt(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function Uo(N,b){return ns.apply(this,arguments)}function ns(){return(ns=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithIdp",Fe(N,b))})).apply(this,arguments)}class Xe extends vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const D=new Xe(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(D.idToken=b.idToken),b.accessToken&&(D.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(D.nonce=b.nonce),b.pendingToken&&(D.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(D.accessToken=b.oauthToken,D.secret=b.oauthTokenSecret):jt("argument-error"),D}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const D="string"==typeof b?JSON.parse(b):b,{providerId:k,signInMethod:oe}=D,_e=(0,Oe._T)(D,["providerId","signInMethod"]);if(!k||!oe)return null;const Et=new Xe(k,oe);return Et.idToken=_e.idToken||void 0,Et.accessToken=_e.accessToken||void 0,Et.secret=_e.secret,Et.nonce=_e.nonce,Et.pendingToken=_e.pendingToken||null,Et}_getIdTokenResponse(b){return Uo(b,this.buildRequest())}_linkToIdToken(b,D){const k=this.buildRequest();return k.idToken=D,Uo(b,k)}_getReauthenticationResolver(b){const D=this.buildRequest();return D.autoCreate=!1,Uo(b,D)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const D={};this.idToken&&(D.id_token=this.idToken),this.accessToken&&(D.access_token=this.accessToken),this.secret&&(D.oauth_token_secret=this.secret),D.providerId=this.providerId,this.nonce&&!this.pendingToken&&(D.nonce=this.nonce),b.postBody=(0,L.xO)(D)}return b}}function vt(N,b){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:sendVerificationCode",Fe(N,b))})).apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Fe(N,b))})).apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(N,b){const D=yield jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Fe(N,b));if(D.temporaryProof)throw Wn(N,"account-exists-with-different-credential",D);return D})).apply(this,arguments)}const ei={USER_NOT_FOUND:"user-not-found"};function Es(){return(Es=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Fe(N,Object.assign(Object.assign({},b),{operation:"REAUTH"})),ei)})).apply(this,arguments)}class Vi extends vs{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,D){return new Vi({verificationId:b,verificationCode:D})}static _fromTokenResponse(b,D){return new Vi({phoneNumber:b,temporaryProof:D})}_getIdTokenResponse(b){return function cn(N,b){return Pn.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,D){return function or(N,b){return Ei.apply(this,arguments)}(b,Object.assign({idToken:D},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function yo(N,b){return Es.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:D,verificationId:k,verificationCode:oe}=this.params;return b&&D?{temporaryProof:b,phoneNumber:D}:{sessionInfo:k,code:oe}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:D,verificationCode:k,phoneNumber:oe,temporaryProof:_e}=b;return k||D||oe||_e?new Vi({verificationId:D,verificationCode:k,phoneNumber:oe,temporaryProof:_e}):null}}class Oo{constructor(b){var D,k,oe,_e,Et,nn;const Hn=(0,L.zd)((0,L.pd)(b)),nr=null!==(D=Hn.apiKey)&&void 0!==D?D:null,Ir=null!==(k=Hn.oobCode)&&void 0!==k?k:null,ts=function Ca(N){switch(N){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(oe=Hn.mode)&&void 0!==oe?oe:null);rt(nr&&Ir&&ts,"argument-error"),this.apiKey=nr,this.operation=ts,this.code=Ir,this.continueUrl=null!==(_e=Hn.continueUrl)&&void 0!==_e?_e:null,this.languageCode=null!==(Et=Hn.languageCode)&&void 0!==Et?Et:null,this.tenantId=null!==(nn=Hn.tenantId)&&void 0!==nn?nn:null}static parseLink(b){const D=function Mo(N){const b=(0,L.zd)((0,L.pd)(N)).link,D=b?(0,L.zd)((0,L.pd)(b)).deep_link_id:null,k=(0,L.zd)((0,L.pd)(N)).deep_link_id;return(k?(0,L.zd)((0,L.pd)(k)).link:null)||k||D||b||N}(b);try{return new Oo(D)}catch{return null}}}let Fr=(()=>{class N{constructor(){this.providerId=N.PROVIDER_ID}static credential(D,k){return Qi._fromEmailAndPassword(D,k)}static credentialWithLink(D,k){const oe=Oo.parseLink(k);return rt(oe,"argument-error"),Qi._fromEmailAndCode(D,oe.code,oe.tenantId)}}return N.PROVIDER_ID="password",N.EMAIL_PASSWORD_SIGN_IN_METHOD="password",N.EMAIL_LINK_SIGN_IN_METHOD="emailLink",N})();class Xn{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class fs extends Xn{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class Wr extends fs{static credentialFromJSON(b){const D="string"==typeof b?JSON.parse(b):b;return rt("providerId"in D&&"signInMethod"in D,"argument-error"),Xe._fromParams(D)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return rt(b.idToken||b.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return Wr.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return Wr.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:D,oauthAccessToken:k,oauthTokenSecret:oe,pendingToken:_e,nonce:Et,providerId:nn}=b;if(!k&&!oe&&!D&&!_e||!nn)return null;try{return new Wr(nn)._credential({idToken:D,accessToken:k,nonce:Et,pendingToken:_e})}catch{return null}}}let eo=(()=>{class N extends fs{constructor(){super("facebook.com")}static credential(D){return Xe._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.FACEBOOK_SIGN_IN_METHOD,accessToken:D})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D||!("oauthAccessToken"in D)||!D.oauthAccessToken)return null;try{return N.credential(D.oauthAccessToken)}catch{return null}}}return N.FACEBOOK_SIGN_IN_METHOD="facebook.com",N.PROVIDER_ID="facebook.com",N})(),Va=(()=>{class N extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(D,k){return Xe._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GOOGLE_SIGN_IN_METHOD,idToken:D,accessToken:k})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthIdToken:k,oauthAccessToken:oe}=D;if(!k&&!oe)return null;try{return N.credential(k,oe)}catch{return null}}}return N.GOOGLE_SIGN_IN_METHOD="google.com",N.PROVIDER_ID="google.com",N})(),Hs=(()=>{class N extends fs{constructor(){super("github.com")}static credential(D){return Xe._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GITHUB_SIGN_IN_METHOD,accessToken:D})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D||!("oauthAccessToken"in D)||!D.oauthAccessToken)return null;try{return N.credential(D.oauthAccessToken)}catch{return null}}}return N.GITHUB_SIGN_IN_METHOD="github.com",N.PROVIDER_ID="github.com",N})();class Vr extends vs{constructor(b,D){super(b,b),this.pendingToken=D}_getIdTokenResponse(b){return Uo(b,this.buildRequest())}_linkToIdToken(b,D){const k=this.buildRequest();return k.idToken=D,Uo(b,k)}_getReauthenticationResolver(b){const D=this.buildRequest();return D.autoCreate=!1,Uo(b,D)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const D="string"==typeof b?JSON.parse(b):b,{providerId:k,signInMethod:oe,pendingToken:_e}=D;return k&&oe&&_e&&k===oe?new Vr(k,_e):null}static _create(b,D){return new Vr(b,D)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ni extends Xn{constructor(b){rt(b.startsWith("saml."),"argument-error"),super(b)}static credentialFromResult(b){return Ni.samlCredentialFromTaggedObject(b)}static credentialFromError(b){return Ni.samlCredentialFromTaggedObject(b.customData||{})}static credentialFromJSON(b){const D=Vr.fromJSON(b);return rt(D,"argument-error"),D}static samlCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{pendingToken:D,providerId:k}=b;if(!D||!k)return null;try{return Vr._create(k,D)}catch{return null}}}let ia=(()=>{class N extends fs{constructor(){super("twitter.com")}static credential(D,k){return Xe._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.TWITTER_SIGN_IN_METHOD,oauthToken:D,oauthTokenSecret:k})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthAccessToken:k,oauthTokenSecret:oe}=D;if(!k||!oe)return null;try{return N.credential(k,oe)}catch{return null}}}return N.TWITTER_SIGN_IN_METHOD="twitter.com",N.PROVIDER_ID="twitter.com",N})();function Ms(N,b){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signUp",Fe(N,b))})).apply(this,arguments)}class js{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,D,k,oe=!1){return(0,u.Z)(function*(){const _e=yield Ln._fromIdTokenResponse(b,k,oe),Et=to(k);return new js({user:_e,providerId:Et,_tokenResponse:k,operationType:D})})()}static _forOperation(b,D,k){return(0,u.Z)(function*(){yield b._updateTokensIfNecessary(k,!0);const oe=to(k);return new js({user:b,providerId:oe,_tokenResponse:k,operationType:D})})()}}function to(N){return N.providerId?N.providerId:"phoneNumber"in N?"phone":null}function no(N){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(N){var b;const D=Rn(N);if(yield D._initializationPromise,null!==(b=D.currentUser)&&void 0!==b&&b.isAnonymous)return new js({user:D.currentUser,providerId:null,operationType:"signIn"});const k=yield Ms(D,{returnSecureToken:!0}),oe=yield js._fromIdTokenResponse(D,"signIn",k,!0);return yield D._updateCurrentUser(oe.user),oe})).apply(this,arguments)}class zr extends L.ZR{constructor(b,D,k,oe){var _e;super(D.code,D.message),this.operationType=k,this.user=oe,Object.setPrototypeOf(this,zr.prototype),this.customData={appName:b.name,tenantId:null!==(_e=b.tenantId)&&void 0!==_e?_e:void 0,_serverResponse:D.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(b,D,k,oe){return new zr(b,D,k,oe)}}function Ia(N,b,D,k){return("reauthenticate"===b?D._getReauthenticationResolver(N):D._getIdTokenResponse(N)).catch(_e=>{throw"auth/multi-factor-auth-required"===_e.code?zr._fromErrorAndOperation(N,_e,b,k):_e})}function mi(N){return new Set(N.map(({providerId:b})=>b).filter(b=>!!b))}function fo(N,b){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(N,b){const D=(0,L.m9)(N);yield Po(!0,D,b);const{providerUserInfo:k}=yield un(D.auth,{idToken:yield D.getIdToken(),deleteProvider:[b]}),oe=mi(k||[]);return D.providerData=D.providerData.filter(_e=>oe.has(_e.providerId)),oe.has("phone")||(D.phoneNumber=null),yield D.auth._persistUserIfCurrent(D),D})).apply(this,arguments)}function xo(N,b){return oa.apply(this,arguments)}function oa(){return(oa=(0,u.Z)(function*(N,b,D=!1){const k=yield kn(N,b._linkToIdToken(N.auth,yield N.getIdToken()),D);return js._forOperation(N,"link",k)})).apply(this,arguments)}function Po(N,b,D){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,u.Z)(function*(N,b,D){yield ci(b);const oe=!1===N?"provider-already-linked":"no-such-provider";rt(mi(b.providerData).has(D)===N,b.auth,oe)})).apply(this,arguments)}function Ho(N,b){return ar.apply(this,arguments)}function ar(){return(ar=(0,u.Z)(function*(N,b,D=!1){const{auth:k}=N,oe="reauthenticate";try{const _e=yield kn(N,Ia(k,oe,b,N),D);rt(_e.idToken,k,"internal-error");const Et=Tn(_e.idToken);rt(Et,k,"internal-error");const{sub:nn}=Et;return rt(N.uid===nn,k,"user-mismatch"),js._forOperation(N,oe,_e)}catch(_e){throw"auth/user-not-found"===_e?.code&&jt(k,"user-mismatch"),_e}})).apply(this,arguments)}function Ds(N,b){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(function*(N,b,D=!1){const k="signIn",oe=yield Ia(N,k,b),_e=yield js._fromIdTokenResponse(N,k,oe);return D||(yield N._updateCurrentUser(_e.user)),_e})).apply(this,arguments)}function Oi(N,b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,u.Z)(function*(N,b){return Ds(Rn(N),b)})).apply(this,arguments)}function cr(N,b){return $s.apply(this,arguments)}function $s(){return($s=(0,u.Z)(function*(N,b){const D=(0,L.m9)(N);return yield Po(!1,D,b.providerId),xo(D,b)})).apply(this,arguments)}function aa(N,b){return ps.apply(this,arguments)}function ps(){return(ps=(0,u.Z)(function*(N,b){return Ho((0,L.m9)(N),b)})).apply(this,arguments)}function _l(N,b){return po.apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithCustomToken",Fe(N,b))})).apply(this,arguments)}function ro(N,b){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,u.Z)(function*(N,b){const D=Rn(N),k=yield _l(D,{token:b,returnSecureToken:!0}),oe=yield js._fromIdTokenResponse(D,"signIn",k);return yield D._updateCurrentUser(oe.user),oe})).apply(this,arguments)}class la{constructor(b,D){this.factorId=b,this.uid=D.mfaEnrollmentId,this.enrollmentTime=new Date(D.enrolledAt).toUTCString(),this.displayName=D.displayName}static _fromServerResponse(b,D){return"phoneInfo"in D?Yt._fromServerResponse(b,D):jt(b,"internal-error")}}class Yt extends la{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,D){return new Yt(D)}}function gr(N,b,D){var k;rt((null===(k=D.url)||void 0===k?void 0:k.length)>0,N,"invalid-continue-uri"),rt(typeof D.dynamicLinkDomain>"u"||D.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),b.continueUrl=D.url,b.dynamicLinkDomain=D.dynamicLinkDomain,b.canHandleCodeInApp=D.handleCodeInApp,D.iOS&&(rt(D.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),b.iOSBundleId=D.iOS.bundleId),D.android&&(rt(D.android.packageName.length>0,N,"missing-android-pkg-name"),b.androidInstallApp=D.android.installApp,b.androidMinimumVersionCode=D.android.minimumVersion,b.androidPackageName=D.android.packageName)}function ua(N,b,D){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N),oe={requestType:"PASSWORD_RESET",email:b};D&&gr(k,oe,D),yield Ta(k,oe)})).apply(this,arguments)}function rs(N,b,D){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(N,b,D){yield bs((0,L.m9)(N),{oobCode:b,newPassword:D})})).apply(this,arguments)}function W(N,b){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(N,b){yield Ba((0,L.m9)(N),{oobCode:b})})).apply(this,arguments)}function ue(N,b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(N,b){const D=(0,L.m9)(N),k=yield bs(D,{oobCode:b}),oe=k.requestType;switch(rt(oe,D,"internal-error"),oe){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":rt(k.newEmail,D,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":rt(k.mfaInfo,D,"internal-error");default:rt(k.email,D,"internal-error")}let _e=null;return k.mfaInfo&&(_e=la._fromServerResponse(Rn(D),k.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.newEmail:k.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.email:k.newEmail)||null,multiFactorInfo:_e},operation:oe}})).apply(this,arguments)}function Z(N,b){return q.apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(N,b){const{data:D}=yield ue((0,L.m9)(N),b);return D.email})).apply(this,arguments)}function fe(N,b,D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,u.Z)(function*(N,b,D){const k=Rn(N),oe=yield Ms(k,{returnSecureToken:!0,email:b,password:D}),_e=yield js._fromIdTokenResponse(k,"signIn",oe);return yield k._updateCurrentUser(_e.user),_e})).apply(this,arguments)}function je(N,b,D){return Oi((0,L.m9)(N),Fr.credential(b,D))}function Tt(N,b,D){return _t.apply(this,arguments)}function _t(){return(_t=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N),oe={requestType:"EMAIL_SIGNIN",email:b};rt(D.handleCodeInApp,k,"argument-error"),D&&gr(k,oe,D),yield Vs(k,oe)})).apply(this,arguments)}function Bn(N,b){return"EMAIL_SIGNIN"===Oo.parseLink(b)?.operation}function Dn(N,b,D){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N),oe=Fr.credentialWithLink(b,D||Ht());return rt(oe._tenantId===(k.tenantId||null),k,"tenant-id-mismatch"),Oi(k,oe)})).apply(this,arguments)}function qn(N,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:createAuthUri",Fe(N,b))})).apply(this,arguments)}function zi(N,b){return _i.apply(this,arguments)}function _i(){return(_i=(0,u.Z)(function*(N,b){const k={identifier:b,continueUri:Kt()?Ht():"http://localhost"},{signinMethods:oe}=yield qn((0,L.m9)(N),k);return oe||[]})).apply(this,arguments)}function Ci(N,b){return is.apply(this,arguments)}function is(){return(is=(0,u.Z)(function*(N,b){const D=(0,L.m9)(N),oe={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};b&&gr(D.auth,oe,b);const{email:_e}=yield Bs(D.auth,oe);_e!==N.email&&(yield N.reload())})).apply(this,arguments)}function qr(N,b,D){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N),_e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield N.getIdToken(),newEmail:b};D&&gr(k.auth,_e,D);const{email:Et}=yield zs(k.auth,_e);Et!==N.email&&(yield N.reload())})).apply(this,arguments)}function jo(N,b){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(N,b){return st(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function qi(N,b){return $o.apply(this,arguments)}function $o(){return($o=(0,u.Z)(function*(N,{displayName:b,photoURL:D}){if(void 0===b&&void 0===D)return;const k=(0,L.m9)(N),_e={idToken:yield k.getIdToken(),displayName:b,photoUrl:D,returnSecureToken:!0},Et=yield kn(k,jo(k.auth,_e));k.displayName=Et.displayName||null,k.photoURL=Et.photoUrl||null;const nn=k.providerData.find(({providerId:Hn})=>"password"===Hn);nn&&(nn.displayName=k.displayName,nn.photoURL=k.photoURL),yield k._updateTokensIfNecessary(Et)})).apply(this,arguments)}function vo(N,b){return ne((0,L.m9)(N),b,null)}function F(N,b){return ne((0,L.m9)(N),null,b)}function ne(N,b,D){return $.apply(this,arguments)}function $(){return($=(0,u.Z)(function*(N,b,D){const{auth:k}=N,_e={idToken:yield N.getIdToken(),returnSecureToken:!0};b&&(_e.email=b),D&&(_e.password=D);const Et=yield kn(N,ho(k,_e));yield N._updateTokensIfNecessary(Et,!0)})).apply(this,arguments)}class Ve{constructor(b,D,k={}){this.isNewUser=b,this.providerId=D,this.profile=k}}class Ct extends Ve{constructor(b,D,k,oe){super(b,D,k),this.username=oe}}class Vt extends Ve{constructor(b,D){super(b,"facebook.com",D)}}class Fn extends Ct{constructor(b,D){super(b,"github.com",D,"string"==typeof D?.login?D?.login:null)}}class ai extends Ve{constructor(b,D){super(b,"google.com",D)}}class di extends Ct{constructor(b,D,k){super(b,"twitter.com",D,k)}}function li(N){const{user:b,_tokenResponse:D}=N;return b.isAnonymous&&!D?{providerId:null,isNewUser:!1,profile:null}:function ce(N){var b,D;if(!N)return null;const{providerId:k}=N,oe=N.rawUserInfo?JSON.parse(N.rawUserInfo):{},_e=N.isNewUser||"identitytoolkit#SignupNewUserResponse"===N.kind;if(!k&&N?.idToken){const Et=null===(D=null===(b=Tn(N.idToken))||void 0===b?void 0:b.firebase)||void 0===D?void 0:D.sign_in_provider;if(Et)return new Ve(_e,"anonymous"!==Et&&"custom"!==Et?Et:null)}if(!k)return null;switch(k){case"facebook.com":return new Vt(_e,oe);case"github.com":return new Fn(_e,oe);case"google.com":return new ai(_e,oe);case"twitter.com":return new di(_e,oe,N.screenName||null);case"custom":case"anonymous":return new Ve(_e,null);default:return new Ve(_e,k,oe)}}(D)}class os{constructor(b,D,k){this.type=b,this.credential=D,this.auth=k}static _fromIdtoken(b,D){return new os("enroll",b,D)}static _fromMfaPendingCredential(b){return new os("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var D,k;if(b?.multiFactorSession){if(null!==(D=b.multiFactorSession)&&void 0!==D&&D.pendingCredential)return os._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null!==(k=b.multiFactorSession)&&void 0!==k&&k.idToken)return os._fromIdtoken(b.multiFactorSession.idToken)}return null}}class Vl{constructor(b,D,k){this.session=b,this.hints=D,this.signInResolver=k}static _fromError(b,D){const k=Rn(b),oe=D.customData._serverResponse,_e=(oe.mfaInfo||[]).map(nn=>la._fromServerResponse(k,nn));rt(oe.mfaPendingCredential,k,"internal-error");const Et=os._fromMfaPendingCredential(oe.mfaPendingCredential);return new Vl(Et,_e,function(){var nn=(0,u.Z)(function*(Hn){const nr=yield Hn._process(k,Et);delete oe.mfaInfo,delete oe.mfaPendingCredential;const Ir=Object.assign(Object.assign({},oe),{idToken:nr.idToken,refreshToken:nr.refreshToken});switch(D.operationType){case"signIn":const ts=yield js._fromIdTokenResponse(k,D.operationType,Ir);return yield k._updateCurrentUser(ts.user),ts;case"reauthenticate":return rt(D.user,k,"internal-error"),js._forOperation(D.user,D.operationType,Ir);default:jt(k,"internal-error")}});return function(Hn){return nn.apply(this,arguments)}}())}resolveSignIn(b){var D=this;return(0,u.Z)(function*(){return D.signInResolver(b)})()}}function Go(N,b){var D;const k=(0,L.m9)(N),oe=b;return rt(b.customData.operationType,k,"argument-error"),rt(null===(D=oe.customData._serverResponse)||void 0===D?void 0:D.mfaPendingCredential,k,"argument-error"),Vl._fromError(k,oe)}function Xi(N,b){return st(N,"POST","/v2/accounts/mfaEnrollment:start",Fe(N,b))}class yl{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(D=>{D.mfaInfo&&(this.enrolledFactors=D.mfaInfo.map(k=>la._fromServerResponse(b.auth,k)))})}static _fromUser(b){return new yl(b)}getSession(){var b=this;return(0,u.Z)(function*(){return os._fromIdtoken(yield b.user.getIdToken(),b.user.auth)})()}enroll(b,D){var k=this;return(0,u.Z)(function*(){const oe=b,_e=yield k.getSession(),Et=yield kn(k.user,oe._process(k.user.auth,_e,D));return yield k.user._updateTokensIfNecessary(Et),k.user.reload()})()}unenroll(b){var D=this;return(0,u.Z)(function*(){const k="string"==typeof b?b:b.uid,oe=yield D.user.getIdToken(),_e=yield kn(D.user,function Gu(N,b){return st(N,"POST","/v2/accounts/mfaEnrollment:withdraw",Fe(N,b))}(D.user.auth,{idToken:oe,mfaEnrollmentId:k}));D.enrolledFactors=D.enrolledFactors.filter(({uid:Et})=>Et!==k),yield D.user._updateTokensIfNecessary(_e);try{yield D.user.reload()}catch(Et){if("auth/user-token-expired"!==Et?.code)throw Et}})()}}const lu=new WeakMap;function Cl(N){const b=(0,L.m9)(N);return lu.has(b)||lu.set(b,yl._fromUser(b)),lu.get(b)}const pa="__sak";class Sa{constructor(b,D){this.storageRetriever=b,this.type=D}_isAvailable(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(b,D){return this.storage.setItem(b,JSON.stringify(D)),Promise.resolve()}_get(b){const D=this.storage.getItem(b);return Promise.resolve(D?JSON.parse(D):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ts=(()=>{class N extends Sa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(D,k)=>this.onStorageEvent(D,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bu(){const N=(0,L.z$)();return be(N)||ve(N)}()&&function Zn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tn(),this._shouldAllowMigration=!0}forAllChangedKeys(D){for(const k of Object.keys(this.listeners)){const oe=this.storage.getItem(k),_e=this.localCache[k];oe!==_e&&D(k,_e,oe)}}onStorageEvent(D,k=!1){if(!D.key)return void this.forAllChangedKeys((nn,Hn,nr)=>{this.notifyListeners(nn,nr)});const oe=D.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nn=this.storage.getItem(oe);if(D.newValue!==nn)null!==D.newValue?this.storage.setItem(oe,D.newValue):this.storage.removeItem(oe);else if(this.localCache[oe]===D.newValue&&!k)return}const _e=()=>{const nn=this.storage.getItem(oe);!k&&this.localCache[oe]===nn||this.notifyListeners(oe,nn)},Et=this.storage.getItem(oe);!function ft(){return(0,L.w1)()&&10===document.documentMode}()||Et===D.newValue||D.newValue===D.oldValue?_e():setTimeout(_e,10)}notifyListeners(D,k){this.localCache[D]=k;const oe=this.listeners[D];if(oe)for(const _e of Array.from(oe))_e(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((D,k,oe)=>{this.onStorageEvent(new StorageEvent("storage",{key:D,oldValue:k,newValue:oe}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(D,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[D]||(this.listeners[D]=new Set,this.localCache[D]=this.storage.getItem(D)),this.listeners[D].add(k)}_removeListener(D,k){this.listeners[D]&&(this.listeners[D].delete(k),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(D,k){var oe=()=>super._set,_e=this;return(0,u.Z)(function*(){yield oe().call(_e,D,k),_e.localCache[D]=JSON.stringify(k)})()}_get(D){var k=()=>super._get,oe=this;return(0,u.Z)(function*(){const _e=yield k().call(oe,D);return oe.localCache[D]=JSON.stringify(_e),_e})()}_remove(D){var k=()=>super._remove,oe=this;return(0,u.Z)(function*(){yield k().call(oe,D),delete oe.localCache[D]})()}}return N.type="LOCAL",N})(),ga=(()=>{class N extends Sa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(D,k){}_removeListener(D,k){}}return N.type="SESSION",N})();let rn=(()=>{class N{constructor(D){this.eventTarget=D,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(D){const k=this.receivers.find(_e=>_e.isListeningto(D));if(k)return k;const oe=new N(D);return this.receivers.push(oe),oe}isListeningto(D){return this.eventTarget===D}handleEvent(D){var k=this;return(0,u.Z)(function*(){const oe=D,{eventId:_e,eventType:Et,data:nn}=oe.data,Hn=k.handlersMap[Et];if(!Hn?.size)return;oe.ports[0].postMessage({status:"ack",eventId:_e,eventType:Et});const nr=Array.from(Hn).map(function(){var ts=(0,u.Z)(function*(Eo){return Eo(oe.origin,nn)});return function(Eo){return ts.apply(this,arguments)}}()),Ir=yield function zu(N){return Promise.all(N.map(function(){var b=(0,u.Z)(function*(D){try{return{fulfilled:!0,value:yield D}}catch(k){return{fulfilled:!1,reason:k}}});return function(D){return b.apply(this,arguments)}}()))}(nr);oe.ports[0].postMessage({status:"done",eventId:_e,eventType:Et,response:Ir})})()}_subscribe(D,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[D]||(this.handlersMap[D]=new Set),this.handlersMap[D].add(k)}_unsubscribe(D,k){this.handlersMap[D]&&k&&this.handlersMap[D].delete(k),(!k||0===this.handlersMap[D].size)&&delete this.handlersMap[D],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return N.receivers=[],N})();function Hi(N="",b=10){let D="";for(let k=0;k<b;k++)D+=Math.floor(10*Math.random());return N+D}class cl{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,D,k=50){var oe=this;return(0,u.Z)(function*(){const _e=typeof MessageChannel<"u"?new MessageChannel:null;if(!_e)throw new Error("connection_unavailable");let Et,nn;return new Promise((Hn,nr)=>{const Ir=Hi("",20);_e.port1.start();const ts=setTimeout(()=>{nr(new Error("unsupported_event"))},k);nn={messageChannel:_e,onMessage(Eo){const qa=Eo;if(qa.data.eventId===Ir)switch(qa.data.status){case"ack":clearTimeout(ts),Et=setTimeout(()=>{nr(new Error("timeout"))},3e3);break;case"done":clearTimeout(Et),Hn(qa.data.response);break;default:clearTimeout(ts),clearTimeout(Et),nr(new Error("invalid_response"))}}},oe.handlers.add(nn),_e.port1.addEventListener("message",nn.onMessage),oe.target.postMessage({eventType:b,eventId:Ir,data:D},[_e.port2])}).finally(()=>{nn&&oe.removeMessageHandler(nn)})})()}}function us(){return window}function wn(){return typeof us().WorkerGlobalScope<"u"&&"function"==typeof us().importScripts}function on(){return(on=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ii="firebaseLocalStorageDb",Is="firebaseLocalStorage",ma="fbase_key";class Aa{constructor(b){this.request=b}toPromise(){return new Promise((b,D)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{D(this.request.error)})})}}function nl(N,b){return N.transaction([Is],b?"readwrite":"readonly").objectStore(Is)}function Sl(){const N=indexedDB.open(Ii,1);return new Promise((b,D)=>{N.addEventListener("error",()=>{D(N.error)}),N.addEventListener("upgradeneeded",()=>{const k=N.result;try{k.createObjectStore(Is,{keyPath:ma})}catch(oe){D(oe)}}),N.addEventListener("success",(0,u.Z)(function*(){const k=N.result;k.objectStoreNames.contains(Is)?b(k):(k.close(),yield function qs(){const N=indexedDB.deleteDatabase(Ii);return new Aa(N).toPromise()}(),b(yield Sl()))}))})}function Hl(N,b,D){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(N,b,D){const k=nl(N,!0).put({[ma]:b,value:D});return new Aa(k).toPromise()})).apply(this,arguments)}function Al(){return(Al=(0,u.Z)(function*(N,b){const D=nl(N,!1).get(b),k=yield new Aa(D).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function Er(N,b){const D=nl(N,!0).delete(b);return new Aa(D).toPromise()}const zn=(()=>{class N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var D=this;return(0,u.Z)(function*(){return D.db||(D.db=yield Sl()),D.db})()}_withRetries(D){var k=this;return(0,u.Z)(function*(){let oe=0;for(;;)try{const _e=yield k._openDb();return yield D(_e)}catch(_e){if(oe++>3)throw _e;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var D=this;return(0,u.Z)(function*(){return wn()?D.initializeReceiver():D.initializeSender()})()}initializeReceiver(){var D=this;return(0,u.Z)(function*(){D.receiver=rn._getInstance(function Zt(){return wn()?self:null}()),D.receiver._subscribe("keyChanged",function(){var k=(0,u.Z)(function*(oe,_e){return{keyProcessed:(yield D._poll()).includes(_e.key)}});return function(oe,_e){return k.apply(this,arguments)}}()),D.receiver._subscribe("ping",function(){var k=(0,u.Z)(function*(oe,_e){return["keyChanged"]});return function(oe,_e){return k.apply(this,arguments)}}())})()}initializeSender(){var D=this;return(0,u.Z)(function*(){var k,oe;if(D.activeServiceWorker=yield function Il(){return on.apply(this,arguments)}(),!D.activeServiceWorker)return;D.sender=new cl(D.activeServiceWorker);const _e=yield D.sender._send("ping",{},800);!_e||(null===(k=_e[0])||void 0===k?void 0:k.fulfilled)&&(null===(oe=_e[0])||void 0===oe?void 0:oe.value.includes("keyChanged"))&&(D.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(D){var k=this;return(0,u.Z)(function*(){if(k.sender&&k.activeServiceWorker&&function kt(){var N;return(null===(N=navigator?.serviceWorker)||void 0===N?void 0:N.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:D},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const D=yield Sl();return yield Hl(D,pa,"1"),yield Er(D,pa),!0}catch{}return!1})()}_withPendingWrite(D){var k=this;return(0,u.Z)(function*(){k.pendingWrites++;try{yield D()}finally{k.pendingWrites--}})()}_set(D,k){var oe=this;return(0,u.Z)(function*(){return oe._withPendingWrite((0,u.Z)(function*(){return yield oe._withRetries(_e=>Hl(_e,D,k)),oe.localCache[D]=k,oe.notifyServiceWorker(D)}))})()}_get(D){var k=this;return(0,u.Z)(function*(){const oe=yield k._withRetries(_e=>function wu(N,b){return Al.apply(this,arguments)}(_e,D));return k.localCache[D]=oe,oe})()}_remove(D){var k=this;return(0,u.Z)(function*(){return k._withPendingWrite((0,u.Z)(function*(){return yield k._withRetries(oe=>Er(oe,D)),delete k.localCache[D],k.notifyServiceWorker(D)}))})()}_poll(){var D=this;return(0,u.Z)(function*(){const k=yield D._withRetries(Et=>{const nn=nl(Et,!1).getAll();return new Aa(nn).toPromise()});if(!k)return[];if(0!==D.pendingWrites)return[];const oe=[],_e=new Set;for(const{fbase_key:Et,value:nn}of k)_e.add(Et),JSON.stringify(D.localCache[Et])!==JSON.stringify(nn)&&(D.notifyListeners(Et,nn),oe.push(Et));for(const Et of Object.keys(D.localCache))D.localCache[Et]&&!_e.has(Et)&&(D.notifyListeners(Et,null),oe.push(Et));return oe})()}notifyListeners(D,k){this.localCache[D]=k;const oe=this.listeners[D];if(oe)for(const _e of Array.from(oe))_e(k)}startPolling(){var D=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return D._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(D,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[D]||(this.listeners[D]=new Set,this._get(D)),this.listeners[D].add(k)}_removeListener(D,k){this.listeners[D]&&(this.listeners[D].delete(k),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return N.type="LOCAL",N})();function Ys(N,b){return st(N,"POST","/v2/accounts/mfaSignIn:start",Fe(N,b))}function ui(){return(ui=(0,u.Z)(function*(N){return(yield st(N,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(N){return new Promise((b,D)=>{const k=document.createElement("script");k.setAttribute("src",N),k.onload=b,k.onerror=oe=>{const _e=gt("internal-error");_e.customData=oe,D(_e)},k.type="text/javascript",k.charset="UTF-8",function _n(){var N,b;return null!==(b=null===(N=document.getElementsByTagName("head"))||void 0===N?void 0:N[0])&&void 0!==b?b:document}().appendChild(k)})}function Na(N){return`__${N}${Math.floor(1e6*Math.random())}`}const ko=1e12;class dl{constructor(b){this.auth=b,this.counter=ko,this._widgets=new Map}render(b,D){const k=this.counter;return this._widgets.set(k,new Pi(b,this.auth.name,D||{})),this.counter++,k}reset(b){var D;const k=b||ko;null===(D=this._widgets.get(k))||void 0===D||D.delete(),this._widgets.delete(k)}getResponse(b){var D;return(null===(D=this._widgets.get(b||ko))||void 0===D?void 0:D.getResponse())||""}execute(b){var D=this;return(0,u.Z)(function*(){var k;return null===(k=D._widgets.get(b||ko))||void 0===k||k.execute(),""})()}}class Pi{constructor(b,D,k){this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const oe="string"==typeof b?document.getElementById(b):b;rt(oe,"argument-error",{appName:D}),this.container=oe,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qu(N){const b=[],D="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<N;k++)b.push(D.charAt(Math.floor(Math.random()*D.length)));return b.join("")}(50);const{callback:b,"expired-callback":D}=this.params;if(b)try{b(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,D)try{D()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eu=Na("rcb"),ja=new ge(3e4,6e4);class Kc{constructor(){var b;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(b=us().grecaptcha)||void 0===b||!b.render)}load(b,D=""){return rt(function uu(N){return N.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(N)}(D),b,"argument-error"),this.shouldResolveImmediately(D)?Promise.resolve(us().grecaptcha):new Promise((k,oe)=>{const _e=us().setTimeout(()=>{oe(gt(b,"network-request-failed"))},ja.get());us()[Eu]=()=>{us().clearTimeout(_e),delete us()[Eu];const nn=us().grecaptcha;if(!nn)return void oe(gt(b,"internal-error"));const Hn=nn.render;nn.render=(nr,Ir)=>{const ts=Hn(nr,Ir);return this.counter++,ts},this.hostLanguage=D,k(nn)},go(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Eu,render:"explicit",hl:D})}`).catch(()=>{clearTimeout(_e),oe(gt(b,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){var D;return!(null===(D=us().grecaptcha)||void 0===D||!D.render)&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Tu{load(b){return(0,u.Z)(function*(){return new dl(b)})()}clearedOneInstance(){}}const rl="recaptcha",At={theme:"light",type:"image"};class Cu{constructor(b,D=Object.assign({},At),k){this.parameters=D,this.type=rl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(k),this.isInvisible="invisible"===this.parameters.size,rt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const oe="string"==typeof b?document.getElementById(b):b;rt(oe,this.auth,"argument-error"),this.container=oe,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tu:new Kc,this.validateStartingState()}verify(){var b=this;return(0,u.Z)(function*(){b.assertNotDestroyed();const D=yield b.render(),k=b.getAssertedRecaptcha();return k.getResponse(D)||new Promise(_e=>{const Et=nn=>{!nn||(b.tokenChangeListeners.delete(Et),_e(nn))};b.tokenChangeListeners.add(Et),b.isInvisible&&k.execute(D)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){rt(!this.parameters.sitekey,this.auth,"argument-error"),rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),rt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return D=>{if(this.tokenChangeListeners.forEach(k=>k(D)),"function"==typeof b)b(D);else if("string"==typeof b){const k=us()[b];"function"==typeof k&&k(D)}}}assertNotDestroyed(){rt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,u.Z)(function*(){if(yield b.init(),!b.widgetId){let D=b.container;if(!b.isInvisible){const k=document.createElement("div");D.appendChild(k),D=k}b.widgetId=b.getAssertedRecaptcha().render(D,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,u.Z)(function*(){rt(Kt()&&!wn(),b.auth,"internal-error"),yield function yi(){let N=null;return new Promise(b=>{"complete"!==document.readyState?(N=()=>b(),window.addEventListener("load",N)):b()}).catch(b=>{throw N&&window.removeEventListener("load",N),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const D=yield function jl(N){return ui.apply(this,arguments)}(b.auth);rt(D,b.auth,"internal-error"),b.parameters.sitekey=D})()}getAssertedRecaptcha(){return rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(b,D){this.verificationId=b,this.onConfirmation=D}confirm(b){const D=Vi._fromVerification(this.verificationId,b);return this.onConfirmation(D)}}function hl(N,b,D){return sl.apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(N,b,D){const k=Rn(N),oe=yield xa(k,b,(0,L.m9)(D));return new il(oe,_e=>Oi(k,_e))})).apply(this,arguments)}function Yu(N,b,D){return Os.apply(this,arguments)}function Os(){return(Os=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N);yield Po(!1,k,"phone");const oe=yield xa(k.auth,b,(0,L.m9)(D));return new il(oe,_e=>cr(k,_e))})).apply(this,arguments)}function Oa(N,b,D){return $l.apply(this,arguments)}function $l(){return($l=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N),oe=yield xa(k.auth,b,(0,L.m9)(D));return new il(oe,_e=>aa(k,_e))})).apply(this,arguments)}function xa(N,b,D){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)(function*(N,b,D){var k;const oe=yield D.verify();try{let _e;if(rt("string"==typeof oe,N,"argument-error"),rt(D.type===rl,N,"argument-error"),_e="string"==typeof b?{phoneNumber:b}:b,"session"in _e){const Et=_e.session;if("phoneNumber"in _e)return rt("enroll"===Et.type,N,"internal-error"),(yield Xi(N,{idToken:Et.credential,phoneEnrollmentInfo:{phoneNumber:_e.phoneNumber,recaptchaToken:oe}})).phoneSessionInfo.sessionInfo;{rt("signin"===Et.type,N,"internal-error");const nn=(null===(k=_e.multiFactorHint)||void 0===k?void 0:k.uid)||_e.multiFactorUid;return rt(nn,N,"missing-multi-factor-info"),(yield Ys(N,{mfaPendingCredential:Et.credential,mfaEnrollmentId:nn,phoneSignInInfo:{recaptchaToken:oe}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Et}=yield vt(N,{phoneNumber:_e.phoneNumber,recaptchaToken:oe});return Et}}finally{D._reset()}})).apply(this,arguments)}function M(N,b){return S.apply(this,arguments)}function S(){return(S=(0,u.Z)(function*(N,b){yield xo((0,L.m9)(N),b)})).apply(this,arguments)}let U=(()=>{class N{constructor(D){this.providerId=N.PROVIDER_ID,this.auth=Rn(D)}verifyPhoneNumber(D,k){return xa(this.auth,D,(0,L.m9)(k))}static credential(D,k){return Vi._fromVerification(D,k)}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{phoneNumber:k,temporaryProof:oe}=D;return k&&oe?Vi._fromTokenResponse(k,oe):null}}return N.PROVIDER_ID="phone",N.PHONE_SIGN_IN_METHOD="phone",N})();function K(N,b){return b?Ge(b):(rt(N._popupRedirectResolver,N,"argument-error"),N._popupRedirectResolver)}class ae extends vs{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return Uo(b,this._buildIdpRequest())}_linkToIdToken(b,D){return Uo(b,this._buildIdpRequest(D))}_getReauthenticationResolver(b){return Uo(b,this._buildIdpRequest())}_buildIdpRequest(b){const D={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(D.idToken=b),D}}function Re(N){return Ds(N.auth,new ae(N),N.bypassAuthState)}function xe(N){const{auth:b,user:D}=N;return rt(D,b,"internal-error"),Ho(D,new ae(N),N.bypassAuthState)}function Lt(N){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(N){const{auth:b,user:D}=N;return rt(D,b,"internal-error"),xo(D,new ae(N),N.bypassAuthState)})).apply(this,arguments)}class Cr{constructor(b,D,k,oe,_e=!1){this.auth=b,this.resolver=k,this.user=oe,this.bypassAuthState=_e,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(D)?D:[D]}execute(){var b=this;return new Promise(function(){var D=(0,u.Z)(function*(k,oe){b.pendingPromise={resolve:k,reject:oe};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(_e){b.reject(_e)}});return function(k,oe){return D.apply(this,arguments)}}())}onAuthEvent(b){var D=this;return(0,u.Z)(function*(){const{urlResponse:k,sessionId:oe,postBody:_e,tenantId:Et,error:nn,type:Hn}=b;if(nn)return void D.reject(nn);const nr={auth:D.auth,requestUri:k,sessionId:oe,tenantId:Et||void 0,postBody:_e||void 0,user:D.user,bypassAuthState:D.bypassAuthState};try{D.resolve(yield D.getIdpTask(Hn)(nr))}catch(Ir){D.reject(Ir)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return Re;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return xe;default:jt(this.auth,"internal-error")}}resolve(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gn=new ge(2e3,1e4);function ki(N,b,D){return ms.apply(this,arguments)}function ms(){return(ms=(0,u.Z)(function*(N,b,D){const k=Rn(N);ze(N,b,Xn);const oe=K(k,D);return new ya(k,"signInViaPopup",b,oe).executeNotNull()})).apply(this,arguments)}function Ri(N,b,D){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N);ze(k.auth,b,Xn);const oe=K(k.auth,D);return new ya(k.auth,"reauthViaPopup",b,oe,k).executeNotNull()})).apply(this,arguments)}function _a(N,b,D){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N);ze(k.auth,b,Xn);const oe=K(k.auth,D);return new ya(k.auth,"linkViaPopup",b,oe,k).executeNotNull()})).apply(this,arguments)}let ya=(()=>{class N extends Cr{constructor(D,k,oe,_e,Et){super(D,k,_e,Et),this.provider=oe,this.authWindow=null,this.pollId=null,N.currentPopupAction&&N.currentPopupAction.cancel(),N.currentPopupAction=this}executeNotNull(){var D=this;return(0,u.Z)(function*(){const k=yield D.execute();return rt(k,D.auth,"internal-error"),k})()}onExecution(){var D=this;return(0,u.Z)(function*(){bt(1===D.filter.length,"Popup operations only handle one event");const k=Hi();D.authWindow=yield D.resolver._openPopup(D.auth,D.provider,D.filter[0],k),D.authWindow.associatedEvent=k,D.resolver._originValidation(D.auth).catch(oe=>{D.reject(oe)}),D.resolver._isIframeWebStorageSupported(D.auth,oe=>{oe||D.reject(gt(D.auth,"web-storage-unsupported"))}),D.pollUserCancellation()})()}get eventId(){var D;return(null===(D=this.authWindow)||void 0===D?void 0:D.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,N.currentPopupAction=null}pollUserCancellation(){const D=()=>{var k,oe;this.pollId=null!==(oe=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==oe&&oe.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(D,gn.get())};D()}}return N.currentPopupAction=null,N})();const so=new Map;class $a extends Cr{constructor(b,D,k=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],D,void 0,k),this.eventId=null}execute(){var b=()=>super.execute,D=this;return(0,u.Z)(function*(){let k=so.get(D.auth._key());if(!k){try{const _e=(yield function Qo(N,b){return zo.apply(this,arguments)}(D.resolver,D.auth))?yield b().call(D):null;k=()=>Promise.resolve(_e)}catch(oe){k=()=>Promise.reject(oe)}so.set(D.auth._key(),k)}return D.bypassAuthState||so.set(D.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(b){var D=()=>super.onAuthEvent,k=this;return(0,u.Z)(function*(){if("signInViaRedirect"===b.type)return D().call(k,b);if("unknown"!==b.type){if(b.eventId){const oe=yield k.auth._redirectUserForId(b.eventId);if(oe)return k.user=oe,D().call(k,b);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function zo(){return(zo=(0,u.Z)(function*(N,b){const D=Wa(b),k=Jo(N);if(!(yield k._isAvailable()))return!1;const oe="true"===(yield k._get(D));return yield k._remove(D),oe})).apply(this,arguments)}function Io(N,b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,u.Z)(function*(N,b){return Jo(N)._set(Wa(b),"true")})).apply(this,arguments)}function ol(){so.clear()}function cu(N,b){so.set(N._key(),b)}function Jo(N){return Ge(N._redirectPersistence)}function Wa(N){return Pe("pendingRedirect",N.config.apiKey,N.name)}function du(N,b,D){return function Zs(N,b,D){return fl.apply(this,arguments)}(N,b,D)}function fl(){return(fl=(0,u.Z)(function*(N,b,D){const k=Rn(N);ze(N,b,Xn);const oe=K(k,D);return yield Io(oe,k),oe._openRedirect(k,b,"signInViaRedirect")})).apply(this,arguments)}function H(N,b,D){return function Y(N,b,D){return le.apply(this,arguments)}(N,b,D)}function le(){return(le=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N);ze(k.auth,b,Xn);const oe=K(k.auth,D);yield Io(oe,k.auth);const _e=yield Gr(k);return oe._openRedirect(k.auth,b,"reauthViaRedirect",_e)})).apply(this,arguments)}function Ce(N,b,D){return function pt(N,b,D){return Rt.apply(this,arguments)}(N,b,D)}function Rt(){return(Rt=(0,u.Z)(function*(N,b,D){const k=(0,L.m9)(N);ze(k.auth,b,Xn);const oe=K(k.auth,D);yield Po(!1,k,b.providerId),yield Io(oe,k.auth);const _e=yield Gr(k);return oe._openRedirect(k.auth,b,"linkViaRedirect",_e)})).apply(this,arguments)}function sn(N,b){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(N,b){return yield Rn(N)._initializationPromise,Qn(N,b,!1)})).apply(this,arguments)}function Qn(N,b){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(N,b,D=!1){const k=Rn(N),oe=K(k,b),Et=yield new $a(k,oe,D).execute();return Et&&!D&&(delete Et.user._redirectEventId,yield k._persistUserIfCurrent(Et.user),yield k._setRedirectUser(null,b)),Et})).apply(this,arguments)}function Gr(N){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(N){const b=Hi(`${N.uid}:::`);return N._redirectEventId=b,yield N.auth._setRedirectUser(N),yield N.auth._persistUserIfCurrent(N),b})).apply(this,arguments)}class cs{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let D=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(b,k)&&(D=!0,this.sendToConsumer(b,k),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Gl(N){switch(N.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nl(N);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,D||(this.queuedRedirectEvent=b,D=!0)),D}sendToConsumer(b,D){var k;if(b.error&&!Nl(b)){const oe=(null===(k=b.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";D.onError(gt(this.auth,oe))}else D.onAuthEvent(b)}isEventForConsumer(b,D){const k=null===D.eventId||!!b.eventId&&b.eventId===D.eventId;return D.filter.includes(b.type)&&k}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(b))}saveEventToCache(b){this.cachedEventUids.add(za(b)),this.lastProcessedEventTime=Date.now()}}function za(N){return[N.type,N.eventId,N.sessionId,N.tenantId].filter(b=>b).join("-")}function Nl({type:N,error:b}){return"unknown"===N&&"auth/no-auth-event"===b?.code}function bo(N){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(N,b={}){return st(N,"GET","/v1/projects",b)})).apply(this,arguments)}const qc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yc=/^https?/;function sh(){return(sh=(0,u.Z)(function*(N){if(N.config.emulator)return;const{authorizedDomains:b}=yield bo(N);for(const D of b)try{if(rp(D))return}catch{}jt(N,"unauthorized-domain")})).apply(this,arguments)}function rp(N){const b=Ht(),{protocol:D,hostname:k}=new URL(b);if(N.startsWith("chrome-extension://")){const Et=new URL(N);return""===Et.hostname&&""===k?"chrome-extension:"===D&&N.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===D&&Et.hostname===k}if(!Yc.test(D))return!1;if(qc.test(N))return k===N;const oe=N.replace(/\./g,"\\.");return new RegExp("^(.+\\."+oe+"|"+oe+")$","i").test(k)}const yd=new ge(3e4,6e4);function vd(){const N=us().___jsl;if(N?.H)for(const b of Object.keys(N.H))if(N.H[b].r=N.H[b].r||[],N.H[b].L=N.H[b].L||[],N.H[b].r=[...N.H[b].L],N.CP)for(let D=0;D<N.CP.length;D++)N.CP[D]=null}let Su=null;function oh(N){return Su=Su||function Vh(N){return new Promise((b,D)=>{var k,oe,_e;function Et(){vd(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{vd(),D(gt(N,"network-request-failed"))},timeout:yd.get()})}if(null!==(oe=null===(k=us().gapi)||void 0===k?void 0:k.iframes)&&void 0!==oe&&oe.Iframe)b(gapi.iframes.getContext());else{if(null===(_e=us().gapi)||void 0===_e||!_e.load){const nn=Na("iframefcb");return us()[nn]=()=>{gapi.load?Et():D(gt(N,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${nn}`).catch(Hn=>D(Hn))}Et()}}).catch(b=>{throw Su=null,b})}(N),Su}const Zu=new ge(5e3,15e3),Au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function es(N){const b=N.config;rt(b.authDomain,N,"auth-domain-config-required");const D=b.emulator?ie(b,"emulator/auth/iframe"):`https://${N.config.authDomain}/__/auth/iframe`,k={apiKey:b.apiKey,appName:N.name,v:ee.SDK_VERSION},oe=Xo.get(N.config.apiHost);oe&&(k.eid=oe);const _e=N._getFrameworks();return _e.length&&(k.fw=_e.join(",")),`${D}?${(0,L.xO)(k).slice(1)}`}function bl(){return bl=(0,u.Z)(function*(N){const b=yield oh(N),D=us().gapi;return rt(D,N,"internal-error"),b.open({where:document.body,url:es(N),messageHandlersFilter:D.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Au,dontclear:!0},k=>new Promise(function(){var oe=(0,u.Z)(function*(_e,Et){yield k.restyle({setHideOnLeave:!1});const nn=gt(N,"network-request-failed"),Hn=us().setTimeout(()=>{Et(nn)},Zu.get());function nr(){us().clearTimeout(Hn),_e(k)}k.ping(nr).then(nr,()=>{Et(nn)})});return function(_e,Et){return oe.apply(this,arguments)}}()))}),bl.apply(this,arguments)}const wl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dc{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ju(N,b,D,k,oe,_e){rt(N.config.authDomain,N,"auth-domain-config-required"),rt(N.config.apiKey,N,"invalid-api-key");const Et={apiKey:N.config.apiKey,appName:N.name,authType:D,redirectUrl:k,v:ee.SDK_VERSION,eventId:oe};if(b instanceof Xn){b.setDefaultLanguage(N.languageCode),Et.providerId=b.providerId||"",(0,L.xb)(b.getCustomParameters())||(Et.customParameters=JSON.stringify(b.getCustomParameters()));for(const[Hn,nr]of Object.entries(_e||{}))Et[Hn]=nr}if(b instanceof fs){const Hn=b.getScopes().filter(nr=>""!==nr);Hn.length>0&&(Et.scopes=Hn.join(","))}N.tenantId&&(Et.tid=N.tenantId);const nn=Et;for(const Hn of Object.keys(nn))void 0===nn[Hn]&&delete nn[Hn];return`${function Zc({config:N}){return N.emulator?ie(N,"emulator/auth/handler"):`https://${N.authDomain}/__/auth/handler`}(N)}?${(0,L.xO)(nn).slice(1)}`}const El="webStorageSupport",qo=class uh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ga,this._completeRedirectFn=Qn,this._overrideRedirectResult=cu}_openPopup(b,D,k,oe){var _e=this;return(0,u.Z)(function*(){var Et;bt(null===(Et=_e.eventManagers[b._key()])||void 0===Et?void 0:Et.manager,"_initialize() not called before _openPopup()");const nn=Ju(b,D,k,Ht(),oe);return function Qu(N,b,D,k=500,oe=600){const _e=Math.max((window.screen.availHeight-oe)/2,0).toString(),Et=Math.max((window.screen.availWidth-k)/2,0).toString();let nn="";const Hn=Object.assign(Object.assign({},wl),{width:k.toString(),height:oe.toString(),top:_e,left:Et}),nr=(0,L.z$)().toLowerCase();D&&(nn=ht(nr)?"_blank":D),se(nr)&&(b=b||"http://localhost",Hn.scrollbars="yes");const Ir=Object.entries(Hn).reduce((Eo,[qa,Dl])=>`${Eo}${qa}=${Dl},`,"");if(function tt(N=(0,L.z$)()){var b;return ve(N)&&!(null===(b=window.navigator)||void 0===b||!b.standalone)}(nr)&&"_self"!==nn)return function ah(N,b){const D=document.createElement("a");D.href=N,D.target=b;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),D.dispatchEvent(k)}(b||"",nn),new Dc(null);const ts=window.open(b||"",nn,Ir);rt(ts,N,"popup-blocked");try{ts.focus()}catch{}return new Dc(ts)}(b,nn,Hi())})()}_openRedirect(b,D,k,oe){var _e=this;return(0,u.Z)(function*(){return yield _e._originValidation(b),function fn(N){us().location.href=N}(Ju(b,D,k,Ht(),oe)),new Promise(()=>{})})()}_initialize(b){const D=b._key();if(this.eventManagers[D]){const{manager:oe,promise:_e}=this.eventManagers[D];return oe?Promise.resolve(oe):(bt(_e,"If manager is not set, promise should be"),_e)}const k=this.initAndGetManager(b);return this.eventManagers[D]={promise:k},k.catch(()=>{delete this.eventManagers[D]}),k}initAndGetManager(b){var D=this;return(0,u.Z)(function*(){const k=yield function Nu(N){return bl.apply(this,arguments)}(b),oe=new cs(b);return k.register("authEvent",_e=>(rt(_e?.authEvent,b,"invalid-auth-event"),{status:oe.onEvent(_e.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),D.eventManagers[b._key()]={manager:oe},D.iframes[b._key()]=k,oe})()}_isIframeWebStorageSupported(b,D){this.iframes[b._key()].send(El,{type:El},oe=>{var _e;const Et=null===(_e=oe?.[0])||void 0===_e?void 0:_e[El];void 0!==Et&&D(!!Et),jt(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const D=b._key();return this.originValidationPromises[D]||(this.originValidationPromises[D]=function Bh(N){return sh.apply(this,arguments)}(b)),this.originValidationPromises[D]}get _shouldInitProactively(){return tn()||be()||ve()}};class Ru extends class Wl{constructor(b){this.factorId=b}_process(b,D,k){switch(D.type){case"enroll":return this._finalizeEnroll(b,D.credential,k);case"signin":return this._finalizeSignIn(b,D.credential);default:return Ue("unexpected MultiFactorSessionType")}}}{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new Ru(b)}_finalizeEnroll(b,D,k){return function Ul(N,b){return st(N,"POST","/v2/accounts/mfaEnrollment:finalize",Fe(N,b))}(b,{idToken:D,displayName:k,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,D){return function ti(N,b){return st(N,"POST","/v2/accounts/mfaSignIn:finalize",Fe(N,b))}(b,{mfaPendingCredential:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ch=(()=>{class N{constructor(){}static assertion(D){return Ru._fromCredential(D)}}return N.FACTOR_ID="phone",N})();var Qc="@firebase/auth";class Lo{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var D=this;return(0,u.Z)(function*(){return D.assertAuthConfigured(),yield D.auth._initializationPromise,D.auth.currentUser?{accessToken:yield D.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const D=this.auth.onIdTokenChanged(k=>{b(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(b,D),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const D=this.internalListeners.get(b);!D||(this.internalListeners.delete(b),D(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,L.Pz)("authIdTokenMaxAge"),function al(N){(0,ee._registerComponent)(new Me.wA("auth",(b,{options:D})=>{const k=b.getProvider("app").getImmediate(),oe=b.getProvider("heartbeat"),{apiKey:_e,authDomain:Et}=k.options;return((nn,Hn)=>{rt(_e&&!_e.includes(":"),"invalid-api-key",{appName:nn.name}),rt(!Et?.includes(":"),"argument-error",{appName:nn.name});const nr={apiKey:_e,authDomain:Et,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(N)},Ir=new gi(nn,Hn,nr);return function nt(N,b){const D=b?.persistence||[],k=(Array.isArray(D)?D:[D]).map(Ge);b?.errorMap&&N._updateErrorMap(b.errorMap),N._initializeWithPersistence(k,b?.popupRedirectResolver)}(Ir,D),Ir})(k,oe)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,D,k)=>{b.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new Me.wA("auth-internal",b=>{const D=Rn(b.getProvider("auth").getImmediate());return new Lo(D)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Qc,"0.21.0",function Tc(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,ee.registerVersion)(Qc,"0.21.0","esm2017")}("Browser")},2090:(hn,dt,B)=>{B.d(dt,{$s:()=>En,BH:()=>en,DV:()=>Wn,Dv:()=>xn,G6:()=>ze,GJ:()=>br,L:()=>ke,LL:()=>Le,Pz:()=>Mt,Sg:()=>ge,UG:()=>lt,UI:()=>Tr,US:()=>Me,Wj:()=>Vn,Wl:()=>Xt,Yr:()=>qe,ZB:()=>ye,ZR:()=>Bt,aH:()=>Mn,b$:()=>ut,cI:()=>st,dS:()=>vn,eu:()=>rt,g5:()=>ee,gK:()=>Mr,gQ:()=>Kn,h$:()=>We,hl:()=>$t,hu:()=>L,jU:()=>xt,lb:()=>ci,m9:()=>tr,ne:()=>pr,p$:()=>we,pd:()=>ji,r3:()=>Nr,ru:()=>yt,tV:()=>Je,uI:()=>mt,ug:()=>Di,vZ:()=>un,w1:()=>jt,w9:()=>ii,xO:()=>ur,xb:()=>sr,z$:()=>Nt,zI:()=>Ue,zd:()=>Xr});const L=function(Be,Pe){if(!Be)throw ee(Pe)},ee=function(Be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Be)},Se=function(Be){const Pe=[];let Ze=0;for(let Te=0;Te<Be.length;Te++){let se=Be.charCodeAt(Te);se<128?Pe[Ze++]=se:se<2048?(Pe[Ze++]=se>>6|192,Pe[Ze++]=63&se|128):55296==(64512&se)&&Te+1<Be.length&&56320==(64512&Be.charCodeAt(Te+1))?(se=65536+((1023&se)<<10)+(1023&Be.charCodeAt(++Te)),Pe[Ze++]=se>>18|240,Pe[Ze++]=se>>12&63|128,Pe[Ze++]=se>>6&63|128,Pe[Ze++]=63&se|128):(Pe[Ze++]=se>>12|224,Pe[Ze++]=se>>6&63|128,Pe[Ze++]=63&se|128)}return Pe},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Be,Pe){if(!Array.isArray(Be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ze=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let se=0;se<Be.length;se+=3){const be=Be[se],ht=se+1<Be.length,qt=ht?Be[se+1]:0,bn=se+2<Be.length,Nn=bn?Be[se+2]:0;let pe=(15&qt)<<2|Nn>>6,tt=63&Nn;bn||(tt=64,ht||(pe=64)),Te.push(Ze[be>>2],Ze[(3&be)<<4|qt>>4],Ze[pe],Ze[tt])}return Te.join("")},encodeString(Be,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa(Be):this.encodeByteArray(Se(Be),Pe)},decodeString(Be,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob(Be):function(Be){const Pe=[];let Ze=0,Te=0;for(;Ze<Be.length;){const se=Be[Ze++];if(se<128)Pe[Te++]=String.fromCharCode(se);else if(se>191&&se<224){const be=Be[Ze++];Pe[Te++]=String.fromCharCode((31&se)<<6|63&be)}else if(se>239&&se<365){const bn=((7&se)<<18|(63&Be[Ze++])<<12|(63&Be[Ze++])<<6|63&Be[Ze++])-65536;Pe[Te++]=String.fromCharCode(55296+(bn>>10)),Pe[Te++]=String.fromCharCode(56320+(1023&bn))}else{const be=Be[Ze++],ht=Be[Ze++];Pe[Te++]=String.fromCharCode((15&se)<<12|(63&be)<<6|63&ht)}}return Pe.join("")}(this.decodeStringToByteArray(Be,Pe))},decodeStringToByteArray(Be,Pe){this.init_();const Ze=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let se=0;se<Be.length;){const be=Ze[Be.charAt(se++)],qt=se<Be.length?Ze[Be.charAt(se)]:0;++se;const Nn=se<Be.length?Ze[Be.charAt(se)]:64;++se;const ve=se<Be.length?Ze[Be.charAt(se)]:64;if(++se,null==be||null==qt||null==Nn||null==ve)throw Error();Te.push(be<<2|qt>>4),64!==Nn&&(Te.push(qt<<4&240|Nn>>2),64!==ve&&Te.push(Nn<<6&192|ve))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Be=0;Be<this.ENCODED_VALS.length;Be++)this.byteToCharMap_[Be]=this.ENCODED_VALS.charAt(Be),this.charToByteMap_[this.byteToCharMap_[Be]]=Be,this.byteToCharMapWebSafe_[Be]=this.ENCODED_VALS_WEBSAFE.charAt(Be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Be]]=Be,Be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Be)]=Be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Be)]=Be)}}},We=function(Be){const Pe=Se(Be);return Me.encodeByteArray(Pe,!0)},ke=function(Be){return We(Be).replace(/\./g,"")},Je=function(Be){try{return Me.decodeString(Be,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function we(Be){return ye(void 0,Be)}function ye(Be,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===Be&&(Be={});break;case Array:Be=[];break;default:return Pe}for(const Ze in Pe)!Pe.hasOwnProperty(Ze)||!He(Ze)||(Be[Ze]=ye(Be[Ze],Pe[Ze]));return Be}function He(Be){return"__proto__"!==Be}function Nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function yt(){const Be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Be&&void 0!==Be.id}function ut(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function jt(){const Be=Nt();return Be.indexOf("MSIE ")>=0||Be.indexOf("Trident/")>=0}function qe(){return!1}function ze(){return!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $t(){try{return"object"==typeof indexedDB}catch{return!1}}function rt(){return new Promise((Be,Pe)=>{try{let Ze=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(Te);se.onsuccess=()=>{se.result.close(),Ze||self.indexedDB.deleteDatabase(Te),Be(!0)},se.onupgradeneeded=()=>{Ze=!1},se.onerror=()=>{var be;Pe((null===(be=se.error)||void 0===be?void 0:be.message)||"")}}catch(Ze){Pe(Ze)}})}function Ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const nt=()=>{try{return function bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Be=process.env.__FIREBASE_DEFAULTS__;return Be?JSON.parse(Be):void 0})()||(()=>{if(typeof document>"u")return;let Be;try{Be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Pe=Be&&Je(Be[1]);return Pe&&JSON.parse(Pe)})()}catch(Be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Be}`)}},Mn=()=>{var Be;return null===(Be=nt())||void 0===Be?void 0:Be.config},Mt=Be=>{var Pe;return null===(Pe=nt())||void 0===Pe?void 0:Pe[`_${Be}`]};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Pe,Ze)=>{this.resolve=Pe,this.reject=Ze})}wrapCallback(Pe){return(Ze,Te)=>{Ze?this.reject(Ze):this.resolve(Te),"function"==typeof Pe&&(this.promise.catch(()=>{}),1===Pe.length?Pe(Ze):Pe(Ze,Te))}}}function ge(Be,Pe){if(Be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=Pe||"demo-project",se=Be.iat||0,be=Be.sub||Be.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:se,exp:se+3600,auth_time:se,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Be);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(ht)),""].join(".")}class Bt extends Error{constructor(Pe,Ze,Te){super(Ze),this.code=Pe,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,Bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(Pe,Ze,Te){this.service=Pe,this.serviceName=Ze,this.errors=Te}create(Pe,...Ze){const Te=Ze[0]||{},se=`${this.service}/${Pe}`,be=this.errors[Pe],ht=be?function Qe(Be,Pe){return Be.replace(Fe,(Ze,Te)=>{const se=Pe[Te];return null!=se?String(se):`<${Te}?>`})}(be,Te):"Error";return new Bt(se,`${this.serviceName}: ${ht} (${se}).`,Te)}}const Fe=/\{\$([^}]+)}/g;function st(Be){return JSON.parse(Be)}function Xt(Be){return JSON.stringify(Be)}const an=function(Be){let Pe={},Ze={},Te={},se="";try{const be=Be.split(".");Pe=st(Je(be[0])||""),Ze=st(Je(be[1])||""),se=be[2],Te=Ze.d||{},delete Ze.d}catch{}return{header:Pe,claims:Ze,data:Te,signature:se}},ii=function(Be){const Ze=an(Be).claims;return!!Ze&&"object"==typeof Ze&&Ze.hasOwnProperty("iat")},br=function(Be){const Pe=an(Be).claims;return"object"==typeof Pe&&!0===Pe.admin};function Nr(Be,Pe){return Object.prototype.hasOwnProperty.call(Be,Pe)}function Wn(Be,Pe){if(Object.prototype.hasOwnProperty.call(Be,Pe))return Be[Pe]}function sr(Be){for(const Pe in Be)if(Object.prototype.hasOwnProperty.call(Be,Pe))return!1;return!0}function Tr(Be,Pe,Ze){const Te={};for(const se in Be)Object.prototype.hasOwnProperty.call(Be,se)&&(Te[se]=Pe.call(Ze,Be[se],se,Be));return Te}function un(Be,Pe){if(Be===Pe)return!0;const Ze=Object.keys(Be),Te=Object.keys(Pe);for(const se of Ze){if(!Te.includes(se))return!1;const be=Be[se],ht=Pe[se];if(Rr(be)&&Rr(ht)){if(!un(be,ht))return!1}else if(be!==ht)return!1}for(const se of Te)if(!Ze.includes(se))return!1;return!0}function Rr(Be){return null!==Be&&"object"==typeof Be}function ur(Be){const Pe=[];for(const[Ze,Te]of Object.entries(Be))Array.isArray(Te)?Te.forEach(se=>{Pe.push(encodeURIComponent(Ze)+"="+encodeURIComponent(se))}):Pe.push(encodeURIComponent(Ze)+"="+encodeURIComponent(Te));return Pe.length?"&"+Pe.join("&"):""}function Xr(Be){const Pe={};return Be.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[se,be]=Te.split("=");Pe[decodeURIComponent(se)]=decodeURIComponent(be)}}),Pe}function ji(Be){const Pe=Be.indexOf("?");if(!Pe)return"";const Ze=Be.indexOf("#",Pe);return Be.substring(Pe,Ze>0?Ze:void 0)}class Kn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Pe,Ze){Ze||(Ze=0);const Te=this.W_;if("string"==typeof Pe)for(let ve=0;ve<16;ve++)Te[ve]=Pe.charCodeAt(Ze)<<24|Pe.charCodeAt(Ze+1)<<16|Pe.charCodeAt(Ze+2)<<8|Pe.charCodeAt(Ze+3),Ze+=4;else for(let ve=0;ve<16;ve++)Te[ve]=Pe[Ze]<<24|Pe[Ze+1]<<16|Pe[Ze+2]<<8|Pe[Ze+3],Ze+=4;for(let ve=16;ve<80;ve++){const pe=Te[ve-3]^Te[ve-8]^Te[ve-14]^Te[ve-16];Te[ve]=4294967295&(pe<<1|pe>>>31)}let Nn,Ee,se=this.chain_[0],be=this.chain_[1],ht=this.chain_[2],qt=this.chain_[3],bn=this.chain_[4];for(let ve=0;ve<80;ve++){ve<40?ve<20?(Nn=qt^be&(ht^qt),Ee=1518500249):(Nn=be^ht^qt,Ee=1859775393):ve<60?(Nn=be&ht|qt&(be|ht),Ee=2400959708):(Nn=be^ht^qt,Ee=3395469782);const pe=(se<<5|se>>>27)+Nn+bn+Ee+Te[ve]&4294967295;bn=qt,qt=ht,ht=4294967295&(be<<30|be>>>2),be=se,se=pe}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+be&4294967295,this.chain_[2]=this.chain_[2]+ht&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+bn&4294967295}update(Pe,Ze){if(null==Pe)return;void 0===Ze&&(Ze=Pe.length);const Te=Ze-this.blockSize;let se=0;const be=this.buf_;let ht=this.inbuf_;for(;se<Ze;){if(0===ht)for(;se<=Te;)this.compress_(Pe,se),se+=this.blockSize;if("string"==typeof Pe){for(;se<Ze;)if(be[ht]=Pe.charCodeAt(se),++ht,++se,ht===this.blockSize){this.compress_(be),ht=0;break}}else for(;se<Ze;)if(be[ht]=Pe[se],++ht,++se,ht===this.blockSize){this.compress_(be),ht=0;break}}this.inbuf_=ht,this.total_+=Ze}digest(){const Pe=[];let Ze=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Ze,Ze/=256;this.compress_(this.buf_);let Te=0;for(let se=0;se<5;se++)for(let be=24;be>=0;be-=8)Pe[Te]=this.chain_[se]>>be&255,++Te;return Pe}}function pr(Be,Pe){const Ze=new dr(Be,Pe);return Ze.subscribe.bind(Ze)}class dr{constructor(Pe,Ze){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ze,this.task.then(()=>{Pe(this)}).catch(Te=>{this.error(Te)})}next(Pe){this.forEachObserver(Ze=>{Ze.next(Pe)})}error(Pe){this.forEachObserver(Ze=>{Ze.error(Pe)}),this.close(Pe)}complete(){this.forEachObserver(Pe=>{Pe.complete()}),this.close()}subscribe(Pe,Ze,Te){let se;if(void 0===Pe&&void 0===Ze&&void 0===Te)throw new Error("Missing Observer.");se=function In(Be,Pe){if("object"!=typeof Be||null===Be)return!1;for(const Ze of Pe)if(Ze in Be&&"function"==typeof Be[Ze])return!0;return!1}(Pe,["next","error","complete"])?Pe:{next:Pe,error:Ze,complete:Te},void 0===se.next&&(se.next=kn),void 0===se.error&&(se.error=kn),void 0===se.complete&&(se.complete=kn);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),be}unsubscribeOne(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Pe){if(!this.finalized)for(let Ze=0;Ze<this.observers.length;Ze++)this.sendOne(Ze,Pe)}sendOne(Pe,Ze){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Pe])try{Ze(this.observers[Pe])}catch(Te){typeof console<"u"&&console.error&&console.error(Te)}})}close(Pe){this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const xn=function(Be,Pe,Ze,Te){let se;if(Te<Pe?se="at least "+Pe:Te>Ze&&(se=0===Ze?"none":"no more than "+Ze),se)throw new Error(Be+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+se+".")};function Mr(Be,Pe){return`${Be} failed: ${Pe} argument `}function Vn(Be,Pe,Ze,Te){if((!Te||Ze)&&"function"!=typeof Ze)throw new Error(Mr(Be,Pe)+"must be a valid function.")}function ci(Be,Pe,Ze,Te){if((!Te||Ze)&&("object"!=typeof Ze||null===Ze))throw new Error(Mr(Be,Pe)+"must be a valid context object.")}const vn=function(Be){const Pe=[];let Ze=0;for(let Te=0;Te<Be.length;Te++){let se=Be.charCodeAt(Te);if(se>=55296&&se<=56319){const be=se-55296;Te++,L(Te<Be.length,"Surrogate pair missing trail surrogate."),se=65536+(be<<10)+(Be.charCodeAt(Te)-56320)}se<128?Pe[Ze++]=se:se<2048?(Pe[Ze++]=se>>6|192,Pe[Ze++]=63&se|128):se<65536?(Pe[Ze++]=se>>12|224,Pe[Ze++]=se>>6&63|128,Pe[Ze++]=63&se|128):(Pe[Ze++]=se>>18|240,Pe[Ze++]=se>>12&63|128,Pe[Ze++]=se>>6&63|128,Pe[Ze++]=63&se|128)}return Pe},Di=function(Be){let Pe=0;for(let Ze=0;Ze<Be.length;Ze++){const Te=Be.charCodeAt(Ze);Te<128?Pe++:Te<2048?Pe+=2:Te>=55296&&Te<=56319?(Pe+=4,Ze++):Pe+=3}return Pe};function En(Be,Pe=1e3,Ze=2){const Te=Pe*Math.pow(Ze,Be),se=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+se)}function tr(Be){return Be&&Be._delegate?Be._delegate:Be}},6132:(hn,dt,B)=>{B.d(dt,{e:()=>we});var u=B(552),Me=(B(2090),B(9681),B(1877),B(4859),B(4650)),We=B(3101),ke=B(3385),Je=B(7799);let we=(()=>{class ye{constructor(Nt,mt,lt,xt){this.firestore=Nt,this.auth=mt,this.router=lt,this.ngZone=xt,this.auth.authState.subscribe(yt=>{yt?(this.setUser(yt),localStorage.setItem("user",JSON.stringify(this.currentUser())),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUser(Nt){this.user$=Nt}currentUser(){return this.user$?this.user$:JSON.parse(localStorage.getItem("user"))}AuthLogin(Nt){return this.auth.signInWithPopup(Nt).then(mt=>{console.log("resp = ",mt),this.setUser(mt.user),this.router.navigate(["admin/dashboard/categories"])}).catch(mt=>{window.alert(mt)})}login(){this.AuthLogin(new u.Q).then(Nt=>{this.router.navigate(["admin/dashboard"])})}logout(){return this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["admin/log-in"])})}}return ye.\u0275fac=function(Nt){return new(Nt||ye)(Me.LFG(We.ST),Me.LFG(ke.zQ),Me.LFG(Je.F0),Me.LFG(Me.R0b))},ye.\u0275prov=Me.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},7087:(hn,dt,B)=>{B.d(dt,{D:()=>ee});var u=B(7579),L=B(4650);let ee=(()=>{class Se{constructor(){this.isLoading=new u.x}show(){setTimeout(()=>{this.isLoading.next(!0)},0),setTimeout(()=>{this.isLoading.next(!1)},1500)}hide(){setTimeout(()=>{this.isLoading.next(!1)},0)}}return Se.\u0275fac=function(Me){return new(Me||Se)},Se.\u0275prov=L.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},4466:(hn,dt,B)=>{B.d(dt,{m:()=>Oe});var u=B(6895),L=B(377),ee=B(6188),Se=B(4650);let Oe=(()=>{class Me{}return Me.\u0275fac=function(ke){return new(ke||Me)},Me.\u0275mod=Se.oAB({type:Me}),Me.\u0275inj=Se.cJS({providers:[{provide:L.hP,useValue:"savourydining.appspot.com"}],imports:[u.ez,L.TE,ee.aw]}),Me})()},668:(hn,dt,B)=>{var u=B(1481),L=B(4650),ee=B(4541),Se=B(7799);const Oe=[{path:"",redirectTo:"survey",pathMatch:"full"},{path:"survey",loadChildren:()=>Promise.all([B.e(226),B.e(982)]).then(B.bind(B,1982)).then(c=>c.SurveyModule)},{path:"admin",loadChildren:()=>Promise.all([B.e(226),B.e(37)]).then(B.bind(B,4037)).then(c=>c.AdminModule)}];let Me=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c}),c.\u0275inj=L.cJS({imports:[Se.Bz.forRoot(Oe),Se.Bz]}),c})();var We=B(6188),ke=B(7087),Je=B(6895);function we(c,s){1&c&&(L.TgZ(0,"div",1)(1,"div",2),L.O4$(),L.TgZ(2,"svg",3),L._UZ(3,"path",4)(4,"path",5),L.qZA(),L.kcU(),L.TgZ(5,"span",6),L._uU(6,"Loading..."),L.qZA()()())}let ye=(()=>{class c{constructor(o){this.loaderService=o,this.value=50,this.isLoading=this.loaderService.isLoading}}return c.\u0275fac=function(o){return new(o||c)(L.Y36(ke.D))},c.\u0275cmp=L.Xpm({type:c,selectors:[["app-standby"]],decls:2,vars:3,consts:[["class","text-center overlay",4,"ngIf"],[1,"text-center","overlay"],["role","status"],["viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","mr-2","w-8","h-8","text-gray-200","animate-spin","xxxx:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(o,h){1&o&&(L.YNc(0,we,7,0,"div",0),L.ALo(1,"async")),2&o&&L.Q6J("ngIf",L.lcZ(1,1,h.isLoading))},dependencies:[Je.O5,Je.Ov],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;display:flex;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.45);z-index:99999;align-items:center;justify-content:center}.spinner[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;top:calc(50% - 50px);left:calc(50% - 50px);transform:translate(calc(-50% + 50px),calc(-50% + 50px))}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:var(--primary-color)}"]}),c})(),He=(()=>{class c{constructor(o){this.title="sd-survey",o.addLangs(["en","no"]),o.setDefaultLang("en"),o.use("en")}}return c.\u0275fac=function(o){return new(o||c)(L.Y36(We.sK))},c.\u0275cmp=L.Xpm({type:c,selectors:[["app-root"]],decls:3,vars:0,consts:[["role","main",1,"content"]],template:function(o,h){1&o&&(L.TgZ(0,"div",0),L._UZ(1,"app-standby")(2,"router-outlet"),L.qZA())},dependencies:[Se.lC,ye],styles:["*[_ngcontent-%COMP%]{font-family:Montserrat,Arial,Helvetica,Nimbus Sans L,sans-serif}"]}),c})();var Nt=B(4006);const mt_firebase={apiKey:"AIzaSyDmLMkMhma-fXNM7GYnbV2xvBChvmGG2MY",authDomain:"savourydining.firebaseapp.com",projectId:"savourydining",storageBucket:"savourydining.appspot.com",messagingSenderId:"207394989073",appId:"1:207394989073:web:5a12bc301624da108cfdb0",measurementId:"G-SPWRLE6MVT"};var lt=B(2011),xt=B(3385),yt=B(377),ut=B(3101),$e=B(4986),jt=B(9751),gt=B(9646),qe=B(6451),ze=B(4004),$t=B(3099),rt=B(3900),Ue=B(5026),bt=B(1884),Ne=B(1365),Ge=B(4482),wt=B(5403),Ht=B(2122),Mn=(B(9568),B(3942)),Mt=B(4859),en=B(5861),ge=B(9681),ie=B(2090),Bt=B(1877);const Le="@firebase/database";let Fe="";function st(c){Fe=c}class Xt{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,o){null==o?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,ie.Wl)(o))}get(s){const o=this.domStorage_.getItem(this.prefixedName_(s));return null==o?null:(0,ie.cI)(o)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}class an{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,o){null==o?delete this.cache_[s]:this.cache_[s]=o}get(s){return(0,ie.r3)(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}const Dr=function(c){try{if(typeof window<"u"&&typeof window[c]<"u"){const s=window[c];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new Xt(s)}}catch{}return new an},jn=Dr("localStorage"),ii=Dr("sessionStorage"),br=new Bt.Yd("@firebase/database"),Nr=function(){let c=1;return function(){return c++}}(),Wn=function(c){const s=(0,ie.dS)(c),o=new ie.gQ;o.update(s);const h=o.digest();return ie.US.encodeByteArray(h)},sr=function(...c){let s="";for(let o=0;o<c.length;o++){const h=c[o];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?s+=sr.apply(null,h):s+="object"==typeof h?(0,ie.Wl)(h):h,s+=" "}return s};let Tr=null,un=!0;const Rr=function(c,s){(0,ie.hu)(!s||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(br.logLevel=Bt.in.VERBOSE,Tr=br.log.bind(br),s&&ii.set("logging_enabled",!0)):"function"==typeof c?Tr=c:(Tr=null,ii.remove("logging_enabled"))},er=function(...c){if(!0===un&&(un=!1,null===Tr&&!0===ii.get("logging_enabled")&&Rr(!0)),Tr){const s=sr.apply(null,c);Tr(s)}},ur=function(c){return function(...s){er(c,...s)}},Xr=function(...c){const s="FIREBASE INTERNAL ERROR: "+sr(...c);br.error(s)},ji=function(...c){const s=`FIREBASE FATAL ERROR: ${sr(...c)}`;throw br.error(s),new Error(s)},Kn=function(...c){const s="FIREBASE WARNING: "+sr(...c);br.warn(s)},dr=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},In="[MIN_NAME]",kn="[MAX_NAME]",xn=function(c,s){if(c===s)return 0;if(c===In||s===kn)return-1;if(s===In||c===kn)return 1;{const o=Gn(c),h=Gn(s);return null!==o?null!==h?o-h==0?c.length-s.length:o-h:-1:null!==h?1:c<s?-1:1}},Mr=function(c,s){return c===s?0:c<s?-1:1},Ai=function(c,s){if(s&&c in s)return s[c];throw new Error("Missing required key ("+c+") in object: "+(0,ie.Wl)(s))},Vn=function(c){if("object"!=typeof c||null===c)return(0,ie.Wl)(c);const s=[];for(const h in c)s.push(h);s.sort();let o="{";for(let h=0;h<s.length;h++)0!==h&&(o+=","),o+=(0,ie.Wl)(s[h]),o+=":",o+=Vn(c[s[h]]);return o+="}",o},ci=function(c,s){const o=c.length;if(o<=s)return[c];const h=[];for(let _=0;_<o;_+=s)h.push(c.substring(_,_+s>o?o:_+s));return h};function vn(c,s){for(const o in c)c.hasOwnProperty(o)&&s(o,c[o])}const Di=function(c){(0,ie.hu)(!dr(c),"Invalid JSON number");const h=1023;let _,T,O,G,te;0===c?(T=0,O=0,_=1/c==-1/0?1:0):(_=c<0,(c=Math.abs(c))>=Math.pow(2,1-h)?(G=Math.min(Math.floor(Math.log(c)/Math.LN2),h),T=G+h,O=Math.round(c*Math.pow(2,52-G)-Math.pow(2,52))):(T=0,O=Math.round(c/Math.pow(2,-1074))));const de=[];for(te=52;te;te-=1)de.push(O%2?1:0),O=Math.floor(O/2);for(te=11;te;te-=1)de.push(T%2?1:0),T=Math.floor(T/2);de.push(_?1:0),de.reverse();const et=de.join("");let ot="";for(te=0;te<64;te+=8){let Dt=parseInt(et.substr(te,8),2).toString(16);1===Dt.length&&(Dt="0"+Dt),ot+=Dt}return ot.toLowerCase()},yn=new RegExp("^-?(0*)\\d{1,10}$"),Gn=function(c){if(yn.test(c)){const s=Number(c);if(s>=-2147483648&&s<=2147483647)return s}return null},Ln=function(c){try{c()}catch(s){setTimeout(()=>{throw Kn("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},Be=function(c,s){const o=setTimeout(c,s);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class Pe{constructor(s,o){this.appName_=s,this.appCheckProvider=o,this.appCheck=o?.getImmediate({optional:!0}),this.appCheck||o?.get().then(h=>this.appCheck=h)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((o,h)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(o,h):o(null)},0)})}addTokenChangeListener(s){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(h=>h.addTokenListener(s))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ze{constructor(s,o,h){this.appName_=s,this.firebaseOptions_=o,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(_=>this.auth_=_)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(o=>o&&"auth/token-not-initialized"===o.code?(er("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,h)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(o,h):o(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(o=>o.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(o=>o.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(s)}}let Te=(()=>{class c{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const Nn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tt="websocket",ft="long_polling";class tn{constructor(s,o,h,_,T=!1,O="",G=!1){this.secure=o,this.namespace=h,this.webSocketOnly=_,this.nodeAdmin=T,this.persistenceKey=O,this.includeNamespaceInQueryParams=G,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jn.get("host:"+s)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&jn.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hr(c,s,o){let h;if((0,ie.hu)("string"==typeof s,"typeof type must == string"),(0,ie.hu)("object"==typeof o,"typeof params must == object"),s===tt)h=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(s!==ft)throw new Error("Unknown connection type: "+s);h=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function Zn(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(o.ns=c.namespace);const _=[];return vn(o,(T,O)=>{_.push(T+"="+O)}),h+_.join("&")}class Ar{constructor(){this.counters_={}}incrementCounter(s,o=1){(0,ie.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=o}get(){return(0,ie.p$)(this.counters_)}}const gi={},Rn={};function ys(c){const s=c.toString();return gi[s]||(gi[s]=new Ar),gi[s]}class Xs{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,o){this.closeAfterResponse=s,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,o){for(this.pendingResponses[s]=o;this.pendingResponses[this.currentResponseNum];){const h=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<h.length;++_)h[_]&&Ln(()=>{this.onMessage_(h[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fr{constructor(s,o,h,_,T,O,G){this.connId=s,this.repoInfo=o,this.applicationId=h,this.appCheckToken=_,this.authToken=T,this.transportSessionId=O,this.lastSessionId=G,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ur(s),this.stats_=ys(o),this.urlFn=te=>(this.appCheckToken&&(te.ac=this.appCheckToken),hr(o,ft,te))}open(s,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new Xs(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,ie.Yr)()||"complete"===document.readyState)c();else{let s=!1;const o=function(){document.body?s||(s=!0,c()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vs((...T)=>{const[O,G,te,de,et]=T;if(this.incrementIncomingBytes_(T),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===O)this.id=G,this.password=te;else{if("close"!==O)throw new Error("Unrecognized command received: "+O);G?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(G,()=>{this.onClosed_()})):this.onClosed_()}},(...T)=>{const[O,G]=T;this.incrementIncomingBytes_(T),this.myPacketOrderer.handleResponse(O,G)},()=>{this.onClosed_()},this.urlFn);const h={start:"t"};h.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=this.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",this.transportSessionId&&(h.s=this.transportSessionId),this.lastSessionId&&(h.ls=this.lastSessionId),this.applicationId&&(h.p=this.applicationId),this.appCheckToken&&(h.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Nn.test(location.hostname)&&(h.r="f");const _=this.urlFn(h);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fr.forceAllow_=!0}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!fr.forceAllow_&&(fr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const o=(0,ie.Wl)(s);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const h=(0,ie.h$)(o),_=ci(h,1840);for(let T=0;T<_.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[T]),this.curSegmentNum++}addDisconnectPingFrame(s,o){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const h={dframe:"t"};h.id=s,h.pw=o,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const o=(0,ie.Wl)(s).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class Vs{constructor(s,o,h,_){if(this.onDisconnect=h,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=s,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=Nr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=Vs.createIFrame_();let T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(T='<script>document.domain="'+document.domain+'";<\/script>');const O="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(O),this.myIFrame.doc.close()}catch(G){er("frame writing exception"),G.stack&&er(G.stack),er(G)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||er("No IE domain setting required")}catch{const h=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,o){for(this.myID=s,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;let o=this.urlFn(s),h="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){const O=this.pendingSegs.shift();h=h+"&seg"+_+"="+O.seg+"&ts"+_+"="+O.ts+"&d"+_+"="+O.d,_++}return o+=h,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(s,o,h){this.pendingSegs.push({seg:s,ts:o,d:h}),this.alive&&this.newRequest_()}addLongPollTag_(s,o){this.outstandingRequests.add(o);const h=()=>{this.outstandingRequests.delete(o),this.newRequest_()},_=setTimeout(h,Math.floor(25e3));this.addTag(s,()=>{clearTimeout(_),h()})}addTag(s,o){(0,ie.Yr)()?this.doNodeLongPoll(s,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const h=this.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=s,h.onload=h.onreadystatechange=function(){const _=h.readyState;(!_||"loaded"===_||"complete"===_)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),o())},h.onerror=()=>{er("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(h)}catch{}},Math.floor(1))}}let Ks=null;typeof MozWebSocket<"u"?Ks=MozWebSocket:typeof WebSocket<"u"&&(Ks=WebSocket);let Gi=(()=>{class c{constructor(o,h,_,T,O,G,te){this.connId=o,this.applicationId=_,this.appCheckToken=T,this.authToken=O,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ur(this.connId),this.stats_=ys(h),this.connURL=c.connectionURL_(h,G,te,T,_),this.nodeAdmin=h.nodeAdmin}static connectionURL_(o,h,_,T,O){const G={v:"5"};return!(0,ie.Yr)()&&typeof location<"u"&&location.hostname&&Nn.test(location.hostname)&&(G.r="f"),h&&(G.s=h),_&&(G.ls=_),T&&(G.ac=T),O&&(G.p=O),hr(o,tt,G)}open(o,h){this.onDisconnect=h,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jn.set("previous_websocket_failure",!0);try{let _;if((0,ie.Yr)()){_={headers:{"User-Agent":`Firebase/5/${Fe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(_.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(_.headers["X-Firebase-AppCheck"]=this.appCheckToken);const O=process.env,G=0===this.connURL.indexOf("wss://")?O.HTTPS_PROXY||O.https_proxy:O.HTTP_PROXY||O.http_proxy;G&&(_.proxy={origin:G})}this.mySock=new Ks(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const T=_.message||_.data;return T&&this.log_(T),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const T=_.message||_.data;T&&this.log_(T),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(o=!0)}return!o&&null!==Ks&&!c.forceDisallow_}static previouslyFailed(){return jn.isInMemoryStorage||!0===jn.get("previous_websocket_failure")}markConnectionHealthy(){jn.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const h=this.frames.join("");this.frames=null;const _=(0,ie.cI)(h);this.onMessage(_)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const h=Number(o);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const h=o.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{const _=this.extractFrameCount_(h);null!==_&&this.appendFrame_(_)}}send(o){this.resetKeepAlive();const h=(0,ie.Wl)(o);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const _=ci(h,16384);_.length>1&&this.sendString_(String(_.length));for(let T=0;T<_.length;T++)this.sendString_(_[T])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})(),Vo=(()=>{class c{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[fr,Gi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const h=Gi&&Gi.isAvailable();let _=h&&!Gi.previouslyFailed();if(o.webSocketOnly&&(h||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[Gi];else{const T=this.transports_=[];for(const O of c.ALL_TRANSPORTS)O&&O.isAvailable()&&T.push(O);c.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return c.globalTransportInitialized_=!1,c})();class yo{constructor(s,o,h,_,T,O,G,te,de,et){this.id=s,this.repoInfo_=o,this.applicationId_=h,this.appCheckToken_=_,this.authToken_=T,this.onMessage_=O,this.onReady_=G,this.onDisconnect_=te,this.onKill_=de,this.lastSessionId=et,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ur("c:"+this.id+":"),this.transportManager_=new Vo(o),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,h)},Math.floor(0));const _=s.healthyTimeout||0;_>0&&(this.healthyTimeout_=Be(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return o=>{s===this.conn_?this.onConnectionLost_(o):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return o=>{2!==this.state_&&(s===this.rx_?this.onPrimaryMessageReceived_(o):s===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(s){this.sendData_({t:"d",d:s})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if("t"in s){const o=s.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const o=Ai("t",s),h=Ai("d",s);if("c"===o)this.onSecondaryControl_(h);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(h)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const o=Ai("t",s),h=Ai("d",s);"c"===o?this.onControl_(h):"d"===o&&this.onDataMessage_(h)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const o=Ai("t",s);if("d"in s){const h=s.d;if("h"===o)this.onHandshake_(h);else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(h):"r"===o?this.onReset_(h):"e"===o?Xr("Server Error: "+h):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xr("Unknown control packet command: "+o)}}onHandshake_(s){const o=s.ts,h=s.v,_=s.h;this.sessionId=s.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==h&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,h),Be(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,o){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Be(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Es{put(s,o,h,_){}merge(s,o,h,_){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,o,h){}onDisconnectMerge(s,o,h){}onDisconnectCancel(s,o){}reportStats(s){}}class Vi{constructor(s){this.allowedEvents_=s,this.listeners_={},(0,ie.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...o){if(Array.isArray(this.listeners_[s])){const h=[...this.listeners_[s]];for(let _=0;_<h.length;_++)h[_].callback.apply(h[_].context,o)}}on(s,o,h){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:o,context:h});const _=this.getInitialEvent(s);_&&o.apply(h,_)}off(s,o,h){this.validateEventType_(s);const _=this.listeners_[s]||[];for(let T=0;T<_.length;T++)if(_[T].callback===o&&(!h||h===_[T].context))return void _.splice(T,1)}validateEventType_(s){(0,ie.hu)(this.allowedEvents_.find(o=>o===s),"Unknown event: "+s)}}class Ca extends Vi{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ca}getInitialEvent(s){return(0,ie.hu)("online"===s,"Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}class kr{constructor(s,o){if(void 0===o){this.pieces_=s.split("/");let h=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[h]=this.pieces_[_],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=o}toString(){let s="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(s+="/"+this.pieces_[o]);return s||"/"}}function Fr(){return new kr("")}function Xn(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function fs(c){return c.pieces_.length-c.pieceNum_}function Wr(c){let s=c.pieceNum_;return s<c.pieces_.length&&s++,new kr(c.pieces_,s)}function eo(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function Hs(c,s=0){return c.pieces_.slice(c.pieceNum_+s)}function To(c){if(c.pieceNum_>=c.pieces_.length)return null;const s=[];for(let o=c.pieceNum_;o<c.pieces_.length-1;o++)s.push(c.pieces_[o]);return new kr(s,0)}function Vr(c,s){const o=[];for(let h=c.pieceNum_;h<c.pieces_.length;h++)o.push(c.pieces_[h]);if(s instanceof kr)for(let h=s.pieceNum_;h<s.pieces_.length;h++)o.push(s.pieces_[h]);else{const h=s.split("/");for(let _=0;_<h.length;_++)h[_].length>0&&o.push(h[_])}return new kr(o,0)}function wr(c){return c.pieceNum_>=c.pieces_.length}function Ni(c,s){const o=Xn(c),h=Xn(s);if(null===o)return s;if(o===h)return Ni(Wr(c),Wr(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+c+")")}function ia(c,s){const o=Hs(c,0),h=Hs(s,0);for(let _=0;_<o.length&&_<h.length;_++){const T=xn(o[_],h[_]);if(0!==T)return T}return o.length===h.length?0:o.length<h.length?-1:1}function Ms(c,s){if(fs(c)!==fs(s))return!1;for(let o=c.pieceNum_,h=s.pieceNum_;o<=c.pieces_.length;o++,h++)if(c.pieces_[o]!==s.pieces_[h])return!1;return!0}function Ui(c,s){let o=c.pieceNum_,h=s.pieceNum_;if(fs(c)>fs(s))return!1;for(;o<c.pieces_.length;){if(c.pieces_[o]!==s.pieces_[h])return!1;++o,++h}return!0}class js{constructor(s,o){this.errorPrefix_=o,this.parts_=Hs(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let h=0;h<this.parts_.length;h++)this.byteLength_+=(0,ie.ug)(this.parts_[h]);sa(this)}}function sa(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zr(c))}function zr(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class Ia extends Vi{constructor(){let s,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const h=!document[s];h!==this.visible_&&(this.visible_=h,this.trigger("visible",h))},!1)}static getInstance(){return new Ia}getInitialEvent(s){return(0,ie.hu)("visible"===s,"Unknown event type: "+s),[this.visible_]}}const mi=1e3;let Ji,Ho=(()=>{class c extends Es{constructor(o,h,_,T,O,G,te,de){if(super(),this.repoInfo_=o,this.applicationId_=h,this.onDataUpdate_=_,this.onConnectStatus_=T,this.onServerInfoUpdate_=O,this.authTokenProvider_=G,this.appCheckTokenProvider_=te,this.authOverride_=de,this.id=c.nextPersistentConnectionId_++,this.log_=ur("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,de&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ia.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&Ca.getInstance().on("online",this.onOnline_,this)}sendRequest(o,h,_){const T=++this.requestNumber_,O={r:T,a:o,b:h};this.log_((0,ie.Wl)(O)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(O),_&&(this.requestCBHash_[T]=_)}get(o){this.initConnection_();const h=new ie.BH,_={p:o._path.toString(),q:o._queryObject};return this.outstandingGets_.push({action:"g",request:_,onComplete:G=>{const te=G.d;"ok"===G.s?h.resolve(te):h.reject(te)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),h.promise}listen(o,h,_,T){this.initConnection_();const O=o._queryIdentifier,G=o._path.toString();this.log_("Listen called for "+G+" "+O),this.listens.has(G)||this.listens.set(G,new Map),(0,ie.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(G).has(O),"listen() called twice for same path/queryId.");const te={onComplete:T,hashFn:h,query:o,tag:_};this.listens.get(G).set(O,te),this.connected_&&this.sendListen_(te)}sendGet_(o){const h=this.outstandingGets_[o];this.sendRequest("g",h.request,_=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),h.onComplete&&h.onComplete(_)})}sendListen_(o){const h=o.query,_=h._path.toString(),T=h._queryIdentifier;this.log_("Listen on "+_+" for "+T);const O={p:_};o.tag&&(O.q=h._queryObject,O.t=o.tag),O.h=o.hashFn(),this.sendRequest("q",O,te=>{const de=te.d,et=te.s;c.warnOnListenWarnings_(de,h),(this.listens.get(_)&&this.listens.get(_).get(T))===o&&(this.log_("listen response",te),"ok"!==et&&this.removeListen_(_,T),o.onComplete&&o.onComplete(et,de))})}static warnOnListenWarnings_(o,h){if(o&&"object"==typeof o&&(0,ie.r3)(o,"w")){const _=(0,ie.DV)(o,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const T='".indexOn": "'+h._queryParams.getIndex().toString()+'"',O=h._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${T} at ${O} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,ie.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,h=(0,ie.w9)(o)?"auth":"gauth",_={cred:o};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(h,_,T=>{const O=T.s,G=T.d||"error";this.authToken_===o&&("ok"===O?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(O,G))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const h=o.s,_=o.d||"error";"ok"===h?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(h,_)})}unlisten(o,h){const _=o._path.toString(),T=o._queryIdentifier;this.log_("Unlisten called for "+_+" "+T),(0,ie.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,T)&&this.connected_&&this.sendUnlisten_(_,T,o._queryObject,h)}sendUnlisten_(o,h,_,T){this.log_("Unlisten on "+o+" for "+h);const O={p:o};T&&(O.q=_,O.t=T),this.sendRequest("n",O)}onDisconnectPut(o,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,h,_):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:h,onComplete:_})}onDisconnectMerge(o,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,h,_):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:h,onComplete:_})}onDisconnectCancel(o,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,h):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:h})}sendOnDisconnect_(o,h,_,T){const O={p:h,d:_};this.log_("onDisconnect "+o,O),this.sendRequest(o,O,G=>{T&&setTimeout(()=>{T(G.s,G.d)},Math.floor(0))})}put(o,h,_,T){this.putInternal("p",o,h,_,T)}merge(o,h,_,T){this.putInternal("m",o,h,_,T)}putInternal(o,h,_,T,O){this.initConnection_();const G={p:h,d:_};void 0!==O&&(G.h=O),this.outstandingPuts_.push({action:o,request:G,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)}sendPut_(o){const h=this.outstandingPuts_[o].action,_=this.outstandingPuts_[o].request,T=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(h,_,O=>{this.log_(h+" response",O),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),T&&T(O.s,O.d)})}reportStats(o){if(this.connected_){const h={c:o};this.log_("reportStats",h),this.sendRequest("s",h,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,ie.Wl)(o));const h=o.r,_=this.requestCBHash_[h];_&&(delete this.requestCBHash_[h],_(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,h){this.log_("handleServerMessage",o,h),"d"===o?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===o?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===o?this.onListenRevoked_(h.p,h.q):"ac"===o?this.onAuthRevoked_(h.s,h.d):"apc"===o?this.onAppCheckRevoked_(h.s,h.d):"sd"===o?this.onSecurityDebugPacket_(h):Xr("Unrecognized action received from server: "+(0,ie.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mi,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=mi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let h=Math.max(0,this.reconnectDelay_-o);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,en.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const h=o.onDataMessage_.bind(o),_=o.onReady_.bind(o),T=o.onRealtimeDisconnect_.bind(o),O=o.id+":"+c.nextConnectionId_++,G=o.lastSessionId;let te=!1,de=null;const et=function(){de?de.close():(te=!0,T())};o.realtime_={close:et,sendRequest:function(Gt){(0,ie.hu)(de,"sendRequest call when we're not connected not allowed."),de.sendRequest(Gt)}};const Dt=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[Gt,zt]=yield Promise.all([o.authTokenProvider_.getToken(Dt),o.appCheckTokenProvider_.getToken(Dt)]);te?er("getToken() completed but was canceled"):(er("getToken() completed. Creating connection."),o.authToken_=Gt&&Gt.accessToken,o.appCheckToken_=zt&&zt.token,de=new yo(O,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,h,_,T,Sn=>{Kn(Sn+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},G))}catch(Gt){o.log_("Failed to get token: "+Gt),te||(o.repoInfo_.nodeAdmin&&Kn(Gt),et())}}})()}interrupt(o){er("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){er("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const h=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const h=this.outstandingPuts_[o];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,h){let _;_=h?h.map(O=>Vn(O)).join("$"):"default";const T=this.removeListen_(o,_);T&&T.onComplete&&T.onComplete("permission_denied")}removeListen_(o,h){const _=new kr(o).toString();let T;if(this.listens.has(_)){const O=this.listens.get(_);T=O.get(h),O.delete(h),0===O.size&&this.listens.delete(_)}else T=void 0;return T}onAuthRevoked_(o,h){er("Auth token revoked: "+o+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,h){er("App check token revoked: "+o+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const h of o.values())this.sendListen_(h);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let h="js";(0,ie.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+h+"."+Fe.replace(/\./g,"-")]=1,(0,ie.uI)()?o["framework.cordova"]=1:(0,ie.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=Ca.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&o}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class ar{constructor(s,o){this.name=s,this.node=o}static Wrap(s,o){return new ar(s,o)}}class Ds{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,o){const h=new ar(In,s),_=new ar(In,o);return 0!==this.compare(h,_)}minPost(){return ar.MIN}}class Oi extends Ds{static get __EMPTY_NODE(){return Ji}static set __EMPTY_NODE(s){Ji=s}compare(s,o){return xn(s.name,o.name)}isDefinedOn(s){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,o){return!1}minPost(){return ar.MIN}maxPost(){return new ar(kn,Ji)}makePost(s,o){return(0,ie.hu)("string"==typeof s,"KeyIndex indexValue must always be a string."),new ar(s,Ji)}toString(){return".key"}}const Zr=new Oi;class cr{constructor(s,o,h,_,T=null){this.isReverse_=_,this.resultGenerator_=T,this.nodeStack_=[];let O=1;for(;!s.isEmpty();)if(O=o?h(s.key,o):1,_&&(O*=-1),O<0)s=this.isReverse_?s.left:s.right;else{if(0===O){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,s=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}let ro,$s=(()=>{class c{constructor(o,h,_,T,O){this.key=o,this.value=h,this.color=_??c.RED,this.left=T??ps.EMPTY_NODE,this.right=O??ps.EMPTY_NODE}copy(o,h,_,T,O){return new c(o??this.key,h??this.value,_??this.color,T??this.left,O??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,h,_){let T=this;const O=_(o,T.key);return T=O<0?T.copy(null,null,null,T.left.insert(o,h,_),null):0===O?T.copy(null,h,null,null,null):T.copy(null,null,null,null,T.right.insert(o,h,_)),T.fixUp_()}removeMin_(){if(this.left.isEmpty())return ps.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,h){let _,T;if(_=this,h(o,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(o,h),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===h(o,_.key)){if(_.right.isEmpty())return ps.EMPTY_NODE;T=_.right.min_(),_=_.copy(T.key,T.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(o,h))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,h)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class ps{constructor(s,o=ps.EMPTY_NODE){this.comparator_=s,this.root_=o}insert(s,o){return new ps(this.comparator_,this.root_.insert(s,o,this.comparator_).copy(null,null,$s.BLACK,null,null))}remove(s){return new ps(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,$s.BLACK,null,null))}get(s){let o,h=this.root_;for(;!h.isEmpty();){if(o=this.comparator_(s,h.key),0===o)return h.value;o<0?h=h.left:o>0&&(h=h.right)}return null}getPredecessorKey(s){let o,h=this.root_,_=null;for(;!h.isEmpty();){if(o=this.comparator_(s,h.key),0===o){if(h.left.isEmpty())return _?_.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}o<0?h=h.left:o>0&&(_=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new cr(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,o){return new cr(this.root_,s,this.comparator_,!1,o)}getReverseIteratorFrom(s,o){return new cr(this.root_,s,this.comparator_,!0,o)}getReverseIterator(s){return new cr(this.root_,null,this.comparator_,!0,s)}}function _l(c,s){return xn(c.name,s.name)}function po(c,s){return xn(c,s)}ps.EMPTY_NODE=new class aa{copy(s,o,h,_,T){return this}insert(s,o,h){return new $s(s,o,null)}remove(s,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const la=function(c){return"number"==typeof c?"number:"+Di(c):"string:"+c},Yt=function(c){if(c.isLeafNode()){const s=c.val();(0,ie.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,ie.r3)(s,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(c===ro||c.isEmpty(),"priority of unexpected type.");(0,ie.hu)(c===ro||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gr,ca,rs,ua=(()=>{class c{constructor(o,h=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=h,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}static set __childrenNodeConstructor(o){gr=o}static get __childrenNodeConstructor(){return gr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new c(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return wr(o)?this:".priority"===Xn(o)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,h){return null}updateImmediateChild(o,h){return".priority"===o?this.updatePriority(h):h.isEmpty()&&".priority"!==o?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,h).updatePriority(this.priorityNode_)}updateChild(o,h){const _=Xn(o);return null===_?h:h.isEmpty()&&".priority"!==_?this:((0,ie.hu)(".priority"!==_||1===fs(o),".priority must be the last token in a path"),this.updateImmediateChild(_,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wr(o),h)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,h){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+la(this.priorityNode_.val())+":");const h=typeof this.value_;o+=h+":",o+="number"===h?Di(this.value_):this.value_,this.lazyHash_=Wn(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===c.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof c.__childrenNodeConstructor?-1:((0,ie.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const h=typeof o.value_,_=typeof this.value_,T=c.VALUE_TYPE_ORDER.indexOf(h),O=c.VALUE_TYPE_ORDER.indexOf(_);return(0,ie.hu)(T>=0,"Unknown leaf type: "+h),(0,ie.hu)(O>=0,"Unknown leaf type: "+_),T===O?"object"===_?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:O-T}withIndex(){return this}isIndexed(){return!0}equals(o){if(o===this)return!0;if(o.isLeafNode()){const h=o;return this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_)}return!1}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const ue=new class j extends Ds{compare(s,o){const h=s.node.getPriority(),_=o.node.getPriority(),T=h.compareTo(_);return 0===T?xn(s.name,o.name):T}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,o){return!s.getPriority().equals(o.getPriority())}minPost(){return ar.MIN}maxPost(){return new ar(kn,new ua("[PRIORITY-POST]",rs))}makePost(s,o){const h=ca(s);return new ar(o,new ua("[PRIORITY-POST]",h))}toString(){return".priority"}},Pt=Math.log(2);class Z{constructor(s){this.count=parseInt(Math.log(s+1)/Pt,10),this.current_=this.count-1;const _=(T=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=s+1&_}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const q=function(c,s,o,h){c.sort(s);const _=function(te,de){const et=de-te;let ot,Dt;if(0===et)return null;if(1===et)return ot=c[te],Dt=o?o(ot):ot,new $s(Dt,ot.node,$s.BLACK,null,null);{const Gt=parseInt(et/2,10)+te,zt=_(te,Gt),Sn=_(Gt+1,de);return ot=c[Gt],Dt=o?o(ot):ot,new $s(Dt,ot.node,$s.BLACK,zt,Sn)}},G=function(te){let de=null,et=null,ot=c.length;const Dt=function(zt,Sn){const Br=ot-zt,Or=ot;ot-=zt;const bi=_(Br+1,Or),_s=c[Br],wa=o?o(_s):_s;Gt(new $s(wa,_s.node,Sn,null,bi))},Gt=function(zt){de?(de.left=zt,de=zt):(et=zt,de=zt)};for(let zt=0;zt<te.count;++zt){const Sn=te.nextBitIsOne(),Br=Math.pow(2,te.count-(zt+1));Sn?Dt(Br,$s.BLACK):(Dt(Br,$s.BLACK),Dt(Br,$s.RED))}return et}(new Z(c.length));return new ps(h||s,G)};let fe;const Ae={};class je{constructor(s,o){this.indexes_=s,this.indexSet_=o}static get Default(){return(0,ie.hu)(Ae&&ue,"ChildrenNode.ts has not been loaded"),fe=fe||new je({".priority":Ae},{".priority":ue}),fe}get(s){const o=(0,ie.DV)(this.indexes_,s);if(!o)throw new Error("No index defined for "+s);return o instanceof ps?o:null}hasIndex(s){return(0,ie.r3)(this.indexSet_,s.toString())}addIndex(s,o){(0,ie.hu)(s!==Zr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const h=[];let _=!1;const T=o.getIterator(ar.Wrap);let G,O=T.getNext();for(;O;)_=_||s.isDefinedOn(O.node),h.push(O),O=T.getNext();G=_?q(h,s.getCompare()):Ae;const te=s.toString(),de=Object.assign({},this.indexSet_);de[te]=s;const et=Object.assign({},this.indexes_);return et[te]=G,new je(et,de)}addToIndexes(s,o){const h=(0,ie.UI)(this.indexes_,(_,T)=>{const O=(0,ie.DV)(this.indexSet_,T);if((0,ie.hu)(O,"Missing index implementation for "+T),_===Ae){if(O.isDefinedOn(s.node)){const G=[],te=o.getIterator(ar.Wrap);let de=te.getNext();for(;de;)de.name!==s.name&&G.push(de),de=te.getNext();return G.push(s),q(G,O.getCompare())}return Ae}{const G=o.get(s.name);let te=_;return G&&(te=te.remove(new ar(s.name,G))),te.insert(s,s.node)}});return new je(h,this.indexSet_)}removeFromIndexes(s,o){const h=(0,ie.UI)(this.indexes_,_=>{if(_===Ae)return _;{const T=o.get(s.name);return T?_.remove(new ar(s.name,T)):_}});return new je(h,this.indexSet_)}}let Tt,_t=(()=>{class c{constructor(o,h,_){this.children_=o,this.priorityNode_=h,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Tt||(Tt=new c(new ps(po),null,je.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tt}updatePriority(o){return this.children_.isEmpty()?this:new c(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const h=this.children_.get(o);return null===h?Tt:h}}getChild(o){const h=Xn(o);return null===h?this:this.getImmediateChild(h).getChild(Wr(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,h){if((0,ie.hu)(h,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(h);{const _=new ar(o,h);let T,O;h.isEmpty()?(T=this.children_.remove(o),O=this.indexMap_.removeFromIndexes(_,this.children_)):(T=this.children_.insert(o,h),O=this.indexMap_.addToIndexes(_,this.children_));const G=T.isEmpty()?Tt:this.priorityNode_;return new c(T,G,O)}}updateChild(o,h){const _=Xn(o);if(null===_)return h;{(0,ie.hu)(".priority"!==Xn(o)||1===fs(o),".priority must be the last token in a path");const T=this.getImmediateChild(_).updateChild(Wr(o),h);return this.updateImmediateChild(_,T)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const h={};let _=0,T=0,O=!0;if(this.forEachChild(ue,(G,te)=>{h[G]=te.val(o),_++,O&&c.INTEGER_REGEXP_.test(G)?T=Math.max(T,Number(G)):O=!1}),!o&&O&&T<2*_){const G=[];for(const te in h)G[te]=h[te];return G}return o&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+la(this.getPriority().val())+":"),this.forEachChild(ue,(h,_)=>{const T=_.hash();""!==T&&(o+=":"+h+":"+T)}),this.lazyHash_=""===o?"":Wn(o)}return this.lazyHash_}getPredecessorChildName(o,h,_){const T=this.resolveIndex_(_);if(T){const O=T.getPredecessorKey(new ar(o,h));return O?O.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const h=this.resolveIndex_(o);if(h){const _=h.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(o){const h=this.getFirstChildName(o);return h?new ar(h,this.children_.get(h)):null}getLastChildName(o){const h=this.resolveIndex_(o);if(h){const _=h.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(o){const h=this.getLastChildName(o);return h?new ar(h,this.children_.get(h)):null}forEachChild(o,h){const _=this.resolveIndex_(o);return _?_.inorderTraversal(T=>h(T.name,T.node)):this.children_.inorderTraversal(h)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,h){const _=this.resolveIndex_(h);if(_)return _.getIteratorFrom(o,T=>T);{const T=this.children_.getIteratorFrom(o.name,ar.Wrap);let O=T.peek();for(;null!=O&&h.compare(O,o)<0;)T.getNext(),O=T.peek();return T}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,h){const _=this.resolveIndex_(h);if(_)return _.getReverseIteratorFrom(o,T=>T);{const T=this.children_.getReverseIteratorFrom(o.name,ar.Wrap);let O=T.peek();for(;null!=O&&h.compare(O,o)>0;)T.getNext(),O=T.peek();return T}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===Dn?-1:0}withIndex(o){if(o===Zr||this.indexMap_.hasIndex(o))return this;{const h=this.indexMap_.addIndex(o,this.children_);return new c(this.children_,this.priorityNode_,h)}}isIndexed(o){return o===Zr||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const h=o;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){const _=this.getIterator(ue),T=h.getIterator(ue);let O=_.getNext(),G=T.getNext();for(;O&&G;){if(O.name!==G.name||!O.node.equals(G.node))return!1;O=_.getNext(),G=T.getNext()}return null===O&&null===G}return!1}return!1}}resolveIndex_(o){return o===Zr?null:this.indexMap_.get(o.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const Dn=new class Bn extends _t{constructor(){super(new ps(po),_t.EMPTY_NODE,je.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return _t.EMPTY_NODE}isEmpty(){return!1}};function qn(c,s=null){if(null===c)return _t.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(s=c[".priority"]),(0,ie.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new ua(c,qn(s));if(c instanceof Array){let o=_t.EMPTY_NODE;return vn(c,(h,_)=>{if((0,ie.r3)(c,h)&&"."!==h.substring(0,1)){const T=qn(_);(T.isLeafNode()||!T.isEmpty())&&(o=o.updateImmediateChild(h,T))}}),o.updatePriority(qn(s))}{const o=[];let h=!1;if(vn(c,(O,G)=>{if("."!==O.substring(0,1)){const te=qn(G);te.isEmpty()||(h=h||!te.getPriority().isEmpty(),o.push(new ar(O,te)))}}),0===o.length)return _t.EMPTY_NODE;const T=q(o,_l,O=>O.name,po);if(h){const O=q(o,ue.getCompare());return new _t(T,qn(s),new je({".priority":O},{".priority":ue}))}return new _t(T,qn(s),je.Default)}}Object.defineProperties(ar,{MIN:{value:new ar(In,_t.EMPTY_NODE)},MAX:{value:new ar(kn,Dn)}}),Oi.__EMPTY_NODE=_t.EMPTY_NODE,ua.__childrenNodeConstructor=_t,function Ua(c){ro=c}(Dn),function W(c){rs=c}(Dn),function Q(c){ca=c}(qn);class Wi extends Ds{constructor(s){super(),this.indexPath_=s,(0,ie.hu)(!wr(s)&&".priority"!==Xn(s),"Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,o){const h=this.extractChild(s.node),_=this.extractChild(o.node),T=h.compareTo(_);return 0===T?xn(s.name,o.name):T}makePost(s,o){const h=qn(s),_=_t.EMPTY_NODE.updateChild(this.indexPath_,h);return new ar(o,_)}maxPost(){const s=_t.EMPTY_NODE.updateChild(this.indexPath_,Dn);return new ar(kn,s)}toString(){return Hs(this.indexPath_,0).join("/")}}const _i=new class zi extends Ds{compare(s,o){const h=s.node.compareTo(o.node);return 0===h?xn(s.name,o.name):h}isDefinedOn(s){return!0}indexedValueChanged(s,o){return!s.equals(o)}minPost(){return ar.MIN}maxPost(){return ar.MAX}makePost(s,o){const h=qn(s);return new ar(o,h)}toString(){return".value"}};function Ci(c){return{type:"value",snapshotNode:c}}function is(c,s){return{type:"child_added",snapshotNode:s,childName:c}}function qr(c,s){return{type:"child_removed",snapshotNode:s,childName:c}}function gs(c,s,o){return{type:"child_changed",snapshotNode:s,childName:c,oldSnap:o}}class Ki{constructor(s){this.index_=s}updateChild(s,o,h,_,T,O){(0,ie.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const G=s.getImmediateChild(o);return G.getChild(_).equals(h.getChild(_))&&G.isEmpty()===h.isEmpty()||(null!=O&&(h.isEmpty()?s.hasChild(o)?O.trackChildChange(qr(o,G)):(0,ie.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):G.isEmpty()?O.trackChildChange(is(o,h)):O.trackChildChange(gs(o,h,G))),s.isLeafNode()&&h.isEmpty())?s:s.updateImmediateChild(o,h).withIndex(this.index_)}updateFullNode(s,o,h){return null!=h&&(s.isLeafNode()||s.forEachChild(ue,(_,T)=>{o.hasChild(_)||h.trackChildChange(qr(_,T))}),o.isLeafNode()||o.forEachChild(ue,(_,T)=>{if(s.hasChild(_)){const O=s.getImmediateChild(_);O.equals(T)||h.trackChildChange(gs(_,T,O))}else h.trackChildChange(is(_,T))})),o.withIndex(this.index_)}updatePriority(s,o){return s.isEmpty()?_t.EMPTY_NODE:s.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qi{constructor(s){this.indexedFilter_=new Ki(s.getIndex()),this.index_=s.getIndex(),this.startPost_=qi.getStartPost_(s),this.endPost_=qi.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,h=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return o&&h}updateChild(s,o,h,_,T,O){return this.matches(new ar(o,h))||(h=_t.EMPTY_NODE),this.indexedFilter_.updateChild(s,o,h,_,T,O)}updateFullNode(s,o,h){o.isLeafNode()&&(o=_t.EMPTY_NODE);let _=o.withIndex(this.index_);_=_.updatePriority(_t.EMPTY_NODE);const T=this;return o.forEachChild(ue,(O,G)=>{T.matches(new ar(O,G))||(_=_.updateImmediateChild(O,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,_,h)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const o=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),o)}return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const o=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),o)}return s.getIndex().maxPost()}}class $o{constructor(s){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const h=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?h<=0:h<0},this.withinEndPost=o=>{const h=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?h<=0:h<0},this.rangedFilter_=new qi(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,o,h,_,T,O){return this.rangedFilter_.matches(new ar(o,h))||(h=_t.EMPTY_NODE),s.getImmediateChild(o).equals(h)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,o,h,_,T,O):this.fullLimitUpdateChild_(s,o,h,T,O)}updateFullNode(s,o,h){let _;if(o.isLeafNode()||o.isEmpty())_=_t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let T;_=_t.EMPTY_NODE.withIndex(this.index_),T=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let O=0;for(;T.hasNext()&&O<this.limit_;){const G=T.getNext();if(this.withinDirectionalStart(G)){if(!this.withinDirectionalEnd(G))break;_=_.updateImmediateChild(G.name,G.node),O++}}}else{let T;_=o.withIndex(this.index_),_=_.updatePriority(_t.EMPTY_NODE),T=this.reverse_?_.getReverseIterator(this.index_):_.getIterator(this.index_);let O=0;for(;T.hasNext();){const G=T.getNext();O<this.limit_&&this.withinDirectionalStart(G)&&this.withinDirectionalEnd(G)?O++:_=_.updateImmediateChild(G.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,_,h)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,o,h,_,T){let O;if(this.reverse_){const ot=this.index_.getCompare();O=(Dt,Gt)=>ot(Gt,Dt)}else O=this.index_.getCompare();const G=s;(0,ie.hu)(G.numChildren()===this.limit_,"");const te=new ar(o,h),de=this.reverse_?G.getFirstChild(this.index_):G.getLastChild(this.index_),et=this.rangedFilter_.matches(te);if(G.hasChild(o)){const ot=G.getImmediateChild(o);let Dt=_.getChildAfterChild(this.index_,de,this.reverse_);for(;null!=Dt&&(Dt.name===o||G.hasChild(Dt.name));)Dt=_.getChildAfterChild(this.index_,Dt,this.reverse_);const Gt=null==Dt?1:O(Dt,te);if(et&&!h.isEmpty()&&Gt>=0)return T?.trackChildChange(gs(o,h,ot)),G.updateImmediateChild(o,h);{T?.trackChildChange(qr(o,ot));const Sn=G.updateImmediateChild(o,_t.EMPTY_NODE);return null!=Dt&&this.rangedFilter_.matches(Dt)?(T?.trackChildChange(is(Dt.name,Dt.node)),Sn.updateImmediateChild(Dt.name,Dt.node)):Sn}}return h.isEmpty()?s:et&&O(de,te)>=0?(null!=T&&(T.trackChildChange(qr(de.name,de.node)),T.trackChildChange(is(o,h))),G.updateImmediateChild(o,h).updateImmediateChild(de.name,_t.EMPTY_NODE)):s}}class vo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ue}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:In}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ue}copy(){const s=new vo;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function ce(c,s,o){const h=c.copy();return h.startSet_=!0,void 0===s&&(s=null),h.indexStartValue_=s,null!=o?(h.startNameSet_=!0,h.indexStartName_=o):(h.startNameSet_=!1,h.indexStartName_=""),h}function Ct(c,s,o){const h=c.copy();return h.endSet_=!0,void 0===s&&(s=null),h.indexEndValue_=s,void 0!==o?(h.endNameSet_=!0,h.indexEndName_=o):(h.endNameSet_=!1,h.indexEndName_=""),h}function Fn(c,s){const o=c.copy();return o.index_=s,o}function ai(c){const s={};if(c.isDefault())return s;let o;if(c.index_===ue?o="$priority":c.index_===_i?o="$value":c.index_===Zr?o="$key":((0,ie.hu)(c.index_ instanceof Wi,"Unrecognized index type!"),o=c.index_.toString()),s.orderBy=(0,ie.Wl)(o),c.startSet_){const h=c.startAfterSet_?"startAfter":"startAt";s[h]=(0,ie.Wl)(c.indexStartValue_),c.startNameSet_&&(s[h]+=","+(0,ie.Wl)(c.indexStartName_))}if(c.endSet_){const h=c.endBeforeSet_?"endBefore":"endAt";s[h]=(0,ie.Wl)(c.indexEndValue_),c.endNameSet_&&(s[h]+=","+(0,ie.Wl)(c.indexEndName_))}return c.limitSet_&&(c.isViewFromLeft()?s.limitToFirst=c.limit_:s.limitToLast=c.limit_),s}function di(c){const s={};if(c.startSet_&&(s.sp=c.indexStartValue_,c.startNameSet_&&(s.sn=c.indexStartName_),s.sin=!c.startAfterSet_),c.endSet_&&(s.ep=c.indexEndValue_,c.endNameSet_&&(s.en=c.indexEndName_),s.ein=!c.endBeforeSet_),c.limitSet_){s.l=c.limit_;let o=c.viewFrom_;""===o&&(o=c.isViewFromLeft()?"l":"r"),s.vf=o}return c.index_!==ue&&(s.i=c.index_.toString()),s}class li extends Es{constructor(s,o,h,_){super(),this.repoInfo_=s,this.onDataUpdate_=o,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.log_=ur("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,o){return void 0!==o?"tag$"+o:((0,ie.hu)(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,o,h,_){const T=s._path.toString();this.log_("Listen called for "+T+" "+s._queryIdentifier);const O=li.getListenId_(s,h),G={};this.listens_[O]=G;const te=ai(s._queryParams);this.restRequest_(T+".json",te,(de,et)=>{let ot=et;if(404===de&&(ot=null,de=null),null===de&&this.onDataUpdate_(T,ot,!1,h),(0,ie.DV)(this.listens_,O)===G){let Dt;Dt=de?401===de?"permission_denied":"rest_error:"+de:"ok",_(Dt,null)}})}unlisten(s,o){const h=li.getListenId_(s,o);delete this.listens_[h]}get(s){const o=ai(s._queryParams),h=s._path.toString(),_=new ie.BH;return this.restRequest_(h+".json",o,(T,O)=>{let G=O;404===T&&(G=null,T=null),null===T?(this.onDataUpdate_(h,G,!1,null),_.resolve(G)):_.reject(new Error(G))}),_.promise}refreshAuthToken(s){}restRequest_(s,o={},h){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,T])=>{_&&_.accessToken&&(o.auth=_.accessToken),T&&T.token&&(o.ac=T.token);const O=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(o);this.log_("Sending REST request for "+O);const G=new XMLHttpRequest;G.onreadystatechange=()=>{if(h&&4===G.readyState){this.log_("REST Response for "+O+" received. status:",G.status,"response:",G.responseText);let te=null;if(G.status>=200&&G.status<300){try{te=(0,ie.cI)(G.responseText)}catch{Kn("Failed to parse JSON response for "+O+": "+G.responseText)}h(null,te)}else 401!==G.status&&404!==G.status&&Kn("Got unsuccessful REST response for "+O+" Status: "+G.status),h(G.status);h=null}},G.open("GET",O,!0),G.send()})}}class Qr{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,o){this.rootNode_=this.rootNode_.updateChild(s,o)}}function ss(){return{value:null,children:new Map}}function hi(c,s,o){if(wr(s))c.value=o,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(s,o);else{const h=Xn(s);c.children.has(h)||c.children.set(h,ss()),hi(c.children.get(h),s=Wr(s),o)}}function xi(c,s){if(wr(s))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const o=c.value;return c.value=null,o.forEachChild(ue,(h,_)=>{hi(c,new kr(h),_)}),xi(c,s)}}if(c.children.size>0){const o=Xn(s);return s=Wr(s),c.children.has(o)&&xi(c.children.get(o),s)&&c.children.delete(o),0===c.children.size}return!0}function da(c,s,o){null!==c.value?o(s,c.value):function ha(c,s){c.children.forEach((o,h)=>{s(h,o)})}(c,(h,_)=>{da(_,new kr(s.toString()+"/"+h),o)})}class fa{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),o=Object.assign({},s);return this.last_&&vn(this.last_,(h,_)=>{o[h]=o[h]-_}),this.last_=s,o}}class Vl{constructor(s,o){this.server_=o,this.statsToReport_={},this.statsListener_=new fa(s);const h=1e4+2e4*Math.random();Be(this.reportStats_.bind(this),Math.floor(h))}reportStats_(){const s=this.statsListener_.get(),o={};let h=!1;vn(s,(_,T)=>{T>0&&(0,ie.r3)(this.statsToReport_,_)&&(o[_]=T,h=!0)}),h&&this.server_.reportStats(o),Be(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Go=(()=>{return(c=Go||(Go={}))[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Go;var c})();function Gu(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class yl{constructor(s,o,h){this.path=s,this.affectedTree=o,this.revert=h,this.type=Go.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(s){if(wr(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new kr(s));return new yl(Fr(),o,this.revert)}}return(0,ie.hu)(Xn(this.path)===s,"operationForChild called for unrelated child."),new yl(Wr(this.path),this.affectedTree,this.revert)}}class lu{constructor(s,o){this.source=s,this.path=o,this.type=Go.LISTEN_COMPLETE}operationForChild(s){return wr(this.path)?new lu(this.source,Fr()):new lu(this.source,Wr(this.path))}}class Cl{constructor(s,o,h){this.source=s,this.path=o,this.snap=h,this.type=Go.OVERWRITE}operationForChild(s){return wr(this.path)?new Cl(this.source,Fr(),this.snap.getImmediateChild(s)):new Cl(this.source,Wr(this.path),this.snap)}}class pa{constructor(s,o,h){this.source=s,this.path=o,this.children=h,this.type=Go.MERGE}operationForChild(s){if(wr(this.path)){const o=this.children.subtree(new kr(s));return o.isEmpty()?null:o.value?new Cl(this.source,Fr(),o.value):new pa(this.source,Fr(),o)}return(0,ie.hu)(Xn(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new pa(this.source,Wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sa{constructor(s,o,h){this.node_=s,this.fullyInitialized_=o,this.filtered_=h}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(wr(s))return this.isFullyInitialized()&&!this.filtered_;const o=Xn(s);return this.isCompleteForChild(o)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}class bu{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function vl(c,s,o,h,_,T){const O=h.filter(G=>G.type===o);O.sort((G,te)=>function Ts(c,s,o){if(null==s.childName||null==o.childName)throw(0,ie.g5)("Should only compare child_ events.");const h=new ar(s.childName,s.snapshotNode),_=new ar(o.childName,o.snapshotNode);return c.index_.compare(h,_)}(c,G,te)),O.forEach(G=>{const te=function io(c,s,o){return"value"===s.type||"child_removed"===s.type||(s.prevName=o.getPredecessorChildName(s.childName,s.snapshotNode,c.index_)),s}(c,G,T);_.forEach(de=>{de.respondsTo(G.type)&&s.push(de.createEvent(te,c.query_))})})}function tl(c,s){return{eventCache:c,serverCache:s}}function ga(c,s,o,h){return tl(new Sa(s,o,h),c.serverCache)}function zu(c,s,o,h){return tl(c.eventCache,new Sa(s,o,h))}function rn(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function Hi(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let cl;class fn{constructor(s,o=(()=>(cl||(cl=new ps(Mr)),cl))()){this.value=s,this.children=o}static fromObject(s){let o=new fn(null);return vn(s,(h,_)=>{o=o.set(new kr(h),_)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,o){if(null!=this.value&&o(this.value))return{path:Fr(),value:this.value};if(wr(s))return null;{const h=Xn(s),_=this.children.get(h);if(null!==_){const T=_.findRootMostMatchingPathAndValue(Wr(s),o);return null!=T?{path:Vr(new kr(h),T.path),value:T.value}:null}return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(wr(s))return this;{const o=Xn(s),h=this.children.get(o);return null!==h?h.subtree(Wr(s)):new fn(null)}}set(s,o){if(wr(s))return new fn(o,this.children);{const h=Xn(s),T=(this.children.get(h)||new fn(null)).set(Wr(s),o),O=this.children.insert(h,T);return new fn(this.value,O)}}remove(s){if(wr(s))return this.children.isEmpty()?new fn(null):new fn(null,this.children);{const o=Xn(s),h=this.children.get(o);if(h){const _=h.remove(Wr(s));let T;return T=_.isEmpty()?this.children.remove(o):this.children.insert(o,_),null===this.value&&T.isEmpty()?new fn(null):new fn(this.value,T)}return this}}get(s){if(wr(s))return this.value;{const o=Xn(s),h=this.children.get(o);return h?h.get(Wr(s)):null}}setTree(s,o){if(wr(s))return o;{const h=Xn(s),T=(this.children.get(h)||new fn(null)).setTree(Wr(s),o);let O;return O=T.isEmpty()?this.children.remove(h):this.children.insert(h,T),new fn(this.value,O)}}fold(s){return this.fold_(Fr(),s)}fold_(s,o){const h={};return this.children.inorderTraversal((_,T)=>{h[_]=T.fold_(Vr(s,_),o)}),o(s,this.value,h)}findOnPath(s,o){return this.findOnPath_(s,Fr(),o)}findOnPath_(s,o,h){const _=!!this.value&&h(o,this.value);if(_)return _;if(wr(s))return null;{const T=Xn(s),O=this.children.get(T);return O?O.findOnPath_(Wr(s),Vr(o,T),h):null}}foreachOnPath(s,o){return this.foreachOnPath_(s,Fr(),o)}foreachOnPath_(s,o,h){if(wr(s))return this;{this.value&&h(o,this.value);const _=Xn(s),T=this.children.get(_);return T?T.foreachOnPath_(Wr(s),Vr(o,_),h):new fn(null)}}foreach(s){this.foreach_(Fr(),s)}foreach_(s,o){this.children.inorderTraversal((h,_)=>{_.foreach_(Vr(s,h),o)}),this.value&&o(s,this.value)}foreachChild(s){this.children.inorderTraversal((o,h)=>{h.value&&s(o,h.value)})}}class wn{constructor(s){this.writeTree_=s}static empty(){return new wn(new fn(null))}}function Il(c,s,o){if(wr(s))return new wn(new fn(o));{const h=c.writeTree_.findRootMostValueAndPath(s);if(null!=h){const _=h.path;let T=h.value;const O=Ni(_,s);return T=T.updateChild(O,o),new wn(c.writeTree_.set(_,T))}{const _=new fn(o),T=c.writeTree_.setTree(s,_);return new wn(T)}}}function on(c,s,o){let h=c;return vn(o,(_,T)=>{h=Il(h,Vr(s,_),T)}),h}function kt(c,s){if(wr(s))return wn.empty();{const o=c.writeTree_.setTree(s,new fn(null));return new wn(o)}}function Zt(c,s){return null!=Ii(c,s)}function Ii(c,s){const o=c.writeTree_.findRootMostValueAndPath(s);return null!=o?c.writeTree_.get(o.path).getChild(Ni(o.path,s)):null}function Cs(c){const s=[],o=c.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(ue,(h,_)=>{s.push(new ar(h,_))}):c.writeTree_.children.inorderTraversal((h,_)=>{null!=_.value&&s.push(new ar(h,_.value))}),s}function Is(c,s){if(wr(s))return c;{const o=Ii(c,s);return new wn(null!=o?new fn(o):c.writeTree_.subtree(s))}}function ma(c){return c.writeTree_.isEmpty()}function Aa(c,s){return nl(Fr(),c.writeTree_,s)}function nl(c,s,o){if(null!=s.value)return o.updateChild(c,s.value);{let h=null;return s.children.inorderTraversal((_,T)=>{".priority"===_?((0,ie.hu)(null!==T.value,"Priority writes must always be leaf nodes"),h=T.value):o=nl(Vr(c,_),T,o)}),!o.getChild(c).isEmpty()&&null!==h&&(o=o.updateChild(Vr(c,".priority"),h)),o}}function qs(c,s){return qu(s,c)}function Al(c,s){if(c.snap)return Ui(c.path,s);for(const o in c.children)if(c.children.hasOwnProperty(o)&&Ui(Vr(c.path,o),s))return!0;return!1}function Zo(c){return c.visible}function Ku(c,s,o){let h=wn.empty();for(let _=0;_<c.length;++_){const T=c[_];if(s(T)){const O=T.path;let G;if(T.snap)Ui(o,O)?(G=Ni(o,O),h=Il(h,G,T.snap)):Ui(O,o)&&(G=Ni(O,o),h=Il(h,Fr(),T.snap.getChild(G)));else{if(!T.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(Ui(o,O))G=Ni(o,O),h=on(h,G,T.children);else if(Ui(O,o))if(G=Ni(O,o),wr(G))h=on(h,Fr(),T.children);else{const te=(0,ie.DV)(T.children,Xn(G));if(te){const de=te.getChild(Wr(G));h=Il(h,Fr(),de)}}}}}return h}function Ss(c,s,o,h,_){if(h||_){const T=Is(c.visibleWrites,s);return!_&&ma(T)?o:_||null!=o||Zt(T,Fr())?Aa(Ku(c.allWrites,function(de){return(de.visible||_)&&(!h||!~h.indexOf(de.writeId))&&(Ui(de.path,s)||Ui(s,de.path))},s),o||_t.EMPTY_NODE):null}{const T=Ii(c.visibleWrites,s);if(null!=T)return T;{const O=Is(c.visibleWrites,s);return ma(O)?o:null!=o||Zt(O,Fr())?Aa(O,o||_t.EMPTY_NODE):null}}}function go(c,s,o,h){return Ss(c.writeTree,c.treePath,s,o,h)}function Na(c,s){return function zn(c,s,o){let h=_t.EMPTY_NODE;const _=Ii(c.visibleWrites,s);if(_)return _.isLeafNode()||_.forEachChild(ue,(T,O)=>{h=h.updateImmediateChild(T,O)}),h;if(o){const T=Is(c.visibleWrites,s);return o.forEachChild(ue,(O,G)=>{const te=Aa(Is(T,new kr(O)),G);h=h.updateImmediateChild(O,te)}),Cs(T).forEach(O=>{h=h.updateImmediateChild(O.name,O.node)}),h}return Cs(Is(c.visibleWrites,s)).forEach(O=>{h=h.updateImmediateChild(O.name,O.node)}),h}(c.writeTree,c.treePath,s)}function Ra(c,s,o,h){return function Ys(c,s,o,h,_){(0,ie.hu)(h||_,"Either existingEventSnap or existingServerSnap must exist");const T=Vr(s,o);if(Zt(c.visibleWrites,T))return null;{const O=Is(c.visibleWrites,T);return ma(O)?_.getChild(o):Aa(O,_.getChild(o))}}(c.writeTree,c.treePath,s,o,h)}function Ma(c,s){return function jl(c,s){return Ii(c.visibleWrites,s)}(c.writeTree,Vr(c.treePath,s))}function dl(c,s,o){return function ti(c,s,o,h){const _=Vr(s,o),T=Ii(c.visibleWrites,_);return null!=T?T:h.isCompleteForChild(o)?Aa(Is(c.visibleWrites,_),h.getNode().getImmediateChild(o)):null}(c.writeTree,c.treePath,s,o)}function Pi(c,s){return qu(Vr(c.treePath,s),c.writeTree)}function qu(c,s){return{treePath:c,writeTree:s}}class Eu{constructor(){this.changeMap=new Map}trackChildChange(s){const o=s.type,h=s.childName;(0,ie.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(h);if(_){const T=_.type;if("child_added"===o&&"child_removed"===T)this.changeMap.set(h,gs(h,s.snapshotNode,_.snapshotNode));else if("child_removed"===o&&"child_added"===T)this.changeMap.delete(h);else if("child_removed"===o&&"child_changed"===T)this.changeMap.set(h,qr(h,_.oldSnap));else if("child_changed"===o&&"child_added"===T)this.changeMap.set(h,is(h,s.snapshotNode));else{if("child_changed"!==o||"child_changed"!==T)throw(0,ie.g5)("Illegal combination of changes: "+s+" occurred after "+_);this.changeMap.set(h,gs(h,s.snapshotNode,_.oldSnap))}}else this.changeMap.set(h,s)}getChanges(){return Array.from(this.changeMap.values())}}const Du=new class ja{getCompleteChild(s){return null}getChildAfterChild(s,o,h){return null}};class Kc{constructor(s,o,h=null){this.writes_=s,this.viewCache_=o,this.optCompleteServerCache_=h}getCompleteChild(s){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(s))return o.getNode().getImmediateChild(s);{const h=null!=this.optCompleteServerCache_?new Sa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dl(this.writes_,s,h)}}getChildAfterChild(s,o,h){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hi(this.viewCache_),T=function ko(c,s,o,h,_,T){return function ui(c,s,o,h,_,T,O){let G;const te=Is(c.visibleWrites,s),de=Ii(te,Fr());if(null!=de)G=de;else{if(null==o)return[];G=Aa(te,o)}if(G=G.withIndex(O),G.isEmpty()||G.isLeafNode())return[];{const et=[],ot=O.getCompare(),Dt=T?G.getReverseIteratorFrom(h,O):G.getIteratorFrom(h,O);let Gt=Dt.getNext();for(;Gt&&et.length<_;)0!==ot(Gt,h)&&et.push(Gt),Gt=Dt.getNext();return et}}(c.writeTree,c.treePath,s,o,h,_,T)}(this.writes_,_,o,1,h,s);return 0===T.length?null:T[0]}}function Cu(c,s,o,h,_,T){const O=s.eventCache;if(null!=Ma(h,o))return s;{let G,te;if(wr(o))if((0,ie.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const de=Hi(s),ot=Na(h,de instanceof _t?de:_t.EMPTY_NODE);G=c.filter.updateFullNode(s.eventCache.getNode(),ot,T)}else{const de=go(h,Hi(s));G=c.filter.updateFullNode(s.eventCache.getNode(),de,T)}else{const de=Xn(o);if(".priority"===de){(0,ie.hu)(1===fs(o),"Can't have a priority with additional path components");const et=O.getNode();te=s.serverCache.getNode();const ot=Ra(h,o,et,te);G=null!=ot?c.filter.updatePriority(et,ot):O.getNode()}else{const et=Wr(o);let ot;if(O.isCompleteForChild(de)){te=s.serverCache.getNode();const Dt=Ra(h,o,O.getNode(),te);ot=null!=Dt?O.getNode().getImmediateChild(de).updateChild(et,Dt):O.getNode().getImmediateChild(de)}else ot=dl(h,de,s.serverCache);G=null!=ot?c.filter.updateChild(O.getNode(),de,ot,et,_,T):O.getNode()}}return ga(s,G,O.isFullyInitialized()||wr(o),c.filter.filtersNodes())}}function yi(c,s,o,h,_,T,O,G){const te=s.serverCache;let de;const et=O?c.filter:c.filter.getIndexedFilter();if(wr(o))de=et.updateFullNode(te.getNode(),h,null);else if(et.filtersNodes()&&!te.isFiltered()){const Gt=te.getNode().updateChild(o,h);de=et.updateFullNode(te.getNode(),Gt,null)}else{const Gt=Xn(o);if(!te.isCompleteForPath(o)&&fs(o)>1)return s;const zt=Wr(o),Br=te.getNode().getImmediateChild(Gt).updateChild(zt,h);de=".priority"===Gt?et.updatePriority(te.getNode(),Br):et.updateChild(te.getNode(),Gt,Br,zt,Du,null)}const ot=zu(s,de,te.isFullyInitialized()||wr(o),et.filtersNodes());return Cu(c,ot,o,_,new Kc(_,ot,T),G)}function il(c,s,o,h,_,T,O){const G=s.eventCache;let te,de;const et=new Kc(_,s,T);if(wr(o))de=c.filter.updateFullNode(s.eventCache.getNode(),h,O),te=ga(s,de,!0,c.filter.filtersNodes());else{const ot=Xn(o);if(".priority"===ot)de=c.filter.updatePriority(s.eventCache.getNode(),h),te=ga(s,de,G.isFullyInitialized(),G.isFiltered());else{const Dt=Wr(o),Gt=G.getNode().getImmediateChild(ot);let zt;if(wr(Dt))zt=h;else{const Sn=et.getCompleteChild(ot);zt=null!=Sn?".priority"===eo(Dt)&&Sn.getChild(To(Dt)).isEmpty()?Sn:Sn.updateChild(Dt,h):_t.EMPTY_NODE}te=Gt.equals(zt)?s:ga(s,c.filter.updateChild(G.getNode(),ot,zt,Dt,et,O),G.isFullyInitialized(),c.filter.filtersNodes())}}return te}function hl(c,s){return c.eventCache.isCompleteForChild(s)}function Yu(c,s,o){return o.foreach((h,_)=>{s=s.updateChild(h,_)}),s}function Os(c,s,o,h,_,T,O,G){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let de,te=s;de=wr(o)?h:new fn(null).setTree(o,h);const et=s.serverCache.getNode();return de.children.inorderTraversal((ot,Dt)=>{if(et.hasChild(ot)){const zt=Yu(0,s.serverCache.getNode().getImmediateChild(ot),Dt);te=yi(c,te,new kr(ot),zt,_,T,O,G)}}),de.children.inorderTraversal((ot,Dt)=>{const Gt=!s.serverCache.isCompleteForChild(ot)&&null===Dt.value;if(!et.hasChild(ot)&&!Gt){const Sn=Yu(0,s.serverCache.getNode().getImmediateChild(ot),Dt);te=yi(c,te,new kr(ot),Sn,_,T,O,G)}}),te}class A{constructor(s,o){this.query_=s,this.eventRegistrations_=[];const h=this.query_._queryParams,_=new Ki(h.getIndex()),T=function F(c){return c.loadsAllData()?new Ki(c.getIndex()):c.hasLimit()?new $o(c):new qi(c)}(h);this.processor_=function uu(c){return{filter:c}}(T);const O=o.serverCache,G=o.eventCache,te=_.updateFullNode(_t.EMPTY_NODE,O.getNode(),null),de=T.updateFullNode(_t.EMPTY_NODE,G.getNode(),null),et=new Sa(te,O.isFullyInitialized(),_.filtersNodes()),ot=new Sa(de,G.isFullyInitialized(),T.filtersNodes());this.viewCache_=tl(ot,et),this.eventGenerator_=new bu(this.query_)}get query(){return this.query_}}function U(c,s){const o=Hi(c.viewCache_);return o&&(c.query._queryParams.loadsAllData()||!wr(s)&&!o.getImmediateChild(Xn(s)).isEmpty())?o.getChild(s):null}function K(c){return 0===c.eventRegistrations_.length}function Re(c,s,o){const h=[];if(o){(0,ie.hu)(null==s,"A cancel should cancel all event registrations.");const _=c.query._path;c.eventRegistrations_.forEach(T=>{const O=T.createCancelEvent(o,_);O&&h.push(O)})}if(s){let _=[];for(let T=0;T<c.eventRegistrations_.length;++T){const O=c.eventRegistrations_[T];if(O.matches(s)){if(s.hasAnyCallback()){_=_.concat(c.eventRegistrations_.slice(T+1));break}}else _.push(O)}c.eventRegistrations_=_}else c.eventRegistrations_=[];return h}function xe(c,s,o,h){s.type===Go.MERGE&&null!==s.source.queryId&&((0,ie.hu)(Hi(c.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(rn(c.viewCache_),"Missing event cache, even though we have a server cache"));const _=c.viewCache_,T=function rl(c,s,o,h,_){const T=new Eu;let O,G;if(o.type===Go.OVERWRITE){const de=o;de.source.fromUser?O=il(c,s,de.path,de.snap,h,_,T):((0,ie.hu)(de.source.fromServer,"Unknown source."),G=de.source.tagged||s.serverCache.isFiltered()&&!wr(de.path),O=yi(c,s,de.path,de.snap,h,_,G,T))}else if(o.type===Go.MERGE){const de=o;de.source.fromUser?O=function sl(c,s,o,h,_,T,O){let G=s;return h.foreach((te,de)=>{const et=Vr(o,te);hl(s,Xn(et))&&(G=il(c,G,et,de,_,T,O))}),h.foreach((te,de)=>{const et=Vr(o,te);hl(s,Xn(et))||(G=il(c,G,et,de,_,T,O))}),G}(c,s,de.path,de.children,h,_,T):((0,ie.hu)(de.source.fromServer,"Unknown source."),G=de.source.tagged||s.serverCache.isFiltered(),O=Os(c,s,de.path,de.children,h,_,G,T))}else if(o.type===Go.ACK_USER_WRITE){const de=o;O=de.revert?function xa(c,s,o,h,_,T){let O;if(null!=Ma(h,o))return s;{const G=new Kc(h,s,_),te=s.eventCache.getNode();let de;if(wr(o)||".priority"===Xn(o)){let et;if(s.serverCache.isFullyInitialized())et=go(h,Hi(s));else{const ot=s.serverCache.getNode();(0,ie.hu)(ot instanceof _t,"serverChildren would be complete if leaf node"),et=Na(h,ot)}de=c.filter.updateFullNode(te,et,T)}else{const et=Xn(o);let ot=dl(h,et,s.serverCache);null==ot&&s.serverCache.isCompleteForChild(et)&&(ot=te.getImmediateChild(et)),de=null!=ot?c.filter.updateChild(te,et,ot,Wr(o),G,T):s.eventCache.getNode().hasChild(et)?c.filter.updateChild(te,et,_t.EMPTY_NODE,Wr(o),G,T):te,de.isEmpty()&&s.serverCache.isFullyInitialized()&&(O=go(h,Hi(s)),O.isLeafNode()&&(de=c.filter.updateFullNode(de,O,T)))}return O=s.serverCache.isFullyInitialized()||null!=Ma(h,Fr()),ga(s,de,O,c.filter.filtersNodes())}}(c,s,de.path,h,_,T):function Oa(c,s,o,h,_,T,O){if(null!=Ma(_,o))return s;const G=s.serverCache.isFiltered(),te=s.serverCache;if(null!=h.value){if(wr(o)&&te.isFullyInitialized()||te.isCompleteForPath(o))return yi(c,s,o,te.getNode().getChild(o),_,T,G,O);if(wr(o)){let de=new fn(null);return te.getNode().forEachChild(Zr,(et,ot)=>{de=de.set(new kr(et),ot)}),Os(c,s,o,de,_,T,G,O)}return s}{let de=new fn(null);return h.foreach((et,ot)=>{const Dt=Vr(o,et);te.isCompleteForPath(Dt)&&(de=de.set(et,te.getNode().getChild(Dt)))}),Os(c,s,o,de,_,T,G,O)}}(c,s,de.path,de.affectedTree,h,_,T)}else{if(o.type!==Go.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+o.type);O=function $l(c,s,o,h,_){const T=s.serverCache;return Cu(c,zu(s,T.getNode(),T.isFullyInitialized()||wr(o),T.isFiltered()),o,h,Du,_)}(c,s,o.path,h,T)}const te=T.getChanges();return function At(c,s,o){const h=s.eventCache;if(h.isFullyInitialized()){const _=h.getNode().isLeafNode()||h.getNode().isEmpty(),T=rn(c);(o.length>0||!c.eventCache.isFullyInitialized()||_&&!h.getNode().equals(T)||!h.getNode().getPriority().equals(T.getPriority()))&&o.push(Ci(rn(s)))}}(s,O,te),{viewCache:O,changes:te}}(c.processor_,_,s,o,h);return function Tu(c,s){(0,ie.hu)(s.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(s.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,T.viewCache),(0,ie.hu)(T.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=T.viewCache,pn(c,T.changes,T.viewCache.eventCache.getNode(),null)}function pn(c,s,o,h){return function Wu(c,s,o,h){const _=[],T=[];return s.forEach(O=>{"child_changed"===O.type&&c.index_.indexedValueChanged(O.oldSnap,O.snapshotNode)&&T.push(function jo(c,s){return{type:"child_moved",snapshotNode:s,childName:c}}(O.childName,O.snapshotNode))}),vl(c,_,"child_removed",s,h,o),vl(c,_,"child_added",s,h,o),vl(c,_,"child_moved",T,h,o),vl(c,_,"child_changed",s,h,o),vl(c,_,"value",s,h,o),_}(c.eventGenerator_,s,o,h?[h]:c.eventRegistrations_)}let Cr,Ga;class gn{constructor(){this.views=new Map}}function Fo(c,s,o,h){const _=s.source.queryId;if(null!==_){const T=c.views.get(_);return(0,ie.hu)(null!=T,"SyncTree gave us an op for an invalid query."),xe(T,s,o,h)}{let T=[];for(const O of c.views.values())T=T.concat(xe(O,s,o,h));return T}}function _a(c,s,o,h,_){const O=c.views.get(s._queryIdentifier);if(!O){let G=go(o,_?h:null),te=!1;G?te=!0:h instanceof _t?(G=Na(o,h),te=!1):(G=_t.EMPTY_NODE,te=!1);const de=tl(new Sa(G,te,!1),new Sa(h,_,!1));return new A(s,de)}return O}function va(c){const s=[];for(const o of c.views.values())o.query._queryParams.loadsAllData()||s.push(o);return s}function so(c,s){let o=null;for(const h of c.views.values())o=o||U(h,s);return o}function $a(c,s){return s._queryParams.loadsAllData()?Io(c):c.views.get(s._queryIdentifier)}function Qo(c,s){return null!=$a(c,s)}function zo(c){return null!=Io(c)}function Io(c){for(const s of c.views.values())if(s.query._queryParams.loadsAllData())return s;return null}let Jo=1;class Wa{constructor(s){this.listenProvider_=s,this.syncPointTree_=new fn(null),this.pendingWriteTree_=function _n(){return{visibleWrites:wn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function du(c,s,o,h,_){return function Sl(c,s,o,h,_){(0,ie.hu)(h>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),c.allWrites.push({path:s,snap:o,writeId:h,visible:_}),_&&(c.visibleWrites=Il(c.visibleWrites,s,o)),c.lastWriteId=h}(c.pendingWriteTree_,s,o,h,_),_?Gr(c,new Cl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,o)):[]}function fl(c,s,o=!1){const h=function Wo(c,s){for(let o=0;o<c.allWrites.length;o++){const h=c.allWrites[o];if(h.writeId===s)return h}return null}(c.pendingWriteTree_,s);if(function wu(c,s){const o=c.allWrites.findIndex(G=>G.writeId===s);(0,ie.hu)(o>=0,"removeWrite called with nonexistent writeId.");const h=c.allWrites[o];c.allWrites.splice(o,1);let _=h.visible,T=!1,O=c.allWrites.length-1;for(;_&&O>=0;){const G=c.allWrites[O];G.visible&&(O>=o&&Al(G,h.path)?_=!1:Ui(h.path,G.path)&&(T=!0)),O--}return!!_&&(T?(function Er(c){c.visibleWrites=Ku(c.allWrites,Zo,Fr()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(h.snap?c.visibleWrites=kt(c.visibleWrites,h.path):vn(h.children,te=>{c.visibleWrites=kt(c.visibleWrites,Vr(h.path,te))}),!0))}(c.pendingWriteTree_,s)){let T=new fn(null);return null!=h.snap?T=T.set(Fr(),!0):vn(h.children,O=>{T=T.set(new kr(O),!0)}),Gr(c,new yl(h.path,T,o))}return[]}function H(c,s,o){return Gr(c,new Cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,o))}function pt(c,s,o,h,_=!1){const T=s._path,O=c.syncPointTree_.get(T);let G=[];if(O&&("default"===s._queryIdentifier||Qo(O,s))){const te=function ya(c,s,o,h){const _=s._queryIdentifier,T=[];let O=[];const G=zo(c);if("default"===_)for(const[te,de]of c.views.entries())O=O.concat(Re(de,o,h)),K(de)&&(c.views.delete(te),de.query._queryParams.loadsAllData()||T.push(de.query));else{const te=c.views.get(_);te&&(O=O.concat(Re(te,o,h)),K(te)&&(c.views.delete(_),te.query._queryParams.loadsAllData()||T.push(te.query)))}return G&&!zo(c)&&T.push(new(function ms(){return(0,ie.hu)(Cr,"Reference.ts has not been loaded"),Cr}())(s._repo,s._path)),{removed:T,events:O}}(O,s,o,h);(function Ri(c){return 0===c.views.size})(O)&&(c.syncPointTree_=c.syncPointTree_.remove(T));const de=te.removed;if(G=te.events,!_){const et=-1!==de.findIndex(Dt=>Dt._queryParams.loadsAllData()),ot=c.syncPointTree_.findOnPath(T,(Dt,Gt)=>zo(Gt));if(et&&!ot){const Dt=c.syncPointTree_.subtree(T);if(!Dt.isEmpty()){const Gt=function qc(c){return c.fold((s,o,h)=>{if(o&&zo(o))return[Io(o)];{let _=[];return o&&(_=va(o)),vn(h,(T,O)=>{_=_.concat(O)}),_}})}(Dt);for(let zt=0;zt<Gt.length;++zt){const Sn=Gt[zt],Br=Sn.query,Or=cs(c,Sn);c.listenProvider_.startListening(Yc(Br),za(c,Br),Or.hashFn,Or.onComplete)}}}!ot&&de.length>0&&!h&&(et?c.listenProvider_.stopListening(Yc(s),null):de.forEach(Dt=>{const Gt=c.queryToTagMap.get(Nl(Dt));c.listenProvider_.stopListening(Yc(Dt),Gt)}))}!function Bh(c,s){for(let o=0;o<s.length;++o){const h=s[o];if(!h._queryParams.loadsAllData()){const _=Nl(h),T=c.queryToTagMap.get(_);c.queryToTagMap.delete(_),c.tagToQueryMap.delete(T)}}}(c,de)}return G}function Rt(c,s,o,h){const _=Gl(c,h);if(null!=_){const T=bo(_),O=T.path,G=T.queryId,te=Ni(O,s);return Ko(c,O,new Cl(Gu(G),te,o))}return[]}function On(c,s,o,h=!1){const _=s._path;let T=null,O=!1;c.syncPointTree_.foreachOnPath(_,(Dt,Gt)=>{const zt=Ni(Dt,_);T=T||so(Gt,zt),O=O||zo(Gt)});let te,G=c.syncPointTree_.get(_);G?(O=O||zo(G),T=T||so(G,Fr())):(G=new gn,c.syncPointTree_=c.syncPointTree_.set(_,G)),null!=T?te=!0:(te=!1,T=_t.EMPTY_NODE,c.syncPointTree_.subtree(_).foreachChild((Gt,zt)=>{const Sn=so(zt,Fr());Sn&&(T=T.updateImmediateChild(Gt,Sn))}));const de=Qo(G,s);if(!de&&!s._queryParams.loadsAllData()){const Dt=Nl(s);(0,ie.hu)(!c.queryToTagMap.has(Dt),"View does not exist, but we have a tag");const Gt=function sh(){return Jo++}();c.queryToTagMap.set(Dt,Gt),c.tagToQueryMap.set(Gt,Dt)}let ot=function Iu(c,s,o,h,_,T){const O=_a(c,s,h,_,T);return c.views.has(s._queryIdentifier)||c.views.set(s._queryIdentifier,O),function ae(c,s){c.eventRegistrations_.push(s)}(O,o),function Lt(c,s){const o=c.viewCache_.eventCache,h=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(ue,(T,O)=>{h.push(is(T,O))}),o.isFullyInitialized()&&h.push(Ci(o.getNode())),pn(c,h,o.getNode(),s)}(O,o)}(G,s,o,qs(c.pendingWriteTree_,_),T,te);if(!de&&!O&&!h){const Dt=$a(G,s);ot=ot.concat(function rp(c,s,o){const h=s._path,_=za(c,s),T=cs(c,o),O=c.listenProvider_.startListening(Yc(s),_,T.hashFn,T.onComplete),G=c.syncPointTree_.subtree(h);if(_)(0,ie.hu)(!zo(G.value),"If we're adding a query, it shouldn't be shadowed");else{const te=G.fold((de,et,ot)=>{if(!wr(de)&&et&&zo(et))return[Io(et).query];{let Dt=[];return et&&(Dt=Dt.concat(va(et).map(Gt=>Gt.query))),vn(ot,(Gt,zt)=>{Dt=Dt.concat(zt)}),Dt}});for(let de=0;de<te.length;++de){const et=te[de];c.listenProvider_.stopListening(Yc(et),za(c,et))}}return O}(c,s,Dt))}return ot}function Qn(c,s,o){const _=c.pendingWriteTree_,T=c.syncPointTree_.findOnPath(s,(O,G)=>{const de=so(G,Ni(O,s));if(de)return de});return Ss(_,s,T,o,!0)}function Gr(c,s){return Cn(s,c.syncPointTree_,null,qs(c.pendingWriteTree_,Fr()))}function Cn(c,s,o,h){if(wr(c.path))return Lr(c,s,o,h);{const _=s.get(Fr());null==o&&null!=_&&(o=so(_,Fr()));let T=[];const O=Xn(c.path),G=c.operationForChild(O),te=s.children.get(O);if(te&&G){const de=o?o.getImmediateChild(O):null,et=Pi(h,O);T=T.concat(Cn(G,te,de,et))}return _&&(T=T.concat(Fo(_,c,h,o))),T}}function Lr(c,s,o,h){const _=s.get(Fr());null==o&&null!=_&&(o=so(_,Fr()));let T=[];return s.children.inorderTraversal((O,G)=>{const te=o?o.getImmediateChild(O):null,de=Pi(h,O),et=c.operationForChild(O);et&&(T=T.concat(Lr(et,G,te,de)))}),_&&(T=T.concat(Fo(_,c,h,o))),T}function cs(c,s){const o=s.query,h=za(c,o);return{hashFn:()=>(function M(c){return c.viewCache_.serverCache.getNode()}(s)||_t.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return h?function Ce(c,s,o){const h=Gl(c,o);if(h){const _=bo(h),T=_.path,O=_.queryId,G=Ni(T,s);return Ko(c,T,new lu(Gu(O),G))}return[]}(c,o._path,h):function le(c,s){return Gr(c,new lu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(c,o._path);{const T=function Pr(c,s){let o="Unknown Error";"too_big"===c?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?o="Client doesn't have permission to access the desired data.":"unavailable"===c&&(o="The service is unavailable");const h=new Error(c+" at "+s._path.toString()+": "+o);return h.code=c.toUpperCase(),h}(_,o);return pt(c,o,null,T)}}}}function za(c,s){const o=Nl(s);return c.queryToTagMap.get(o)}function Nl(c){return c._path.toString()+"$"+c._queryIdentifier}function Gl(c,s){return c.tagToQueryMap.get(s)}function bo(c){const s=c.indexOf("$");return(0,ie.hu)(-1!==s&&s<c.length-1,"Bad queryKey."),{queryId:c.substr(s+1),path:new kr(c.substr(0,s))}}function Ko(c,s,o){const h=c.syncPointTree_.get(s);return(0,ie.hu)(h,"Missing sync point for query tag that we're tracking"),Fo(h,o,qs(c.pendingWriteTree_,s),null)}function Yc(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new(function cu(){return(0,ie.hu)(Ga,"Reference.ts has not been loaded"),Ga}())(c._repo,c._path):c}class yd{constructor(s){this.node_=s}getImmediateChild(s){const o=this.node_.getImmediateChild(s);return new yd(o)}node(){return this.node_}}class vd{constructor(s,o){this.syncTree_=s,this.path_=o}getImmediateChild(s){const o=Vr(this.path_,s);return new vd(this.syncTree_,o)}node(){return Qn(this.syncTree_,this.path_)}}const Su=function(c,s,o){return c&&"object"==typeof c?((0,ie.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?oh(c[".sv"],s,o):"object"==typeof c[".sv"]?Zu(c[".sv"],s):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},oh=function(c,s,o){if("timestamp"===c)return o.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+c)},Zu=function(c,s,o){c.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const h=c.increment;"number"!=typeof h&&(0,ie.hu)(!1,"Unexpected increment value: "+h);const _=s.node();if((0,ie.hu)(null!==_&&typeof _<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return h;const O=_.getValue();return"number"!=typeof O?h:O+h},bd=function(c,s,o,h){return Au(s,new vd(o,c),h)},oo=function(c,s,o){return Au(c,new yd(s),o)};function Au(c,s,o){const h=c.getPriority().val(),_=Su(h,s.getImmediateChild(".priority"),o);let T;if(c.isLeafNode()){const O=c,G=Su(O.getValue(),s,o);return G!==O.getValue()||_!==O.getPriority().val()?new ua(G,qn(_)):c}{const O=c;return T=O,_!==O.getPriority().val()&&(T=T.updatePriority(new ua(_))),O.forEachChild(ue,(G,te)=>{const de=Au(te,s.getImmediateChild(G),o);de!==te&&(T=T.updateImmediateChild(G,de))}),T}}class Xo{constructor(s="",o=null,h={children:{},childCount:0}){this.name=s,this.parent=o,this.node=h}}function es(c,s){let o=s instanceof kr?s:new kr(s),h=c,_=Xn(o);for(;null!==_;){const T=(0,ie.DV)(h.node.children,_)||{children:{},childCount:0};h=new Xo(_,h,T),o=Wr(o),_=Xn(o)}return h}function Nu(c){return c.node.value}function bl(c,s){c.node.value=s,Qu(c)}function wl(c){return c.node.childCount>0}function Ec(c,s){vn(c.node.children,(o,h)=>{s(new Xo(o,c,h))})}function ao(c,s,o,h){o&&!h&&s(c),Ec(c,_=>{ao(_,s,!0,h)}),o&&h&&s(c)}function Dc(c){return new kr(null===c.parent?c.name:Dc(c.parent)+"/"+c.name)}function Qu(c){null!==c.parent&&function ah(c,s,o){const h=function Ka(c){return void 0===Nu(c)&&!wl(c)}(o),_=(0,ie.r3)(c.node.children,s);h&&_?(delete c.node.children[s],c.node.childCount--,Qu(c)):!h&&!_&&(c.node.children[s]=o.node,c.node.childCount++,Qu(c))}(c.parent,c.name,c)}const lh=/[\[\].#$\/\u0000-\u001F\u007F]/,wd=/[\[\].#$\u0000-\u001F\u007F]/,Ju=10485760,Zc=function(c){return"string"==typeof c&&0!==c.length&&!lh.test(c)},El=function(c){return"string"==typeof c&&0!==c.length&&!wd.test(c)},qo=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!dr(c)||c&&"object"==typeof c&&(0,ie.r3)(c,".sv")},Wl=function(c,s,o,h){h&&void 0===s||Ru((0,ie.gK)(c,"value"),s,o)},Ru=function(c,s,o){const h=o instanceof kr?new js(o,c):o;if(void 0===s)throw new Error(c+"contains undefined "+zr(h));if("function"==typeof s)throw new Error(c+"contains a function "+zr(h)+" with contents = "+s.toString());if(dr(s))throw new Error(c+"contains "+s.toString()+" "+zr(h));if("string"==typeof s&&s.length>Ju/3&&(0,ie.ug)(s)>Ju)throw new Error(c+"contains a string greater than "+Ju+" utf8 bytes "+zr(h)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){let _=!1,T=!1;if(vn(s,(O,G)=>{if(".value"===O)_=!0;else if(".priority"!==O&&".sv"!==O&&(T=!0,!Zc(O)))throw new Error(c+" contains an invalid key ("+O+") "+zr(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function to(c,s){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(s),c.byteLength_+=(0,ie.ug)(s),sa(c)})(h,O),Ru(c,G,h),function no(c){const s=c.parts_.pop();c.byteLength_-=(0,ie.ug)(s),c.parts_.length>0&&(c.byteLength_-=1)}(h)}),_&&T)throw new Error(c+' contains ".value" child '+zr(h)+" in addition to actual children.")}},Qc=function(c,s,o,h){if(h&&void 0===s)return;const _=(0,ie.gK)(c,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(_+" must be an object containing the children to replace.");const T=[];vn(s,(O,G)=>{const te=new kr(O);if(Ru(_,G,Vr(o,te)),".priority"===eo(te)&&!qo(G))throw new Error(_+"contains an invalid value for '"+te.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");T.push(te)}),function(c,s){let o,h;for(o=0;o<s.length;o++){h=s[o];const T=Hs(h);for(let O=0;O<T.length;O++)if((".priority"!==T[O]||O!==T.length-1)&&!Zc(T[O]))throw new Error(c+"contains an invalid key ("+T[O]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(ia);let _=null;for(o=0;o<s.length;o++){if(h=s[o],null!==_&&Ui(_,h))throw new Error(c+"contains a path "+_.toString()+" that is ancestor of another path "+h.toString());_=h}}(_,T)},Rl=function(c,s,o){if(!o||void 0!==s){if(dr(s))throw new Error((0,ie.gK)(c,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qo(s))throw new Error((0,ie.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lo=function(c,s,o,h){if(!(h&&void 0===o||Zc(o)))throw new Error((0,ie.gK)(c,s)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tc=function(c,s,o,h){if(!(h&&void 0===o||El(o)))throw new Error((0,ie.gK)(c,s)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fi=function(c,s){if(".info"===Xn(s))throw new Error(c+" failed = Can't modify data under /.info/")},Jc=function(c,s){const o=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!Zc(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==o.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),El(c)}(o))throw new Error((0,ie.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wo(c,s){let o=null;for(let h=0;h<s.length;h++){const _=s[h],T=_.getPath();null!==o&&!Ms(T,o.path)&&(c.eventLists_.push(o),o=null),null===o&&(o={events:[],path:T}),o.events.push(_)}o&&c.eventLists_.push(o)}function Ed(c,s,o){wo(c,o),b(c,h=>Ms(h,s))}function N(c,s,o){wo(c,o),b(c,h=>Ui(h,s)||Ui(s,h))}function b(c,s){c.recursionDepth_++;let o=!0;for(let h=0;h<c.eventLists_.length;h++){const _=c.eventLists_[h];_&&(s(_.path)?(D(c.eventLists_[h]),c.eventLists_[h]=null):o=!1)}o&&(c.eventLists_=[]),c.recursionDepth_--}function D(c){for(let s=0;s<c.events.length;s++){const o=c.events[s];if(null!==o){c.events[s]=null;const h=o.getEventRunner();Tr&&er("event: "+o.toString()),Ln(h)}}}const k="repo_interrupt";class _e{constructor(s,o,h,_){this.repoInfo_=s,this.forceRestClient_=o,this.authTokenProvider_=h,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ss(),this.transactionQueueTree_=new Xo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nn(c){const o=c.infoData_.getNode(new kr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Hn(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:nn(c)})}function nr(c,s,o,h,_){c.dataUpdateCount++;const T=new kr(s);o=c.interceptServerDataCallback_?c.interceptServerDataCallback_(s,o):o;let O=[];if(_)if(h){const te=(0,ie.UI)(o,de=>qn(de));O=function sn(c,s,o,h){const _=Gl(c,h);if(_){const T=bo(_),O=T.path,G=T.queryId,te=Ni(O,s),de=fn.fromObject(o);return Ko(c,O,new pa(Gu(G),te,de))}return[]}(c.serverSyncTree_,T,te,_)}else{const te=qn(o);O=Rt(c.serverSyncTree_,T,te,_)}else if(h){const te=(0,ie.UI)(o,de=>qn(de));O=function Y(c,s,o){const h=fn.fromObject(o);return Gr(c,new pa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,h))}(c.serverSyncTree_,T,te)}else{const te=qn(o);O=H(c.serverSyncTree_,T,te)}let G=T;O.length>0&&(G=Id(c,T)),N(c.eventQueue_,G,O)}function Ir(c,s){Eo(c,"connected",s),!1===s&&function Mu(c){ql(c,"onDisconnectEvents");const s=Hn(c),o=ss();da(c.onDisconnect_,Fr(),(_,T)=>{const O=bd(_,T,c.serverSyncTree_,s);hi(o,_,O)});let h=[];da(o,Fr(),(_,T)=>{h=h.concat(H(c.serverSyncTree_,_,T));const O=tc(c,_);Id(c,O)}),c.onDisconnect_=ss(),N(c.eventQueue_,Fr(),h)}(c)}function Eo(c,s,o){const h=new kr("/.info/"+s),_=qn(o);c.infoData_.updateSnapshot(h,_);const T=H(c.infoSyncTree_,h,_);N(c.eventQueue_,h,T)}function qa(c){return c.nextWriteId_++}function zl(c,s,o,h,_){ql(c,"set",{path:s.toString(),value:o,priority:h});const T=Hn(c),O=qn(o,h),G=Qn(c.serverSyncTree_,s),te=oo(O,G,T),de=qa(c),et=du(c.serverSyncTree_,s,te,de,!0);wo(c.eventQueue_,et),c.server_.put(s.toString(),O.val(!0),(Dt,Gt)=>{const zt="ok"===Dt;zt||Kn("set at "+s+" failed: "+Dt);const Sn=fl(c.serverSyncTree_,de,!zt);N(c.eventQueue_,s,Sn),Ou(0,_,Dt,Gt)});const ot=tc(c,s);Id(c,ot),N(c.eventQueue_,ot,[])}function wf(c,s,o){c.server_.onDisconnectCancel(s.toString(),(h,_)=>{"ok"===h&&xi(c.onDisconnect_,s),Ou(0,o,h,_)})}function Xu(c,s,o,h){const _=qn(o);c.server_.onDisconnectPut(s.toString(),_.val(!0),(T,O)=>{"ok"===T&&hi(c.onDisconnect_,s,_),Ou(0,h,T,O)})}function Cc(c,s,o){let h;h=".info"===Xn(s._path)?pt(c.infoSyncTree_,s,o):pt(c.serverSyncTree_,s,o),Ed(c.eventQueue_,s._path,h)}function Uh(c){c.persistentConnection_&&c.persistentConnection_.interrupt(k)}function ql(c,...s){let o="";c.persistentConnection_&&(o=c.persistentConnection_.id+":"),er(o,...s)}function Ou(c,s,o,h){s&&Ln(()=>{if("ok"===o)s(null);else{const _=(o||"error").toUpperCase();let T=_;h&&(T+=": "+h);const O=new Error(T);O.code=_,s(O)}})}function xu(c,s,o){return Qn(c.serverSyncTree_,s,o)||_t.EMPTY_NODE}function Cd(c,s=c.transactionQueueTree_){if(s||Si(c,s),Nu(s)){const o=Ef(c,s);(0,ie.hu)(o.length>0,"Sending zero length transaction queue"),o.every(_=>0===_.status)&&function gg(c,s,o){const h=o.map(de=>de.currentWriteId),_=xu(c,s,h);let T=_;const O=_.hash();for(let de=0;de<o.length;de++){const et=o[de];(0,ie.hu)(0===et.status,"tryToSendTransactionQueue_: items in queue should all be run."),et.status=1,et.retryCount++;const ot=Ni(s,et.path);T=T.updateChild(ot,et.currentOutputSnapshotRaw)}const G=T.val(!0),te=s;c.server_.put(te.toString(),G,de=>{ql(c,"transaction put response",{path:te.toString(),status:de});let et=[];if("ok"===de){const ot=[];for(let Dt=0;Dt<o.length;Dt++)o[Dt].status=2,et=et.concat(fl(c.serverSyncTree_,o[Dt].currentWriteId)),o[Dt].onComplete&&ot.push(()=>o[Dt].onComplete(null,!0,o[Dt].currentOutputSnapshotResolved)),o[Dt].unwatcher();Si(c,es(c.transactionQueueTree_,s)),Cd(c,c.transactionQueueTree_),N(c.eventQueue_,s,et);for(let Dt=0;Dt<ot.length;Dt++)Ln(ot[Dt])}else{if("datastale"===de)for(let ot=0;ot<o.length;ot++)o[ot].status=3===o[ot].status?4:0;else{Kn("transaction at "+te.toString()+" failed: "+de);for(let ot=0;ot<o.length;ot++)o[ot].status=4,o[ot].abortReason=de}Id(c,s)}},O)}(c,Dc(s),o)}else wl(s)&&Ec(s,o=>{Cd(c,o)})}function Id(c,s){const o=Hh(c,s),h=Dc(o);return function td(c,s,o){if(0===s.length)return;const h=[];let _=[];const O=s.filter(G=>0===G.status).map(G=>G.currentWriteId);for(let G=0;G<s.length;G++){const te=s[G],de=Ni(o,te.path);let ot,et=!1;if((0,ie.hu)(null!==de,"rerunTransactionsUnderNode_: relativePath should not be null."),4===te.status)et=!0,ot=te.abortReason,_=_.concat(fl(c.serverSyncTree_,te.currentWriteId,!0));else if(0===te.status)if(te.retryCount>=25)et=!0,ot="maxretry",_=_.concat(fl(c.serverSyncTree_,te.currentWriteId,!0));else{const Dt=xu(c,te.path,O);te.currentInputSnapshot=Dt;const Gt=s[G].update(Dt.val());if(void 0!==Gt){Ru("transaction failed: Data returned ",Gt,te.path);let zt=qn(Gt);"object"==typeof Gt&&null!=Gt&&(0,ie.r3)(Gt,".priority")||(zt=zt.updatePriority(Dt.getPriority()));const Br=te.currentWriteId,Or=Hn(c),bi=oo(zt,Dt,Or);te.currentOutputSnapshotRaw=zt,te.currentOutputSnapshotResolved=bi,te.currentWriteId=qa(c),O.splice(O.indexOf(Br),1),_=_.concat(du(c.serverSyncTree_,te.path,bi,te.currentWriteId,te.applyLocally)),_=_.concat(fl(c.serverSyncTree_,Br,!0))}else et=!0,ot="nodata",_=_.concat(fl(c.serverSyncTree_,te.currentWriteId,!0))}N(c.eventQueue_,o,_),_=[],et&&(s[G].status=2,setTimeout(s[G].unwatcher,Math.floor(0)),s[G].onComplete&&h.push("nodata"===ot?()=>s[G].onComplete(null,!1,s[G].currentInputSnapshot):()=>s[G].onComplete(new Error(ot),!1,null)))}Si(c,c.transactionQueueTree_);for(let G=0;G<h.length;G++)Ln(h[G]);Cd(c,c.transactionQueueTree_)}(c,Ef(c,o),h),h}function Hh(c,s){let o,h=c.transactionQueueTree_;for(o=Xn(s);null!==o&&void 0===Nu(h);)h=es(h,o),o=Xn(s=Wr(s));return h}function Ef(c,s){const o=[];return Bo(c,s,o),o.sort((h,_)=>h.order-_.order),o}function Bo(c,s,o){const h=Nu(s);if(h)for(let _=0;_<h.length;_++)o.push(h[_]);Ec(s,_=>{Bo(c,_,o)})}function Si(c,s){const o=Nu(s);if(o){let h=0;for(let _=0;_<o.length;_++)2!==o[_].status&&(o[h]=o[_],h++);o.length=h,bl(s,o.length>0?o:void 0)}Ec(s,h=>{Si(c,h)})}function tc(c,s){const o=Dc(Hh(c,s)),h=es(c.transactionQueueTree_,s);return function pg(c,s,o){let h=o?c:c.parent;for(;null!==h;){if(s(h))return!0;h=h.parent}}(h,_=>{dh(c,_)}),dh(c,h),ao(h,_=>{dh(c,_)}),o}function dh(c,s){const o=Nu(s);if(o){const h=[];let _=[],T=-1;for(let O=0;O<o.length;O++)3===o[O].status||(1===o[O].status?((0,ie.hu)(T===O-1,"All SENT items should be at beginning of queue."),T=O,o[O].status=3,o[O].abortReason="set"):((0,ie.hu)(0===o[O].status,"Unexpected transaction status in abort"),o[O].unwatcher(),_=_.concat(fl(c.serverSyncTree_,o[O].currentWriteId,!0)),o[O].onComplete&&h.push(o[O].onComplete.bind(null,new Error("set"),!1,null))));-1===T?bl(s,void 0):o.length=T+1,N(c.eventQueue_,Dc(s),_);for(let O=0;O<h.length;O++)Ln(h[O])}}const Ya=function(c,s){const o=nc(c),h=o.namespace;return"firebase.com"===o.domain&&ji(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==o.domain&&ji("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tn(o.host,o.secure,h,"ws"===o.scheme||"wss"===o.scheme,s,"",h!==o.subdomain),path:new kr(o.pathString)}},nc=function(c){let s="",o="",h="",_="",T="",O=!0,G="https",te=443;if("string"==typeof c){let de=c.indexOf("//");de>=0&&(G=c.substring(0,de-1),c=c.substring(de+2));let et=c.indexOf("/");-1===et&&(et=c.length);let ot=c.indexOf("?");-1===ot&&(ot=c.length),s=c.substring(0,Math.min(et,ot)),et<ot&&(_=function Ml(c){let s="";const o=c.split("/");for(let h=0;h<o.length;h++)if(o[h].length>0){let _=o[h];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch{}s+="/"+_}return s}(c.substring(et,ot)));const Dt=function Dm(c){const s={};"?"===c.charAt(0)&&(c=c.substring(1));for(const o of c.split("&")){if(0===o.length)continue;const h=o.split("=");2===h.length?s[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):Kn(`Invalid query segment '${o}' in query '${c}'`)}return s}(c.substring(Math.min(c.length,ot)));de=s.indexOf(":"),de>=0?(O="https"===G||"wss"===G,te=parseInt(s.substring(de+1),10)):de=s.length;const Gt=s.slice(0,de);if("localhost"===Gt.toLowerCase())o="localhost";else if(Gt.split(".").length<=2)o=Gt;else{const zt=s.indexOf(".");h=s.substring(0,zt).toLowerCase(),o=s.substring(zt+1),T=h}"ns"in Dt&&(T=Dt.ns)}return{host:s,port:te,domain:o,subdomain:h,secure:O,scheme:G,pathString:_,namespace:T}},Sd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ic=function(){let c=0;const s=[];return function(o){const h=o===c;let _;c=o;const T=new Array(8);for(_=7;_>=0;_--)T[_]=Sd.charAt(o%64),o=Math.floor(o/64);(0,ie.hu)(0===o,"Cannot push at time == 0");let O=T.join("");if(h){for(_=11;_>=0&&63===s[_];_--)s[_]=0;s[_]++}else for(_=0;_<12;_++)s[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)O+=Sd.charAt(s[_]);return(0,ie.hu)(20===O.length,"nextPushId: Length should be 20."),O}}();class Ol{constructor(s,o,h,_){this.eventType=s,this.eventRegistration=o,this.snapshot=h,this.prevName=_}getPath(){const s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class jh{constructor(s,o,h){this.eventRegistration=s,this.error=o,this.path=h}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hu{constructor(s,o){this.snapshotCallback=s,this.cancelCallback=o}onValue(s,o){this.snapshotCallback.call(null,s,o)}onCancel(s){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}class mg{constructor(s,o){this._repo=s,this._path=o}cancel(){const s=new ie.BH;return wf(this._repo,this._path,s.wrapCallback(()=>{})),s.promise}remove(){fi("OnDisconnect.remove",this._path);const s=new ie.BH;return Xu(this._repo,this._path,null,s.wrapCallback(()=>{})),s.promise}set(s){fi("OnDisconnect.set",this._path),Wl("OnDisconnect.set",s,this._path,!1);const o=new ie.BH;return Xu(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}setWithPriority(s,o){fi("OnDisconnect.setWithPriority",this._path),Wl("OnDisconnect.setWithPriority",s,this._path,!1),Rl("OnDisconnect.setWithPriority",o,!1);const h=new ie.BH;return function lo(c,s,o,h,_){const T=qn(o,h);c.server_.onDisconnectPut(s.toString(),T.val(!0),(O,G)=>{"ok"===O&&hi(c.onDisconnect_,s,T),Ou(0,_,O,G)})}(this._repo,this._path,s,o,h.wrapCallback(()=>{})),h.promise}update(s){fi("OnDisconnect.update",this._path),Qc("OnDisconnect.update",s,this._path,!1);const o=new ie.BH;return function Dd(c,s,o,h){if((0,ie.xb)(o))return er("onDisconnect().update() called with empty data.  Don't do anything."),void Ou(0,h,"ok",void 0);c.server_.onDisconnectMerge(s.toString(),o,(_,T)=>{"ok"===_&&vn(o,(O,G)=>{const te=qn(G);hi(c.onDisconnect_,Vr(s,O),te)}),Ou(0,h,_,T)})}(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}}class Za{constructor(s,o,h,_){this._repo=s,this._path=o,this._queryParams=h,this._orderByCalled=_}get key(){return wr(this._path)?null:eo(this._path)}get ref(){return new Pa(this._repo,this._path)}get _queryIdentifier(){const s=di(this._queryParams),o=Vn(s);return"{}"===o?"default":o}get _queryObject(){return di(this._queryParams)}isEqual(s){if(!((s=(0,ie.m9)(s))instanceof Za))return!1;const o=this._repo===s._repo,h=Ms(this._path,s._path);return o&&h&&this._queryIdentifier===s._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Va(c){let s="";for(let o=c.pieceNum_;o<c.pieces_.length;o++)""!==c.pieces_[o]&&(s+="/"+encodeURIComponent(String(c.pieces_[o])));return s||"/"}(this._path)}}function Jr(c,s){if(!0===c._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function rc(c){let s=null,o=null;if(c.hasStart()&&(s=c.getIndexStartValue()),c.hasEnd()&&(o=c.getIndexEndValue()),c.getIndex()===Zr){const h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==In)throw new Error(h);if("string"!=typeof s)throw new Error(_)}if(c.hasEnd()){if(c.getIndexEndName()!==kn)throw new Error(h);if("string"!=typeof o)throw new Error(_)}}else if(c.getIndex()===ue){if(null!=s&&!qo(s)||null!=o&&!qo(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(c.getIndex()instanceof Wi||c.getIndex()===_i,"unknown index type."),null!=s&&"object"==typeof s||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Sc(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Pa extends Za{constructor(s,o){super(s,o,new vo,!1)}get parent(){const s=To(this._path);return null===s?null:new Pa(this._repo,s)}get root(){let s=this;for(;null!==s.parent;)s=s.parent;return s}}class xl{constructor(s,o,h){this._node=s,this.ref=o,this._index=h}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const o=new kr(s),h=Yl(this.ref,s);return new xl(this._node.getChild(o),h,ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(h,_)=>s(new xl(_,Yl(this.ref,h),ue)))}hasChild(s){const o=new kr(s);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nd(c,s){return(c=(0,ie.m9)(c))._checkNotDeleted("ref"),void 0!==s?Yl(c._root,s):c._root}function Ad(c,s){(c=(0,ie.m9)(c))._checkNotDeleted("refFromURL");const o=Ya(s,c._repo.repoInfo_.nodeAdmin);Jc("refFromURL",o);const h=o.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&h.host!==c._repo.repoInfo_.host&&ji("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+c._repo.repoInfo_.host+")"),nd(c,o.path.toString())}function Yl(c,s){return null===Xn((c=(0,ie.m9)(c))._path)?(o=s,o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Tc("child","path",o,!1)):Tc("child","path",s,!1),new Pa(c._repo,Vr(c._path,s));var o}function Nd(c,s){c=(0,ie.m9)(c),fi("set",c._path),Wl("set",s,c._path,!1);const o=new ie.BH;return zl(c._repo,c._path,s,null,o.wrapCallback(()=>{})),o.promise}function _g(c,s){Qc("update",s,c._path,!1);const o=new ie.BH;return function Kl(c,s,o,h){ql(c,"update",{path:s.toString(),value:o});let _=!0;const T=Hn(c),O={};if(vn(o,(G,te)=>{_=!1,O[G]=bd(Vr(s,G),qn(te),c.serverSyncTree_,T)}),_)er("update() called with empty data.  Don't do anything."),Ou(0,h,"ok",void 0);else{const G=qa(c),te=function Zs(c,s,o,h){!function Hl(c,s,o,h){(0,ie.hu)(h>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:s,children:o,writeId:h,visible:!0}),c.visibleWrites=on(c.visibleWrites,s,o),c.lastWriteId=h}(c.pendingWriteTree_,s,o,h);const _=fn.fromObject(o);return Gr(c,new pa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,_))}(c.serverSyncTree_,s,O,G);wo(c.eventQueue_,te),c.server_.merge(s.toString(),o,(de,et)=>{const ot="ok"===de;ot||Kn("update at "+s+" failed: "+de);const Dt=fl(c.serverSyncTree_,G,!ot),Gt=Dt.length>0?Id(c,s):s;N(c.eventQueue_,Gt,Dt),Ou(0,h,de,et)}),vn(o,de=>{const et=tc(c,Vr(s,de));Id(c,et)}),N(c.eventQueue_,s,[])}}(c._repo,c._path,s,o.wrapCallback(()=>{})),o.promise}function Tm(c){c=(0,ie.m9)(c);const s=new hu(()=>{}),o=new fu(s);return function Dl(c,s,o){const h=function rr(c,s){const o=s._path;let h=null;c.syncPointTree_.foreachOnPath(o,(de,et)=>{const ot=Ni(de,o);h=h||so(et,ot)});let _=c.syncPointTree_.get(o);_?h=h||so(_,Fr()):(_=new gn,c.syncPointTree_=c.syncPointTree_.set(o,_));const T=null!=h,O=T?new Sa(h,!0,!1):null;return function S(c){return rn(c.viewCache_)}(_a(_,s,qs(c.pendingWriteTree_,s._path),T?O.getNode():_t.EMPTY_NODE,T))}(c.serverSyncTree_,s);return null!=h?Promise.resolve(h):c.server_.get(s).then(_=>{const T=qn(_).withIndex(s._queryParams.getIndex());let O;if(On(c.serverSyncTree_,s,o,!0),s._queryParams.loadsAllData())O=H(c.serverSyncTree_,s._path,T);else{const G=za(c.serverSyncTree_,s);O=Rt(c.serverSyncTree_,s._path,T,G)}return N(c.eventQueue_,s._path,O),pt(c.serverSyncTree_,s,o,null,!0),T},_=>(ql(c,"get for query "+(0,ie.Wl)(s)+" failed: "+_),Promise.reject(new Error(_))))}(c._repo,c,o).then(h=>new xl(h,new Pa(c._repo,c._path),c._queryParams.getIndex()))}class fu{constructor(s){this.callbackContext=s}respondsTo(s){return"value"===s}createEvent(s,o){const h=o._queryParams.getIndex();return new Ol("value",this,new xl(s.snapshotNode,new Pa(o._repo,o._path),h))}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new jh(this,s,o):null}matches(s){return s instanceof fu&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rd{constructor(s,o){this.eventType=s,this.callbackContext=o}respondsTo(s){let o="children_added"===s?"child_added":s;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new jh(this,s,o):null}createEvent(s,o){(0,ie.hu)(null!=s.childName,"Child events should have a childName.");const h=Yl(new Pa(o._repo,o._path),s.childName),_=o._queryParams.getIndex();return new Ol(s.type,this,new xl(s.snapshotNode,h,_),s.prevName)}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof Rd&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ac(c,s,o,h,_){let T;if("object"==typeof h&&(T=void 0,_=h),"function"==typeof h&&(T=h),_&&_.onlyOnce){const te=o,de=(et,ot)=>{Cc(c._repo,c,G),te(et,ot)};de.userCallback=o.userCallback,de.context=o.context,o=de}const O=new hu(o,T||void 0),G="value"===s?new fu(O):new Rd(s,O);return function ec(c,s,o){let h;h=".info"===Xn(s._path)?On(c.infoSyncTree_,s,o):On(c.serverSyncTree_,s,o),Ed(c.eventQueue_,s._path,h)}(c._repo,c,G),()=>Cc(c._repo,c,G)}function Qs(c,s,o,h){return Ac(c,"value",s,o,h)}function rd(c,s,o,h){return Ac(c,"child_added",s,o,h)}function Pu(c,s,o,h){return Ac(c,"child_changed",s,o,h)}function id(c,s,o,h){return Ac(c,"child_moved",s,o,h)}function Zl(c,s,o,h){return Ac(c,"child_removed",s,o,h)}function Gh(c,s,o){let h=null;const _=o?new hu(o):null;"value"===s?h=new fu(_):s&&(h=new Rd(s,_)),Cc(c._repo,c,h)}class pu{}class sd extends pu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Wl("endAt",this._value,s._path,!0);const o=Ct(s._queryParams,this._value,this._key);if(Sc(o),rc(o),s._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Za(s._repo,s._path,o,s._orderByCalled)}}class Tf extends pu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Wl("endBefore",this._value,s._path,!1);const o=function Vt(c,s,o){let h;return h=Ct(c,s,c.index_===Zr||o?o:In),h.endBeforeSet_=!0,h}(s._queryParams,this._value,this._key);if(Sc(o),rc(o),s._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Za(s._repo,s._path,o,s._orderByCalled)}}class zh extends pu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Wl("startAt",this._value,s._path,!0);const o=ce(s._queryParams,this._value,this._key);if(Sc(o),rc(o),s._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Za(s._repo,s._path,o,s._orderByCalled)}}class od extends pu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){Wl("startAfter",this._value,s._path,!1);const o=function Ve(c,s,o){let h;return h=ce(c,s,c.index_===Zr||o?o:kn),h.startAfterSet_=!0,h}(s._queryParams,this._value,this._key);if(Sc(o),rc(o),s._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Za(s._repo,s._path,o,s._orderByCalled)}}class Md extends pu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Za(s._repo,s._path,function ne(c,s){const o=c.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="l",o}(s._queryParams,this._limit),s._orderByCalled)}}class sp extends pu{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Za(s._repo,s._path,function $(c,s){const o=c.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="r",o}(s._queryParams,this._limit),s._orderByCalled)}}class Cm extends pu{constructor(s){super(),this._path=s}_apply(s){Jr(s,"orderByChild");const o=new kr(this._path);if(wr(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const h=new Wi(o),_=Fn(s._queryParams,h);return rc(_),new Za(s._repo,s._path,_,!0)}}class Nc extends pu{_apply(s){Jr(s,"orderByKey");const o=Fn(s._queryParams,Zr);return rc(o),new Za(s._repo,s._path,o,!0)}}class op extends pu{_apply(s){Jr(s,"orderByPriority");const o=Fn(s._queryParams,ue);return rc(o),new Za(s._repo,s._path,o,!0)}}class yh extends pu{_apply(s){Jr(s,"orderByValue");const o=Fn(s._queryParams,_i);return rc(o),new Za(s._repo,s._path,o,!0)}}class Im extends pu{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){if(Wl("equalTo",this._value,s._path,!1),s._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(s._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sd(this._value,this._key)._apply(new zh(this._value,this._key)._apply(s))}}function mo(c,...s){let o=(0,ie.m9)(c);for(const h of s)o=h._apply(o);return o}(function ki(c){(0,ie.hu)(!Cr,"__referenceConstructor has already been defined"),Cr=c})(Pa),function ol(c){(0,ie.hu)(!Ga,"__referenceConstructor has already been defined"),Ga=c}(Pa);const qh={};function Rc(c,s,o,h,_){let T=h||c.options.databaseURL;void 0===T&&(c.options.projectId||ji("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),er("Using default host for project ",c.options.projectId),T=`${c.options.projectId}-default-rtdb.firebaseio.com`);let te,de,O=Ya(T,_),G=O.repoInfo;typeof process<"u"&&process.env&&(de=process.env.FIREBASE_DATABASE_EMULATOR_HOST),de?(te=!0,T=`http://${de}?ns=${G.namespace}`,O=Ya(T,_),G=O.repoInfo):te=!O.repoInfo.secure;const et=_&&te?new Te(Te.OWNER):new Ze(c.name,c.options,s);Jc("Invalid Firebase Database URL",O),wr(O.path)||ji("Database URL must point to the root of a Firebase Database (not including a child path).");const ot=function Yh(c,s,o,h){let _=qh[s.name];_||(_={},qh[s.name]=_);let T=_[c.toURLString()];return T&&ji("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new _e(c,false,o,h),_[c.toURLString()]=T,T}(G,c,et,new Pe(c.name,o));return new Eg(ot,c)}class Eg{constructor(s,o){this._repoInternal=s,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Et(c,s,o){if(c.stats_=ys(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new li(c.repoInfo_,(h,_,T,O)=>{nr(c,h,_,T,O)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>Ir(c,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(o)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}c.persistentConnection_=new Ho(c.repoInfo_,s,(h,_,T,O)=>{nr(c,h,_,T,O)},h=>{Ir(c,h)},h=>{!function ts(c,s){vn(s,(o,h)=>{Eo(c,o,h)})}(c,h)},c.authTokenProvider_,c.appCheckProvider_,o),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(h=>{c.server_.refreshAuthToken(h)}),c.appCheckProvider_.addTokenChangeListener(h=>{c.server_.refreshAppCheckToken(h.token)}),c.statsReporter_=function Js(c,s){const o=c.toString();return Rn[o]||(Rn[o]=s()),Rn[o]}(c.repoInfo_,()=>new Vl(c.stats_,c.server_)),c.infoData_=new Qr,c.infoSyncTree_=new Wa({startListening:(h,_,T,O)=>{let G=[];const te=c.infoData_.getNode(h._path);return te.isEmpty()||(G=H(c.infoSyncTree_,h._path,te),setTimeout(()=>{O("ok")},0)),G},stopListening:()=>{}}),Eo(c,"connected",!1),c.serverSyncTree_=new Wa({startListening:(h,_,T,O)=>(c.server_.listen(h,T,_,(G,te)=>{const de=O(G,te);N(c.eventQueue_,h._path,de)}),[]),stopListening:(h,_)=>{c.server_.unlisten(h,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pa(this._repo,Fr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ic(c,s){const o=qh[s];(!o||o[c.key]!==c)&&ji(`Database ${s}(${c.repoInfo_}) has already been deleted.`),Uh(c),delete o[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){null===this._rootInternal&&ji("Cannot call "+s+" on a deleted database.")}}function ap(){Vo.IS_TRANSPORT_INITIALIZED&&Kn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function N_(){ap(),fr.forceDisallow()}function R_(){ap(),Gi.forceDisallow(),fr.forceAllow()}function O_(c,s){Rr(c,s)}const up={".sv":"timestamp"};class Tg{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ho.prototype.simpleListen=function(c,s){this.sendRequest("q",{p:c},s)},Ho.prototype.echo=function(c,s){this.sendRequest("echo",{d:c},s)},function Dg(c){st(ge.SDK_VERSION),(0,ge._registerComponent)(new Mt.wA("database",(s,{instanceIdentifier:o})=>Rc(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(Le,"0.14.0",c),(0,ge.registerVersion)(Le,"0.14.0","esm2017")}();const Fi=new Bt.Yd("@firebase/database-compat"),ad=function(c){Fi.warn("FIREBASE WARNING: "+c)};class Mc{constructor(s){this._delegate=s}cancel(s){(0,ie.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.cancel","onComplete",s,!0);const o=this._delegate.cancel();return s&&o.then(()=>s(null),h=>s(h)),o}remove(s){(0,ie.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.remove","onComplete",s,!0);const o=this._delegate.remove();return s&&o.then(()=>s(null),h=>s(h)),o}set(s,o){(0,ie.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ie.Wj)("OnDisconnect.set","onComplete",o,!0);const h=this._delegate.set(s);return o&&h.then(()=>o(null),_=>o(_)),h}setWithPriority(s,o,h){(0,ie.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ie.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);const _=this._delegate.setWithPriority(s,o);return h&&_.then(()=>h(null),T=>h(T)),_}update(s,o){if((0,ie.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){const _={};for(let T=0;T<s.length;++T)_[""+T]=s[T];s=_,ad("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ie.Wj)("OnDisconnect.update","onComplete",o,!0);const h=this._delegate.update(s);return o&&h.then(()=>o(null),_=>o(_)),h}}class Sg{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return(0,ie.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ld{constructor(s,o){this._database=s,this._delegate=o}val(){return(0,ie.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ie.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ie.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ie.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(s){return(0,ie.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),Tc("DataSnapshot.child","path",s,!1),new ld(this._database,this._delegate.child(s))}hasChild(s){return(0,ie.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Tc("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)}getPriority(){return(0,ie.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(s){return(0,ie.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ie.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(o=>s(new ld(this._database,o)))}hasChildren(){return(0,ie.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ie.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ie.Dv)("DataSnapshot.ref",0,0,arguments.length),new pl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qa{constructor(s,o){this.database=s,this._delegate=o}on(s,o,h,_){var T;(0,ie.Dv)("Query.on",2,4,arguments.length),(0,ie.Wj)("Query.on","callback",o,!1);const O=Qa.getCancelAndContextArgs_("Query.on",h,_),G=(de,et)=>{o.call(O.context,new ld(this.database,de),et)};G.userCallback=o,G.context=O.context;const te=null===(T=O.cancel)||void 0===T?void 0:T.bind(O.context);switch(s){case"value":return Qs(this._delegate,G,te),o;case"child_added":return rd(this._delegate,G,te),o;case"child_removed":return Zl(this._delegate,G,te),o;case"child_changed":return Pu(this._delegate,G,te),o;case"child_moved":return id(this._delegate,G,te),o;default:throw new Error((0,ie.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(s,o,h){if((0,ie.Dv)("Query.off",0,3,arguments.length),function(c,s,o){if(void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ie.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,s),(0,ie.Wj)("Query.off","callback",o,!0),(0,ie.lb)("Query.off","context",h,!0),o){const _=()=>{};_.userCallback=o,_.context=h,Gh(this._delegate,s,_)}else Gh(this._delegate,s)}get(){return Tm(this._delegate).then(s=>new ld(this.database,s))}once(s,o,h,_){(0,ie.Dv)("Query.once",1,4,arguments.length),(0,ie.Wj)("Query.once","callback",o,!0);const T=Qa.getCancelAndContextArgs_("Query.once",h,_),O=new ie.BH,G=(de,et)=>{const ot=new ld(this.database,de);o&&o.call(T.context,ot,et),O.resolve(ot)};G.userCallback=o,G.context=T.context;const te=de=>{T.cancel&&T.cancel.call(T.context,de),O.reject(de)};switch(s){case"value":Qs(this._delegate,G,te,{onlyOnce:!0});break;case"child_added":rd(this._delegate,G,te,{onlyOnce:!0});break;case"child_removed":Zl(this._delegate,G,te,{onlyOnce:!0});break;case"child_changed":Pu(this._delegate,G,te,{onlyOnce:!0});break;case"child_moved":id(this._delegate,G,te,{onlyOnce:!0});break;default:throw new Error((0,ie.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return O.promise}limitToFirst(s){return(0,ie.Dv)("Query.limitToFirst",1,1,arguments.length),new Qa(this.database,mo(this._delegate,function yg(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Md(c)}(s)))}limitToLast(s){return(0,ie.Dv)("Query.limitToLast",1,1,arguments.length),new Qa(this.database,mo(this._delegate,function vg(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sp(c)}(s)))}orderByChild(s){return(0,ie.Dv)("Query.orderByChild",1,1,arguments.length),new Qa(this.database,mo(this._delegate,function Cf(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Tc("orderByChild","path",c,!1),new Cm(c)}(s)))}orderByKey(){return(0,ie.Dv)("Query.orderByKey",0,0,arguments.length),new Qa(this.database,mo(this._delegate,function mh(){return new Nc}()))}orderByPriority(){return(0,ie.Dv)("Query.orderByPriority",0,0,arguments.length),new Qa(this.database,mo(this._delegate,function _h(){return new op}()))}orderByValue(){return(0,ie.Dv)("Query.orderByValue",0,0,arguments.length),new Qa(this.database,mo(this._delegate,function If(){return new yh}()))}startAt(s=null,o){return(0,ie.Dv)("Query.startAt",0,2,arguments.length),new Qa(this.database,mo(this._delegate,function ip(c=null,s){return Lo("startAt","key",s,!0),new zh(c,s)}(s,o)))}startAfter(s=null,o){return(0,ie.Dv)("Query.startAfter",0,2,arguments.length),new Qa(this.database,mo(this._delegate,function Kh(c,s){return Lo("startAfter","key",s,!0),new od(c,s)}(s,o)))}endAt(s=null,o){return(0,ie.Dv)("Query.endAt",0,2,arguments.length),new Qa(this.database,mo(this._delegate,function Wh(c,s){return Lo("endAt","key",s,!0),new sd(c,s)}(s,o)))}endBefore(s=null,o){return(0,ie.Dv)("Query.endBefore",0,2,arguments.length),new Qa(this.database,mo(this._delegate,function gh(c,s){return Lo("endBefore","key",s,!0),new Tf(c,s)}(s,o)))}equalTo(s,o){return(0,ie.Dv)("Query.equalTo",1,2,arguments.length),new Qa(this.database,mo(this._delegate,function bg(c,s){return Lo("equalTo","key",s,!0),new Im(c,s)}(s,o)))}toString(){return(0,ie.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ie.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(s){if((0,ie.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof Qa))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(s._delegate)}static getCancelAndContextArgs_(s,o,h){const _={cancel:void 0,context:void 0};if(o&&h)_.cancel=o,(0,ie.Wj)(s,"cancel",_.cancel,!0),_.context=h,(0,ie.lb)(s,"context",_.context,!0);else if(o)if("object"==typeof o&&null!==o)_.context=o;else{if("function"!=typeof o)throw new Error((0,ie.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=o}return _}get ref(){return new pl(this.database,new Pa(this._delegate._repo,this._delegate._path))}}class pl extends Qa{constructor(s,o){super(s,new Za(o._repo,o._path,new vo,!1)),this.database=s,this._delegate=o}getKey(){return(0,ie.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(s){return(0,ie.Dv)("Reference.child",1,1,arguments.length),"number"==typeof s&&(s=String(s)),new pl(this.database,Yl(this._delegate,s))}getParent(){(0,ie.Dv)("Reference.parent",0,0,arguments.length);const s=this._delegate.parent;return s?new pl(this.database,s):null}getRoot(){return(0,ie.Dv)("Reference.root",0,0,arguments.length),new pl(this.database,this._delegate.root)}set(s,o){(0,ie.Dv)("Reference.set",1,2,arguments.length),(0,ie.Wj)("Reference.set","onComplete",o,!0);const h=Nd(this._delegate,s);return o&&h.then(()=>o(null),_=>o(_)),h}update(s,o){if((0,ie.Dv)("Reference.update",1,2,arguments.length),Array.isArray(s)){const _={};for(let T=0;T<s.length;++T)_[""+T]=s[T];s=_,ad("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fi("Reference.update",this._delegate._path),(0,ie.Wj)("Reference.update","onComplete",o,!0);const h=_g(this._delegate,s);return o&&h.then(()=>o(null),_=>o(_)),h}setWithPriority(s,o,h){(0,ie.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ie.Wj)("Reference.setWithPriority","onComplete",h,!0);const _=function Df(c,s,o){if(fi("setWithPriority",c._path),Wl("setWithPriority",s,c._path,!1),Rl("setWithPriority",o,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const h=new ie.BH;return zl(c._repo,c._path,s,o,h.wrapCallback(()=>{})),h.promise}(this._delegate,s,o);return h&&_.then(()=>h(null),T=>h(T)),_}remove(s){(0,ie.Dv)("Reference.remove",0,1,arguments.length),(0,ie.Wj)("Reference.remove","onComplete",s,!0);const o=function fh(c){return fi("remove",c._path),Nd(c,null)}(this._delegate);return s&&o.then(()=>s(null),h=>s(h)),o}transaction(s,o,h){(0,ie.Dv)("Reference.transaction",1,3,arguments.length),(0,ie.Wj)("Reference.transaction","transactionUpdate",s,!1),(0,ie.Wj)("Reference.transaction","onComplete",o,!0),function(c,s,o,h){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,ie.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,h);const _=function Cg(c,s,o){var h;if(c=(0,ie.m9)(c),fi("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const _=null===(h=o?.applyLocally)||void 0===h||h,T=new ie.BH,G=Qs(c,()=>{});return function Td(c,s,o,h,_,T){ql(c,"transaction on "+s);const O={path:s,update:o,onComplete:h,status:null,order:Nr(),applyLocally:T,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},G=xu(c,s,void 0);O.currentInputSnapshot=G;const te=O.update(G.val());if(void 0===te)O.unwatcher(),O.currentOutputSnapshotRaw=null,O.currentOutputSnapshotResolved=null,O.onComplete&&O.onComplete(null,!1,O.currentInputSnapshot);else{Ru("transaction failed: Data returned ",te,O.path),O.status=0;const de=es(c.transactionQueueTree_,s),et=Nu(de)||[];let ot;et.push(O),bl(de,et),"object"==typeof te&&null!==te&&(0,ie.r3)(te,".priority")?(ot=(0,ie.DV)(te,".priority"),(0,ie.hu)(qo(ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ot=(Qn(c.serverSyncTree_,s)||_t.EMPTY_NODE).getPriority().val();const Dt=Hn(c),Gt=qn(te,ot),zt=oo(Gt,G,Dt);O.currentOutputSnapshotRaw=Gt,O.currentOutputSnapshotResolved=zt,O.currentWriteId=qa(c);const Sn=du(c.serverSyncTree_,s,zt,O.currentWriteId,O.applyLocally);N(c.eventQueue_,s,Sn),Cd(c,c.transactionQueueTree_)}}(c._repo,c._path,s,(te,de,et)=>{let ot=null;te?T.reject(te):(ot=new xl(et,new Pa(c._repo,c._path),ue),T.resolve(new Tg(de,ot)))},G,_),T.promise}(this._delegate,s,{applyLocally:h}).then(T=>new Sg(T.committed,new ld(this.database,T.snapshot)));return o&&_.then(T=>o(null,T.committed,T.snapshot),T=>o(T,!1,null)),_}setPriority(s,o){(0,ie.Dv)("Reference.setPriority",1,2,arguments.length),(0,ie.Wj)("Reference.setPriority","onComplete",o,!0);const h=function ph(c,s){c=(0,ie.m9)(c),fi("setPriority",c._path),Rl("setPriority",s,!1);const o=new ie.BH;return zl(c._repo,Vr(c._path,".priority"),s,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,s);return o&&h.then(()=>o(null),_=>o(_)),h}push(s,o){(0,ie.Dv)("Reference.push",0,2,arguments.length),(0,ie.Wj)("Reference.push","onComplete",o,!0);const h=function hh(c,s){c=(0,ie.m9)(c),fi("push",c._path),Wl("push",s,c._path,!0);const o=nn(c._repo),h=Ic(o),_=Yl(c,h),T=Yl(c,h);let O;return O=null!=s?Nd(T,s).then(()=>T):Promise.resolve(T),_.then=O.then.bind(O),_.catch=O.then.bind(O,void 0),_}(this._delegate,s),_=h.then(O=>new pl(this.database,O));o&&_.then(()=>o(null),O=>o(O));const T=new pl(this.database,h);return T.then=_.then.bind(_),T.catch=_.catch.bind(_,void 0),T}onDisconnect(){return fi("Reference.onDisconnect",this._delegate._path),new Mc(new mg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fu{constructor(s,o){this._delegate=s,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:N_,forceLongPolling:R_}}useEmulator(s,o,h={}){!function vh(c,s,o,h={}){(c=(0,ie.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&ji("Cannot call useEmulator() after instance has already been initialized.");const _=c._repoInternal;let T;if(_.repoInfo_.nodeAdmin)h.mockUserToken&&ji('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new Te(Te.OWNER);else if(h.mockUserToken){const O="string"==typeof h.mockUserToken?h.mockUserToken:(0,ie.Sg)(h.mockUserToken,c.app.options.projectId);T=new Te(O)}!function wg(c,s,o,h){c.repoInfo_=new tn(`${s}:${o}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),h&&(c.authTokenProvider_=h)}(_,s,o,T)}(this._delegate,s,o,h)}ref(s){if((0,ie.Dv)("database.ref",0,1,arguments.length),s instanceof pl){const o=Ad(this._delegate,s.toString());return new pl(this,o)}{const o=nd(this._delegate,s);return new pl(this,o)}}refFromURL(s){(0,ie.Dv)("database.refFromURL",1,1,arguments.length);const h=Ad(this._delegate,s);return new pl(this,h)}goOffline(){return(0,ie.Dv)("database.goOffline",0,0,arguments.length),function lp(c){(c=(0,ie.m9)(c))._checkNotDeleted("goOffline"),Uh(c._repo)}(this._delegate)}goOnline(){return(0,ie.Dv)("database.goOnline",0,0,arguments.length),function M_(c){(c=(0,ie.m9)(c))._checkNotDeleted("goOnline"),function ed(c){c.persistentConnection_&&c.persistentConnection_.resume(k)}(c._repo)}(this._delegate)}}Fu.ServerValue={TIMESTAMP:function Am(){return up}(),increment:c=>function Nm(c){return{".sv":{increment:c}}}(c)};var Od=Object.freeze({__proto__:null,initStandalone:function ud({app:c,url:s,version:o,customAuthImpl:h,namespace:_,nodeAdmin:T=!1}){st(o);const O=new Mt.zt("auth-internal",new Mt.H0("database-standalone"));return O.setComponent(new Mt.wA("auth-internal",()=>h,"PRIVATE")),{instance:new Fu(Rc(c,O,void 0,s,T),c),namespace:_}}});const sc=Fu.ServerValue;!function m(c){c.INTERNAL.registerComponent(new Mt.wA("database-compat",(s,{instanceIdentifier:o})=>{const h=s.getProvider("app-compat").getImmediate(),_=s.getProvider("database").getImmediate({identifier:o});return new Fu(_,h)},"PUBLIC").setServiceProps({Reference:pl,Query:Qa,Database:Fu,DataSnapshot:ld,enableLogging:O_,INTERNAL:Od,ServerValue:sc}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.3.0")}(Mn.Z);var E=B(6217),p=B(9260);function z(c){return null==c}function De(c){return"function"==typeof c.set}function Ye(c,s){return De(s)?s:c.ref(s)}function it(c,s){if(function w(c){return"string"==typeof c}(c))return s.stringCase();if(De(c))return s.firebaseCase();if(function R(c){return"function"==typeof c.exportVal}(c))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function Ft(c,s,o="on",h=$e.z){return new jt.y(_=>{let T=null;return T=c[o](s,(O,G)=>{h.schedule(()=>{_.next({snapshot:O,prevKey:G})}),"once"===o&&h.schedule(()=>_.complete())},O=>{h.schedule(()=>_.error(O))}),"on"===o?{unsubscribe(){null!=T&&c.off(s,T)}}:{unsubscribe(){}}}).pipe((0,ze.U)(_=>{const{snapshot:T,prevKey:O}=_;let G=null;return T.exists()&&(G=T.key),{type:s,payload:T,prevKey:O,key:G}}),(0,$t.B)())}function Un(c,s){const o=c.length;for(let h=0;h<o;h++)if(c[h].payload.key===s)return h;return-1}function Jn(c,s){const{payload:o,prevKey:h,key:_}=s,T=Un(c,_),O=function mn(c,s){if(z(s))return 0;{const o=Un(c,s);return-1===o?c.length:o+1}}(c,h);switch(s.type){case"value":if(s.payload&&s.payload.exists()){let G=null;s.payload.forEach(te=>{const de={payload:te,type:"value",prevKey:G,key:te.key};return G=te.key,c=[...c,de],!1})}return c;case"child_added":if(T>-1){const G=c[T-1];(G&&G.key||null)!==h&&(c=c.filter(te=>te.payload.key!==o.key)).splice(O,0,s)}else{if(null==h)return[s,...c];(c=c.slice()).splice(O,0,s)}return c;case"child_removed":return c.filter(G=>G.payload.key!==o.key);case"child_changed":return c.map(G=>G.payload.key===_?s:G);case"child_moved":if(T>-1){const G=c.splice(T,1)[0];return(c=c.slice()).splice(O,0,G),c}return c;default:return c}}function Li(c){return(z(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function yr(c,s,o){return function Ot(c,s,o){return Ft(c,"value","once",o).pipe((0,rt.w)(h=>{const _=[(0,gt.of)(h)];return s.forEach(T=>_.push(Ft(c,T,"on",o))),(0,qe.T)(..._).pipe((0,Ue.R)(Jn,[]))}),(0,bt.x)())}(c,s=Li(s),o)}function xr(c,s,o){const h=(s=Li(s)).map(_=>Ft(c,_,"on",o));return(0,qe.T)(...h)}function vi(c,s){return function(h,_){return it(h,{stringCase:()=>c.child(h)[s](_),firebaseCase:()=>h[s](_),snapshotCase:()=>h.ref[s](_)})}}function Bi(c){return function(o){return o?it(o,{stringCase:()=>c.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):c.remove()}}function Ps(c,s){return function(){return Ft(c,"value","on",s)}}const Yo=new L.OlP("angularfire2.realtimeDatabaseURL"),uo=new L.OlP("angularfire2.database.use-emulator");let So=(()=>{class c{constructor(o,h,_,T,O,G,te,de,et,ot,Dt,Gt,zt,Sn,Br){this.schedulers=G;const Or=te,bi=(0,lt.on)(o,O,h);de&&(0,xt.nw)(bi,O,et,Dt,Gt,zt,ot,Sn),this.database=(0,lt.cc)(`${bi.name}.database.${_}`,"AngularFireDatabase",bi.name,()=>{const _s=O.runOutsideAngular(()=>bi.database(_||void 0));return Or&&_s.useEmulator(...Or),_s},[Or])}list(o,h){const _=this.schedulers.ngZone.runOutsideAngular(()=>Ye(this.database,o));let T=_;return h&&(T=h(_)),function Yi(c,s){const o=s.schedulers.outsideAngular,h=s.schedulers.ngZone.run(()=>c.ref);return{query:c,update:vi(h,"update"),set:vi(h,"set"),push:_=>h.push(_),remove:Bi(h),snapshotChanges:_=>yr(c,_,o).pipe(Ht.iC),stateChanges:_=>xr(c,_,o).pipe(Ht.iC),auditTrail:_=>function pi(c,s,o){return function xs(c,s,o){return function Yr(c,s){return Ft(c,"value","on",s).pipe((0,ze.U)(o=>{let h;return o.payload.forEach(_=>(h=_.key,!1)),{data:o,lastKeyToLoad:h}}))}(c,o).pipe((0,Ne.M)(s),(0,ze.U)(([_,T])=>{const O=_.lastKeyToLoad,G=T.map(te=>te.key);return{actions:T,lastKeyToLoad:O,loadedKeys:G}}),function nt(c){return(0,Ge.e)((s,o)=>{let h=!1,_=0;s.subscribe((0,wt.x)(o,T=>(h||(h=!c(T,_++)))&&o.next(T)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,ze.U)(_=>_.actions))}(c,xr(c,s).pipe((0,Ue.R)((_,T)=>[..._,T],[])),o)}(c,_,o).pipe(Ht.iC),valueChanges:(_,T)=>yr(c,_,o).pipe((0,ze.U)(G=>G.map(te=>T&&T.idField?Object.assign(Object.assign({},te.payload.val()),{[T.idField]:te.key}):te.payload.val())),Ht.iC)}}(T,this)}object(o){return function As(c,s){return{query:c,snapshotChanges:()=>Ps(c,s.schedulers.outsideAngular)().pipe(Ht.iC),update:o=>c.ref.update(o),set:o=>c.ref.set(o),remove:()=>c.ref.remove(),valueChanges:()=>Ps(c,s.schedulers.outsideAngular)().pipe(Ht.iC,(0,ze.U)(h=>h.payload.exists()?h.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ye(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(lt.Dh),L.LFG(lt.xv,8),L.LFG(Yo,8),L.LFG(L.Lbi),L.LFG(L.R0b),L.LFG(Ht.HU),L.LFG(uo,8),L.LFG(xt.zQ,8),L.LFG(xt.Qv,8),L.LFG(xt.L6,8),L.LFG(xt._Q,8),L.LFG(xt.rT,8),L.LFG(xt.lh,8),L.LFG(xt.f7,8),L.LFG(E.nm,8))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Ql=(()=>{class c{constructor(){p.Z.registerVersion("angularfire",Ht.q4.full,"rtdb-compat")}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c}),c.\u0275inj=L.cJS({providers:[So]}),c})();var ka=B(6132),cd=B(8746);let gu=(()=>{class c{constructor(o){this.loaderService=o}intercept(o,h){return this.loaderService.show(),h.handle(o).pipe((0,cd.x)(()=>this.loaderService.hide()))}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(ke.D))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();var Ja=B(4383),Jl=B(2843),bh=B(262);let Xl=(()=>{class c{constructor(o){this.injector=o}intercept(o,h){return this.toastrService=this.injector.get(Ja._W),h.handle(o).pipe((0,bh.K)(_=>(this.toastrService.error("Something went wrong, please check log","An error occurred",{positionClass:"toast-top-right"}),console.error(_),(0,Jl._)(_))))}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(L.zs3))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var xd=B(4351),dd=B(9300);class mu{}class Pd{}class ds{constructor(s){this.normalizedNames=new Map,this.lazyUpdate=null,s?this.lazyInit="string"==typeof s?()=>{this.headers=new Map,s.split("\n").forEach(o=>{const h=o.indexOf(":");if(h>0){const _=o.slice(0,h),T=_.toLowerCase(),O=o.slice(h+1).trim();this.maybeSetNormalizedName(_,T),this.headers.has(T)?this.headers.get(T).push(O):this.headers.set(T,[O])}})}:()=>{this.headers=new Map,Object.keys(s).forEach(o=>{let h=s[o];const _=o.toLowerCase();"string"==typeof h&&(h=[h]),h.length>0&&(this.headers.set(_,h),this.maybeSetNormalizedName(o,_))})}:this.headers=new Map}has(s){return this.init(),this.headers.has(s.toLowerCase())}get(s){this.init();const o=this.headers.get(s.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(s){return this.init(),this.headers.get(s.toLowerCase())||null}append(s,o){return this.clone({name:s,value:o,op:"a"})}set(s,o){return this.clone({name:s,value:o,op:"s"})}delete(s,o){return this.clone({name:s,value:o,op:"d"})}maybeSetNormalizedName(s,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,s)}init(){this.lazyInit&&(this.lazyInit instanceof ds?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(s=>this.applyUpdate(s)),this.lazyUpdate=null))}copyFrom(s){s.init(),Array.from(s.headers.keys()).forEach(o=>{this.headers.set(o,s.headers.get(o)),this.normalizedNames.set(o,s.normalizedNames.get(o))})}clone(s){const o=new ds;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof ds?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([s]),o}applyUpdate(s){const o=s.name.toLowerCase();switch(s.op){case"a":case"s":let h=s.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(s.name,o);const _=("a"===s.op?this.headers.get(o):void 0)||[];_.push(...h),this.headers.set(o,_);break;case"d":const T=s.value;if(T){let O=this.headers.get(o);if(!O)return;O=O.filter(G=>-1===T.indexOf(G)),0===O.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,O)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(s){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>s(this.normalizedNames.get(o),this.headers.get(o)))}}class Oc{encodeKey(s){return hd(s)}encodeValue(s){return hd(s)}decodeKey(s){return decodeURIComponent(s)}decodeValue(s){return decodeURIComponent(s)}}const oc=/%(\d[a-f0-9])/gi,Lu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hd(c){return encodeURIComponent(c).replace(oc,(s,o)=>Lu[o]??s)}function fd(c){return`${c}`}class gl{constructor(s={}){if(this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new Oc,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kd(c,s){const o=new Map;return c.length>0&&c.replace(/^\?/,"").split("&").forEach(_=>{const T=_.indexOf("="),[O,G]=-1==T?[s.decodeKey(_),""]:[s.decodeKey(_.slice(0,T)),s.decodeValue(_.slice(T+1))],te=o.get(O)||[];te.push(G),o.set(O,te)}),o}(s.fromString,this.encoder)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach(o=>{const h=s.fromObject[o],_=Array.isArray(h)?h.map(fd):[fd(h)];this.map.set(o,_)})):this.map=null}has(s){return this.init(),this.map.has(s)}get(s){this.init();const o=this.map.get(s);return o?o[0]:null}getAll(s){return this.init(),this.map.get(s)||null}keys(){return this.init(),Array.from(this.map.keys())}append(s,o){return this.clone({param:s,value:o,op:"a"})}appendAll(s){const o=[];return Object.keys(s).forEach(h=>{const _=s[h];Array.isArray(_)?_.forEach(T=>{o.push({param:h,value:T,op:"a"})}):o.push({param:h,value:_,op:"a"})}),this.clone(o)}set(s,o){return this.clone({param:s,value:o,op:"s"})}delete(s,o){return this.clone({param:s,value:o,op:"d"})}toString(){return this.init(),this.keys().map(s=>{const o=this.encoder.encodeKey(s);return this.map.get(s).map(h=>o+"="+this.encoder.encodeValue(h)).join("&")}).filter(s=>""!==s).join("&")}clone(s){const o=new gl({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(s),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(s=>this.map.set(s,this.cloneFrom.map.get(s))),this.updates.forEach(s=>{switch(s.op){case"a":case"s":const o=("a"===s.op?this.map.get(s.param):void 0)||[];o.push(fd(s.value)),this.map.set(s.param,o);break;case"d":if(void 0===s.value){this.map.delete(s.param);break}{let h=this.map.get(s.param)||[];const _=h.indexOf(fd(s.value));-1!==_&&h.splice(_,1),h.length>0?this.map.set(s.param,h):this.map.delete(s.param)}}}),this.cloneFrom=this.updates=null)}}class xc{constructor(){this.map=new Map}set(s,o){return this.map.set(s,o),this}get(s){return this.map.has(s)||this.map.set(s,s.defaultValue()),this.map.get(s)}delete(s){return this.map.delete(s),this}has(s){return this.map.has(s)}keys(){return this.map.keys()}}function Bu(c){return typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer}function Fd(c){return typeof Blob<"u"&&c instanceof Blob}function Ld(c){return typeof FormData<"u"&&c instanceof FormData}class _u{constructor(s,o,h,_){let T;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=s.toUpperCase(),function Jh(c){switch(c){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||_?(this.body=void 0!==h?h:null,T=_):T=h,T&&(this.reportProgress=!!T.reportProgress,this.withCredentials=!!T.withCredentials,T.responseType&&(this.responseType=T.responseType),T.headers&&(this.headers=T.headers),T.context&&(this.context=T.context),T.params&&(this.params=T.params)),this.headers||(this.headers=new ds),this.context||(this.context=new xc),this.params){const O=this.params.toString();if(0===O.length)this.urlWithParams=o;else{const G=o.indexOf("?");this.urlWithParams=o+(-1===G?"?":G<o.length-1?"&":"")+O}}else this.params=new gl,this.urlWithParams=o}serializeBody(){return null===this.body?null:Bu(this.body)||Fd(this.body)||Ld(this.body)||function Ag(c){return typeof URLSearchParams<"u"&&c instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ld(this.body)?null:Fd(this.body)?this.body.type||null:Bu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(s={}){const o=s.method||this.method,h=s.url||this.url,_=s.responseType||this.responseType,T=void 0!==s.body?s.body:this.body,O=void 0!==s.withCredentials?s.withCredentials:this.withCredentials,G=void 0!==s.reportProgress?s.reportProgress:this.reportProgress;let te=s.headers||this.headers,de=s.params||this.params;const et=s.context??this.context;return void 0!==s.setHeaders&&(te=Object.keys(s.setHeaders).reduce((ot,Dt)=>ot.set(Dt,s.setHeaders[Dt]),te)),s.setParams&&(de=Object.keys(s.setParams).reduce((ot,Dt)=>ot.set(Dt,s.setParams[Dt]),de)),new _u(o,h,T,{params:de,headers:te,context:et,reportProgress:G,responseType:_,withCredentials:O})}}var Ao=(()=>((Ao=Ao||{})[Ao.Sent=0]="Sent",Ao[Ao.UploadProgress=1]="UploadProgress",Ao[Ao.ResponseHeader=2]="ResponseHeader",Ao[Ao.DownloadProgress=3]="DownloadProgress",Ao[Ao.Response=4]="Response",Ao[Ao.User=5]="User",Ao))();class pd{constructor(s,o=200,h="OK"){this.headers=s.headers||new ds,this.status=void 0!==s.status?s.status:o,this.statusText=s.statusText||h,this.url=s.url||null,this.ok=this.status>=200&&this.status<300}}class wh extends pd{constructor(s={}){super(s),this.type=Ao.ResponseHeader}clone(s={}){return new wh({headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class Bd extends pd{constructor(s={}){super(s),this.type=Ao.Response,this.body=void 0!==s.body?s.body:null}clone(s={}){return new Bd({body:void 0!==s.body?s.body:this.body,headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class Xh extends pd{constructor(s){super(s,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${s.url||"(unknown url)"}`:`Http failure response for ${s.url||"(unknown url)"}: ${s.status} ${s.statusText}`,this.error=s.error||null}}function ac(c,s){return{body:s,headers:c.headers,context:c.context,observe:c.observe,params:c.params,reportProgress:c.reportProgress,responseType:c.responseType,withCredentials:c.withCredentials}}let tu=(()=>{class c{constructor(o){this.handler=o}request(o,h,_={}){let T;if(o instanceof _u)T=o;else{let te,de;te=_.headers instanceof ds?_.headers:new ds(_.headers),_.params&&(de=_.params instanceof gl?_.params:new gl({fromObject:_.params})),T=new _u(o,h,void 0!==_.body?_.body:null,{headers:te,context:_.context,params:de,reportProgress:_.reportProgress,responseType:_.responseType||"json",withCredentials:_.withCredentials})}const O=(0,gt.of)(T).pipe((0,xd.b)(te=>this.handler.handle(te)));if(o instanceof _u||"events"===_.observe)return O;const G=O.pipe((0,dd.h)(te=>te instanceof Bd));switch(_.observe||"body"){case"body":switch(T.responseType){case"arraybuffer":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&!(te.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return te.body}));case"blob":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&!(te.body instanceof Blob))throw new Error("Response is not a Blob.");return te.body}));case"text":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&"string"!=typeof te.body)throw new Error("Response is not a string.");return te.body}));default:return G.pipe((0,ze.U)(te=>te.body))}case"response":return G;default:throw new Error(`Unreachable: unhandled observe type ${_.observe}}`)}}delete(o,h={}){return this.request("DELETE",o,h)}get(o,h={}){return this.request("GET",o,h)}head(o,h={}){return this.request("HEAD",o,h)}jsonp(o,h){return this.request("JSONP",o,{params:(new gl).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,h={}){return this.request("OPTIONS",o,h)}patch(o,h,_={}){return this.request("PATCH",o,ac(_,h))}post(o,h,_={}){return this.request("POST",o,ac(_,h))}put(o,h,_={}){return this.request("PUT",o,ac(_,h))}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(mu))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();class lc{constructor(s,o){this.next=s,this.interceptor=o}handle(s){return this.interceptor.intercept(s,this.next)}}const Vd=new L.OlP("HTTP_INTERCEPTORS");let x_=(()=>{class c{intercept(o,h){return h.handle(o)}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();const L_=/^\)\]\}',?\n/;let Rg=(()=>{class c{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new jt.y(h=>{const _=this.xhrFactory.build();if(_.open(o.method,o.urlWithParams),o.withCredentials&&(_.withCredentials=!0),o.headers.forEach((Gt,zt)=>_.setRequestHeader(Gt,zt.join(","))),o.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const Gt=o.detectContentTypeHeader();null!==Gt&&_.setRequestHeader("Content-Type",Gt)}if(o.responseType){const Gt=o.responseType.toLowerCase();_.responseType="json"!==Gt?Gt:"text"}const T=o.serializeBody();let O=null;const G=()=>{if(null!==O)return O;const Gt=_.statusText||"OK",zt=new ds(_.getAllResponseHeaders()),Sn=function uc(c){return"responseURL"in c&&c.responseURL?c.responseURL:/^X-Request-URL:/m.test(c.getAllResponseHeaders())?c.getResponseHeader("X-Request-URL"):null}(_)||o.url;return O=new wh({headers:zt,status:_.status,statusText:Gt,url:Sn}),O},te=()=>{let{headers:Gt,status:zt,statusText:Sn,url:Br}=G(),Or=null;204!==zt&&(Or=typeof _.response>"u"?_.responseText:_.response),0===zt&&(zt=Or?200:0);let bi=zt>=200&&zt<300;if("json"===o.responseType&&"string"==typeof Or){const _s=Or;Or=Or.replace(L_,"");try{Or=""!==Or?JSON.parse(Or):null}catch(wa){Or=_s,bi&&(bi=!1,Or={error:wa,text:Or})}}bi?(h.next(new Bd({body:Or,headers:Gt,status:zt,statusText:Sn,url:Br||void 0})),h.complete()):h.error(new Xh({error:Or,headers:Gt,status:zt,statusText:Sn,url:Br||void 0}))},de=Gt=>{const{url:zt}=G(),Sn=new Xh({error:Gt,status:_.status||0,statusText:_.statusText||"Unknown Error",url:zt||void 0});h.error(Sn)};let et=!1;const ot=Gt=>{et||(h.next(G()),et=!0);let zt={type:Ao.DownloadProgress,loaded:Gt.loaded};Gt.lengthComputable&&(zt.total=Gt.total),"text"===o.responseType&&!!_.responseText&&(zt.partialText=_.responseText),h.next(zt)},Dt=Gt=>{let zt={type:Ao.UploadProgress,loaded:Gt.loaded};Gt.lengthComputable&&(zt.total=Gt.total),h.next(zt)};return _.addEventListener("load",te),_.addEventListener("error",de),_.addEventListener("timeout",de),_.addEventListener("abort",de),o.reportProgress&&(_.addEventListener("progress",ot),null!==T&&_.upload&&_.upload.addEventListener("progress",Dt)),_.send(T),h.next({type:Ao.Sent}),()=>{_.removeEventListener("error",de),_.removeEventListener("abort",de),_.removeEventListener("load",te),_.removeEventListener("timeout",de),o.reportProgress&&(_.removeEventListener("progress",ot),null!==T&&_.upload&&_.upload.removeEventListener("progress",Dt)),_.readyState!==_.DONE&&_.abort()}})}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(Je.JF))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();const pp=new L.OlP("XSRF_COOKIE_NAME"),ef=new L.OlP("XSRF_HEADER_NAME");class Rm{}let Mm=(()=>{class c{constructor(o,h,_){this.doc=o,this.platform=h,this.cookieName=_,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Je.Mx)(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(Je.K0),L.LFG(L.Lbi),L.LFG(pp))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})(),Af=(()=>{class c{constructor(o,h){this.tokenService=o,this.headerName=h}intercept(o,h){const _=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||_.startsWith("http://")||_.startsWith("https://"))return h.handle(o);const T=this.tokenService.getToken();return null!==T&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,T)})),h.handle(o)}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(Rm),L.LFG(ef))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})(),gp=(()=>{class c{constructor(o,h){this.backend=o,this.injector=h,this.chain=null}handle(o){if(null===this.chain){const h=this.injector.get(Vd,[]);this.chain=h.reduceRight((_,T)=>new lc(_,T),this.backend)}return this.chain.handle(o)}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(Pd),L.LFG(L.zs3))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})(),Og=(()=>{class c{static disable(){return{ngModule:c,providers:[{provide:Af,useClass:x_}]}}static withOptions(o={}){return{ngModule:c,providers:[o.cookieName?{provide:pp,useValue:o.cookieName}:[],o.headerName?{provide:ef,useValue:o.headerName}:[]]}}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c}),c.\u0275inj=L.cJS({providers:[Af,{provide:Vd,useExisting:Af,multi:!0},{provide:Rm,useClass:Mm},{provide:pp,useValue:"XSRF-TOKEN"},{provide:ef,useValue:"X-XSRF-TOKEN"}]}),c})(),ni=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c}),c.\u0275inj=L.cJS({providers:[tu,{provide:mu,useClass:gp},Rg,{provide:Pd,useExisting:Rg}],imports:[Og.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),c})();var co=B(7340);function _p(c){return new L.vHH(3e3,!1)}function Ey(){return typeof window<"u"&&typeof window.document<"u"}function Mf(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ud(c){switch(c.length){case 0:return new co.ZN;case 1:return c[0];default:return new co.ZE(c)}}function z_(c,s,o,h,_=new Map,T=new Map){const O=[],G=[];let te=-1,de=null;if(h.forEach(et=>{const ot=et.get("offset"),Dt=ot==te,Gt=Dt&&de||new Map;et.forEach((zt,Sn)=>{let Br=Sn,Or=zt;if("offset"!==Sn)switch(Br=s.normalizePropertyName(Br,O),Or){case co.k1:Or=_.get(Sn);break;case co.l3:Or=T.get(Sn);break;default:Or=s.normalizeStyleValue(Sn,Br,Or,O)}Gt.set(Br,Or)}),Dt||G.push(Gt),de=Gt,te=ot}),O.length)throw function tf(c){return new L.vHH(3502,!1)}();return G}function Fc(c,s,o,h){switch(s){case"start":c.onStart(()=>h(o&&Ip(o,"start",c)));break;case"done":c.onDone(()=>h(o&&Ip(o,"done",c)));break;case"destroy":c.onDestroy(()=>h(o&&Ip(o,"destroy",c)))}}function Ip(c,s,o){const T=Sp(c.element,c.triggerName,c.fromState,c.toState,s||c.phaseName,o.totalTime??c.totalTime,!!o.disabled),O=c._data;return null!=O&&(T._data=O),T}function Sp(c,s,o,h,_="",T=0,O){return{element:c,triggerName:s,fromState:o,toState:h,phaseName:_,totalTime:T,disabled:!!O}}function Fa(c,s,o){let h=c.get(s);return h||c.set(s,h=o),h}function nu(c){const s=c.indexOf(":");return[c.substring(1,s),c.slice(s+1)]}let gd=(c,s)=>!1,Ap=(c,s,o)=>[],Dh=null;function Pl(c){const s=c.parentNode||c.host;return s===Dh?null:s}(Mf()||typeof Element<"u")&&(Ey()?(Dh=(()=>document.documentElement)(),gd=(c,s)=>{for(;s;){if(s===c)return!0;s=Pl(s)}return!1}):gd=(c,s)=>c.contains(s),Ap=(c,s,o)=>{if(o)return Array.from(c.querySelectorAll(s));const h=c.querySelector(s);return h?[h]:[]});let cc=null,Vg=!1;const Th=gd,Mp=Ap;let xp=(()=>{class c{validateStyleProperty(o){return function Lc(c){cc||(cc=function Rp(){return typeof document<"u"?document.body:null}()||{},Vg=!!cc.style&&"WebkitAppearance"in cc.style);let s=!0;return cc.style&&!function Bg(c){return"ebkit"==c.substring(1,6)}(c)&&(s=c in cc.style,!s&&Vg&&(s="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in cc.style)),s}(o)}matchesElement(o,h){return!1}containsElement(o,h){return Th(o,h)}getParentElement(o){return Pl(o)}query(o,h,_){return Mp(o,h,_)}computeStyle(o,h,_){return _||""}animate(o,h,_,T,O,G=[],te){return new co.ZN(_,T)}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})(),Pp=(()=>{class c{}return c.NOOP=new xp,c})();const Hd="ng-enter",Ch="ng-leave",Ug="ng-trigger",Lp=".ng-trigger",Gm="ng-animating",Of=".ng-animating";function Bc(c){if("number"==typeof c)return c;const s=c.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:xf(parseFloat(s[1]),s[2])}function xf(c,s){return"s"===s?1e3*c:c}function nf(c,s,o){return c.hasOwnProperty("duration")?c:function Wm(c,s,o){let _,T=0,O="";if("string"==typeof c){const G=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===G)return s.push(_p()),{duration:0,delay:0,easing:""};_=xf(parseFloat(G[1]),G[2]);const te=G[3];null!=te&&(T=xf(parseFloat(te),G[4]));const de=G[5];de&&(O=de)}else _=c;if(!o){let G=!1,te=s.length;_<0&&(s.push(function xm(){return new L.vHH(3100,!1)}()),G=!0),T<0&&(s.push(function Pm(){return new L.vHH(3101,!1)}()),G=!0),G&&s.splice(te,0,_p())}return{duration:_,delay:T,easing:O}}(c,s,o)}function Bp(c,s={}){return Object.keys(c).forEach(o=>{s[o]=c[o]}),s}function Hg(c){const s=new Map;return Object.keys(c).forEach(o=>{s.set(o,c[o])}),s}function jd(c,s=new Map,o){if(o)for(let[h,_]of o)s.set(h,_);for(let[h,_]of c)s.set(h,_);return s}function $g(c,s,o){return o?s+":"+o+";":""}function Gg(c){let s="";for(let o=0;o<c.style.length;o++){const h=c.style.item(o);s+=$g(0,h,c.style.getPropertyValue(h))}for(const o in c.style)c.style.hasOwnProperty(o)&&!o.startsWith("_")&&(s+=$g(0,Uc(o),c.style[o]));c.setAttribute("style",s)}function dc(c,s,o){c.style&&(s.forEach((h,_)=>{const T=zg(_);o&&!o.has(_)&&o.set(_,c.style[T]),c.style[T]=h}),Mf()&&Gg(c))}function hc(c,s){c.style&&(s.forEach((o,h)=>{const _=zg(h);c.style[_]=""}),Mf()&&Gg(c))}function Xa(c){return Array.isArray(c)?1==c.length?c[0]:(0,co.vP)(c):c}const $d=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gd(c){let s=[];if("string"==typeof c){let o;for(;o=$d.exec(c);)s.push(o[1]);$d.lastIndex=0}return s}function Wd(c,s,o){const h=c.toString(),_=h.replace($d,(T,O)=>{let G=s[O];return null==G&&(o.push(function Fm(c){return new L.vHH(3003,!1)}()),G=""),G.toString()});return _==h?c:_}function Vc(c){const s=[];let o=c.next();for(;!o.done;)s.push(o.value),o=c.next();return s}const Wg=/-+([a-z0-9])/g;function zg(c){return c.replace(Wg,(...s)=>s[1].toUpperCase())}function Uc(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kl(c,s,o){switch(s.type){case 7:return c.visitTrigger(s,o);case 0:return c.visitState(s,o);case 1:return c.visitTransition(s,o);case 2:return c.visitSequence(s,o);case 3:return c.visitGroup(s,o);case 4:return c.visitAnimate(s,o);case 5:return c.visitKeyframes(s,o);case 6:return c.visitStyle(s,o);case 8:return c.visitReference(s,o);case 9:return c.visitAnimateChild(s,o);case 10:return c.visitAnimateRef(s,o);case 11:return c.visitQuery(s,o);case 12:return c.visitStagger(s,o);default:throw function U_(c){return new L.vHH(3004,!1)}()}}function qg(c,s){return window.getComputedStyle(c)[s]}function Zg(c,s){const o=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function Qg(c,s,o){if(":"==c[0]){const te=function Jg(c,s){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,h)=>parseFloat(h)>parseFloat(o);case":decrement":return(o,h)=>parseFloat(h)<parseFloat(o);default:return s.push(function bp(c){return new L.vHH(3016,!1)}()),"* => *"}}(c,o);if("function"==typeof te)return void s.push(te);c=te}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return o.push(function Hm(c){return new L.vHH(3015,!1)}()),s;const _=h[1],T=h[2],O=h[3];s.push(jp(_,O));"<"==T[0]&&!("*"==_&&"*"==O)&&s.push(jp(O,_))}(h,o,s)):o.push(c),o}const lf=new Set(["true","1"]),Ff=new Set(["false","0"]);function jp(c,s){const o=lf.has(c)||Ff.has(c),h=lf.has(s)||Ff.has(s);return(_,T)=>{let O="*"==c||c==_,G="*"==s||s==T;return!O&&o&&"boolean"==typeof _&&(O=_?lf.has(c):Ff.has(c)),!G&&h&&"boolean"==typeof T&&(G=T?lf.has(s):Ff.has(s)),O&&G}}const zm=new RegExp("s*:selfs*,?","g");function Lf(c,s,o,h){return new em(c).build(s,o,h)}class em{constructor(s){this._driver=s}build(s,o,h){const _=new qm(o);return this._resetContextStyleTimingState(_),kl(this,Xa(s),_)}_resetContextStyleTimingState(s){s.currentQuerySelector="",s.collectedStyles=new Map,s.collectedStyles.set("",new Map),s.currentTime=0}visitTrigger(s,o){let h=o.queryCount=0,_=o.depCount=0;const T=[],O=[];return"@"==s.name.charAt(0)&&o.errors.push(function Eh(){return new L.vHH(3006,!1)}()),s.definitions.forEach(G=>{if(this._resetContextStyleTimingState(o),0==G.type){const te=G,de=te.name;de.toString().split(/\s*,\s*/).forEach(et=>{te.name=et,T.push(this.visitState(te,o))}),te.name=de}else if(1==G.type){const te=this.visitTransition(G,o);h+=te.queryCount,_+=te.depCount,O.push(te)}else o.errors.push(function yp(){return new L.vHH(3007,!1)}())}),{type:7,name:s.name,states:T,transitions:O,queryCount:h,depCount:_,options:null}}visitState(s,o){const h=this.visitStyle(s.styles,o),_=s.options&&s.options.params||null;if(h.containsDynamicStyles){const T=new Set,O=_||{};h.styles.forEach(G=>{G instanceof Map&&G.forEach(te=>{Gd(te).forEach(de=>{O.hasOwnProperty(de)||T.add(de)})})}),T.size&&(Vc(T.values()),o.errors.push(function Pc(c,s){return new L.vHH(3008,!1)}()))}return{type:0,name:s.name,style:h,options:_?{params:_}:null}}visitTransition(s,o){o.queryCount=0,o.depCount=0;const h=kl(this,Xa(s.animation),o);return{type:1,matchers:Zg(s.expr,o.errors),animation:h,queryCount:o.queryCount,depCount:o.depCount,options:Ih(s.options)}}visitSequence(s,o){return{type:2,steps:s.steps.map(h=>kl(this,h,o)),options:Ih(s.options)}}visitGroup(s,o){const h=o.currentTime;let _=0;const T=s.steps.map(O=>{o.currentTime=h;const G=kl(this,O,o);return _=Math.max(_,o.currentTime),G});return o.currentTime=_,{type:3,steps:T,options:Ih(s.options)}}visitAnimate(s,o){const h=function tm(c,s){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return Wp(nf(c,s).duration,0,"");const o=c;if(o.split(/\s+/).some(T=>"{"==T.charAt(0)&&"{"==T.charAt(1))){const T=Wp(0,0,"");return T.dynamic=!0,T.strValue=o,T}const _=nf(o,s);return Wp(_.duration,_.delay,_.easing)}(s.timings,o.errors);o.currentAnimateTimings=h;let _,T=s.styles?s.styles:(0,co.oB)({});if(5==T.type)_=this.visitKeyframes(T,o);else{let O=s.styles,G=!1;if(!O){G=!0;const de={};h.easing&&(de.easing=h.easing),O=(0,co.oB)(de)}o.currentTime+=h.duration+h.delay;const te=this.visitStyle(O,o);te.isEmptyStep=G,_=te}return o.currentAnimateTimings=null,{type:4,timings:h,style:_,options:null}}visitStyle(s,o){const h=this._makeStyleAst(s,o);return this._validateStyleAst(h,o),h}_makeStyleAst(s,o){const h=[],_=Array.isArray(s.styles)?s.styles:[s.styles];for(let G of _)"string"==typeof G?G===co.l3?h.push(G):o.errors.push(new L.vHH(3002,!1)):h.push(Hg(G));let T=!1,O=null;return h.forEach(G=>{if(G instanceof Map&&(G.has("easing")&&(O=G.get("easing"),G.delete("easing")),!T))for(let te of G.values())if(te.toString().indexOf("{{")>=0){T=!0;break}}),{type:6,styles:h,easing:O,offset:s.offset,containsDynamicStyles:T,options:null}}_validateStyleAst(s,o){const h=o.currentAnimateTimings;let _=o.currentTime,T=o.currentTime;h&&T>0&&(T-=h.duration+h.delay),s.styles.forEach(O=>{"string"!=typeof O&&O.forEach((G,te)=>{const de=o.collectedStyles.get(o.currentQuerySelector),et=de.get(te);let ot=!0;et&&(T!=_&&T>=et.startTime&&_<=et.endTime&&(o.errors.push(function vp(c,s,o,h,_){return new L.vHH(3010,!1)}()),ot=!1),T=et.startTime),ot&&de.set(te,{startTime:T,endTime:_}),o.options&&function Pf(c,s,o){const h=s.params||{},_=Gd(c);_.length&&_.forEach(T=>{h.hasOwnProperty(T)||o.push(function km(c){return new L.vHH(3001,!1)}())})}(G,o.options,o.errors)})})}visitKeyframes(s,o){const h={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function H_(){return new L.vHH(3011,!1)}()),h;let T=0;const O=[];let G=!1,te=!1,de=0;const et=s.steps.map(Or=>{const bi=this._makeStyleAst(Or,o);let _s=null!=bi.offset?bi.offset:function Fl(c){if("string"==typeof c)return null;let s=null;if(Array.isArray(c))c.forEach(o=>{if(o instanceof Map&&o.has("offset")){const h=o;s=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const o=c;s=parseFloat(o.get("offset")),o.delete("offset")}return s}(bi.styles),wa=0;return null!=_s&&(T++,wa=bi.offset=_s),te=te||wa<0||wa>1,G=G||wa<de,de=wa,O.push(wa),bi});te&&o.errors.push(function Bm(){return new L.vHH(3012,!1)}()),G&&o.errors.push(function wy(){return new L.vHH(3200,!1)}());const ot=s.steps.length;let Dt=0;T>0&&T<ot?o.errors.push(function Vm(){return new L.vHH(3202,!1)}()):0==T&&(Dt=1/(ot-1));const Gt=ot-1,zt=o.currentTime,Sn=o.currentAnimateTimings,Br=Sn.duration;return et.forEach((Or,bi)=>{const _s=Dt>0?bi==Gt?1:Dt*bi:O[bi],wa=_s*Br;o.currentTime=zt+Sn.delay+wa,Sn.duration=wa,this._validateStyleAst(Or,o),Or.offset=_s,h.styles.push(Or)}),h}visitReference(s,o){return{type:8,animation:kl(this,Xa(s.animation),o),options:Ih(s.options)}}visitAnimateChild(s,o){return o.depCount++,{type:9,options:Ih(s.options)}}visitAnimateRef(s,o){return{type:10,animation:this.visitReference(s.animation,o),options:Ih(s.options)}}visitQuery(s,o){const h=o.currentQuerySelector,_=s.options||{};o.queryCount++,o.currentQuery=s;const[T,O]=function Km(c){const s=!!c.split(/\s*,\s*/).find(o=>":self"==o);return s&&(c=c.replace(zm,"")),c=c.replace(/@\*/g,Lp).replace(/@\w+/g,o=>Lp+"-"+o.slice(1)).replace(/:animating/g,Of),[c,s]}(s.selector);o.currentQuerySelector=h.length?h+" "+T:T,Fa(o.collectedStyles,o.currentQuerySelector,new Map);const G=kl(this,Xa(s.animation),o);return o.currentQuery=null,o.currentQuerySelector=h,{type:11,selector:T,limit:_.limit||0,optional:!!_.optional,includeSelf:O,animation:G,originalSelector:s.selector,options:Ih(s.options)}}visitStagger(s,o){o.currentQuery||o.errors.push(function Um(){return new L.vHH(3013,!1)}());const h="full"===s.timings?{duration:0,delay:0,easing:"full"}:nf(s.timings,o.errors,!0);return{type:12,animation:kl(this,Xa(s.animation),o),timings:h,options:null}}}class qm{constructor(s){this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ih(c){return c?(c=Bp(c)).params&&(c.params=function Gp(c){return c?Bp(c):null}(c.params)):c={},c}function Wp(c,s,o){return{duration:c,delay:s,easing:o}}function nm(c,s,o,h,_,T,O=null,G=!1){return{type:1,element:c,keyframes:s,preStyleProps:o,postStyleProps:h,duration:_,delay:T,totalTime:_+T,easing:O,subTimeline:G}}class Kd{constructor(){this._map=new Map}get(s){return this._map.get(s)||[]}append(s,o){let h=this._map.get(s);h||this._map.set(s,h=[]),h.push(...o)}has(s){return this._map.has(s)}clear(){this._map.clear()}}const K_=new RegExp(":enter","g"),zp=new RegExp(":leave","g");function Bf(c,s,o,h,_,T=new Map,O=new Map,G,te,de=[]){return(new Sh).buildKeyframes(c,s,o,h,_,T,O,G,te,de)}class Sh{buildKeyframes(s,o,h,_,T,O,G,te,de,et=[]){de=de||new Kd;const ot=new Uf(s,o,de,_,T,et,[]);ot.options=te;const Dt=te.delay?Bc(te.delay):0;ot.currentTimeline.delayNextStep(Dt),ot.currentTimeline.setStyles([O],null,ot.errors,te),kl(this,h,ot);const Gt=ot.timelines.filter(zt=>zt.containsAnimation());if(Gt.length&&G.size){let zt;for(let Sn=Gt.length-1;Sn>=0;Sn--){const Br=Gt[Sn];if(Br.element===o){zt=Br;break}}zt&&!zt.allowOnlyTimelineStyles()&&zt.setStyles([G],null,ot.errors,te)}return Gt.length?Gt.map(zt=>zt.buildKeyframes()):[nm(o,[],[],[],0,Dt,"",!1)]}visitTrigger(s,o){}visitState(s,o){}visitTransition(s,o){}visitAnimateChild(s,o){const h=o.subInstructions.get(o.element);if(h){const _=o.createSubContext(s.options),T=o.currentTimeline.currentTime,O=this._visitSubInstructions(h,_,_.options);T!=O&&o.transformIntoNewTimeline(O)}o.previousNode=s}visitAnimateRef(s,o){const h=o.createSubContext(s.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([s.options,s.animation.options],o,h),this.visitReference(s.animation,h),o.transformIntoNewTimeline(h.currentTimeline.currentTime),o.previousNode=s}_applyAnimationRefDelays(s,o,h){for(const _ of s){const T=_?.delay;if(T){const O="number"==typeof T?T:Bc(Wd(T,_?.params??{},o.errors));h.delayNextStep(O)}}}_visitSubInstructions(s,o,h){let T=o.currentTimeline.currentTime;const O=null!=h.duration?Bc(h.duration):null,G=null!=h.delay?Bc(h.delay):null;return 0!==O&&s.forEach(te=>{const de=o.appendInstructionToTimeline(te,O,G);T=Math.max(T,de.duration+de.delay)}),T}visitReference(s,o){o.updateOptions(s.options,!0),kl(this,s.animation,o),o.previousNode=s}visitSequence(s,o){const h=o.subContextCount;let _=o;const T=s.options;if(T&&(T.params||T.delay)&&(_=o.createSubContext(T),_.transformIntoNewTimeline(),null!=T.delay)){6==_.previousNode.type&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=Vf);const O=Bc(T.delay);_.delayNextStep(O)}s.steps.length&&(s.steps.forEach(O=>kl(this,O,_)),_.currentTimeline.applyStylesToKeyframe(),_.subContextCount>h&&_.transformIntoNewTimeline()),o.previousNode=s}visitGroup(s,o){const h=[];let _=o.currentTimeline.currentTime;const T=s.options&&s.options.delay?Bc(s.options.delay):0;s.steps.forEach(O=>{const G=o.createSubContext(s.options);T&&G.delayNextStep(T),kl(this,O,G),_=Math.max(_,G.currentTimeline.currentTime),h.push(G.currentTimeline)}),h.forEach(O=>o.currentTimeline.mergeTimelineCollectedStyles(O)),o.transformIntoNewTimeline(_),o.previousNode=s}_visitTiming(s,o){if(s.dynamic){const h=s.strValue;return nf(o.params?Wd(h,o.params,o.errors):h,o.errors)}return{duration:s.duration,delay:s.delay,easing:s.easing}}visitAnimate(s,o){const h=o.currentAnimateTimings=this._visitTiming(s.timings,o),_=o.currentTimeline;h.delay&&(o.incrementTime(h.delay),_.snapshotCurrentStyles());const T=s.style;5==T.type?this.visitKeyframes(T,o):(o.incrementTime(h.duration),this.visitStyle(T,o),_.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=s}visitStyle(s,o){const h=o.currentTimeline,_=o.currentAnimateTimings;!_&&h.hasCurrentStyleProperties()&&h.forwardFrame();const T=_&&_.easing||s.easing;s.isEmptyStep?h.applyEmptyStep(T):h.setStyles(s.styles,T,o.errors,o.options),o.previousNode=s}visitKeyframes(s,o){const h=o.currentAnimateTimings,_=o.currentTimeline.duration,T=h.duration,G=o.createSubContext().currentTimeline;G.easing=h.easing,s.styles.forEach(te=>{G.forwardTime((te.offset||0)*T),G.setStyles(te.styles,te.easing,o.errors,o.options),G.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(G),o.transformIntoNewTimeline(_+T),o.previousNode=s}visitQuery(s,o){const h=o.currentTimeline.currentTime,_=s.options||{},T=_.delay?Bc(_.delay):0;T&&(6===o.previousNode.type||0==h&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Vf);let O=h;const G=o.invokeQuery(s.selector,s.originalSelector,s.limit,s.includeSelf,!!_.optional,o.errors);o.currentQueryTotal=G.length;let te=null;G.forEach((de,et)=>{o.currentQueryIndex=et;const ot=o.createSubContext(s.options,de);T&&ot.delayNextStep(T),de===o.element&&(te=ot.currentTimeline),kl(this,s.animation,ot),ot.currentTimeline.applyStylesToKeyframe(),O=Math.max(O,ot.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(O),te&&(o.currentTimeline.mergeTimelineCollectedStyles(te),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=s}visitStagger(s,o){const h=o.parentContext,_=o.currentTimeline,T=s.timings,O=Math.abs(T.duration),G=O*(o.currentQueryTotal-1);let te=O*o.currentQueryIndex;switch(T.duration<0?"reverse":T.easing){case"reverse":te=G-te;break;case"full":te=h.currentStaggerTime}const et=o.currentTimeline;te&&et.delayNextStep(te);const ot=et.currentTime;kl(this,s.animation,o),o.previousNode=s,h.currentStaggerTime=_.currentTime-ot+(_.startTime-h.currentTimeline.startTime)}}const Vf={};class Uf{constructor(s,o,h,_,T,O,G,te){this._driver=s,this.element=o,this.subInstructions=h,this._enterClassName=_,this._leaveClassName=T,this.errors=O,this.timelines=G,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=te||new Hf(this._driver,o,0),G.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(s,o){if(!s)return;const h=s;let _=this.options;null!=h.duration&&(_.duration=Bc(h.duration)),null!=h.delay&&(_.delay=Bc(h.delay));const T=h.params;if(T){let O=_.params;O||(O=this.options.params={}),Object.keys(T).forEach(G=>{(!o||!O.hasOwnProperty(G))&&(O[G]=Wd(T[G],O,this.errors))})}}_copyOptions(){const s={};if(this.options){const o=this.options.params;if(o){const h=s.params={};Object.keys(o).forEach(_=>{h[_]=o[_]})}}return s}createSubContext(s=null,o,h){const _=o||this.element,T=new Uf(this._driver,_,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(_,h||0));return T.previousNode=this.previousNode,T.currentAnimateTimings=this.currentAnimateTimings,T.options=this._copyOptions(),T.updateOptions(s),T.currentQueryIndex=this.currentQueryIndex,T.currentQueryTotal=this.currentQueryTotal,T.parentContext=this,this.subContextCount++,T}transformIntoNewTimeline(s){return this.previousNode=Vf,this.currentTimeline=this.currentTimeline.fork(this.element,s),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(s,o,h){const _={duration:o??s.duration,delay:this.currentTimeline.currentTime+(h??0)+s.delay,easing:""},T=new Kp(this._driver,s.element,s.keyframes,s.preStyleProps,s.postStyleProps,_,s.stretchStartingKeyframe);return this.timelines.push(T),_}incrementTime(s){this.currentTimeline.forwardTime(this.currentTimeline.duration+s)}delayNextStep(s){s>0&&this.currentTimeline.delayNextStep(s)}invokeQuery(s,o,h,_,T,O){let G=[];if(_&&G.push(this.element),s.length>0){s=(s=s.replace(K_,"."+this._enterClassName)).replace(zp,"."+this._leaveClassName);let de=this._driver.query(this.element,s,1!=h);0!==h&&(de=h<0?de.slice(de.length+h,de.length):de.slice(0,h)),G.push(...de)}return!T&&0==G.length&&O.push(function Pg(c){return new L.vHH(3014,!1)}()),G}}class Hf{constructor(s,o,h,_){this._driver=s,this.element=o,this.startTime=h,this._elementTimelineStylesLookup=_,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(s){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+s),o&&this.snapshotCurrentStyles()):this.startTime+=s}fork(s,o){return this.applyStylesToKeyframe(),new Hf(this._driver,s,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(s){this.applyStylesToKeyframe(),this.duration=s,this._loadKeyframe()}_updateStyle(s,o){this._localTimelineStyles.set(s,o),this._globalTimelineStyles.set(s,o),this._styleSummary.set(s,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(s){s&&this._previousKeyframe.set("easing",s);for(let[o,h]of this._globalTimelineStyles)this._backFill.set(o,h||co.l3),this._currentKeyframe.set(o,co.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(s,o,h,_){o&&this._previousKeyframe.set("easing",o);const T=_&&_.params||{},O=function Vu(c,s){const o=new Map;let h;return c.forEach(_=>{if("*"===_){h=h||s.keys();for(let T of h)o.set(T,co.l3)}else jd(_,o)}),o}(s,this._globalTimelineStyles);for(let[G,te]of O){const de=Wd(te,T,h);this._pendingStyles.set(G,de),this._localTimelineStyles.has(G)||this._backFill.set(G,this._globalTimelineStyles.get(G)??co.l3),this._updateStyle(G,de)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((s,o)=>{this._currentKeyframe.set(o,s)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((s,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,s)}))}snapshotCurrentStyles(){for(let[s,o]of this._localTimelineStyles)this._pendingStyles.set(s,o),this._updateStyle(s,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const s=[];for(let o in this._currentKeyframe)s.push(o);return s}mergeTimelineCollectedStyles(s){s._styleSummary.forEach((o,h)=>{const _=this._styleSummary.get(h);(!_||o.time>_.time)&&this._updateStyle(h,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const s=new Set,o=new Set,h=1===this._keyframes.size&&0===this.duration;let _=[];this._keyframes.forEach((G,te)=>{const de=jd(G,new Map,this._backFill);de.forEach((et,ot)=>{et===co.k1?s.add(ot):et===co.l3&&o.add(ot)}),h||de.set("offset",te/this.duration),_.push(de)});const T=s.size?Vc(s.values()):[],O=o.size?Vc(o.values()):[];if(h){const G=_[0],te=new Map(G);G.set("offset",0),te.set("offset",1),_=[G,te]}return nm(this.element,_,T,O,this.duration,this.startTime,this.easing,!1)}}class Kp extends Hf{constructor(s,o,h,_,T,O,G=!1){super(s,o,O.delay),this.keyframes=h,this.preStyleProps=_,this.postStyleProps=T,this._stretchStartingKeyframe=G,this.timings={duration:O.duration,delay:O.delay,easing:O.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let s=this.keyframes,{delay:o,duration:h,easing:_}=this.timings;if(this._stretchStartingKeyframe&&o){const T=[],O=h+o,G=o/O,te=jd(s[0]);te.set("offset",0),T.push(te);const de=jd(s[0]);de.set("offset",Hc(G)),T.push(de);const et=s.length-1;for(let ot=1;ot<=et;ot++){let Dt=jd(s[ot]);const Gt=Dt.get("offset");Dt.set("offset",Hc((o+Gt*h)/O)),T.push(Dt)}h=O,o=0,_="",s=T}return nm(this.element,s,this.preStyleProps,this.postStyleProps,h,o,_,!0)}}function Hc(c,s=3){const o=Math.pow(10,s-1);return Math.round(c*o)/o}class jf{}const Iy=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qp extends jf{normalizePropertyName(s,o){return zg(s)}normalizeStyleValue(s,o,h,_){let T="";const O=h.toString().trim();if(Iy.has(o)&&0!==h&&"0"!==h)if("number"==typeof h)T="px";else{const G=h.match(/^[+-]?[\d\.]+([a-z]*)$/);G&&0==G[1].length&&_.push(function Nf(c,s){return new L.vHH(3005,!1)}())}return O+T}}function Qm(c,s,o,h,_,T,O,G,te,de,et,ot,Dt){return{type:0,element:c,triggerName:s,isRemovalTransition:_,fromState:o,fromStyles:T,toState:h,toStyles:O,timelines:G,queriedElements:te,preStyleProps:de,postStyleProps:et,totalTime:ot,errors:Dt}}const $f={};class Jm{constructor(s,o,h){this._triggerName=s,this.ast=o,this._stateStyles=h}match(s,o,h,_){return function q_(c,s,o,h,_){return c.some(T=>T(s,o,h,_))}(this.ast.matchers,s,o,h,_)}buildStyles(s,o,h){let _=this._stateStyles.get("*");return void 0!==s&&(_=this._stateStyles.get(s?.toString())||_),_?_.buildStyles(o,h):new Map}build(s,o,h,_,T,O,G,te,de,et){const ot=[],Dt=this.ast.options&&this.ast.options.params||$f,zt=this.buildStyles(h,G&&G.params||$f,ot),Sn=te&&te.params||$f,Br=this.buildStyles(_,Sn,ot),Or=new Set,bi=new Map,_s=new Map,wa="void"===_,iu={params:sm(Sn,Dt),delay:this.ast.options?.delay},su=et?[]:Bf(s,o,this.ast.animation,T,O,zt,Br,iu,de,ot);let Bl=0;if(su.forEach(mc=>{Bl=Math.max(mc.duration+mc.delay,Bl)}),ot.length)return Qm(o,this._triggerName,h,_,wa,zt,Br,[],[],bi,_s,Bl,ot);su.forEach(mc=>{const _c=mc.element,pf=Fa(bi,_c,new Set);mc.preStyleProps.forEach(ou=>pf.add(ou));const ep=Fa(_s,_c,new Set);mc.postStyleProps.forEach(ou=>ep.add(ou)),_c!==o&&Or.add(_c)});const $c=Vc(Or.values());return Qm(o,this._triggerName,h,_,wa,zt,Br,su,$c,bi,_s,Bl)}}function sm(c,s){const o=Bp(s);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(o[h]=c[h]);return o}class Gf{constructor(s,o,h){this.styles=s,this.defaultParams=o,this.normalizer=h}buildStyles(s,o){const h=new Map,_=Bp(this.defaultParams);return Object.keys(s).forEach(T=>{const O=s[T];null!==O&&(_[T]=O)}),this.styles.styles.forEach(T=>{"string"!=typeof T&&T.forEach((O,G)=>{O&&(O=Wd(O,_,o));const te=this.normalizer.normalizePropertyName(G,o);O=this.normalizer.normalizeStyleValue(G,te,O,o),h.set(te,O)})}),h}}class zf{constructor(s,o,h){this.name=s,this.ast=o,this._normalizer=h,this.transitionFactories=[],this.states=new Map,o.states.forEach(_=>{this.states.set(_.name,new Gf(_.style,_.options&&_.options.params||{},h))}),Zp(this.states,"true","1"),Zp(this.states,"false","0"),o.transitions.forEach(_=>{this.transitionFactories.push(new Jm(s,_,this.states))}),this.fallbackTransition=function Sy(c,s,o){return new Jm(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(O,G)=>!0],options:null,queryCount:0,depCount:0},s)}(s,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(s,o,h,_){return this.transitionFactories.find(O=>O.match(s,o,h,_))||null}matchStyles(s,o,h){return this.fallbackTransition.buildStyles(s,o,h)}}function Zp(c,s,o){c.has(s)?c.has(o)||c.set(o,c.get(s)):c.has(o)&&c.set(s,c.get(o))}const Xm=new Kd;class e_{constructor(s,o,h){this.bodyNode=s,this._driver=o,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(s,o){const h=[],T=Lf(this._driver,o,h,[]);if(h.length)throw function kg(c){return new L.vHH(3503,!1)}();this._animations.set(s,T)}_buildPlayer(s,o,h){const _=s.element,T=z_(0,this._normalizer,0,s.keyframes,o,h);return this._driver.animate(_,T,s.duration,s.delay,s.easing,[],!0)}create(s,o,h={}){const _=[],T=this._animations.get(s);let O;const G=new Map;if(T?(O=Bf(this._driver,o,T,Hd,Ch,new Map,new Map,h,Xm,_),O.forEach(et=>{const ot=Fa(G,et.element,new Map);et.postStyleProps.forEach(Dt=>ot.set(Dt,null))})):(_.push(function Fg(){return new L.vHH(3300,!1)}()),O=[]),_.length)throw function j_(c){return new L.vHH(3504,!1)}();G.forEach((et,ot)=>{et.forEach((Dt,Gt)=>{et.set(Gt,this._driver.computeStyle(ot,Gt,co.l3))})});const de=Ud(O.map(et=>{const ot=G.get(et.element);return this._buildPlayer(et,new Map,ot)}));return this._playersById.set(s,de),de.onDestroy(()=>this.destroy(s)),this.players.push(de),de}destroy(s){const o=this._getPlayer(s);o.destroy(),this._playersById.delete(s);const h=this.players.indexOf(o);h>=0&&this.players.splice(h,1)}_getPlayer(s){const o=this._playersById.get(s);if(!o)throw function jm(c){return new L.vHH(3301,!1)}();return o}listen(s,o,h,_){const T=Sp(o,"","","");return Fc(this._getPlayer(s),h,T,_),()=>{}}command(s,o,h,_){if("register"==h)return void this.register(s,_[0]);if("create"==h)return void this.create(s,o,_[0]||{});const T=this._getPlayer(s);switch(h){case"play":T.play();break;case"pause":T.pause();break;case"reset":T.reset();break;case"restart":T.restart();break;case"finish":T.finish();break;case"init":T.init();break;case"setPosition":T.setPosition(parseFloat(_[0]));break;case"destroy":this.destroy(s)}}}const Kf="ng-animate-queued",uf="ng-animate-disabled",Jp=[],qd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},am={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ll="__ng_removed";class Yf{constructor(s,o=""){this.namespaceId=o;const h=s&&s.hasOwnProperty("value");if(this.value=function Xp(c){return c??null}(h?s.value:s),h){const T=Bp(s);delete T.value,this.options=T}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(s){const o=s.params;if(o){const h=this.options.params;Object.keys(o).forEach(_=>{null==h[_]&&(h[_]=o[_])})}}}const cf="void",df=new Yf(cf);class Mi{constructor(s,o,h){this.id=s,this.hostElement=o,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,Hu(o,this._hostClassName)}listen(s,o,h,_){if(!this._triggers.has(o))throw function $_(c,s){return new L.vHH(3302,!1)}();if(null==h||0==h.length)throw function G_(c){return new L.vHH(3303,!1)}();if(!function No(c){return"start"==c||"done"==c}(h))throw function W_(c,s){return new L.vHH(3400,!1)}();const T=Fa(this._elementListeners,s,[]),O={name:o,phase:h,callback:_};T.push(O);const G=Fa(this._engine.statesByElement,s,new Map);return G.has(o)||(Hu(s,Ug),Hu(s,Ug+"-"+o),G.set(o,df)),()=>{this._engine.afterFlush(()=>{const te=T.indexOf(O);te>=0&&T.splice(te,1),this._triggers.has(o)||G.delete(o)})}}register(s,o){return!this._triggers.has(s)&&(this._triggers.set(s,o),!0)}_getTrigger(s){const o=this._triggers.get(s);if(!o)throw function Lg(c){return new L.vHH(3401,!1)}();return o}trigger(s,o,h,_=!0){const T=this._getTrigger(o),O=new lm(this.id,o,s);let G=this._engine.statesByElement.get(s);G||(Hu(s,Ug),Hu(s,Ug+"-"+o),this._engine.statesByElement.set(s,G=new Map));let te=G.get(o);const de=new Yf(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&te&&de.absorbOptions(te.options),G.set(o,de),te||(te=df),de.value!==cf&&te.value===de.value){if(!function eg(c,s){const o=Object.keys(c),h=Object.keys(s);if(o.length!=h.length)return!1;for(let _=0;_<o.length;_++){const T=o[_];if(!s.hasOwnProperty(T)||c[T]!==s[T])return!1}return!0}(te.params,de.params)){const Sn=[],Br=T.matchStyles(te.value,te.params,Sn),Or=T.matchStyles(de.value,de.params,Sn);Sn.length?this._engine.reportError(Sn):this._engine.afterFlush(()=>{hc(s,Br),dc(s,Or)})}return}const Dt=Fa(this._engine.playersByElement,s,[]);Dt.forEach(Sn=>{Sn.namespaceId==this.id&&Sn.triggerName==o&&Sn.queued&&Sn.destroy()});let Gt=T.matchTransition(te.value,de.value,s,de.params),zt=!1;if(!Gt){if(!_)return;Gt=T.fallbackTransition,zt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:o,transition:Gt,fromState:te,toState:de,player:O,isFallbackTransition:zt}),zt||(Hu(s,Kf),O.onStart(()=>{fc(s,Kf)})),O.onDone(()=>{let Sn=this.players.indexOf(O);Sn>=0&&this.players.splice(Sn,1);const Br=this._engine.playersByElement.get(s);if(Br){let Or=Br.indexOf(O);Or>=0&&Br.splice(Or,1)}}),this.players.push(O),Dt.push(O),O}deregister(s){this._triggers.delete(s),this._engine.statesByElement.forEach(o=>o.delete(s)),this._elementListeners.forEach((o,h)=>{this._elementListeners.set(h,o.filter(_=>_.name!=s))})}clearElementCache(s){this._engine.statesByElement.delete(s),this._elementListeners.delete(s);const o=this._engine.playersByElement.get(s);o&&(o.forEach(h=>h.destroy()),this._engine.playersByElement.delete(s))}_signalRemovalForInnerTriggers(s,o){const h=this._engine.driver.query(s,Lp,!0);h.forEach(_=>{if(_[Ll])return;const T=this._engine.fetchNamespacesByElement(_);T.size?T.forEach(O=>O.triggerLeaveAnimation(_,o,!1,!0)):this.clearElementCache(_)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(_=>this.clearElementCache(_)))}triggerLeaveAnimation(s,o,h,_){const T=this._engine.statesByElement.get(s),O=new Map;if(T){const G=[];if(T.forEach((te,de)=>{if(O.set(de,te.value),this._triggers.has(de)){const et=this.trigger(s,de,cf,_);et&&G.push(et)}}),G.length)return this._engine.markElementAsRemoved(this.id,s,!0,o,O),h&&Ud(G).onDone(()=>this._engine.processLeaveNode(s)),!0}return!1}prepareLeaveAnimationListeners(s){const o=this._elementListeners.get(s),h=this._engine.statesByElement.get(s);if(o&&h){const _=new Set;o.forEach(T=>{const O=T.name;if(_.has(O))return;_.add(O);const te=this._triggers.get(O).fallbackTransition,de=h.get(O)||df,et=new Yf(cf),ot=new lm(this.id,O,s);this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:O,transition:te,fromState:de,toState:et,player:ot,isFallbackTransition:!0})})}}removeNode(s,o){const h=this._engine;if(s.childElementCount&&this._signalRemovalForInnerTriggers(s,o),this.triggerLeaveAnimation(s,o,!0))return;let _=!1;if(h.totalAnimations){const T=h.players.length?h.playersByQueriedElement.get(s):[];if(T&&T.length)_=!0;else{let O=s;for(;O=O.parentNode;)if(h.statesByElement.get(O)){_=!0;break}}}if(this.prepareLeaveAnimationListeners(s),_)h.markElementAsRemoved(this.id,s,!1,o);else{const T=s[Ll];(!T||T===qd)&&(h.afterFlush(()=>this.clearElementCache(s)),h.destroyInnerAnimations(s),h._onRemovalComplete(s,o))}}insertNode(s,o){Hu(s,this._hostClassName)}drainQueuedTransitions(s){const o=[];return this._queue.forEach(h=>{const _=h.player;if(_.destroyed)return;const T=h.element,O=this._elementListeners.get(T);O&&O.forEach(G=>{if(G.name==h.triggerName){const te=Sp(T,h.triggerName,h.fromState.value,h.toState.value);te._data=s,Fc(h.player,G.phase,te,G.callback)}}),_.markedForDestroy?this._engine.afterFlush(()=>{_.destroy()}):o.push(h)}),this._queue=[],o.sort((h,_)=>{const T=h.transition.ast.depCount,O=_.transition.ast.depCount;return 0==T||0==O?T-O:this._engine.driver.containsElement(h.element,_.element)?1:-1})}destroy(s){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,s)}elementContainsData(s){let o=!1;return this._elementListeners.has(s)&&(o=!0),o=!!this._queue.find(h=>h.element===s)||o,o}}class t_{constructor(s,o,h){this.bodyNode=s,this.driver=o,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(_,T)=>{}}_onRemovalComplete(s,o){this.onRemovalComplete(s,o)}get queuedPlayers(){const s=[];return this._namespaceList.forEach(o=>{o.players.forEach(h=>{h.queued&&s.push(h)})}),s}createNamespace(s,o){const h=new Mi(s,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(h,o):(this.newHostElements.set(o,h),this.collectEnterElement(o)),this._namespaceLookup[s]=h}_balanceNamespaceList(s,o){const h=this._namespaceList,_=this.namespacesByHostElement;if(h.length-1>=0){let O=!1,G=this.driver.getParentElement(o);for(;G;){const te=_.get(G);if(te){const de=h.indexOf(te);h.splice(de+1,0,s),O=!0;break}G=this.driver.getParentElement(G)}O||h.unshift(s)}else h.push(s);return _.set(o,s),s}register(s,o){let h=this._namespaceLookup[s];return h||(h=this.createNamespace(s,o)),h}registerTrigger(s,o,h){let _=this._namespaceLookup[s];_&&_.register(o,h)&&this.totalAnimations++}destroy(s,o){if(!s)return;const h=this._fetchNamespace(s);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[s];const _=this._namespaceList.indexOf(h);_>=0&&this._namespaceList.splice(_,1)}),this.afterFlushAnimationsDone(()=>h.destroy(o))}_fetchNamespace(s){return this._namespaceLookup[s]}fetchNamespacesByElement(s){const o=new Set,h=this.statesByElement.get(s);if(h)for(let _ of h.values())if(_.namespaceId){const T=this._fetchNamespace(_.namespaceId);T&&o.add(T)}return o}trigger(s,o,h,_){if(Zf(o)){const T=this._fetchNamespace(s);if(T)return T.trigger(o,h,_),!0}return!1}insertNode(s,o,h,_){if(!Zf(o))return;const T=o[Ll];if(T&&T.setForRemoval){T.setForRemoval=!1,T.setForMove=!0;const O=this.collectedLeaveElements.indexOf(o);O>=0&&this.collectedLeaveElements.splice(O,1)}if(s){const O=this._fetchNamespace(s);O&&O.insertNode(o,h)}_&&this.collectEnterElement(o)}collectEnterElement(s){this.collectedEnterElements.push(s)}markElementAsDisabled(s,o){o?this.disabledNodes.has(s)||(this.disabledNodes.add(s),Hu(s,uf)):this.disabledNodes.has(s)&&(this.disabledNodes.delete(s),fc(s,uf))}removeNode(s,o,h,_){if(Zf(o)){const T=s?this._fetchNamespace(s):null;if(T?T.removeNode(o,_):this.markElementAsRemoved(s,o,!1,_),h){const O=this.namespacesByHostElement.get(o);O&&O.id!==s&&O.removeNode(o,_)}}else this._onRemovalComplete(o,_)}markElementAsRemoved(s,o,h,_,T){this.collectedLeaveElements.push(o),o[Ll]={namespaceId:s,setForRemoval:_,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:T}}listen(s,o,h,_,T){return Zf(o)?this._fetchNamespace(s).listen(o,h,_,T):()=>{}}_buildInstruction(s,o,h,_,T){return s.transition.build(this.driver,s.element,s.fromState.value,s.toState.value,h,_,s.fromState.options,s.toState.options,o,T)}destroyInnerAnimations(s){let o=this.driver.query(s,Lp,!0);o.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(s,Of,!0),o.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(s){const o=this.playersByElement.get(s);o&&o.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(s){const o=this.playersByQueriedElement.get(s);o&&o.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(s=>{if(this.players.length)return Ud(this.players).onDone(()=>s());s()})}processLeaveNode(s){const o=s[Ll];if(o&&o.setForRemoval){if(s[Ll]=qd,o.namespaceId){this.destroyInnerAnimations(s);const h=this._fetchNamespace(o.namespaceId);h&&h.clearElementCache(s)}this._onRemovalComplete(s,o.setForRemoval)}s.classList?.contains(uf)&&this.markElementAsDisabled(s,!1),this.driver.query(s,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(s=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,_)=>this._balanceNamespaceList(h,_)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Hu(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{o=this._flushAnimations(h,s)}finally{for(let _=0;_<h.length;_++)h[_]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],o.length?Ud(o).onDone(()=>{h.forEach(_=>_())}):h.forEach(_=>_())}}reportError(s){throw function Dp(c){return new L.vHH(3402,!1)}()}_flushAnimations(s,o){const h=new Kd,_=[],T=new Map,O=[],G=new Map,te=new Map,de=new Map,et=new Set;this.disabledNodes.forEach(ir=>{et.add(ir);const Sr=this.driver.query(ir,".ng-animate-queued",!0);for(let Hr=0;Hr<Sr.length;Hr++)et.add(Sr[Hr])});const ot=this.bodyNode,Dt=Array.from(this.statesByElement.keys()),Gt=Qf(Dt,this.collectedEnterElements),zt=new Map;let Sn=0;Gt.forEach((ir,Sr)=>{const Hr=Hd+Sn++;zt.set(Sr,Hr),ir.forEach(hs=>Hu(hs,Hr))});const Br=[],Or=new Set,bi=new Set;for(let ir=0;ir<this.collectedLeaveElements.length;ir++){const Sr=this.collectedLeaveElements[ir],Hr=Sr[Ll];Hr&&Hr.setForRemoval&&(Br.push(Sr),Or.add(Sr),Hr.hasAnimation?this.driver.query(Sr,".ng-star-inserted",!0).forEach(hs=>Or.add(hs)):bi.add(Sr))}const _s=new Map,wa=Qf(Dt,Array.from(Or));wa.forEach((ir,Sr)=>{const Hr=Ch+Sn++;_s.set(Sr,Hr),ir.forEach(hs=>Hu(hs,Hr))}),s.push(()=>{Gt.forEach((ir,Sr)=>{const Hr=zt.get(Sr);ir.forEach(hs=>fc(hs,Hr))}),wa.forEach((ir,Sr)=>{const Hr=_s.get(Sr);ir.forEach(hs=>fc(hs,Hr))}),Br.forEach(ir=>{this.processLeaveNode(ir)})});const iu=[],su=[];for(let ir=this._namespaceList.length-1;ir>=0;ir--)this._namespaceList[ir].drainQueuedTransitions(o).forEach(Hr=>{const hs=Hr.player,el=Hr.element;if(iu.push(hs),this.collectedEnterElements.length){const ul=el[Ll];if(ul&&ul.setForMove){if(ul.previousTriggersValues&&ul.previousTriggersValues.has(Hr.triggerName)){const Wc=ul.previousTriggersValues.get(Hr.triggerName),$u=this.statesByElement.get(Hr.element);if($u&&$u.has(Hr.triggerName)){const Ro=$u.get(Hr.triggerName);Ro.value=Wc,$u.set(Hr.triggerName,Ro)}}return void hs.destroy()}}const yu=!ot||!this.driver.containsElement(ot,el),Tl=_s.get(el),Gc=zt.get(el),Gs=this._buildInstruction(Hr,h,Gc,Tl,yu);if(Gs.errors&&Gs.errors.length)return void su.push(Gs);if(yu)return hs.onStart(()=>hc(el,Gs.fromStyles)),hs.onDestroy(()=>dc(el,Gs.toStyles)),void _.push(hs);if(Hr.isFallbackTransition)return hs.onStart(()=>hc(el,Gs.fromStyles)),hs.onDestroy(()=>dc(el,Gs.toStyles)),void _.push(hs);const f_=[];Gs.timelines.forEach(ul=>{ul.stretchStartingKeyframe=!0,this.disabledNodes.has(ul.element)||f_.push(ul)}),Gs.timelines=f_,h.append(el,Gs.timelines),O.push({instruction:Gs,player:hs,element:el}),Gs.queriedElements.forEach(ul=>Fa(G,ul,[]).push(hs)),Gs.preStyleProps.forEach((ul,Wc)=>{if(ul.size){let $u=te.get(Wc);$u||te.set(Wc,$u=new Set),ul.forEach((Ro,xh)=>$u.add(xh))}}),Gs.postStyleProps.forEach((ul,Wc)=>{let $u=de.get(Wc);$u||de.set(Wc,$u=new Set),ul.forEach((Ro,xh)=>$u.add(xh))})});if(su.length){const ir=[];su.forEach(Sr=>{ir.push(function Tp(c,s){return new L.vHH(3505,!1)}())}),iu.forEach(Sr=>Sr.destroy()),this.reportError(ir)}const Bl=new Map,$c=new Map;O.forEach(ir=>{const Sr=ir.element;h.has(Sr)&&($c.set(Sr,Sr),this._beforeAnimationBuild(ir.player.namespaceId,ir.instruction,Bl))}),_.forEach(ir=>{const Sr=ir.element;this._getPreviousPlayers(Sr,!1,ir.namespaceId,ir.triggerName,null).forEach(hs=>{Fa(Bl,Sr,[]).push(hs),hs.destroy()})});const mc=Br.filter(ir=>i_(ir,te,de)),_c=new Map;Uu(_c,this.driver,bi,de,co.l3).forEach(ir=>{i_(ir,te,de)&&mc.push(ir)});const ep=new Map;Gt.forEach((ir,Sr)=>{Uu(ep,this.driver,new Set(ir),te,co.k1)}),mc.forEach(ir=>{const Sr=_c.get(ir),Hr=ep.get(ir);_c.set(ir,new Map([...Array.from(Sr?.entries()??[]),...Array.from(Hr?.entries()??[])]))});const ou=[],gf=[],eh={};O.forEach(ir=>{const{element:Sr,player:Hr,instruction:hs}=ir;if(h.has(Sr)){if(et.has(Sr))return Hr.onDestroy(()=>dc(Sr,hs.toStyles)),Hr.disabled=!0,Hr.overrideTotalTime(hs.totalTime),void _.push(Hr);let el=eh;if($c.size>1){let Tl=Sr;const Gc=[];for(;Tl=Tl.parentNode;){const Gs=$c.get(Tl);if(Gs){el=Gs;break}Gc.push(Tl)}Gc.forEach(Gs=>$c.set(Gs,el))}const yu=this._buildAnimation(Hr.namespaceId,hs,Bl,T,ep,_c);if(Hr.setRealPlayer(yu),el===eh)ou.push(Hr);else{const Tl=this.playersByElement.get(el);Tl&&Tl.length&&(Hr.parentPlayer=Ud(Tl)),_.push(Hr)}}else hc(Sr,hs.fromStyles),Hr.onDestroy(()=>dc(Sr,hs.toStyles)),gf.push(Hr),et.has(Sr)&&_.push(Hr)}),gf.forEach(ir=>{const Sr=T.get(ir.element);if(Sr&&Sr.length){const Hr=Ud(Sr);ir.setRealPlayer(Hr)}}),_.forEach(ir=>{ir.parentPlayer?ir.syncPlayerEvents(ir.parentPlayer):ir.destroy()});for(let ir=0;ir<Br.length;ir++){const Sr=Br[ir],Hr=Sr[Ll];if(fc(Sr,Ch),Hr&&Hr.hasAnimation)continue;let hs=[];if(G.size){let yu=G.get(Sr);yu&&yu.length&&hs.push(...yu);let Tl=this.driver.query(Sr,Of,!0);for(let Gc=0;Gc<Tl.length;Gc++){let Gs=G.get(Tl[Gc]);Gs&&Gs.length&&hs.push(...Gs)}}const el=hs.filter(yu=>!yu.destroyed);el.length?r_(this,Sr,el):this.processLeaveNode(Sr)}return Br.length=0,ou.forEach(ir=>{this.players.push(ir),ir.onDone(()=>{ir.destroy();const Sr=this.players.indexOf(ir);this.players.splice(Sr,1)}),ir.play()}),ou}elementContainsData(s,o){let h=!1;const _=o[Ll];return _&&_.setForRemoval&&(h=!0),this.playersByElement.has(o)&&(h=!0),this.playersByQueriedElement.has(o)&&(h=!0),this.statesByElement.has(o)&&(h=!0),this._fetchNamespace(s).elementContainsData(o)||h}afterFlush(s){this._flushFns.push(s)}afterFlushAnimationsDone(s){this._whenQuietFns.push(s)}_getPreviousPlayers(s,o,h,_,T){let O=[];if(o){const G=this.playersByQueriedElement.get(s);G&&(O=G)}else{const G=this.playersByElement.get(s);if(G){const te=!T||T==cf;G.forEach(de=>{de.queued||!te&&de.triggerName!=_||O.push(de)})}}return(h||_)&&(O=O.filter(G=>!(h&&h!=G.namespaceId||_&&_!=G.triggerName))),O}_beforeAnimationBuild(s,o,h){const T=o.element,O=o.isRemovalTransition?void 0:s,G=o.isRemovalTransition?void 0:o.triggerName;for(const te of o.timelines){const de=te.element,et=de!==T,ot=Fa(h,de,[]);this._getPreviousPlayers(de,et,O,G,o.toState).forEach(Gt=>{const zt=Gt.getRealPlayer();zt.beforeDestroy&&zt.beforeDestroy(),Gt.destroy(),ot.push(Gt)})}hc(T,o.fromStyles)}_buildAnimation(s,o,h,_,T,O){const G=o.triggerName,te=o.element,de=[],et=new Set,ot=new Set,Dt=o.timelines.map(zt=>{const Sn=zt.element;et.add(Sn);const Br=Sn[Ll];if(Br&&Br.removedBeforeQueried)return new co.ZN(zt.duration,zt.delay);const Or=Sn!==te,bi=function um(c){const s=[];return cm(c,s),s}((h.get(Sn)||Jp).map(Bl=>Bl.getRealPlayer())).filter(Bl=>!!Bl.element&&Bl.element===Sn),_s=T.get(Sn),wa=O.get(Sn),iu=z_(0,this._normalizer,0,zt.keyframes,_s,wa),su=this._buildPlayer(zt,iu,bi);if(zt.subTimeline&&_&&ot.add(Sn),Or){const Bl=new lm(s,G,Sn);Bl.setRealPlayer(su),de.push(Bl)}return su});de.forEach(zt=>{Fa(this.playersByQueriedElement,zt.element,[]).push(zt),zt.onDone(()=>function n_(c,s,o){let h=c.get(s);if(h){if(h.length){const _=h.indexOf(o);h.splice(_,1)}0==h.length&&c.delete(s)}return h}(this.playersByQueriedElement,zt.element,zt))}),et.forEach(zt=>Hu(zt,Gm));const Gt=Ud(Dt);return Gt.onDestroy(()=>{et.forEach(zt=>fc(zt,Gm)),dc(te,o.toStyles)}),ot.forEach(zt=>{Fa(_,zt,[]).push(Gt)}),Gt}_buildPlayer(s,o,h){return o.length>0?this.driver.animate(s.element,o,s.duration,s.delay,s.easing,h):new co.ZN(s.duration,s.delay)}}class lm{constructor(s,o,h){this.namespaceId=s,this.triggerName=o,this.element=h,this._player=new co.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(s){this._containsRealPlayer||(this._player=s,this._queuedCallbacks.forEach((o,h)=>{o.forEach(_=>Fc(s,h,void 0,_))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(s.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(s){this.totalTime=s}syncPlayerEvents(s){const o=this._player;o.triggerCallback&&s.onStart(()=>o.triggerCallback("start")),s.onDone(()=>this.finish()),s.onDestroy(()=>this.destroy())}_queueEvent(s,o){Fa(this._queuedCallbacks,s,[]).push(o)}onDone(s){this.queued&&this._queueEvent("done",s),this._player.onDone(s)}onStart(s){this.queued&&this._queueEvent("start",s),this._player.onStart(s)}onDestroy(s){this.queued&&this._queueEvent("destroy",s),this._player.onDestroy(s)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(s){this.queued||this._player.setPosition(s)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(s){const o=this._player;o.triggerCallback&&o.triggerCallback(s)}}function Zf(c){return c&&1===c.nodeType}function ll(c,s){const o=c.style.display;return c.style.display=s??"none",o}function Uu(c,s,o,h,_){const T=[];o.forEach(te=>T.push(ll(te)));const O=[];h.forEach((te,de)=>{const et=new Map;te.forEach(ot=>{const Dt=s.computeStyle(de,ot,_);et.set(ot,Dt),(!Dt||0==Dt.length)&&(de[Ll]=am,O.push(de))}),c.set(de,et)});let G=0;return o.forEach(te=>ll(te,T[G++])),O}function Qf(c,s){const o=new Map;if(c.forEach(G=>o.set(G,[])),0==s.length)return o;const _=new Set(s),T=new Map;function O(G){if(!G)return 1;let te=T.get(G);if(te)return te;const de=G.parentNode;return te=o.has(de)?de:_.has(de)?1:O(de),T.set(G,te),te}return s.forEach(G=>{const te=O(G);1!==te&&o.get(te).push(G)}),o}function Hu(c,s){c.classList?.add(s)}function fc(c,s){c.classList?.remove(s)}function r_(c,s,o){Ud(o).onDone(()=>c.processLeaveNode(s))}function cm(c,s){for(let o=0;o<c.length;o++){const h=c[o];h instanceof co.ZE?cm(h.players,s):s.push(h)}}function i_(c,s,o){const h=o.get(c);if(!h)return!1;let _=s.get(c);return _?h.forEach(T=>_.add(T)):s.set(c,h),o.delete(c),!0}class dm{constructor(s,o,h){this.bodyNode=s,this._driver=o,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(_,T)=>{},this._transitionEngine=new t_(s,o,h),this._timelineEngine=new e_(s,o,h),this._transitionEngine.onRemovalComplete=(_,T)=>this.onRemovalComplete(_,T)}registerTrigger(s,o,h,_,T){const O=s+"-"+_;let G=this._triggerCache[O];if(!G){const te=[],et=Lf(this._driver,T,te,[]);if(te.length)throw function Ep(c,s){return new L.vHH(3404,!1)}();G=function Wf(c,s,o){return new zf(c,s,o)}(_,et,this._normalizer),this._triggerCache[O]=G}this._transitionEngine.registerTrigger(o,_,G)}register(s,o){this._transitionEngine.register(s,o)}destroy(s,o){this._transitionEngine.destroy(s,o)}onInsert(s,o,h,_){this._transitionEngine.insertNode(s,o,h,_)}onRemove(s,o,h,_){this._transitionEngine.removeNode(s,o,_||!1,h)}disableAnimations(s,o){this._transitionEngine.markElementAsDisabled(s,o)}process(s,o,h,_){if("@"==h.charAt(0)){const[T,O]=nu(h);this._timelineEngine.command(T,o,O,_)}else this._transitionEngine.trigger(s,o,h,_)}listen(s,o,h,_,T){if("@"==h.charAt(0)){const[O,G]=nu(h);return this._timelineEngine.listen(O,o,G,T)}return this._transitionEngine.listen(s,o,h,_,T)}flush(s=-1){this._transitionEngine.flush(s)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ah=(()=>{class c{constructor(o,h,_){this._element=o,this._startStyles=h,this._endStyles=_,this._state=0;let T=c.initialStylesByElement.get(o);T||c.initialStylesByElement.set(o,T=new Map),this._initialStyles=T}start(){this._state<1&&(this._startStyles&&dc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dc(this._element,this._initialStyles),this._endStyles&&(dc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(hc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hc(this._element,this._endStyles),this._endStyles=null),dc(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function s_(c){let s=null;return c.forEach((o,h)=>{(function Jf(c){return"display"===c||"position"===c})(h)&&(s=s||new Map,s.set(h,o))}),s}class o_{constructor(s,o,h,_){this.element=s,this.keyframes=o,this.options=h,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(s=>s()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const s=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,s,this.options),this._finalKeyframe=s.length?s[s.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(s){const o=[];return s.forEach(h=>{o.push(Object.fromEntries(h))}),o}_triggerWebAnimation(s,o,h){return s.animate(this._convertKeyframesToObject(o),h)}onStart(s){this._originalOnStartFns.push(s),this._onStartFns.push(s)}onDone(s){this._originalOnDoneFns.push(s),this._onDoneFns.push(s)}onDestroy(s){this._onDestroyFns.push(s)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(s=>s()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(s=>s()),this._onDestroyFns=[])}setPosition(s){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=s*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const s=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,_)=>{"offset"!==_&&s.set(_,this._finished?h:qg(this.element,_))}),this.currentSnapshot=s}triggerCallback(s){const o="start"===s?this._onStartFns:this._onDoneFns;o.forEach(h=>h()),o.length=0}}class a_{validateStyleProperty(s){return!0}validateAnimatableStyleProperty(s){return!0}matchesElement(s,o){return!1}containsElement(s,o){return Th(s,o)}getParentElement(s){return Pl(s)}query(s,o,h){return Mp(s,o,h)}computeStyle(s,o,h){return window.getComputedStyle(s)[o]}animate(s,o,h,_,T,O=[]){const te={duration:h,delay:_,fill:0==_?"both":"forwards"};T&&(te.easing=T);const de=new Map,et=O.filter(Gt=>Gt instanceof o_);(function Vp(c,s){return 0===c||0===s})(h,_)&&et.forEach(Gt=>{Gt.currentSnapshot.forEach((zt,Sn)=>de.set(Sn,zt))});let ot=function Ty(c){return c.length?c[0]instanceof Map?c:c.map(s=>Hg(s)):[]}(o).map(Gt=>jd(Gt));ot=function Kg(c,s,o){if(o.size&&s.length){let h=s[0],_=[];if(o.forEach((T,O)=>{h.has(O)||_.push(O),h.set(O,T)}),_.length)for(let T=1;T<s.length;T++){let O=s[T];_.forEach(G=>O.set(G,qg(c,G)))}}return s}(s,ot,de);const Dt=function tg(c,s){let o=null,h=null;return Array.isArray(s)&&s.length?(o=s_(s[0]),s.length>1&&(h=s_(s[s.length-1]))):s instanceof Map&&(o=s_(s)),o||h?new Ah(c,o,h):null}(s,ot);return new o_(s,ot,te,Dt)}}let Xf=(()=>{class c extends co._j{constructor(o,h){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(h.body,{id:"0",encapsulation:L.ifc.None,styles:[],data:{animation:[]}})}build(o){const h=this._nextAnimationId.toString();this._nextAnimationId++;const _=Array.isArray(o)?(0,co.vP)(o):o;return Yd(this._renderer,null,h,"register",[_]),new l_(h,this._renderer)}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(L.FYo),L.LFG(Je.K0))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();class l_ extends co.LC{constructor(s,o){super(),this._id=s,this._renderer=o}create(s,o){return new ju(this._id,s,o||{},this._renderer)}}class ju{constructor(s,o,h,_){this.id=s,this.element=o,this._renderer=_,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(s,o){return this._renderer.listen(this.element,`@@${this.id}:${s}`,o)}_command(s,...o){return Yd(this._renderer,this.element,this.id,s,o)}onDone(s){this._listen("done",s)}onStart(s){this._listen("start",s)}onDestroy(s){this._listen("destroy",s)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(s){this._command("setPosition",s)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Yd(c,s,o,h,_){return c.setProperty(s,`@@${o}:${h}`,_)}const pc="@.disabled";let hf=(()=>{class c{constructor(o,h,_){this.delegate=o,this.engine=h,this._zone=_,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(T,O)=>{const G=O?.parentNode(T);G&&O.removeChild(G,T)}}createRenderer(o,h){const T=this.delegate.createRenderer(o,h);if(!(o&&h&&h.data&&h.data.animation)){let et=this._rendererCache.get(T);return et||(et=new ru("",T,this.engine,()=>this._rendererCache.delete(T)),this._rendererCache.set(T,et)),et}const O=h.id,G=h.id+"-"+this._currentId;this._currentId++,this.engine.register(G,o);const te=et=>{Array.isArray(et)?et.forEach(te):this.engine.registerTrigger(O,G,o,et.name,et)};return h.data.animation.forEach(te),new ff(this,G,T,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,h,_){o>=0&&o<this._microtaskId?this._zone.run(()=>h(_)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(T=>{const[O,G]=T;O(G)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,_]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(L.FYo),L.LFG(dm),L.LFG(L.R0b))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})();class ru{constructor(s,o,h,_){this.namespaceId=s,this.delegate=o,this.engine=h,this._onDestroy=_,this.destroyNode=this.delegate.destroyNode?T=>o.destroyNode(T):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(s,o){return this.delegate.createElement(s,o)}createComment(s){return this.delegate.createComment(s)}createText(s){return this.delegate.createText(s)}appendChild(s,o){this.delegate.appendChild(s,o),this.engine.onInsert(this.namespaceId,o,s,!1)}insertBefore(s,o,h,_=!0){this.delegate.insertBefore(s,o,h),this.engine.onInsert(this.namespaceId,o,s,_)}removeChild(s,o,h){this.engine.onRemove(this.namespaceId,o,this.delegate,h)}selectRootElement(s,o){return this.delegate.selectRootElement(s,o)}parentNode(s){return this.delegate.parentNode(s)}nextSibling(s){return this.delegate.nextSibling(s)}setAttribute(s,o,h,_){this.delegate.setAttribute(s,o,h,_)}removeAttribute(s,o,h){this.delegate.removeAttribute(s,o,h)}addClass(s,o){this.delegate.addClass(s,o)}removeClass(s,o){this.delegate.removeClass(s,o)}setStyle(s,o,h,_){this.delegate.setStyle(s,o,h,_)}removeStyle(s,o,h){this.delegate.removeStyle(s,o,h)}setProperty(s,o,h){"@"==o.charAt(0)&&o==pc?this.disableAnimations(s,!!h):this.delegate.setProperty(s,o,h)}setValue(s,o){this.delegate.setValue(s,o)}listen(s,o,h){return this.delegate.listen(s,o,h)}disableAnimations(s,o){this.engine.disableAnimations(s,o)}}class ff extends ru{constructor(s,o,h,_,T){super(o,h,_,T),this.factory=s,this.namespaceId=o}setProperty(s,o,h){"@"==o.charAt(0)?"."==o.charAt(1)&&o==pc?this.disableAnimations(s,h=void 0===h||!!h):this.engine.process(this.namespaceId,s,o.slice(1),h):this.delegate.setProperty(s,o,h)}listen(s,o,h){if("@"==o.charAt(0)){const _=function Zd(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(s);let T=o.slice(1),O="";return"@"!=T.charAt(0)&&([T,O]=function Qd(c){const s=c.indexOf(".");return[c.substring(0,s),c.slice(s+1)]}(T)),this.engine.listen(this.namespaceId,_,T,O,G=>{this.factory.scheduleListenerCallback(G._data||-1,h,G)})}return this.delegate.listen(s,o,h)}}const Rh=[{provide:co._j,useClass:Xf},{provide:jf,useFactory:function gc(){return new qp}},{provide:dm,useClass:(()=>{class c extends dm{constructor(o,h,_,T){super(o.body,h,_)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(o){return new(o||c)(L.LFG(Je.K0),L.LFG(Pp),L.LFG(jf),L.LFG(L.z2F))},c.\u0275prov=L.Yz7({token:c,factory:c.\u0275fac}),c})()},{provide:L.FYo,useFactory:function Jd(c,s,o){return new hf(c,s,o)},deps:[u.se,dm,L.R0b]}],Xd=[{provide:Pp,useFactory:()=>new a_},{provide:L.QbO,useValue:"BrowserAnimations"},...Rh],Mh=[{provide:Pp,useClass:xp},{provide:L.QbO,useValue:"NoopAnimations"},...Rh];let Oh=(()=>{class c{static withConfig(o){return{ngModule:c,providers:o.disableAnimations?Mh:Xd}}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c}),c.\u0275inj=L.cJS({providers:Xd,imports:[u.b2]}),c})();var c_=B(4466);class d_{constructor(s,o="/assets/i18n/",h=".json"){this.http=s,this.prefix=o,this.suffix=h}getTranslation(s){return this.http.get(`${this.prefix}${s}${this.suffix}`)}}const h_=[{provide:Vd,useClass:gu,multi:!0},{provide:Vd,useClass:Xl,multi:!0}];let ng=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=L.oAB({type:c,bootstrap:[He]}),c.\u0275inj=L.cJS({providers:[h_,ka.e],imports:[u.b2,Me,lt.hO.initializeApp(mt_firebase),xt.ww,ut.yb,yt.TE,Ql,ee.IJ,Nt.UX,Oh,Ja.Rh.forRoot(),c_.m,Nt.u5,ni,ee.jF,ee._A,We.aw.forRoot({loader:{provide:We.Zw,useFactory:s=>new d_(s),deps:[tu]}})]}),c})();(0,L.G48)(),u.q6().bootstrapModule(ng).catch(c=>console.error(c))},4383:(hn,dt,B)=>{B.d(dt,{Rh:()=>Mt,_W:()=>Ht});var u=B(4650),L=B(7340),ee=B(7579),Se=B(1481),Oe=B(6895);const Me=["toast-component",""];function We(Le,Qe){if(1&Le){const Fe=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(Fe);const Xt=u.oxw();return u.KtG(Xt.remove())}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA()()}}function ke(Le,Qe){if(1&Le&&(u.ynx(0),u._uU(1),u.BQk()),2&Le){const Fe=u.oxw(2);u.xp6(1),u.hij("[",Fe.duplicatesCount+1,"]")}}function Je(Le,Qe){if(1&Le&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,ke,2,1,"ng-container",4),u.qZA()),2&Le){const Fe=u.oxw();u.Tol(Fe.options.titleClass),u.uIk("aria-label",Fe.title),u.xp6(1),u.hij(" ",Fe.title," "),u.xp6(1),u.Q6J("ngIf",Fe.duplicatesCount)}}function we(Le,Qe){if(1&Le&&u._UZ(0,"div",7),2&Le){const Fe=u.oxw();u.Tol(Fe.options.messageClass),u.Q6J("innerHTML",Fe.message,u.oJD)}}function ye(Le,Qe){if(1&Le&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&Le){const Fe=u.oxw();u.Tol(Fe.options.messageClass),u.uIk("aria-label",Fe.message),u.xp6(1),u.hij(" ",Fe.message," ")}}function He(Le,Qe){if(1&Le&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&Le){const Fe=u.oxw();u.xp6(1),u.Udp("width",Fe.width+"%")}}function Nt(Le,Qe){if(1&Le){const Fe=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(Fe);const Xt=u.oxw();return u.KtG(Xt.remove())}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA()()}}function mt(Le,Qe){if(1&Le&&(u.ynx(0),u._uU(1),u.BQk()),2&Le){const Fe=u.oxw(2);u.xp6(1),u.hij("[",Fe.duplicatesCount+1,"]")}}function lt(Le,Qe){if(1&Le&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,mt,2,1,"ng-container",4),u.qZA()),2&Le){const Fe=u.oxw();u.Tol(Fe.options.titleClass),u.uIk("aria-label",Fe.title),u.xp6(1),u.hij(" ",Fe.title," "),u.xp6(1),u.Q6J("ngIf",Fe.duplicatesCount)}}function xt(Le,Qe){if(1&Le&&u._UZ(0,"div",7),2&Le){const Fe=u.oxw();u.Tol(Fe.options.messageClass),u.Q6J("innerHTML",Fe.message,u.oJD)}}function yt(Le,Qe){if(1&Le&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&Le){const Fe=u.oxw();u.Tol(Fe.options.messageClass),u.uIk("aria-label",Fe.message),u.xp6(1),u.hij(" ",Fe.message," ")}}function ut(Le,Qe){if(1&Le&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&Le){const Fe=u.oxw();u.xp6(1),u.Udp("width",Fe.width+"%")}}class gt{constructor(Qe,Fe,st,Xt,an,Dr){this.toastId=Qe,this.config=Fe,this.message=st,this.title=Xt,this.toastType=an,this.toastRef=Dr,this._onTap=new ee.x,this._onAction=new ee.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Qe){this._onAction.next(Qe)}onAction(){return this._onAction.asObservable()}}const qe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ze=new u.OlP("ToastConfig");class $t{constructor(Qe,Fe){this.component=Qe,this.injector=Fe}attach(Qe,Fe){return this._attachedHost=Qe,Qe.attach(this,Fe)}detach(){const Qe=this._attachedHost;if(Qe)return this._attachedHost=void 0,Qe.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Qe){this._attachedHost=Qe}}class Ue extends class rt{attach(Qe,Fe){return this._attachedPortal=Qe,this.attachComponentPortal(Qe,Fe)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Qe){this._disposeFn=Qe}}{constructor(Qe,Fe,st){super(),this._hostDomElement=Qe,this._componentFactoryResolver=Fe,this._appRef=st}attachComponentPortal(Qe,Fe){const st=this._componentFactoryResolver.resolveComponentFactory(Qe.component);let Xt;return Xt=st.create(Qe.injector),this._appRef.attachView(Xt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Xt.hostView),Xt.destroy()}),Fe?this._hostDomElement.insertBefore(this._getComponentRootNode(Xt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Xt)),Xt}_getComponentRootNode(Qe){return Qe.hostView.rootNodes[0]}}let bt=(()=>{class Le{constructor(Fe){this._document=Fe}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Fe=this._document.createElement("div");Fe.classList.add("overlay-container"),this._document.body.appendChild(Fe),this._containerElement=Fe}}return Le.\u0275fac=function(Fe){return new(Fe||Le)(u.LFG(Oe.K0))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(Oe.K0))},token:Le,providedIn:"root"}),Le})();class Ne{constructor(Qe){this._portalHost=Qe}attach(Qe,Fe=!0){return this._portalHost.attach(Qe,Fe)}detach(){return this._portalHost.detach()}}let Ge=(()=>{class Le{constructor(Fe,st,Xt,an){this._overlayContainer=Fe,this._componentFactoryResolver=st,this._appRef=Xt,this._document=an,this._paneElements=new Map}create(Fe,st){return this._createOverlayRef(this.getPaneElement(Fe,st))}getPaneElement(Fe="",st){return this._paneElements.get(st)||this._paneElements.set(st,{}),this._paneElements.get(st)[Fe]||(this._paneElements.get(st)[Fe]=this._createPaneElement(Fe,st)),this._paneElements.get(st)[Fe]}_createPaneElement(Fe,st){const Xt=this._document.createElement("div");return Xt.id="toast-container",Xt.classList.add(Fe),Xt.classList.add("toast-container"),st?st.getContainerElement().appendChild(Xt):this._overlayContainer.getContainerElement().appendChild(Xt),Xt}_createPortalHost(Fe){return new Ue(Fe,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Fe){return new Ne(this._createPortalHost(Fe))}}return Le.\u0275fac=function(Fe){return new(Fe||Le)(u.LFG(bt),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(Oe.K0))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(bt),(0,u.LFG)(u._Vd),(0,u.LFG)(u.z2F),(0,u.LFG)(Oe.K0))},token:Le,providedIn:"root"}),Le})();class wt{constructor(Qe){this._overlayRef=Qe,this.duplicatesCount=0,this._afterClosed=new ee.x,this._activate=new ee.x,this._manualClose=new ee.x,this._resetTimeout=new ee.x,this._countDuplicate=new ee.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Qe,Fe){Qe&&this._resetTimeout.next(),Fe&&this._countDuplicate.next(++this.duplicatesCount)}}class nt{constructor(Qe,Fe){this._toastPackage=Qe,this._parentInjector=Fe}get(Qe,Fe,st){return Qe===gt?this._toastPackage:this._parentInjector.get(Qe,Fe,st)}}let Ht=(()=>{class Le{constructor(Fe,st,Xt,an,Dr){this.overlay=st,this._injector=Xt,this.sanitizer=an,this.ngZone=Dr,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Fe.default),Fe.config),Fe.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Fe.default.iconClasses),Fe.config.iconClasses))}show(Fe,st,Xt={},an=""){return this._preBuildNotification(an,Fe,st,this.applyConfig(Xt))}success(Fe,st,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Fe,st,this.applyConfig(Xt))}error(Fe,st,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Fe,st,this.applyConfig(Xt))}info(Fe,st,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Fe,st,this.applyConfig(Xt))}warning(Fe,st,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Fe,st,this.applyConfig(Xt))}clear(Fe){for(const st of this.toasts)if(void 0!==Fe){if(st.toastId===Fe)return void st.toastRef.manualClose()}else st.toastRef.manualClose()}remove(Fe){const st=this._findToast(Fe);if(!st||(st.activeToast.toastRef.close(),this.toasts.splice(st.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Xt=this.toasts[this.currentlyActive].toastRef;Xt.isInactive()||(this.currentlyActive=this.currentlyActive+1,Xt.activate())}return!0}findDuplicate(Fe="",st="",Xt,an){const{includeTitleDuplicates:Dr}=this.toastrConfig;for(const jn of this.toasts){const ii=Dr&&jn.title===Fe;if((!Dr||ii)&&jn.message===st)return jn.toastRef.onDuplicate(Xt,an),jn}return null}applyConfig(Fe={}){return Object.assign(Object.assign({},this.toastrConfig),Fe)}_findToast(Fe){for(let st=0;st<this.toasts.length;st++)if(this.toasts[st].toastId===Fe)return{index:st,activeToast:this.toasts[st]};return null}_preBuildNotification(Fe,st,Xt,an){return an.onActivateTick?this.ngZone.run(()=>this._buildNotification(Fe,st,Xt,an)):this._buildNotification(Fe,st,Xt,an)}_buildNotification(Fe,st,Xt,an){if(!an.toastComponent)throw new Error("toastComponent required");const Dr=this.findDuplicate(Xt,st,this.toastrConfig.resetTimeoutOnDuplicate&&an.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Xt||st)&&this.toastrConfig.preventDuplicates&&null!==Dr)return Dr;this.previousToastMessage=st;let jn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(jn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const ii=this.overlay.create(an.positionClass,this.overlayContainer);this.index=this.index+1;let br=st;st&&an.enableHtml&&(br=this.sanitizer.sanitize(u.q3G.HTML,st));const Nr=new wt(ii),Wn=new gt(this.index,an,br,Xt,Fe,Nr),sr=new nt(Wn,this._injector),Tr=new $t(an.toastComponent,sr),un=ii.attach(Tr,this.toastrConfig.newestOnTop);Nr.componentInstance=un.instance;const Rr={toastId:this.index,title:Xt||"",message:st||"",toastRef:Nr,onShown:Nr.afterActivate(),onHidden:Nr.afterClosed(),onTap:Wn.onTap(),onAction:Wn.onAction(),portal:un};return jn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Rr.toastRef.activate()})),this.toasts.push(Rr),Rr}}return Le.\u0275fac=function(Fe){return new(Fe||Le)(u.LFG(ze),u.LFG(Ge),u.LFG(u.zs3),u.LFG(Se.H7),u.LFG(u.R0b))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(ze),(0,u.LFG)(Ge),(0,u.LFG)(u.gxx),(0,u.LFG)(Se.H7),(0,u.LFG)(u.R0b))},token:Le,providedIn:"root"}),Le})(),Kt=(()=>{class Le{constructor(Fe,st,Xt){this.toastrService=Fe,this.toastPackage=st,this.ngZone=Xt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=st.message,this.title=st.title,this.options=st.config,this.originalTimeout=st.config.timeOut,this.toastClasses=`${st.toastType} ${st.config.toastClass}`,this.sub=st.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=st.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=st.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=st.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Fe=(new Date).getTime();this.width=(this.hideTime-Fe)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Fe,st){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Fe),st)):this.timeout=setTimeout(()=>Fe(),st)}outsideInterval(Fe,st){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Fe),st)):this.intervalId=setInterval(()=>Fe(),st)}runInsideAngular(Fe){this.ngZone?this.ngZone.run(()=>Fe()):Fe()}}return Le.\u0275fac=function(Fe){return new(Fe||Le)(u.Y36(Ht),u.Y36(gt),u.Y36(u.R0b))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Fe,st){1&Fe&&u.NdJ("click",function(){return st.tapToast()})("mouseenter",function(){return st.stickAround()})("mouseleave",function(){return st.delayedHideToast()}),2&Fe&&(u.d8E("@flyInOut",st.state),u.Tol(st.toastClasses),u.Udp("display",st.displayStyle))},attrs:Me,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(Fe,st){1&Fe&&(u.YNc(0,We,3,0,"button",0),u.YNc(1,Je,3,5,"div",1),u.YNc(2,we,1,3,"div",2),u.YNc(3,ye,2,4,"div",3),u.YNc(4,He,2,2,"div",4)),2&Fe&&(u.Q6J("ngIf",st.options.closeButton),u.xp6(1),u.Q6J("ngIf",st.title),u.xp6(1),u.Q6J("ngIf",st.message&&st.options.enableHtml),u.xp6(1),u.Q6J("ngIf",st.message&&!st.options.enableHtml),u.xp6(1),u.Q6J("ngIf",st.options.progressBar))},dependencies:[Oe.O5],encapsulation:2,data:{animation:[(0,L.X$)("flyInOut",[(0,L.SB)("inactive",(0,L.oB)({opacity:0})),(0,L.SB)("active",(0,L.oB)({opacity:1})),(0,L.SB)("removed",(0,L.oB)({opacity:0})),(0,L.eR)("inactive => active",(0,L.jt)("{{ easeTime }}ms {{ easing }}")),(0,L.eR)("active => removed",(0,L.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Le})();const Mn=Object.assign(Object.assign({},qe),{toastComponent:Kt});let Mt=(()=>{class Le{static forRoot(Fe={}){return{ngModule:Le,providers:[{provide:ze,useValue:{default:Mn,config:Fe}}]}}}return Le.\u0275fac=function(Fe){return new(Fe||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[Oe.ez]}),Le})(),ge=(()=>{class Le{constructor(Fe,st,Xt){this.toastrService=Fe,this.toastPackage=st,this.appRef=Xt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=st.message,this.title=st.title,this.options=st.config,this.originalTimeout=st.config.timeOut,this.toastClasses=`${st.toastType} ${st.config.toastClass}`,this.sub=st.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=st.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=st.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=st.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Fe=(new Date).getTime();this.width=(this.hideTime-Fe)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Le.\u0275fac=function(Fe){return new(Fe||Le)(u.Y36(Ht),u.Y36(gt),u.Y36(u.z2F))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Fe,st){1&Fe&&u.NdJ("click",function(){return st.tapToast()})("mouseenter",function(){return st.stickAround()})("mouseleave",function(){return st.delayedHideToast()}),2&Fe&&(u.Tol(st.toastClasses),u.Udp("display",st.displayStyle))},attrs:Me,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(Fe,st){1&Fe&&(u.YNc(0,Nt,3,0,"button",0),u.YNc(1,lt,3,5,"div",1),u.YNc(2,xt,1,3,"div",2),u.YNc(3,yt,2,4,"div",3),u.YNc(4,ut,2,2,"div",4)),2&Fe&&(u.Q6J("ngIf",st.options.closeButton),u.xp6(1),u.Q6J("ngIf",st.title),u.xp6(1),u.Q6J("ngIf",st.message&&st.options.enableHtml),u.xp6(1),u.Q6J("ngIf",st.message&&!st.options.enableHtml),u.xp6(1),u.Q6J("ngIf",st.options.progressBar))},dependencies:[Oe.O5],encapsulation:2}),Le})();Object.assign(Object.assign({},qe),{toastComponent:ge})},1135:(hn,dt,B)=>{B.d(dt,{X:()=>L});var u=B(7579);class L extends u.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const Oe=super._subscribe(Se);return!Oe.closed&&Se.next(this._value),Oe}getValue(){const{hasError:Se,thrownError:Oe,_value:Me}=this;if(Se)throw Oe;return this._throwIfClosed(),Me}next(Se){super.next(this._value=Se)}}},9751:(hn,dt,B)=>{B.d(dt,{y:()=>ke});var u=B(930),L=B(727),ee=B(8822),Se=B(9635),Oe=B(2416),Me=B(576),We=B(2806);let ke=(()=>{class He{constructor(mt){mt&&(this._subscribe=mt)}lift(mt){const lt=new He;return lt.source=this,lt.operator=mt,lt}subscribe(mt,lt,xt){const yt=function ye(He){return He&&He instanceof u.Lv||function we(He){return He&&(0,Me.m)(He.next)&&(0,Me.m)(He.error)&&(0,Me.m)(He.complete)}(He)&&(0,L.Nn)(He)}(mt)?mt:new u.Hp(mt,lt,xt);return(0,We.x)(()=>{const{operator:ut,source:$e}=this;yt.add(ut?ut.call(yt,$e):$e?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(mt){try{return this._subscribe(mt)}catch(lt){mt.error(lt)}}forEach(mt,lt){return new(lt=Je(lt))((xt,yt)=>{const ut=new u.Hp({next:$e=>{try{mt($e)}catch(jt){yt(jt),ut.unsubscribe()}},error:yt,complete:xt});this.subscribe(ut)})}_subscribe(mt){var lt;return null===(lt=this.source)||void 0===lt?void 0:lt.subscribe(mt)}[ee.L](){return this}pipe(...mt){return(0,Se.U)(mt)(this)}toPromise(mt){return new(mt=Je(mt))((lt,xt)=>{let yt;this.subscribe(ut=>yt=ut,ut=>xt(ut),()=>lt(yt))})}}return He.create=Nt=>new He(Nt),He})();function Je(He){var Nt;return null!==(Nt=He??Oe.v.Promise)&&void 0!==Nt?Nt:Promise}},7579:(hn,dt,B)=>{B.d(dt,{x:()=>We});var u=B(9751),L=B(727);const Se=(0,B(3888).d)(Je=>function(){Je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=B(8737),Me=B(2806);let We=(()=>{class Je extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const He=new ke(this,this);return He.operator=ye,He}_throwIfClosed(){if(this.closed)throw new Se}next(ye){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const He of this.currentObservers)He.next(ye)}})}error(ye){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:He}=this;for(;He.length;)He.shift().error(ye)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:He,isStopped:Nt,observers:mt}=this;return He||Nt?L.Lc:(this.currentObservers=null,mt.push(ye),new L.w0(()=>{this.currentObservers=null,(0,Oe.P)(mt,ye)}))}_checkFinalizedStatuses(ye){const{hasError:He,thrownError:Nt,isStopped:mt}=this;He?ye.error(Nt):mt&&ye.complete()}asObservable(){const ye=new u.y;return ye.source=this,ye}}return Je.create=(we,ye)=>new ke(we,ye),Je})();class ke extends We{constructor(we,ye){super(),this.destination=we,this.source=ye}next(we){var ye,He;null===(He=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===He||He.call(ye,we)}error(we){var ye,He;null===(He=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===He||He.call(ye,we)}complete(){var we,ye;null===(ye=null===(we=this.destination)||void 0===we?void 0:we.complete)||void 0===ye||ye.call(we)}_subscribe(we){var ye,He;return null!==(He=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(we))&&void 0!==He?He:L.Lc}}},930:(hn,dt,B)=>{B.d(dt,{Hp:()=>xt,Lv:()=>He});var u=B(576),L=B(727),ee=B(2416),Se=B(7849),Oe=B(5032);const Me=Je("C",void 0,void 0);function Je(gt,qe,ze){return{kind:gt,value:qe,error:ze}}var we=B(3410),ye=B(2806);class He extends L.w0{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,L.Nn)(qe)&&qe.add(this)):this.destination=jt}static create(qe,ze,$t){return new xt(qe,ze,$t)}next(qe){this.isStopped?$e(function ke(gt){return Je("N",gt,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?$e(function We(gt){return Je("E",void 0,gt)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?$e(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Nt=Function.prototype.bind;function mt(gt,qe){return Nt.call(gt,qe)}class lt{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:ze}=this;if(ze.next)try{ze.next(qe)}catch($t){yt($t)}}error(qe){const{partialObserver:ze}=this;if(ze.error)try{ze.error(qe)}catch($t){yt($t)}else yt(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(ze){yt(ze)}}}class xt extends He{constructor(qe,ze,$t){let rt;if(super(),(0,u.m)(qe)||!qe)rt={next:qe??void 0,error:ze??void 0,complete:$t??void 0};else{let Ue;this&&ee.v.useDeprecatedNextContext?(Ue=Object.create(qe),Ue.unsubscribe=()=>this.unsubscribe(),rt={next:qe.next&&mt(qe.next,Ue),error:qe.error&&mt(qe.error,Ue),complete:qe.complete&&mt(qe.complete,Ue)}):rt=qe}this.destination=new lt(rt)}}function yt(gt){ee.v.useDeprecatedSynchronousErrorHandling?(0,ye.O)(gt):(0,Se.h)(gt)}function $e(gt,qe){const{onStoppedNotification:ze}=ee.v;ze&&we.z.setTimeout(()=>ze(gt,qe))}const jt={closed:!0,next:Oe.Z,error:function ut(gt){throw gt},complete:Oe.Z}},727:(hn,dt,B)=>{B.d(dt,{Lc:()=>Me,w0:()=>Oe,Nn:()=>We});var u=B(576);const ee=(0,B(3888).d)(Je=>function(ye){Je(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((He,Nt)=>`${Nt+1}) ${He.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var Se=B(8737);class Oe{constructor(we){this.initialTeardown=we,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let we;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const mt of ye)mt.remove(this);else ye.remove(this);const{initialTeardown:He}=this;if((0,u.m)(He))try{He()}catch(mt){we=mt instanceof ee?mt.errors:[mt]}const{_finalizers:Nt}=this;if(Nt){this._finalizers=null;for(const mt of Nt)try{ke(mt)}catch(lt){we=we??[],lt instanceof ee?we=[...we,...lt.errors]:we.push(lt)}}if(we)throw new ee(we)}}add(we){var ye;if(we&&we!==this)if(this.closed)ke(we);else{if(we instanceof Oe){if(we.closed||we._hasParent(this))return;we._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(we)}}_hasParent(we){const{_parentage:ye}=this;return ye===we||Array.isArray(ye)&&ye.includes(we)}_addParent(we){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(we),ye):ye?[ye,we]:we}_removeParent(we){const{_parentage:ye}=this;ye===we?this._parentage=null:Array.isArray(ye)&&(0,Se.P)(ye,we)}remove(we){const{_finalizers:ye}=this;ye&&(0,Se.P)(ye,we),we instanceof Oe&&we._removeParent(this)}}Oe.EMPTY=(()=>{const Je=new Oe;return Je.closed=!0,Je})();const Me=Oe.EMPTY;function We(Je){return Je instanceof Oe||Je&&"closed"in Je&&(0,u.m)(Je.remove)&&(0,u.m)(Je.add)&&(0,u.m)(Je.unsubscribe)}function ke(Je){(0,u.m)(Je)?Je():Je.unsubscribe()}},2416:(hn,dt,B)=>{B.d(dt,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(hn,dt,B)=>{B.d(dt,{a:()=>we});var u=B(9751),L=B(4742),ee=B(8996),Se=B(4671),Oe=B(3268),Me=B(3269),We=B(1810),ke=B(5403),Je=B(9672);function we(...Nt){const mt=(0,Me.yG)(Nt),lt=(0,Me.jO)(Nt),{args:xt,keys:yt}=(0,L.D)(Nt);if(0===xt.length)return(0,ee.D)([],mt);const ut=new u.y(function ye(Nt,mt,lt=Se.y){return xt=>{He(mt,()=>{const{length:yt}=Nt,ut=new Array(yt);let $e=yt,jt=yt;for(let gt=0;gt<yt;gt++)He(mt,()=>{const qe=(0,ee.D)(Nt[gt],mt);let ze=!1;qe.subscribe((0,ke.x)(xt,$t=>{ut[gt]=$t,ze||(ze=!0,jt--),jt||xt.next(lt(ut.slice()))},()=>{--$e||xt.complete()}))},xt)},xt)}}(xt,mt,yt?$e=>(0,We.n)(yt,$e):Se.y));return lt?ut.pipe((0,Oe.Z)(lt)):ut}function He(Nt,mt,lt){Nt?(0,Je.f)(lt,Nt,mt):mt()}},7272:(hn,dt,B)=>{B.d(dt,{z:()=>Oe});var u=B(8189),ee=B(3269),Se=B(8996);function Oe(...Me){return function L(){return(0,u.J)(1)}()((0,Se.D)(Me,(0,ee.yG)(Me)))}},9770:(hn,dt,B)=>{B.d(dt,{P:()=>ee});var u=B(9751),L=B(8421);function ee(Se){return new u.y(Oe=>{(0,L.Xf)(Se()).subscribe(Oe)})}},515:(hn,dt,B)=>{B.d(dt,{E:()=>L});const L=new(B(9751).y)(Oe=>Oe.complete())},4128:(hn,dt,B)=>{B.d(dt,{D:()=>ke});var u=B(9751),L=B(4742),ee=B(8421),Se=B(3269),Oe=B(5403),Me=B(3268),We=B(1810);function ke(...Je){const we=(0,Se.jO)(Je),{args:ye,keys:He}=(0,L.D)(Je),Nt=new u.y(mt=>{const{length:lt}=ye;if(!lt)return void mt.complete();const xt=new Array(lt);let yt=lt,ut=lt;for(let $e=0;$e<lt;$e++){let jt=!1;(0,ee.Xf)(ye[$e]).subscribe((0,Oe.x)(mt,gt=>{jt||(jt=!0,ut--),xt[$e]=gt},()=>yt--,void 0,()=>{(!yt||!jt)&&(ut||mt.next(He?(0,We.n)(He,xt):xt),mt.complete())}))}});return we?Nt.pipe((0,Me.Z)(we)):Nt}},8996:(hn,dt,B)=>{B.d(dt,{D:()=>qe});var u=B(8421),L=B(5363),ee=B(9468),Me=B(9751),ke=B(2202),Je=B(576),we=B(9672);function He(ze,$t){if(!ze)throw new Error("Iterable cannot be null");return new Me.y(rt=>{(0,we.f)(rt,$t,()=>{const Ue=ze[Symbol.asyncIterator]();(0,we.f)(rt,$t,()=>{Ue.next().then(bt=>{bt.done?rt.complete():rt.next(bt.value)})},0,!0)})})}var Nt=B(3670),mt=B(8239),lt=B(1144),xt=B(6495),yt=B(2206),ut=B(4532),$e=B(3260);function qe(ze,$t){return $t?function gt(ze,$t){if(null!=ze){if((0,Nt.c)(ze))return function Se(ze,$t){return(0,u.Xf)(ze).pipe((0,ee.R)($t),(0,L.Q)($t))}(ze,$t);if((0,lt.z)(ze))return function We(ze,$t){return new Me.y(rt=>{let Ue=0;return $t.schedule(function(){Ue===ze.length?rt.complete():(rt.next(ze[Ue++]),rt.closed||this.schedule())})})}(ze,$t);if((0,mt.t)(ze))return function Oe(ze,$t){return(0,u.Xf)(ze).pipe((0,ee.R)($t),(0,L.Q)($t))}(ze,$t);if((0,yt.D)(ze))return He(ze,$t);if((0,xt.T)(ze))return function ye(ze,$t){return new Me.y(rt=>{let Ue;return(0,we.f)(rt,$t,()=>{Ue=ze[ke.h](),(0,we.f)(rt,$t,()=>{let bt,Ne;try{({value:bt,done:Ne}=Ue.next())}catch(Ge){return void rt.error(Ge)}Ne?rt.complete():rt.next(bt)},0,!0)}),()=>(0,Je.m)(Ue?.return)&&Ue.return()})}(ze,$t);if((0,$e.L)(ze))return function jt(ze,$t){return He((0,$e.Q)(ze),$t)}(ze,$t)}throw(0,ut.z)(ze)}(ze,$t):(0,u.Xf)(ze)}},8421:(hn,dt,B)=>{B.d(dt,{Xf:()=>Nt});var u=B(655),L=B(1144),ee=B(8239),Se=B(9751),Oe=B(3670),Me=B(2206),We=B(4532),ke=B(6495),Je=B(3260),we=B(576),ye=B(7849),He=B(8822);function Nt(gt){if(gt instanceof Se.y)return gt;if(null!=gt){if((0,Oe.c)(gt))return function mt(gt){return new Se.y(qe=>{const ze=gt[He.L]();if((0,we.m)(ze.subscribe))return ze.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(gt);if((0,L.z)(gt))return function lt(gt){return new Se.y(qe=>{for(let ze=0;ze<gt.length&&!qe.closed;ze++)qe.next(gt[ze]);qe.complete()})}(gt);if((0,ee.t)(gt))return function xt(gt){return new Se.y(qe=>{gt.then(ze=>{qe.closed||(qe.next(ze),qe.complete())},ze=>qe.error(ze)).then(null,ye.h)})}(gt);if((0,Me.D)(gt))return ut(gt);if((0,ke.T)(gt))return function yt(gt){return new Se.y(qe=>{for(const ze of gt)if(qe.next(ze),qe.closed)return;qe.complete()})}(gt);if((0,Je.L)(gt))return function $e(gt){return ut((0,Je.Q)(gt))}(gt)}throw(0,We.z)(gt)}function ut(gt){return new Se.y(qe=>{(function jt(gt,qe){var ze,$t,rt,Ue;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ze=(0,u.KL)(gt);!($t=yield ze.next()).done;)if(qe.next($t.value),qe.closed)return}catch(bt){rt={error:bt}}finally{try{$t&&!$t.done&&(Ue=ze.return)&&(yield Ue.call(ze))}finally{if(rt)throw rt.error}}qe.complete()})})(gt,qe).catch(ze=>qe.error(ze))})}},6451:(hn,dt,B)=>{B.d(dt,{T:()=>Me});var u=B(8189),L=B(8421),ee=B(515),Se=B(3269),Oe=B(8996);function Me(...We){const ke=(0,Se.yG)(We),Je=(0,Se._6)(We,1/0),we=We;return we.length?1===we.length?(0,L.Xf)(we[0]):(0,u.J)(Je)((0,Oe.D)(we,ke)):ee.E}},9646:(hn,dt,B)=>{B.d(dt,{of:()=>ee});var u=B(3269),L=B(8996);function ee(...Se){const Oe=(0,u.yG)(Se);return(0,L.D)(Se,Oe)}},2843:(hn,dt,B)=>{B.d(dt,{_:()=>ee});var u=B(9751),L=B(576);function ee(Se,Oe){const Me=(0,L.m)(Se)?Se:()=>Se,We=ke=>ke.error(Me());return new u.y(Oe?ke=>Oe.schedule(We,0,ke):We)}},5403:(hn,dt,B)=>{B.d(dt,{x:()=>L});var u=B(930);function L(Se,Oe,Me,We,ke){return new ee(Se,Oe,Me,We,ke)}class ee extends u.Lv{constructor(Oe,Me,We,ke,Je,we){super(Oe),this.onFinalize=Je,this.shouldUnsubscribe=we,this._next=Me?function(ye){try{Me(ye)}catch(He){Oe.error(He)}}:super._next,this._error=ke?function(ye){try{ke(ye)}catch(He){Oe.error(He)}finally{this.unsubscribe()}}:super._error,this._complete=We?function(){try{We()}catch(ye){Oe.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(Oe=this.onFinalize)||void 0===Oe||Oe.call(this))}}}},262:(hn,dt,B)=>{B.d(dt,{K:()=>Se});var u=B(8421),L=B(5403),ee=B(4482);function Se(Oe){return(0,ee.e)((Me,We)=>{let we,ke=null,Je=!1;ke=Me.subscribe((0,L.x)(We,void 0,void 0,ye=>{we=(0,u.Xf)(Oe(ye,Se(Oe)(Me))),ke?(ke.unsubscribe(),ke=null,we.subscribe(We)):Je=!0})),Je&&(ke.unsubscribe(),ke=null,we.subscribe(We))})}},4351:(hn,dt,B)=>{B.d(dt,{b:()=>ee});var u=B(5577),L=B(576);function ee(Se,Oe){return(0,L.m)(Oe)?(0,u.z)(Se,Oe,1):(0,u.z)(Se,1)}},6590:(hn,dt,B)=>{B.d(dt,{d:()=>ee});var u=B(4482),L=B(5403);function ee(Se){return(0,u.e)((Oe,Me)=>{let We=!1;Oe.subscribe((0,L.x)(Me,ke=>{We=!0,Me.next(ke)},()=>{We||Me.next(Se),Me.complete()}))})}},1884:(hn,dt,B)=>{B.d(dt,{x:()=>Se});var u=B(4671),L=B(4482),ee=B(5403);function Se(Me,We=u.y){return Me=Me??Oe,(0,L.e)((ke,Je)=>{let we,ye=!0;ke.subscribe((0,ee.x)(Je,He=>{const Nt=We(He);(ye||!Me(we,Nt))&&(ye=!1,we=Nt,Je.next(He))}))})}function Oe(Me,We){return Me===We}},9300:(hn,dt,B)=>{B.d(dt,{h:()=>ee});var u=B(4482),L=B(5403);function ee(Se,Oe){return(0,u.e)((Me,We)=>{let ke=0;Me.subscribe((0,L.x)(We,Je=>Se.call(Oe,Je,ke++)&&We.next(Je)))})}},8746:(hn,dt,B)=>{B.d(dt,{x:()=>L});var u=B(4482);function L(ee){return(0,u.e)((Se,Oe)=>{try{Se.subscribe(Oe)}finally{Oe.add(ee)}})}},590:(hn,dt,B)=>{B.d(dt,{P:()=>We});var u=B(6805),L=B(9300),ee=B(5698),Se=B(6590),Oe=B(8068),Me=B(4671);function We(ke,Je){const we=arguments.length>=2;return ye=>ye.pipe(ke?(0,L.h)((He,Nt)=>ke(He,Nt,ye)):Me.y,(0,ee.q)(1),we?(0,Se.d)(Je):(0,Oe.T)(()=>new u.K))}},4004:(hn,dt,B)=>{B.d(dt,{U:()=>ee});var u=B(4482),L=B(5403);function ee(Se,Oe){return(0,u.e)((Me,We)=>{let ke=0;Me.subscribe((0,L.x)(We,Je=>{We.next(Se.call(Oe,Je,ke++))}))})}},9718:(hn,dt,B)=>{B.d(dt,{h:()=>L});var u=B(4004);function L(ee){return(0,u.U)(()=>ee)}},8189:(hn,dt,B)=>{B.d(dt,{J:()=>ee});var u=B(5577),L=B(4671);function ee(Se=1/0){return(0,u.z)(L.y,Se)}},5577:(hn,dt,B)=>{B.d(dt,{z:()=>ke});var u=B(4004),L=B(8421),ee=B(4482),Se=B(9672),Oe=B(5403),We=B(576);function ke(Je,we,ye=1/0){return(0,We.m)(we)?ke((He,Nt)=>(0,u.U)((mt,lt)=>we(He,mt,Nt,lt))((0,L.Xf)(Je(He,Nt))),ye):("number"==typeof we&&(ye=we),(0,ee.e)((He,Nt)=>function Me(Je,we,ye,He,Nt,mt,lt,xt){const yt=[];let ut=0,$e=0,jt=!1;const gt=()=>{jt&&!yt.length&&!ut&&we.complete()},qe=$t=>ut<He?ze($t):yt.push($t),ze=$t=>{mt&&we.next($t),ut++;let rt=!1;(0,L.Xf)(ye($t,$e++)).subscribe((0,Oe.x)(we,Ue=>{Nt?.(Ue),mt?qe(Ue):we.next(Ue)},()=>{rt=!0},void 0,()=>{if(rt)try{for(ut--;yt.length&&ut<He;){const Ue=yt.shift();lt?(0,Se.f)(we,lt,()=>ze(Ue)):ze(Ue)}gt()}catch(Ue){we.error(Ue)}}))};return Je.subscribe((0,Oe.x)(we,qe,()=>{jt=!0,gt()})),()=>{xt?.()}}(He,Nt,Je,ye)))}},5363:(hn,dt,B)=>{B.d(dt,{Q:()=>Se});var u=B(9672),L=B(4482),ee=B(5403);function Se(Oe,Me=0){return(0,L.e)((We,ke)=>{We.subscribe((0,ee.x)(ke,Je=>(0,u.f)(ke,Oe,()=>ke.next(Je),Me),()=>(0,u.f)(ke,Oe,()=>ke.complete(),Me),Je=>(0,u.f)(ke,Oe,()=>ke.error(Je),Me)))})}},5026:(hn,dt,B)=>{B.d(dt,{R:()=>Se});var u=B(4482),L=B(5403);function ee(Oe,Me,We,ke,Je){return(we,ye)=>{let He=We,Nt=Me,mt=0;we.subscribe((0,L.x)(ye,lt=>{const xt=mt++;Nt=He?Oe(Nt,lt,xt):(He=!0,lt),ke&&ye.next(Nt)},Je&&(()=>{He&&ye.next(Nt),ye.complete()})))}}function Se(Oe,Me){return(0,u.e)(ee(Oe,Me,arguments.length>=2,!0))}},3099:(hn,dt,B)=>{B.d(dt,{B:()=>Oe});var u=B(8421),L=B(7579),ee=B(930),Se=B(4482);function Oe(We={}){const{connector:ke=(()=>new L.x),resetOnError:Je=!0,resetOnComplete:we=!0,resetOnRefCountZero:ye=!0}=We;return He=>{let Nt,mt,lt,xt=0,yt=!1,ut=!1;const $e=()=>{mt?.unsubscribe(),mt=void 0},jt=()=>{$e(),Nt=lt=void 0,yt=ut=!1},gt=()=>{const qe=Nt;jt(),qe?.unsubscribe()};return(0,Se.e)((qe,ze)=>{xt++,!ut&&!yt&&$e();const $t=lt=lt??ke();ze.add(()=>{xt--,0===xt&&!ut&&!yt&&(mt=Me(gt,ye))}),$t.subscribe(ze),!Nt&&xt>0&&(Nt=new ee.Hp({next:rt=>$t.next(rt),error:rt=>{ut=!0,$e(),mt=Me(jt,Je,rt),$t.error(rt)},complete:()=>{yt=!0,$e(),mt=Me(jt,we),$t.complete()}}),(0,u.Xf)(qe).subscribe(Nt))})(He)}}function Me(We,ke,...Je){if(!0===ke)return void We();if(!1===ke)return;const we=new ee.Hp({next:()=>{we.unsubscribe(),We()}});return ke(...Je).subscribe(we)}},3151:(hn,dt,B)=>{B.d(dt,{d:()=>Oe});var u=B(7579),L=B(6063);class ee extends u.x{constructor(We=1/0,ke=1/0,Je=L.l){super(),this._bufferSize=We,this._windowTime=ke,this._timestampProvider=Je,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ke===1/0,this._bufferSize=Math.max(1,We),this._windowTime=Math.max(1,ke)}next(We){const{isStopped:ke,_buffer:Je,_infiniteTimeWindow:we,_timestampProvider:ye,_windowTime:He}=this;ke||(Je.push(We),!we&&Je.push(ye.now()+He)),this._trimBuffer(),super.next(We)}_subscribe(We){this._throwIfClosed(),this._trimBuffer();const ke=this._innerSubscribe(We),{_infiniteTimeWindow:Je,_buffer:we}=this,ye=we.slice();for(let He=0;He<ye.length&&!We.closed;He+=Je?1:2)We.next(ye[He]);return this._checkFinalizedStatuses(We),ke}_trimBuffer(){const{_bufferSize:We,_timestampProvider:ke,_buffer:Je,_infiniteTimeWindow:we}=this,ye=(we?1:2)*We;if(We<1/0&&ye<Je.length&&Je.splice(0,Je.length-ye),!we){const He=ke.now();let Nt=0;for(let mt=1;mt<Je.length&&Je[mt]<=He;mt+=2)Nt=mt;Nt&&Je.splice(0,Nt+1)}}}var Se=B(3099);function Oe(Me,We,ke){let Je,we=!1;return Me&&"object"==typeof Me?({bufferSize:Je=1/0,windowTime:We=1/0,refCount:we=!1,scheduler:ke}=Me):Je=Me??1/0,(0,Se.B)({connector:()=>new ee(Je,We,ke),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:we})}},8675:(hn,dt,B)=>{B.d(dt,{O:()=>Se});var u=B(7272),L=B(3269),ee=B(4482);function Se(...Oe){const Me=(0,L.yG)(Oe);return(0,ee.e)((We,ke)=>{(Me?(0,u.z)(Oe,We,Me):(0,u.z)(Oe,We)).subscribe(ke)})}},9468:(hn,dt,B)=>{B.d(dt,{R:()=>L});var u=B(4482);function L(ee,Se=0){return(0,u.e)((Oe,Me)=>{Me.add(ee.schedule(()=>Oe.subscribe(Me),Se))})}},3900:(hn,dt,B)=>{B.d(dt,{w:()=>Se});var u=B(8421),L=B(4482),ee=B(5403);function Se(Oe,Me){return(0,L.e)((We,ke)=>{let Je=null,we=0,ye=!1;const He=()=>ye&&!Je&&ke.complete();We.subscribe((0,ee.x)(ke,Nt=>{Je?.unsubscribe();let mt=0;const lt=we++;(0,u.Xf)(Oe(Nt,lt)).subscribe(Je=(0,ee.x)(ke,xt=>ke.next(Me?Me(Nt,xt,lt,mt++):xt),()=>{Je=null,He()}))},()=>{ye=!0,He()}))})}},5698:(hn,dt,B)=>{B.d(dt,{q:()=>Se});var u=B(515),L=B(4482),ee=B(5403);function Se(Oe){return Oe<=0?()=>u.E:(0,L.e)((Me,We)=>{let ke=0;Me.subscribe((0,ee.x)(We,Je=>{++ke<=Oe&&(We.next(Je),Oe<=ke&&We.complete())}))})}},8505:(hn,dt,B)=>{B.d(dt,{b:()=>Oe});var u=B(576),L=B(4482),ee=B(5403),Se=B(4671);function Oe(Me,We,ke){const Je=(0,u.m)(Me)||We||ke?{next:Me,error:We,complete:ke}:Me;return Je?(0,L.e)((we,ye)=>{var He;null===(He=Je.subscribe)||void 0===He||He.call(Je);let Nt=!0;we.subscribe((0,ee.x)(ye,mt=>{var lt;null===(lt=Je.next)||void 0===lt||lt.call(Je,mt),ye.next(mt)},()=>{var mt;Nt=!1,null===(mt=Je.complete)||void 0===mt||mt.call(Je),ye.complete()},mt=>{var lt;Nt=!1,null===(lt=Je.error)||void 0===lt||lt.call(Je,mt),ye.error(mt)},()=>{var mt,lt;Nt&&(null===(mt=Je.unsubscribe)||void 0===mt||mt.call(Je)),null===(lt=Je.finalize)||void 0===lt||lt.call(Je)}))}):Se.y}},8068:(hn,dt,B)=>{B.d(dt,{T:()=>Se});var u=B(6805),L=B(4482),ee=B(5403);function Se(Me=Oe){return(0,L.e)((We,ke)=>{let Je=!1;We.subscribe((0,ee.x)(ke,we=>{Je=!0,ke.next(we)},()=>Je?ke.complete():ke.error(Me())))})}function Oe(){return new u.K}},1365:(hn,dt,B)=>{B.d(dt,{M:()=>We});var u=B(4482),L=B(5403),ee=B(8421),Se=B(4671),Oe=B(5032),Me=B(3269);function We(...ke){const Je=(0,Me.jO)(ke);return(0,u.e)((we,ye)=>{const He=ke.length,Nt=new Array(He);let mt=ke.map(()=>!1),lt=!1;for(let xt=0;xt<He;xt++)(0,ee.Xf)(ke[xt]).subscribe((0,L.x)(ye,yt=>{Nt[xt]=yt,!lt&&!mt[xt]&&(mt[xt]=!0,(lt=mt.every(Se.y))&&(mt=null))},Oe.Z));we.subscribe((0,L.x)(ye,xt=>{if(lt){const yt=[xt,...Nt];ye.next(Je?Je(...yt):yt)}}))})}},4408:(hn,dt,B)=>{B.d(dt,{o:()=>Oe});var u=B(727);class L extends u.w0{constructor(We,ke){super()}schedule(We,ke=0){return this}}const ee={setInterval(Me,We,...ke){const{delegate:Je}=ee;return Je?.setInterval?Je.setInterval(Me,We,...ke):setInterval(Me,We,...ke)},clearInterval(Me){const{delegate:We}=ee;return(We?.clearInterval||clearInterval)(Me)},delegate:void 0};var Se=B(8737);class Oe extends L{constructor(We,ke){super(We,ke),this.scheduler=We,this.work=ke,this.pending=!1}schedule(We,ke=0){var Je;if(this.closed)return this;this.state=We;const we=this.id,ye=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(ye,we,ke)),this.pending=!0,this.delay=ke,this.id=null!==(Je=this.id)&&void 0!==Je?Je:this.requestAsyncId(ye,this.id,ke),this}requestAsyncId(We,ke,Je=0){return ee.setInterval(We.flush.bind(We,this),Je)}recycleAsyncId(We,ke,Je=0){if(null!=Je&&this.delay===Je&&!1===this.pending)return ke;null!=ke&&ee.clearInterval(ke)}execute(We,ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Je=this._execute(We,ke);if(Je)return Je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(We,ke){let we,Je=!1;try{this.work(We)}catch(ye){Je=!0,we=ye||new Error("Scheduled action threw falsy error")}if(Je)return this.unsubscribe(),we}unsubscribe(){if(!this.closed){const{id:We,scheduler:ke}=this,{actions:Je}=ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Se.P)(Je,this),null!=We&&(this.id=this.recycleAsyncId(ke,We,null)),this.delay=null,super.unsubscribe()}}}},7565:(hn,dt,B)=>{B.d(dt,{v:()=>ee});var u=B(6063);class L{constructor(Oe,Me=L.now){this.schedulerActionCtor=Oe,this.now=Me}schedule(Oe,Me=0,We){return new this.schedulerActionCtor(this,Oe).schedule(We,Me)}}L.now=u.l.now;class ee extends L{constructor(Oe,Me=L.now){super(Oe,Me),this.actions=[],this._active=!1}flush(Oe){const{actions:Me}=this;if(this._active)return void Me.push(Oe);let We;this._active=!0;do{if(We=Oe.execute(Oe.state,Oe.delay))break}while(Oe=Me.shift());if(this._active=!1,We){for(;Oe=Me.shift();)Oe.unsubscribe();throw We}}}},4986:(hn,dt,B)=>{B.d(dt,{P:()=>Se,z:()=>ee});var u=B(4408);const ee=new(B(7565).v)(u.o),Se=ee},6063:(hn,dt,B)=>{B.d(dt,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(hn,dt,B)=>{B.d(dt,{z:()=>u});const u={setTimeout(L,ee,...Se){const{delegate:Oe}=u;return Oe?.setTimeout?Oe.setTimeout(L,ee,...Se):setTimeout(L,ee,...Se)},clearTimeout(L){const{delegate:ee}=u;return(ee?.clearTimeout||clearTimeout)(L)},delegate:void 0}},2202:(hn,dt,B)=>{B.d(dt,{h:()=>L});const L=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(hn,dt,B)=>{B.d(dt,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(hn,dt,B)=>{B.d(dt,{K:()=>L});const L=(0,B(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(hn,dt,B)=>{B.d(dt,{_6:()=>Me,jO:()=>Se,yG:()=>Oe});var u=B(576),L=B(3532);function ee(We){return We[We.length-1]}function Se(We){return(0,u.m)(ee(We))?We.pop():void 0}function Oe(We){return(0,L.K)(ee(We))?We.pop():void 0}function Me(We,ke){return"number"==typeof ee(We)?We.pop():ke}},4742:(hn,dt,B)=>{B.d(dt,{D:()=>Oe});const{isArray:u}=Array,{getPrototypeOf:L,prototype:ee,keys:Se}=Object;function Oe(We){if(1===We.length){const ke=We[0];if(u(ke))return{args:ke,keys:null};if(function Me(We){return We&&"object"==typeof We&&L(We)===ee}(ke)){const Je=Se(ke);return{args:Je.map(we=>ke[we]),keys:Je}}}return{args:We,keys:null}}},8737:(hn,dt,B)=>{function u(L,ee){if(L){const Se=L.indexOf(ee);0<=Se&&L.splice(Se,1)}}B.d(dt,{P:()=>u})},3888:(hn,dt,B)=>{function u(L){const Se=L(Oe=>{Error.call(Oe),Oe.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}B.d(dt,{d:()=>u})},1810:(hn,dt,B)=>{function u(L,ee){return L.reduce((Se,Oe,Me)=>(Se[Oe]=ee[Me],Se),{})}B.d(dt,{n:()=>u})},2806:(hn,dt,B)=>{B.d(dt,{O:()=>Se,x:()=>ee});var u=B(2416);let L=null;function ee(Oe){if(u.v.useDeprecatedSynchronousErrorHandling){const Me=!L;if(Me&&(L={errorThrown:!1,error:null}),Oe(),Me){const{errorThrown:We,error:ke}=L;if(L=null,We)throw ke}}else Oe()}function Se(Oe){u.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=Oe)}},9672:(hn,dt,B)=>{function u(L,ee,Se,Oe=0,Me=!1){const We=ee.schedule(function(){Se(),Me?L.add(this.schedule(null,Oe)):this.unsubscribe()},Oe);if(L.add(We),!Me)return We}B.d(dt,{f:()=>u})},4671:(hn,dt,B)=>{function u(L){return L}B.d(dt,{y:()=>u})},1144:(hn,dt,B)=>{B.d(dt,{z:()=>u});const u=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(hn,dt,B)=>{B.d(dt,{D:()=>L});var u=B(576);function L(ee){return Symbol.asyncIterator&&(0,u.m)(ee?.[Symbol.asyncIterator])}},576:(hn,dt,B)=>{function u(L){return"function"==typeof L}B.d(dt,{m:()=>u})},3670:(hn,dt,B)=>{B.d(dt,{c:()=>ee});var u=B(8822),L=B(576);function ee(Se){return(0,L.m)(Se[u.L])}},6495:(hn,dt,B)=>{B.d(dt,{T:()=>ee});var u=B(2202),L=B(576);function ee(Se){return(0,L.m)(Se?.[u.h])}},8239:(hn,dt,B)=>{B.d(dt,{t:()=>L});var u=B(576);function L(ee){return(0,u.m)(ee?.then)}},3260:(hn,dt,B)=>{B.d(dt,{L:()=>Se,Q:()=>ee});var u=B(655),L=B(576);function ee(Oe){return(0,u.FC)(this,arguments,function*(){const We=Oe.getReader();try{for(;;){const{value:ke,done:Je}=yield(0,u.qq)(We.read());if(Je)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ke)}}finally{We.releaseLock()}})}function Se(Oe){return(0,L.m)(Oe?.getReader)}},3532:(hn,dt,B)=>{B.d(dt,{K:()=>L});var u=B(576);function L(ee){return ee&&(0,u.m)(ee.schedule)}},4482:(hn,dt,B)=>{B.d(dt,{A:()=>L,e:()=>ee});var u=B(576);function L(Se){return(0,u.m)(Se?.lift)}function ee(Se){return Oe=>{if(L(Oe))return Oe.lift(function(Me){try{return Se(Me,this)}catch(We){this.error(We)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(hn,dt,B)=>{B.d(dt,{Z:()=>Se});var u=B(4004);const{isArray:L}=Array;function Se(Oe){return(0,u.U)(Me=>function ee(Oe,Me){return L(Me)?Oe(...Me):Oe(Me)}(Oe,Me))}},5032:(hn,dt,B)=>{function u(){}B.d(dt,{Z:()=>u})},9635:(hn,dt,B)=>{B.d(dt,{U:()=>ee,z:()=>L});var u=B(4671);function L(...Se){return ee(Se)}function ee(Se){return 0===Se.length?u.y:1===Se.length?Se[0]:function(Me){return Se.reduce((We,ke)=>ke(We),Me)}}},7849:(hn,dt,B)=>{B.d(dt,{h:()=>ee});var u=B(2416),L=B(3410);function ee(Se){L.z.setTimeout(()=>{const{onUnhandledError:Oe}=u.v;if(!Oe)throw Se;Oe(Se)})}},4532:(hn,dt,B)=>{function u(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(dt,{z:()=>u})},655:(hn,dt,B)=>{function Se(Ne,Ge){var wt={};for(var nt in Ne)Object.prototype.hasOwnProperty.call(Ne,nt)&&Ge.indexOf(nt)<0&&(wt[nt]=Ne[nt]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var Ht=0;for(nt=Object.getOwnPropertySymbols(Ne);Ht<nt.length;Ht++)Ge.indexOf(nt[Ht])<0&&Object.prototype.propertyIsEnumerable.call(Ne,nt[Ht])&&(wt[nt[Ht]]=Ne[nt[Ht]])}return wt}function ke(Ne,Ge,wt,nt){return new(wt||(wt=Promise))(function(Kt,Mn){function Mt(ie){try{ge(nt.next(ie))}catch(Bt){Mn(Bt)}}function en(ie){try{ge(nt.throw(ie))}catch(Bt){Mn(Bt)}}function ge(ie){ie.done?Kt(ie.value):function Ht(Kt){return Kt instanceof wt?Kt:new wt(function(Mn){Mn(Kt)})}(ie.value).then(Mt,en)}ge((nt=nt.apply(Ne,Ge||[])).next())})}function yt(Ne){return this instanceof yt?(this.v=Ne,this):new yt(Ne)}function ut(Ne,Ge,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ht,nt=wt.apply(Ne,Ge||[]),Kt=[];return Ht={},Mn("next"),Mn("throw"),Mn("return"),Ht[Symbol.asyncIterator]=function(){return this},Ht;function Mn(Le){nt[Le]&&(Ht[Le]=function(Qe){return new Promise(function(Fe,st){Kt.push([Le,Qe,Fe,st])>1||Mt(Le,Qe)})})}function Mt(Le,Qe){try{!function en(Le){Le.value instanceof yt?Promise.resolve(Le.value.v).then(ge,ie):Bt(Kt[0][2],Le)}(nt[Le](Qe))}catch(Fe){Bt(Kt[0][3],Fe)}}function ge(Le){Mt("next",Le)}function ie(Le){Mt("throw",Le)}function Bt(Le,Qe){Le(Qe),Kt.shift(),Kt.length&&Mt(Kt[0][0],Kt[0][1])}}function jt(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,Ge=Ne[Symbol.asyncIterator];return Ge?Ge.call(Ne):(Ne=function He(Ne){var Ge="function"==typeof Symbol&&Symbol.iterator,wt=Ge&&Ne[Ge],nt=0;if(wt)return wt.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&nt>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[nt++],done:!Ne}}};throw new TypeError(Ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),wt={},nt("next"),nt("throw"),nt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function nt(Kt){wt[Kt]=Ne[Kt]&&function(Mn){return new Promise(function(Mt,en){!function Ht(Kt,Mn,Mt,en){Promise.resolve(en).then(function(ge){Kt({value:ge,done:Mt})},Mn)}(Mt,en,(Mn=Ne[Kt](Mn)).done,Mn.value)})}}}B.d(dt,{FC:()=>ut,KL:()=>jt,_T:()=>Se,mG:()=>ke,qq:()=>yt})},7340:(hn,dt,B)=>{B.d(dt,{LC:()=>L,SB:()=>Je,X$:()=>Se,ZE:()=>$e,ZN:()=>ut,_j:()=>u,eR:()=>ye,jt:()=>Oe,k1:()=>jt,l3:()=>ee,oB:()=>ke,vP:()=>We});class u{}class L{}const ee="*";function Se(gt,qe){return{type:7,name:gt,definitions:qe,options:{}}}function Oe(gt,qe=null){return{type:4,styles:qe,timings:gt}}function We(gt,qe=null){return{type:2,steps:gt,options:qe}}function ke(gt){return{type:6,styles:gt,offset:null}}function Je(gt,qe,ze){return{type:0,name:gt,styles:qe,options:ze}}function ye(gt,qe,ze=null){return{type:1,expr:gt,animation:qe,options:ze}}function yt(gt){Promise.resolve().then(gt)}class ut{constructor(qe=0,ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=qe+ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qe=>qe()),this._onDoneFns=[])}onStart(qe){this._originalOnStartFns.push(qe),this._onStartFns.push(qe)}onDone(qe){this._originalOnDoneFns.push(qe),this._onDoneFns.push(qe)}onDestroy(qe){this._onDestroyFns.push(qe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(qe=>qe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(qe=>qe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(qe){this._position=this.totalTime?qe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(qe){const ze="start"==qe?this._onStartFns:this._onDoneFns;ze.forEach($t=>$t()),ze.length=0}}class $e{constructor(qe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=qe;let ze=0,$t=0,rt=0;const Ue=this.players.length;0==Ue?yt(()=>this._onFinish()):this.players.forEach(bt=>{bt.onDone(()=>{++ze==Ue&&this._onFinish()}),bt.onDestroy(()=>{++$t==Ue&&this._onDestroy()}),bt.onStart(()=>{++rt==Ue&&this._onStart()})}),this.totalTime=this.players.reduce((bt,Ne)=>Math.max(bt,Ne.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qe=>qe()),this._onDoneFns=[])}init(){this.players.forEach(qe=>qe.init())}onStart(qe){this._onStartFns.push(qe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(qe=>qe()),this._onStartFns=[])}onDone(qe){this._onDoneFns.push(qe)}onDestroy(qe){this._onDestroyFns.push(qe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(qe=>qe.play())}pause(){this.players.forEach(qe=>qe.pause())}restart(){this.players.forEach(qe=>qe.restart())}finish(){this._onFinish(),this.players.forEach(qe=>qe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(qe=>qe.destroy()),this._onDestroyFns.forEach(qe=>qe()),this._onDestroyFns=[])}reset(){this.players.forEach(qe=>qe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(qe){const ze=qe*this.totalTime;this.players.forEach($t=>{const rt=$t.totalTime?Math.min(1,ze/$t.totalTime):1;$t.setPosition(rt)})}getPosition(){const qe=this.players.reduce((ze,$t)=>null===ze||$t.totalTime>ze.totalTime?$t:ze,null);return null!=qe?qe.getPosition():0}beforeDestroy(){this.players.forEach(qe=>{qe.beforeDestroy&&qe.beforeDestroy()})}triggerCallback(qe){const ze="start"==qe?this._onStartFns:this._onDoneFns;ze.forEach($t=>$t()),ze.length=0}}const jt="!"},6895:(hn,dt,B)=>{B.d(dt,{Do:()=>jt,EM:()=>Ia,HT:()=>Oe,JF:()=>oa,K0:()=>We,Mn:()=>Mt,Mx:()=>ho,NF:()=>js,O5:()=>oi,Ov:()=>cn,PM:()=>to,S$:()=>yt,Tn:()=>Ge,UT:()=>en,V_:()=>we,Ye:()=>gt,b0:()=>$e,bD:()=>Ni,ez:()=>wr,mk:()=>$r,p6:()=>kn,q:()=>ee,sg:()=>Rs,tP:()=>Qi,uU:()=>Es,w_:()=>Me,x:()=>Ne});var u=B(4650);let L=null;function ee(){return L}function Oe(F){L||(L=F)}class Me{}const We=new u.OlP("DocumentToken");let ke=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=u.Yz7({token:F,factory:function(){return function Je(){return(0,u.LFG)(ye)}()},providedIn:"platform"}),F})();const we=new u.OlP("Location Initialized");let ye=(()=>{class F extends ke{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState($){const ce=ee().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",$,!1),()=>ce.removeEventListener("popstate",$)}onHashChange($){const ce=ee().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",$,!1),()=>ce.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ce,Ve){He()?this._history.pushState($,ce,Ve):this.location.hash=Ve}replaceState($,ce,Ve){He()?this._history.replaceState($,ce,Ve):this.location.hash=Ve}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)(u.LFG(We))},F.\u0275prov=u.Yz7({token:F,factory:function(){return function Nt(){return new ye((0,u.LFG)(We))}()},providedIn:"platform"}),F})();function He(){return!!window.history.pushState}function mt(F,ne){if(0==F.length)return ne;if(0==ne.length)return F;let $=0;return F.endsWith("/")&&$++,ne.startsWith("/")&&$++,2==$?F+ne.substring(1):1==$?F+ne:F+"/"+ne}function lt(F){const ne=F.match(/#|\?|$/),$=ne&&ne.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function xt(F){return F&&"?"!==F[0]?"?"+F:F}let yt=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=u.Yz7({token:F,factory:function(){return(0,u.f3M)($e)},providedIn:"root"}),F})();const ut=new u.OlP("appBaseHref");let $e=(()=>{class F extends yt{constructor($,ce){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=ce??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return mt(this._baseHref,$)}path($=!1){const ce=this._platformLocation.pathname+xt(this._platformLocation.search),Ve=this._platformLocation.hash;return Ve&&$?`${ce}${Ve}`:ce}pushState($,ce,Ve,Ct){const Vt=this.prepareExternalUrl(Ve+xt(Ct));this._platformLocation.pushState($,ce,Vt)}replaceState($,ce,Ve,Ct){const Vt=this.prepareExternalUrl(Ve+xt(Ct));this._platformLocation.replaceState($,ce,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(u.LFG(ke),u.LFG(ut,8))},F.\u0275prov=u.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),jt=(()=>{class F extends yt{constructor($,ce){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl($){const ce=mt(this._baseHref,$);return ce.length>0?"#"+ce:ce}pushState($,ce,Ve,Ct){let Vt=this.prepareExternalUrl(Ve+xt(Ct));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState($,ce,Vt)}replaceState($,ce,Ve,Ct){let Vt=this.prepareExternalUrl(Ve+xt(Ct));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState($,ce,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(u.LFG(ke),u.LFG(ut,8))},F.\u0275prov=u.Yz7({token:F,factory:F.\u0275fac}),F})(),gt=(()=>{class F{constructor($){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ce=this._locationStrategy.getBaseHref();this._baseHref=lt($t(ce)),this._locationStrategy.onPopState(Ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ve.state,type:Ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ce=""){return this.path()==this.normalize($+xt(ce))}normalize($){return F.stripTrailingSlash(function ze(F,ne){return F&&ne.startsWith(F)?ne.substring(F.length):ne}(this._baseHref,$t($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ce="",Ve=null){this._locationStrategy.pushState(Ve,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+xt(ce)),Ve)}replaceState($,ce="",Ve=null){this._locationStrategy.replaceState(Ve,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+xt(ce)),Ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)})),()=>{const ce=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(ce,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ce){this._urlChangeListeners.forEach(Ve=>Ve($,ce))}subscribe($,ce,Ve){return this._subject.subscribe({next:$,error:ce,complete:Ve})}}return F.normalizeQueryParams=xt,F.joinWithSlash=mt,F.stripTrailingSlash=lt,F.\u0275fac=function($){return new($||F)(u.LFG(yt))},F.\u0275prov=u.Yz7({token:F,factory:function(){return function qe(){return new gt((0,u.LFG)(yt))}()},providedIn:"root"}),F})();function $t(F){return F.replace(/\/index.html$/,"")}var Ne=(()=>((Ne=Ne||{})[Ne.Format=0]="Format",Ne[Ne.Standalone=1]="Standalone",Ne))(),Ge=(()=>((Ge=Ge||{})[Ge.Narrow=0]="Narrow",Ge[Ge.Abbreviated=1]="Abbreviated",Ge[Ge.Wide=2]="Wide",Ge[Ge.Short=3]="Short",Ge))(),wt=(()=>((wt=wt||{})[wt.Short=0]="Short",wt[wt.Medium=1]="Medium",wt[wt.Long=2]="Long",wt[wt.Full=3]="Full",wt))(),nt=(()=>((nt=nt||{})[nt.Decimal=0]="Decimal",nt[nt.Group=1]="Group",nt[nt.List=2]="List",nt[nt.PercentSign=3]="PercentSign",nt[nt.PlusSign=4]="PlusSign",nt[nt.MinusSign=5]="MinusSign",nt[nt.Exponential=6]="Exponential",nt[nt.SuperscriptingExponent=7]="SuperscriptingExponent",nt[nt.PerMille=8]="PerMille",nt[nt.Infinity=9]="Infinity",nt[nt.NaN=10]="NaN",nt[nt.TimeSeparator=11]="TimeSeparator",nt[nt.CurrencyDecimal=12]="CurrencyDecimal",nt[nt.CurrencyGroup=13]="CurrencyGroup",nt))();function Mt(F,ne,$){const ce=(0,u.cg1)(F),Ct=un([ce[u.wAp.DaysFormat],ce[u.wAp.DaysStandalone]],ne);return un(Ct,$)}function en(F,ne,$){const ce=(0,u.cg1)(F),Ct=un([ce[u.wAp.MonthsFormat],ce[u.wAp.MonthsStandalone]],ne);return un(Ct,$)}function Le(F,ne){return un((0,u.cg1)(F)[u.wAp.DateFormat],ne)}function Qe(F,ne){return un((0,u.cg1)(F)[u.wAp.TimeFormat],ne)}function Fe(F,ne){return un((0,u.cg1)(F)[u.wAp.DateTimeFormat],ne)}function st(F,ne){const $=(0,u.cg1)(F),ce=$[u.wAp.NumberSymbols][ne];if(typeof ce>"u"){if(ne===nt.CurrencyDecimal)return $[u.wAp.NumberSymbols][nt.Decimal];if(ne===nt.CurrencyGroup)return $[u.wAp.NumberSymbols][nt.Group]}return ce}function Nr(F){if(!F[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${F[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function un(F,ne){for(let $=ne;$>-1;$--)if(typeof F[$]<"u")return F[$];throw new Error("Locale data API: locale data undefined")}function Rr(F){const[ne,$]=F.split(":");return{hours:+ne,minutes:+$}}const ji=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kn={},pr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dr=(()=>((dr=dr||{})[dr.Short=0]="Short",dr[dr.ShortGMT=1]="ShortGMT",dr[dr.Long=2]="Long",dr[dr.Extended=3]="Extended",dr))(),Tn=(()=>((Tn=Tn||{})[Tn.FullYear=0]="FullYear",Tn[Tn.Month=1]="Month",Tn[Tn.Date=2]="Date",Tn[Tn.Hours=3]="Hours",Tn[Tn.Minutes=4]="Minutes",Tn[Tn.Seconds=5]="Seconds",Tn[Tn.FractionalSeconds=6]="FractionalSeconds",Tn[Tn.Day=7]="Day",Tn))(),In=(()=>((In=In||{})[In.DayPeriods=0]="DayPeriods",In[In.Days=1]="Days",In[In.Months=2]="Months",In[In.Eras=3]="Eras",In))();function kn(F,ne,$,ce){let Ve=function be(F){if(qt(F))return F;if("number"==typeof F&&!isNaN(F))return new Date(F);if("string"==typeof F){if(F=F.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(F)){const[Ve,Ct=1,Vt=1]=F.split("-").map(Fn=>+Fn);return xn(Ve,Ct-1,Vt)}const $=parseFloat(F);if(!isNaN(F-$))return new Date($);let ce;if(ce=F.match(ji))return function ht(F){const ne=new Date(0);let $=0,ce=0;const Ve=F[8]?ne.setUTCFullYear:ne.setFullYear,Ct=F[8]?ne.setUTCHours:ne.setHours;F[9]&&($=Number(F[9]+F[10]),ce=Number(F[9]+F[11])),Ve.call(ne,Number(F[1]),Number(F[2])-1,Number(F[3]));const Vt=Number(F[4]||0)-$,Fn=Number(F[5]||0)-ce,ai=Number(F[6]||0),di=Math.floor(1e3*parseFloat("0."+(F[7]||0)));return Ct.call(ne,Vt,Fn,ai,di),ne}(ce)}const ne=new Date(F);if(!qt(ne))throw new Error(`Unable to convert "${F}" into a date`);return ne}(F);ne=Mr($,ne)||ne;let Fn,Vt=[];for(;ne;){if(Fn=pr.exec(ne),!Fn){Vt.push(ne);break}{Vt=Vt.concat(Fn.slice(1));const li=Vt.pop();if(!li)break;ne=li}}let ai=Ve.getTimezoneOffset();ce&&(ai=Ze(ce,ai),Ve=function se(F,ne,$){const ce=$?-1:1,Ve=F.getTimezoneOffset();return function Te(F,ne){return(F=new Date(F.getTime())).setMinutes(F.getMinutes()+ne),F}(F,ce*(Ze(ne,Ve)-Ve))}(Ve,ce,!0));let di="";return Vt.forEach(li=>{const Qr=function Pe(F){if(Be[F])return Be[F];let ne;switch(F){case"G":case"GG":case"GGG":ne=_r(In.Eras,Ge.Abbreviated);break;case"GGGG":ne=_r(In.Eras,Ge.Wide);break;case"GGGGG":ne=_r(In.Eras,Ge.Narrow);break;case"y":ne=vn(Tn.FullYear,1,0,!1,!0);break;case"yy":ne=vn(Tn.FullYear,2,0,!0,!0);break;case"yyy":ne=vn(Tn.FullYear,3,0,!1,!0);break;case"yyyy":ne=vn(Tn.FullYear,4,0,!1,!0);break;case"Y":ne=tr(1);break;case"YY":ne=tr(2,!0);break;case"YYY":ne=tr(3);break;case"YYYY":ne=tr(4);break;case"M":case"L":ne=vn(Tn.Month,1,1);break;case"MM":case"LL":ne=vn(Tn.Month,2,1);break;case"MMM":ne=_r(In.Months,Ge.Abbreviated);break;case"MMMM":ne=_r(In.Months,Ge.Wide);break;case"MMMMM":ne=_r(In.Months,Ge.Narrow);break;case"LLL":ne=_r(In.Months,Ge.Abbreviated,Ne.Standalone);break;case"LLLL":ne=_r(In.Months,Ge.Wide,Ne.Standalone);break;case"LLLLL":ne=_r(In.Months,Ge.Narrow,Ne.Standalone);break;case"w":ne=Ln(1);break;case"ww":ne=Ln(2);break;case"W":ne=Ln(1,!0);break;case"d":ne=vn(Tn.Date,1);break;case"dd":ne=vn(Tn.Date,2);break;case"c":case"cc":ne=vn(Tn.Day,1);break;case"ccc":ne=_r(In.Days,Ge.Abbreviated,Ne.Standalone);break;case"cccc":ne=_r(In.Days,Ge.Wide,Ne.Standalone);break;case"ccccc":ne=_r(In.Days,Ge.Narrow,Ne.Standalone);break;case"cccccc":ne=_r(In.Days,Ge.Short,Ne.Standalone);break;case"E":case"EE":case"EEE":ne=_r(In.Days,Ge.Abbreviated);break;case"EEEE":ne=_r(In.Days,Ge.Wide);break;case"EEEEE":ne=_r(In.Days,Ge.Narrow);break;case"EEEEEE":ne=_r(In.Days,Ge.Short);break;case"a":case"aa":case"aaa":ne=_r(In.DayPeriods,Ge.Abbreviated);break;case"aaaa":ne=_r(In.DayPeriods,Ge.Wide);break;case"aaaaa":ne=_r(In.DayPeriods,Ge.Narrow);break;case"b":case"bb":case"bbb":ne=_r(In.DayPeriods,Ge.Abbreviated,Ne.Standalone,!0);break;case"bbbb":ne=_r(In.DayPeriods,Ge.Wide,Ne.Standalone,!0);break;case"bbbbb":ne=_r(In.DayPeriods,Ge.Narrow,Ne.Standalone,!0);break;case"B":case"BB":case"BBB":ne=_r(In.DayPeriods,Ge.Abbreviated,Ne.Format,!0);break;case"BBBB":ne=_r(In.DayPeriods,Ge.Wide,Ne.Format,!0);break;case"BBBBB":ne=_r(In.DayPeriods,Ge.Narrow,Ne.Format,!0);break;case"h":ne=vn(Tn.Hours,1,-12);break;case"hh":ne=vn(Tn.Hours,2,-12);break;case"H":ne=vn(Tn.Hours,1);break;case"HH":ne=vn(Tn.Hours,2);break;case"m":ne=vn(Tn.Minutes,1);break;case"mm":ne=vn(Tn.Minutes,2);break;case"s":ne=vn(Tn.Seconds,1);break;case"ss":ne=vn(Tn.Seconds,2);break;case"S":ne=vn(Tn.FractionalSeconds,1);break;case"SS":ne=vn(Tn.FractionalSeconds,2);break;case"SSS":ne=vn(Tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ne=Pr(dr.Short);break;case"ZZZZZ":ne=Pr(dr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ne=Pr(dr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ne=Pr(dr.Long);break;default:return null}return Be[F]=ne,ne}(li);di+=Qr?Qr(Ve,$,ai):"''"===li?"'":li.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),di}function xn(F,ne,$){const ce=new Date(0);return ce.setFullYear(F,ne,$),ce.setHours(0,0,0),ce}function Mr(F,ne){const $=function Kt(F){return(0,u.cg1)(F)[u.wAp.LocaleId]}(F);if(Kn[$]=Kn[$]||{},Kn[$][ne])return Kn[$][ne];let ce="";switch(ne){case"shortDate":ce=Le(F,wt.Short);break;case"mediumDate":ce=Le(F,wt.Medium);break;case"longDate":ce=Le(F,wt.Long);break;case"fullDate":ce=Le(F,wt.Full);break;case"shortTime":ce=Qe(F,wt.Short);break;case"mediumTime":ce=Qe(F,wt.Medium);break;case"longTime":ce=Qe(F,wt.Long);break;case"fullTime":ce=Qe(F,wt.Full);break;case"short":const Ve=Mr(F,"shortTime"),Ct=Mr(F,"shortDate");ce=Ai(Fe(F,wt.Short),[Ve,Ct]);break;case"medium":const Vt=Mr(F,"mediumTime"),Fn=Mr(F,"mediumDate");ce=Ai(Fe(F,wt.Medium),[Vt,Fn]);break;case"long":const ai=Mr(F,"longTime"),di=Mr(F,"longDate");ce=Ai(Fe(F,wt.Long),[ai,di]);break;case"full":const li=Mr(F,"fullTime"),Qr=Mr(F,"fullDate");ce=Ai(Fe(F,wt.Full),[li,Qr])}return ce&&(Kn[$][ne]=ce),ce}function Ai(F,ne){return ne&&(F=F.replace(/\{([^}]+)}/g,function($,ce){return null!=ne&&ce in ne?ne[ce]:$})),F}function Vn(F,ne,$="-",ce,Ve){let Ct="";(F<0||Ve&&F<=0)&&(Ve?F=1-F:(F=-F,Ct=$));let Vt=String(F);for(;Vt.length<ne;)Vt="0"+Vt;return ce&&(Vt=Vt.slice(Vt.length-ne)),Ct+Vt}function vn(F,ne,$=0,ce=!1,Ve=!1){return function(Ct,Vt){let Fn=function Di(F,ne){switch(F){case Tn.FullYear:return ne.getFullYear();case Tn.Month:return ne.getMonth();case Tn.Date:return ne.getDate();case Tn.Hours:return ne.getHours();case Tn.Minutes:return ne.getMinutes();case Tn.Seconds:return ne.getSeconds();case Tn.FractionalSeconds:return ne.getMilliseconds();case Tn.Day:return ne.getDay();default:throw new Error(`Unknown DateType value "${F}".`)}}(F,Ct);if(($>0||Fn>-$)&&(Fn+=$),F===Tn.Hours)0===Fn&&-12===$&&(Fn=12);else if(F===Tn.FractionalSeconds)return function ci(F,ne){return Vn(F,3).substring(0,ne)}(Fn,ne);const ai=st(Vt,nt.MinusSign);return Vn(Fn,ne,ai,ce,Ve)}}function _r(F,ne,$=Ne.Format,ce=!1){return function(Ve,Ct){return function si(F,ne,$,ce,Ve,Ct){switch($){case In.Months:return en(ne,Ve,ce)[F.getMonth()];case In.Days:return Mt(ne,Ve,ce)[F.getDay()];case In.DayPeriods:const Vt=F.getHours(),Fn=F.getMinutes();if(Ct){const di=function Wn(F){const ne=(0,u.cg1)(F);return Nr(ne),(ne[u.wAp.ExtraData][2]||[]).map(ce=>"string"==typeof ce?Rr(ce):[Rr(ce[0]),Rr(ce[1])])}(ne),li=function sr(F,ne,$){const ce=(0,u.cg1)(F);Nr(ce);const Ct=un([ce[u.wAp.ExtraData][0],ce[u.wAp.ExtraData][1]],ne)||[];return un(Ct,$)||[]}(ne,Ve,ce),Qr=di.findIndex(ss=>{if(Array.isArray(ss)){const[hi,xi]=ss,da=Vt>=hi.hours&&Fn>=hi.minutes,ha=Vt<xi.hours||Vt===xi.hours&&Fn<xi.minutes;if(hi.hours<xi.hours){if(da&&ha)return!0}else if(da||ha)return!0}else if(ss.hours===Vt&&ss.minutes===Fn)return!0;return!1});if(-1!==Qr)return li[Qr]}return function Mn(F,ne,$){const ce=(0,u.cg1)(F),Ct=un([ce[u.wAp.DayPeriodsFormat],ce[u.wAp.DayPeriodsStandalone]],ne);return un(Ct,$)}(ne,Ve,ce)[Vt<12?0:1];case In.Eras:return function ge(F,ne){return un((0,u.cg1)(F)[u.wAp.Eras],ne)}(ne,ce)[F.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${$}`)}}(Ve,Ct,F,ne,$,ce)}}function Pr(F){return function(ne,$,ce){const Ve=-1*ce,Ct=st($,nt.MinusSign),Vt=Ve>0?Math.floor(Ve/60):Math.ceil(Ve/60);switch(F){case dr.Short:return(Ve>=0?"+":"")+Vn(Vt,2,Ct)+Vn(Math.abs(Ve%60),2,Ct);case dr.ShortGMT:return"GMT"+(Ve>=0?"+":"")+Vn(Vt,1,Ct);case dr.Long:return"GMT"+(Ve>=0?"+":"")+Vn(Vt,2,Ct)+":"+Vn(Math.abs(Ve%60),2,Ct);case dr.Extended:return 0===ce?"Z":(Ve>=0?"+":"")+Vn(Vt,2,Ct)+":"+Vn(Math.abs(Ve%60),2,Ct);default:throw new Error(`Unknown zone width "${F}"`)}}}function Gn(F){return xn(F.getFullYear(),F.getMonth(),F.getDate()+(4-F.getDay()))}function Ln(F,ne=!1){return function($,ce){let Ve;if(ne){const Ct=new Date($.getFullYear(),$.getMonth(),1).getDay()-1,Vt=$.getDate();Ve=1+Math.floor((Vt+Ct)/7)}else{const Ct=Gn($),Vt=function En(F){const ne=xn(F,0,1).getDay();return xn(F,0,1+(ne<=4?4:11)-ne)}(Ct.getFullYear()),Fn=Ct.getTime()-Vt.getTime();Ve=1+Math.round(Fn/6048e5)}return Vn(Ve,F,st(ce,nt.MinusSign))}}function tr(F,ne=!1){return function($,ce){return Vn(Gn($).getFullYear(),F,st(ce,nt.MinusSign),ne)}}const Be={};function Ze(F,ne){F=F.replace(/:/g,"");const $=Date.parse("Jan 01, 1970 00:00:00 "+F)/6e4;return isNaN($)?ne:$}function qt(F){return F instanceof Date&&!isNaN(F.valueOf())}function ho(F,ne){ne=encodeURIComponent(ne);for(const $ of F.split(";")){const ce=$.indexOf("="),[Ve,Ct]=-1==ce?[$,""]:[$.slice(0,ce),$.slice(ce+1)];if(Ve.trim()===ne)return decodeURIComponent(Ct)}return null}let $r=(()=>{class F{constructor($,ce,Ve,Ct){this._iterableDiffers=$,this._keyValueDiffers=ce,this._ngEl=Ve,this._renderer=Ct,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),$.forEachChangedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),$.forEachRemovedItem(ce=>{ce.previousValue&&this._toggleClass(ce.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(ce=>{if("string"!=typeof ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(ce.item)}`);this._toggleClass(ce.item,!0)}),$.forEachRemovedItem(ce=>this._toggleClass(ce.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ce=>this._toggleClass(ce,!0)):Object.keys($).forEach(ce=>this._toggleClass(ce,!!$[ce])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ce=>this._toggleClass(ce,!1)):Object.keys($).forEach(ce=>this._toggleClass(ce,!1)))}_toggleClass($,ce){($=$.trim())&&$.split(/\s+/g).forEach(Ve=>{ce?this._renderer.addClass(this._ngEl.nativeElement,Ve):this._renderer.removeClass(this._ngEl.nativeElement,Ve)})}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),F})();class Ls{constructor(ne,$,ce,Ve){this.$implicit=ne,this.ngForOf=$,this.index=ce,this.count=Ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rs=(()=>{class F{constructor($,ce,Ve){this._viewContainer=$,this._template=ce,this._differs=Ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ce=this._viewContainer;$.forEachOperation((Ve,Ct,Vt)=>{if(null==Ve.previousIndex)ce.createEmbeddedView(this._template,new Ls(Ve.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)ce.remove(null===Ct?void 0:Ct);else if(null!==Ct){const Fn=ce.get(Ct);ce.move(Fn,Vt),$i(Fn,Ve)}});for(let Ve=0,Ct=ce.length;Ve<Ct;Ve++){const Fn=ce.get(Ve).context;Fn.index=Ve,Fn.count=Ct,Fn.ngForOf=this._ngForOf}$.forEachIdentityChange(Ve=>{$i(ce.get(Ve.currentIndex),Ve)})}static ngTemplateContextGuard($,ce){return!0}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function $i(F,ne){F.context.$implicit=ne.item}let oi=(()=>{class F{constructor($,ce){this._viewContainer=$,this._context=new Ta,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){fr("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){fr("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ce){return!0}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.s_b),u.Y36(u.Rgc))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Ta{constructor(){this.$implicit=null,this.ngIf=null}}function fr(F,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,u.AaK)(ne)}'.`)}let Qi=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const ce=this._viewContainerRef;if(this._viewRef&&ce.remove(ce.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ve,ngTemplateOutletContext:Ct,ngTemplateOutletInjector:Vt}=this;this._viewRef=ce.createEmbeddedView(Ve,Ct,Vt?{injector:Vt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.s_b))},F.\u0275dir=u.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),F})();function ns(F,ne){return new u.vHH(2100,!1)}class ct{createSubscription(ne,$){return ne.subscribe({next:$,error:ce=>{throw ce}})}dispose(ne){ne.unsubscribe()}}class Xe{createSubscription(ne,$){return ne.then($,ce=>{throw ce})}dispose(ne){}}const vt=new Xe,Wt=new ct;let cn=(()=>{class F{constructor($){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=$}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,ce=>this._updateLatestValue($,ce))}_selectStrategy($){if((0,u.QGY)($))return vt;if((0,u.F4k)($))return Wt;throw ns()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,ce){$===this._obj&&(this._latestValue=ce,this._ref.markForCheck())}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.sBO,16))},F.\u0275pipe=u.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})();const yo=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Es=(()=>{class F{constructor($,ce){this.locale=$,this.defaultTimezone=ce}transform($,ce="mediumDate",Ve,Ct){if(null==$||""===$||$!=$)return null;try{return kn($,ce,Ct||this.locale,Ve??this.defaultTimezone??void 0)}catch(Vt){throw ns()}}}return F.\u0275fac=function($){return new($||F)(u.Y36(u.soG,16),u.Y36(yo,24))},F.\u0275pipe=u.Yjl({name:"date",type:F,pure:!0,standalone:!0}),F})(),wr=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=u.oAB({type:F}),F.\u0275inj=u.cJS({}),F})();const Ni="browser";function js(F){return F===Ni}function to(F){return"server"===F}let Ia=(()=>{class F{}return F.\u0275prov=(0,u.Yz7)({token:F,providedIn:"root",factory:()=>new mi((0,u.LFG)(We),window)}),F})();class mi{constructor(ne,$){this.document=ne,this.window=$,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const $=function ls(F,ne){const $=F.getElementById(ne)||F.getElementsByName(ne)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ce=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ve=ce.currentNode;for(;Ve;){const Ct=Ve.shadowRoot;if(Ct){const Vt=Ct.getElementById(ne)||Ct.querySelector(`[name="${ne}"]`);if(Vt)return Vt}Ve=ce.nextNode()}}return null}(this.document,ne);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=ne)}}scrollToElement(ne){const $=ne.getBoundingClientRect(),ce=$.left+this.window.pageXOffset,Ve=$.top+this.window.pageYOffset,Ct=this.offset();this.window.scrollTo(ce-Ct[0],Ve-Ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class oa{}},4650:(hn,dt,B)=>{B.d(dt,{$8M:()=>jl,$Z:()=>Ip,AFp:()=>jb,ALo:()=>ab,AaK:()=>ke,AsE:()=>nh,BQk:()=>Sn,CHM:()=>ua,CRH:()=>yb,CZH:()=>lv,CqO:()=>wa,D6c:()=>PD,EJc:()=>YE,EiD:()=>Ig,EpF:()=>Or,F$t:()=>ou,F4k:()=>_s,FYo:()=>oc,FiY:()=>On,G48:()=>mD,Gf:()=>mb,GfV:()=>gl,Gpc:()=>ye,Hsn:()=>gf,Ikx:()=>_m,JOm:()=>qo,JVY:()=>_h,KtG:()=>ca,L6k:()=>yh,LAX:()=>Im,LFG:()=>Zs,LMc:()=>FD,LSH:()=>Qh,Lbi:()=>WE,Lck:()=>$w,MAs:()=>O,MGl:()=>ir,MMx:()=>Kv,NdJ:()=>iu,O4$:()=>Fn,OlP:()=>Pi,Oqu:()=>b_,PXZ:()=>cD,Q6J:()=>G,QGY:()=>bi,QP$:()=>qt,QbO:()=>zE,Qsj:()=>Lu,QtT:()=>H0,R0b:()=>ih,RDi:()=>Wh,Rgc:()=>gy,SBq:()=>eu,SDv:()=>U0,Sil:()=>QE,Suo:()=>_b,TTD:()=>Wr,TgZ:()=>et,Tol:()=>My,Udp:()=>pm,VKq:()=>X0,W1O:()=>Eb,WLB:()=>eb,X6Q:()=>gD,XFs:()=>un,Xpm:()=>Ut,Xts:()=>m,Y36:()=>Fc,YKP:()=>G0,YNc:()=>_,Yjl:()=>Te,Yz7:()=>Qe,Z0I:()=>an,ZZ4:()=>v0,_Bn:()=>$0,_UZ:()=>Dt,_Vd:()=>mu,_c5:()=>OD,_uU:()=>By,aQg:()=>b0,c2e:()=>KE,cJS:()=>st,cg1:()=>T_,d8E:()=>sy,dDg:()=>oD,dqk:()=>kn,eBb:()=>If,eFA:()=>tw,ekj:()=>J_,eoX:()=>Jb,f3M:()=>H,g9A:()=>Gb,gxx:()=>E,h0i:()=>I_,hGG:()=>xD,hij:()=>w_,iGM:()=>gb,ifc:()=>In,ip1:()=>Hb,jDz:()=>z0,kEZ:()=>tb,kL8:()=>bc,kYT:()=>Be,kcU:()=>di,lG2:()=>Ze,lcZ:()=>lb,lqb:()=>vi,lri:()=>Zb,mCW:()=>Rc,n5z:()=>Ss,oAB:()=>tr,oJD:()=>ad,oxw:()=>pf,pB0:()=>bg,pQV:()=>Hv,q3G:()=>Fi,q4F:()=>fp,qLn:()=>Ld,qOj:()=>Qf,qZA:()=>ot,qzn:()=>mh,rWj:()=>Qb,s9C:()=>eh,sBO:()=>_D,sIi:()=>Jf,s_b:()=>sv,soG:()=>uv,tb:()=>Wb,tp0:()=>rr,uIk:()=>ff,vHH:()=>lt,vpe:()=>bf,wAp:()=>Ur,xi3:()=>ub,xp6:()=>Om,ynx:()=>zt,z2F:()=>cv,z3N:()=>Nc,zSh:()=>yr,zs3:()=>Pc});var u=B(7579),L=B(727),ee=B(9751),Se=B(6451),Oe=B(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function We(n,r){for(const l in r)r.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=r[l])}function ke(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ke).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const l=r.indexOf("\n");return-1===l?r:r.substring(0,l)}function Je(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const we=Me({__forward_ref__:Me});function ye(n){return n.__forward_ref__=ye,n.toString=function(){return ke(this())},n}function He(n){return Nt(n)?n():n}function Nt(n){return"function"==typeof n&&n.hasOwnProperty(we)&&n.__forward_ref__===ye}class lt extends Error{constructor(r,l){super(function xt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,l)),this.code=r}}function yt(n){return"string"==typeof n?n:null==n?"":String(n)}function qe(n,r){throw new lt(-201,!1)}function ge(n,r,l,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${l} ${d} ${r} <=Actual]`))}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function st(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xt(n){return Dr(n,Nr)||Dr(n,sr)}function an(n){return null!==Xt(n)}function Dr(n,r){return n.hasOwnProperty(r)?n[r]:null}function br(n){return n&&(n.hasOwnProperty(Wn)||n.hasOwnProperty(Tr))?n[Wn]:null}const Nr=Me({\u0275prov:Me}),Wn=Me({\u0275inj:Me}),sr=Me({ngInjectableDef:Me}),Tr=Me({ngInjectorDef:Me});var un=(()=>((un=un||{})[un.Default=0]="Default",un[un.Host=1]="Host",un[un.Self=2]="Self",un[un.SkipSelf=4]="SkipSelf",un[un.Optional=8]="Optional",un))();let Rr;function ur(n){const r=Rr;return Rr=n,r}function Xr(n,r,l){const d=Xt(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&un.Optional?null:void 0!==r?r:void qe(ke(n))}function Kn(n){return{toString:n}.toString()}var pr=(()=>((pr=pr||{})[pr.OnPush=0]="OnPush",pr[pr.Default=1]="Default",pr))(),In=(()=>{return(n=In||(In={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",In;var n})();const kn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ai={},Vn=[],ci=Me({\u0275cmp:Me}),vn=Me({\u0275dir:Me}),Di=Me({\u0275pipe:Me}),_r=Me({\u0275mod:Me}),si=Me({\u0275fac:Me}),Pr=Me({__NG_ELEMENT_ID__:Me});let yn=0;function Ut(n){return Kn(()=>{const l=!0===n.standalone,d={},g={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===pr.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Vn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||In.Emulated,id:"c"+yn++,styles:n.styles||Vn,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,I=n.features;return g.inputs=Pe(n.inputs,d),g.outputs=Pe(n.outputs),I&&I.forEach(x=>x(g)),g.directiveDefs=v?()=>("function"==typeof v?v():v).map(Gn).filter(Ln):null,g.pipeDefs=v?()=>("function"==typeof v?v():v).map(ht).filter(Ln):null,g})}function Gn(n){return se(n)||be(n)}function Ln(n){return null!==n}function tr(n){return Kn(()=>({type:n.type,bootstrap:n.bootstrap||Vn,declarations:n.declarations||Vn,imports:n.imports||Vn,exports:n.exports||Vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Be(n,r){return Kn(()=>{const l=bn(n,!0);l.declarations=r.declarations||Vn,l.imports=r.imports||Vn,l.exports=r.exports||Vn})}function Pe(n,r){if(null==n)return Ai;const l={};for(const d in n)if(n.hasOwnProperty(d)){let g=n[d],v=g;Array.isArray(g)&&(v=g[1],g=g[0]),l[g]=d,r&&(r[g]=v)}return l}const Ze=Ut;function Te(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function se(n){return n[ci]||null}function be(n){return n[vn]||null}function ht(n){return n[Di]||null}function qt(n){const r=se(n)||be(n)||ht(n);return null!==r&&r.standalone}function bn(n,r){const l=n[_r]||null;if(!l&&!0===r)throw new Error(`Type ${ke(n)} does not have '\u0275mod' property.`);return l}function fr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Vs(n){return Array.isArray(n)&&!0===n[1]}function na(n){return 0!=(8&n.flags)}function zs(n){return 2==(2&n.flags)}function Ks(n){return 1==(1&n.flags)}function Gi(n){return null!==n.template}function Vo(n){return 0!=(256&n[2])}function Xn(n,r){return n.hasOwnProperty(si)?n[si]:null}class fs{constructor(r,l,d){this.previousValue=r,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Wr(){return eo}function eo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Hs),Va}function Va(){const n=Vr(this),r=n?.current;if(r){const l=n.previous;if(l===Ai)n.previous=r;else for(let d in r)l[d]=r[d];n.current=null,this.ngOnChanges(r)}}function Hs(n,r,l,d){const g=Vr(n)||function wr(n,r){return n[To]=r}(n,{previous:Ai,current:null}),v=g.current||(g.current={}),I=g.previous,x=this.declaredInputs[l],V=I[x];v[x]=new fs(V&&V.currentValue,r,I===Ai),n[d]=r}Wr.ngInherit=!0;const To="__ngSimpleChanges__";function Vr(n){return n[To]||null}function zr(n){for(;Array.isArray(n);)n=n[0];return n}function fo(n,r){return zr(r[n])}function ls(n,r){return zr(r[n.index])}function oa(n,r){return n.data[r]}function Po(n,r){return n[r]}function Kr(n,r){const l=r[n];return fr(l)?l:l[0]}function ar(n){return 64==(64&n[2])}function Ji(n,r){return null==r?null:n[r]}function Oi(n){n[18]=0}function Zr(n,r){n[5]+=r;let l=n,d=n[3];for(;null!==d&&(1===r&&1===l[5]||-1===r&&0===l[5]);)d[5]+=r,l=d,d=d[3]}const cr={lFrame:$o(null),bindingsEnabled:!0};function ro(){return cr.bindingsEnabled}function Yt(){return cr.lFrame.lView}function gr(){return cr.lFrame.tView}function ua(n){return cr.lFrame.contextLView=n,n[8]}function ca(n){return cr.lFrame.contextLView=null,n}function rs(){let n=Q();for(;null!==n&&64===n.type;)n=n.parent;return n}function Q(){return cr.lFrame.currentTNode}function W(){const n=cr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}function j(n,r){const l=cr.lFrame;l.currentTNode=n,l.isParent=r}function ue(){return cr.lFrame.isParent}function Pt(){cr.lFrame.isParent=!1}function je(){const n=cr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Tt(){return cr.lFrame.bindingIndex}function Bn(){return cr.lFrame.bindingIndex++}function Dn(n){const r=cr.lFrame,l=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,l}function qn(n){cr.lFrame.inI18n=n}function Wi(n,r){const l=cr.lFrame;l.bindingIndex=l.bindingRootIndex=n,_i(r)}function _i(n){cr.lFrame.currentDirectiveIndex=n}function Ci(n){const r=cr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function is(){return cr.lFrame.currentQueryIndex}function qr(n){cr.lFrame.currentQueryIndex=n}function gs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function jo(n,r,l){if(l&un.SkipSelf){let g=r,v=n;for(;!(g=g.parent,null!==g||l&un.Host||(g=gs(v),null===g||(v=v[15],10&g.type))););if(null===g)return!1;r=g,n=v}const d=cr.lFrame=qi();return d.currentTNode=r,d.lView=n,!0}function Ki(n){const r=qi(),l=n[1];cr.lFrame=r,r.currentTNode=l.firstChild,r.lView=n,r.tView=l,r.contextLView=n,r.bindingIndex=l.bindingStartIndex,r.inI18n=!1}function qi(){const n=cr.lFrame,r=null===n?null:n.child;return null===r?$o(n):r}function $o(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function vo(){const n=cr.lFrame;return cr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const F=vo;function ne(){const n=vo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ve(){return cr.lFrame.selectedIndex}function Ct(n){cr.lFrame.selectedIndex=n}function Vt(){const n=cr.lFrame;return oa(n.tView,n.selectedIndex)}function Fn(){cr.lFrame.currentNamespace="svg"}function di(){!function li(){cr.lFrame.currentNamespace=null}()}function hi(n,r){for(let l=r.directiveStart,d=r.directiveEnd;l<d;l++){const v=n.data[l].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:x,ngAfterViewInit:V,ngAfterViewChecked:X,ngOnDestroy:he}=v;I&&(n.contentHooks||(n.contentHooks=[])).push(-l,I),x&&((n.contentHooks||(n.contentHooks=[])).push(l,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(l,x)),V&&(n.viewHooks||(n.viewHooks=[])).push(-l,V),X&&((n.viewHooks||(n.viewHooks=[])).push(l,X),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(l,X)),null!=he&&(n.destroyHooks||(n.destroyHooks=[])).push(l,he)}}function xi(n,r,l){fa(n,r,3,l)}function da(n,r,l,d){(3&n[2])===l&&fa(n,r,l,d)}function ha(n,r){let l=n[2];(3&l)===r&&(l&=2047,l+=1,n[2]=l)}function fa(n,r,l,d){const v=d??-1,I=r.length-1;let x=0;for(let V=void 0!==d?65535&n[18]:0;V<I;V++)if("number"==typeof r[V+1]){if(x=r[V],null!=d&&x>=d)break}else r[V]<0&&(n[18]+=65536),(x<v||-1==v)&&(Ha(n,l,r,V),n[18]=(4294901760&n[18])+V+2),V++}function Ha(n,r,l,d){const g=l[d]<0,v=l[d+1],x=n[g?-l[d]:l[d]];if(g){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class os{constructor(r,l,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function pa(n,r,l){let d=0;for(;d<l.length;){const g=l[d];if("number"==typeof g){if(0!==g)break;d++;const v=l[d++],I=l[d++],x=l[d++];n.setAttribute(r,I,x,v)}else{const v=g,I=l[++d];bu(v)?n.setProperty(r,v,I):n.setAttribute(r,v,I),d++}}return d}function Sa(n){return 3===n||4===n||6===n}function bu(n){return 64===n.charCodeAt(0)}function Wu(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let l=-1;for(let d=0;d<r.length;d++){const g=r[d];"number"==typeof g?l=g:0===l||vl(n,l,g,null,-1===l||2===l?r[++d]:null)}}return n}function vl(n,r,l,d,g){let v=0,I=n.length;if(-1===r)I=-1;else for(;v<n.length;){const x=n[v++];if("number"==typeof x){if(x===r){I=-1;break}if(x>r){I=v-1;break}}}for(;v<n.length;){const x=n[v];if("number"==typeof x)break;if(x===l){if(null===d)return void(null!==g&&(n[v+1]=g));if(d===n[v+1])return void(n[v+2]=g)}v++,null!==d&&v++,null!==g&&v++}-1!==I&&(n.splice(I,0,r),v=I+1),n.splice(v++,0,l),null!==d&&n.splice(v++,0,d),null!==g&&n.splice(v++,0,g)}function io(n){return-1!==n}function Ts(n){return 32767&n}function ga(n,r){let l=function tl(n){return n>>16}(n),d=r;for(;l>0;)d=d[15],l--;return d}let zu=!0;function rn(n){const r=zu;return zu=n,r}let fn=0;const wn={};function on(n,r){const l=Zt(n,r);if(-1!==l)return l;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,kt(d.data,n),kt(r,null),kt(d.blueprint,null));const g=Ii(n,r),v=n.injectorIndex;if(io(g)){const I=Ts(g),x=ga(g,r),V=x[1].data;for(let X=0;X<8;X++)r[v+X]=x[I+X]|V[I+X]}return r[v+8]=g,v}function kt(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Zt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ii(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,d=null,g=r;for(;null!==g;){if(d=ti(g),null===d)return-1;if(l++,g=g[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Cs(n,r,l){!function Il(n,r,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Pr)&&(d=l[Pr]),null==d&&(d=l[Pr]=fn++);const g=255&d;r.data[n+(g>>5)]|=1<<g}(n,r,l)}function ma(n,r,l){if(l&un.Optional||void 0!==n)return n;qe()}function Aa(n,r,l,d){if(l&un.Optional&&void 0===d&&(d=null),0==(l&(un.Self|un.Host))){const g=n[9],v=ur(void 0);try{return g?g.get(r,d,l&un.Optional):Xr(r,d,l&un.Optional)}finally{ur(v)}}return ma(d,0,l)}function nl(n,r,l,d=un.Default,g){if(null!==n){if(1024&r[2]){const I=function Ys(n,r,l,d,g){let v=n,I=r;for(;null!==v&&null!==I&&1024&I[2]&&!(256&I[2]);){const x=qs(v,I,l,d|un.Self,wn);if(x!==wn)return x;let V=v.parent;if(!V){const X=I[21];if(X){const he=X.get(l,wn,d);if(he!==wn)return he}V=ti(I),I=I[15]}v=V}return g}(n,r,l,d,wn);if(I!==wn)return I}const v=qs(n,r,l,d,wn);if(v!==wn)return v}return Aa(r,l,d,g)}function qs(n,r,l,d,g){const v=function wu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Pr)?n[Pr]:void 0;return"number"==typeof r?r>=0?255&r:Ku:r}(l);if("function"==typeof v){if(!jo(r,n,d))return d&un.Host?ma(g,0,d):Aa(r,l,d,g);try{const I=v(d);if(null!=I||d&un.Optional)return I;qe()}finally{F()}}else if("number"==typeof v){let I=null,x=Zt(n,r),V=-1,X=d&un.Host?r[16][6]:null;for((-1===x||d&un.SkipSelf)&&(V=-1===x?Ii(n,r):r[x+8],-1!==V&&Er(d,!1)?(I=r[1],x=Ts(V),r=ga(V,r)):x=-1);-1!==x;){const he=r[1];if(Al(v,x,he.data)){const Ie=Sl(x,r,l,I,d,X);if(Ie!==wn)return Ie}V=r[x+8],-1!==V&&Er(d,r[1].data[x+8]===X)&&Al(v,x,r)?(I=he,x=Ts(V),r=ga(V,r)):x=-1}}return g}function Sl(n,r,l,d,g,v){const I=r[1],x=I.data[n+8],he=Hl(x,I,l,null==d?zs(x)&&zu:d!=I&&0!=(3&x.type),g&un.Host&&v===x);return null!==he?Wo(r,I,he,x):wn}function Hl(n,r,l,d,g){const v=n.providerIndexes,I=r.data,x=1048575&v,V=n.directiveStart,he=v>>20,at=g?x+he:n.directiveEnd;for(let St=d?x:x+he;St<at;St++){const Qt=I[St];if(St<V&&l===Qt||St>=V&&Qt.type===l)return St}if(g){const St=I[V];if(St&&Gi(St)&&St.type===l)return V}return null}function Wo(n,r,l,d){let g=n[l];const v=r.data;if(function Vl(n){return n instanceof os}(g)){const I=g;I.resolving&&function $e(n,r){const l=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new lt(-200,`Circular dependency in DI detected for ${n}${l}`)}(function ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():yt(n)}(v[l]));const x=rn(I.canSeeViewProviders);I.resolving=!0;const V=I.injectImpl?ur(I.injectImpl):null;jo(n,d,un.Default);try{g=n[l]=I.factory(void 0,v,n,d),r.firstCreatePass&&l>=d.directiveStart&&function ss(n,r,l){const{ngOnChanges:d,ngOnInit:g,ngDoCheck:v}=r.type.prototype;if(d){const I=eo(r);(l.preOrderHooks||(l.preOrderHooks=[])).push(n,I),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,I)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-n,g),v&&((l.preOrderHooks||(l.preOrderHooks=[])).push(n,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,v))}(l,v[l],r)}finally{null!==V&&ur(V),rn(x),I.resolving=!1,F()}}return g}function Al(n,r,l){return!!(l[r+(n>>5)]&1<<n)}function Er(n,r){return!(n&un.Self||n&un.Host&&r)}class Zo{constructor(r,l){this._tNode=r,this._lView=l}get(r,l,d){return nl(this._tNode,this._lView,r,d,l)}}function Ku(){return new Zo(rs(),Yt())}function Ss(n){return Kn(()=>{const r=n.prototype.constructor,l=r[si]||zn(r),d=Object.prototype;let g=Object.getPrototypeOf(n.prototype).constructor;for(;g&&g!==d;){const v=g[si]||zn(g);if(v&&v!==l)return v;g=Object.getPrototypeOf(g)}return v=>new v})}function zn(n){return Nt(n)?()=>{const r=zn(He(n));return r&&r()}:Xn(n)}function ti(n){const r=n[1],l=r.type;return 2===l?r.declTNode:1===l?n[6]:null}function jl(n){return function Is(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const l=n.attrs;if(l){const d=l.length;let g=0;for(;g<d;){const v=l[g];if(Sa(v))break;if(0===v)g+=2;else if("number"==typeof v)for(g++;g<d&&"string"==typeof l[g];)g++;else{if(v===r)return l[g+1];g+=2}}}return null}(rs(),n)}const _n="__parameters__";function Ma(n,r,l){return Kn(()=>{const d=function Ra(n){return function(...l){if(n){const d=n(...l);for(const g in d)this[g]=d[g]}}}(r);function g(...v){if(this instanceof g)return d.apply(this,v),this;const I=new g(...v);return x.annotation=I,x;function x(V,X,he){const Ie=V.hasOwnProperty(_n)?V[_n]:Object.defineProperty(V,_n,{value:[]})[_n];for(;Ie.length<=he;)Ie.push(null);return(Ie[he]=Ie[he]||[]).push(I),V}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=n,g.annotationCls=g,g})}class Pi{constructor(r,l){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Qe({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Os(n,r){void 0===r&&(r=n);for(let l=0;l<n.length;l++){let d=n[l];Array.isArray(d)?(r===n&&(r=n.slice(0,l)),Os(d,r)):r!==n&&r.push(d)}return r}function Oa(n,r){n.forEach(l=>Array.isArray(l)?Oa(l,r):r(l))}function $l(n,r,l){r>=n.length?n.push(l):n.splice(r,0,l)}function xa(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function A(n,r){const l=[];for(let d=0;d<n;d++)l.push(r);return l}function xe(n,r,l){let d=pn(n,r);return d>=0?n[1|d]=l:(d=~d,function U(n,r,l,d){let g=n.length;if(g==r)n.push(l,d);else if(1===g)n.push(d,n[0]),n[0]=l;else{for(g--,n.push(n[g-1],n[g]);g>r;)n[g]=n[g-2],g--;n[r]=l,n[r+1]=d}}(n,d,r,l)),d}function Lt(n,r){const l=pn(n,r);if(l>=0)return n[1|l]}function pn(n,r){return function gn(n,r,l){let d=0,g=n.length>>l;for(;g!==d;){const v=d+(g-d>>1),I=n[v<<l];if(r===I)return v<<l;I>r?g=v:d=v+1}return~(g<<l)}(n,r,1)}const $a={},Qo="__NG_DI_FLAG__",zo="ngTempTokenPath",Ga=/\n/gm,cu="__source";let Jo;function Wa(n){const r=Jo;return Jo=n,r}function du(n,r=un.Default){if(void 0===Jo)throw new lt(-203,!1);return null===Jo?Xr(n,void 0,r):Jo.get(n,r&un.Optional?null:void 0,r)}function Zs(n,r=un.Default){return(function er(){return Rr}()||du)(He(n),r)}function H(n,r=un.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Zs(n,r)}function Y(n){const r=[];for(let l=0;l<n.length;l++){const d=He(n[l]);if(Array.isArray(d)){if(0===d.length)throw new lt(900,!1);let g,v=un.Default;for(let I=0;I<d.length;I++){const x=d[I],V=Ce(x);"number"==typeof V?-1===V?g=x.token:v|=V:g=x}r.push(Zs(g,v))}else r.push(Zs(d))}return r}function le(n,r){return n[Qo]=r,n.prototype[Qo]=r,n}function Ce(n){return n[Qo]}const On=le(Ma("Optional"),8),rr=le(Ma("SkipSelf"),4);var qo=(()=>((qo=qo||{})[qo.Important=1]="Important",qo[qo.DashCase=2]="DashCase",qo))();const Wl=/^>|^->|<!--|-->|--!>|<!-$/g,Ru=/(<|>)/;const Rl=new Map;let Lo=0;const b="__ngContext__";function D(n,r){fr(r)?(n[b]=r[20],function al(n){Rl.set(n[20],n)}(r)):n[b]=r}let Dl;function zl(n,r){return Dl(n,r)}function Xu(n){const r=n[3];return Vs(r)?r[3]:r}function ec(n){return Uh(n[13])}function Cc(n){return Uh(n[4])}function Uh(n){for(;null!==n&&!Vs(n);)n=n[4];return n}function ql(n,r,l,d,g){if(null!=d){let v,I=!1;Vs(d)?v=d:fr(d)&&(I=!0,d=d[0]);const x=zr(d);0===n&&null!==l?null==g?Ol(r,l,x):Ic(r,l,x,g||null,!0):1===n&&null!==l?Ic(r,l,x,g||null,!0):2===n?fh(r,x,I):3===n&&r.destroyNode(x),null!=v&&function Tm(n,r,l,d,g){const v=l[7];v!==zr(l)&&ql(r,n,d,v,g);for(let x=10;x<l.length;x++){const V=l[x];ph(V[1],V,n,r,d,v)}}(r,n,v,l,g)}}function Ou(n,r){return n.createText(r)}function Td(n,r,l){n.setValue(r,l)}function xu(n,r){return n.createComment(function Qc(n){return n.replace(Wl,r=>r.replace(Ru,"\u200b$1\u200b"))}(r))}function Cd(n,r,l){return n.createElement(r,l)}function Si(n,r){const l=n[9],d=l.indexOf(r),g=r[3];512&r[2]&&(r[2]&=-513,Zr(g,-1)),l.splice(d,1)}function tc(n,r){if(n.length<=10)return;const l=10+r,d=n[l];if(d){const g=d[17];null!==g&&g!==n&&Si(g,d),r>0&&(n[l-1][4]=d[4]);const v=xa(n,10+r);!function gg(n,r){ph(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const I=v[19];null!==I&&I.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function dh(n,r){if(!(128&r[2])){const l=r[11];l.destroyNode&&ph(n,r,l,3,null,null),function Hh(n){let r=n[13];if(!r)return Ml(n[1],n);for(;r;){let l=null;if(fr(r))l=r[13];else{const d=r[10];d&&(l=d)}if(!l){for(;r&&!r[4]&&r!==n;)fr(r)&&Ml(r[1],r),r=r[3];null===r&&(r=n),fr(r)&&Ml(r[1],r),l=r&&r[4]}r=l}}(r)}}function Ml(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Ya(n,r){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let d=0;d<l.length;d+=2){const g=r[l[d]];if(!(g instanceof os)){const v=l[d+1];if(Array.isArray(v))for(let I=0;I<v.length;I+=2){const x=g[v[I]],V=v[I+1];try{V.call(x)}finally{}}else try{v.call(g)}finally{}}}}(n,r),function Dm(n,r){const l=n.cleanup,d=r[7];let g=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const I=l[v+1],x="function"==typeof I?I(r):zr(r[I]),V=d[g=l[v+2]],X=l[v+3];"boolean"==typeof X?x.removeEventListener(l[v],V,X):X>=0?d[g=X]():d[g=-X].unsubscribe(),v+=2}else{const I=d[g=l[v+1]];l[v].call(I)}if(null!==d){for(let v=g+1;v<d.length;v++)(0,d[v])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const l=r[17];if(null!==l&&Vs(r[3])){l!==r[3]&&Si(l,r);const d=r[19];null!==d&&d.detachView(n)}!function Jc(n){Rl.delete(n[20])}(r)}}function nc(n,r,l){return Sd(n,r.parent,l)}function Sd(n,r,l){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return l[0];if(2&d.flags){const g=n.data[d.directiveStart].encapsulation;if(g===In.None||g===In.Emulated)return null}return ls(d,l)}function Ic(n,r,l,d,g){n.insertBefore(r,l,d,g)}function Ol(n,r,l){n.appendChild(r,l)}function jh(n,r,l,d,g){null!==d?Ic(n,r,l,d,g):Ol(n,r,l)}function Za(n,r){return n.parentNode(r)}function rc(n,r,l){return Pa(n,r,l)}function Sc(n,r,l){return 40&n.type?ls(n,l):null}let xl,Qs,sd,gh,Pa=Sc;function nd(n,r){Pa=n,xl=r}function Ad(n,r,l,d){const g=nc(n,d,r),v=r[11],x=rc(d.parent||r[6],d,r);if(null!=g)if(Array.isArray(l))for(let V=0;V<l.length;V++)jh(v,g,l[V],x,!1);else jh(v,g,l,x,!1);void 0!==xl&&xl(v,d,r,l,g)}function Yl(n,r){if(null!==r){const l=r.type;if(3&l)return ls(r,n);if(4&l)return hh(-1,n[r.index]);if(8&l){const d=r.child;if(null!==d)return Yl(n,d);{const g=n[r.index];return Vs(g)?hh(-1,g):zr(g)}}if(32&l)return zl(r,n)()||zr(n[r.index]);{const d=$h(n,r);return null!==d?Array.isArray(d)?d[0]:Yl(Xu(n[16]),d):Yl(n,r.next)}}return null}function $h(n,r){return null!==r?n[16][6].projection[r.projection]:null}function hh(n,r){const l=10+n+1;if(l<r.length){const d=r[l],g=d[1].firstChild;if(null!==g)return Yl(d,g)}return r[7]}function fh(n,r,l){const d=Za(n,r);d&&function hu(n,r,l,d){n.removeChild(r,l,d)}(n,d,r,l)}function Nd(n,r,l,d,g,v,I){for(;null!=l;){const x=d[l.index],V=l.type;if(I&&0===r&&(x&&D(zr(x),d),l.flags|=4),64!=(64&l.flags))if(8&V)Nd(n,r,l.child,d,g,v,!1),ql(r,n,g,x,v);else if(32&V){const X=zl(l,d);let he;for(;he=X();)ql(r,n,g,he,v);ql(r,n,g,x,v)}else 16&V?_g(n,r,d,l,g,v):ql(r,n,g,x,v);l=I?l.projectionNext:l.next}}function ph(n,r,l,d,g,v){Nd(l,d,n.firstChild,r,g,v,!1)}function _g(n,r,l,d,g,v){const I=l[16],V=I[6].projection[d.projection];if(Array.isArray(V))for(let X=0;X<V.length;X++)ql(r,n,g,V[X],v);else Nd(n,r,V,I[3],g,v,!0)}function Rd(n,r,l){n.setAttribute(r,"style",l)}function Ac(n,r,l){""===l?n.removeAttribute(r,"class"):n.setAttribute(r,"class",l)}function Pu(n){return function rd(){if(void 0===Qs&&(Qs=null,kn.trustedTypes))try{Qs=kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qs}()?.createHTML(n)||n}function Wh(n){sd=n}function Tf(){return void 0!==sd?sd:typeof document<"u"?document:void 0}function ip(n){return function zh(){if(void 0===gh&&(gh=null,kn.trustedTypes))try{gh=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gh}()?.createHTML(n)||n}class Md{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yg extends Md{getTypeName(){return"HTML"}}class sp extends Md{getTypeName(){return"Style"}}class vg extends Md{getTypeName(){return"Script"}}class Cm extends Md{getTypeName(){return"URL"}}class Cf extends Md{getTypeName(){return"ResourceURL"}}function Nc(n){return n instanceof Md?n.changingThisBreaksApplicationSecurity:n}function mh(n,r){const l=function op(n){return n instanceof Md&&n.getTypeName()||null}(n);if(null!=l&&l!==r){if("ResourceURL"===l&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===r}function _h(n){return new yg(n)}function yh(n){return new sp(n)}function If(n){return new vg(n)}function Im(n){return new Cm(n)}function bg(n){return new Cf(n)}function mo(n){const r=new qh(n);return function ku(){try{return!!(new window.DOMParser).parseFromString(Pu(""),"text/html")}catch{return!1}}()?new Sm(r):r}class Sm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const l=(new window.DOMParser).parseFromString(Pu(r),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(r):(l.removeChild(l.firstChild),l)}catch{return null}}}class qh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(r){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Pu(r),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Pu(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(r){const l=r.attributes;for(let g=l.length-1;0<g;g--){const I=l.item(g).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&r.removeAttribute(I)}let d=r.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const wg=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Rc(n){return(n=String(n)).match(wg)?n:"unsafe:"+n}function ic(n){const r={};for(const l of n.split(","))r[l]=!0;return r}function Yh(...n){const r={};for(const l of n)for(const d in l)l.hasOwnProperty(d)&&(r[d]=!0);return r}const Sf=ic("area,br,col,hr,img,wbr"),Eg=ic("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ap=ic("rp,rt"),vh=Yh(Sf,Yh(Eg,ic("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yh(ap,ic("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yh(ap,Eg)),lp=ic("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dg=Yh(lp,ic("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ic("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),up=ic("script,style,template");class Am{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let l=r.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let g=this.checkClobberedElement(l,l.nextSibling);if(g){l=g;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(r){const l=r.nodeName.toLowerCase();if(!vh.hasOwnProperty(l))return this.sanitizedSomething=!0,!up.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=r.attributes;for(let g=0;g<d.length;g++){const v=d.item(g),I=v.name,x=I.toLowerCase();if(!Dg.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let V=v.value;lp[x]&&(V=Rc(V)),this.buf.push(" ",I,'="',Cg(V),'"')}return this.buf.push(">"),!0}endElement(r){const l=r.nodeName.toLowerCase();vh.hasOwnProperty(l)&&!Sf.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(r){this.buf.push(Cg(r))}checkClobberedElement(r,l){if(l&&(r.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return l}}const Nm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tg=/([^\#-~ |!])/g;function Cg(n){return n.replace(/&/g,"&amp;").replace(Nm,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Tg,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zh;function Ig(n,r){let l=null;try{Zh=Zh||mo(n);let d=r?String(r):"";l=Zh.getInertBodyElement(d);let g=5,v=d;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,d=v,v=l.innerHTML,l=Zh.getInertBodyElement(d)}while(d!==v);return Pu((new Am).sanitizeChildren(cp(l)||l))}finally{if(l){const d=cp(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function cp(n){return"content"in n&&function dp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Fi=(()=>((Fi=Fi||{})[Fi.NONE=0]="NONE",Fi[Fi.HTML=1]="HTML",Fi[Fi.STYLE=2]="STYLE",Fi[Fi.SCRIPT=3]="SCRIPT",Fi[Fi.URL=4]="URL",Fi[Fi.RESOURCE_URL=5]="RESOURCE_URL",Fi))();function ad(n){const r=sc();return r?ip(r.sanitize(Fi.HTML,n)||""):mh(n,"HTML")?ip(Nc(n)):Ig(Tf(),yt(n))}function Qh(n){const r=sc();return r?r.sanitize(Fi.URL,n)||"":mh(n,"URL")?Nc(n):Rc(yt(n))}function sc(){const n=Yt();return n&&n[12]}const m=new Pi("ENVIRONMENT_INITIALIZER"),E=new Pi("INJECTOR",-1),p=new Pi("INJECTOR_DEF_TYPES");class w{get(r,l=$a){if(l===$a){const d=new Error(`NullInjectorError: No provider for ${ke(r)}!`);throw d.name="NullInjectorError",d}return l}}function R(...n){return{\u0275providers:z(0,n)}}function z(n,...r){const l=[],d=new Set;let g;return Oa(r,v=>{const I=v;Ye(I,l,[],d)&&(g||(g=[]),g.push(I))}),void 0!==g&&De(g,l),l}function De(n,r){for(let l=0;l<n.length;l++){const{providers:g}=n[l];Oa(g,v=>{r.push(v)})}}function Ye(n,r,l,d){if(!(n=He(n)))return!1;let g=null,v=br(n);const I=!v&&se(n);if(v||I){if(I&&!I.standalone)return!1;g=n}else{const V=n.ngModule;if(v=br(V),!v)return!1;g=V}const x=d.has(g);if(I){if(x)return!1;if(d.add(g),I.dependencies){const V="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const X of V)Ye(X,r,l,d)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let X;d.add(g);try{Oa(v.imports,he=>{Ye(he,r,l,d)&&(X||(X=[]),X.push(he))})}finally{}void 0!==X&&De(X,r)}if(!x){const X=Xn(g)||(()=>new g);r.push({provide:g,useFactory:X,deps:Vn},{provide:p,useValue:g,multi:!0},{provide:m,useValue:()=>Zs(g),multi:!0})}const V=v.providers;null==V||x||Oa(V,he=>{r.push(he)})}}return g!==n&&void 0!==n.providers}const Ft=Me({provide:String,useValue:Me});function Ot(n){return null!==n&&"object"==typeof n&&Ft in n}function Jn(n){return"function"==typeof n}const yr=new Pi("Set Injector scope."),xr={},pi={};let Yr;function xs(){return void 0===Yr&&(Yr=new w),Yr}class vi{}class Bi extends vi{constructor(r,l,d,g){super(),this.parent=l,this.source=d,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gu(r,I=>this.processProvider(I)),this.records.set(E,uo(void 0,this)),g.has("environment")&&this.records.set(vi,uo(void 0,this));const v=this.records.get(yr);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(p.multi,Vn,un.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const l=Wa(this),d=ur(void 0);try{return r()}finally{Wa(l),ur(d)}}get(r,l=$a,d=un.Default){this.assertNotDestroyed();const g=Wa(this),v=ur(void 0);try{if(!(d&un.SkipSelf)){let x=this.records.get(r);if(void 0===x){const V=function ka(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pi}(r)&&Xt(r);x=V&&this.injectableDefInScope(V)?uo(Yi(r),xr):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(d&un.Self?xs():this.parent).get(r,l=d&un.Optional&&l===$a?null:l)}catch(I){if("NullInjectorError"===I.name){if((I[zo]=I[zo]||[]).unshift(ke(r)),g)throw I;return function pt(n,r,l,d){const g=n[zo];throw r[cu]&&g.unshift(r[cu]),n.message=function Rt(n,r,l,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let g=ke(r);if(Array.isArray(r))g=r.map(ke).join(" -> ");else if("object"==typeof r){let v=[];for(let I in r)if(r.hasOwnProperty(I)){let x=r[I];v.push(I+":"+("string"==typeof x?JSON.stringify(x):ke(x)))}g=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${g}]: ${n.replace(Ga,"\n  ")}`}("\n"+n.message,g,l,d),n.ngTokenPath=g,n[zo]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{ur(v),Wa(g)}}resolveInjectorInitializers(){const r=Wa(this),l=ur(void 0);try{const d=this.get(m.multi,Vn,un.Self);for(const g of d)g()}finally{Wa(r),ur(l)}}toString(){const r=[],l=this.records;for(const d of l.keys())r.push(ke(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new lt(205,!1)}processProvider(r){let l=Jn(r=He(r))?r:He(r&&r.provide);const d=function As(n){return Ot(n)?uo(void 0,n.useValue):uo(Yo(n),xr)}(r);if(Jn(r)||!0!==r.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=uo(void 0,xr,!0),g.factory=()=>Y(g.multi),this.records.set(l,g)),l=r,g.multi.push(r)}this.records.set(l,d)}hydrate(r,l){return l.value===xr&&(l.value=pi,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Ql(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(r){if(!r.providedIn)return!1;const l=He(r.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Yi(n){const r=Xt(n),l=null!==r?r.factory:Xn(n);if(null!==l)return l;if(n instanceof Pi)throw new lt(204,!1);if(n instanceof Function)return function Ps(n){const r=n.length;if(r>0)throw A(r,"?"),new lt(204,!1);const l=function jn(n){const r=n&&(n[Nr]||n[sr]);if(r){const l=function ii(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),r}return null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new lt(204,!1)}function Yo(n,r,l){let d;if(Jn(n)){const g=He(n);return Xn(g)||Yi(g)}if(Ot(n))d=()=>He(n.useValue);else if(function mn(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Y(n.deps||[]));else if(function Un(n){return!(!n||!n.useExisting)}(n))d=()=>Zs(He(n.useExisting));else{const g=He(n&&(n.useClass||n.provide));if(!function So(n){return!!n.deps}(n))return Xn(g)||Yi(g);d=()=>new g(...Y(n.deps))}return d}function uo(n,r,l=!1){return{factory:n,value:r,multi:l?[]:void 0}}function cd(n){return!!n.\u0275providers}function gu(n,r){for(const l of n)Array.isArray(l)?gu(l,r):cd(l)?gu(l.\u0275providers,r):r(l)}class Jl{}class dd{resolveComponentFactory(r){throw function bh(n){const r=Error(`No component factory found for ${ke(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let mu=(()=>{class n{}return n.NULL=new dd,n})();function Pd(){return ds(rs(),Yt())}function ds(n,r){return new eu(ls(n,r))}let eu=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Pd,n})();function Oc(n){return n instanceof eu?n.nativeElement:n}class oc{}let Lu=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function hd(){const n=Yt(),l=Kr(rs().index,n);return(fr(l)?l:n)[11]}(),n})(),fd=(()=>{class n{}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:()=>null}),n})();class gl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const fp=new gl("14.2.12"),xc={};function Fd(n){return n.ngOriginalError}class Ld{constructor(){this._console=console}handleError(r){const l=this._findOriginalError(r);this._console.error("ERROR",r),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(r){let l=r&&Fd(r);for(;l&&Fd(l);)l=Fd(l);return l||null}}function tu(n){return n instanceof Function?n():n}function k_(n,r,l){let d=n.length;for(;;){const g=n.indexOf(r,l);if(-1===g)return g;if(0===g||n.charCodeAt(g-1)<=32){const v=r.length;if(g+v===d||n.charCodeAt(g+v)<=32)return g}l=g+1}}const Ng="ng-template";function ml(n,r,l){let d=0;for(;d<n.length;){let g=n[d++];if(l&&"class"===g){if(g=n[d],-1!==k_(g.toLowerCase(),r,0))return!0}else if(1===g){for(;d<n.length&&"string"==typeof(g=n[d++]);)if(g.toLowerCase()===r)return!0;return!1}}return!1}function F_(n){return 4===n.type&&n.value!==Ng}function by(n,r,l){return r===(4!==n.type||l?n.value:Ng)}function L_(n,r,l){let d=4;const g=n.attrs||[],v=function Rm(n){for(let r=0;r<n.length;r++)if(Sa(n[r]))return r;return n.length}(g);let I=!1;for(let x=0;x<r.length;x++){const V=r[x];if("number"!=typeof V){if(!I)if(4&d){if(d=2|1&d,""!==V&&!by(n,V,l)||""===V&&1===r.length){if(uc(d))return!1;I=!0}}else{const X=8&d?V:r[++x];if(8&d&&null!==n.attrs){if(!ml(n.attrs,X,l)){if(uc(d))return!1;I=!0}continue}const Ie=Rg(8&d?"class":V,g,F_(n),l);if(-1===Ie){if(uc(d))return!1;I=!0;continue}if(""!==X){let at;at=Ie>v?"":g[Ie+1].toLowerCase();const St=8&d?at:null;if(St&&-1!==k_(St,X,0)||2&d&&X!==at){if(uc(d))return!1;I=!0}}}}else{if(!I&&!uc(d)&&!uc(V))return!1;if(I&&uc(V))continue;I=!1,d=V|1&d}}return uc(d)||I}function uc(n){return 0==(1&n)}function Rg(n,r,l,d){if(null===r)return-1;let g=0;if(d||!l){let v=!1;for(;g<r.length;){const I=r[g];if(I===n)return g;if(3===I||6===I)v=!0;else{if(1===I||2===I){let x=r[++g];for(;"string"==typeof x;)x=r[++g];continue}if(4===I)break;if(0===I){g+=4;continue}}g+=v?1:2}return-1}return function Mm(n,r){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const d=n[l];if("number"==typeof d)return-1;if(d===r)return l;l++}return-1}(r,n)}function pp(n,r,l=!1){for(let d=0;d<r.length;d++)if(L_(n,r[d],l))return!0;return!1}function Af(n,r){e:for(let l=0;l<r.length;l++){const d=r[l];if(n.length===d.length){for(let g=0;g<n.length;g++)if(n[g]!==d[g])continue e;return!0}}return!1}function gp(n,r){return n?":not("+r.trim()+")":r}function mp(n){let r=n[0],l=1,d=2,g="",v=!1;for(;l<n.length;){let I=n[l];if("string"==typeof I)if(2&d){const x=n[++l];g+="["+I+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?g+="."+I:4&d&&(g+=" "+I);else""!==g&&!uc(I)&&(r+=gp(v,g),g=""),d=I,v=v||!uc(d);l++}return""!==g&&(r+=gp(v,g)),r}const ni={};function Om(n){B_(gr(),Yt(),Ve()+n,!1)}function B_(n,r,l,d){if(!d)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&xi(r,v,l)}else{const v=n.preOrderHooks;null!==v&&da(r,v,0,l)}Ct(l)}function Eh(n,r=null,l=null,d){const g=yp(n,r,l,d);return g.resolveInjectorInitializers(),g}function yp(n,r=null,l=null,d,g=new Set){const v=[l||Vn,R(n)];return d=d||("object"==typeof n?void 0:ke(n)),new Bi(v,r||xs(),d||null,g)}let Pc=(()=>{class n{static create(l,d){if(Array.isArray(l))return Eh({name:""},d,l,"");{const g=l.name??"";return Eh({name:g},l.parent,l.providers,g)}}}return n.THROW_IF_NOT_FOUND=$a,n.NULL=new w,n.\u0275prov=Qe({token:n,providedIn:"any",factory:()=>Zs(E)}),n.__NG_ELEMENT_ID__=-1,n})();function Fc(n,r=un.Default){const l=Yt();return null===l?Zs(n,r):nl(rs(),l,He(n),r)}function Ip(){throw new Error("invalid")}function Fa(n,r){return n<<17|r<<2}function nu(n){return n>>17&32767}function Dh(n){return 2|n}function Pl(n){return(131068&n)>>2}function Np(n,r){return-131069&n|r<<2}function cc(n){return 1|n}function qg(n,r){const l=n.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const g=l[d],v=l[d+1];if(-1!==v){const I=n.data[v];qr(g),I.contentQueries(2,r[v],v)}}}function sf(n,r,l,d,g,v,I,x,V,X,he){const Ie=r.blueprint.slice();return Ie[0]=g,Ie[2]=76|d,(null!==he||n&&1024&n[2])&&(Ie[2]|=1024),Oi(Ie),Ie[3]=Ie[15]=n,Ie[8]=l,Ie[10]=I||n&&n[10],Ie[11]=x||n&&n[11],Ie[12]=V||n&&n[12]||null,Ie[9]=X||n&&n[9]||null,Ie[6]=v,Ie[20]=function Tc(){return Lo++}(),Ie[21]=he,Ie[16]=2==r.type?n[16]:Ie,Ie}function af(n,r,l,d,g){let v=n.data[r];if(null===v)v=Hp(n,r,l,d,g),function lr(){return cr.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=l,v.value=d,v.attrs=g;const I=W();v.injectorIndex=null===I?-1:I.injectorIndex}return j(v,!0),v}function Hp(n,r,l,d,g){const v=Q(),I=ue(),V=n.data[r]=function em(n,r,l,d,g,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?v:v&&v.parent,l,r,d,g);return null===n.firstChild&&(n.firstChild=V),null!==v&&(I?null==v.child&&null!==V.parent&&(v.child=V):null===v.next&&(v.next=V)),V}function kf(n,r,l,d){if(0===l)return-1;const g=r.length;for(let v=0;v<l;v++)r.push(d),n.blueprint.push(d),n.data.push(null);return g}function Yg(n,r,l){Ki(r);try{const d=n.viewQuery;null!==d&&Zp(1,d,l);const g=n.template;null!==g&&Zg(n,r,g,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qg(n,r),n.staticViewQueries&&Zp(2,n.viewQuery,l);const v=n.components;null!==v&&function rf(n,r){for(let l=0;l<r.length;l++)q_(n,r[l])}(r,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,ne()}}function zd(n,r,l,d){const g=r[2];if(128!=(128&g)){Ki(r);try{Oi(r),function _t(n){return cr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&Zg(n,r,l,2,d);const I=3==(3&g);if(I){const X=n.preOrderCheckHooks;null!==X&&xi(r,X,null)}else{const X=n.preOrderHooks;null!==X&&da(r,X,0,null),ha(r,0)}if(function $f(n){for(let r=ec(n);null!==r;r=Cc(r)){if(!r[2])continue;const l=r[9];for(let d=0;d<l.length;d++){const g=l[d],v=g[3];0==(512&g[2])&&Zr(v,1),g[2]|=512}}}(r),function Qm(n){for(let r=ec(n);null!==r;r=Cc(r))for(let l=10;l<r.length;l++){const d=r[l],g=d[1];ar(d)&&zd(g,d,g.template,d[8])}}(r),null!==n.contentQueries&&qg(n,r),I){const X=n.contentCheckHooks;null!==X&&xi(r,X)}else{const X=n.contentHooks;null!==X&&da(r,X,1),ha(r,1)}!function kl(n,r){const l=n.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const g=l[d];if(g<0)Ct(~g);else{const v=g,I=l[++d],x=l[++d];Wi(I,v),x(2,r[v])}}}finally{Ct(-1)}}(n,r);const x=n.components;null!==x&&function Up(n,r){for(let l=0;l<r.length;l++)Jm(n,r[l])}(r,x);const V=n.viewQuery;if(null!==V&&Zp(2,V,d),I){const X=n.viewCheckHooks;null!==X&&xi(r,X)}else{const X=n.viewHooks;null!==X&&da(r,X,2),ha(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Zr(r[3],-1))}finally{ne()}}}function Zg(n,r,l,d,g){const v=Ve(),I=2&d;try{Ct(-1),I&&r.length>22&&B_(n,r,22,!1),l(d,g)}finally{Ct(v)}}function Qg(n,r,l){if(na(r)){const g=r.directiveEnd;for(let v=r.directiveStart;v<g;v++){const I=n.data[v];I.contentQueries&&I.contentQueries(1,l[v],v)}}}function Jg(n,r,l){!ro()||(function K_(n,r,l,d){const g=l.directiveStart,v=l.directiveEnd;n.firstCreatePass||on(l,r),D(d,r);const I=l.initialInputs;for(let x=g;x<v;x++){const V=n.data[x],X=Gi(V);X&&Hc(r,l,V);const he=Wo(r,n,x,l);D(he,r),null!==I&&jf(0,x-g,he,V,0,I),X&&(Kr(l.index,r)[8]=he)}}(n,r,l,ls(l,r)),128==(128&l.flags)&&function im(n,r,l){const d=l.directiveStart,g=l.directiveEnd,v=l.index,I=function zi(){return cr.lFrame.currentDirectiveIndex}();try{Ct(v);for(let x=d;x<g;x++){const V=n.data[x],X=r[x];_i(x),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&zp(V,X)}}finally{Ct(-1),_i(I)}}(n,r,l))}function lf(n,r,l=ls){const d=r.localNames;if(null!==d){let g=r.index+1;for(let v=0;v<d.length;v+=2){const I=d[v+1],x=-1===I?l(r,n):n[I];n[g++]=x}}}function Ff(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function jp(n,r,l,d,g,v,I,x,V,X){const he=22+d,Ie=he+g,at=function $p(n,r){const l=[];for(let d=0;d<r;d++)l.push(d<n?null:ni);return l}(he,Ie),St="function"==typeof X?X():X;return at[1]={type:n,blueprint:at,template:l,queries:null,viewQuery:x,declTNode:r,data:at.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:V,consts:St,incompleteFirstPass:!1}}function Xg(n,r,l,d){const g=e_(r);null===l?g.push(d):(g.push(l),n.firstCreatePass&&Kf(n).push(d,g.length-1))}function Km(n,r,l){for(let d in n)if(n.hasOwnProperty(d)){const g=n[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(r,g):l[d]=[r,g]}return l}function Gp(n,r){const d=r.directiveEnd,g=n.data,v=r.attrs,I=[];let x=null,V=null;for(let X=r.directiveStart;X<d;X++){const he=g[X],Ie=he.inputs,at=null===v||F_(r)?null:Cy(Ie,v);I.push(at),x=Km(Ie,X,x),V=Km(he.outputs,X,V)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=x,r.outputs=V}function Fl(n,r,l,d,g,v,I,x){const V=ls(r,l);let he,X=r.inputs;!x&&null!=X&&(he=X[d])?(om(n,l,he,d,g),zs(r)&&tm(l,r.index)):3&r.type&&(d=function qm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),g=null!=I?I(g,r.value||"",d):g,v.setProperty(V,d,g))}function tm(n,r){const l=Kr(r,n);16&l[2]||(l[2]|=32)}function Kd(n,r,l,d){let g=!1;if(ro()){const v=function Bf(n,r,l){const d=n.directiveRegistry;let g=null;if(d)for(let v=0;v<d.length;v++){const I=d[v];pp(l,I.selectors,!1)&&(g||(g=[]),Cs(on(l,r),n,I.type),Gi(I)?(Sh(n,l),g.unshift(I)):g.push(I))}return g}(n,r,l),I=null===d?null:{"":-1};if(null!==v){g=!0,Hf(l,n.data.length,v.length);for(let he=0;he<v.length;he++){const Ie=v[he];Ie.providersResolver&&Ie.providersResolver(Ie)}let x=!1,V=!1,X=kf(n,r,v.length,null);for(let he=0;he<v.length;he++){const Ie=v[he];l.mergedAttrs=Wu(l.mergedAttrs,Ie.hostAttrs),Kp(n,l,r,X,Ie),Uf(X,Ie,I),null!==Ie.contentQueries&&(l.flags|=8),(null!==Ie.hostBindings||null!==Ie.hostAttrs||0!==Ie.hostVars)&&(l.flags|=128);const at=Ie.type.prototype;!x&&(at.ngOnChanges||at.ngOnInit||at.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(l.index),x=!0),!V&&(at.ngOnChanges||at.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(l.index),V=!0),X++}Gp(n,l)}I&&function Vf(n,r,l){if(r){const d=n.localNames=[];for(let g=0;g<r.length;g+=2){const v=l[r[g+1]];if(null==v)throw new lt(-301,!1);d.push(r[g],v)}}}(l,d,I)}return l.mergedAttrs=Wu(l.mergedAttrs,l.attrs),g}function Ym(n,r,l,d,g,v){const I=v.hostBindings;if(I){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const V=~r.index;(function rm(n){let r=n.length;for(;r>0;){const l=n[--r];if("number"==typeof l&&l<0)return l}return 0})(x)!=V&&x.push(V),x.push(d,g,I)}}function zp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Sh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Uf(n,r,l){if(l){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)l[r.exportAs[d]]=n;Gi(r)&&(l[""]=n)}}function Hf(n,r,l){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+l,n.providerIndexes=r}function Kp(n,r,l,d,g){n.data[d]=g;const v=g.factory||(g.factory=Xn(g.type)),I=new os(v,Gi(g),Fc);n.blueprint[d]=I,l[d]=I,Ym(n,r,0,d,kf(n,l,g.hostVars,ni),g)}function Hc(n,r,l){const d=ls(r,n),g=Ff(l),v=n[10],I=Gf(n,sf(n,g,null,l.onPush?32:16,d,r,v,v.createRenderer(d,l),null,null,null));n[r.index]=I}function Zm(n,r,l,d,g,v,I){if(null==v)n.removeAttribute(r,g,l);else{const x=null==I?yt(v):I(v,d||"",g);n.setAttribute(r,g,x,l)}}function jf(n,r,l,d,g,v){const I=v[r];if(null!==I){const x=d.setInput;for(let V=0;V<I.length;){const X=I[V++],he=I[V++],Ie=I[V++];null!==x?d.setInput(l,Ie,X,he):l[he]=Ie}}}function Cy(n,r){let l=null,d=0;for(;d<r.length;){const g=r[d];if(0!==g)if(5!==g){if("number"==typeof g)break;n.hasOwnProperty(g)&&(null===l&&(l=[]),l.push(g,n[g],r[d+1])),d+=2}else d+=2;else d+=4}return l}function qp(n,r,l,d){return new Array(n,!0,!1,r,null,0,d,l,null,null)}function Jm(n,r){const l=Kr(r,n);if(ar(l)){const d=l[1];48&l[2]?zd(d,l,d.template,l[8]):l[5]>0&&Yp(l)}}function Yp(n){for(let d=ec(n);null!==d;d=Cc(d))for(let g=10;g<d.length;g++){const v=d[g];if(ar(v))if(512&v[2]){const I=v[1];zd(I,v,I.template,v[8])}else v[5]>0&&Yp(v)}const l=n[1].components;if(null!==l)for(let d=0;d<l.length;d++){const g=Kr(l[d],n);ar(g)&&g[5]>0&&Yp(g)}}function q_(n,r){const l=Kr(r,n),d=l[1];(function sm(n,r){for(let l=r.length;l<n.blueprint.length;l++)r.push(n.blueprint[l])})(d,l),Yg(d,l,l[8])}function Gf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Wf(n){for(;n;){n[2]|=32;const r=Xu(n);if(Vo(n)&&!r)return n;n=r}return null}function zf(n,r,l,d=!0){const g=r[10];g.begin&&g.begin();try{zd(n,r,n.template,l)}catch(I){throw d&&uf(r,I),I}finally{g.end&&g.end()}}function Zp(n,r,l){qr(0),r(n,l)}function e_(n){return n[7]||(n[7]=[])}function Kf(n){return n.cleanup||(n.cleanup=[])}function uf(n,r){const l=n[9],d=l?l.get(Ld,null):null;d&&d.handleError(r)}function om(n,r,l,d,g){for(let v=0;v<l.length;){const I=l[v++],x=l[v++],V=r[I],X=n.data[I];null!==X.setInput?X.setInput(V,g,d,x):V[x]=g}}function jc(n,r,l){const d=fo(r,n);Td(n[11],d,l)}function qf(n,r,l){let d=l?n.styles:null,g=l?n.classes:null,v=0;if(null!==r)for(let I=0;I<r.length;I++){const x=r[I];"number"==typeof x?v=x:1==v?g=Je(g,x):2==v&&(d=Je(d,x+": "+r[++I]+";"))}l?n.styles=d:n.stylesWithoutHost=d,l?n.classes=g:n.classesWithoutHost=g}function Jp(n,r,l,d,g=!1){for(;null!==l;){const v=r[l.index];if(null!==v&&d.push(zr(v)),Vs(v))for(let x=10;x<v.length;x++){const V=v[x],X=V[1].firstChild;null!==X&&Jp(V[1],V,X,d)}const I=l.type;if(8&I)Jp(n,r,l.child,d);else if(32&I){const x=zl(l,r);let V;for(;V=x();)d.push(V)}else if(16&I){const x=$h(r,l);if(Array.isArray(x))d.push(...x);else{const V=Xu(r[16]);Jp(V[1],V,x,d,!0)}}l=g?l.projectionNext:l.next}return d}class qd{constructor(r,l){this._lView=r,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,l=r[1];return Jp(l,r,l.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Vs(r)){const l=r[8],d=l?l.indexOf(this):-1;d>-1&&(tc(r,d),xa(l,d))}this._attachedToViewContainer=!1}dh(this._lView[1],this._lView)}onDestroy(r){Xg(this._lView[1],this._lView,null,r)}markForCheck(){Wf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){zf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function td(n,r){ph(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new lt(902,!1);this._appRef=r}}class am extends qd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;zf(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Ll extends mu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const l=se(r);return new Mi(l,this.ngModule)}}function Yf(n){const r=[];for(let l in n)n.hasOwnProperty(l)&&r.push({propName:n[l],templateName:l});return r}class df{constructor(r,l){this.injector=r,this.parentInjector=l}get(r,l,d){const g=this.injector.get(r,xc,d);return g!==xc||l===xc?g:this.parentInjector.get(r,l,d)}}class Mi extends Jl{constructor(r,l){super(),this.componentDef=r,this.ngModule=l,this.componentType=r.type,this.selector=function Mg(n){return n.map(mp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Yf(this.componentDef.inputs)}get outputs(){return Yf(this.componentDef.outputs)}create(r,l,d,g){let v=(g=g||this.ngModule)instanceof vi?g:g?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const I=v?new df(r,v):r,x=I.get(oc,null);if(null===x)throw new lt(407,!1);const V=I.get(fd,null),X=x.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",Ie=d?function Lf(n,r,l){return n.selectRootElement(r,l===In.ShadowDom)}(X,d,this.componentDef.encapsulation):Cd(X,he,function cf(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(he)),at=this.componentDef.onPush?288:272,St=jp(0,null,null,1,0,null,null,null,null,null),Qt=sf(null,St,null,at,null,null,x,X,V,I,null);let An,$n;Ki(Qt);try{const mr=function Zf(n,r,l,d,g,v){const I=l[1];l[22]=n;const V=af(I,22,2,"#host",null),X=V.mergedAttrs=r.hostAttrs;null!==X&&(qf(V,X,!0),null!==n&&(pa(g,n,X),null!==V.classes&&Ac(g,n,V.classes),null!==V.styles&&Rd(g,n,V.styles)));const he=d.createRenderer(n,r),Ie=sf(l,Ff(r),null,r.onPush?32:16,l[22],V,d,he,v||null,null,null);return I.firstCreatePass&&(Cs(on(V,l),I,r.type),Sh(I,V),Hf(V,l.length,1)),Gf(l,Ie),l[22]=Ie}(Ie,this.componentDef,Qt,x,X);if(Ie)if(d)pa(X,Ie,["ng-version",fp.full]);else{const{attrs:jr,classes:dn}=function Og(n){const r=[],l=[];let d=1,g=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===g?""!==v&&r.push(v,n[++d]):8===g&&l.push(v);else{if(!uc(g))break;g=v}d++}return{attrs:r,classes:l}}(this.componentDef.selectors[0]);jr&&pa(X,Ie,jr),dn&&dn.length>0&&Ac(X,Ie,dn.join(" "))}if($n=oa(St,22),void 0!==l){const jr=$n.projection=[];for(let dn=0;dn<this.ngContentSelectors.length;dn++){const ri=l[dn];jr.push(null!=ri?Array.from(ri):null)}}An=function No(n,r,l,d){const g=l[1],v=function nm(n,r,l){const d=rs();n.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Kp(n,d,r,kf(n,r,1,null),l),Gp(n,d));const g=Wo(r,n,d.directiveStart,d);D(g,r);const v=ls(d,r);return v&&D(v,r),g}(g,l,r);if(n[8]=l[8]=v,null!==d)for(const x of d)x(v,r);if(r.contentQueries){const x=rs();r.contentQueries(1,v,x.directiveStart)}const I=rs();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ct(I.index),Ym(l[1],I,0,I.directiveStart,I.directiveEnd,r),zp(r,v)),v}(mr,this.componentDef,Qt,[ll]),Yg(St,Qt,null)}finally{ne()}return new n_(this.componentType,An,ds($n,Qt),Qt,$n)}}class n_ extends class Ja{}{constructor(r,l,d,g,v){super(),this.location=d,this._rootLView=g,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new am(g),this.componentType=r}setInput(r,l){const d=this._tNode.inputs;let g;if(null!==d&&(g=d[r])){const v=this._rootLView;om(v[1],v,g,r,l),tm(v,this._tNode.index)}}get injector(){return new Zo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function ll(){const n=rs();hi(Yt()[1],n)}function Qf(n){let r=function Uu(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const d=[n];for(;r;){let g;if(Gi(n))g=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new lt(903,!1);g=r.\u0275dir}if(g){if(l){d.push(g);const I=n;I.inputs=fc(n.inputs),I.declaredInputs=fc(n.declaredInputs),I.outputs=fc(n.outputs);const x=g.hostBindings;x&&cm(n,x);const V=g.viewQuery,X=g.contentQueries;if(V&&r_(n,V),X&&um(n,X),We(n.inputs,g.inputs),We(n.declaredInputs,g.declaredInputs),We(n.outputs,g.outputs),Gi(g)&&g.data.animation){const he=n.data;he.animation=(he.animation||[]).concat(g.data.animation)}}const v=g.features;if(v)for(let I=0;I<v.length;I++){const x=v[I];x&&x.ngInherit&&x(n),x===Qf&&(l=!1)}}r=Object.getPrototypeOf(r)}!function Hu(n){let r=0,l=null;for(let d=n.length-1;d>=0;d--){const g=n[d];g.hostVars=r+=g.hostVars,g.hostAttrs=Wu(g.hostAttrs,l=Wu(l,g.hostAttrs))}}(d)}function fc(n){return n===Ai?{}:n===Vn?[]:n}function r_(n,r){const l=n.viewQuery;n.viewQuery=l?(d,g)=>{r(d,g),l(d,g)}:r}function um(n,r){const l=n.contentQueries;n.contentQueries=l?(d,g,v)=>{r(d,g,v),l(d,g,v)}:r}function cm(n,r){const l=n.hostBindings;n.hostBindings=l?(d,g)=>{r(d,g),l(d,g)}:r}let tg=null;function Ah(){if(!tg){const n=kn.Symbol;if(n&&n.iterator)tg=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<r.length;++l){const d=r[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(tg=d)}}}return tg}function Jf(n){return!!Xf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ah()in n)}function Xf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ju(n,r,l){return n[r]=l}function ba(n,r,l){return!Object.is(n[r],l)&&(n[r]=l,!0)}function pc(n,r,l,d){const g=ba(n,r,l);return ba(n,r+1,d)||g}function ff(n,r,l,d){const g=Yt();return ba(g,Bn(),r)&&(gr(),function Vu(n,r,l,d,g,v){const I=ls(n,r);Zm(r[11],I,v,n.value,l,d,g)}(Vt(),g,n,r,l,d)),ff}function Qd(n,r,l,d){return ba(n,Bn(),l)?r+yt(l)+d:ni}function _(n,r,l,d,g,v,I,x){const V=Yt(),X=gr(),he=n+22,Ie=X.firstCreatePass?function h(n,r,l,d,g,v,I,x,V){const X=r.consts,he=af(r,n,4,I||null,Ji(X,x));Kd(r,l,he,Ji(X,V)),hi(r,he);const Ie=he.tViews=jp(2,he,d,g,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,X);return null!==r.queries&&(r.queries.template(r,he),Ie.queries=r.queries.embeddedTView(he)),he}(he,X,V,r,l,d,g,v,I):X.data[he];j(Ie,!1);const at=V[11].createComment("");Ad(X,V,at,Ie),D(at,V),Gf(V,V[he]=qp(at,V,at,Ie)),Ks(Ie)&&Jg(X,V,Ie),null!=I&&lf(V,Ie,x)}function O(n){return Po(function q(){return cr.lFrame.contextLView}(),22+n)}function G(n,r,l){const d=Yt();return ba(d,Bn(),r)&&Fl(gr(),Vt(),d,n,r,d[11],l,!1),G}function te(n,r,l,d,g){const I=g?"class":"style";om(n,l,r.inputs[I],I,d)}function et(n,r,l,d){const g=Yt(),v=gr(),I=22+n,x=g[11],V=g[I]=Cd(x,r,function Qr(){return cr.lFrame.currentNamespace}()),X=v.firstCreatePass?function de(n,r,l,d,g,v,I){const x=r.consts,X=af(r,n,2,g,Ji(x,v));return Kd(r,l,X,Ji(x,I)),null!==X.attrs&&qf(X,X.attrs,!1),null!==X.mergedAttrs&&qf(X,X.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,X),X}(I,v,g,0,r,l,d):v.data[I];j(X,!0);const he=X.mergedAttrs;null!==he&&pa(x,V,he);const Ie=X.classes;null!==Ie&&Ac(x,V,Ie);const at=X.styles;return null!==at&&Rd(x,V,at),64!=(64&X.flags)&&Ad(v,g,V,X),0===function ps(){return cr.lFrame.elementDepthCount}()&&D(V,g),function _l(){cr.lFrame.elementDepthCount++}(),Ks(X)&&(Jg(v,g,X),Qg(v,X,g)),null!==d&&lf(g,X),et}function ot(){let n=rs();ue()?Pt():(n=n.parent,j(n,!1));const r=n;!function po(){cr.lFrame.elementDepthCount--}();const l=gr();return l.firstCreatePass&&(hi(l,n),na(n)&&l.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Gu(n){return 0!=(16&n.flags)}(r)&&te(l,r,Yt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function yl(n){return 0!=(32&n.flags)}(r)&&te(l,r,Yt(),r.stylesWithoutHost,!1),ot}function Dt(n,r,l,d){return et(n,r,l,d),ot(),Dt}function zt(n,r,l){const d=Yt(),g=gr(),v=n+22,I=g.firstCreatePass?function Gt(n,r,l,d,g){const v=r.consts,I=Ji(v,d),x=af(r,n,8,"ng-container",I);return null!==I&&qf(x,I,!0),Kd(r,l,x,Ji(v,g)),null!==r.queries&&r.queries.elementStart(r,x),x}(v,g,d,r,l):g.data[v];j(I,!0);const x=d[v]=d[11].createComment("");return Ad(g,d,x,I),D(x,d),Ks(I)&&(Jg(g,d,I),Qg(g,I,d)),null!=l&&lf(d,I),zt}function Sn(){let n=rs();const r=gr();return ue()?Pt():(n=n.parent,j(n,!1)),r.firstCreatePass&&(hi(r,n),na(n)&&r.queries.elementEnd(n)),Sn}function Or(){return Yt()}function bi(n){return!!n&&"function"==typeof n.then}function _s(n){return!!n&&"function"==typeof n.subscribe}const wa=_s;function iu(n,r,l,d){const g=Yt(),v=gr(),I=rs();return function $c(n,r,l,d,g,v,I,x){const V=Ks(d),he=n.firstCreatePass&&Kf(n),Ie=r[8],at=e_(r);let St=!0;if(3&d.type||x){const $n=ls(d,r),mr=x?x($n):$n,jr=at.length,dn=x?_o=>x(zr(_o[d.index])):d.index;let ri=null;if(!x&&V&&(ri=function Bl(n,r,l,d){const g=n.cleanup;if(null!=g)for(let v=0;v<g.length-1;v+=2){const I=g[v];if(I===l&&g[v+1]===d){const x=r[7],V=g[v+2];return x.length>V?x[V]:null}"string"==typeof I&&(v+=2)}return null}(n,r,g,d.index)),null!==ri)(ri.__ngLastListenerFn__||ri).__ngNextListenerFn__=v,ri.__ngLastListenerFn__=v,St=!1;else{v=_c(d,r,Ie,v,!1);const _o=l.listen(mr,g,v);at.push(v,_o),he&&he.push(g,dn,jr,jr+1)}}else v=_c(d,r,Ie,v,!1);const Qt=d.outputs;let An;if(St&&null!==Qt&&(An=Qt[g])){const $n=An.length;if($n)for(let mr=0;mr<$n;mr+=2){const La=r[An[mr]][An[mr+1]].subscribe(v),Em=at.length;at.push(v,La),he&&he.push(g,d.index,Em,-(Em+1))}}}(v,g,g[11],I,n,r,0,d),iu}function mc(n,r,l,d){try{return!1!==l(d)}catch(g){return uf(n,g),!1}}function _c(n,r,l,d,g){return function v(I){if(I===Function)return d;Wf(2&n.flags?Kr(n.index,r):r);let V=mc(r,0,d,I),X=v.__ngNextListenerFn__;for(;X;)V=mc(r,0,X,I)&&V,X=X.__ngNextListenerFn__;return g&&!1===V&&(I.preventDefault(),I.returnValue=!1),V}}function pf(n=1){return function $(n){return(cr.lFrame.contextLView=function ce(n,r){for(;n>0;)r=r[15],n--;return r}(n,cr.lFrame.contextLView))[8]}(n)}function ep(n,r){let l=null;const d=function ef(n){const r=n.attrs;if(null!=r){const l=r.indexOf(5);if(0==(1&l))return r[l+1]}return null}(n);for(let g=0;g<r.length;g++){const v=r[g];if("*"!==v){if(null===d?pp(n,v,!0):Af(d,v))return g}else l=g}return l}function ou(n){const r=Yt()[16][6];if(!r.projection){const d=r.projection=A(n?n.length:1,null),g=d.slice();let v=r.child;for(;null!==v;){const I=n?ep(v,n):0;null!==I&&(g[I]?g[I].projectionNext=v:d[I]=v,g[I]=v),v=v.next}}}function gf(n,r=0,l){const d=Yt(),g=gr(),v=af(g,22+n,16,null,l||null);null===v.projection&&(v.projection=r),Pt(),64!=(64&v.flags)&&function Df(n,r,l){_g(r[11],0,r,l,nc(n,l,r),rc(l.parent||r[6],l,r))}(g,d,v)}function eh(n,r,l){return ir(n,"",r,"",l),eh}function ir(n,r,l,d,g){const v=Yt(),I=Qd(v,r,l,d);return I!==ni&&Fl(gr(),Vt(),v,n,I,v[11],g,!1),ir}function Wc(n,r,l,d,g){const v=n[l+1],I=null===r;let x=d?nu(v):Pl(v),V=!1;for(;0!==x&&(!1===V||I);){const he=n[x+1];$u(n[x],r)&&(V=!0,n[x+1]=d?cc(he):Dh(he)),x=d?nu(he):Pl(he)}V&&(n[l+1]=d?Dh(v):cc(v))}function $u(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&pn(n,r)>=0}const Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xh(n){return n.substring(Ro.key,Ro.keyEnd)}function Ny(n,r){const l=Ro.textEnd;return l===r?-1:(r=Ro.keyEnd=function mf(n,r,l){for(;r<l&&n.charCodeAt(r)>32;)r++;return r}(n,Ro.key=r,l),th(n,r,l))}function th(n,r,l){for(;r<l&&n.charCodeAt(r)<=32;)r++;return r}function pm(n,r,l){return md(n,r,l,!1),pm}function J_(n,r){return md(n,r,null,!0),J_}function My(n){!function _d(n,r,l,d){const g=gr(),v=Dn(2);g.firstUpdatePass&&Oy(g,null,v,d);const I=Yt();if(l!==ni&&ba(I,v,l)){const x=g.data[Ve()];if(Ph(x,d)&&!gm(g,v)){let V=d?x.classesWithoutHost:x.stylesWithoutHost;null!==V&&(l=Je(V,l||"")),te(g,x,I,l,d)}else!function v_(n,r,l,d,g,v,I,x){g===ni&&(g=Vn);let V=0,X=0,he=0<g.length?g[0]:null,Ie=0<v.length?v[0]:null;for(;null!==he||null!==Ie;){const at=V<g.length?g[V+1]:void 0,St=X<v.length?v[X+1]:void 0;let An,Qt=null;he===Ie?(V+=2,X+=2,at!==St&&(Qt=Ie,An=St)):null===Ie||null!==he&&he<Ie?(V+=2,Qt=he):(X+=2,Qt=Ie,An=St),null!==Qt&&Ly(n,r,l,d,Qt,An,I,x),he=V<g.length?g[V]:null,Ie=X<v.length?v[X]:null}}(g,x,I,I[11],I[v+1],I[v+1]=function Fy(n,r,l){if(null==l||""===l)return Vn;const d=[],g=Nc(l);if(Array.isArray(g))for(let v=0;v<g.length;v++)n(d,g[v],!0);else if("object"==typeof g)for(const v in g)g.hasOwnProperty(v)&&n(d,v,g[v]);else"string"==typeof g&&r(d,g);return d}(n,r,l),d,v)}}(xe,vc,n,!0)}function vc(n,r){for(let l=function hm(n){return function m_(n){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=n.length}(n),Ny(n,th(n,0,Ro.textEnd))}(r);l>=0;l=Ny(r,l))xe(n,xh(r),!0)}function md(n,r,l,d){const g=Yt(),v=gr(),I=Dn(2);v.firstUpdatePass&&Oy(v,n,I,d),r!==ni&&ba(g,I,r)&&Ly(v,v.data[Ve()],g,g[11],n,g[I+1]=function mm(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ke(Nc(n)))),n}(r,l),d,I)}function gm(n,r){return r>=n.expandoStartIndex}function Oy(n,r,l,d){const g=n.data;if(null===g[l+1]){const v=g[Ve()],I=gm(n,l);Ph(v,d)&&null===r&&!I&&(r=!1),r=function _v(n,r,l,d){const g=Ci(n);let v=d?r.residualClasses:r.residualStyles;if(null===g)0===(d?r.classBindings:r.styleBindings)&&(l=ig(l=__(null,n,r,l,d),r.attrs,d),v=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==g)if(l=__(g,n,r,l,d),null===v){let V=function xy(n,r,l){const d=l?r.classBindings:r.styleBindings;if(0!==Pl(d))return n[nu(d)]}(n,r,d);void 0!==V&&Array.isArray(V)&&(V=__(null,n,r,V[1],d),V=ig(V,r.attrs,d),function Py(n,r,l,d){n[nu(l?r.classBindings:r.styleBindings)]=d}(n,r,d,V))}else v=function ky(n,r,l){let d;const g=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<g;v++)d=ig(d,n[v].hostAttrs,l);return ig(d,r.attrs,l)}(n,r,d)}return void 0!==v&&(d?r.residualClasses=v:r.residualStyles=v),l}(g,v,r,d),function p_(n,r,l,d,g,v){let I=v?r.classBindings:r.styleBindings,x=nu(I),V=Pl(I);n[d]=l;let he,X=!1;if(Array.isArray(l)){const Ie=l;he=Ie[1],(null===he||pn(Ie,he)>0)&&(X=!0)}else he=l;if(g)if(0!==V){const at=nu(n[x+1]);n[d+1]=Fa(at,x),0!==at&&(n[at+1]=Np(n[at+1],d)),n[x+1]=function Ap(n,r){return 131071&n|r<<17}(n[x+1],d)}else n[d+1]=Fa(x,0),0!==x&&(n[x+1]=Np(n[x+1],d)),x=d;else n[d+1]=Fa(V,0),0===x?x=d:n[V+1]=Np(n[V+1],d),V=d;X&&(n[d+1]=Dh(n[d+1])),Wc(n,he,d,!0),Wc(n,he,d,!1),function ul(n,r,l,d,g){const v=g?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&pn(v,r)>=0&&(l[d+1]=cc(l[d+1]))}(r,he,n,d,v),I=Fa(x,V),v?r.classBindings=I:r.styleBindings=I}(g,v,r,l,I,d)}}function __(n,r,l,d,g){let v=null;const I=l.directiveEnd;let x=l.directiveStylingLast;for(-1===x?x=l.directiveStart:x++;x<I&&(v=r[x],d=ig(d,v.hostAttrs,g),v!==n);)x++;return null!==n&&(l.directiveStylingLast=x),d}function ig(n,r,l){const d=l?1:2;let g=-1;if(null!==r)for(let v=0;v<r.length;v++){const I=r[v];"number"==typeof I?g=I:g===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xe(n,I,!!l||r[++v]))}return void 0===n?null:n}function Ly(n,r,l,d,g,v,I,x){if(!(3&r.type))return;const V=n.data,X=V[x+1];zc(function Bg(n){return 1==(1&n)}(X)?_f(V,r,l,g,Pl(X),I):void 0)||(zc(v)||function gd(n){return 2==(2&n)}(X)&&(v=_f(V,null,l,g,x,I)),function fu(n,r,l,d,g){if(r)g?n.addClass(l,d):n.removeClass(l,d);else{let v=-1===d.indexOf("-")?void 0:qo.DashCase;null==g?n.removeStyle(l,d,v):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),v|=qo.Important),n.setStyle(l,d,g,v))}}(d,I,fo(Ve(),l),g,v))}function _f(n,r,l,d,g,v){const I=null===r;let x;for(;g>0;){const V=n[g],X=Array.isArray(V),he=X?V[1]:V,Ie=null===he;let at=l[g+1];at===ni&&(at=Ie?Vn:void 0);let St=Ie?Lt(at,d):he===d?at:void 0;if(X&&!zc(St)&&(St=Lt(V,d)),zc(St)&&(x=St,I))return x;const Qt=n[g+1];g=I?nu(Qt):Pl(Qt)}if(null!==r){let V=v?r.residualClasses:r.residualStyles;null!=V&&(x=Lt(V,d))}return x}function zc(n){return void 0!==n}function Ph(n,r){return 0!=(n.flags&(r?16:32))}function By(n,r=""){const l=Yt(),d=gr(),g=n+22,v=d.firstCreatePass?af(d,g,1,r,null):d.data[g],I=l[g]=Ou(l[11],r);Ad(d,l,I,v),j(v,!1)}function b_(n){return w_("",n,""),b_}function w_(n,r,l){const d=Yt(),g=Qd(d,n,r,l);return g!==ni&&jc(d,Ve(),g),w_}function nh(n,r,l,d,g){const v=Yt(),I=function Nh(n,r,l,d,g,v){const x=pc(n,Tt(),l,g);return Dn(2),x?r+yt(l)+d+yt(g)+v:ni}(v,n,r,l,d,g);return I!==ni&&jc(v,Ve(),I),nh}function _m(n,r,l){const d=Yt();return ba(d,Bn(),r)&&Fl(gr(),Vt(),d,n,r,d[11],l,!0),_m}function sy(n,r,l){const d=Yt();if(ba(d,Bn(),r)){const v=gr(),I=Vt();Fl(v,I,d,n,r,function Qp(n,r,l){return(null===n||Gi(n))&&(l=function Ia(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(l[r.index])),l[11]}(Ci(v.data),I,d),l,!0)}return sy}const tp=void 0;var D_=["en",[["a","p"],["AM","PM"],tp],[["AM","PM"],tp,tp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tp,"{1} 'at' {0}",tp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qy(n){const l=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let ag={};function T_(n){const r=function ym(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=au(r);if(l)return l;const d=r.split("-")[0];if(l=au(d),l)return l;if("en"===d)return D_;throw new lt(701,!1)}function bc(n){return T_(n)[Ur.PluralCase]}function au(n){return n in ag||(ag[n]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[n]),ag[n]}var Ur=(()=>((Ur=Ur||{})[Ur.LocaleId=0]="LocaleId",Ur[Ur.DayPeriodsFormat=1]="DayPeriodsFormat",Ur[Ur.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ur[Ur.DaysFormat=3]="DaysFormat",Ur[Ur.DaysStandalone=4]="DaysStandalone",Ur[Ur.MonthsFormat=5]="MonthsFormat",Ur[Ur.MonthsStandalone=6]="MonthsStandalone",Ur[Ur.Eras=7]="Eras",Ur[Ur.FirstDayOfWeek=8]="FirstDayOfWeek",Ur[Ur.WeekendRange=9]="WeekendRange",Ur[Ur.DateFormat=10]="DateFormat",Ur[Ur.TimeFormat=11]="TimeFormat",Ur[Ur.DateTimeFormat=12]="DateTimeFormat",Ur[Ur.NumberSymbols=13]="NumberSymbols",Ur[Ur.NumberFormats=14]="NumberFormats",Ur[Ur.CurrencyCode=15]="CurrencyCode",Ur[Ur.CurrencySymbol=16]="CurrencySymbol",Ur[Ur.CurrencyName=17]="CurrencyName",Ur[Ur.Currencies=18]="Currencies",Ur[Ur.Directionality=19]="Directionality",Ur[Ur.PluralCase=20]="PluralCase",Ur[Ur.ExtraData=21]="ExtraData",Ur))();const vm=["zero","one","two","few","many"],ug="en-US",kh={marker:"element"},rh={marker:"ICU"};var ea=(()=>((ea=ea||{})[ea.SHIFT=2]="SHIFT",ea[ea.APPEND_EAGERLY=1]="APPEND_EAGERLY",ea[ea.COMMENT=2]="COMMENT",ea))();let Yy=ug;function Zy(n){(function en(n,r){null==n&&ge(r,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(Yy=n.toLowerCase().replace(/_/g,"-"))}function Fh(n,r,l){const d=r.insertBeforeIndex,g=Array.isArray(d)?d[0]:d;return null===g?Sc(n,0,l):zr(l[g])}function Qy(n,r,l,d,g){const v=r.insertBeforeIndex;if(Array.isArray(v)){let I=d,x=null;if(3&r.type||(x=I,I=g),null!==I&&0==(2&r.flags))for(let V=1;V<v.length;V++)Ic(n,I,l[v[V]],x,!1)}}function Jy(n,r){if(n.push(r),n.length>1)for(let l=n.length-2;l>=0;l--){const d=n[l];Xy(d)||ev(d,r)&&null===Pv(d)&&ay(d,r.index)}}function Xy(n){return!(64&n.type)}function ev(n,r){return Xy(r)||n.index>r.index}function Pv(n){const r=n.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function ay(n,r){const l=n.insertBeforeIndex;Array.isArray(l)?l[0]=r:(nd(Fh,Qy),n.insertBeforeIndex=r)}function vf(n,r){const l=n.data[r];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function ly(n,r,l){const d=Hp(n,l,64,null,null);return Jy(r,d),d}function C_(n,r){const l=r[n.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function uy(n){return n>>>17}function cy(n){return(131070&n)>>>1}let dg=0,hg=0;function hy(n,r,l,d){const g=l[11];let I,v=null;for(let x=0;x<r.length;x++){const V=r[x];if("string"==typeof V){const X=r[++x];null===l[X]&&(l[X]=Ou(g,V))}else if("number"==typeof V)switch(1&V){case 0:const X=uy(V);let he,Ie;if(null===v&&(v=X,I=Za(g,d)),X===v?(he=d,Ie=I):(he=null,Ie=zr(l[X])),null!==Ie){const An=cy(V);Ic(g,Ie,l[An],he,!1);const mr=vf(n,An);if(null!==mr&&"object"==typeof mr){const jr=C_(mr,l);null!==jr&&hy(n,mr.create[jr],l,l[mr.anchorIdx])}}break;case 1:const St=r[++x],Qt=r[++x];Zm(g,fo(V>>>1,l),null,null,St,Qt,null)}else switch(V){case rh:const X=r[++x],he=r[++x];null===l[he]&&D(l[he]=xu(g,X),l);break;case kh:const Ie=r[++x],at=r[++x];null===l[at]&&D(l[at]=Cd(g,Ie,null),l)}}}function rv(n,r,l,d,g){for(let v=0;v<l.length;v++){const I=l[v],x=l[++v];if(I&g){let V="";for(let X=v+1;X<=v+x;X++){const he=l[X];if("string"==typeof he)V+=he;else if("number"==typeof he)if(he<0)V+=yt(r[d-he]);else{const Ie=he>>>2;switch(3&he){case 1:const at=l[++X],St=l[++X],Qt=n.data[Ie];"string"==typeof Qt?Zm(r[11],r[Ie],null,Qt,at,V,St):Fl(n,Qt,r,at,V,r[11],St,!1);break;case 0:const An=r[Ie];null!==An&&Td(r[11],An,V);break;case 2:e(n,vf(n,Ie),r,V);break;case 3:i(n,vf(n,Ie),d,r)}}}}else{const V=l[v+1];if(V>0&&3==(3&V)){const he=vf(n,V>>>2);r[he.currentCaseLViewIndex]<0&&i(n,he,d,r)}}v+=x}}function i(n,r,l,d){let g=d[r.currentCaseLViewIndex];if(null!==g){let v=dg;g<0&&(g=d[r.currentCaseLViewIndex]=~g,v=-1),rv(n,d,r.update[g],l,v)}}function e(n,r,l,d){const g=function a(n,r){let l=n.cases.indexOf(r);if(-1===l)switch(n.type){case 1:{const d=function vu(n,r){const l=bc(r)(parseInt(n,10)),d=vm[l];return void 0!==d?d:"other"}(r,function xv(){return Yy}());l=n.cases.indexOf(d),-1===l&&"other"!==d&&(l=n.cases.indexOf("other"));break}case 0:l=n.cases.indexOf("other")}return-1===l?null:l}(r,d);if(C_(r,l)!==g&&(t(n,r,l),l[r.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const I=l[r.anchorIdx];I&&hy(n,r.create[g],l,I)}}function t(n,r,l){let d=C_(r,l);if(null!==d){const g=r.remove[d];for(let v=0;v<g.length;v++){const I=g[v];if(I>0){const x=fo(I,l);null!==x&&fh(l[11],x)}else t(n,vf(n,~I),l)}}}function f(){const n=[];let l,d,r=-1;function v(x,V){r=0;const X=C_(x,V);d=null!==X?x.remove[X]:Vn}function I(){if(r<d.length){const x=d[r++];return x>0?l[x]:(n.push(r,d),v(l[1].data[~x],l),I())}return 0===n.length?null:(d=n.pop(),r=n.pop(),I())}return function g(x,V){for(l=V;n.length;)n.pop();return v(x.value,V),I}}const me=/\ufffd(\d+):?\d*\ufffd/gi,It=/\ufffd(\d+)\ufffd/,Jt=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Yn=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,vr=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Do=/\uE500/g;function Ea(n,r,l,d,g,v,I){const x=kf(n,d,1,null);let V=x<<ea.SHIFT,X=W();r===X&&(X=null),null===X&&(V|=ea.APPEND_EAGERLY),I&&(V|=ea.COMMENT,function Kl(n){void 0===Dl&&(Dl=n())}(f)),g.push(V,null===v?"":v);const he=Hp(n,x,I?32:1,null===v?"":v,null);Jy(l,he);const Ie=he.index;return j(he,!1),null!==X&&r!==X&&function kv(n,r){let l=n.insertBeforeIndex;null===l?(nd(Fh,Qy),l=n.insertBeforeIndex=[null,r]):(function bt(n,r,l){n!=r&&ge(l,n,r,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(r))}(X,Ie),he}function ks(n,r,l,d,g,v,I){const x=I.match(me),V=Ea(n,r,l,v,d,x?null:I,!1);x&&Da(g,I,V.index,null,0,null)}function Da(n,r,l,d,g,v){const I=n.length,x=I+1;n.push(null,null);const V=I+2,X=r.split(me);let he=0;for(let Ie=0;Ie<X.length;Ie++){const at=X[Ie];if(1&Ie){const St=g+parseInt(at,10);n.push(-1-St),he|=O0(St)}else""!==at&&n.push(at)}return n.push(l<<2|(d?1:0)),d&&n.push(d,v),n[I]=he,n[x]=n.length-V,he}function O0(n){return 1<<Math.min(n,31)}function x0(n){let r,v,l="",d=0,g=!1;for(;null!==(r=Yn.exec(n));)g?r[0]===`\ufffd/*${v}\ufffd`&&(d=r.index,g=!1):(l+=n.substring(d,r.index+r[0].length),v=r[1],g=!0);return l+=n.slice(d),l}function P0(n,r,l,d,g,v){let I=0;const x={type:g.type,currentCaseLViewIndex:kf(n,r,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function Iw(n,r,l){n.push(O0(r.mainBinding),2,-1-r.mainBinding,l<<2|2)})(l,g,v),function tv(n,r,l){const d=n.data[r];null===d?n.data[r]=l:d.value=l}(n,v,x);const V=g.values;for(let X=0;X<V.length;X++){const he=V[X],Ie=[];for(let at=0;at<he.length;at++){const St=he[at];if("string"!=typeof St){const Qt=Ie.push(St)-1;he[at]=`\x3c!--\ufffd${Qt}\ufffd--\x3e`}}I=Tw(n,x,r,l,d,g.cases[X],he.join(""),Ie)|I}I&&function Sw(n,r,l){n.push(r,1,l<<2|3)}(l,I,v)}function Dw(n){const r=[],l=[];let d=1,g=0;const v=Vv(n=n.replace(Jt,function(I,x,V){return d="select"===V?0:1,g=parseInt(x.slice(1),10),""}));for(let I=0;I<v.length;){let x=v[I++].trim();1===d&&(x=x.replace(/\s*(?:=)?(\w+)\s*/,"$1")),x.length&&r.push(x);const V=Vv(v[I++]);r.length>l.length&&l.push(V)}return{type:d,mainBinding:g,cases:r,values:l}}function Vv(n){if(!n)return[];let r=0;const l=[],d=[],g=/[{}]/g;let v;for(g.lastIndex=0;v=g.exec(n);){const x=v.index;if("}"==v[0]){if(l.pop(),0==l.length){const V=n.substring(r,x);Jt.test(V)?d.push(Dw(V)):d.push(V),r=x+1}}else{if(0==l.length){const V=n.substring(r,x);d.push(V),r=x+1}l.push("{")}}const I=n.substring(r);return d.push(I),d}function Tw(n,r,l,d,g,v,I,x){const V=[],X=[],he=[];r.cases.push(v),r.create.push(V),r.remove.push(X),r.update.push(he);const at=mo(Tf()).getInertBodyElement(I),St=cp(at)||at;return St?k0(n,r,l,d,V,X,he,St,g,x,0):0}function k0(n,r,l,d,g,v,I,x,V,X,he){let Ie=0,at=x.firstChild;for(;at;){const St=kf(n,l,1,null);switch(at.nodeType){case Node.ELEMENT_NODE:const Qt=at,An=Qt.tagName.toLowerCase();if(vh.hasOwnProperty(An)){Uv(g,kh,An,V,St),n.data[St]=An;const dn=Qt.attributes;for(let ri=0;ri<dn.length;ri++){const _o=dn.item(ri),La=_o.name.toLowerCase();_o.value.match(me)?Dg.hasOwnProperty(La)&&Da(I,_o.value,St,_o.name,0,lp[La]?Rc:null):Aw(g,St,_o)}Ie=k0(n,r,l,d,g,v,I,at,St,X,he+1)|Ie,F0(v,St,he)}break;case Node.TEXT_NODE:const $n=at.textContent||"",mr=$n.match(me);Uv(g,null,mr?"":$n,V,St),F0(v,St,he),mr&&(Ie=Da(I,$n,St,null,0,null)|Ie);break;case Node.COMMENT_NODE:const jr=It.exec(at.textContent||"");if(jr){const ri=X[parseInt(jr[1],10)];Uv(g,rh,"",V,St),P0(n,l,d,V,ri,St),Cw(v,St,he)}}at=at.nextSibling}return Ie}function F0(n,r,l){0===l&&n.push(r)}function Cw(n,r,l){0===l&&(n.push(~r),n.push(r))}function Uv(n,r,l,d,g){null!==r&&n.push(r),n.push(l,g,function Fv(n,r,l){return n|r<<17|l<<1}(0,d,g))}function Aw(n,r,l){n.push(r<<1|1,l.name,l.value)}function B0(n,r,l=-1){const d=gr(),g=Yt(),v=22+n,I=Ji(d.consts,r),x=W();d.firstCreatePass&&function Ns(n,r,l,d,g,v){const I=W(),x=[],V=[],X=[[]];g=function Ew(n,r){if(function ww(n){return-1===n}(r))return x0(n);{const l=n.indexOf(`:${r}\ufffd`)+2+r.toString().length,d=n.search(new RegExp(`\ufffd\\/\\*\\d+:${r}\ufffd`));return x0(n.substring(l,d))}}(g,v);const he=function ta(n){return n.replace(Do," ")}(g).split(vr);for(let Ie=0;Ie<he.length;Ie++){let at=he[Ie];if(0==(1&Ie)){const St=Vv(at);for(let Qt=0;Qt<St.length;Qt++){let An=St[Qt];if(0==(1&Qt)){const $n=An;""!==$n&&ks(n,I,X[0],x,V,l,$n)}else{const $n=An;if("object"!=typeof $n)throw new Error(`Unable to parse ICU expression in "${g}" message.`);P0(n,l,V,r,$n,Ea(n,I,X[0],l,x,"",!0).index)}}}else{const St=47===at.charCodeAt(0),An=(at.charCodeAt(St?1:0),22+Number.parseInt(at.substring(St?2:1)));if(St)X.shift(),j(W(),!1);else{const $n=ly(n,X[0],An);X.unshift([]),j($n,!0)}}}n.data[d]={create:x,update:V}}(d,null===x?0:x.index,g,v,I,l);const V=d.data[v],he=Sd(d,x===g[6]?null:x,g);(function nv(n,r,l,d){const g=n[11];for(let v=0;v<r.length;v++){const I=r[v++],x=r[v],V=(I&ea.COMMENT)===ea.COMMENT,X=(I&ea.APPEND_EAGERLY)===ea.APPEND_EAGERLY,he=I>>>ea.SHIFT;let Ie=n[he];null===Ie&&(Ie=n[he]=V?g.createComment(x):Ou(g,x)),X&&null!==l&&Ic(g,l,Ie,d,!1)}})(g,V.create,he,x&&8&x.type?g[x.index]:null),qn(!0)}function U0(n,r,l){B0(n,r,l),function V0(){qn(!1)}()}function Hv(n){return function Lv(n){n&&(dg|=1<<Math.min(hg,31)),hg++}(ba(Yt(),Bn(),n)),Hv}function H0(n){!function Bv(n,r,l){if(hg>0){const d=n.data[l];rv(n,r,Array.isArray(d)?d:d.update,Tt()-hg-1,dg)}dg=0,hg=0}(gr(),Yt(),n+22)}function jv(n,r,l,d,g){if(n=He(n),Array.isArray(n))for(let v=0;v<n.length;v++)jv(n[v],r,l,d,g);else{const v=gr(),I=Yt();let x=Jn(n)?n:He(n.provide),V=Yo(n);const X=rs(),he=1048575&X.providerIndexes,Ie=X.directiveStart,at=X.providerIndexes>>20;if(Jn(n)||!n.multi){const St=new os(V,g,Fc),Qt=Gv(x,r,g?he:he+at,Ie);-1===Qt?(Cs(on(X,I),v,x),$v(v,n,r.length),r.push(x),X.directiveStart++,X.directiveEnd++,g&&(X.providerIndexes+=1048576),l.push(St),I.push(St)):(l[Qt]=St,I[Qt]=St)}else{const St=Gv(x,r,he+at,Ie),Qt=Gv(x,r,he,he+at),An=St>=0&&l[St],$n=Qt>=0&&l[Qt];if(g&&!$n||!g&&!An){Cs(on(X,I),v,x);const mr=function jw(n,r,l,d,g){const v=new os(n,l,Fc);return v.multi=[],v.index=r,v.componentProviders=0,j0(v,g,d&&!l),v}(g?Hw:Uw,l.length,g,d,V);!g&&$n&&(l[Qt].providerFactory=mr),$v(v,n,r.length,0),r.push(x),X.directiveStart++,X.directiveEnd++,g&&(X.providerIndexes+=1048576),l.push(mr),I.push(mr)}else $v(v,n,St>-1?St:Qt,j0(l[g?Qt:St],V,!g&&d));!g&&d&&$n&&l[Qt].componentProviders++}}}function $v(n,r,l,d){const g=Jn(r),v=function Li(n){return!!n.useClass}(r);if(g||v){const V=(v?He(r.useClass):r).prototype.ngOnDestroy;if(V){const X=n.destroyHooks||(n.destroyHooks=[]);if(!g&&r.multi){const he=X.indexOf(l);-1===he?X.push(l,[d,V]):X[he+1].push(d,V)}else X.push(l,V)}}}function j0(n,r,l){return l&&n.componentProviders++,n.multi.push(r)-1}function Gv(n,r,l,d){for(let g=l;g<d;g++)if(r[g]===n)return g;return-1}function Uw(n,r,l,d){return Wv(this.multi,[])}function Hw(n,r,l,d){const g=this.multi;let v;if(this.providerFactory){const I=this.providerFactory.componentProviders,x=Wo(l,l[1],this.providerFactory.index,d);v=x.slice(0,I),Wv(g,v);for(let V=I;V<x.length;V++)v.push(x[V])}else v=[],Wv(g,v);return v}function Wv(n,r){for(let l=0;l<n.length;l++)r.push((0,n[l])());return r}function $0(n,r=[]){return l=>{l.providersResolver=(d,g)=>function Vw(n,r,l){const d=gr();if(d.firstCreatePass){const g=Gi(n);jv(l,d.data,d.blueprint,g,!0),jv(r,d.data,d.blueprint,g,!1)}}(d,g?g(n):n,r)}}class I_{}class G0{}function $w(n,r){return new W0(n,r??null)}class W0 extends I_{constructor(r,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ll(this);const d=bn(r);this._bootstrapComponents=tu(d.bootstrap),this._r3Injector=yp(r,l,[{provide:I_,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],ke(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class zv extends G0{constructor(r){super(),this.moduleType=r}create(r){return new W0(this.moduleType,r)}}class Gw extends I_{constructor(r,l,d){super(),this.componentFactoryResolver=new Ll(this),this.instance=null;const g=new Bi([...r,{provide:I_,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],l||xs(),d,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Kv(n,r,l=null){return new Gw(n,r,l).injector}let Ww=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=z(0,l.type),g=d.length>0?Kv([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,g)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Qe({token:n,providedIn:"environment",factory:()=>new n(Zs(vi))}),n})();function z0(n){n.getStandaloneInjector=r=>r.get(Ww).getOrCreateStandaloneInjector(n)}function X0(n,r,l,d){return nb(Yt(),je(),n,r,l,d)}function eb(n,r,l,d,g){return rb(Yt(),je(),n,r,l,d,g)}function tb(n,r,l,d,g,v){return function ib(n,r,l,d,g,v,I,x){const V=r+l;return function hf(n,r,l,d,g){const v=pc(n,r,l,d);return ba(n,r+2,g)||v}(n,V,g,v,I)?ju(n,V+3,x?d.call(x,g,v,I):d(g,v,I)):fy(n,V+3)}(Yt(),je(),n,r,l,d,g,v)}function fy(n,r){const l=n[r];return l===ni?void 0:l}function nb(n,r,l,d,g,v){const I=r+l;return ba(n,I,g)?ju(n,I+1,v?d.call(v,g):d(g)):fy(n,I+1)}function rb(n,r,l,d,g,v,I){const x=r+l;return pc(n,x,g,v)?ju(n,x+2,I?d.call(I,g,v):d(g,v)):fy(n,x+2)}function ab(n,r){const l=gr();let d;const g=n+22;l.firstCreatePass?(d=function aE(n,r){if(r)for(let l=r.length-1;l>=0;l--){const d=r[l];if(n===d.name)return d}}(r,l.pipeRegistry),l.data[g]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(g,d.onDestroy)):d=l.data[g];const v=d.factory||(d.factory=Xn(d.type)),I=ur(Fc);try{const x=rn(!1),V=v();return rn(x),function T(n,r,l,d){l>=n.data.length&&(n.data[l]=null,n.blueprint[l]=null),r[l]=d}(l,Yt(),g,V),V}finally{ur(I)}}function lb(n,r,l){const d=n+22,g=Yt(),v=Po(g,d);return py(g,d)?nb(g,je(),r,v.transform,l,v):v.transform(l)}function ub(n,r,l,d){const g=n+22,v=Yt(),I=Po(v,g);return py(v,g)?rb(v,je(),r,I.transform,l,d,I):I.transform(l,d)}function py(n,r){return n[1].data[r].pure}function Yv(n){return r=>{setTimeout(n,void 0,r)}}const bf=class dE extends u.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,l,d){let g=r,v=l||(()=>null),I=d;if(r&&"object"==typeof r){const V=r;g=V.next?.bind(V),v=V.error?.bind(V),I=V.complete?.bind(V)}this.__isAsync&&(v=Yv(v),g&&(g=Yv(g)),I&&(I=Yv(I)));const x=super.subscribe({next:g,error:v,complete:I});return r instanceof L.w0&&r.add(x),x}};function hE(){return this._results[Ah()]()}class Zv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ah(),d=Zv.prototype;d[l]||(d[l]=hE)}get changes(){return this._changes||(this._changes=new bf)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,l){return this._results.reduce(r,l)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,l){const d=this;d.dirty=!1;const g=Os(r);(this._changesDetected=!function Yu(n,r,l){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let g=n[d],v=r[d];if(l&&(g=l(g),v=l(v)),v!==g)return!1}return!0}(d._results,g,l))&&(d._results=g,d.length=g.length,d.last=g[this.length-1],d.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gy=(()=>{class n{}return n.__NG_ELEMENT_ID__=gE,n})();const fE=gy,pE=class extends fE{constructor(r,l,d){super(),this._declarationLView=r,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(r,l){const d=this._declarationTContainer.tViews,g=sf(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,l||null);g[17]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[19];return null!==I&&(g[19]=I.createEmbeddedView(d)),Yg(d,g,r),new qd(g)}};function gE(){return iv(rs(),Yt())}function iv(n,r){return 4&n.type?new pE(r,n,ds(n,r)):null}let sv=(()=>{class n{}return n.__NG_ELEMENT_ID__=mE,n})();function mE(){return hb(rs(),Yt())}const _E=sv,cb=class extends _E{constructor(r,l,d){super(),this._lContainer=r,this._hostTNode=l,this._hostLView=d}get element(){return ds(this._hostTNode,this._hostLView)}get injector(){return new Zo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ii(this._hostTNode,this._hostLView);if(io(r)){const l=ga(r,this._hostLView),d=Ts(r);return new Zo(l[1].data[d+8],l)}return new Zo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const l=db(this._lContainer);return null!==l&&l[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,l,d){let g,v;"number"==typeof d?g=d:null!=d&&(g=d.index,v=d.injector);const I=r.createEmbeddedView(l||{},v);return this.insert(I,g),I}createComponent(r,l,d,g,v){const I=r&&!function hl(n){return"function"==typeof n}(r);let x;if(I)x=l;else{const Ie=l||{};x=Ie.index,d=Ie.injector,g=Ie.projectableNodes,v=Ie.environmentInjector||Ie.ngModuleRef}const V=I?r:new Mi(se(r)),X=d||this.parentInjector;if(!v&&null==V.ngModule){const at=(I?X:this.parentInjector).get(vi,null);at&&(v=at)}const he=V.create(X,g,void 0,v);return this.insert(he.hostView,x),he}insert(r,l){const d=r._lView,g=d[1];if(function Ds(n){return Vs(n[3])}(d)){const he=this.indexOf(r);if(-1!==he)this.detach(he);else{const Ie=d[3],at=new cb(Ie,Ie[6],Ie[3]);at.detach(at.indexOf(r))}}const v=this._adjustIndex(l),I=this._lContainer;!function Ef(n,r,l,d){const g=10+d,v=l.length;d>0&&(l[g-1][4]=r),d<v-10?(r[4]=l[g],$l(l,10+d,r)):(l.push(r),r[4]=null),r[3]=l;const I=r[17];null!==I&&l!==I&&function Bo(n,r){const l=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===l?n[9]=[r]:l.push(r)}(I,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=64}(g,d,I,v);const x=hh(v,I),V=d[11],X=Za(V,I[7]);return null!==X&&function Id(n,r,l,d,g,v){d[0]=g,d[6]=r,ph(n,d,l,1,g,v)}(g,I[6],V,d,X,x),r.attachToViewContainerRef(),$l(Qv(I),v,r),r}move(r,l){return this.insert(r,l)}indexOf(r){const l=db(this._lContainer);return null!==l?l.indexOf(r):-1}remove(r){const l=this._adjustIndex(r,-1),d=tc(this._lContainer,l);d&&(xa(Qv(this._lContainer),l),dh(d[1],d))}detach(r){const l=this._adjustIndex(r,-1),d=tc(this._lContainer,l);return d&&null!=xa(Qv(this._lContainer),l)?new qd(d):null}_adjustIndex(r,l=0){return r??this.length+l}};function db(n){return n[8]}function Qv(n){return n[8]||(n[8]=[])}function hb(n,r){let l;const d=r[n.index];if(Vs(d))l=d;else{let g;if(8&n.type)g=zr(d);else{const v=r[11];g=v.createComment("");const I=ls(n,r);Ic(v,Za(v,I),g,function Jr(n,r){return n.nextSibling(r)}(v,I),!1)}r[n.index]=l=qp(d,r,g,n),Gf(r,l)}return new cb(l,n,r)}class Jv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const l=r.queries;if(null!==l){const d=null!==r.contentQueries?r.contentQueries[0]:l.length,g=[];for(let v=0;v<d;v++){const I=l.getByIndex(v);g.push(this.queries[I.indexInDeclarationView].clone())}return new Xv(g)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let l=0;l<this.queries.length;l++)null!==wb(r,l).matches&&this.queries[l].setDirty()}}class fb{constructor(r,l,d=null){this.predicate=r,this.flags=l,this.read=d}}class e0{constructor(r=[]){this.queries=r}elementStart(r,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,l)}elementEnd(r){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(r)}embeddedTView(r){let l=null;for(let d=0;d<this.length;d++){const g=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(r,g);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new e0(l):null}template(r,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,l)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class t0{constructor(r,l=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(r,l){this.isApplyingToNode(l)&&this.matchTNode(r,l)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,l){this.elementStart(r,l)}embeddedTView(r,l){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,l),new t0(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let g=0;g<d.length;g++){const v=d[g];this.matchTNodeWithReadOption(r,l,bE(l,v)),this.matchTNodeWithReadOption(r,l,Hl(l,r,v,!1,!1))}else d===gy?4&l.type&&this.matchTNodeWithReadOption(r,l,-1):this.matchTNodeWithReadOption(r,l,Hl(l,r,d,!1,!1))}matchTNodeWithReadOption(r,l,d){if(null!==d){const g=this.metadata.read;if(null!==g)if(g===eu||g===sv||g===gy&&4&l.type)this.addMatch(l.index,-2);else{const v=Hl(l,r,g,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(r,l){null===this.matches?this.matches=[r,l]:this.matches.push(r,l)}}function bE(n,r){const l=n.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===r)return l[d+1];return null}function EE(n,r,l,d){return-1===l?function wE(n,r){return 11&n.type?ds(n,r):4&n.type?iv(n,r):null}(r,n):-2===l?function DE(n,r,l){return l===eu?ds(r,n):l===gy?iv(r,n):l===sv?hb(r,n):void 0}(n,r,d):Wo(n,n[1],l,r)}function pb(n,r,l,d){const g=r[19].queries[d];if(null===g.matches){const v=n.data,I=l.matches,x=[];for(let V=0;V<I.length;V+=2){const X=I[V];x.push(X<0?null:EE(r,v[X],I[V+1],l.metadata.read))}g.matches=x}return g.matches}function n0(n,r,l,d){const g=n.queries.getByIndex(l),v=g.matches;if(null!==v){const I=pb(n,r,g,l);for(let x=0;x<v.length;x+=2){const V=v[x];if(V>0)d.push(I[x/2]);else{const X=v[x+1],he=r[-V];for(let Ie=10;Ie<he.length;Ie++){const at=he[Ie];at[17]===at[3]&&n0(at[1],at,X,d)}if(null!==he[9]){const Ie=he[9];for(let at=0;at<Ie.length;at++){const St=Ie[at];n0(St[1],St,X,d)}}}}}return d}function gb(n){const r=Yt(),l=gr(),d=is();qr(d+1);const g=wb(l,d);if(n.dirty&&function Ho(n){return 4==(4&n[2])}(r)===(2==(2&g.metadata.flags))){if(null===g.matches)n.reset([]);else{const v=g.crossesNgTemplate?n0(l,r,d,[]):pb(l,r,g,d);n.reset(v,Oc),n.notifyOnChanges()}return!0}return!1}function mb(n,r,l){const d=gr();d.firstCreatePass&&(bb(d,new fb(n,r,l),-1),2==(2&r)&&(d.staticViewQueries=!0)),vb(d,Yt(),r)}function _b(n,r,l,d){const g=gr();if(g.firstCreatePass){const v=rs();bb(g,new fb(r,l,d),v.index),function CE(n,r){const l=n.contentQueries||(n.contentQueries=[]);r!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,r)}(g,n),2==(2&l)&&(g.staticContentQueries=!0)}vb(g,Yt(),l)}function yb(){return function TE(n,r){return n[19].queries[r].queryList}(Yt(),is())}function vb(n,r,l){const d=new Zv(4==(4&l));Xg(n,r,d,d.destroy),null===r[19]&&(r[19]=new Xv),r[19].queries.push(new Jv(d))}function bb(n,r,l){null===n.queries&&(n.queries=new e0),n.queries.track(new t0(r,l))}function wb(n,r){return n.queries.getByIndex(r)}function Eb(n,r){return iv(n,r)}function av(...n){}const Hb=new Pi("Application Initializer");let lv=(()=>{class n{constructor(l){this.appInits=l,this.resolve=av,this.reject=av,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,g)=>{this.resolve=d,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const v=this.appInits[g]();if(bi(v))l.push(v);else if(wa(v)){const I=new Promise((x,V)=>{v.subscribe({complete:x,error:V})});l.push(I)}}Promise.all(l).then(()=>{d()}).catch(g=>{this.reject(g)}),0===l.length&&d(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(Zs(Hb,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jb=new Pi("AppId",{providedIn:"root",factory:function $b(){return`${l0()}${l0()}${l0()}`}});function l0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gb=new Pi("Platform Initializer"),WE=new Pi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wb=new Pi("appBootstrapListener"),zE=new Pi("AnimationModuleType");let KE=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const uv=new Pi("LocaleId",{providedIn:"root",factory:()=>H(uv,un.Optional|un.SkipSelf)||function qE(){return typeof $localize<"u"&&$localize.locale||ug}()}),YE=new Pi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZE{constructor(r,l){this.ngModuleFactory=r,this.componentFactories=l}}let QE=(()=>{class n{compileModuleSync(l){return new zv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),v=tu(bn(l).declarations).reduce((I,x)=>{const V=se(x);return V&&I.push(new Mi(V)),I},[]);return new ZE(d,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eD=(()=>Promise.resolve(0))();function u0(n){typeof Zone>"u"?eD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ih{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bf(!1),this.onMicrotaskEmpty=new bf(!1),this.onStable=new bf(!1),this.onError=new bf(!1),typeof Zone>"u")throw new lt(908,!1);Zone.assertZonePatched();const g=this;if(g._nesting=0,g._outer=g._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;g._inner=g._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!d&&l,g.shouldCoalesceRunChangeDetection=d,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function tD(){let n=kn.requestAnimationFrame,r=kn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function iD(n){const r=()=>{!function rD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,d0(n),n.isCheckStableRunning=!0,c0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),d0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,g,v,I,x)=>{try{return qb(n),l.invokeTask(g,v,I,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),Yb(n)}},onInvoke:(l,d,g,v,I,x,V)=>{try{return qb(n),l.invoke(g,v,I,x,V)}finally{n.shouldCoalesceRunChangeDetection&&r(),Yb(n)}},onHasTask:(l,d,g,v)=>{l.hasTask(g,v),d===g&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,d0(n),c0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,g,v)=>(l.handleError(g,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ih.isInAngularZone())throw new lt(909,!1)}static assertNotInAngularZone(){if(ih.isInAngularZone())throw new lt(909,!1)}run(r,l,d){return this._inner.run(r,l,d)}runTask(r,l,d,g){const v=this._inner,I=v.scheduleEventTask("NgZoneEvent: "+g,r,nD,av,av);try{return v.runTask(I,l,d)}finally{v.cancelTask(I)}}runGuarded(r,l,d){return this._inner.runGuarded(r,l,d)}runOutsideAngular(r){return this._outer.run(r)}}const nD={};function c0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function d0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function qb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Yb(n){n._nesting--,c0(n)}class sD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bf,this.onMicrotaskEmpty=new bf,this.onStable=new bf,this.onError=new bf}run(r,l,d){return r.apply(l,d)}runGuarded(r,l,d){return r.apply(l,d)}runOutsideAngular(r){return r()}runTask(r,l,d,g){return r.apply(l,d)}}const Zb=new Pi(""),Qb=new Pi("");let h0,oD=(()=>{class n{constructor(l,d,g){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,h0||(function aD(n){h0=n}(g),g.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ih.assertNotInAngularZone(),u0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())u0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,g){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:g})}whenStable(l,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,g){return[]}}return n.\u0275fac=function(l){return new(l||n)(Zs(ih),Zs(Jb),Zs(Qb))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),Jb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return h0?.findTestabilityInTree(this,l,d)??null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),fg=null;const Xb=new Pi("AllowMultipleToken"),f0=new Pi("PlatformDestroyListeners");class cD{constructor(r,l){this.name=r,this.token=l}}function tw(n,r,l=[]){const d=`Platform: ${r}`,g=new Pi(d);return(v=[])=>{let I=p0();if(!I||I.injector.get(Xb,!1)){const x=[...l,...v,{provide:g,useValue:!0}];n?n(x):function dD(n){if(fg&&!fg.get(Xb,!1))throw new lt(400,!1);fg=n;const r=n.get(rw);(function ew(n){const r=n.get(Gb,null);r&&r.forEach(l=>l())})(n)}(function nw(n=[],r){return Pc.create({name:r,providers:[{provide:yr,useValue:"platform"},{provide:f0,useValue:new Set([()=>fg=null])},...n]})}(x,d))}return function fD(n){const r=p0();if(!r)throw new lt(401,!1);return r}()}}function p0(){return fg?.get(rw)??null}let rw=(()=>{class n{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const g=function sw(n,r){let l;return l="noop"===n?new sD:("zone.js"===n?void 0:n)||new ih(r),l}(d?.ngZone,function iw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),v=[{provide:ih,useValue:g}];return g.run(()=>{const I=Pc.create({providers:v,parent:this.injector,name:l.moduleType.name}),x=l.create(I),V=x.injector.get(Ld,null);if(!V)throw new lt(402,!1);return g.runOutsideAngular(()=>{const X=g.onError.subscribe({next:he=>{V.handleError(he)}});x.onDestroy(()=>{dv(this._modules,x),X.unsubscribe()})}),function ow(n,r,l){try{const d=l();return bi(d)?d.catch(g=>{throw r.runOutsideAngular(()=>n.handleError(g)),g}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(V,g,()=>{const X=x.injector.get(lv);return X.runInitializers(),X.donePromise.then(()=>(Zy(x.injector.get(uv,ug)||ug),this._moduleDoBootstrap(x),x))})})}bootstrapModule(l,d=[]){const g=aw({},d);return function lD(n,r,l){const d=new zv(l);return Promise.resolve(d)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,g))}_moduleDoBootstrap(l){const d=l.injector.get(cv);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new lt(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new lt(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(f0,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(l){return new(l||n)(Zs(Pc))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function aw(n,r){return Array.isArray(r)?r.reduce(aw,n):{...n,...r}}let cv=(()=>{class n{constructor(l,d,g){this._zone=l,this._injector=d,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new ee.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),I=new ee.y(x=>{let V;this._zone.runOutsideAngular(()=>{V=this._zone.onStable.subscribe(()=>{ih.assertNotInAngularZone(),u0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{ih.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{V.unsubscribe(),X.unsubscribe()}});this.isStable=(0,Se.T)(v,I.pipe((0,Oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const g=l instanceof Jl;if(!this._injector.get(lv).done)throw!g&&qt(l),new lt(405,false);let I;I=g?l:this._injector.get(mu).resolveComponentFactory(l),this.componentTypes.push(I.componentType);const x=function uD(n){return n.isBoundToModule}(I)?void 0:this._injector.get(I_),X=I.create(Pc.NULL,[],d||I.selector,x),he=X.location.nativeElement,Ie=X.injector.get(Zb,null);return Ie?.registerApplication(he),X.onDestroy(()=>{this.detachView(X.hostView),dv(this.components,X),Ie?.unregisterApplication(he)}),this._loadComponent(X),X}tick(){if(this._runningTick)throw new lt(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;dv(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Wb,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>dv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new lt(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(l){return new(l||n)(Zs(ih),Zs(vi),Zs(Ld))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dv(n,r){const l=n.indexOf(r);l>-1&&n.splice(l,1)}let uw=!0,cw=!1;function gD(){return cw=!0,uw}function mD(){if(cw)throw new Error("Cannot enable prod mode after platform setup.");uw=!1}let _D=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,l){if(zs(n)&&!l){const d=Kr(n.index,r);return new qd(d,d)}return 47&n.type?new qd(r[16],r):null}(rs(),Yt(),16==(16&n))}class pw{constructor(){}supports(r){return Jf(r)}create(r){return new CD(r)}}const TD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||TD}forEachItem(r){let l;for(l=this._itHead;null!==l;l=l._next)r(l)}forEachOperation(r){let l=this._itHead,d=this._removalsHead,g=0,v=null;for(;l||d;){const I=!d||l&&l.currentIndex<mw(d,g,v)?l:d,x=mw(I,g,v),V=I.currentIndex;if(I===d)g--,d=d._nextRemoved;else if(l=l._next,null==I.previousIndex)g++;else{v||(v=[]);const X=x-g,he=V-g;if(X!=he){for(let at=0;at<X;at++){const St=at<v.length?v[at]:v[at]=0,Qt=St+at;he<=Qt&&Qt<X&&(v[at]=St+1)}v[I.previousIndex]=he-X}}x!==V&&r(I,x,V)}}forEachPreviousItem(r){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)r(l)}forEachAddedItem(r){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)r(l)}forEachMovedItem(r){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)r(l)}forEachRemovedItem(r){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)r(l)}forEachIdentityChange(r){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)r(l)}diff(r){if(null==r&&(r=[]),!Jf(r))throw new lt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let g,v,I,l=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)v=r[x],I=this._trackByFn(x,v),null!==l&&Object.is(l.trackById,I)?(d&&(l=this._verifyReinsertion(l,v,I,x)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,I,x),d=!0),l=l._next}else g=0,function a_(n,r){if(Array.isArray(n))for(let l=0;l<n.length;l++)r(n[l]);else{const l=n[Ah()]();let d;for(;!(d=l.next()).done;)r(d.value)}}(r,x=>{I=this._trackByFn(g,x),null!==l&&Object.is(l.trackById,I)?(d&&(l=this._verifyReinsertion(l,x,I,g)),Object.is(l.item,x)||this._addIdentityChange(l,x)):(l=this._mismatch(l,x,I,g),d=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,l,d,g){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,l)||this._addIdentityChange(r,l),this._reinsertAfter(r,v,g)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,g))?(Object.is(r.item,l)||this._addIdentityChange(r,l),this._moveAfter(r,v,g)):r=this._addAfter(new ID(l,d),v,g),r}_verifyReinsertion(r,l,d,g){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?r=this._reinsertAfter(v,r._prev,g):r.currentIndex!=g&&(r.currentIndex=g,this._addToMoves(r,g)),r}_truncate(r){for(;null!==r;){const l=r._next;this._addToRemovals(this._unlink(r)),r=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const g=r._prevRemoved,v=r._nextRemoved;return null===g?this._removalsHead=v:g._nextRemoved=v,null===v?this._removalsTail=g:v._prevRemoved=g,this._insertAfter(r,l,d),this._addToMoves(r,d),r}_moveAfter(r,l,d){return this._unlink(r),this._insertAfter(r,l,d),this._addToMoves(r,d),r}_addAfter(r,l,d){return this._insertAfter(r,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,l,d){const g=null===l?this._itHead:l._next;return r._next=g,r._prev=l,null===g?this._itTail=r:g._prev=r,null===l?this._itHead=r:l._next=r,null===this._linkedRecords&&(this._linkedRecords=new gw),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const l=r._prev,d=r._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,r}_addToMoves(r,l){return r.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,l){return r.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ID{constructor(r,l){this.item=r,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const l=r._prevDup,d=r._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class gw{constructor(){this.map=new Map}put(r){const l=r.trackById;let d=this.map.get(l);d||(d=new SD,this.map.set(l,d)),d.add(r)}get(r,l){const g=this.map.get(r);return g?g.get(r,l):null}remove(r){const l=r.trackById;return this.map.get(l).remove(r)&&this.map.delete(l),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mw(n,r,l){const d=n.previousIndex;if(null===d)return d;let g=0;return l&&d<l.length&&(g=l[d]),d+r+g}class _w{constructor(){}supports(r){return r instanceof Map||Xf(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let l;for(l=this._mapHead;null!==l;l=l._next)r(l)}forEachPreviousItem(r){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)r(l)}forEachChangedItem(r){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)r(l)}forEachAddedItem(r){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)r(l)}forEachRemovedItem(r){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)r(l)}diff(r){if(r){if(!(r instanceof Map||Xf(r)))throw new lt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(g,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,l){if(r){const d=r._prev;return l._next=r,l._prev=d,r._prev=l,d&&(d._next=l),r===this._mapHead&&(this._mapHead=l),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(r,l){if(this._records.has(r)){const g=this._records.get(r);this._maybeAddToChanges(g,l);const v=g._prev,I=g._next;return v&&(v._next=I),I&&(I._prev=v),g._next=null,g._prev=null,g}const d=new ND(r);return this._records.set(r,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,l){Object.is(l,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=l,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,l){r instanceof Map?r.forEach(l):Object.keys(r).forEach(d=>l(r[d],d))}}class ND{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yw(){return new v0([new pw])}let v0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(null!=d){const g=d.factories.slice();l=l.concat(g)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||yw()),deps:[[n,new rr,new On]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(null!=d)return d;throw new lt(901,!1)}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:yw}),n})();function vw(){return new b0([new _w])}let b0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(d){const g=d.factories.slice();l=l.concat(g)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||vw()),deps:[[n,new rr,new On]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new lt(901,!1)}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:vw}),n})();const OD=tw(null,"core",[]);let xD=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(Zs(cv))},n.\u0275mod=tr({type:n}),n.\u0275inj=st({}),n})();function PD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FD(n,r){const l=se(n),d=r.elementInjector||xs();return new Mi(l).create(d,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(hn,dt,B)=>{B.d(dt,{Cf:()=>ut,EJ:()=>Hs,Fj:()=>mt,JJ:()=>un,JL:()=>Rr,JU:()=>ke,Kr:()=>Ui,NI:()=>$i,Oe:()=>ro,On:()=>ra,UX:()=>po,YN:()=>To,_:()=>cn,_Y:()=>Qi,cw:()=>se,kI:()=>gt,sg:()=>Vi,u:()=>fs,u5:()=>_l,wV:()=>ns});var u=B(4650),L=B(6895),ee=B(8996),Se=B(4128),Oe=B(4004);let Me=(()=>{class Q{constructor(j,ue){this._renderer=j,this._elementRef=ue,this.onChange=Pt=>{},this.onTouched=()=>{}}setProperty(j,ue){this._renderer.setProperty(this._elementRef.nativeElement,j,ue)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(u.Qsj),u.Y36(u.SBq))},Q.\u0275dir=u.lG2({type:Q}),Q})(),We=(()=>{class Q extends Me{}return Q.\u0275fac=function(){let W;return function(ue){return(W||(W=u.n5z(Q)))(ue||Q)}}(),Q.\u0275dir=u.lG2({type:Q,features:[u.qOj]}),Q})();const ke=new u.OlP("NgValueAccessor"),ye={provide:ke,useExisting:(0,u.Gpc)(()=>mt),multi:!0},Nt=new u.OlP("CompositionEventMode");let mt=(()=>{class Q extends Me{constructor(j,ue,Pt){super(j,ue),this._compositionMode=Pt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function He(){const Q=(0,L.q)()?(0,L.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Nt,8))},Q.\u0275dir=u.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,ue){1&j&&u.NdJ("input",function(Z){return ue._handleInput(Z.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Z){return ue._compositionEnd(Z.target.value)})},features:[u._Bn([ye]),u.qOj]}),Q})();function xt(Q){return null==Q||("string"==typeof Q||Array.isArray(Q))&&0===Q.length}function yt(Q){return null!=Q&&"number"==typeof Q.length}const ut=new u.OlP("NgValidators"),$e=new u.OlP("NgAsyncValidators"),jt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gt{static min(W){return function qe(Q){return W=>{if(xt(W.value)||xt(Q))return null;const j=parseFloat(W.value);return!isNaN(j)&&j<Q?{min:{min:Q,actual:W.value}}:null}}(W)}static max(W){return function ze(Q){return W=>{if(xt(W.value)||xt(Q))return null;const j=parseFloat(W.value);return!isNaN(j)&&j>Q?{max:{max:Q,actual:W.value}}:null}}(W)}static required(W){return function $t(Q){return xt(Q.value)?{required:!0}:null}(W)}static requiredTrue(W){return function rt(Q){return!0===Q.value?null:{required:!0}}(W)}static email(W){return function Ue(Q){return xt(Q.value)||jt.test(Q.value)?null:{email:!0}}(W)}static minLength(W){return function bt(Q){return W=>xt(W.value)||!yt(W.value)?null:W.value.length<Q?{minlength:{requiredLength:Q,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function Ne(Q){return W=>yt(W.value)&&W.value.length>Q?{maxlength:{requiredLength:Q,actualLength:W.value.length}}:null}(W)}static pattern(W){return function Ge(Q){if(!Q)return wt;let W,j;return"string"==typeof Q?(j="","^"!==Q.charAt(0)&&(j+="^"),j+=Q,"$"!==Q.charAt(Q.length-1)&&(j+="$"),W=new RegExp(j)):(j=Q.toString(),W=Q),ue=>{if(xt(ue.value))return null;const Pt=ue.value;return W.test(Pt)?null:{pattern:{requiredPattern:j,actualValue:Pt}}}}(W)}static nullValidator(W){return null}static compose(W){return ge(W)}static composeAsync(W){return Bt(W)}}function wt(Q){return null}function nt(Q){return null!=Q}function Ht(Q){return(0,u.QGY)(Q)?(0,ee.D)(Q):Q}function Kt(Q){let W={};return Q.forEach(j=>{W=null!=j?{...W,...j}:W}),0===Object.keys(W).length?null:W}function Mn(Q,W){return W.map(j=>j(Q))}function en(Q){return Q.map(W=>function Mt(Q){return!Q.validate}(W)?W:j=>W.validate(j))}function ge(Q){if(!Q)return null;const W=Q.filter(nt);return 0==W.length?null:function(j){return Kt(Mn(j,W))}}function ie(Q){return null!=Q?ge(en(Q)):null}function Bt(Q){if(!Q)return null;const W=Q.filter(nt);return 0==W.length?null:function(j){const ue=Mn(j,W).map(Ht);return(0,Se.D)(ue).pipe((0,Oe.U)(Kt))}}function Le(Q){return null!=Q?Bt(en(Q)):null}function Qe(Q,W){return null===Q?[W]:Array.isArray(Q)?[...Q,W]:[Q,W]}function Fe(Q){return Q._rawValidators}function st(Q){return Q._rawAsyncValidators}function Xt(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function an(Q,W){return Array.isArray(Q)?Q.includes(W):Q===W}function Dr(Q,W){const j=Xt(W);return Xt(Q).forEach(Pt=>{an(j,Pt)||j.push(Pt)}),j}function jn(Q,W){return Xt(W).filter(j=>!an(Q,j))}class ii{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=ie(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=Le(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W){this.control&&this.control.reset(W)}hasError(W,j){return!!this.control&&this.control.hasError(W,j)}getError(W,j){return this.control?this.control.getError(W,j):null}}class br extends ii{get formDirective(){return null}get path(){return null}}class Nr extends ii{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wn{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let un=(()=>{class Q extends Wn{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(Nr,2))},Q.\u0275dir=u.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,ue){2&j&&u.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)},features:[u.qOj]}),Q})(),Rr=(()=>{class Q extends Wn{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(br,10))},Q.\u0275dir=u.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(j,ue){2&j&&u.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)("ng-submitted",ue.isSubmitted)},features:[u.qOj]}),Q})();const si="VALID",Pr="INVALID",yn="PENDING",Ut="DISABLED";function En(Q){return(Be(Q)?Q.validators:Q)||null}function Gn(Q){return Array.isArray(Q)?ie(Q):Q||null}function Ln(Q,W){return(Be(W)?W.asyncValidators:Q)||null}function tr(Q){return Array.isArray(Q)?Le(Q):Q||null}function Be(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}function Pe(Q,W,j){const ue=Q.controls;if(!(W?Object.keys(ue):ue).length)throw new u.vHH(1e3,"");if(!ue[j])throw new u.vHH(1001,"")}function Ze(Q,W,j){Q._forEachChild((ue,Pt)=>{if(void 0===j[Pt])throw new u.vHH(1002,"")})}class Te{constructor(W,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=W,this._rawAsyncValidators=j,this._composedValidatorFn=Gn(this._rawValidators),this._composedAsyncValidatorFn=tr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===si}get invalid(){return this.status===Pr}get pending(){return this.status==yn}get disabled(){return this.status===Ut}get enabled(){return this.status!==Ut}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._rawValidators=W,this._composedValidatorFn=Gn(W)}setAsyncValidators(W){this._rawAsyncValidators=W,this._composedAsyncValidatorFn=tr(W)}addValidators(W){this.setValidators(Dr(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(Dr(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(jn(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(jn(W,this._rawAsyncValidators))}hasValidator(W){return an(this._rawValidators,W)}hasAsyncValidator(W){return an(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=yn,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=Ut,this.errors=null,this._forEachChild(ue=>{ue.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(ue=>ue(!0))}enable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=si,this._forEachChild(ue=>{ue.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===si||this.status===yn)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ut:si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const j=Ht(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,j={}){this.errors=W,this._updateControlsErrors(!1!==j.emitEvent)}get(W){let j=W;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((ue,Pt)=>ue&&ue._find(Pt),this)}getError(W,j){const ue=j?this.get(j):this;return ue&&ue.errors?ue.errors[W]:null}hasError(W,j){return!!this.getError(W,j)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Ut:this.errors?Pr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(Pr)?Pr:si}_anyControlsHaveStatus(W){return this._anyControls(j=>j.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){Be(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}}class se extends Te{constructor(W,j,ue){super(En(j),Ln(ue,j)),this.controls=W,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,j){return this.controls[W]?this.controls[W]:(this.controls[W]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(W,j,ue={}){this.registerControl(W,j),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(W,j={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(W,j,ue={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],j&&this.registerControl(W,j),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,j={}){Ze(this,0,W),Object.keys(W).forEach(ue=>{Pe(this,!0,ue),this.controls[ue].setValue(W[ue],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(W,j={}){null!=W&&(Object.keys(W).forEach(ue=>{const Pt=this.controls[ue];Pt&&Pt.patchValue(W[ue],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(W={},j={}){this._forEachChild((ue,Pt)=>{ue.reset(W[Pt],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(W,j,ue)=>(W[ue]=j.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(j,ue)=>!!ue._syncPendingControls()||j);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(j=>{const ue=this.controls[j];ue&&W(ue,j)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[j,ue]of Object.entries(this.controls))if(this.contains(j)&&W(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,ue,Pt)=>((ue.enabled||this.disabled)&&(j[Pt]=ue.value),j))}_reduceChildren(W,j){let ue=W;return this._forEachChild((Pt,Z)=>{ue=j(ue,Pt,Z)}),ue}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}function Nn(Q,W){return[...W.path,Q]}function Ee(Q,W){ft(Q,W),W.valueAccessor.writeValue(Q.value),Q.disabled&&W.valueAccessor.setDisabledState?.(!0),function Zn(Q,W){W.valueAccessor.registerOnChange(j=>{Q._pendingValue=j,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Ar(Q,W)})}(Q,W),function gi(Q,W){const j=(ue,Pt)=>{W.valueAccessor.writeValue(ue),Pt&&W.viewToModelUpdate(ue)};Q.registerOnChange(j),W._registerOnDestroy(()=>{Q._unregisterOnChange(j)})}(Q,W),function hr(Q,W){W.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Ar(Q,W),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,W),function tt(Q,W){if(W.valueAccessor.setDisabledState){const j=ue=>{W.valueAccessor.setDisabledState(ue)};Q.registerOnDisabledChange(j),W._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(j)})}}(Q,W)}function ve(Q,W,j=!0){const ue=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(ue),W.valueAccessor.registerOnTouched(ue)),tn(Q,W),Q&&(W._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function pe(Q,W){Q.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(W)})}function ft(Q,W){const j=Fe(Q);null!==W.validator?Q.setValidators(Qe(j,W.validator)):"function"==typeof j&&Q.setValidators([j]);const ue=st(Q);null!==W.asyncValidator?Q.setAsyncValidators(Qe(ue,W.asyncValidator)):"function"==typeof ue&&Q.setAsyncValidators([ue]);const Pt=()=>Q.updateValueAndValidity();pe(W._rawValidators,Pt),pe(W._rawAsyncValidators,Pt)}function tn(Q,W){let j=!1;if(null!==Q){if(null!==W.validator){const Pt=Fe(Q);if(Array.isArray(Pt)&&Pt.length>0){const Z=Pt.filter(q=>q!==W.validator);Z.length!==Pt.length&&(j=!0,Q.setValidators(Z))}}if(null!==W.asyncValidator){const Pt=st(Q);if(Array.isArray(Pt)&&Pt.length>0){const Z=Pt.filter(q=>q!==W.asyncValidator);Z.length!==Pt.length&&(j=!0,Q.setAsyncValidators(Z))}}}const ue=()=>{};return pe(W._rawValidators,ue),pe(W._rawAsyncValidators,ue),j}function Ar(Q,W){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Fs(Q,W){if(!Q.hasOwnProperty("model"))return!1;const j=Q.model;return!!j.isFirstChange()||!Object.is(W,j.currentValue)}function Ti(Q,W){if(!W)return null;let j,ue,Pt;return Array.isArray(W),W.forEach(Z=>{Z.constructor===mt?j=Z:function vs(Q){return Object.getPrototypeOf(Q.constructor)===We}(Z)?ue=Z:Pt=Z}),Pt||ue||j||null}function Ls(Q,W){const j=Q.indexOf(W);j>-1&&Q.splice(j,1)}function Rs(Q){return"object"==typeof Q&&null!==Q&&2===Object.keys(Q).length&&"value"in Q&&"disabled"in Q}const $i=class extends Te{constructor(W=null,j,ue){super(En(j),Ln(ue,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Be(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=Rs(W)?W.value:W)}setValue(W,j={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(W,j={}){this.setValue(W,j)}reset(W=this.defaultValue,j={}){this._applyFormState(W),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){Ls(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){Ls(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){Rs(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},Vo={provide:Nr,useExisting:(0,u.Gpc)(()=>ra)},Us=(()=>Promise.resolve())();let ra=(()=>{class Q extends Nr{constructor(j,ue,Pt,Z,q){super(),this._changeDetectorRef=q,this.control=new $i,this._registered=!1,this.update=new u.vpe,this._parent=j,this._setValidators(ue),this._setAsyncValidators(Pt),this.valueAccessor=Ti(0,Z)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const ue=j.name.previousValue;this.formDirective.removeControl({name:ue,path:this._getPath(ue)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),Fs(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ee(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){Us.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const ue=j.isDisabled.currentValue,Pt=0!==ue&&(0,u.D6c)(ue);Us.then(()=>{Pt&&!this.control.disabled?this.control.disable():!Pt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Nn(j,this._parent):[j]}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(br,9),u.Y36(ut,10),u.Y36($e,10),u.Y36(ke,10),u.Y36(u.sBO,8))},Q.\u0275dir=u.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Vo]),u.qOj,u.TTD]}),Q})(),Qi=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275dir=u.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})();const Uo={provide:ke,useExisting:(0,u.Gpc)(()=>ns),multi:!0};let ns=(()=>{class Q extends We{writeValue(j){this.setProperty("value",j??"")}registerOnChange(j){this.onChange=ue=>{j(""==ue?null:parseFloat(ue))}}}return Q.\u0275fac=function(){let W;return function(ue){return(W||(W=u.n5z(Q)))(ue||Q)}}(),Q.\u0275dir=u.lG2({type:Q,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(j,ue){1&j&&u.NdJ("input",function(Z){return ue.onChange(Z.target.value)})("blur",function(){return ue.onTouched()})},features:[u._Bn([Uo]),u.qOj]}),Q})();const ct={provide:ke,useExisting:(0,u.Gpc)(()=>cn),multi:!0};let vt=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({}),Q})(),Wt=(()=>{class Q{constructor(){this._accessors=[]}add(j,ue){this._accessors.push([j,ue])}remove(j){for(let ue=this._accessors.length-1;ue>=0;--ue)if(this._accessors[ue][1]===j)return void this._accessors.splice(ue,1)}select(j){this._accessors.forEach(ue=>{this._isSameGroup(ue,j)&&ue[1]!==j&&ue[1].fireUncheck(j.value)})}_isSameGroup(j,ue){return!!j[0].control&&j[0]._parent===ue._control._parent&&j[1].name===ue.name}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275prov=u.Yz7({token:Q,factory:Q.\u0275fac,providedIn:vt}),Q})(),cn=(()=>{class Q extends We{constructor(j,ue,Pt,Z){super(j,ue),this._registry=Pt,this._injector=Z,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Nr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(j){this._state=j===this.value,this.setProperty("checked",this._state)}registerOnChange(j){this._fn=j,this.onChange=()=>{j(this.value),this._registry.select(this)}}fireUncheck(j){this.writeValue(j)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Wt),u.Y36(u.zs3))},Q.\u0275dir=u.lG2({type:Q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(j,ue){1&j&&u.NdJ("change",function(){return ue.onChange()})("blur",function(){return ue.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[u._Bn([ct]),u.qOj]}),Q})();const Ei=new u.OlP("NgModelWithFormControlWarning"),Es={provide:br,useExisting:(0,u.Gpc)(()=>Vi)};let Vi=(()=>{class Q extends br{constructor(j,ue){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(j),this._setAsyncValidators(ue)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const ue=this.form.get(j.path);return Ee(ue,j),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),ue}getControl(j){return this.form.get(j.path)}removeControl(j){ve(j.control||null,j,!1),function ho(Q,W){const j=Q.indexOf(W);j>-1&&Q.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,ue){this.form.get(j.path).setValue(ue)}onSubmit(j){return this.submitted=!0,function bs(Q,W){Q._syncPendingControls(),W.forEach(j=>{const ue=j.control;"submit"===ue.updateOn&&ue._pendingChange&&(j.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const ue=j.control,Pt=this.form.get(j.path);ue!==Pt&&(ve(ue||null,j),(Q=>Q instanceof $i)(Pt)&&(Ee(Pt,j),j.control=Pt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const ue=this.form.get(j.path);(function Rn(Q,W){ft(Q,W)})(ue,j),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const ue=this.form.get(j.path);ue&&function ys(Q,W){return tn(Q,W)}(ue,j)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ft(this.form,this),this._oldForm&&tn(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(ut,10),u.Y36($e,10))},Q.\u0275dir=u.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(j,ue){1&j&&u.NdJ("submit",function(Z){return ue.onSubmit(Z)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Es]),u.qOj,u.TTD]}),Q})();const Xn={provide:Nr,useExisting:(0,u.Gpc)(()=>fs)};let fs=(()=>{class Q extends Nr{constructor(j,ue,Pt,Z,q){super(),this._ngModelWarningConfig=q,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(ue),this._setAsyncValidators(Pt),this.valueAccessor=Ti(0,Z)}set isDisabled(j){}ngOnChanges(j){this._added||this._setUpControl(),Fs(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Nn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(j){return new(j||Q)(u.Y36(br,13),u.Y36(ut,10),u.Y36($e,10),u.Y36(ke,10),u.Y36(Ei,8))},Q.\u0275dir=u.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Xn]),u.qOj,u.TTD]}),Q})();const Wr={provide:ke,useExisting:(0,u.Gpc)(()=>Hs),multi:!0};function eo(Q,W){return null==Q?`${W}`:(W&&"object"==typeof W&&(W="Object"),`${Q}: ${W}`.slice(0,50))}let Hs=(()=>{class Q extends We{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){this.value=j;const Pt=eo(this._getOptionId(j),j);this.setProperty("value",Pt)}registerOnChange(j){this.onChange=ue=>{this.value=this._getOptionValue(ue),j(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(j){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue),j))return ue;return null}_getOptionValue(j){const ue=function Va(Q){return Q.split(":")[0]}(j);return this._optionMap.has(ue)?this._optionMap.get(ue):j}}return Q.\u0275fac=function(){let W;return function(ue){return(W||(W=u.n5z(Q)))(ue||Q)}}(),Q.\u0275dir=u.lG2({type:Q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(j,ue){1&j&&u.NdJ("change",function(Z){return ue.onChange(Z.target.value)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Wr]),u.qOj]}),Q})(),To=(()=>{class Q{constructor(j,ue,Pt){this._element=j,this._renderer=ue,this._select=Pt,this._select&&(this.id=this._select._registerOption())}set ngValue(j){null!=this._select&&(this._select._optionMap.set(this.id,j),this._setElementValue(eo(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._setElementValue(j),this._select&&this._select.writeValue(this._select.value)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Hs,9))},Q.\u0275dir=u.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Q})();const Vr={provide:ke,useExisting:(0,u.Gpc)(()=>Ms),multi:!0};function wr(Q,W){return null==Q?`${W}`:("string"==typeof W&&(W=`'${W}'`),W&&"object"==typeof W&&(W="Object"),`${Q}: ${W}`.slice(0,50))}let Ms=(()=>{class Q extends We{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){let ue;if(this.value=j,Array.isArray(j)){const Pt=j.map(Z=>this._getOptionId(Z));ue=(Z,q)=>{Z._setSelected(Pt.indexOf(q.toString())>-1)}}else ue=(Pt,Z)=>{Pt._setSelected(!1)};this._optionMap.forEach(ue)}registerOnChange(j){this.onChange=ue=>{const Pt=[],Z=ue.selectedOptions;if(void 0!==Z){const q=Z;for(let fe=0;fe<q.length;fe++){const je=this._getOptionValue(q[fe].value);Pt.push(je)}}else{const q=ue.options;for(let fe=0;fe<q.length;fe++){const Ae=q[fe];if(Ae.selected){const je=this._getOptionValue(Ae.value);Pt.push(je)}}}this.value=Pt,j(Pt)}}_registerOption(j){const ue=(this._idCounter++).toString();return this._optionMap.set(ue,j),ue}_getOptionId(j){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue)._value,j))return ue;return null}_getOptionValue(j){const ue=function Ni(Q){return Q.split(":")[0]}(j);return this._optionMap.has(ue)?this._optionMap.get(ue)._value:j}}return Q.\u0275fac=function(){let W;return function(ue){return(W||(W=u.n5z(Q)))(ue||Q)}}(),Q.\u0275dir=u.lG2({type:Q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(j,ue){1&j&&u.NdJ("change",function(Z){return ue.onChange(Z.target)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Vr]),u.qOj]}),Q})(),Ui=(()=>{class Q{constructor(j,ue,Pt){this._element=j,this._renderer=ue,this._select=Pt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(j){null!=this._select&&(this._value=j,this._setElementValue(wr(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._select?(this._value=j,this._setElementValue(wr(this.id,j)),this._select.writeValue(this._select.value)):this._setElementValue(j)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}_setSelected(j){this._renderer.setProperty(this._element.nativeElement,"selected",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Q.\u0275fac=function(j){return new(j||Q)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Ms,9))},Q.\u0275dir=u.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Q})(),ps=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({imports:[vt]}),Q})(),_l=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({imports:[ps]}),Q})(),po=(()=>{class Q{static withConfig(j){return{ngModule:Q,providers:[{provide:Ei,useValue:j.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=u.oAB({type:Q}),Q.\u0275inj=u.cJS({imports:[ps]}),Q})();class ro extends Te{constructor(W,j,ue){super(En(j),Ln(ue,j)),this.controls=W,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(W){return this.controls[this._adjustIndex(W)]}push(W,j={}){this.controls.push(W),this._registerControl(W),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(W,j,ue={}){this.controls.splice(W,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(W,j={}){let ue=this._adjustIndex(W);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(W,j,ue={}){let Pt=this._adjustIndex(W);Pt<0&&(Pt=0),this.controls[Pt]&&this.controls[Pt]._registerOnCollectionChange(()=>{}),this.controls.splice(Pt,1),j&&(this.controls.splice(Pt,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(W,j={}){Ze(this,0,W),W.forEach((ue,Pt)=>{Pe(this,!1,Pt),this.at(Pt).setValue(ue,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(W,j={}){null!=W&&(W.forEach((ue,Pt)=>{this.at(Pt)&&this.at(Pt).patchValue(ue,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(W=[],j={}){this._forEachChild((ue,Pt)=>{ue.reset(W[Pt],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(W=>W.getRawValue())}clear(W={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:W.emitEvent}))}_adjustIndex(W){return W<0?W+this.length:W}_syncPendingControls(){let W=this.controls.reduce((j,ue)=>!!ue._syncPendingControls()||j,!1);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){this.controls.forEach((j,ue)=>{W(j,ue)})}_updateValue(){this.value=this.controls.filter(W=>W.enabled||this.disabled).map(W=>W.value)}_anyControls(W){return this.controls.some(j=>j.enabled&&W(j))}_setUpControls(){this._forEachChild(W=>this._registerControl(W))}_allControlsDisabled(){for(const W of this.controls)if(W.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(W){W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)}_find(W){return this.at(W)??null}}},1481:(hn,dt,B)=>{B.d(dt,{Dx:()=>pr,H7:()=>ht,b2:()=>er,q6:()=>sr,se:()=>nt});var u=B(6895),L=B(4650);class ee extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends ee{static makeCurrent(){(0,u.HT)(new Se)}onAndCancel(ve,pe,tt){return ve.addEventListener(pe,tt,!1),()=>{ve.removeEventListener(pe,tt,!1)}}dispatchEvent(ve,pe){ve.dispatchEvent(pe)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,pe){return(pe=pe||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,pe){return"window"===pe?window:"document"===pe?ve:"body"===pe?ve.body:null}getBaseHref(ve){const pe=function Me(){return Oe=Oe||document.querySelector("base"),Oe?Oe.getAttribute("href"):null}();return null==pe?null:function ke(Ee){We=We||document.createElement("a"),We.setAttribute("href",Ee);const ve=We.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(pe)}resetBaseElement(){Oe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,u.Mx)(document.cookie,ve)}}let We,Oe=null;const Je=new L.OlP("TRANSITION_ID"),ye=[{provide:L.ip1,useFactory:function we(Ee,ve,pe){return()=>{pe.get(L.CZH).donePromise.then(()=>{const tt=(0,u.q)(),ft=ve.querySelectorAll(`style[ng-transition="${Ee}"]`);for(let tn=0;tn<ft.length;tn++)tt.remove(ft[tn])})}},deps:[Je,u.K0,L.zs3],multi:!0}];let Nt=(()=>{class Ee{build(){return new XMLHttpRequest}}return Ee.\u0275fac=function(pe){return new(pe||Ee)},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const mt=new L.OlP("EventManagerPlugins");let lt=(()=>{class Ee{constructor(pe,tt){this._zone=tt,this._eventNameToPlugin=new Map,pe.forEach(ft=>ft.manager=this),this._plugins=pe.slice().reverse()}addEventListener(pe,tt,ft){return this._findPluginFor(tt).addEventListener(pe,tt,ft)}addGlobalEventListener(pe,tt,ft){return this._findPluginFor(tt).addGlobalEventListener(pe,tt,ft)}getZone(){return this._zone}_findPluginFor(pe){const tt=this._eventNameToPlugin.get(pe);if(tt)return tt;const ft=this._plugins;for(let tn=0;tn<ft.length;tn++){const Zn=ft[tn];if(Zn.supports(pe))return this._eventNameToPlugin.set(pe,Zn),Zn}throw new Error(`No event manager plugin found for event ${pe}`)}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(mt),L.LFG(L.R0b))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class xt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,pe,tt){const ft=(0,u.q)().getGlobalEventTarget(this._doc,ve);if(!ft)throw new Error(`Unsupported event target ${ft} for event ${pe}`);return this.addEventListener(ft,pe,tt)}}let yt=(()=>{class Ee{constructor(){this._stylesSet=new Set}addStyles(pe){const tt=new Set;pe.forEach(ft=>{this._stylesSet.has(ft)||(this._stylesSet.add(ft),tt.add(ft))}),this.onStylesAdded(tt)}onStylesAdded(pe){}getAllStyles(){return Array.from(this._stylesSet)}}return Ee.\u0275fac=function(pe){return new(pe||Ee)},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})(),ut=(()=>{class Ee extends yt{constructor(pe){super(),this._doc=pe,this._hostNodes=new Map,this._hostNodes.set(pe.head,[])}_addStylesToHost(pe,tt,ft){pe.forEach(tn=>{const Zn=this._doc.createElement("style");Zn.textContent=tn,ft.push(tt.appendChild(Zn))})}addHost(pe){const tt=[];this._addStylesToHost(this._stylesSet,pe,tt),this._hostNodes.set(pe,tt)}removeHost(pe){const tt=this._hostNodes.get(pe);tt&&tt.forEach($e),this._hostNodes.delete(pe)}onStylesAdded(pe){this._hostNodes.forEach((tt,ft)=>{this._addStylesToHost(pe,ft,tt)})}ngOnDestroy(){this._hostNodes.forEach(pe=>pe.forEach($e))}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(u.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();function $e(Ee){(0,u.q)().remove(Ee)}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gt=/%COMP%/g;function Ne(Ee,ve,pe){for(let tt=0;tt<ve.length;tt++){let ft=ve[tt];Array.isArray(ft)?Ne(Ee,ft,pe):(ft=ft.replace(gt,Ee),pe.push(ft))}return pe}function Ge(Ee){return ve=>{if("__ngUnwrap__"===ve)return Ee;!1===Ee(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let nt=(()=>{class Ee{constructor(pe,tt,ft){this.eventManager=pe,this.sharedStylesHost=tt,this.appId=ft,this.rendererByCompId=new Map,this.defaultRenderer=new Ht(pe)}createRenderer(pe,tt){if(!pe||!tt)return this.defaultRenderer;switch(tt.encapsulation){case L.ifc.Emulated:{let ft=this.rendererByCompId.get(tt.id);return ft||(ft=new en(this.eventManager,this.sharedStylesHost,tt,this.appId),this.rendererByCompId.set(tt.id,ft)),ft.applyToHost(pe),ft}case 1:case L.ifc.ShadowDom:return new ge(this.eventManager,this.sharedStylesHost,pe,tt);default:if(!this.rendererByCompId.has(tt.id)){const ft=Ne(tt.id,tt.styles,[]);this.sharedStylesHost.addStyles(ft),this.rendererByCompId.set(tt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(lt),L.LFG(ut),L.LFG(L.AFp))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class Ht{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,pe){return pe?document.createElementNS(jt[pe]||pe,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,pe){(Mt(ve)?ve.content:ve).appendChild(pe)}insertBefore(ve,pe,tt){ve&&(Mt(ve)?ve.content:ve).insertBefore(pe,tt)}removeChild(ve,pe){ve&&ve.removeChild(pe)}selectRootElement(ve,pe){let tt="string"==typeof ve?document.querySelector(ve):ve;if(!tt)throw new Error(`The selector "${ve}" did not match any elements`);return pe||(tt.textContent=""),tt}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,pe,tt,ft){if(ft){pe=ft+":"+pe;const tn=jt[ft];tn?ve.setAttributeNS(tn,pe,tt):ve.setAttribute(pe,tt)}else ve.setAttribute(pe,tt)}removeAttribute(ve,pe,tt){if(tt){const ft=jt[tt];ft?ve.removeAttributeNS(ft,pe):ve.removeAttribute(`${tt}:${pe}`)}else ve.removeAttribute(pe)}addClass(ve,pe){ve.classList.add(pe)}removeClass(ve,pe){ve.classList.remove(pe)}setStyle(ve,pe,tt,ft){ft&(L.JOm.DashCase|L.JOm.Important)?ve.style.setProperty(pe,tt,ft&L.JOm.Important?"important":""):ve.style[pe]=tt}removeStyle(ve,pe,tt){tt&L.JOm.DashCase?ve.style.removeProperty(pe):ve.style[pe]=""}setProperty(ve,pe,tt){ve[pe]=tt}setValue(ve,pe){ve.nodeValue=pe}listen(ve,pe,tt){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,pe,Ge(tt)):this.eventManager.addEventListener(ve,pe,Ge(tt))}}function Mt(Ee){return"TEMPLATE"===Ee.tagName&&void 0!==Ee.content}class en extends Ht{constructor(ve,pe,tt,ft){super(ve),this.component=tt;const tn=Ne(ft+"-"+tt.id,tt.styles,[]);pe.addStyles(tn),this.contentAttr=function Ue(Ee){return"_ngcontent-%COMP%".replace(gt,Ee)}(ft+"-"+tt.id),this.hostAttr=function bt(Ee){return"_nghost-%COMP%".replace(gt,Ee)}(ft+"-"+tt.id)}applyToHost(ve){super.setAttribute(ve,this.hostAttr,"")}createElement(ve,pe){const tt=super.createElement(ve,pe);return super.setAttribute(tt,this.contentAttr,""),tt}}class ge extends Ht{constructor(ve,pe,tt,ft){super(ve),this.sharedStylesHost=pe,this.hostEl=tt,this.shadowRoot=tt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const tn=Ne(ft.id,ft.styles,[]);for(let Zn=0;Zn<tn.length;Zn++){const hr=document.createElement("style");hr.textContent=tn[Zn],this.shadowRoot.appendChild(hr)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ve,pe){return super.appendChild(this.nodeOrShadowRoot(ve),pe)}insertBefore(ve,pe,tt){return super.insertBefore(this.nodeOrShadowRoot(ve),pe,tt)}removeChild(ve,pe){return super.removeChild(this.nodeOrShadowRoot(ve),pe)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}}let ie=(()=>{class Ee extends xt{constructor(pe){super(pe)}supports(pe){return!0}addEventListener(pe,tt,ft){return pe.addEventListener(tt,ft,!1),()=>this.removeEventListener(pe,tt,ft)}removeEventListener(pe,tt,ft){return pe.removeEventListener(tt,ft)}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(u.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Bt=["alt","control","meta","shift"],Le={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qe={alt:Ee=>Ee.altKey,control:Ee=>Ee.ctrlKey,meta:Ee=>Ee.metaKey,shift:Ee=>Ee.shiftKey};let Fe=(()=>{class Ee extends xt{constructor(pe){super(pe)}supports(pe){return null!=Ee.parseEventName(pe)}addEventListener(pe,tt,ft){const tn=Ee.parseEventName(tt),Zn=Ee.eventCallback(tn.fullKey,ft,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(pe,tn.domEventName,Zn))}static parseEventName(pe){const tt=pe.toLowerCase().split("."),ft=tt.shift();if(0===tt.length||"keydown"!==ft&&"keyup"!==ft)return null;const tn=Ee._normalizeKey(tt.pop());let Zn="",hr=tt.indexOf("code");if(hr>-1&&(tt.splice(hr,1),Zn="code."),Bt.forEach(gi=>{const Rn=tt.indexOf(gi);Rn>-1&&(tt.splice(Rn,1),Zn+=gi+".")}),Zn+=tn,0!=tt.length||0===tn.length)return null;const Ar={};return Ar.domEventName=ft,Ar.fullKey=Zn,Ar}static matchEventFullKeyCode(pe,tt){let ft=Le[pe.key]||pe.key,tn="";return tt.indexOf("code.")>-1&&(ft=pe.code,tn="code."),!(null==ft||!ft)&&(ft=ft.toLowerCase()," "===ft?ft="space":"."===ft&&(ft="dot"),Bt.forEach(Zn=>{Zn!==ft&&(0,Qe[Zn])(pe)&&(tn+=Zn+".")}),tn+=ft,tn===tt)}static eventCallback(pe,tt,ft){return tn=>{Ee.matchEventFullKeyCode(tn,pe)&&ft.runGuarded(()=>tt(tn))}}static _normalizeKey(pe){return"esc"===pe?"escape":pe}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(u.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const sr=(0,L.eFA)(L._c5,"browser",[{provide:L.Lbi,useValue:u.bD},{provide:L.g9A,useValue:function ii(){Se.makeCurrent()},multi:!0},{provide:u.K0,useFactory:function Nr(){return(0,L.RDi)(document),document},deps:[]}]),Tr=new L.OlP(""),un=[{provide:L.rWj,useClass:class He{addToWindow(ve){L.dqk.getAngularTestability=(tt,ft=!0)=>{const tn=ve.findTestabilityInTree(tt,ft);if(null==tn)throw new Error("Could not find testability for element.");return tn},L.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),L.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),L.dqk.frameworkStabilizers||(L.dqk.frameworkStabilizers=[]),L.dqk.frameworkStabilizers.push(tt=>{const ft=L.dqk.getAllAngularTestabilities();let tn=ft.length,Zn=!1;const hr=function(Ar){Zn=Zn||Ar,tn--,0==tn&&tt(Zn)};ft.forEach(function(Ar){Ar.whenStable(hr)})})}findTestabilityInTree(ve,pe,tt){return null==pe?null:ve.getTestability(pe)??(tt?(0,u.q)().isShadowRoot(pe)?this.findTestabilityInTree(ve,pe.host,!0):this.findTestabilityInTree(ve,pe.parentElement,!0):null)}},deps:[]},{provide:L.lri,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]},{provide:L.dDg,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]}],Rr=[{provide:L.zSh,useValue:"root"},{provide:L.qLn,useFactory:function br(){return new L.qLn},deps:[]},{provide:mt,useClass:ie,multi:!0,deps:[u.K0,L.R0b,L.Lbi]},{provide:mt,useClass:Fe,multi:!0,deps:[u.K0]},{provide:nt,useClass:nt,deps:[lt,ut,L.AFp]},{provide:L.FYo,useExisting:nt},{provide:yt,useExisting:ut},{provide:ut,useClass:ut,deps:[u.K0]},{provide:lt,useClass:lt,deps:[mt,L.R0b]},{provide:u.JF,useClass:Nt,deps:[]},[]];let er=(()=>{class Ee{constructor(pe){}static withServerTransition(pe){return{ngModule:Ee,providers:[{provide:L.AFp,useValue:pe.appId},{provide:Je,useExisting:L.AFp},ye]}}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(Tr,12))},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({providers:[...Rr,...un],imports:[u.ez,L.hGG]}),Ee})(),pr=(()=>{class Ee{constructor(pe){this._doc=pe}getTitle(){return this._doc.title}setTitle(pe){this._doc.title=pe||""}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(u.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:function(pe){let tt=null;return tt=pe?new pe:function Kn(){return new pr((0,L.LFG)(u.K0))}(),tt},providedIn:"root"}),Ee})();typeof window<"u"&&window;let ht=(()=>{class Ee{}return Ee.\u0275fac=function(pe){return new(pe||Ee)},Ee.\u0275prov=L.Yz7({token:Ee,factory:function(pe){let tt=null;return tt=pe?new(pe||Ee):L.LFG(bn),tt},providedIn:"root"}),Ee})(),bn=(()=>{class Ee extends ht{constructor(pe){super(),this._doc=pe}sanitize(pe,tt){if(null==tt)return null;switch(pe){case L.q3G.NONE:return tt;case L.q3G.HTML:return(0,L.qzn)(tt,"HTML")?(0,L.z3N)(tt):(0,L.EiD)(this._doc,String(tt)).toString();case L.q3G.STYLE:return(0,L.qzn)(tt,"Style")?(0,L.z3N)(tt):tt;case L.q3G.SCRIPT:if((0,L.qzn)(tt,"Script"))return(0,L.z3N)(tt);throw new Error("unsafe value used in a script context");case L.q3G.URL:return(0,L.qzn)(tt,"URL")?(0,L.z3N)(tt):(0,L.mCW)(String(tt));case L.q3G.RESOURCE_URL:if((0,L.qzn)(tt,"ResourceURL"))return(0,L.z3N)(tt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${pe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(pe){return(0,L.JVY)(pe)}bypassSecurityTrustStyle(pe){return(0,L.L6k)(pe)}bypassSecurityTrustScript(pe){return(0,L.eBb)(pe)}bypassSecurityTrustUrl(pe){return(0,L.LAX)(pe)}bypassSecurityTrustResourceUrl(pe){return(0,L.pB0)(pe)}}return Ee.\u0275fac=function(pe){return new(pe||Ee)(L.LFG(u.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:function(pe){let tt=null;return tt=pe?new pe:function qt(Ee){return new bn(Ee.get(u.K0))}(L.LFG(L.zs3)),tt},providedIn:"root"}),Ee})()},7799:(hn,dt,B)=>{B.d(dt,{gz:()=>Es,F0:()=>qs,Od:()=>Al,yS:()=>wu,Bz:()=>yi,lC:()=>to});var u=B(4650),L=B(8996),ee=B(9646),Se=B(1135),Oe=B(6805),Me=B(9841),We=B(7272),ke=B(9770),Je=B(9635),we=B(2843),ye=B(9751),He=B(515),Nt=B(727),mt=B(4482),lt=B(5403);function xt(){return(0,mt.e)((A,M)=>{let S=null;A._refCount++;const U=(0,lt.x)(M,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(S=null);const K=A._connection,ae=S;S=null,K&&(!ae||K===ae)&&K.unsubscribe(),M.unsubscribe()});A.subscribe(U),U.closed||(S=A.connect())})}class yt extends ye.y{constructor(M,S){super(),this.source=M,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,mt.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Nt.w0;const S=this.getSubject();M.add(this.source.subscribe((0,lt.x)(S,void 0,()=>{this._teardown(),S.complete()},U=>{this._teardown(),S.error(U)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Nt.w0.EMPTY)}return M}refCount(){return xt()(this)}}var ut=B(7579),$e=B(6895),jt=B(4004),gt=B(3900),qe=B(5698),ze=B(8675),$t=B(9300),rt=B(5577),Ue=B(590),bt=B(4351),Ne=B(8505),Ge=B(262),wt=B(5026);function nt(A){return A<=0?()=>He.E:(0,mt.e)((M,S)=>{let U=[];M.subscribe((0,lt.x)(S,K=>{U.push(K),A<U.length&&U.shift()},()=>{for(const K of U)S.next(K);S.complete()},void 0,()=>{U=null}))})}var Ht=B(8068),Kt=B(6590),Mn=B(4671);function Mt(A,M){const S=arguments.length>=2;return U=>U.pipe(A?(0,$t.h)((K,ae)=>A(K,ae,U)):Mn.y,nt(1),S?(0,Kt.d)(M):(0,Ht.T)(()=>new Oe.K))}var ge=B(9718),ie=B(8746),Bt=B(8189),Le=B(1481);const Qe="primary",Fe=Symbol("RouteTitle");class st{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S[0]:S}return null}getAll(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Xt(A){return new st(A)}function an(A,M,S){const U=S.path.split("/");if(U.length>A.length||"full"===S.pathMatch&&(M.hasChildren()||U.length<A.length))return null;const K={};for(let ae=0;ae<U.length;ae++){const Re=U[ae],xe=A[ae];if(Re.startsWith(":"))K[Re.substring(1)]=xe;else if(Re!==xe.path)return null}return{consumed:A.slice(0,U.length),posParams:K}}function jn(A,M){const S=A?Object.keys(A):void 0,U=M?Object.keys(M):void 0;if(!S||!U||S.length!=U.length)return!1;let K;for(let ae=0;ae<S.length;ae++)if(K=S[ae],!ii(A[K],M[K]))return!1;return!0}function ii(A,M){if(Array.isArray(A)&&Array.isArray(M)){if(A.length!==M.length)return!1;const S=[...A].sort(),U=[...M].sort();return S.every((K,ae)=>U[ae]===K)}return A===M}function br(A){return Array.prototype.concat.apply([],A)}function Nr(A){return A.length>0?A[A.length-1]:null}function sr(A,M){for(const S in A)A.hasOwnProperty(S)&&M(A[S],S)}function Tr(A){return(0,u.CqO)(A)?A:(0,u.QGY)(A)?(0,L.D)(Promise.resolve(A)):(0,ee.of)(A)}const er={exact:function Kn(A,M,S){if(!Vn(A.segments,M.segments)||!In(A.segments,M.segments,S)||A.numberOfChildren!==M.numberOfChildren)return!1;for(const U in M.children)if(!A.children[U]||!Kn(A.children[U],M.children[U],S))return!1;return!0},subset:dr},ur={exact:function ji(A,M){return jn(A,M)},subset:function pr(A,M){return Object.keys(M).length<=Object.keys(A).length&&Object.keys(M).every(S=>ii(A[S],M[S]))},ignored:()=>!0};function Xr(A,M,S){return er[S.paths](A.root,M.root,S.matrixParams)&&ur[S.queryParams](A.queryParams,M.queryParams)&&!("exact"===S.fragment&&A.fragment!==M.fragment)}function dr(A,M,S){return Tn(A,M,M.segments,S)}function Tn(A,M,S,U){if(A.segments.length>S.length){const K=A.segments.slice(0,S.length);return!(!Vn(K,S)||M.hasChildren()||!In(K,S,U))}if(A.segments.length===S.length){if(!Vn(A.segments,S)||!In(A.segments,S,U))return!1;for(const K in M.children)if(!A.children[K]||!dr(A.children[K],M.children[K],U))return!1;return!0}{const K=S.slice(0,A.segments.length),ae=S.slice(A.segments.length);return!!(Vn(A.segments,K)&&In(A.segments,K,U)&&A.children[Qe])&&Tn(A.children[Qe],M,ae,U)}}function In(A,M,S){return M.every((U,K)=>ur[S](A[K].parameters,U.parameters))}class kn{constructor(M,S,U){this.root=M,this.queryParams=S,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xt(this.queryParams)),this._queryParamMap}toString(){return _r.serialize(this)}}class xn{constructor(M,S){this.segments=M,this.children=S,this.parent=null,sr(S,(U,K)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class Mr{constructor(M,S){this.path=M,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Xt(this.parameters)),this._parameterMap}toString(){return Be(this)}}function Vn(A,M){return A.length===M.length&&A.every((S,U)=>S.path===M[U].path)}let vn=(()=>{class A{}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return new Di},providedIn:"root"}),A})();class Di{parse(M){const S=new Nn(M);return new kn(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(M){const S=`/${Pr(M.root,!0)}`,U=function Ze(A){const M=Object.keys(A).map(S=>{const U=A[S];return Array.isArray(U)?U.map(K=>`${Ut(S)}=${Ut(K)}`).join("&"):`${Ut(S)}=${Ut(U)}`}).filter(S=>!!S);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${S}${U}${"string"==typeof M.fragment?`#${function En(A){return encodeURI(A)}(M.fragment)}`:""}`}}const _r=new Di;function si(A){return A.segments.map(M=>Be(M)).join("/")}function Pr(A,M){if(!A.hasChildren())return si(A);if(M){const S=A.children[Qe]?Pr(A.children[Qe],!1):"",U=[];return sr(A.children,(K,ae)=>{ae!==Qe&&U.push(`${ae}:${Pr(K,!1)}`)}),U.length>0?`${S}(${U.join("//")})`:S}{const S=function ci(A,M){let S=[];return sr(A.children,(U,K)=>{K===Qe&&(S=S.concat(M(U,K)))}),sr(A.children,(U,K)=>{K!==Qe&&(S=S.concat(M(U,K)))}),S}(A,(U,K)=>K===Qe?[Pr(A.children[Qe],!1)]:[`${K}:${Pr(U,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Qe]?`${si(A)}/${S[0]}`:`${si(A)}/(${S.join("//")})`}}function yn(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ut(A){return yn(A).replace(/%3B/gi,";")}function Gn(A){return yn(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ln(A){return decodeURIComponent(A)}function tr(A){return Ln(A.replace(/\+/g,"%20"))}function Be(A){return`${Gn(A.path)}${function Pe(A){return Object.keys(A).map(M=>`;${Gn(M)}=${Gn(A[M])}`).join("")}(A.parameters)}`}const Te=/^[^\/()?;=#]+/;function se(A){const M=A.match(Te);return M?M[0]:""}const be=/^[^=?&#]+/,qt=/^[^&#]+/;class Nn{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(M.length>0||Object.keys(S).length>0)&&(U[Qe]=new xn(M,S)),U}parseSegment(){const M=se(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(M),new Mr(Ln(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const S=se(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const K=se(this.remaining);K&&(U=K,this.capture(U))}M[Ln(S)]=Ln(U)}parseQueryParam(M){const S=function ht(A){const M=A.match(be);return M?M[0]:""}(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const Re=function bn(A){const M=A.match(qt);return M?M[0]:""}(this.remaining);Re&&(U=Re,this.capture(U))}const K=tr(S),ae=tr(U);if(M.hasOwnProperty(K)){let Re=M[K];Array.isArray(Re)||(Re=[Re],M[K]=Re),Re.push(ae)}else M[K]=ae}parseParens(M){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=se(this.remaining),K=this.remaining[U.length];if("/"!==K&&")"!==K&&";"!==K)throw new u.vHH(4010,!1);let ae;U.indexOf(":")>-1?(ae=U.slice(0,U.indexOf(":")),this.capture(ae),this.capture(":")):M&&(ae=Qe);const Re=this.parseChildren();S[ae]=1===Object.keys(Re).length?Re[Qe]:new xn([],Re),this.consumeOptional("//")}return S}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new u.vHH(4011,!1)}}function Ee(A){return A.segments.length>0?new xn([],{[Qe]:A}):A}function ve(A){const M={};for(const U of Object.keys(A.children)){const ae=ve(A.children[U]);(ae.segments.length>0||ae.hasChildren())&&(M[U]=ae)}return function pe(A){if(1===A.numberOfChildren&&A.children[Qe]){const M=A.children[Qe];return new xn(A.segments.concat(M.segments),M.children)}return A}(new xn(A.segments,M))}function tt(A){return A instanceof kn}function Ar(A,M,S,U,K){if(0===S.length)return ys(M.root,M.root,M.root,U,K);const ae=function Zi(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Xs(!0,0,A);let M=0,S=!1;const U=A.reduce((K,ae,Re)=>{if("object"==typeof ae&&null!=ae){if(ae.outlets){const xe={};return sr(ae.outlets,(Lt,pn)=>{xe[pn]="string"==typeof Lt?Lt.split("/"):Lt}),[...K,{outlets:xe}]}if(ae.segmentPath)return[...K,ae.segmentPath]}return"string"!=typeof ae?[...K,ae]:0===Re?(ae.split("/").forEach((xe,Lt)=>{0==Lt&&"."===xe||(0==Lt&&""===xe?S=!0:".."===xe?M++:""!=xe&&K.push(xe))}),K):[...K,ae]},[]);return new Xs(S,M,U)}(S);return ae.toRoot()?ys(M.root,M.root,new xn([],{}),U,K):function Re(Lt){const pn=function vs(A,M,S,U){if(A.isAbsolute)return new wi(M.root,!0,0);if(-1===U)return new wi(S,S===M.root,0);return function bs(A,M,S){let U=A,K=M,ae=S;for(;ae>K;){if(ae-=K,U=U.parent,!U)throw new u.vHH(4005,!1);K=U.segments.length}return new wi(U,!1,K-ae)}(S,U+(gi(A.commands[0])?0:1),A.numberOfDoubleDots)}(ae,M,A.snapshot?._urlSegment,Lt),Cr=pn.processChildren?$r(pn.segmentGroup,pn.index,ae.commands):ho(pn.segmentGroup,pn.index,ae.commands);return ys(M.root,pn.segmentGroup,Cr,U,K)}(A.snapshot?._lastPathIndex)}function gi(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Rn(A){return"object"==typeof A&&null!=A&&A.outlets}function ys(A,M,S,U,K){let Re,ae={};U&&sr(U,(Lt,pn)=>{ae[pn]=Array.isArray(Lt)?Lt.map(Cr=>`${Cr}`):`${Lt}`}),Re=A===M?S:Js(A,M,S);const xe=Ee(ve(Re));return new kn(xe,ae,K)}function Js(A,M,S){const U={};return sr(A.children,(K,ae)=>{U[ae]=K===M?S:Js(K,M,S)}),new xn(A.segments,U)}class Xs{constructor(M,S,U){if(this.isAbsolute=M,this.numberOfDoubleDots=S,this.commands=U,M&&U.length>0&&gi(U[0]))throw new u.vHH(4003,!1);const K=U.find(Rn);if(K&&K!==Nr(U))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wi{constructor(M,S,U){this.segmentGroup=M,this.processChildren=S,this.index=U}}function ho(A,M,S){if(A||(A=new xn([],{})),0===A.segments.length&&A.hasChildren())return $r(A,M,S);const U=function Ba(A,M,S){let U=0,K=M;const ae={match:!1,pathIndex:0,commandIndex:0};for(;K<A.segments.length;){if(U>=S.length)return ae;const Re=A.segments[K],xe=S[U];if(Rn(xe))break;const Lt=`${xe}`,pn=U<S.length-1?S[U+1]:null;if(K>0&&void 0===Lt)break;if(Lt&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!Rs(Lt,pn,Re))return ae;U+=2}else{if(!Rs(Lt,{},Re))return ae;U++}K++}return{match:!0,pathIndex:K,commandIndex:U}}(A,M,S),K=S.slice(U.commandIndex);if(U.match&&U.pathIndex<A.segments.length){const ae=new xn(A.segments.slice(0,U.pathIndex),{});return ae.children[Qe]=new xn(A.segments.slice(U.pathIndex),A.children),$r(ae,0,K)}return U.match&&0===K.length?new xn(A.segments,{}):U.match&&!A.hasChildren()?as(A,M,S):U.match?$r(A,0,K):as(A,M,S)}function $r(A,M,S){if(0===S.length)return new xn(A.segments,{});{const U=function Ti(A){return Rn(A[0])?A[0].outlets:{[Qe]:A}}(S),K={};return sr(U,(ae,Re)=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&(K[Re]=ho(A.children[Re],M,ae))}),sr(A.children,(ae,Re)=>{void 0===U[Re]&&(K[Re]=ae)}),new xn(A.segments,K)}}function as(A,M,S){const U=A.segments.slice(0,M);let K=0;for(;K<S.length;){const ae=S[K];if(Rn(ae)){const Lt=ws(ae.outlets);return new xn(U,Lt)}if(0===K&&gi(S[0])){U.push(new Mr(A.segments[M].path,Ls(S[0]))),K++;continue}const Re=Rn(ae)?ae.outlets[Qe]:`${ae}`,xe=K<S.length-1?S[K+1]:null;Re&&xe&&gi(xe)?(U.push(new Mr(Re,Ls(xe))),K+=2):(U.push(new Mr(Re,{})),K++)}return new xn(U,{})}function ws(A){const M={};return sr(A,(S,U)=>{"string"==typeof S&&(S=[S]),null!==S&&(M[U]=as(new xn([],{}),0,S))}),M}function Ls(A){const M={};return sr(A,(S,U)=>M[U]=`${S}`),M}function Rs(A,M,S){return A==S.path&&jn(M,S.parameters)}class $i{constructor(M,S){this.id=M,this.url=S}}class Bs extends $i{constructor(M,S,U="imperative",K=null){super(M,S),this.type=0,this.navigationTrigger=U,this.restoredState=K}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oi extends $i{constructor(M,S,U){super(M,S),this.urlAfterRedirects=U,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ta extends $i{constructor(M,S,U,K){super(M,S),this.reason=U,this.code=K,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fr extends $i{constructor(M,S,U,K){super(M,S),this.error=U,this.target=K,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vs extends $i{constructor(M,S,U,K){super(M,S),this.urlAfterRedirects=U,this.state=K,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na extends $i{constructor(M,S,U,K){super(M,S),this.urlAfterRedirects=U,this.state=K,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zs extends $i{constructor(M,S,U,K,ae){super(M,S),this.urlAfterRedirects=U,this.state=K,this.shouldActivate=ae,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ks extends $i{constructor(M,S,U,K){super(M,S),this.urlAfterRedirects=U,this.state=K,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gi extends $i{constructor(M,S,U,K){super(M,S),this.urlAfterRedirects=U,this.state=K,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vo{constructor(M){this.route=M,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Us{constructor(M){this.route=M,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ra{constructor(M){this.snapshot=M,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(M){this.snapshot=M,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(M){this.snapshot=M,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ns{constructor(M){this.snapshot=M,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(M,S,U){this.routerEvent=M,this.position=S,this.anchor=U,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vt{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const S=this.pathFromRoot(M);return S.length>1?S[S.length-2]:null}children(M){const S=Wt(M,this._root);return S?S.children.map(U=>U.value):[]}firstChild(M){const S=Wt(M,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(M){const S=cn(M,this._root);return S.length<2?[]:S[S.length-2].children.map(K=>K.value).filter(K=>K!==M)}pathFromRoot(M){return cn(M,this._root).map(S=>S.value)}}function Wt(A,M){if(A===M.value)return M;for(const S of M.children){const U=Wt(A,S);if(U)return U}return null}function cn(A,M){if(A===M.value)return[M];for(const S of M.children){const U=cn(A,S);if(U.length)return U.unshift(M),U}return[]}class Pn{constructor(M,S){this.value=M,this.children=S}toString(){return`TreeNode(${this.value})`}}function or(A){const M={};return A&&A.children.forEach(S=>M[S.value.outlet]=S),M}class Ei extends vt{constructor(M,S){super(M),this.snapshot=S,kr(this,M)}toString(){return this.snapshot.toString()}}function ei(A,M){const S=function yo(A,M){const Re=new Mo([],{},{},"",{},Qe,M,null,A.root,-1,{});return new Oo("",new Pn(Re,[]))}(A,M),U=new Se.X([new Mr("",{})]),K=new Se.X({}),ae=new Se.X({}),Re=new Se.X({}),xe=new Se.X(""),Lt=new Es(U,K,Re,xe,ae,Qe,M,S.root);return Lt.snapshot=S.root,new Ei(new Pn(Lt,[]),S)}class Es{constructor(M,S,U,K,ae,Re,xe,Lt){this.url=M,this.params=S,this.queryParams=U,this.fragment=K,this.data=ae,this.outlet=Re,this.component=xe,this.title=this.data?.pipe((0,jt.U)(pn=>pn[Fe]))??(0,ee.of)(void 0),this._futureSnapshot=Lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,jt.U)(M=>Xt(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,jt.U)(M=>Xt(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vi(A,M="emptyOnly"){const S=A.pathFromRoot;let U=0;if("always"!==M)for(U=S.length-1;U>=1;){const K=S[U],ae=S[U-1];if(K.routeConfig&&""===K.routeConfig.path)U--;else{if(ae.component)break;U--}}return function Ca(A){return A.reduce((M,S)=>({params:{...M.params,...S.params},data:{...M.data,...S.data},resolve:{...S.data,...M.resolve,...S.routeConfig?.data,...S._resolvedData}}),{params:{},data:{},resolve:{}})}(S.slice(U))}class Mo{constructor(M,S,U,K,ae,Re,xe,Lt,pn,Cr,gn,ki){this.url=M,this.params=S,this.queryParams=U,this.fragment=K,this.data=ae,this.outlet=Re,this.component=xe,this.title=this.data?.[Fe],this.routeConfig=Lt,this._urlSegment=pn,this._lastPathIndex=Cr,this._correctedLastPathIndex=ki??Cr,this._resolve=gn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Oo extends vt{constructor(M,S){super(S),this.url=M,kr(this,S)}toString(){return Fr(this._root)}}function kr(A,M){M.value._routerState=A,M.children.forEach(S=>kr(A,S))}function Fr(A){const M=A.children.length>0?` { ${A.children.map(Fr).join(", ")} } `:"";return`${A.value}${M}`}function Xn(A){if(A.snapshot){const M=A.snapshot,S=A._futureSnapshot;A.snapshot=S,jn(M.queryParams,S.queryParams)||A.queryParams.next(S.queryParams),M.fragment!==S.fragment&&A.fragment.next(S.fragment),jn(M.params,S.params)||A.params.next(S.params),function Dr(A,M){if(A.length!==M.length)return!1;for(let S=0;S<A.length;++S)if(!jn(A[S],M[S]))return!1;return!0}(M.url,S.url)||A.url.next(S.url),jn(M.data,S.data)||A.data.next(S.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function fs(A,M){const S=jn(A.params,M.params)&&function Ai(A,M){return Vn(A,M)&&A.every((S,U)=>jn(S.parameters,M[U].parameters))}(A.url,M.url);return S&&!(!A.parent!=!M.parent)&&(!A.parent||fs(A.parent,M.parent))}function eo(A,M,S){if(S&&A.shouldReuseRoute(M.value,S.value.snapshot)){const U=S.value;U._futureSnapshot=M.value;const K=function Va(A,M,S){return M.children.map(U=>{for(const K of S.children)if(A.shouldReuseRoute(U.value,K.value.snapshot))return eo(A,U,K);return eo(A,U)})}(A,M,S);return new Pn(U,K)}{if(A.shouldAttach(M.value)){const ae=A.retrieve(M.value);if(null!==ae){const Re=ae.route;return Re.value._futureSnapshot=M.value,Re.children=M.children.map(xe=>eo(A,xe)),Re}}const U=function Hs(A){return new Es(new Se.X(A.url),new Se.X(A.params),new Se.X(A.queryParams),new Se.X(A.fragment),new Se.X(A.data),A.outlet,A.component,A)}(M.value),K=M.children.map(ae=>eo(A,ae));return new Pn(U,K)}}const To="ngNavigationCancelingError";function Vr(A,M){const{redirectTo:S,navigationBehaviorOptions:U}=tt(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,K=wr(!1,0,M);return K.url=S,K.navigationBehaviorOptions=U,K}function wr(A,M,S){const U=new Error("NavigationCancelingError: "+(A||""));return U[To]=!0,U.cancellationCode=M,S&&(U.url=S),U}function Ni(A){return ia(A)&&tt(A.url)}function ia(A){return A&&A[To]}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ui,this.attachRef=null}}let Ui=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(S,U){const K=this.getOrCreateContext(S);K.outlet=U,this.contexts.set(S,K)}onChildOutletDestroyed(S){const U=this.getContext(S);U&&(U.outlet=null,U.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let U=this.getContext(S);return U||(U=new Ms,this.contexts.set(S,U)),U}getContext(S){return this.contexts.get(S)||null}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const js=!1;let to=(()=>{class A{constructor(S,U,K,ae,Re){this.parentContexts=S,this.location=U,this.changeDetector=ae,this.environmentInjector=Re,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=K||Qe,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,js);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,js);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,js);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,U){this.activated=S,this._activatedRoute=U,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,U){if(this.isActivated)throw new u.vHH(4013,js);this._activatedRoute=S;const K=this.location,Re=S._futureSnapshot.component,xe=this.parentContexts.getOrCreateContext(this.name).children,Lt=new no(S,xe,K.injector);if(U&&function sa(A){return!!A.resolveComponentFactory}(U)){const pn=U.resolveComponentFactory(Re);this.activated=K.createComponent(pn,K.length,Lt)}else this.activated=K.createComponent(Re,{index:K.length,injector:Lt,environmentInjector:U??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(S){return new(S||A)(u.Y36(Ui),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},A.\u0275dir=u.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),A})();class no{constructor(M,S,U){this.route=M,this.childContexts=S,this.parent=U}get(M,S){return M===Es?this.route:M===Ui?this.childContexts:this.parent.get(M,S)}}let zr=(()=>{class A{}return A.\u0275fac=function(S){return new(S||A)},A.\u0275cmp=u.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(S,U){1&S&&u._UZ(0,"router-outlet")},dependencies:[to],encapsulation:2}),A})();function Ia(A,M){return A.providers&&!A._injector&&(A._injector=(0,u.MMx)(A.providers,M,`Route: ${A.path}`)),A._injector??M}function ar(A){const M=A.children&&A.children.map(ar),S=M?{...A,children:M}:{...A};return!S.component&&!S.loadComponent&&(M||S.loadChildren)&&S.outlet&&S.outlet!==Qe&&(S.component=zr),S}function Ds(A){return A.outlet||Qe}function Ji(A,M){const S=A.filter(U=>Ds(U)===M);return S.push(...A.filter(U=>Ds(U)!==M)),S}function Oi(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let M=A.parent;M;M=M.parent){const S=M.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class cr{constructor(M,S,U,K){this.routeReuseStrategy=M,this.futureState=S,this.currState=U,this.forwardEvent=K}activate(M){const S=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,U,M),Xn(this.futureState.root),this.activateChildRoutes(S,U,M)}deactivateChildRoutes(M,S,U){const K=or(S);M.children.forEach(ae=>{const Re=ae.value.outlet;this.deactivateRoutes(ae,K[Re],U),delete K[Re]}),sr(K,(ae,Re)=>{this.deactivateRouteAndItsChildren(ae,U)})}deactivateRoutes(M,S,U){const K=M.value,ae=S?S.value:null;if(K===ae)if(K.component){const Re=U.getContext(K.outlet);Re&&this.deactivateChildRoutes(M,S,Re.children)}else this.deactivateChildRoutes(M,S,U);else ae&&this.deactivateRouteAndItsChildren(S,U)}deactivateRouteAndItsChildren(M,S){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,S):this.deactivateRouteAndOutlet(M,S)}detachAndStoreRouteSubtree(M,S){const U=S.getContext(M.value.outlet),K=U&&M.value.component?U.children:S,ae=or(M);for(const Re of Object.keys(ae))this.deactivateRouteAndItsChildren(ae[Re],K);if(U&&U.outlet){const Re=U.outlet.detach(),xe=U.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Re,route:M,contexts:xe})}}deactivateRouteAndOutlet(M,S){const U=S.getContext(M.value.outlet),K=U&&M.value.component?U.children:S,ae=or(M);for(const Re of Object.keys(ae))this.deactivateRouteAndItsChildren(ae[Re],K);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(M,S,U){const K=or(S);M.children.forEach(ae=>{this.activateRoutes(ae,K[ae.value.outlet],U),this.forwardEvent(new ns(ae.value.snapshot))}),M.children.length&&this.forwardEvent(new Qi(M.value.snapshot))}activateRoutes(M,S,U){const K=M.value,ae=S?S.value:null;if(Xn(K),K===ae)if(K.component){const Re=U.getOrCreateContext(K.outlet);this.activateChildRoutes(M,S,Re.children)}else this.activateChildRoutes(M,S,U);else if(K.component){const Re=U.getOrCreateContext(K.outlet);if(this.routeReuseStrategy.shouldAttach(K.snapshot)){const xe=this.routeReuseStrategy.retrieve(K.snapshot);this.routeReuseStrategy.store(K.snapshot,null),Re.children.onOutletReAttached(xe.contexts),Re.attachRef=xe.componentRef,Re.route=xe.route.value,Re.outlet&&Re.outlet.attach(xe.componentRef,xe.route.value),Xn(xe.route.value),this.activateChildRoutes(M,null,Re.children)}else{const xe=Oi(K.snapshot),Lt=xe?.get(u._Vd)??null;Re.attachRef=null,Re.route=K,Re.resolver=Lt,Re.injector=xe,Re.outlet&&Re.outlet.activateWith(K,Re.injector),this.activateChildRoutes(M,null,Re.children)}}else this.activateChildRoutes(M,null,U)}}class $s{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class aa{constructor(M,S){this.component=M,this.route=S}}function ps(A,M,S){const U=A._root;return ro(U,M?M._root:null,S,[U.value])}function po(A,M){const S=Symbol(),U=M.get(A,S);return U===S?"function"!=typeof A||(0,u.Z0I)(A)?M.get(A):A:U}function ro(A,M,S,U,K={canDeactivateChecks:[],canActivateChecks:[]}){const ae=or(M);return A.children.forEach(Re=>{(function Ua(A,M,S,U,K={canDeactivateChecks:[],canActivateChecks:[]}){const ae=A.value,Re=M?M.value:null,xe=S?S.getContext(A.value.outlet):null;if(Re&&ae.routeConfig===Re.routeConfig){const Lt=function la(A,M,S){if("function"==typeof S)return S(A,M);switch(S){case"pathParamsChange":return!Vn(A.url,M.url);case"pathParamsOrQueryParamsChange":return!Vn(A.url,M.url)||!jn(A.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fs(A,M)||!jn(A.queryParams,M.queryParams);default:return!fs(A,M)}}(Re,ae,ae.routeConfig.runGuardsAndResolvers);Lt?K.canActivateChecks.push(new $s(U)):(ae.data=Re.data,ae._resolvedData=Re._resolvedData),ro(A,M,ae.component?xe?xe.children:null:S,U,K),Lt&&xe&&xe.outlet&&xe.outlet.isActivated&&K.canDeactivateChecks.push(new aa(xe.outlet.component,Re))}else Re&&Yt(M,xe,K),K.canActivateChecks.push(new $s(U)),ro(A,null,ae.component?xe?xe.children:null:S,U,K)})(Re,ae[Re.value.outlet],S,U.concat([Re.value]),K),delete ae[Re.value.outlet]}),sr(ae,(Re,xe)=>Yt(Re,S.getContext(xe),K)),K}function Yt(A,M,S){const U=or(A),K=A.value;sr(U,(ae,Re)=>{Yt(ae,K.component?M?M.children.getContext(Re):null:M,S)}),S.canDeactivateChecks.push(new aa(K.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,K))}function gr(A){return"function"==typeof A}function Z(A){return A instanceof Oe.K||"EmptyError"===A?.name}const q=Symbol("INITIAL_VALUE");function fe(){return(0,gt.w)(A=>(0,Me.a)(A.map(M=>M.pipe((0,qe.q)(1),(0,ze.O)(q)))).pipe((0,jt.U)(M=>{for(const S of M)if(!0!==S){if(S===q)return q;if(!1===S||S instanceof kn)return S}return!0}),(0,$t.h)(M=>M!==q),(0,qe.q)(1)))}function zi(A){return(0,Je.z)((0,Ne.b)(M=>{if(tt(M))throw Vr(0,M)}),(0,jt.U)(M=>!0===M))}const Ci={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function is(A,M,S,U,K){const ae=qr(A,M,S);return ae.matched?function _i(A,M,S,U){const K=M.canMatch;if(!K||0===K.length)return(0,ee.of)(!0);const ae=K.map(Re=>{const xe=po(Re,A);return Tr(function j(A){return A&&gr(A.canMatch)}(xe)?xe.canMatch(M,S):A.runInContext(()=>xe(M,S)))});return(0,ee.of)(ae).pipe(fe(),zi())}(U=Ia(M,U),M,S).pipe((0,jt.U)(Re=>!0===Re?ae:{...Ci})):(0,ee.of)(ae)}function qr(A,M,S){if(""===M.path)return"full"===M.pathMatch&&(A.hasChildren()||S.length>0)?{...Ci}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const K=(M.matcher||an)(S,A,M);if(!K)return{...Ci};const ae={};sr(K.posParams,(xe,Lt)=>{ae[Lt]=xe.path});const Re=K.consumed.length>0?{...ae,...K.consumed[K.consumed.length-1].parameters}:ae;return{matched:!0,consumedSegments:K.consumed,remainingSegments:S.slice(K.consumed.length),parameters:Re,positionalParamSegments:K.posParams??{}}}function gs(A,M,S,U,K="corrected"){if(S.length>0&&function qi(A,M,S){return S.some(U=>vo(A,M,U)&&Ds(U)!==Qe)}(A,S,U)){const Re=new xn(M,function Ki(A,M,S,U){const K={};K[Qe]=U,U._sourceSegment=A,U._segmentIndexShift=M.length;for(const ae of S)if(""===ae.path&&Ds(ae)!==Qe){const Re=new xn([],{});Re._sourceSegment=A,Re._segmentIndexShift=M.length,K[Ds(ae)]=Re}return K}(A,M,U,new xn(S,A.children)));return Re._sourceSegment=A,Re._segmentIndexShift=M.length,{segmentGroup:Re,slicedSegments:[]}}if(0===S.length&&function $o(A,M,S){return S.some(U=>vo(A,M,U))}(A,S,U)){const Re=new xn(A.segments,function jo(A,M,S,U,K,ae){const Re={};for(const xe of U)if(vo(A,S,xe)&&!K[Ds(xe)]){const Lt=new xn([],{});Lt._sourceSegment=A,Lt._segmentIndexShift="legacy"===ae?A.segments.length:M.length,Re[Ds(xe)]=Lt}return{...K,...Re}}(A,M,S,U,A.children,K));return Re._sourceSegment=A,Re._segmentIndexShift=M.length,{segmentGroup:Re,slicedSegments:S}}const ae=new xn(A.segments,A.children);return ae._sourceSegment=A,ae._segmentIndexShift=M.length,{segmentGroup:ae,slicedSegments:S}}function vo(A,M,S){return(!(A.hasChildren()||M.length>0)||"full"!==S.pathMatch)&&""===S.path}function F(A,M,S,U){return!!(Ds(A)===U||U!==Qe&&vo(M,S,A))&&("**"===A.path||qr(M,A,S).matched)}function ne(A,M,S){return 0===M.length&&!A.children[S]}const $=!1;class ce{constructor(M){this.segmentGroup=M||null}}class Ve{constructor(M){this.urlTree=M}}function Ct(A){return(0,we._)(new ce(A))}function Vt(A){return(0,we._)(new Ve(A))}class li{constructor(M,S,U,K,ae){this.injector=M,this.configLoader=S,this.urlSerializer=U,this.urlTree=K,this.config=ae,this.allowRedirects=!0}apply(){const M=gs(this.urlTree.root,[],[],this.config).segmentGroup,S=new xn(M.segments,M.children);return this.expandSegmentGroup(this.injector,this.config,S,Qe).pipe((0,jt.U)(ae=>this.createUrlTree(ve(ae),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ge.K)(ae=>{if(ae instanceof Ve)return this.allowRedirects=!1,this.match(ae.urlTree);throw ae instanceof ce?this.noMatchError(ae):ae}))}match(M){return this.expandSegmentGroup(this.injector,this.config,M.root,Qe).pipe((0,jt.U)(K=>this.createUrlTree(ve(K),M.queryParams,M.fragment))).pipe((0,Ge.K)(K=>{throw K instanceof ce?this.noMatchError(K):K}))}noMatchError(M){return new u.vHH(4002,$)}createUrlTree(M,S,U){const K=Ee(M);return new kn(K,S,U)}expandSegmentGroup(M,S,U,K){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(M,S,U).pipe((0,jt.U)(ae=>new xn([],ae))):this.expandSegment(M,U,S,U.segments,K,!0)}expandChildren(M,S,U){const K=[];for(const ae of Object.keys(U.children))"primary"===ae?K.unshift(ae):K.push(ae);return(0,L.D)(K).pipe((0,bt.b)(ae=>{const Re=U.children[ae],xe=Ji(S,ae);return this.expandSegmentGroup(M,xe,Re,ae).pipe((0,jt.U)(Lt=>({segment:Lt,outlet:ae})))}),(0,wt.R)((ae,Re)=>(ae[Re.outlet]=Re.segment,ae),{}),Mt())}expandSegment(M,S,U,K,ae,Re){return(0,L.D)(U).pipe((0,bt.b)(xe=>this.expandSegmentAgainstRoute(M,S,U,xe,K,ae,Re).pipe((0,Ge.K)(pn=>{if(pn instanceof ce)return(0,ee.of)(null);throw pn}))),(0,Ue.P)(xe=>!!xe),(0,Ge.K)((xe,Lt)=>{if(Z(xe))return ne(S,K,ae)?(0,ee.of)(new xn([],{})):Ct(S);throw xe}))}expandSegmentAgainstRoute(M,S,U,K,ae,Re,xe){return F(K,S,ae,Re)?void 0===K.redirectTo?this.matchSegmentAgainstRoute(M,S,K,ae,Re):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,S,U,K,ae,Re):Ct(S):Ct(S)}expandSegmentAgainstRouteUsingRedirect(M,S,U,K,ae,Re){return"**"===K.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,U,K,Re):this.expandRegularSegmentAgainstRouteUsingRedirect(M,S,U,K,ae,Re)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,S,U,K){const ae=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?Vt(ae):this.lineralizeSegments(U,ae).pipe((0,rt.z)(Re=>{const xe=new xn(Re,{});return this.expandSegment(M,xe,S,Re,K,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,S,U,K,ae,Re){const{matched:xe,consumedSegments:Lt,remainingSegments:pn,positionalParamSegments:Cr}=qr(S,K,ae);if(!xe)return Ct(S);const gn=this.applyRedirectCommands(Lt,K.redirectTo,Cr);return K.redirectTo.startsWith("/")?Vt(gn):this.lineralizeSegments(K,gn).pipe((0,rt.z)(ki=>this.expandSegment(M,S,U,ki.concat(pn),Re,!1)))}matchSegmentAgainstRoute(M,S,U,K,ae){return"**"===U.path?(M=Ia(U,M),U.loadChildren?(U._loadedRoutes?(0,ee.of)({routes:U._loadedRoutes,injector:U._loadedInjector}):this.configLoader.loadChildren(M,U)).pipe((0,jt.U)(xe=>(U._loadedRoutes=xe.routes,U._loadedInjector=xe.injector,new xn(K,{})))):(0,ee.of)(new xn(K,{}))):is(S,U,K,M).pipe((0,gt.w)(({matched:Re,consumedSegments:xe,remainingSegments:Lt})=>Re?this.getChildConfig(M=U._injector??M,U,K).pipe((0,rt.z)(Cr=>{const gn=Cr.injector??M,ki=Cr.routes,{segmentGroup:ms,slicedSegments:Ri}=gs(S,xe,Lt,ki),Fo=new xn(ms.segments,ms.children);if(0===Ri.length&&Fo.hasChildren())return this.expandChildren(gn,ki,Fo).pipe((0,jt.U)(va=>new xn(xe,va)));if(0===ki.length&&0===Ri.length)return(0,ee.of)(new xn(xe,{}));const _a=Ds(U)===ae;return this.expandSegment(gn,Fo,ki,Ri,_a?Qe:ae,!0).pipe((0,jt.U)(ya=>new xn(xe.concat(ya.segments),ya.children)))})):Ct(S)))}getChildConfig(M,S,U){return S.children?(0,ee.of)({routes:S.children,injector:M}):S.loadChildren?void 0!==S._loadedRoutes?(0,ee.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function Wi(A,M,S,U){const K=M.canLoad;if(void 0===K||0===K.length)return(0,ee.of)(!0);const ae=K.map(Re=>{const xe=po(Re,A);return Tr(function ca(A){return A&&gr(A.canLoad)}(xe)?xe.canLoad(M,S):A.runInContext(()=>xe(M,S)))});return(0,ee.of)(ae).pipe(fe(),zi())}(M,S,U).pipe((0,rt.z)(K=>K?this.configLoader.loadChildren(M,S).pipe((0,Ne.b)(ae=>{S._loadedRoutes=ae.routes,S._loadedInjector=ae.injector})):function ai(A){return(0,we._)(wr($,3))}())):(0,ee.of)({routes:[],injector:M})}lineralizeSegments(M,S){let U=[],K=S.root;for(;;){if(U=U.concat(K.segments),0===K.numberOfChildren)return(0,ee.of)(U);if(K.numberOfChildren>1||!K.children[Qe])return(0,we._)(new u.vHH(4e3,$));K=K.children[Qe]}}applyRedirectCommands(M,S,U){return this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),M,U)}applyRedirectCreateUrlTree(M,S,U,K){const ae=this.createSegmentGroup(M,S.root,U,K);return new kn(ae,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(M,S){const U={};return sr(M,(K,ae)=>{if("string"==typeof K&&K.startsWith(":")){const xe=K.substring(1);U[ae]=S[xe]}else U[ae]=K}),U}createSegmentGroup(M,S,U,K){const ae=this.createSegments(M,S.segments,U,K);let Re={};return sr(S.children,(xe,Lt)=>{Re[Lt]=this.createSegmentGroup(M,xe,U,K)}),new xn(ae,Re)}createSegments(M,S,U,K){return S.map(ae=>ae.path.startsWith(":")?this.findPosParam(M,ae,K):this.findOrReturn(ae,U))}findPosParam(M,S,U){const K=U[S.path.substring(1)];if(!K)throw new u.vHH(4001,$);return K}findOrReturn(M,S){let U=0;for(const K of S){if(K.path===M.path)return S.splice(U),K;U++}return M}}class hi{}class ha{constructor(M,S,U,K,ae,Re,xe,Lt){this.injector=M,this.rootComponentType=S,this.config=U,this.urlTree=K,this.url=ae,this.paramsInheritanceStrategy=Re,this.relativeLinkResolution=xe,this.urlSerializer=Lt}recognize(){const M=gs(this.urlTree.root,[],[],this.config.filter(S=>void 0===S.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,M,Qe).pipe((0,jt.U)(S=>{if(null===S)return null;const U=new Mo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qe,this.rootComponentType,null,this.urlTree.root,-1,{}),K=new Pn(U,S),ae=new Oo(this.url,K);return this.inheritParamsAndData(ae._root),ae}))}inheritParamsAndData(M){const S=M.value,U=Vi(S,this.paramsInheritanceStrategy);S.params=Object.freeze(U.params),S.data=Object.freeze(U.data),M.children.forEach(K=>this.inheritParamsAndData(K))}processSegmentGroup(M,S,U,K){return 0===U.segments.length&&U.hasChildren()?this.processChildren(M,S,U):this.processSegment(M,S,U,U.segments,K)}processChildren(M,S,U){return(0,L.D)(Object.keys(U.children)).pipe((0,bt.b)(K=>{const ae=U.children[K],Re=Ji(S,K);return this.processSegmentGroup(M,Re,ae,K)}),(0,wt.R)((K,ae)=>K&&ae?(K.push(...ae),K):null),function en(A,M=!1){return(0,mt.e)((S,U)=>{let K=0;S.subscribe((0,lt.x)(U,ae=>{const Re=A(ae,K++);(Re||M)&&U.next(ae),!Re&&U.complete()}))})}(K=>null!==K),(0,Kt.d)(null),Mt(),(0,jt.U)(K=>{if(null===K)return null;const ae=os(K);return function fa(A){A.sort((M,S)=>M.value.outlet===Qe?-1:S.value.outlet===Qe?1:M.value.outlet.localeCompare(S.value.outlet))}(ae),ae}))}processSegment(M,S,U,K,ae){return(0,L.D)(S).pipe((0,bt.b)(Re=>this.processSegmentAgainstRoute(Re._injector??M,Re,U,K,ae)),(0,Ue.P)(Re=>!!Re),(0,Ge.K)(Re=>{if(Z(Re))return ne(U,K,ae)?(0,ee.of)([]):(0,ee.of)(null);throw Re}))}processSegmentAgainstRoute(M,S,U,K,ae){if(S.redirectTo||!F(S,U,K,ae))return(0,ee.of)(null);let Re;if("**"===S.path){const xe=K.length>0?Nr(K).parameters:{},Lt=Xi(U)+K.length,pn=new Mo(K,xe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gu(S),Ds(S),S.component??S._loadedComponent??null,S,Go(U),Lt,yl(S),Lt);Re=(0,ee.of)({snapshot:pn,consumedSegments:[],remainingSegments:[]})}else Re=is(U,S,K,M).pipe((0,jt.U)(({matched:xe,consumedSegments:Lt,remainingSegments:pn,parameters:Cr})=>{if(!xe)return null;const gn=Xi(U)+Lt.length;return{snapshot:new Mo(Lt,Cr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gu(S),Ds(S),S.component??S._loadedComponent??null,S,Go(U),gn,yl(S),gn),consumedSegments:Lt,remainingSegments:pn}}));return Re.pipe((0,gt.w)(xe=>{if(null===xe)return(0,ee.of)(null);const{snapshot:Lt,consumedSegments:pn,remainingSegments:Cr}=xe;M=S._injector??M;const gn=S._loadedInjector??M,ki=function Ha(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(S),{segmentGroup:ms,slicedSegments:Ri}=gs(U,pn,Cr,ki.filter(_a=>void 0===_a.redirectTo),this.relativeLinkResolution);if(0===Ri.length&&ms.hasChildren())return this.processChildren(gn,ki,ms).pipe((0,jt.U)(_a=>null===_a?null:[new Pn(Lt,_a)]));if(0===ki.length&&0===Ri.length)return(0,ee.of)([new Pn(Lt,[])]);const Fo=Ds(S)===ae;return this.processSegment(gn,ki,ms,Ri,Fo?Qe:ae).pipe((0,jt.U)(_a=>null===_a?null:[new Pn(Lt,_a)]))}))}}function Co(A){const M=A.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function os(A){const M=[],S=new Set;for(const U of A){if(!Co(U)){M.push(U);continue}const K=M.find(ae=>U.value.routeConfig===ae.value.routeConfig);void 0!==K?(K.children.push(...U.children),S.add(K)):M.push(U)}for(const U of S){const K=os(U.children);M.push(new Pn(U.value,K))}return M.filter(U=>!S.has(U))}function Go(A){let M=A;for(;M._sourceSegment;)M=M._sourceSegment;return M}function Xi(A){let M=A,S=M._segmentIndexShift??0;for(;M._sourceSegment;)M=M._sourceSegment,S+=M._segmentIndexShift??0;return S-1}function Gu(A){return A.data||{}}function yl(A){return A.resolve||{}}function vl(A){return"string"==typeof A.title||null===A.title}function io(A){return(0,gt.w)(M=>{const S=A(M);return S?(0,L.D)(S).pipe((0,jt.U)(()=>M)):(0,ee.of)(M)})}let Ts=(()=>{class A{buildTitle(S){let U,K=S.root;for(;void 0!==K;)U=this.getResolvedTitleForRoute(K)??U,K=K.children.find(ae=>ae.outlet===Qe);return U}getResolvedTitleForRoute(S){return S.data[Fe]}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(tl)},providedIn:"root"}),A})(),tl=(()=>{class A extends Ts{constructor(S){super(),this.title=S}updateTitle(S){const U=this.buildTitle(S);void 0!==U&&this.title.setTitle(U)}}return A.\u0275fac=function(S){return new(S||A)(u.LFG(Le.Dx))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class zu{}class Hi extends class rn{shouldDetach(M){return!1}store(M,S){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,S){return M.routeConfig===S.routeConfig}}{}const us=new u.OlP("",{providedIn:"root",factory:()=>({})}),wn=new u.OlP("ROUTES");let Il=(()=>{class A{constructor(S,U){this.injector=S,this.compiler=U,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,ee.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const U=Tr(S.loadComponent()).pipe((0,Ne.b)(ae=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=ae}),(0,ie.x)(()=>{this.componentLoaders.delete(S)})),K=new yt(U,()=>new ut.x).pipe(xt());return this.componentLoaders.set(S,K),K}loadChildren(S,U){if(this.childrenLoaders.get(U))return this.childrenLoaders.get(U);if(U._loadedRoutes)return(0,ee.of)({routes:U._loadedRoutes,injector:U._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(U);const ae=this.loadModuleFactoryOrRoutes(U.loadChildren).pipe((0,jt.U)(xe=>{this.onLoadEndListener&&this.onLoadEndListener(U);let Lt,pn,Cr=!1;Array.isArray(xe)?pn=xe:(Lt=xe.create(S).injector,pn=br(Lt.get(wn,[],u.XFs.Self|u.XFs.Optional)));return{routes:pn.map(ar),injector:Lt}}),(0,ie.x)(()=>{this.childrenLoaders.delete(U)})),Re=new yt(ae,()=>new ut.x).pipe(xt());return this.childrenLoaders.set(U,Re),Re}loadModuleFactoryOrRoutes(S){return Tr(S()).pipe((0,rt.z)(U=>U instanceof u.YKP||Array.isArray(U)?(0,ee.of)(U):(0,L.D)(this.compiler.compileModuleAsync(U))))}}return A.\u0275fac=function(S){return new(S||A)(u.LFG(u.zs3),u.LFG(u.Sil))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class on{}class kt{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,S){return M}}function Ii(A){throw A}function Cs(A,M,S){return M.parse("/")}const Is={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ma={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function nl(){const A=(0,u.f3M)(vn),M=(0,u.f3M)(Ui),S=(0,u.f3M)($e.Ye),U=(0,u.f3M)(u.zs3),K=(0,u.f3M)(u.Sil),ae=(0,u.f3M)(wn,{optional:!0})??[],Re=(0,u.f3M)(us,{optional:!0})??{},xe=(0,u.f3M)(tl),Lt=(0,u.f3M)(Ts,{optional:!0}),pn=(0,u.f3M)(on,{optional:!0}),Cr=(0,u.f3M)(zu,{optional:!0}),gn=new qs(null,A,M,S,U,K,br(ae));return pn&&(gn.urlHandlingStrategy=pn),Cr&&(gn.routeReuseStrategy=Cr),gn.titleStrategy=Lt??xe,function Aa(A,M){A.errorHandler&&(M.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(M.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(M.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(M.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(M.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(M.canceledNavigationResolution=A.canceledNavigationResolution)}(Re,gn),gn}let qs=(()=>{class A{constructor(S,U,K,ae,Re,xe,Lt){this.rootComponentType=S,this.urlSerializer=U,this.rootContexts=K,this.location=ae,this.config=Lt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ut.x,this.errorHandler=Ii,this.malformedUriErrorHandler=Cs,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,ee.of)(void 0),this.urlHandlingStrategy=new kt,this.routeReuseStrategy=new Hi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Re.get(Il),this.configLoader.onLoadEndListener=ki=>this.triggerEvent(new Us(ki)),this.configLoader.onLoadStartListener=ki=>this.triggerEvent(new Vo(ki)),this.ngModule=Re.get(u.h0i),this.console=Re.get(u.c2e);const gn=Re.get(u.R0b);this.isNgZoneEnabled=gn instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(Lt),this.currentUrlTree=function Rr(){return new kn(new xn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ei(this.currentUrlTree,this.rootComponentType),this.transitions=new Se.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(S){const U=this.events;return S.pipe((0,$t.h)(K=>0!==K.id),(0,jt.U)(K=>({...K,extractedUrl:this.urlHandlingStrategy.extract(K.rawUrl)})),(0,gt.w)(K=>{let ae=!1,Re=!1;return(0,ee.of)(K).pipe((0,Ne.b)(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.rawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gt.w)(xe=>{const Lt=this.browserUrlTree.toString(),pn=!this.navigated||xe.extractedUrl.toString()!==Lt||Lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||pn)&&this.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return Hl(xe.source)&&(this.browserUrlTree=xe.extractedUrl),(0,ee.of)(xe).pipe((0,gt.w)(gn=>{const ki=this.transitions.getValue();return U.next(new Bs(gn.id,this.serializeUrl(gn.extractedUrl),gn.source,gn.restoredState)),ki!==this.transitions.getValue()?He.E:Promise.resolve(gn)}),function Qr(A,M,S,U){return(0,gt.w)(K=>function di(A,M,S,U,K){return new li(A,M,S,U,K).apply()}(A,M,S,K.extractedUrl,U).pipe((0,jt.U)(ae=>({...K,urlAfterRedirects:ae}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ne.b)(gn=>{this.currentNavigation={...this.currentNavigation,finalUrl:gn.urlAfterRedirects},K.urlAfterRedirects=gn.urlAfterRedirects}),function lu(A,M,S,U,K,ae){return(0,rt.z)(Re=>function da(A,M,S,U,K,ae,Re="emptyOnly",xe="legacy"){return new ha(A,M,S,U,K,Re,xe,ae).recognize().pipe((0,gt.w)(Lt=>null===Lt?function xi(A){return new ye.y(M=>M.error(A))}(new hi):(0,ee.of)(Lt)))}(A,M,S,Re.urlAfterRedirects,U.serialize(Re.urlAfterRedirects),U,K,ae).pipe((0,jt.U)(xe=>({...Re,targetSnapshot:xe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ne.b)(gn=>{if(K.targetSnapshot=gn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!gn.extras.skipLocationChange){const ms=this.urlHandlingStrategy.merge(gn.urlAfterRedirects,gn.rawUrl);this.setBrowserUrl(ms,gn)}this.browserUrlTree=gn.urlAfterRedirects}const ki=new Vs(gn.id,this.serializeUrl(gn.extractedUrl),this.serializeUrl(gn.urlAfterRedirects),gn.targetSnapshot);U.next(ki)}));if(pn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ki,extractedUrl:ms,source:Ri,restoredState:Fo,extras:_a}=xe,Iu=new Bs(ki,this.serializeUrl(ms),Ri,Fo);U.next(Iu);const ya=ei(ms,this.rootComponentType).snapshot;return K={...xe,targetSnapshot:ya,urlAfterRedirects:ms,extras:{..._a,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(K)}return this.rawUrlTree=xe.rawUrl,xe.resolve(null),He.E}),(0,Ne.b)(xe=>{const Lt=new na(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(Lt)}),(0,jt.U)(xe=>K={...xe,guards:ps(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)}),function Ae(A,M){return(0,rt.z)(S=>{const{targetSnapshot:U,currentSnapshot:K,guards:{canActivateChecks:ae,canDeactivateChecks:Re}}=S;return 0===Re.length&&0===ae.length?(0,ee.of)({...S,guardsResult:!0}):function je(A,M,S,U){return(0,L.D)(A).pipe((0,rt.z)(K=>function qn(A,M,S,U,K){const ae=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!ae||0===ae.length)return(0,ee.of)(!0);const Re=ae.map(xe=>{const Lt=Oi(M)??K,pn=po(xe,Lt);return Tr(function W(A){return A&&gr(A.canDeactivate)}(pn)?pn.canDeactivate(A,M,S,U):Lt.runInContext(()=>pn(A,M,S,U))).pipe((0,Ue.P)())});return(0,ee.of)(Re).pipe(fe())}(K.component,K.route,S,M,U)),(0,Ue.P)(K=>!0!==K,!0))}(Re,U,K,A).pipe((0,rt.z)(xe=>xe&&function ua(A){return"boolean"==typeof A}(xe)?function Tt(A,M,S,U){return(0,L.D)(M).pipe((0,bt.b)(K=>(0,We.z)(function Bn(A,M){return null!==A&&M&&M(new ra(A)),(0,ee.of)(!0)}(K.route.parent,U),function _t(A,M){return null!==A&&M&&M(new Uo(A)),(0,ee.of)(!0)}(K.route,U),function lr(A,M,S){const U=M[M.length-1],ae=M.slice(0,M.length-1).reverse().map(Re=>function _l(A){const M=A.routeConfig?A.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:A,guards:M}:null}(Re)).filter(Re=>null!==Re).map(Re=>(0,ke.P)(()=>{const xe=Re.guards.map(Lt=>{const pn=Oi(Re.node)??S,Cr=po(Lt,pn);return Tr(function Q(A){return A&&gr(A.canActivateChild)}(Cr)?Cr.canActivateChild(U,A):pn.runInContext(()=>Cr(U,A))).pipe((0,Ue.P)())});return(0,ee.of)(xe).pipe(fe())}));return(0,ee.of)(ae).pipe(fe())}(A,K.path,S),function Dn(A,M,S){const U=M.routeConfig?M.routeConfig.canActivate:null;if(!U||0===U.length)return(0,ee.of)(!0);const K=U.map(ae=>(0,ke.P)(()=>{const Re=Oi(M)??S,xe=po(ae,Re);return Tr(function rs(A){return A&&gr(A.canActivate)}(xe)?xe.canActivate(M,A):Re.runInContext(()=>xe(M,A))).pipe((0,Ue.P)())}));return(0,ee.of)(K).pipe(fe())}(A,K.route,S))),(0,Ue.P)(K=>!0!==K,!0))}(U,ae,A,M):(0,ee.of)(xe)),(0,jt.U)(xe=>({...S,guardsResult:xe})))})}(this.ngModule.injector,xe=>this.triggerEvent(xe)),(0,Ne.b)(xe=>{if(K.guardsResult=xe.guardsResult,tt(xe.guardsResult))throw Vr(0,xe.guardsResult);const Lt=new zs(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.triggerEvent(Lt)}),(0,$t.h)(xe=>!!xe.guardsResult||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,"",3),!1)),io(xe=>{if(xe.guards.canActivateChecks.length)return(0,ee.of)(xe).pipe((0,Ne.b)(Lt=>{const pn=new Ks(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(pn)}),(0,gt.w)(Lt=>{let pn=!1;return(0,ee.of)(Lt).pipe(function Cl(A,M){return(0,rt.z)(S=>{const{targetSnapshot:U,guards:{canActivateChecks:K}}=S;if(!K.length)return(0,ee.of)(S);let ae=0;return(0,L.D)(K).pipe((0,bt.b)(Re=>function pa(A,M,S,U){const K=A.routeConfig,ae=A._resolve;return void 0!==K?.title&&!vl(K)&&(ae[Fe]=K.title),function Sa(A,M,S,U){const K=function bu(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===K.length)return(0,ee.of)({});const ae={};return(0,L.D)(K).pipe((0,rt.z)(Re=>function Wu(A,M,S,U){const K=Oi(M)??U,ae=po(A,K);return Tr(ae.resolve?ae.resolve(M,S):K.runInContext(()=>ae(M,S)))}(A[Re],M,S,U).pipe((0,Ue.P)(),(0,Ne.b)(xe=>{ae[Re]=xe}))),nt(1),(0,ge.h)(ae),(0,Ge.K)(Re=>Z(Re)?He.E:(0,we._)(Re)))}(ae,A,M,U).pipe((0,jt.U)(Re=>(A._resolvedData=Re,A.data=Vi(A,S).resolve,K&&vl(K)&&(A.data[Fe]=K.title),null)))}(Re.route,U,A,M)),(0,Ne.b)(()=>ae++),nt(1),(0,rt.z)(Re=>ae===K.length?(0,ee.of)(S):He.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ne.b)({next:()=>pn=!0,complete:()=>{pn||(this.restoreHistory(Lt),this.cancelNavigationTransition(Lt,"",2))}}))}),(0,Ne.b)(Lt=>{const pn=new Gi(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(pn)}))}),io(xe=>{const Lt=pn=>{const Cr=[];pn.routeConfig?.loadComponent&&!pn.routeConfig._loadedComponent&&Cr.push(this.configLoader.loadComponent(pn.routeConfig).pipe((0,Ne.b)(gn=>{pn.component=gn}),(0,jt.U)(()=>{})));for(const gn of pn.children)Cr.push(...Lt(gn));return Cr};return(0,Me.a)(Lt(xe.targetSnapshot.root)).pipe((0,Kt.d)(),(0,qe.q)(1))}),io(()=>this.afterPreactivation()),(0,jt.U)(xe=>{const Lt=function Wr(A,M,S){const U=eo(A,M._root,S?S._root:void 0);return new Ei(U,M)}(this.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return K={...xe,targetRouterState:Lt}}),(0,Ne.b)(xe=>{this.currentUrlTree=xe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl),this.routerState=xe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(xe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,xe),this.browserUrlTree=xe.urlAfterRedirects)}),((A,M,S)=>(0,jt.U)(U=>(new cr(M,U.targetRouterState,U.currentRouterState,S).activate(A),U)))(this.rootContexts,this.routeReuseStrategy,xe=>this.triggerEvent(xe)),(0,Ne.b)({next(){ae=!0},complete(){ae=!0}}),(0,ie.x)(()=>{ae||Re||this.cancelNavigationTransition(K,"",1),this.currentNavigation?.id===K.id&&(this.currentNavigation=null)}),(0,Ge.K)(xe=>{if(Re=!0,ia(xe)){Ni(xe)||(this.navigated=!0,this.restoreHistory(K,!0));const Lt=new Ta(K.id,this.serializeUrl(K.extractedUrl),xe.message,xe.cancellationCode);if(U.next(Lt),Ni(xe)){const pn=this.urlHandlingStrategy.merge(xe.url,this.rawUrlTree),Cr={skipLocationChange:K.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hl(K.source)};this.scheduleNavigation(pn,"imperative",null,Cr,{resolve:K.resolve,reject:K.reject,promise:K.promise})}else K.resolve(!1)}else{this.restoreHistory(K,!0);const Lt=new fr(K.id,this.serializeUrl(K.extractedUrl),xe,K.targetSnapshot??void 0);U.next(Lt);try{K.resolve(this.errorHandler(xe))}catch(pn){K.reject(pn)}}return He.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next({...this.transitions.value,...S})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const U="popstate"===S.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{const K={replaceUrl:!0},ae=S.state?.navigationId?S.state:null;if(ae){const xe={...ae};delete xe.navigationId,delete xe.\u0275routerPageId,0!==Object.keys(xe).length&&(K.state=xe)}const Re=this.parseUrl(S.url);this.scheduleNavigation(Re,U,ae,K)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){this.config=S.map(ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,U={}){const{relativeTo:K,queryParams:ae,fragment:Re,queryParamsHandling:xe,preserveFragment:Lt}=U,pn=K||this.routerState.root,Cr=Lt?this.currentUrlTree.fragment:Re;let gn=null;switch(xe){case"merge":gn={...this.currentUrlTree.queryParams,...ae};break;case"preserve":gn=this.currentUrlTree.queryParams;break;default:gn=ae||null}return null!==gn&&(gn=this.removeEmptyProps(gn)),Ar(pn,this.currentUrlTree,S,gn,Cr??null)}navigateByUrl(S,U={skipLocationChange:!1}){const K=tt(S)?S:this.parseUrl(S),ae=this.urlHandlingStrategy.merge(K,this.rawUrlTree);return this.scheduleNavigation(ae,"imperative",null,U)}navigate(S,U={skipLocationChange:!1}){return function Sl(A){for(let M=0;M<A.length;M++){if(null==A[M])throw new u.vHH(4008,false)}}(S),this.navigateByUrl(this.createUrlTree(S,U),U)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let U;try{U=this.urlSerializer.parse(S)}catch(K){U=this.malformedUriErrorHandler(K,this.urlSerializer,S)}return U}isActive(S,U){let K;if(K=!0===U?{...Is}:!1===U?{...ma}:U,tt(S))return Xr(this.currentUrlTree,S,K);const ae=this.parseUrl(S);return Xr(this.currentUrlTree,ae,K)}removeEmptyProps(S){return Object.keys(S).reduce((U,K)=>{const ae=S[K];return null!=ae&&(U[K]=ae),U},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new oi(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,U,K,ae,Re){if(this.disposed)return Promise.resolve(!1);let xe,Lt,pn;Re?(xe=Re.resolve,Lt=Re.reject,pn=Re.promise):pn=new Promise((ki,ms)=>{xe=ki,Lt=ms});const Cr=++this.navigationId;let gn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(K=this.location.getState()),gn=K&&K.\u0275routerPageId?K.\u0275routerPageId:ae.replaceUrl||ae.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):gn=0,this.setTransition({id:Cr,targetPageId:gn,source:U,restoredState:K,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:ae,resolve:xe,reject:Lt,promise:pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pn.catch(ki=>Promise.reject(ki))}setBrowserUrl(S,U){const K=this.urlSerializer.serialize(S),ae={...U.extras.state,...this.generateNgRouterState(U.id,U.targetPageId)};this.location.isCurrentPathEqualTo(K)||U.extras.replaceUrl?this.location.replaceState(K,"",ae):this.location.go(K,"",ae)}restoreHistory(S,U=!1){if("computed"===this.canceledNavigationResolution){const K=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===K?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===K&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(K)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,U,K){const ae=new Ta(S.id,this.serializeUrl(S.extractedUrl),U,K);this.triggerEvent(ae),S.resolve(!1)}generateNgRouterState(S,U){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:U}:{navigationId:S}}}return A.\u0275fac=function(S){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:function(){return nl()},providedIn:"root"}),A})();function Hl(A){return"imperative"!==A}let Wo=(()=>{class A{constructor(S,U,K,ae,Re){this.router=S,this.route=U,this.tabIndexAttribute=K,this.renderer=ae,this.el=Re,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ut.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(S){this._preserveFragment=(0,u.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,u.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,u.D6c)(S)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const U=this.renderer,K=this.el.nativeElement;null!==S?U.setAttribute(K,"tabindex",S):U.removeAttribute(K,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(S){return new(S||A)(u.Y36(qs),u.Y36(Es),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},A.\u0275dir=u.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,U){1&S&&u.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),A})(),wu=(()=>{class A{constructor(S,U,K){this.router=S,this.route=U,this.locationStrategy=K,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ut.x,this.subscription=S.events.subscribe(ae=>{ae instanceof oi&&this.updateTargetUrlAndHref()})}set preserveFragment(S){this._preserveFragment=(0,u.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,u.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,u.D6c)(S)}get replaceUrl(){return this._replaceUrl}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,U,K,ae,Re){return!!(0!==S||U||K||ae||Re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(S){return new(S||A)(u.Y36(qs),u.Y36(Es),u.Y36($e.S$))},A.\u0275dir=u.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,U){1&S&&u.NdJ("click",function(ae){return U.onClick(ae.button,ae.ctrlKey,ae.shiftKey,ae.altKey,ae.metaKey)}),2&S&&u.uIk("target",U.target)("href",U.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),A})(),Al=(()=>{class A{constructor(S,U,K,ae,Re,xe){this.router=S,this.element=U,this.renderer=K,this.cdr=ae,this.link=Re,this.linkWithHref=xe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=S.events.subscribe(Lt=>{Lt instanceof oi&&this.update()})}ngAfterContentInit(){(0,ee.of)(this.links.changes,this.linksWithHrefs.changes,(0,ee.of)(null)).pipe((0,Bt.J)()).subscribe(S=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const S=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(U=>!!U).map(U=>U.onChanges);this.linkInputChangesSubscription=(0,L.D)(S).pipe((0,Bt.J)()).subscribe(U=>{this.isActive!==this.isLinkActive(this.router)(U)&&this.update()})}set routerLinkActive(S){const U=Array.isArray(S)?S:S.split(" ");this.classes=U.filter(K=>!!K)}ngOnChanges(S){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const S=this.hasActiveLinks();this.isActive!==S&&(this.isActive=S,this.cdr.markForCheck(),this.classes.forEach(U=>{S?this.renderer.addClass(this.element.nativeElement,U):this.renderer.removeClass(this.element.nativeElement,U)}),S&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(S))})}isLinkActive(S){const U=function Er(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return K=>!!K.urlTree&&S.isActive(K.urlTree,U)}hasActiveLinks(){const S=this.isLinkActive(this.router);return this.link&&S(this.link)||this.linkWithHref&&S(this.linkWithHref)||this.links.some(S)||this.linksWithHrefs.some(S)}}return A.\u0275fac=function(S){return new(S||A)(u.Y36(qs),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Wo,8),u.Y36(wu,8))},A.\u0275dir=u.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(S,U,K){if(1&S&&(u.Suo(K,Wo,5),u.Suo(K,wu,5)),2&S){let ae;u.iGM(ae=u.CRH())&&(U.links=ae),u.iGM(ae=u.CRH())&&(U.linksWithHrefs=ae)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]}),A})();class Zo{}let zn=(()=>{class A{constructor(S,U,K,ae,Re){this.router=S,this.injector=K,this.preloadingStrategy=ae,this.loader=Re}setUpPreloading(){this.subscription=this.router.events.pipe((0,$t.h)(S=>S instanceof oi),(0,bt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,U){const K=[];for(const ae of U){ae.providers&&!ae._injector&&(ae._injector=(0,u.MMx)(ae.providers,S,`Route: ${ae.path}`));const Re=ae._injector??S,xe=ae._loadedInjector??Re;ae.loadChildren&&!ae._loadedRoutes&&void 0===ae.canLoad||ae.loadComponent&&!ae._loadedComponent?K.push(this.preloadConfig(Re,ae)):(ae.children||ae._loadedRoutes)&&K.push(this.processRoutes(xe,ae.children??ae._loadedRoutes))}return(0,L.D)(K).pipe((0,Bt.J)())}preloadConfig(S,U){return this.preloadingStrategy.preload(U,()=>{let K;K=U.loadChildren&&void 0===U.canLoad?this.loader.loadChildren(S,U):(0,ee.of)(null);const ae=K.pipe((0,rt.z)(Re=>null===Re?(0,ee.of)(void 0):(U._loadedRoutes=Re.routes,U._loadedInjector=Re.injector,this.processRoutes(Re.injector??S,Re.routes))));if(U.loadComponent&&!U._loadedComponent){const Re=this.loader.loadComponent(U);return(0,L.D)([ae,Re]).pipe((0,Bt.J)())}return ae})}}return A.\u0275fac=function(S){return new(S||A)(u.LFG(qs),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Zo),u.LFG(Il))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Ys=new u.OlP("");let ti=(()=>{class A{constructor(S,U,K={}){this.router=S,this.viewportScroller=U,this.options=K,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},K.scrollPositionRestoration=K.scrollPositionRestoration||"disabled",K.anchorScrolling=K.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Bs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof oi&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof ct&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,U){this.router.triggerEvent(new ct(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(S){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();function go(A,M){return{\u0275kind:A,\u0275providers:M}}function Na(A){return[{provide:wn,multi:!0,useValue:A}]}function Ma(){const A=(0,u.f3M)(u.zs3);return M=>{const S=A.get(u.z2F);if(M!==S.components[0])return;const U=A.get(qs),K=A.get(ko);1===A.get(dl)&&U.initialNavigation(),A.get(ja,null,u.XFs.Optional)?.setUpPreloading(),A.get(Ys,null,u.XFs.Optional)?.init(),U.resetRootComponentType(S.componentTypes[0]),K.closed||(K.next(),K.unsubscribe())}}const ko=new u.OlP("",{factory:()=>new ut.x}),dl=new u.OlP("",{providedIn:"root",factory:()=>1});const ja=new u.OlP("");function Du(A){return go(0,[{provide:ja,useExisting:zn},{provide:Zo,useExisting:A}])}const rl=new u.OlP("ROUTER_FORROOT_GUARD"),At=[$e.Ye,{provide:vn,useClass:Di},{provide:qs,useFactory:nl},Ui,{provide:Es,useFactory:function _n(A){return A.routerState.root},deps:[qs]},Il];function Cu(){return new u.PXZ("Router",qs)}let yi=(()=>{class A{constructor(S){}static forRoot(S,U){return{ngModule:A,providers:[At,[],Na(S),{provide:rl,useFactory:Yu,deps:[[qs,new u.FiY,new u.tp0]]},{provide:us,useValue:U||{}},U?.useHash?{provide:$e.S$,useClass:$e.Do}:{provide:$e.S$,useClass:$e.b0},{provide:Ys,useFactory:()=>{const A=(0,u.f3M)(qs),M=(0,u.f3M)($e.EM),S=(0,u.f3M)(us);return S.scrollOffset&&M.setOffset(S.scrollOffset),new ti(A,M,S)}},U?.preloadingStrategy?Du(U.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:Cu},U?.initialNavigation?Os(U):[],[{provide:Oa,useFactory:Ma},{provide:u.tb,multi:!0,useExisting:Oa}]]}}static forChild(S){return{ngModule:A,providers:[Na(S)]}}}return A.\u0275fac=function(S){return new(S||A)(u.LFG(rl,8))},A.\u0275mod=u.oAB({type:A}),A.\u0275inj=u.cJS({imports:[zr]}),A})();function Yu(A){return"guarded"}function Os(A){return["disabled"===A.initialNavigation?go(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const M=(0,u.f3M)(qs);return()=>{M.setUpLocationChangeListener()}}},{provide:dl,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?go(2,[{provide:dl,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:M=>{const S=M.get($e.V_,Promise.resolve());let U=!1;return()=>S.then(()=>new Promise(ae=>{const Re=M.get(qs),xe=M.get(ko);(function K(ae){M.get(qs).events.pipe((0,$t.h)(xe=>xe instanceof oi||xe instanceof Ta||xe instanceof fr),(0,jt.U)(xe=>xe instanceof oi||xe instanceof Ta&&(0===xe.code||1===xe.code)&&null),(0,$t.h)(xe=>null!==xe),(0,qe.q)(1)).subscribe(()=>{ae()})})(()=>{ae(!0),U=!0}),Re.afterPreactivation=()=>(ae(!0),U||xe.closed?(0,ee.of)(void 0):xe),Re.initialNavigation()}))}}]).\u0275providers:[]]}const Oa=new u.OlP("")},3942:(hn,dt,B)=>{B.d(dt,{Z:()=>lt});var u=B(2090),L=B(4859),ee=B(9681),Se=B(1877);class Oe{constructor(yt,ut){this._delegate=yt,this.firebase=ut,(0,ee._addComponent)(yt,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(yt,ut=ee._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const jt=this._delegate.container.getProvider(yt);return!jt.isInitialized()&&"EXPLICIT"===(null===($e=jt.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&jt.initialize(),jt.getImmediate({identifier:ut})}_removeServiceInstance(yt,ut=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(ut)}_addComponent(yt){(0,ee._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,ee._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const We=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),we=function Je(){const xt=function ke(xt){const yt={},ut={__esModule:!0,initializeApp:function gt(rt,Ue={}){const bt=ee.initializeApp(rt,Ue);if((0,u.r3)(yt,bt.name))return yt[bt.name];const Ne=new xt(bt,ut);return yt[bt.name]=Ne,Ne},app:jt,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function ze(rt){const Ue=rt.name,bt=Ue.replace("-compat","");if(ee._registerComponent(rt)&&"PUBLIC"===rt.type){const Ne=(Ge=jt())=>{if("function"!=typeof Ge[bt])throw We.create("invalid-app-argument",{appName:Ue});return Ge[bt]()};void 0!==rt.serviceProps&&(0,u.ZB)(Ne,rt.serviceProps),ut[bt]=Ne,xt.prototype[bt]=function(...Ge){return this._getService.bind(this,Ue).apply(this,rt.multipleInstances?Ge:[])}}return"PUBLIC"===rt.type?ut[bt]:null},removeApp:function $e(rt){delete yt[rt]},useAsService:function $t(rt,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:ee}};function jt(rt){if(!(0,u.r3)(yt,rt=rt||ee._DEFAULT_ENTRY_NAME))throw We.create("no-app",{appName:rt});return yt[rt]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function qe(){return Object.keys(yt).map(rt=>yt[rt])}}),jt.App=xt,ut}(Oe);return xt.INTERNAL=Object.assign(Object.assign({},xt.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function yt(ut){(0,u.ZB)(xt,ut)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),xt}(),ye=new Se.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){ye.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&ye.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=we;!function mt(xt){(0,ee.registerVersion)("@firebase/app-compat","0.2.0",xt)}()},9681:(hn,dt,B)=>{B.r(dt),B.d(dt,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>Le,_addOrOverwriteComponent:()=>Qe,_apps:()=>ie,_clearComponents:()=>an,_components:()=>Bt,_getProvider:()=>st,_registerComponent:()=>Fe,_removeServiceInstance:()=>Xt,deleteApp:()=>Tr,getApp:()=>Wn,getApps:()=>sr,initializeApp:()=>Nr,onLog:()=>er,registerVersion:()=>Rr,setLogLevel:()=>ur});var u=B(5861),L=B(4859),ee=B(1877),Se=B(2090),Oe=B(8766);class Me{constructor(Ut){this.container=Ut}getPlatformInfoString(){return this.container.getProviders().map(En=>{if(function We(yn){return"VERSION"===yn.getComponent()?.type}(En)){const Gn=En.getImmediate();return`${Gn.library}/${Gn.version}`}return null}).filter(En=>En).join(" ")}}const ke="@firebase/app",we=new ee.Yd("@firebase/app"),en="[DEFAULT]",ge={[ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ie=new Map,Bt=new Map;function Le(yn,Ut){try{yn.container.addComponent(Ut)}catch(En){we.debug(`Component ${Ut.name} failed to register with FirebaseApp ${yn.name}`,En)}}function Qe(yn,Ut){yn.container.addOrOverwriteComponent(Ut)}function Fe(yn){const Ut=yn.name;if(Bt.has(Ut))return we.debug(`There were multiple attempts to register component ${Ut}.`),!1;Bt.set(Ut,yn);for(const En of ie.values())Le(En,yn);return!0}function st(yn,Ut){const En=yn.container.getProvider("heartbeat").getImmediate({optional:!0});return En&&En.triggerHeartbeat(),yn.container.getProvider(Ut)}function Xt(yn,Ut,En=en){st(yn,Ut).clearInstance(En)}function an(){Bt.clear()}const jn=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ii{constructor(Ut,En,Gn){this._isDeleted=!1,this._options=Object.assign({},Ut),this._config=Object.assign({},En),this._name=En.name,this._automaticDataCollectionEnabled=En.automaticDataCollectionEnabled,this._container=Gn,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ut){this._isDeleted=Ut}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const br="9.15.0";function Nr(yn,Ut={}){let En=yn;"object"!=typeof Ut&&(Ut={name:Ut});const Gn=Object.assign({name:en,automaticDataCollectionEnabled:!1},Ut),Ln=Gn.name;if("string"!=typeof Ln||!Ln)throw jn.create("bad-app-name",{appName:String(Ln)});if(En||(En=(0,Se.aH)()),!En)throw jn.create("no-options");const tr=ie.get(Ln);if(tr){if((0,Se.vZ)(En,tr.options)&&(0,Se.vZ)(Gn,tr.config))return tr;throw jn.create("duplicate-app",{appName:Ln})}const Be=new L.H0(Ln);for(const Ze of Bt.values())Be.addComponent(Ze);const Pe=new ii(En,Gn,Be);return ie.set(Ln,Pe),Pe}function Wn(yn=en){const Ut=ie.get(yn);if(!Ut&&yn===en)return Nr();if(!Ut)throw jn.create("no-app",{appName:yn});return Ut}function sr(){return Array.from(ie.values())}function Tr(yn){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(function*(yn){const Ut=yn.name;ie.has(Ut)&&(ie.delete(Ut),yield Promise.all(yn.container.getProviders().map(En=>En.delete())),yn.isDeleted=!0)})).apply(this,arguments)}function Rr(yn,Ut,En){var Gn;let Ln=null!==(Gn=ge[yn])&&void 0!==Gn?Gn:yn;En&&(Ln+=`-${En}`);const tr=Ln.match(/\s|\//),Be=Ut.match(/\s|\//);if(tr||Be){const Pe=[`Unable to register library "${Ln}" with version "${Ut}":`];return tr&&Pe.push(`library name "${Ln}" contains illegal characters (whitespace or "/")`),tr&&Be&&Pe.push("and"),Be&&Pe.push(`version name "${Ut}" contains illegal characters (whitespace or "/")`),void we.warn(Pe.join(" "))}Fe(new L.wA(`${Ln}-version`,()=>({library:Ln,version:Ut}),"VERSION"))}function er(yn,Ut){if(null!==yn&&"function"!=typeof yn)throw jn.create("invalid-log-argument");(0,ee.Am)(yn,Ut)}function ur(yn){(0,ee.Ub)(yn)}const Kn="firebase-heartbeat-store";let pr=null;function dr(){return pr||(pr=(0,Oe.X3)("firebase-heartbeat-database",1,{upgrade:(yn,Ut)=>{0===Ut&&yn.createObjectStore(Kn)}}).catch(yn=>{throw jn.create("idb-open",{originalErrorMessage:yn.message})})),pr}function In(){return(In=(0,u.Z)(function*(yn){try{return(yield dr()).transaction(Kn).objectStore(Kn).get(Mr(yn))}catch(Ut){if(Ut instanceof Se.ZR)we.warn(Ut.message);else{const En=jn.create("idb-get",{originalErrorMessage:Ut?.message});we.warn(En.message)}}})).apply(this,arguments)}function kn(yn,Ut){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(yn,Ut){try{const Gn=(yield dr()).transaction(Kn,"readwrite");return yield Gn.objectStore(Kn).put(Ut,Mr(yn)),Gn.done}catch(En){if(En instanceof Se.ZR)we.warn(En.message);else{const Gn=jn.create("idb-set",{originalErrorMessage:En?.message});we.warn(Gn.message)}}})).apply(this,arguments)}function Mr(yn){return`${yn.name}!${yn.options.appId}`}class ci{constructor(Ut){this.container=Ut,this._heartbeatsCache=null;const En=this.container.getProvider("app").getImmediate();this._storage=new _r(En),this._heartbeatsCachePromise=this._storage.read().then(Gn=>(this._heartbeatsCache=Gn,Gn))}triggerHeartbeat(){var Ut=this;return(0,u.Z)(function*(){const Gn=Ut.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ln=vn();if(null===Ut._heartbeatsCache&&(Ut._heartbeatsCache=yield Ut._heartbeatsCachePromise),Ut._heartbeatsCache.lastSentHeartbeatDate!==Ln&&!Ut._heartbeatsCache.heartbeats.some(tr=>tr.date===Ln))return Ut._heartbeatsCache.heartbeats.push({date:Ln,agent:Gn}),Ut._heartbeatsCache.heartbeats=Ut._heartbeatsCache.heartbeats.filter(tr=>{const Be=new Date(tr.date).valueOf();return Date.now()-Be<=2592e6}),Ut._storage.overwrite(Ut._heartbeatsCache)})()}getHeartbeatsHeader(){var Ut=this;return(0,u.Z)(function*(){if(null===Ut._heartbeatsCache&&(yield Ut._heartbeatsCachePromise),null===Ut._heartbeatsCache||0===Ut._heartbeatsCache.heartbeats.length)return"";const En=vn(),{heartbeatsToSend:Gn,unsentEntries:Ln}=function Di(yn,Ut=1024){const En=[];let Gn=yn.slice();for(const Ln of yn){const tr=En.find(Be=>Be.agent===Ln.agent);if(tr){if(tr.dates.push(Ln.date),si(En)>Ut){tr.dates.pop();break}}else if(En.push({agent:Ln.agent,dates:[Ln.date]}),si(En)>Ut){En.pop();break}Gn=Gn.slice(1)}return{heartbeatsToSend:En,unsentEntries:Gn}}(Ut._heartbeatsCache.heartbeats),tr=(0,Se.L)(JSON.stringify({version:2,heartbeats:Gn}));return Ut._heartbeatsCache.lastSentHeartbeatDate=En,Ln.length>0?(Ut._heartbeatsCache.heartbeats=Ln,yield Ut._storage.overwrite(Ut._heartbeatsCache)):(Ut._heartbeatsCache.heartbeats=[],Ut._storage.overwrite(Ut._heartbeatsCache)),tr})()}}function vn(){return(new Date).toISOString().substring(0,10)}class _r{constructor(Ut){this.app=Ut,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,Se.hl)()&&(0,Se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ut=this;return(0,u.Z)(function*(){return(yield Ut._canUseIndexedDBPromise)&&(yield function Tn(yn){return In.apply(this,arguments)}(Ut.app))||{heartbeats:[]}})()}overwrite(Ut){var En=this;return(0,u.Z)(function*(){var Gn;if(yield En._canUseIndexedDBPromise){const tr=yield En.read();return kn(En.app,{lastSentHeartbeatDate:null!==(Gn=Ut.lastSentHeartbeatDate)&&void 0!==Gn?Gn:tr.lastSentHeartbeatDate,heartbeats:Ut.heartbeats})}})()}add(Ut){var En=this;return(0,u.Z)(function*(){var Gn;if(yield En._canUseIndexedDBPromise){const tr=yield En.read();return kn(En.app,{lastSentHeartbeatDate:null!==(Gn=Ut.lastSentHeartbeatDate)&&void 0!==Gn?Gn:tr.lastSentHeartbeatDate,heartbeats:[...tr.heartbeats,...Ut.heartbeats]})}})()}}function si(yn){return(0,Se.L)(JSON.stringify({version:2,heartbeats:yn})).length}!function Pr(yn){Fe(new L.wA("platform-logger",Ut=>new Me(Ut),"PRIVATE")),Fe(new L.wA("heartbeat",Ut=>new ci(Ut),"PRIVATE")),Rr(ke,"0.9.0",yn),Rr(ke,"0.9.0","esm2017"),Rr("fire-js","")}("")},4859:(hn,dt,B)=>{B.d(dt,{H0:()=>ke,wA:()=>ee,zt:()=>Oe});var u=B(5861),L=B(2090);class ee{constructor(we,ye,He){this.name=we,this.instanceFactory=ye,this.type=He,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(we){return this.instantiationMode=we,this}setMultipleInstances(we){return this.multipleInstances=we,this}setServiceProps(we){return this.serviceProps=we,this}setInstanceCreatedCallback(we){return this.onInstanceCreated=we,this}}const Se="[DEFAULT]";class Oe{constructor(we,ye){this.name=we,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(we){const ye=this.normalizeInstanceIdentifier(we);if(!this.instancesDeferred.has(ye)){const He=new L.BH;if(this.instancesDeferred.set(ye,He),this.isInitialized(ye)||this.shouldAutoInitialize())try{const Nt=this.getOrInitializeService({instanceIdentifier:ye});Nt&&He.resolve(Nt)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(we){var ye;const He=this.normalizeInstanceIdentifier(we?.identifier),Nt=null!==(ye=we?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(He)&&!this.shouldAutoInitialize()){if(Nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:He})}catch(mt){if(Nt)return null;throw mt}}getComponent(){return this.component}setComponent(we){if(we.name!==this.name)throw Error(`Mismatching Component ${we.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=we,this.shouldAutoInitialize()){if(function We(Je){return"EAGER"===Je.instantiationMode}(we))try{this.getOrInitializeService({instanceIdentifier:Se})}catch{}for(const[ye,He]of this.instancesDeferred.entries()){const Nt=this.normalizeInstanceIdentifier(ye);try{const mt=this.getOrInitializeService({instanceIdentifier:Nt});He.resolve(mt)}catch{}}}}clearInstance(we=Se){this.instancesDeferred.delete(we),this.instancesOptions.delete(we),this.instances.delete(we)}delete(){var we=this;return(0,u.Z)(function*(){const ye=Array.from(we.instances.values());yield Promise.all([...ye.filter(He=>"INTERNAL"in He).map(He=>He.INTERNAL.delete()),...ye.filter(He=>"_delete"in He).map(He=>He._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(we=Se){return this.instances.has(we)}getOptions(we=Se){return this.instancesOptions.get(we)||{}}initialize(we={}){const{options:ye={}}=we,He=this.normalizeInstanceIdentifier(we.instanceIdentifier);if(this.isInitialized(He))throw Error(`${this.name}(${He}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Nt=this.getOrInitializeService({instanceIdentifier:He,options:ye});for(const[mt,lt]of this.instancesDeferred.entries())He===this.normalizeInstanceIdentifier(mt)&&lt.resolve(Nt);return Nt}onInit(we,ye){var He;const Nt=this.normalizeInstanceIdentifier(ye),mt=null!==(He=this.onInitCallbacks.get(Nt))&&void 0!==He?He:new Set;mt.add(we),this.onInitCallbacks.set(Nt,mt);const lt=this.instances.get(Nt);return lt&&we(lt,Nt),()=>{mt.delete(we)}}invokeOnInitCallbacks(we,ye){const He=this.onInitCallbacks.get(ye);if(He)for(const Nt of He)try{Nt(we,ye)}catch{}}getOrInitializeService({instanceIdentifier:we,options:ye={}}){let He=this.instances.get(we);if(!He&&this.component&&(He=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=we,Je===Se?void 0:Je),options:ye}),this.instances.set(we,He),this.instancesOptions.set(we,ye),this.invokeOnInitCallbacks(He,we),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,we,He)}catch{}var Je;return He||null}normalizeInstanceIdentifier(we=Se){return this.component?this.component.multipleInstances?we:Se:we}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ke{constructor(we){this.name=we,this.providers=new Map}addComponent(we){const ye=this.getProvider(we.name);if(ye.isComponentSet())throw new Error(`Component ${we.name} has already been registered with ${this.name}`);ye.setComponent(we)}addOrOverwriteComponent(we){this.getProvider(we.name).isComponentSet()&&this.providers.delete(we.name),this.addComponent(we)}getProvider(we){if(this.providers.has(we))return this.providers.get(we);const ye=new Oe(we,this);return this.providers.set(we,ye),ye}getProviders(){return Array.from(this.providers.values())}}},1877:(hn,dt,B)=>{B.d(dt,{Am:()=>Je,Ub:()=>ke,Yd:()=>We,in:()=>L});const u=[];var L=(()=>{return(we=L||(L={}))[we.DEBUG=0]="DEBUG",we[we.VERBOSE=1]="VERBOSE",we[we.INFO=2]="INFO",we[we.WARN=3]="WARN",we[we.ERROR=4]="ERROR",we[we.SILENT=5]="SILENT",L;var we})();const ee={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},Se=L.INFO,Oe={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},Me=(we,ye,...He)=>{if(ye<we.logLevel)return;const Nt=(new Date).toISOString(),mt=Oe[ye];if(!mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[mt](`[${Nt}]  ${we.name}:`,...He)};class We{constructor(ye){this.name=ye,this._logLevel=Se,this._logHandler=Me,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in L))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?ee[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...ye),this._logHandler(this,L.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...ye),this._logHandler(this,L.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,L.INFO,...ye),this._logHandler(this,L.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,L.WARN,...ye),this._logHandler(this,L.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...ye),this._logHandler(this,L.ERROR,...ye)}}function ke(we){u.forEach(ye=>{ye.setLogLevel(we)})}function Je(we,ye){for(const He of u){let Nt=null;ye&&ye.level&&(Nt=ee[ye.level]),He.userLogHandler=null===we?null:(mt,lt,...xt)=>{const yt=xt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");lt>=(Nt??mt.logLevel)&&we({level:L[lt].toLowerCase(),message:yt,args:xt,type:mt.name})}}}},4541:(hn,dt,B)=>{B.d(dt,{_A:()=>rl,J4:()=>bl,IJ:()=>sc,jF:()=>Wh,ZS:()=>ad});var u=B(4650),L=B(6895),ee=B(9751),Se=B(515),Oe=B(9646),Me=B(7579),We=B(8421),ke=B(5577),Je=B(1144),we=B(576),ye=B(3268);const He=["addListener","removeListener"],Nt=["addEventListener","removeEventListener"],mt=["on","off"];function lt(m,E,p,w){if((0,we.m)(p)&&(w=p,p=void 0),w)return lt(m,E,p).pipe((0,ye.Z)(w));const[R,z]=function $e(m){return(0,we.m)(m.addEventListener)&&(0,we.m)(m.removeEventListener)}(m)?Nt.map(De=>Ye=>m[De](E,Ye,p)):function yt(m){return(0,we.m)(m.addListener)&&(0,we.m)(m.removeListener)}(m)?He.map(xt(m,E)):function ut(m){return(0,we.m)(m.on)&&(0,we.m)(m.off)}(m)?mt.map(xt(m,E)):[];if(!R&&(0,Je.z)(m))return(0,ke.z)(De=>lt(De,E,p))((0,We.Xf)(m));if(!R)throw new TypeError("Invalid event target");return new ee.y(De=>{const Ye=(...it)=>De.next(1<it.length?it:it[0]);return R(Ye),()=>z(Ye)})}function xt(m,E){return p=>w=>m[p](E,w)}var jt=B(4986),gt=B(3532);function ze(m=0,E,p=jt.P){let w=-1;return null!=E&&((0,gt.K)(E)?p=E:w=E),new ee.y(R=>{let z=function qe(m){return m instanceof Date&&!isNaN(m)}(m)?+m-p.now():m;z<0&&(z=0);let De=0;return p.schedule(function(){R.closed||(R.next(De++),0<=w?this.schedule(void 0,w):R.complete())},z)})}const{isArray:$t}=Array;function rt(m){return 1===m.length&&$t(m[0])?m[0]:m}var Ue=B(5403);function bt(...m){return 1===(m=rt(m)).length?(0,We.Xf)(m[0]):new ee.y(function Ne(m){return E=>{let p=[];for(let w=0;p&&!E.closed&&w<m.length;w++)p.push((0,We.Xf)(m[w]).subscribe((0,Ue.x)(E,R=>{if(p){for(let z=0;z<p.length;z++)z!==w&&p[z].unsubscribe();p=null}E.next(R)})))}}(m))}B(1135),B(9841);var nt=B(5032);new ee.y(nt.Z);var Mn=B(3269);function Mt(...m){const E=(0,Mn.jO)(m),p=rt(m);return p.length?new ee.y(w=>{let R=p.map(()=>[]),z=p.map(()=>!1);w.add(()=>{R=z=null});for(let De=0;!w.closed&&De<p.length;De++)(0,We.Xf)(p[De]).subscribe((0,Ue.x)(w,Ye=>{if(R[De].push(Ye),R.every(it=>it.length)){const it=R.map(Ft=>Ft.shift());w.next(E?E(...it):it),R.some((Ft,Ot)=>!Ft.length&&z[Ot])&&w.complete()}},()=>{z[De]=!0,!R[De].length&&w.complete()}));return()=>{R=z=null}}):Se.E}var en=B(6451),ge=B(7272),Bt=B(4482);function Le(m){return(0,Bt.e)((E,p)=>{(0,We.Xf)(m).subscribe((0,Ue.x)(p,()=>p.complete(),nt.Z)),!p.closed&&E.subscribe(p)})}var Qe=B(9300),Fe=B(5698),st=B(4004),Dr=(B(8675),B(1884),B(3900)),jn=B(8505),ii=B(1365),Nr=B(9718);function Wn(m,E){return E?p=>(0,ge.z)(E.pipe((0,Fe.q)(1),function br(){return(0,Bt.e)((m,E)=>{m.subscribe((0,Ue.x)(E,nt.Z))})}()),p.pipe(Wn(m))):(0,ke.z)((p,w)=>m(p,w).pipe((0,Fe.q)(1),(0,Nr.h)(p)))}var un=B(4006),Rr={left:"right",right:"left",bottom:"top",top:"bottom"};function er(m){return m.replace(/left|right|bottom|top/g,function(E){return Rr[E]})}function ur(m){return m.split("-")[0]}var Xr={start:"end",end:"start"};function ji(m){return m.replace(/start|end/g,function(E){return Xr[E]})}var Kn="top",pr="bottom",dr="right",Tn="left",In="auto",kn=[Kn,pr,dr,Tn],xn="start",Mr="end",Vn="viewport",ci="popper",Di=kn.reduce(function(m,E){return m.concat([E+"-"+xn,E+"-"+Mr])},[]),_r=[].concat(kn,[In]).reduce(function(m,E){return m.concat([E,E+"-"+xn,E+"-"+Mr])},[]),Pe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ze(m){if(null==m)return window;if("[object Window]"!==m.toString()){var E=m.ownerDocument;return E&&E.defaultView||window}return m}function Te(m){return m instanceof Ze(m).Element||m instanceof Element}function se(m){return m instanceof Ze(m).HTMLElement||m instanceof HTMLElement}function be(m){return!(typeof ShadowRoot>"u")&&(m instanceof Ze(m).ShadowRoot||m instanceof ShadowRoot)}function ht(m){return((Te(m)?m.ownerDocument:m.document)||window.document).documentElement}var qt=Math.max,bn=Math.min,Nn=Math.round;function Ee(){var m=navigator.userAgentData;return null!=m&&m.brands?m.brands.map(function(E){return E.brand+"/"+E.version}).join(" "):navigator.userAgent}function ve(){return!/^((?!chrome|android).)*safari/i.test(Ee())}function pe(m,E,p){void 0===E&&(E=!1),void 0===p&&(p=!1);var w=m.getBoundingClientRect(),R=1,z=1;E&&se(m)&&(R=m.offsetWidth>0&&Nn(w.width)/m.offsetWidth||1,z=m.offsetHeight>0&&Nn(w.height)/m.offsetHeight||1);var Ye=(Te(m)?Ze(m):window).visualViewport,it=!ve()&&p,Ft=(w.left+(it&&Ye?Ye.offsetLeft:0))/R,Ot=(w.top+(it&&Ye?Ye.offsetTop:0))/z,Un=w.width/R,mn=w.height/z;return{width:Un,height:mn,top:Ot,right:Ft+Un,bottom:Ot+mn,left:Ft,x:Ft,y:Ot}}function tt(m){var E=Ze(m);return{scrollLeft:E.pageXOffset,scrollTop:E.pageYOffset}}function ft(m){return pe(ht(m)).left+tt(m).scrollLeft}function Zn(m){return Ze(m).getComputedStyle(m)}function Ar(m){return m?(m.nodeName||"").toLowerCase():null}function gi(m){return"html"===Ar(m)?m:m.assignedSlot||m.parentNode||(be(m)?m.host:null)||ht(m)}function Rn(m){var E=Zn(m);return/auto|scroll|overlay|hidden/.test(E.overflow+E.overflowY+E.overflowX)}function ys(m){return["html","body","#document"].indexOf(Ar(m))>=0?m.ownerDocument.body:se(m)&&Rn(m)?m:ys(gi(m))}function Js(m,E){var p;void 0===E&&(E=[]);var w=ys(m),R=w===(null==(p=m.ownerDocument)?void 0:p.body),z=Ze(w),De=R?[z].concat(z.visualViewport||[],Rn(w)?w:[]):w,Ye=E.concat(De);return R?Ye:Ye.concat(Js(gi(De)))}function Xs(m){return["table","td","th"].indexOf(Ar(m))>=0}function Zi(m){return se(m)&&"fixed"!==Zn(m).position?m.offsetParent:null}function Fs(m){for(var E=Ze(m),p=Zi(m);p&&Xs(p)&&"static"===Zn(p).position;)p=Zi(p);return p&&("html"===Ar(p)||"body"===Ar(p)&&"static"===Zn(p).position)?E:p||function wi(m){var E=/firefox/i.test(Ee());if(/Trident/i.test(Ee())&&se(m)&&"fixed"===Zn(m).position)return null;var R=gi(m);for(be(R)&&(R=R.host);se(R)&&["html","body"].indexOf(Ar(R))<0;){var z=Zn(R);if("none"!==z.transform||"none"!==z.perspective||"paint"===z.contain||-1!==["transform","perspective"].indexOf(z.willChange)||E&&"filter"===z.willChange||E&&z.filter&&"none"!==z.filter)return R;R=R.parentNode}return null}(m)||E}function vs(m,E){var p=E.getRootNode&&E.getRootNode();if(m.contains(E))return!0;if(p&&be(p)){var w=E;do{if(w&&m.isSameNode(w))return!0;w=w.parentNode||w.host}while(w)}return!1}function bs(m){return Object.assign({},m,{left:m.x,top:m.y,right:m.x+m.width,bottom:m.y+m.height})}function ho(m,E,p){return E===Vn?bs(function tn(m,E){var p=Ze(m),w=ht(m),R=p.visualViewport,z=w.clientWidth,De=w.clientHeight,Ye=0,it=0;if(R){z=R.width,De=R.height;var Ft=ve();(Ft||!Ft&&"fixed"===E)&&(Ye=R.offsetLeft,it=R.offsetTop)}return{width:z,height:De,x:Ye+ft(m),y:it}}(m,p)):Te(E)?function Ti(m,E){var p=pe(m,!1,"fixed"===E);return p.top=p.top+m.clientTop,p.left=p.left+m.clientLeft,p.bottom=p.top+m.clientHeight,p.right=p.left+m.clientWidth,p.width=m.clientWidth,p.height=m.clientHeight,p.x=p.left,p.y=p.top,p}(E,p):bs(function hr(m){var E,p=ht(m),w=tt(m),R=null==(E=m.ownerDocument)?void 0:E.body,z=qt(p.scrollWidth,p.clientWidth,R?R.scrollWidth:0,R?R.clientWidth:0),De=qt(p.scrollHeight,p.clientHeight,R?R.scrollHeight:0,R?R.clientHeight:0),Ye=-w.scrollLeft+ft(m),it=-w.scrollTop;return"rtl"===Zn(R||p).direction&&(Ye+=qt(p.clientWidth,R?R.clientWidth:0)-z),{width:z,height:De,x:Ye,y:it}}(ht(m)))}function as(m){return m.split("-")[1]}function ws(m){return["top","bottom"].indexOf(m)>=0?"x":"y"}function Ls(m){var it,E=m.reference,p=m.element,w=m.placement,R=w?ur(w):null,z=w?as(w):null,De=E.x+E.width/2-p.width/2,Ye=E.y+E.height/2-p.height/2;switch(R){case Kn:it={x:De,y:E.y-p.height};break;case pr:it={x:De,y:E.y+E.height};break;case dr:it={x:E.x+E.width,y:Ye};break;case Tn:it={x:E.x-p.width,y:Ye};break;default:it={x:E.x,y:E.y}}var Ft=R?ws(R):null;if(null!=Ft){var Ot="y"===Ft?"height":"width";switch(z){case xn:it[Ft]=it[Ft]-(E[Ot]/2-p[Ot]/2);break;case Mr:it[Ft]=it[Ft]+(E[Ot]/2-p[Ot]/2)}}return it}function $i(m){return Object.assign({},{top:0,right:0,bottom:0,left:0},m)}function Bs(m,E){return E.reduce(function(p,w){return p[w]=m,p},{})}function oi(m,E){void 0===E&&(E={});var w=E.placement,R=void 0===w?m.placement:w,z=E.strategy,De=void 0===z?m.strategy:z,Ye=E.boundary,it=void 0===Ye?"clippingParents":Ye,Ft=E.rootBoundary,Ot=void 0===Ft?Vn:Ft,Un=E.elementContext,mn=void 0===Un?ci:Un,Jn=E.altBoundary,Li=void 0!==Jn&&Jn,yr=E.padding,xr=void 0===yr?0:yr,pi=$i("number"!=typeof xr?xr:Bs(xr,kn)),xs=m.rects.popper,vi=m.elements[Li?mn===ci?"reference":ci:mn],Bi=function Ba(m,E,p,w){var R="clippingParents"===E?function $r(m){var E=Js(gi(m)),w=["absolute","fixed"].indexOf(Zn(m).position)>=0&&se(m)?Fs(m):m;return Te(w)?E.filter(function(R){return Te(R)&&vs(R,w)&&"body"!==Ar(R)}):[]}(m):[].concat(E),z=[].concat(R,[p]),Ye=z.reduce(function(it,Ft){var Ot=ho(m,Ft,w);return it.top=qt(Ot.top,it.top),it.right=bn(Ot.right,it.right),it.bottom=bn(Ot.bottom,it.bottom),it.left=qt(Ot.left,it.left),it},ho(m,z[0],w));return Ye.width=Ye.right-Ye.left,Ye.height=Ye.bottom-Ye.top,Ye.x=Ye.left,Ye.y=Ye.top,Ye}(Te(vi)?vi:vi.contextElement||ht(m.elements.popper),it,Ot,De),Yi=pe(m.elements.reference),Ps=Ls({reference:Yi,element:xs,strategy:"absolute",placement:R}),As=bs(Object.assign({},xs,Ps)),Yo=mn===ci?As:Yi,uo={top:Bi.top-Yo.top+pi.top,bottom:Yo.bottom-Bi.bottom+pi.bottom,left:Bi.left-Yo.left+pi.left,right:Yo.right-Bi.right+pi.right},So=m.modifiersData.offset;if(mn===ci&&So){var Ql=So[R];Object.keys(uo).forEach(function(ka){var cd=[dr,pr].indexOf(ka)>=0?1:-1,gu=[Kn,pr].indexOf(ka)>=0?"y":"x";uo[ka]+=Ql[gu]*cd})}return uo}const na={name:"flip",enabled:!0,phase:"main",fn:function Vs(m){var E=m.state,p=m.options,w=m.name;if(!E.modifiersData[w]._skip){for(var R=p.mainAxis,z=void 0===R||R,De=p.altAxis,Ye=void 0===De||De,it=p.fallbackPlacements,Ft=p.padding,Ot=p.boundary,Un=p.rootBoundary,mn=p.altBoundary,Jn=p.flipVariations,Li=void 0===Jn||Jn,yr=p.allowedAutoPlacements,xr=E.options.placement,pi=ur(xr),xs=it||(pi!==xr&&Li?function fr(m){if(ur(m)===In)return[];var E=er(m);return[ji(m),E,ji(E)]}(xr):[er(xr)]),vi=[xr].concat(xs).reduce(function(ds,eu){return ds.concat(ur(eu)===In?function Ta(m,E){void 0===E&&(E={});var R=E.boundary,z=E.rootBoundary,De=E.padding,Ye=E.flipVariations,it=E.allowedAutoPlacements,Ft=void 0===it?_r:it,Ot=as(E.placement),Un=Ot?Ye?Di:Di.filter(function(Li){return as(Li)===Ot}):kn,mn=Un.filter(function(Li){return Ft.indexOf(Li)>=0});0===mn.length&&(mn=Un);var Jn=mn.reduce(function(Li,yr){return Li[yr]=oi(m,{placement:yr,boundary:R,rootBoundary:z,padding:De})[ur(yr)],Li},{});return Object.keys(Jn).sort(function(Li,yr){return Jn[Li]-Jn[yr]})}(E,{placement:eu,boundary:Ot,rootBoundary:Un,padding:Ft,flipVariations:Li,allowedAutoPlacements:yr}):eu)},[]),Bi=E.rects.reference,Yi=E.rects.popper,Ps=new Map,As=!0,Yo=vi[0],uo=0;uo<vi.length;uo++){var So=vi[uo],Ql=ur(So),ka=as(So)===xn,cd=[Kn,pr].indexOf(Ql)>=0,gu=cd?"width":"height",Ja=oi(E,{placement:So,boundary:Ot,rootBoundary:Un,altBoundary:mn,padding:Ft}),Jl=cd?ka?dr:Tn:ka?pr:Kn;Bi[gu]>Yi[gu]&&(Jl=er(Jl));var bh=er(Jl),Xl=[];if(z&&Xl.push(Ja[Ql]<=0),Ye&&Xl.push(Ja[Jl]<=0,Ja[bh]<=0),Xl.every(function(ds){return ds})){Yo=So,As=!1;break}Ps.set(So,Xl)}if(As)for(var dd=function(eu){var Oc=vi.find(function(kd){var oc=Ps.get(kd);if(oc)return oc.slice(0,eu).every(function(Lu){return Lu})});if(Oc)return Yo=Oc,"break"},mu=Li?3:1;mu>0&&"break"!==dd(mu);mu--);E.placement!==Yo&&(E.modifiersData[w]._skip=!0,E.placement=Yo,E.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ks(m,E,p){return qt(m,bn(E,p))}function Vo(m){var E=pe(m),p=m.offsetWidth,w=m.offsetHeight;return Math.abs(E.width-p)<=1&&(p=E.width),Math.abs(E.height-w)<=1&&(w=E.height),{x:m.offsetLeft,y:m.offsetTop,width:p,height:w}}const ra={name:"preventOverflow",enabled:!0,phase:"main",fn:function Us(m){var E=m.state,p=m.options,w=m.name,R=p.mainAxis,z=void 0===R||R,De=p.altAxis,Ye=void 0!==De&&De,mn=p.tether,Jn=void 0===mn||mn,Li=p.tetherOffset,yr=void 0===Li?0:Li,xr=oi(E,{boundary:p.boundary,rootBoundary:p.rootBoundary,padding:p.padding,altBoundary:p.altBoundary}),pi=ur(E.placement),Yr=as(E.placement),xs=!Yr,vi=ws(pi),Bi=function zs(m){return"x"===m?"y":"x"}(vi),Yi=E.modifiersData.popperOffsets,Ps=E.rects.reference,As=E.rects.popper,Yo="function"==typeof yr?yr(Object.assign({},E.rects,{placement:E.placement})):yr,uo="number"==typeof Yo?{mainAxis:Yo,altAxis:Yo}:Object.assign({mainAxis:0,altAxis:0},Yo),So=E.modifiersData.offset?E.modifiersData.offset[E.placement]:null,Ql={x:0,y:0};if(Yi){if(z){var ka,cd="y"===vi?Kn:Tn,gu="y"===vi?pr:dr,Ja="y"===vi?"height":"width",Jl=Yi[vi],bh=Jl+xr[cd],Xl=Jl-xr[gu],xd=Jn?-As[Ja]/2:0,dd=Yr===xn?Ps[Ja]:As[Ja],mu=Yr===xn?-As[Ja]:-Ps[Ja],Pd=E.elements.arrow,ds=Jn&&Pd?Vo(Pd):{width:0,height:0},eu=E.modifiersData["arrow#persistent"]?E.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Oc=eu[cd],kd=eu[gu],oc=Ks(0,Ps[Ja],ds[Ja]),Lu=xs?Ps[Ja]/2-xd-oc-Oc-uo.mainAxis:dd-oc-Oc-uo.mainAxis,hd=xs?-Ps[Ja]/2+xd+oc+kd+uo.mainAxis:mu+oc+kd+uo.mainAxis,fd=E.elements.arrow&&Fs(E.elements.arrow),fp=null!=(ka=So?.[vi])?ka:0,Jh=Jl+hd-fp,Bu=Ks(Jn?bn(bh,Jl+Lu-fp-(fd?"y"===vi?fd.clientTop||0:fd.clientLeft||0:0)):bh,Jl,Jn?qt(Xl,Jh):Xl);Yi[vi]=Bu,Ql[vi]=Bu-Jl}if(Ye){var Fd,_u=Yi[Bi],Ao="y"===Bi?"height":"width",pd=_u+xr["x"===vi?Kn:Tn],wh=_u-xr["x"===vi?pr:dr],Bd=-1!==[Kn,Tn].indexOf(pi),Xh=null!=(Fd=So?.[Bi])?Fd:0,ac=Bd?pd:_u-Ps[Ao]-As[Ao]-Xh+uo.altAxis,tu=Bd?_u+Ps[Ao]+As[Ao]-Xh-uo.altAxis:wh,lc=Jn&&Bd?function Gi(m,E,p){var w=Ks(m,E,p);return w>p?p:w}(ac,_u,tu):Ks(Jn?ac:pd,_u,Jn?tu:wh);Yi[Bi]=lc,Ql[Bi]=lc-_u}E.modifiersData[w]=Ql}},requiresIfExists:["offset"]},ct={name:"arrow",enabled:!0,phase:"main",fn:function Uo(m){var E,p=m.state,w=m.name,R=m.options,z=p.elements.arrow,De=p.modifiersData.popperOffsets,Ye=ur(p.placement),it=ws(Ye),Ot=[Tn,dr].indexOf(Ye)>=0?"height":"width";if(z&&De){var Un=function(E,p){return $i("number"!=typeof(E="function"==typeof E?E(Object.assign({},p.rects,{placement:p.placement})):E)?E:Bs(E,kn))}(R.padding,p),mn=Vo(z),Jn="y"===it?Kn:Tn,Li="y"===it?pr:dr,yr=p.rects.reference[Ot]+p.rects.reference[it]-De[it]-p.rects.popper[Ot],xr=De[it]-p.rects.reference[it],pi=Fs(z),Yr=pi?"y"===it?pi.clientHeight||0:pi.clientWidth||0:0,Yi=Yr/2-mn[Ot]/2+(yr/2-xr/2),Ps=Ks(Un[Jn],Yi,Yr-mn[Ot]-Un[Li]);p.modifiersData[w]=((E={})[it]=Ps,E.centerOffset=Ps-Yi,E)}},effect:function ns(m){var E=m.state,w=m.options.element,R=void 0===w?"[data-popper-arrow]":w;null!=R&&("string"==typeof R&&!(R=E.elements.popper.querySelector(R))||!vs(E.elements.popper,R)||(E.elements.arrow=R))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cn(m,E,p){void 0===p&&(p=!1);var w=se(E),R=se(E)&&function Wt(m){var E=m.getBoundingClientRect(),p=Nn(E.width)/m.offsetWidth||1,w=Nn(E.height)/m.offsetHeight||1;return 1!==p||1!==w}(E),z=ht(E),De=pe(m,R,p),Ye={scrollLeft:0,scrollTop:0},it={x:0,y:0};return(w||!w&&!p)&&(("body"!==Ar(E)||Rn(z))&&(Ye=function vt(m){return m!==Ze(m)&&se(m)?function Xe(m){return{scrollLeft:m.scrollLeft,scrollTop:m.scrollTop}}(m):tt(m)}(E)),se(E)?((it=pe(E,!0)).x+=E.clientLeft,it.y+=E.clientTop):z&&(it.x=ft(z))),{x:De.left+Ye.scrollLeft-it.x,y:De.top+Ye.scrollTop-it.y,width:De.width,height:De.height}}function Pn(m){var E=new Map,p=new Set,w=[];function R(z){p.add(z.name),[].concat(z.requires||[],z.requiresIfExists||[]).forEach(function(Ye){if(!p.has(Ye)){var it=E.get(Ye);it&&R(it)}}),w.push(z)}return m.forEach(function(z){E.set(z.name,z)}),m.forEach(function(z){p.has(z.name)||R(z)}),w}function Ei(m){var E;return function(){return E||(E=new Promise(function(p){Promise.resolve().then(function(){E=void 0,p(m())})})),E}}var Vi={placement:"bottom",modifiers:[],strategy:"absolute"};function Ca(){for(var m=arguments.length,E=new Array(m),p=0;p<m;p++)E[p]=arguments[p];return!E.some(function(w){return!(w&&"function"==typeof w.getBoundingClientRect)})}function Mo(m){void 0===m&&(m={});var p=m.defaultModifiers,w=void 0===p?[]:p,R=m.defaultOptions,z=void 0===R?Vi:R;return function(Ye,it,Ft){void 0===Ft&&(Ft=z);var Ot={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vi,z),modifiersData:{},elements:{reference:Ye,popper:it},attributes:{},styles:{}},Un=[],mn=!1,Jn={state:Ot,setOptions:function(pi){var Yr="function"==typeof pi?pi(Ot.options):pi;yr(),Ot.options=Object.assign({},z,Ot.options,Yr),Ot.scrollParents={reference:Te(Ye)?Js(Ye):Ye.contextElement?Js(Ye.contextElement):[],popper:Js(it)};var xs=function or(m){var E=Pn(m);return Pe.reduce(function(p,w){return p.concat(E.filter(function(R){return R.phase===w}))},[])}(function ei(m){var E=m.reduce(function(p,w){var R=p[w.name];return p[w.name]=R?Object.assign({},R,w,{options:Object.assign({},R.options,w.options),data:Object.assign({},R.data,w.data)}):w,p},{});return Object.keys(E).map(function(p){return E[p]})}([].concat(w,Ot.options.modifiers)));return Ot.orderedModifiers=xs.filter(function(So){return So.enabled}),function Li(){Ot.orderedModifiers.forEach(function(xr){var Yr=xr.options,vi=xr.effect;if("function"==typeof vi){var Bi=vi({state:Ot,name:xr.name,instance:Jn,options:void 0===Yr?{}:Yr});Un.push(Bi||function(){})}})}(),Jn.update()},forceUpdate:function(){if(!mn){var pi=Ot.elements,Yr=pi.reference,xs=pi.popper;if(Ca(Yr,xs)){Ot.rects={reference:cn(Yr,Fs(xs),"fixed"===Ot.options.strategy),popper:Vo(xs)},Ot.reset=!1,Ot.placement=Ot.options.placement,Ot.orderedModifiers.forEach(function(So){return Ot.modifiersData[So.name]=Object.assign({},So.data)});for(var Bi=0;Bi<Ot.orderedModifiers.length;Bi++)if(!0!==Ot.reset){var Yi=Ot.orderedModifiers[Bi],Ps=Yi.fn,As=Yi.options;"function"==typeof Ps&&(Ot=Ps({state:Ot,options:void 0===As?{}:As,name:Yi.name,instance:Jn})||Ot)}else Ot.reset=!1,Bi=-1}}},update:Ei(function(){return new Promise(function(xr){Jn.forceUpdate(),xr(Ot)})}),destroy:function(){yr(),mn=!0}};if(!Ca(Ye,it))return Jn;function yr(){Un.forEach(function(xr){return xr()}),Un=[]}return Jn.setOptions(Ft).then(function(xr){!mn&&Ft.onFirstUpdate&&Ft.onFirstUpdate(xr)}),Jn}}var kr={passive:!0},eo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hs(m){var E,p=m.popper,w=m.popperRect,R=m.placement,z=m.variation,De=m.offsets,Ye=m.position,it=m.gpuAcceleration,Ft=m.adaptive,Ot=m.roundOffsets,Un=m.isFixed,mn=De.x,Jn=void 0===mn?0:mn,Li=De.y,yr=void 0===Li?0:Li,xr="function"==typeof Ot?Ot({x:Jn,y:yr}):{x:Jn,y:yr};Jn=xr.x,yr=xr.y;var pi=De.hasOwnProperty("x"),Yr=De.hasOwnProperty("y"),xs=Tn,vi=Kn,Bi=window;if(Ft){var Yi=Fs(p),Ps="clientHeight",As="clientWidth";Yi===Ze(p)&&"static"!==Zn(Yi=ht(p)).position&&"absolute"===Ye&&(Ps="scrollHeight",As="scrollWidth"),(R===Kn||(R===Tn||R===dr)&&z===Mr)&&(vi=pr,yr-=(Un&&Yi===Bi&&Bi.visualViewport?Bi.visualViewport.height:Yi[Ps])-w.height,yr*=it?1:-1),R!==Tn&&(R!==Kn&&R!==pr||z!==Mr)||(xs=dr,Jn-=(Un&&Yi===Bi&&Bi.visualViewport?Bi.visualViewport.width:Yi[As])-w.width,Jn*=it?1:-1)}var ka,So=Object.assign({position:Ye},Ft&&eo),Ql=!0===Ot?function Va(m){var p=m.y,R=window.devicePixelRatio||1;return{x:Nn(m.x*R)/R||0,y:Nn(p*R)/R||0}}({x:Jn,y:yr}):{x:Jn,y:yr};return Jn=Ql.x,yr=Ql.y,Object.assign({},So,it?((ka={})[vi]=Yr?"0":"",ka[xs]=pi?"0":"",ka.transform=(Bi.devicePixelRatio||1)<=1?"translate("+Jn+"px, "+yr+"px)":"translate3d("+Jn+"px, "+yr+"px, 0)",ka):((E={})[vi]=Yr?yr+"px":"",E[xs]=pi?Jn+"px":"",E.transform="",E))}var Ui=Mo({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Fr(m){var E=m.state,p=m.instance,w=m.options,R=w.scroll,z=void 0===R||R,De=w.resize,Ye=void 0===De||De,it=Ze(E.elements.popper),Ft=[].concat(E.scrollParents.reference,E.scrollParents.popper);return z&&Ft.forEach(function(Ot){Ot.addEventListener("scroll",p.update,kr)}),Ye&&it.addEventListener("resize",p.update,kr),function(){z&&Ft.forEach(function(Ot){Ot.removeEventListener("scroll",p.update,kr)}),Ye&&it.removeEventListener("resize",p.update,kr)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function fs(m){var E=m.state;E.modifiersData[m.name]=Ls({reference:E.rects.reference,element:E.rects.popper,strategy:"absolute",placement:E.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function To(m){var E=m.state,p=m.options,w=p.gpuAcceleration,R=void 0===w||w,z=p.adaptive,De=void 0===z||z,Ye=p.roundOffsets,it=void 0===Ye||Ye,Ot={placement:ur(E.placement),variation:as(E.placement),popper:E.elements.popper,popperRect:E.rects.popper,gpuAcceleration:R,isFixed:"fixed"===E.options.strategy};null!=E.modifiersData.popperOffsets&&(E.styles.popper=Object.assign({},E.styles.popper,Hs(Object.assign({},Ot,{offsets:E.modifiersData.popperOffsets,position:E.options.strategy,adaptive:De,roundOffsets:it})))),null!=E.modifiersData.arrow&&(E.styles.arrow=Object.assign({},E.styles.arrow,Hs(Object.assign({},Ot,{offsets:E.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:it})))),E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-placement":E.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function wr(m){var E=m.state;Object.keys(E.elements).forEach(function(p){var w=E.styles[p]||{},R=E.attributes[p]||{},z=E.elements[p];!se(z)||!Ar(z)||(Object.assign(z.style,w),Object.keys(R).forEach(function(De){var Ye=R[De];!1===Ye?z.removeAttribute(De):z.setAttribute(De,!0===Ye?"":Ye)}))})},effect:function Ni(m){var E=m.state,p={popper:{position:E.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(E.elements.popper.style,p.popper),E.styles=p,E.elements.arrow&&Object.assign(E.elements.arrow.style,p.arrow),function(){Object.keys(E.elements).forEach(function(w){var R=E.elements[w],z=E.attributes[w]||{},Ye=Object.keys(E.styles.hasOwnProperty(w)?E.styles[w]:p[w]).reduce(function(it,Ft){return it[Ft]="",it},{});!se(R)||!Ar(R)||(Object.assign(R.style,Ye),Object.keys(z).forEach(function(it){R.removeAttribute(it)}))})}},requires:["computeStyles"]}]});const no={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function to(m){var E=m.state,w=m.name,R=m.options.offset,z=void 0===R?[0,0]:R,De=_r.reduce(function(Ot,Un){return Ot[Un]=function js(m,E,p){var w=ur(m),R=[Tn,Kn].indexOf(w)>=0?-1:1,z="function"==typeof p?p(Object.assign({},E,{placement:m})):p,De=z[0],Ye=z[1];return De=De||0,Ye=(Ye||0)*R,[Tn,dr].indexOf(w)>=0?{x:Ye,y:De}:{x:De,y:Ye}}(Un,E.rects,z),Ot},{}),Ye=De[E.placement],Ft=Ye.y;null!=E.modifiersData.popperOffsets&&(E.modifiersData.popperOffsets.x+=Ye.x,E.modifiersData.popperOffsets.y+=Ft),E.modifiersData[w]=De}},Po=["*"],Oi=["month"],Zr=["year"];function cr(m,E){if(1&m&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&m){const p=E.$implicit,w=u.oxw();u.Q6J("value",p),u.uIk("aria-label",w.i18n.getMonthFullName(p,w.date.year)),u.xp6(1),u.Oqu(w.i18n.getMonthShortName(p,w.date.year))}}function $s(m,E){if(1&m&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&m){const p=E.$implicit,w=u.oxw();u.Q6J("value",p),u.xp6(1),u.Oqu(w.i18n.getYearNumerals(p))}}function aa(m,E){if(1&m){const p=u.EpF();u.TgZ(0,"ngb-datepicker-navigation-select",7),u.NdJ("select",function(R){u.CHM(p);const z=u.oxw();return u.KtG(z.select.emit(R))}),u.qZA()}if(2&m){const p=u.oxw();u.Q6J("date",p.date)("disabled",p.disabled)("months",p.selectBoxes.months)("years",p.selectBoxes.years)}}function ps(m,E){1&m&&u._UZ(0,"div",0)}function _l(m,E){1&m&&u._UZ(0,"div",0)}function po(m,E){if(1&m&&(u.YNc(0,ps,1,0,"div",9),u.TgZ(1,"div",10),u._uU(2),u.qZA(),u.YNc(3,_l,1,0,"div",9)),2&m){const p=E.$implicit,w=E.index,R=u.oxw(2);u.Q6J("ngIf",w>0),u.xp6(2),u.hij(" ",R.i18n.getMonthLabel(p.firstDate)," "),u.xp6(1),u.Q6J("ngIf",w!==R.months.length-1)}}function ro(m,E){if(1&m&&u.YNc(0,po,4,3,"ng-template",8),2&m){const p=u.oxw();u.Q6J("ngForOf",p.months)}}const Ua=["ngbDatepickerDayView",""],la=["defaultDayTemplate"],Yt=["content"];function gr(m,E){if(1&m&&u._UZ(0,"div",7),2&m){const w=E.currentMonth,R=E.selected,z=E.disabled,De=E.focused;u.Q6J("date",E.date)("currentMonth",w)("selected",R)("disabled",z)("focused",De)}}function ua(m,E){if(1&m&&(u.TgZ(0,"div",12),u._uU(1),u.qZA()),2&m){const p=u.oxw().$implicit,w=u.oxw(2);u.xp6(1),u.hij(" ",w.i18n.getMonthLabel(p.firstDate)," ")}}function ca(m,E){if(1&m&&(u.TgZ(0,"div",9),u.YNc(1,ua,2,1,"div",10),u._UZ(2,"ngb-datepicker-month",11),u.qZA()),2&m){const p=E.$implicit,w=u.oxw(2);u.xp6(1),u.Q6J("ngIf","none"===w.navigation||w.displayMonths>1&&"select"===w.navigation),u.xp6(1),u.Q6J("month",p.firstDate)}}function rs(m,E){if(1&m&&u.YNc(0,ca,3,2,"div",8),2&m){const p=u.oxw();u.Q6J("ngForOf",p.model.months)}}function Q(m,E){if(1&m){const p=u.EpF();u.TgZ(0,"ngb-datepicker-navigation",13),u.NdJ("navigate",function(R){u.CHM(p);const z=u.oxw();return u.KtG(z.onNavigateEvent(R))})("select",function(R){u.CHM(p);const z=u.oxw();return u.KtG(z.onNavigateDateSelect(R))}),u.qZA()}if(2&m){const p=u.oxw();u.Q6J("date",p.model.firstDate)("months",p.model.months)("disabled",p.model.disabled)("showSelect","select"===p.model.navigation)("prevDisabled",p.model.prevDisabled)("nextDisabled",p.model.nextDisabled)("selectBoxes",p.model.selectBoxes)}}function W(m,E){}function j(m,E){}function ue(m,E){if(1&m&&(u.TgZ(0,"div",5),u._uU(1),u.qZA()),2&m){const p=u.oxw(2);u.xp6(1),u.Oqu(p.i18n.getWeekLabel())}}function Pt(m,E){if(1&m&&(u.TgZ(0,"div",6),u._uU(1),u.qZA()),2&m){const p=E.$implicit;u.xp6(1),u.Oqu(p)}}function Z(m,E){if(1&m&&(u.TgZ(0,"div",2),u.YNc(1,ue,2,1,"div",3),u.YNc(2,Pt,2,1,"div",4),u.qZA()),2&m){const p=u.oxw();u.xp6(1),u.Q6J("ngIf",p.datepicker.showWeekNumbers),u.xp6(1),u.Q6J("ngForOf",p.viewModel.weekdays)}}function q(m,E){if(1&m&&(u.TgZ(0,"div",11),u._uU(1),u.qZA()),2&m){const p=u.oxw(2).$implicit,w=u.oxw();u.xp6(1),u.Oqu(w.i18n.getWeekNumerals(p.number))}}function fe(m,E){}function Ae(m,E){if(1&m&&u.YNc(0,fe,0,0,"ng-template",14),2&m){const p=u.oxw().$implicit,w=u.oxw(3);u.Q6J("ngTemplateOutlet",w.datepicker.dayTemplate)("ngTemplateOutletContext",p.context)}}function je(m,E){if(1&m){const p=u.EpF();u.TgZ(0,"div",12),u.NdJ("click",function(R){const De=u.CHM(p).$implicit;return u.oxw(3).doSelect(De),u.KtG(R.preventDefault())}),u.YNc(1,Ae,1,2,"ng-template",13),u.qZA()}if(2&m){const p=E.$implicit;u.ekj("disabled",p.context.disabled)("hidden",p.hidden)("ngb-dp-today",p.context.today),u.Q6J("tabindex",p.tabindex),u.uIk("aria-label",p.ariaLabel),u.xp6(1),u.Q6J("ngIf",!p.hidden)}}function Tt(m,E){if(1&m&&(u.TgZ(0,"div",8),u.YNc(1,q,2,1,"div",9),u.YNc(2,je,2,9,"div",10),u.qZA()),2&m){const p=u.oxw().$implicit,w=u.oxw();u.xp6(1),u.Q6J("ngIf",w.datepicker.showWeekNumbers),u.xp6(1),u.Q6J("ngForOf",p.days)}}function _t(m,E){1&m&&u.YNc(0,Tt,3,2,"div",7),2&m&&u.Q6J("ngIf",!E.$implicit.collapsed)}const Bn=["dialog"];function on(m){return parseInt(`${m}`,10)}function Ii(m){return"string"==typeof m}function Cs(m){return!isNaN(on(m))}function Is(m){return"number"==typeof m&&isFinite(m)&&Math.floor(m)===m}function ma(m){return null!=m}function nl(m){return Cs(m)?`0${m}`.slice(-2):""}function Sl(m,E){return m&&m.className&&m.className.split&&m.className.split(/\s+/).indexOf(E)>=0}function Wo(m){return(m||document.body).getBoundingClientRect()}const Zo={animation:!0,transitionTimerDelayMs:5},Ku=()=>{},{transitionTimerDelayMs:Ss}=Zo,zn=new Map,Ys=(m,E,p,w)=>{let R=w.context||{};const z=zn.get(E);if(z)switch(w.runningTransition){case"continue":return Se.E;case"stop":m.run(()=>z.transition$.complete()),R=Object.assign(z.context,R),zn.delete(E)}const De=p(E,w.animation,R)||Ku;if(!w.animation||"none"===window.getComputedStyle(E).transitionProperty)return m.run(()=>De()),(0,Oe.of)(void 0).pipe(function wu(m){return E=>new ee.y(p=>E.subscribe({next:De=>m.run(()=>p.next(De)),error:De=>m.run(()=>p.error(De)),complete:()=>m.run(()=>p.complete())}))}(m));const Ye=new Me.x,it=new Me.x,Ft=Ye.pipe(function ie(...m){return E=>(0,ge.z)(E,(0,Oe.of)(...m))}(!0));zn.set(E,{transition$:Ye,complete:()=>{it.next(),it.complete()},context:R});const Ot=function Er(m){const{transitionDelay:E,transitionDuration:p}=window.getComputedStyle(m);return 1e3*(parseFloat(E)+parseFloat(p))}(E);return m.runOutsideAngular(()=>{const Un=lt(E,"transitionend").pipe(Le(Ft),(0,Qe.h)(({target:Jn})=>Jn===E));bt(ze(Ot+Ss).pipe(Le(Ft)),Un,it).pipe(Le(Ft)).subscribe(()=>{zn.delete(E),m.run(()=>{De(),Ye.next(),Ye.complete()})})}),Ye.asObservable()};let _n=(()=>{class m{constructor(){this.animation=Zo.animation}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Du=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),rl=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),M=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),K=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({}),m})();class ae{constructor(E,p,w){this.year=Is(E)?E:null,this.month=Is(p)?p:null,this.day=Is(w)?w:null}static from(E){return E instanceof ae?E:E?new ae(E.year,E.month,E.day):null}equals(E){return null!=E&&this.year===E.year&&this.month===E.month&&this.day===E.day}before(E){return!!E&&(this.year===E.year?this.month===E.month?this.day!==E.day&&this.day<E.day:this.month<E.month:this.year<E.year)}after(E){return!!E&&(this.year===E.year?this.month===E.month?this.day!==E.day&&this.day>E.day:this.month>E.month:this.year>E.year)}}function Re(m,E){return!function Lt(m,E){return!m&&!E||!!m&&!!E&&m.equals(E)}(m,E)}function xe(m,E){return!(!m&&!E||m&&E&&m.year===E.year&&m.month===E.month)}function Cr(m,E,p){return m&&E&&m.before(E)?E:m&&p&&m.after(p)?p:m||null}function gn(m,E){const{minDate:p,maxDate:w,disabled:R,markDisabled:z}=E;return!(null==m||R||z&&z(m,{year:m.year,month:m.month})||p&&m.before(p)||w&&m.after(w))}function va(m){return new ae(m.getFullYear(),m.getMonth()+1,m.getDate())}function so(m){const E=new Date(m.year,m.month-1,m.day,12);return isNaN(E.getTime())||E.setFullYear(m.year),E}let Qo=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:function(){return function $a(){return new zo}()},providedIn:"root"}),m})(),zo=(()=>{class m extends Qo{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(p,w="d",R=1){let z=so(p),De=!0,Ye=z.getMonth();switch(w){case"y":z.setFullYear(z.getFullYear()+R);break;case"m":Ye+=R,z.setMonth(Ye),Ye%=12,Ye<0&&(Ye+=12);break;case"d":z.setDate(z.getDate()+R),De=!1;break;default:return p}return De&&z.getMonth()!==Ye&&z.setDate(0),va(z)}getPrev(p,w="d",R=1){return this.getNext(p,w,-R)}getWeekday(p){let R=so(p).getDay();return 0===R?7:R}getWeekNumber(p,w){7===w&&(w=0);const De=so(p[(11-w)%7]);De.setDate(De.getDate()+4-(De.getDay()||7));const Ye=De.getTime();return De.setMonth(0),De.setDate(1),Math.floor(Math.round((Ye-De.getTime())/864e5)/7)+1}getToday(){return va(new Date)}isValid(p){if(!(p&&Is(p.year)&&Is(p.month)&&Is(p.day)&&0!==p.year))return!1;const w=so(p);return!isNaN(w.getTime())&&w.getFullYear()===p.year&&w.getMonth()+1===p.month&&w.getDate()===p.day}}return m.\u0275fac=function(){let E;return function(w){return(E||(E=u.n5z(m)))(w||m)}}(),m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})(),Ga=(()=>{class m{getMonthLabel(p){return`${this.getMonthFullName(p.month,p.year)} ${this.getYearNumerals(p.year)}`}getDayNumerals(p){return`${p.day}`}getWeekNumerals(p){return`${p}`}getYearNumerals(p){return`${p}`}getWeekLabel(){return""}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:function(p){let w=null;return w=p?new p:function Io(m){return new ol(m)}(u.LFG(u.soG)),w},providedIn:"root"}),m})(),ol=(()=>{class m extends Ga{constructor(p){super(),this._locale=p,this._monthsShort=(0,L.UT)(p,L.x.Standalone,L.Tn.Abbreviated),this._monthsFull=(0,L.UT)(p,L.x.Standalone,L.Tn.Wide)}getWeekdayLabel(p,w){const R=(0,L.Mn)(this._locale,L.x.Standalone,void 0===w?L.Tn.Short:w);return R.map((De,Ye)=>R[(Ye+1)%7])[p-1]||""}getMonthShortName(p){return this._monthsShort[p-1]||""}getMonthFullName(p){return this._monthsFull[p-1]||""}getDayAriaLabel(p){const w=new Date(p.year,p.month-1,p.day);return(0,L.p6)(w,"fullDate",this._locale)}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(u.soG))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})(),cu=(()=>{class m{constructor(p,w){this._calendar=p,this._i18n=w,this._VALIDATORS={dayTemplateData:R=>{if(this._state.dayTemplateData!==R)return{dayTemplateData:R}},displayMonths:R=>{if(Is(R=on(R))&&R>0&&this._state.displayMonths!==R)return{displayMonths:R}},disabled:R=>{if(this._state.disabled!==R)return{disabled:R}},firstDayOfWeek:R=>{if(Is(R=on(R))&&R>=0&&this._state.firstDayOfWeek!==R)return{firstDayOfWeek:R}},focusVisible:R=>{if(this._state.focusVisible!==R&&!this._state.disabled)return{focusVisible:R}},markDisabled:R=>{if(this._state.markDisabled!==R)return{markDisabled:R}},maxDate:R=>{const z=this.toValidDate(R,null);if(Re(this._state.maxDate,z))return{maxDate:z}},minDate:R=>{const z=this.toValidDate(R,null);if(Re(this._state.minDate,z))return{minDate:z}},navigation:R=>{if(this._state.navigation!==R)return{navigation:R}},outsideDays:R=>{if(this._state.outsideDays!==R)return{outsideDays:R}},weekdays:R=>{const z=!0===R||!1===R?L.Tn.Short:R,De=!0!==R&&!1!==R||R;if(this._state.weekdayWidth!==z||this._state.weekdaysVisible!==De)return{weekdayWidth:z,weekdaysVisible:De}}},this._model$=new Me.x,this._dateSelect$=new Me.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:L.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,Qe.h)(p=>p.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,Qe.h)(p=>null!==p))}set(p){let w=Object.keys(p).map(R=>this._VALIDATORS[R](p[R])).reduce((R,z)=>({...R,...z}),{});Object.keys(w).length>0&&this._nextState(w)}focus(p){const w=this.toValidDate(p,null);null!=w&&!this._state.disabled&&Re(this._state.focusDate,w)&&this._nextState({focusDate:p})}focusSelect(){gn(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(p){const w=this.toValidDate(p,this._calendar.getToday());null!=w&&!this._state.disabled&&(!this._state.firstDate||xe(this._state.firstDate,w))&&this._nextState({firstDate:w})}select(p,w={}){const R=this.toValidDate(p,null);null!=R&&!this._state.disabled&&(Re(this._state.selectedDate,R)&&this._nextState({selectedDate:R}),w.emitEvent&&gn(R,this._state)&&this._dateSelect$.next(R))}toValidDate(p,w){const R=ae.from(p);return void 0===w&&(w=this._calendar.getToday()),this._calendar.isValid(R)?R:w}getMonth(p){for(let w of this._state.months)if(p.month===w.number&&p.year===w.year)return w;throw new Error(`month ${p.month} of year ${p.year} not found`)}_nextState(p){const w=this._updateState(p);this._patchContexts(w),this._state=w,this._model$.next(this._state)}_patchContexts(p){const{months:w,displayMonths:R,selectedDate:z,focusDate:De,focusVisible:Ye,disabled:it,outsideDays:Ft}=p;p.months.forEach(Ot=>{Ot.weeks.forEach(Un=>{Un.days.forEach(mn=>{De&&(mn.context.focused=De.equals(mn.date)&&Ye),mn.tabindex=!it&&De&&mn.date.equals(De)&&De.month===Ot.number?0:-1,!0===it&&(mn.context.disabled=!0),void 0!==z&&(mn.context.selected=null!==z&&z.equals(mn.date)),Ot.number!==mn.date.month&&(mn.hidden="hidden"===Ft||"collapsed"===Ft||R>1&&mn.date.after(w[0].firstDate)&&mn.date.before(w[R-1].lastDate))})})})}_updateState(p){const w=Object.assign({},this._state,p);let R=w.firstDate;if(("minDate"in p||"maxDate"in p)&&(function pn(m,E){if(E&&m&&E.before(m))throw new Error(`'maxDate' ${E} should be greater than 'minDate' ${m}`)}(w.minDate,w.maxDate),w.focusDate=Cr(w.focusDate,w.minDate,w.maxDate),w.firstDate=Cr(w.firstDate,w.minDate,w.maxDate),R=w.focusDate),"disabled"in p&&(w.focusVisible=!1),"selectedDate"in p&&0===this._state.months.length&&(R=w.selectedDate),"focusVisible"in p||"focusDate"in p&&(w.focusDate=Cr(w.focusDate,w.minDate,w.maxDate),R=w.focusDate,0!==w.months.length&&w.focusDate&&!w.focusDate.before(w.firstDate)&&!w.focusDate.after(w.lastDate)))return w;if("firstDate"in p&&(w.firstDate=Cr(w.firstDate,w.minDate,w.maxDate),R=w.firstDate),R){const De=function _a(m,E,p,w,R){const{displayMonths:z,months:De}=p,Ye=De.splice(0,De.length);return Array.from({length:z},(Ft,Ot)=>{const Un=Object.assign(m.getNext(E,"m",Ot),{day:1});if(De[Ot]=null,!R){const mn=Ye.findIndex(Jn=>Jn.firstDate.equals(Un));-1!==mn&&(De[Ot]=Ye.splice(mn,1)[0])}return Un}).forEach((Ft,Ot)=>{null===De[Ot]&&(De[Ot]=function Iu(m,E,p,w,R={}){const{dayTemplateData:z,minDate:De,maxDate:Ye,firstDayOfWeek:it,markDisabled:Ft,outsideDays:Ot,weekdayWidth:Un,weekdaysVisible:mn}=p,Jn=m.getToday();R.firstDate=null,R.lastDate=null,R.number=E.month,R.year=E.year,R.weeks=R.weeks||[],R.weekdays=R.weekdays||[],E=function ya(m,E,p){const w=m.getDaysPerWeek(),R=new ae(E.year,E.month,1),z=m.getWeekday(R)%w;return m.getPrev(R,"d",(w+z-p)%w)}(m,E,it),mn||(R.weekdays.length=0);for(let Li=0;Li<m.getWeeksPerMonth();Li++){let yr=R.weeks[Li];yr||(yr=R.weeks[Li]={number:0,days:[],collapsed:!0});const xr=yr.days;for(let pi=0;pi<m.getDaysPerWeek();pi++){0===Li&&mn&&(R.weekdays[pi]=w.getWeekdayLabel(m.getWeekday(E),Un));const Yr=new ae(E.year,E.month,E.day),xs=m.getNext(Yr),vi=w.getDayAriaLabel(Yr);let Bi=!!(De&&Yr.before(De)||Ye&&Yr.after(Ye));!Bi&&Ft&&(Bi=Ft(Yr,{month:R.number,year:R.year}));let Yi=Yr.equals(Jn),Ps=z?z(Yr,{month:R.number,year:R.year}):void 0;null===R.firstDate&&Yr.month===R.number&&(R.firstDate=Yr),Yr.month===R.number&&xs.month!==R.number&&(R.lastDate=Yr);let As=xr[pi];As||(As=xr[pi]={}),As.date=Yr,As.context=Object.assign(As.context||{},{$implicit:Yr,date:Yr,data:Ps,currentMonth:R.number,currentYear:R.year,disabled:Bi,focused:!1,selected:!1,today:Yi}),As.tabindex=-1,As.ariaLabel=vi,As.hidden=!1,E=xs}yr.number=m.getWeekNumber(xr.map(pi=>pi.date),it),yr.collapsed="collapsed"===Ot&&xr[0].date.month!==R.number&&xr[xr.length-1].date.month!==R.number}return R}(m,Ft,p,w,Ye.shift()||{}))}),De}(this._calendar,R,w,this._i18n,"dayTemplateData"in p||"firstDayOfWeek"in p||"markDisabled"in p||"minDate"in p||"maxDate"in p||"disabled"in p||"outsideDays"in p||"weekdaysVisible"in p);w.months=De,w.firstDate=De[0].firstDate,w.lastDate=De[De.length-1].lastDate,"selectedDate"in p&&!gn(w.selectedDate,w)&&(w.selectedDate=null),"firstDate"in p&&(!w.focusDate||w.focusDate.before(w.firstDate)||w.focusDate.after(w.lastDate))&&(w.focusDate=R);const Ye=!this._state.firstDate||this._state.firstDate.year!==w.firstDate.year,it=!this._state.firstDate||this._state.firstDate.month!==w.firstDate.month;"select"===w.navigation?(("minDate"in p||"maxDate"in p||0===w.selectBoxes.years.length||Ye)&&(w.selectBoxes.years=function ms(m,E,p){if(!m)return[];const w=E?Math.max(E.year,m.year-500):m.year-10,z=(p?Math.min(p.year,m.year+500):m.year+10)-w+1,De=Array(z);for(let Ye=0;Ye<z;Ye++)De[Ye]=w+Ye;return De}(w.firstDate,w.minDate,w.maxDate)),("minDate"in p||"maxDate"in p||0===w.selectBoxes.months.length||Ye)&&(w.selectBoxes.months=function ki(m,E,p,w){if(!E)return[];let R=m.getMonths(E.year);if(p&&E.year===p.year){const z=R.findIndex(De=>De===p.month);R=R.slice(z)}if(w&&E.year===w.year){const z=R.findIndex(De=>De===w.month);R=R.slice(0,z+1)}return R}(this._calendar,w.firstDate,w.minDate,w.maxDate))):w.selectBoxes={years:[],months:[]},("arrows"===w.navigation||"select"===w.navigation)&&(it||Ye||"minDate"in p||"maxDate"in p||"disabled"in p)&&(w.prevDisabled=w.disabled||function Fo(m,E,p){const w=Object.assign(m.getPrev(E,"m"),{day:1});return null!=p&&(w.year===p.year&&w.month<p.month||w.year<p.year&&1===p.month)}(this._calendar,w.firstDate,w.minDate),w.nextDisabled=w.disabled||function Ri(m,E,p){const w=Object.assign(m.getNext(E,"m"),{day:1});return null!=p&&w.after(p)}(this._calendar,w.lastDate,w.maxDate))}return w}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(Qo),u.LFG(Ga))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})();var Jo=(()=>{return(m=Jo||(Jo={}))[m.PREV=0]="PREV",m[m.NEXT=1]="NEXT",Jo;var m})();let Wa=(()=>{class m{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=L.Tn.Short}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Zs=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:function(){return function du(){return new fl}()},providedIn:"root"}),m})(),fl=(()=>{class m extends Zs{fromModel(p){return p&&Is(p.year)&&Is(p.month)&&Is(p.day)?{year:p.year,month:p.month,day:p.day}:null}toModel(p){return p&&Is(p.year)&&Is(p.month)&&Is(p.day)?{year:p.year,month:p.month,day:p.day}:null}}return m.\u0275fac=function(){let E;return function(w){return(E||(E=u.n5z(m)))(w||m)}}(),m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})(),H=(()=>{class m{constructor(p,w){this.i18n=p,this._renderer=w,this.select=new u.vpe,this._month=-1,this._year=-1}changeMonth(p){this.select.emit(new ae(this.date.year,on(p),1))}changeYear(p){this.select.emit(new ae(on(p),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(Ga),u.Y36(u.Qsj))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(p,w){if(1&p&&(u.Gf(Oi,7,u.SBq),u.Gf(Zr,7,u.SBq)),2&p){let R;u.iGM(R=u.CRH())&&(w.monthSelect=R.first),u.iGM(R=u.CRH())&&(w.yearSelect=R.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:6,vars:4,consts:function(){let E,p,w,R;return E=$localize`:@@ngb.datepicker.select-month:Select month`,p=$localize`:@@ngb.datepicker.select-month:Select month`,w=$localize`:@@ngb.datepicker.select-year:Select year`,R=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",E,"title",p,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",w,"title",R,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(p,w){1&p&&(u.TgZ(0,"select",0,1),u.NdJ("change",function(z){return w.changeMonth(z.target.value)}),u.YNc(2,cr,2,3,"option",2),u.qZA(),u.TgZ(3,"select",3,4),u.NdJ("change",function(z){return w.changeYear(z.target.value)}),u.YNc(5,$s,2,2,"option",2),u.qZA()),2&p&&(u.Q6J("disabled",w.disabled),u.xp6(2),u.Q6J("ngForOf",w.months),u.xp6(1),u.Q6J("disabled",w.disabled),u.xp6(2),u.Q6J("ngForOf",w.years))},dependencies:[L.sg,un.YN,un.Kr],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),m})(),Y=(()=>{class m{constructor(p){this.i18n=p,this.navigation=Jo,this.months=[],this.navigate=new u.vpe,this.select=new u.vpe}onClickPrev(p){p.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(p){p.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(Ga))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:8,vars:4,consts:function(){let E,p,w,R;return E=$localize`:@@ngb.datepicker.previous-month:Previous month`,p=$localize`:@@ngb.datepicker.previous-month:Previous month`,w=$localize`:@@ngb.datepicker.next-month:Next month`,R=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",E,"title",p,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",w,"title",R,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(p,w){1&p&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(z){return w.onClickPrev(z)}),u._UZ(2,"span",2),u.qZA()(),u.YNc(3,aa,1,4,"ngb-datepicker-navigation-select",3),u.YNc(4,ro,1,1,null,4),u.TgZ(5,"div",5)(6,"button",6),u.NdJ("click",function(z){return w.onClickNext(z)}),u._UZ(7,"span",2),u.qZA()()),2&p&&(u.xp6(1),u.Q6J("disabled",w.prevDisabled),u.xp6(2),u.Q6J("ngIf",w.showSelect),u.xp6(1),u.Q6J("ngIf",!w.showSelect),u.xp6(2),u.Q6J("disabled",w.nextDisabled))},dependencies:[L.sg,L.O5,H],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),m})(),le=(()=>{class m{constructor(p){this.i18n=p}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(Ga))},m.\u0275cmp=u.Xpm({type:m,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(p,w){2&p&&u.ekj("bg-primary",w.selected)("text-white",w.selected)("text-muted",w.isMuted())("outside",w.isMuted())("active",w.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:Ua,decls:1,vars:1,template:function(p,w){1&p&&u._uU(0),2&p&&u.Oqu(w.i18n.getDayNumerals(w.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),m})();var Ce=(()=>{return(m=Ce||(Ce={}))[m.Tab=9]="Tab",m[m.Enter=13]="Enter",m[m.Escape=27]="Escape",m[m.Space=32]="Space",m[m.PageUp=33]="PageUp",m[m.PageDown=34]="PageDown",m[m.End=35]="End",m[m.Home=36]="Home",m[m.ArrowLeft=37]="ArrowLeft",m[m.ArrowUp=38]="ArrowUp",m[m.ArrowRight=39]="ArrowRight",m[m.ArrowDown=40]="ArrowDown",Ce;var m})();let pt=(()=>{class m{processKey(p,w){const{state:R,calendar:z}=w;switch(p.which){case Ce.PageUp:w.focusDate(z.getPrev(R.focusedDate,p.shiftKey?"y":"m",1));break;case Ce.PageDown:w.focusDate(z.getNext(R.focusedDate,p.shiftKey?"y":"m",1));break;case Ce.End:w.focusDate(p.shiftKey?R.maxDate:R.lastDate);break;case Ce.Home:w.focusDate(p.shiftKey?R.minDate:R.firstDate);break;case Ce.ArrowLeft:w.focusDate(z.getPrev(R.focusedDate,"d",1));break;case Ce.ArrowUp:w.focusDate(z.getPrev(R.focusedDate,"d",z.getDaysPerWeek()));break;case Ce.ArrowRight:w.focusDate(z.getNext(R.focusedDate,"d",1));break;case Ce.ArrowDown:w.focusDate(z.getNext(R.focusedDate,"d",z.getDaysPerWeek()));break;case Ce.Enter:case Ce.Space:w.focusSelect();break;default:return}p.preventDefault(),p.stopPropagation()}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Rt=(()=>{class m{constructor(p){this.templateRef=p}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(u.Rgc))},m.\u0275dir=u.lG2({type:m,selectors:[["ng-template","ngbDatepickerContent",""]]}),m})(),sn=(()=>{class m{constructor(p,w,R,z,De,Ye,it,Ft){this._service=p,this._calendar=w,this.i18n=R,this._elementRef=Ye,this._ngbDateAdapter=it,this._ngZone=Ft,this._controlValue=null,this._destroyed$=new Me.x,this._publicState={},this.navigate=new u.vpe,this.dateSelect=new u.vpe,this.onChange=Ot=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(Ot=>this[Ot]=z[Ot]),p.dateSelect$.pipe(Le(this._destroyed$)).subscribe(Ot=>{this.dateSelect.emit(Ot)}),p.model$.pipe(Le(this._destroyed$)).subscribe(Ot=>{const Un=Ot.firstDate,mn=this.model?this.model.firstDate:null;this._publicState={maxDate:Ot.maxDate,minDate:Ot.minDate,firstDate:Ot.firstDate,lastDate:Ot.lastDate,focusedDate:Ot.focusDate,months:Ot.months.map(pi=>pi.firstDate)};let Jn=!1;if(!Un.equals(mn)&&(this.navigate.emit({current:mn?{year:mn.year,month:mn.month}:null,next:{year:Un.year,month:Un.month},preventDefault:()=>Jn=!0}),Jn&&null!==mn))return void this._service.open(mn);const Li=Ot.selectedDate,yr=Ot.focusDate,xr=this.model?this.model.focusDate:null;this.model=Ot,Re(Li,this._controlValue)&&(this._controlValue=Li,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Li))),Re(yr,xr)&&xr&&Ot.focusVisible&&this.focus(),De.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(p){this._service.focus(ae.from(p))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Fe.q)(1)).subscribe(()=>{const p=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');p&&p.focus()})}navigateTo(p){this._service.open(ae.from(p?p.day?p:{...p,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const p=lt(this._contentEl.nativeElement,"focusin"),w=lt(this._contentEl.nativeElement,"focusout"),{nativeElement:R}=this._elementRef;(0,en.T)(p,w).pipe((0,Qe.h)(({target:z,relatedTarget:De})=>!(Sl(z,"ngb-dp-day")&&Sl(De,"ngb-dp-day")&&R.contains(z)&&R.contains(De))),Le(this._destroyed$)).subscribe(({type:z})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===z})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const p={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(w=>p[w]=this[w]),this._service.set(p),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(p){const w={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(R=>R in p).forEach(R=>w[R]=this[R]),this._service.set(w),"startDate"in p){const{currentValue:R,previousValue:z}=p.startDate;xe(z,R)&&this.navigateTo(this.startDate)}}onDateSelect(p){this._service.focus(p),this._service.select(p,{emitEvent:!0})}onNavigateDateSelect(p){this._service.open(p)}onNavigateEvent(p){switch(p){case Jo.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Jo.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(p){this.onChange=p}registerOnTouched(p){this.onTouched=p}setDisabledState(p){this._service.set({disabled:p})}writeValue(p){this._controlValue=ae.from(this._ngbDateAdapter.fromModel(p)),this._service.select(this._controlValue)}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(cu),u.Y36(Qo),u.Y36(Ga),u.Y36(Wa),u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(Zs),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-datepicker"]],contentQueries:function(p,w,R){if(1&p&&u.Suo(R,Rt,7),2&p){let z;u.iGM(z=u.CRH())&&(w.contentTemplate=z.first)}},viewQuery:function(p,w){if(1&p&&(u.Gf(la,7),u.Gf(Yt,7)),2&p){let R;u.iGM(R=u.CRH())&&(w._defaultDayTemplate=R.first),u.iGM(R=u.CRH())&&(w._contentEl=R.first)}},hostVars:2,hostBindings:function(p,w){2&p&&u.ekj("disabled",w.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],features:[u._Bn([{provide:un.JU,useExisting:(0,u.Gpc)(()=>m),multi:!0},cu]),u.TTD],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(p,w){if(1&p&&(u.YNc(0,gr,1,5,"ng-template",null,0,u.W1O),u.YNc(2,rs,1,1,"ng-template",null,1,u.W1O),u.TgZ(4,"div",2),u.YNc(5,Q,1,7,"ngb-datepicker-navigation",3),u.qZA(),u.TgZ(6,"div",4,5),u.YNc(8,W,0,0,"ng-template",6),u.qZA(),u.YNc(9,j,0,0,"ng-template",6)),2&p){const R=u.MAs(3);u.xp6(5),u.Q6J("ngIf","none"!==w.navigation),u.xp6(1),u.ekj("ngb-dp-months",!w.contentTemplate),u.xp6(2),u.Q6J("ngTemplateOutlet",(null==w.contentTemplate?null:w.contentTemplate.templateRef)||R),u.xp6(1),u.Q6J("ngTemplateOutlet",w.footerTemplate)}},dependencies:function(){return[L.sg,L.O5,L.tP,On,Y,le]},styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),m})(),On=(()=>{class m{constructor(p,w,R,z){this.i18n=p,this.datepicker=w,this._keyboardService=R,this._service=z}set month(p){this.viewModel=this._service.getMonth(p)}onKeyDown(p){this._keyboardService.processKey(p,this.datepicker)}doSelect(p){!p.context.disabled&&!p.hidden&&this.datepicker.onDateSelect(p.date)}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(Ga),u.Y36(sn),u.Y36(pt),u.Y36(cu))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(p,w){1&p&&u.NdJ("keydown",function(z){return w.onKeyDown(z)})},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(p,w){1&p&&(u.YNc(0,Z,3,2,"div",0),u.YNc(1,_t,1,1,"ng-template",1)),2&p&&(u.Q6J("ngIf",w.viewModel.weekdays.length>0),u.xp6(1),u.Q6J("ngForOf",w.viewModel.weeks))},dependencies:[L.sg,L.O5,L.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),m})();const Qn=(m,E)=>!!E&&E.some(p=>p.contains(m)),rr=(m,E)=>!E||null!=function Hl(m,E){return!E||typeof m.closest>"u"?null:m.closest(E)}(m,E),Gr=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function Lr(m,E,p,w,R,z,De,Ye){p&&m.runOutsideAngular((m=>Gr?()=>setTimeout(()=>m(),100):m)(()=>{const Ft=lt(E,"keydown").pipe(Le(R),(0,Qe.h)(mn=>mn.which===Ce.Escape),(0,jn.b)(mn=>mn.preventDefault())),Ot=lt(E,"mousedown").pipe((0,st.U)(mn=>{const Jn=mn.target;return 2!==mn.button&&!Qn(Jn,De)&&("inside"===p?Qn(Jn,z)&&rr(Jn,Ye):"outside"===p?!Qn(Jn,z):rr(Jn,Ye)||!Qn(Jn,z))}),Le(R)),Un=lt(E,"mouseup").pipe((0,ii.M)(Ot),(0,Qe.h)(([mn,Jn])=>Jn),function sr(m,E=jt.z){const p=ze(m,E);return Wn(()=>p)}(0),Le(R));bt([Ft.pipe((0,st.U)(mn=>0)),Un.pipe((0,st.U)(mn=>1))]).subscribe(mn=>m.run(()=>w(mn)))}))}const cs=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function za(m){const E=Array.from(m.querySelectorAll(cs)).filter(p=>-1!==p.tabIndex);return[E[0],E[E.length-1]]}const Nl=(m,E,p,w=!1)=>{m.runOutsideAngular(()=>{const R=lt(E,"focusin").pipe(Le(p),(0,st.U)(z=>z.target));lt(E,"keydown").pipe(Le(p),(0,Qe.h)(z=>z.which===Ce.Tab),(0,ii.M)(R)).subscribe(([z,De])=>{const[Ye,it]=za(E);(De===Ye||De===E)&&z.shiftKey&&(it.focus(),z.preventDefault()),De===it&&!z.shiftKey&&(Ye.focus(),z.preventDefault())}),w&&lt(E,"click").pipe(Le(p),(0,ii.M)(R),(0,st.U)(z=>z[1])).subscribe(z=>z.focus())})},Gl=/\s+/,bo=/  +/gi,Ko=/^start/,qc=/^end/,Yc=/-(top|left)$/,Bh=/-(bottom|right)$/,rp=/^left/,yd=/^right/,vd=/^start/,Vh=/^end/;function oh({placement:m,baseClass:E}){let p=Array.isArray(m)?m:m.split(Gl),R=p.findIndex(it=>"auto"===it);R>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(it){null==p.find(Ft=>-1!==Ft.search("^"+it))&&p.splice(R++,1,it)});const z=p.map(it=>function sh(m){return m.replace(Ko,"left").replace(qc,"right").replace(Yc,"-start").replace(Bh,"-end")}(it));return{placement:z.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!E,phase:"write",fn({state:it}){const Ft=new RegExp(E+"(-[a-z]+)*","gi"),Ot=it.elements.popper,Un=it.placement;let mn=Ot.className;mn=mn.replace(Ft,""),mn+=` ${function Su(m,E){let[p,w]=E.split("-");const R=p.replace(rp,"start").replace(yd,"end");let z=[R];if(w){let De=w;("left"===p||"right"===p)&&(De=De.replace(vd,"top").replace(Vh,"bottom")),z.push(`${R}-${De}`)}return m&&(z=z.map(De=>`${m}-${De}`)),z.join(" ")}(E,Un)}`,mn=mn.trim().replace(bo," "),Ot.className=mn}},na,ra,ct,{enabled:!0,name:"flip",options:{fallbackPlacements:z}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Zu(m){return m}let oo=(()=>{class m extends Wa{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.restoreFocus=!0}}return m.\u0275fac=function(){let E;return function(w){return(E||(E=u.n5z(m)))(w||m)}}(),m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function Au(m){return E=>(E.modifiers.push(no,{name:"offset",options:{offset:()=>m}}),E)}let es=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=u.Yz7({token:m,factory:function(){return function Xo(){return new Nu}()},providedIn:"root"}),m})(),Nu=(()=>{class m extends es{parse(p){if(null!=p){const w=p.trim().split("-");if(1===w.length&&Cs(w[0]))return{year:on(w[0]),month:null,day:null};if(2===w.length&&Cs(w[0])&&Cs(w[1]))return{year:on(w[0]),month:on(w[1]),day:null};if(3===w.length&&Cs(w[0])&&Cs(w[1])&&Cs(w[2]))return{year:on(w[0]),month:on(w[1]),day:on(w[2])}}return null}format(p){return p?`${p.year}-${Cs(p.month)?nl(p.month):""}-${Cs(p.day)?nl(p.day):""}`:""}}return m.\u0275fac=function(){let E;return function(w){return(E||(E=u.n5z(m)))(w||m)}}(),m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})(),bl=(()=>{class m{constructor(p,w,R,z,De,Ye,it,Ft,Ot,Un){this._parserFormatter=p,this._elRef=w,this._vcRef=R,this._renderer=z,this._ngZone=De,this._calendar=Ye,this._dateAdapter=it,this._document=Ft,this._changeDetector=Ot,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._positioning=function bd(){let m=null;return{createPopper(E){if(!m){let w=(E.updatePopperOptions||Zu)(oh(E));m=Ui(E.hostElement,E.targetElement,w)}},update(){m&&m.update()},setOptions(E){if(m){let w=(E.updatePopperOptions||Zu)(oh(E));m.setOptions(w)}},destroy(){m&&(m.destroy(),m=null)}}}(),this._destroyCloseHandlers$=new Me.x,this.dateSelect=new u.vpe,this.navigate=new u.vpe,this.closed=new u.vpe,this._onChange=mn=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(mn=>this[mn]=Un[mn])}get disabled(){return this._disabled}set disabled(p){this._disabled=""===p||p&&"false"!==p,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(p){this._onChange=p}registerOnTouched(p){this._onTouched=p}registerOnValidatorChange(p){this._validatorChange=p}setDisabledState(p){this.disabled=p}validate(p){const{value:w}=p;if(null!=w){const R=this._fromDateStruct(this._dateAdapter.fromModel(w));if(!R)return{ngbDate:{invalid:w}};if(this.minDate&&R.before(ae.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:w}}};if(this.maxDate&&R.after(ae.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:w}}}}return null}writeValue(p){this._model=this._fromDateStruct(this._dateAdapter.fromModel(p)),this._writeModelValue(this._model)}manualDateChange(p,w=!1){const R=p!==this._inputValue;R&&(this._inputValue=p,this._model=this._fromDateStruct(this._parserFormatter.parse(p))),(R||!w)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):""===p?null:p),w&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){let p;if(this._cRef=this._vcRef.createComponent(sn),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(w=>{this.writeValue(w),this._onChange(w),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,Nl(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus()),p=Ii(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this._ngZone.runOutsideAngular(()=>{this._cRef&&(this._positioning.createPopper({hostElement:p,targetElement:this._cRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:Au([0,2])}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this.positionTarget&&!p)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._setCloseHandlers()}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let p=this._elWithFocus;Ii(this.restoreFocus)?p=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(p=this.restoreFocus),p&&p.focus?p.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(p){this.isOpen()&&this._cRef.instance.navigateTo(p)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(p){if((p.minDate||p.maxDate)&&(this._validatorChange(),this.isOpen()&&(p.minDate&&(this._cRef.instance.minDate=this.minDate),p.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(p))),p.datepickerClass){const{currentValue:w,previousValue:R}=p.datepickerClass;this._applyPopupClass(w,R)}p.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(p){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(w=>{void 0!==this[w]&&p.setInput(w,this[w])}),p.setInput("startDate",this.startDate||this._model)}_applyPopupClass(p,w){const R=this._cRef?.location.nativeElement;R&&(p&&this._renderer.addClass(R,p),w&&this._renderer.removeClass(R,w))}_applyPopupStyling(p){this._renderer.addClass(p,"dropdown-menu"),this._renderer.addClass(p,"show"),"body"===this.container&&this._renderer.addClass(p,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(p){p.navigate.subscribe(w=>this.navigate.emit(w)),p.dateSelect.subscribe(w=>{this.dateSelect.emit(w),(!0===this.autoClose||"inside"===this.autoClose)&&this.close()})}_writeModelValue(p){const w=this._parserFormatter.format(p);this._inputValue=w,this._renderer.setProperty(this._elRef.nativeElement,"value",w),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(p)),this._onTouched())}_fromDateStruct(p){const w=p?new ae(p.year,p.month,p.day):null;return this._calendar.isValid(w)?w:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Lr(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(es),u.Y36(u.SBq),u.Y36(u.s_b),u.Y36(u.Qsj),u.Y36(u.R0b),u.Y36(Qo),u.Y36(Zs),u.Y36(L.K0),u.Y36(u.sBO),u.Y36(oo))},m.\u0275dir=u.lG2({type:m,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(p,w){1&p&&u.NdJ("input",function(z){return w.manualDateChange(z.target.value)})("change",function(z){return w.manualDateChange(z.target.value,!0)})("focus",function(){return w.onFocus()})("blur",function(){return w.onBlur()}),2&p&&u.Ikx("disabled",w.disabled)},inputs:{autoClose:"autoClose",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[u._Bn([{provide:un.JU,useExisting:(0,u.Gpc)(()=>m),multi:!0},{provide:un.Cf,useExisting:(0,u.Gpc)(()=>m),multi:!0},{provide:Wa,useExisting:oo}]),u.TTD]}),m})();new Date(1882,10,12),new Date(2174,10,25);let td=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez,un.u5]}),m})(),Ya=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({}),m})();class nc{constructor(E,p,w){this.nodes=E,this.viewRef=p,this.componentRef=w}}let Ic=(()=>{class m{constructor(p,w){this._el=p,this._zone=w}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Fe.q)(1)).subscribe(()=>{Ys(this._zone,this._el.nativeElement,(p,w)=>{w&&Wo(p),p.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ys(this._zone,this._el.nativeElement,({classList:p})=>p.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(p,w){2&p&&(u.Tol("modal-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),u.ekj("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(p,w){},encapsulation:2}),m})();class Ol{close(E){}dismiss(E){}}class jh{constructor(E,p,w,R){this._windowCmptRef=E,this._contentRef=p,this._backdropCmptRef=w,this._beforeDismiss=R,this._closed=new Me.x,this._dismissed=new Me.x,this._hidden=new Me.x,E.instance.dismissEvent.subscribe(z=>{this.dismiss(z)}),this.result=new Promise((z,De)=>{this._resolve=z,this._reject=De}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Le(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Le(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(E){this._windowCmptRef&&(this._closed.next(E),this._resolve(E),this._removeModalElements())}_dismiss(E){this._dismissed.next(E),this._reject(E),this._removeModalElements()}dismiss(E){if(this._windowCmptRef)if(this._beforeDismiss){const p=this._beforeDismiss();!function Aa(m){return m&&m.then}(p)?!1!==p&&this._dismiss(E):p.then(w=>{!1!==w&&this._dismiss(E)},()=>{})}else this._dismiss(E)}_removeModalElements(){const E=this._windowCmptRef.instance.hide(),p=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Oe.of)(void 0);E.subscribe(()=>{const{nativeElement:w}=this._windowCmptRef.location;w.parentNode.removeChild(w),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),p.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:w}=this._backdropCmptRef.location;w.parentNode.removeChild(w),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Mt(E,p).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var hu=(()=>{return(m=hu||(hu={}))[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",hu;var m})();let mg=(()=>{class m{constructor(p,w,R){this._document=p,this._elRef=w,this._zone=R,this._closed$=new Me.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new Me.x,this.hidden=new Me.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Ii(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(p){this.dismissEvent.emit(p)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Fe.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:p}=this._elRef,w={animation:this.animation,runningTransition:"stop"},De=Mt(Ys(this._zone,p,()=>p.classList.remove("show"),w),Ys(this._zone,this._dialogEl.nativeElement,()=>{},w));return De.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),De}_show(){const p={animation:this.animation,runningTransition:"continue"};Mt(Ys(this._zone,this._elRef.nativeElement,(z,De)=>{De&&Wo(z),z.classList.add("show")},p),Ys(this._zone,this._dialogEl.nativeElement,()=>{},p)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:p}=this._elRef;this._zone.runOutsideAngular(()=>{lt(p,"keydown").pipe(Le(this._closed$),(0,Qe.h)(R=>R.which===Ce.Escape)).subscribe(R=>{this.keyboard?requestAnimationFrame(()=>{R.defaultPrevented||this._zone.run(()=>this.dismiss(hu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let w=!1;lt(this._dialogEl.nativeElement,"mousedown").pipe(Le(this._closed$),(0,jn.b)(()=>w=!1),(0,Dr.w)(()=>lt(p,"mouseup").pipe(Le(this._closed$),(0,Fe.q)(1))),(0,Qe.h)(({target:R})=>p===R)).subscribe(()=>{w=!0}),lt(p,"click").pipe(Le(this._closed$)).subscribe(({target:R})=>{p===R&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!w&&this._zone.run(()=>this.dismiss(hu.BACKDROP_CLICK))),w=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:p}=this._elRef;if(!p.contains(document.activeElement)){const w=p.querySelector("[ngbAutofocus]"),R=za(p)[0];(w||R||p).focus()}}_restoreFocus(){const p=this._document.body,w=this._elWithFocus;let R;R=w&&w.focus&&p.contains(w)?w:p,this._zone.runOutsideAngular(()=>{setTimeout(()=>R.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ys(this._zone,this._elRef.nativeElement,({classList:p})=>(p.add("modal-static"),()=>p.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return m.\u0275fac=function(p){return new(p||m)(u.Y36(L.K0),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ngb-modal-window"]],viewQuery:function(p,w){if(1&p&&u.Gf(Bn,7),2&p){let R;u.iGM(R=u.CRH())&&(w._dialogEl=R.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(p,w){2&p&&(u.uIk("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),u.Tol("modal d-block"+(w.windowClass?" "+w.windowClass:"")),u.ekj("fade",w.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Po,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(p,w){1&p&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&p&&u.Tol("modal-dialog"+(w.size?" modal-"+w.size:"")+(w.centered?" modal-dialog-centered":"")+w.fullscreenClass+(w.scrollable?" modal-dialog-scrollable":"")+(w.modalDialogClass?" "+w.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),m})(),Za=(()=>{class m{constructor(p){this._document=p}hide(){const p=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),w=this._document.body,R=w.style,{overflow:z,paddingRight:De}=R;if(p>0){const Ye=parseFloat(window.getComputedStyle(w).paddingRight);R.paddingRight=`${Ye+p}px`}return R.overflow="hidden",()=>{p>0&&(R.paddingRight=De),R.overflow=z}}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(L.K0))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Jr=(()=>{class m{constructor(p,w,R,z,De,Ye){this._applicationRef=p,this._injector=w,this._document=R,this._scrollBar=z,this._rendererFactory=De,this._ngZone=Ye,this._activeWindowCmptHasChanged=new Me.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const it=this._windowCmpts[this._windowCmpts.length-1];Nl(this._ngZone,it.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(it.location.nativeElement)}})}_restoreScrollBar(){const p=this._scrollBarRestoreFn;p&&(this._scrollBarRestoreFn=null,p())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(p,w,R){const z=R.container instanceof HTMLElement?R.container:ma(R.container)?this._document.querySelector(R.container):this._document.body,De=this._rendererFactory.createRenderer(null,null);if(!z)throw new Error(`The specified modal container "${R.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Ye=new Ol,it=this._getContentRef(R.injector||p,w,Ye,R);let Ft=!1!==R.backdrop?this._attachBackdrop(z):void 0,Ot=this._attachWindowComponent(z,it.nodes),Un=new jh(Ot,it,Ft,R.beforeDismiss);return this._registerModalRef(Un),this._registerWindowCmpt(Ot),Un.hidden.pipe((0,Fe.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(De.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Ye.close=mn=>{Un.close(mn)},Ye.dismiss=mn=>{Un.dismiss(mn)},this._applyWindowOptions(Ot.instance,R),1===this._modalRefs.length&&De.addClass(this._document.body,"modal-open"),Ft&&Ft.instance&&(this._applyBackdropOptions(Ft.instance,R),Ft.changeDetectorRef.detectChanges()),Ot.changeDetectorRef.detectChanges(),Un}get activeInstances(){return this._activeInstances}dismissAll(p){this._modalRefs.forEach(w=>w.dismiss(p))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(p){let w=(0,u.LMc)(Ic,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(w.hostView),p.appendChild(w.location.nativeElement),w}_attachWindowComponent(p,w){let R=(0,u.LMc)(mg,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:w});return this._applicationRef.attachView(R.hostView),p.appendChild(R.location.nativeElement),R}_applyWindowOptions(p,w){this._windowAttributes.forEach(R=>{ma(w[R])&&(p[R]=w[R])})}_applyBackdropOptions(p,w){this._backdropAttributes.forEach(R=>{ma(w[R])&&(p[R]=w[R])})}_getContentRef(p,w,R,z){return w?w instanceof u.Rgc?this._createFromTemplateRef(w,R):Ii(w)?this._createFromString(w):this._createFromComponent(p,w,R,z):new nc([])}_createFromTemplateRef(p,w){const z=p.createEmbeddedView({$implicit:w,close(De){w.close(De)},dismiss(De){w.dismiss(De)}});return this._applicationRef.attachView(z),new nc([z.rootNodes],z)}_createFromString(p){const w=this._document.createTextNode(`${p}`);return new nc([[w]])}_createFromComponent(p,w,R,z){const De=u.zs3.create({providers:[{provide:Ol,useValue:R}],parent:p}),Ye=(0,u.LMc)(w,{environmentInjector:this._applicationRef.injector,elementInjector:De}),it=Ye.location.nativeElement;return z.scrollable&&it.classList.add("component-host-scrollable"),this._applicationRef.attachView(Ye.hostView),new nc([[it]],Ye.hostView,Ye)}_setAriaHidden(p){const w=p.parentElement;w&&p!==this._document.body&&(Array.from(w.children).forEach(R=>{R!==p&&"SCRIPT"!==R.nodeName&&(this._ariaHiddenValues.set(R,R.getAttribute("aria-hidden")),R.setAttribute("aria-hidden","true"))}),this._setAriaHidden(w))}_revertAriaHidden(){this._ariaHiddenValues.forEach((p,w)=>{p?w.setAttribute("aria-hidden",p):w.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(p){const w=()=>{const R=this._modalRefs.indexOf(p);R>-1&&(this._modalRefs.splice(R,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(p),this._activeInstances.emit(this._modalRefs),p.result.then(w,w)}_registerWindowCmpt(p){this._windowCmpts.push(p),this._activeWindowCmptHasChanged.next(),p.onDestroy(()=>{const w=this._windowCmpts.indexOf(p);w>-1&&(this._windowCmpts.splice(w,1),this._activeWindowCmptHasChanged.next())})}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(L.K0),u.LFG(Za),u.LFG(u.FYo),u.LFG(u.R0b))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),rc=(()=>{class m{constructor(p){this._ngbConfig=p,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(p){this._animation=p}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(_n))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Sc=(()=>{class m{constructor(p,w,R){this._injector=p,this._modalStack=w,this._config=R}open(p,w={}){const R={...this._config,animation:this._config.animation,...w};return this._modalStack.open(this._injector,p,R)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(p){this._modalStack.dismissAll(p)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return m.\u0275fac=function(p){return new(p||m)(u.LFG(u.zs3),u.LFG(Jr),u.LFG(rc))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Pa=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({providers:[Sc]}),m})(),fu=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),Wh=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),Cf=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),op=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),If=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),Sf=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),vh=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),up=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({}),m})();new u.OlP("live announcer delay",{providedIn:"root",factory:function Zh(){return 100}});let ad=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[L.ez]}),m})(),ud=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({}),m})();const Od=[Du,rl,M,K,td,Ya,Pa,fu,ud,Wh,Cf,op,If,Sf,vh,up,ad];let sc=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[Od,Du,rl,M,K,td,Ya,Pa,fu,ud,Wh,Cf,op,If,Sf,vh,up,ad]}),m})()},6188:(hn,dt,B)=>{B.d(dt,{Zw:()=>mt,aw:()=>Mn,X$:()=>Kt,sK:()=>nt});var u=B(4650),L=B(9646),ee=B(9751),Se=B(576);function Oe(Mt){return!!Mt&&(Mt instanceof ee.y||(0,Se.m)(Mt.lift)&&(0,Se.m)(Mt.subscribe))}var Me=B(4128),We=B(7272),ke=B(9770),Je=B(5698),we=B(3151),ye=B(4004),He=B(4351),Nt=B(3900);class mt{}let lt=(()=>{class Mt extends mt{getTranslation(ge){return(0,L.of)({})}}return Mt.\u0275fac=function(){let en;return function(ie){return(en||(en=u.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class xt{}let yt=(()=>{class Mt{handle(ge){return ge.key}}return Mt.\u0275fac=function(ge){return new(ge||Mt)},Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();function ut(Mt,en){if(Mt===en)return!0;if(null===Mt||null===en)return!1;if(Mt!=Mt&&en!=en)return!0;let Bt,Le,Qe,ge=typeof Mt;if(ge==typeof en&&"object"==ge){if(!Array.isArray(Mt)){if(Array.isArray(en))return!1;for(Le in Qe=Object.create(null),Mt){if(!ut(Mt[Le],en[Le]))return!1;Qe[Le]=!0}for(Le in en)if(!(Le in Qe)&&typeof en[Le]<"u")return!1;return!0}if(!Array.isArray(en))return!1;if((Bt=Mt.length)==en.length){for(Le=0;Le<Bt;Le++)if(!ut(Mt[Le],en[Le]))return!1;return!0}}return!1}function $e(Mt){return typeof Mt<"u"&&null!==Mt}function jt(Mt){return Mt&&"object"==typeof Mt&&!Array.isArray(Mt)}function gt(Mt,en){let ge=Object.assign({},Mt);return jt(Mt)&&jt(en)&&Object.keys(en).forEach(ie=>{jt(en[ie])?ie in Mt?ge[ie]=gt(Mt[ie],en[ie]):Object.assign(ge,{[ie]:en[ie]}):Object.assign(ge,{[ie]:en[ie]})}),ge}class qe{}let ze=(()=>{class Mt extends qe{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(ge,ie){let Bt;return Bt="string"==typeof ge?this.interpolateString(ge,ie):"function"==typeof ge?this.interpolateFunction(ge,ie):ge,Bt}getValue(ge,ie){let Bt="string"==typeof ie?ie.split("."):[ie];ie="";do{ie+=Bt.shift(),!$e(ge)||!$e(ge[ie])||"object"!=typeof ge[ie]&&Bt.length?Bt.length?ie+=".":ge=void 0:(ge=ge[ie],ie="")}while(Bt.length);return ge}interpolateFunction(ge,ie){return ge(ie)}interpolateString(ge,ie){return ie?ge.replace(this.templateMatcher,(Bt,Le)=>{let Qe=this.getValue(ie,Le);return $e(Qe)?Qe:Bt}):ge}}return Mt.\u0275fac=function(){let en;return function(ie){return(en||(en=u.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class $t{}let rt=(()=>{class Mt extends $t{compile(ge,ie){return ge}compileTranslations(ge,ie){return ge}}return Mt.\u0275fac=function(){let en;return function(ie){return(en||(en=u.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class Ue{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new u.vpe,this.onLangChange=new u.vpe,this.onDefaultLangChange=new u.vpe}}const bt=new u.OlP("USE_STORE"),Ne=new u.OlP("USE_DEFAULT_LANG"),Ge=new u.OlP("DEFAULT_LANGUAGE"),wt=new u.OlP("USE_EXTEND");let nt=(()=>{class Mt{constructor(ge,ie,Bt,Le,Qe,Fe=!0,st=!1,Xt=!1,an){this.store=ge,this.currentLoader=ie,this.compiler=Bt,this.parser=Le,this.missingTranslationHandler=Qe,this.useDefaultLang=Fe,this.isolate=st,this.extend=Xt,this.pending=!1,this._onTranslationChange=new u.vpe,this._onLangChange=new u.vpe,this._onDefaultLangChange=new u.vpe,this._langs=[],this._translations={},this._translationRequests={},an&&this.setDefaultLang(an)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(ge){this.isolate?this._defaultLang=ge:this.store.defaultLang=ge}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(ge){this.isolate?this._currentLang=ge:this.store.currentLang=ge}get langs(){return this.isolate?this._langs:this.store.langs}set langs(ge){this.isolate?this._langs=ge:this.store.langs=ge}get translations(){return this.isolate?this._translations:this.store.translations}set translations(ge){this.isolate?this._translations=ge:this.store.translations=ge}setDefaultLang(ge){if(ge===this.defaultLang)return;let ie=this.retrieveTranslations(ge);typeof ie<"u"?(null==this.defaultLang&&(this.defaultLang=ge),ie.pipe((0,Je.q)(1)).subscribe(Bt=>{this.changeDefaultLang(ge)})):this.changeDefaultLang(ge)}getDefaultLang(){return this.defaultLang}use(ge){if(ge===this.currentLang)return(0,L.of)(this.translations[ge]);let ie=this.retrieveTranslations(ge);return typeof ie<"u"?(this.currentLang||(this.currentLang=ge),ie.pipe((0,Je.q)(1)).subscribe(Bt=>{this.changeLang(ge)}),ie):(this.changeLang(ge),(0,L.of)(this.translations[ge]))}retrieveTranslations(ge){let ie;return(typeof this.translations[ge]>"u"||this.extend)&&(this._translationRequests[ge]=this._translationRequests[ge]||this.getTranslation(ge),ie=this._translationRequests[ge]),ie}getTranslation(ge){this.pending=!0;const ie=this.currentLoader.getTranslation(ge).pipe((0,we.d)(1),(0,Je.q)(1));return this.loadingTranslations=ie.pipe((0,ye.U)(Bt=>this.compiler.compileTranslations(Bt,ge)),(0,we.d)(1),(0,Je.q)(1)),this.loadingTranslations.subscribe({next:Bt=>{this.translations[ge]=this.extend&&this.translations[ge]?{...Bt,...this.translations[ge]}:Bt,this.updateLangs(),this.pending=!1},error:Bt=>{this.pending=!1}}),ie}setTranslation(ge,ie,Bt=!1){ie=this.compiler.compileTranslations(ie,ge),this.translations[ge]=(Bt||this.extend)&&this.translations[ge]?gt(this.translations[ge],ie):ie,this.updateLangs(),this.onTranslationChange.emit({lang:ge,translations:this.translations[ge]})}getLangs(){return this.langs}addLangs(ge){ge.forEach(ie=>{-1===this.langs.indexOf(ie)&&this.langs.push(ie)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(ge,ie,Bt){let Le;if(ie instanceof Array){let Qe={},Fe=!1;for(let st of ie)Qe[st]=this.getParsedResult(ge,st,Bt),Oe(Qe[st])&&(Fe=!0);if(Fe){const st=ie.map(Xt=>Oe(Qe[Xt])?Qe[Xt]:(0,L.of)(Qe[Xt]));return(0,Me.D)(st).pipe((0,ye.U)(Xt=>{let an={};return Xt.forEach((Dr,jn)=>{an[ie[jn]]=Dr}),an}))}return Qe}if(ge&&(Le=this.parser.interpolate(this.parser.getValue(ge,ie),Bt)),typeof Le>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Le=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ie),Bt)),typeof Le>"u"){let Qe={key:ie,translateService:this};typeof Bt<"u"&&(Qe.interpolateParams=Bt),Le=this.missingTranslationHandler.handle(Qe)}return typeof Le<"u"?Le:ie}get(ge,ie){if(!$e(ge)||!ge.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,He.b)(Bt=>Oe(Bt=this.getParsedResult(Bt,ge,ie))?Bt:(0,L.of)(Bt)));{let Bt=this.getParsedResult(this.translations[this.currentLang],ge,ie);return Oe(Bt)?Bt:(0,L.of)(Bt)}}getStreamOnTranslationChange(ge,ie){if(!$e(ge)||!ge.length)throw new Error('Parameter "key" required');return(0,We.z)((0,ke.P)(()=>this.get(ge,ie)),this.onTranslationChange.pipe((0,Nt.w)(Bt=>{const Le=this.getParsedResult(Bt.translations,ge,ie);return"function"==typeof Le.subscribe?Le:(0,L.of)(Le)})))}stream(ge,ie){if(!$e(ge)||!ge.length)throw new Error('Parameter "key" required');return(0,We.z)((0,ke.P)(()=>this.get(ge,ie)),this.onLangChange.pipe((0,Nt.w)(Bt=>{const Le=this.getParsedResult(Bt.translations,ge,ie);return Oe(Le)?Le:(0,L.of)(Le)})))}instant(ge,ie){if(!$e(ge)||!ge.length)throw new Error('Parameter "key" required');let Bt=this.getParsedResult(this.translations[this.currentLang],ge,ie);if(Oe(Bt)){if(ge instanceof Array){let Le={};return ge.forEach((Qe,Fe)=>{Le[ge[Fe]]=ge[Fe]}),Le}return ge}return Bt}set(ge,ie,Bt=this.currentLang){this.translations[Bt][ge]=this.compiler.compile(ie,Bt),this.updateLangs(),this.onTranslationChange.emit({lang:Bt,translations:this.translations[Bt]})}changeLang(ge){this.currentLang=ge,this.onLangChange.emit({lang:ge,translations:this.translations[ge]}),null==this.defaultLang&&this.changeDefaultLang(ge)}changeDefaultLang(ge){this.defaultLang=ge,this.onDefaultLangChange.emit({lang:ge,translations:this.translations[ge]})}reloadLang(ge){return this.resetLang(ge),this.getTranslation(ge)}resetLang(ge){this._translationRequests[ge]=void 0,this.translations[ge]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let ge=window.navigator.languages?window.navigator.languages[0]:null;return ge=ge||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof ge>"u"?void 0:(-1!==ge.indexOf("-")&&(ge=ge.split("-")[0]),-1!==ge.indexOf("_")&&(ge=ge.split("_")[0]),ge)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let ge=window.navigator.languages?window.navigator.languages[0]:null;return ge=ge||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,ge}}return Mt.\u0275fac=function(ge){return new(ge||Mt)(u.LFG(Ue),u.LFG(mt),u.LFG($t),u.LFG(qe),u.LFG(xt),u.LFG(Ne),u.LFG(bt),u.LFG(wt),u.LFG(Ge))},Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})(),Kt=(()=>{class Mt{constructor(ge,ie){this.translate=ge,this._ref=ie,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(ge,ie,Bt){let Le=Qe=>{this.value=void 0!==Qe?Qe:ge,this.lastKey=ge,this._ref.markForCheck()};if(Bt){let Qe=this.translate.getParsedResult(Bt,ge,ie);Oe(Qe.subscribe)?Qe.subscribe(Le):Le(Qe)}this.translate.get(ge,ie).subscribe(Le)}transform(ge,...ie){if(!ge||!ge.length)return ge;if(ut(ge,this.lastKey)&&ut(ie,this.lastParams))return this.value;let Bt;if($e(ie[0])&&ie.length)if("string"==typeof ie[0]&&ie[0].length){let Le=ie[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Bt=JSON.parse(Le)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ie[0]}`)}}else"object"==typeof ie[0]&&!Array.isArray(ie[0])&&(Bt=ie[0]);return this.lastKey=ge,this.lastParams=ie,this.updateValue(ge,Bt),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(Le=>{this.lastKey&&Le.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(ge,Bt,Le.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(Le=>{this.lastKey&&(this.lastKey=null,this.updateValue(ge,Bt,Le.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(ge,Bt))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return Mt.\u0275fac=function(ge){return new(ge||Mt)(u.Y36(nt,16),u.Y36(u.sBO,16))},Mt.\u0275pipe=u.Yjl({name:"translate",type:Mt,pure:!1}),Mt.\u0275prov=u.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})(),Mn=(()=>{class Mt{static forRoot(ge={}){return{ngModule:Mt,providers:[ge.loader||{provide:mt,useClass:lt},ge.compiler||{provide:$t,useClass:rt},ge.parser||{provide:qe,useClass:ze},ge.missingTranslationHandler||{provide:xt,useClass:yt},Ue,{provide:bt,useValue:ge.isolate},{provide:Ne,useValue:ge.useDefaultLang},{provide:wt,useValue:ge.extend},{provide:Ge,useValue:ge.defaultLanguage},nt]}}static forChild(ge={}){return{ngModule:Mt,providers:[ge.loader||{provide:mt,useClass:lt},ge.compiler||{provide:$t,useClass:rt},ge.parser||{provide:qe,useClass:ze},ge.missingTranslationHandler||{provide:xt,useClass:yt},{provide:bt,useValue:ge.isolate},{provide:Ne,useValue:ge.useDefaultLang},{provide:wt,useValue:ge.extend},{provide:Ge,useValue:ge.defaultLanguage},nt]}}}return Mt.\u0275fac=function(ge){return new(ge||Mt)},Mt.\u0275mod=u.oAB({type:Mt}),Mt.\u0275inj=u.cJS({}),Mt})()},259:(hn,dt,B)=>{B.d(dt,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=B(9681);(0,u.registerVersion)("firebase","9.15.0","app")},9260:(hn,dt,B)=>{B.d(dt,{Z:()=>u.Z});var u=B(3942);u.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(hn,dt,B)=>{B.r(dt);var u=B(5861),L=B(3942),ee=B(552),Se=B(2090),We=(B(9681),B(1877),B(4859));function ke(){return window}function ye(){return(ye=(0,u.Z)(function*(Te,se,be){var ht;const{BuildInfo:qt}=ke();(0,ee.ap)(se.sessionId,"AuthEvent did not contain a session ID");const bn=yield ut(se.sessionId),Nn={};return(0,ee.aq)()?Nn.ibi=qt.packageName:(0,ee.ar)()?Nn.apn=qt.packageName:(0,ee.as)(Te,"operation-not-supported-in-this-environment"),qt.displayName&&(Nn.appDisplayName=qt.displayName),Nn.sessionId=bn,(0,ee.at)(Te,be,se.type,void 0,null!==(ht=se.eventId)&&void 0!==ht?ht:void 0,Nn)})).apply(this,arguments)}function Nt(){return(Nt=(0,u.Z)(function*(Te){const{BuildInfo:se}=ke(),be={};(0,ee.aq)()?be.iosBundleId=se.packageName:(0,ee.ar)()?be.androidPackageName=se.packageName:(0,ee.as)(Te,"operation-not-supported-in-this-environment"),yield(0,ee.au)(Te,be)})).apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(Te,se,be){const{cordova:ht}=ke();let qt=()=>{};try{yield new Promise((bn,Nn)=>{let Ee=null;function ve(){var ft;bn();const tn=null===(ft=ht.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof tn&&tn(),"function"==typeof be?.close&&be.close()}function pe(){Ee||(Ee=window.setTimeout(()=>{Nn((0,ee.aw)(Te,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===document?.visibilityState&&pe()}se.addPassiveListener(ve),document.addEventListener("resume",pe,!1),(0,ee.ar)()&&document.addEventListener("visibilitychange",tt,!1),qt=()=>{se.removePassiveListener(ve),document.removeEventListener("resume",pe,!1),document.removeEventListener("visibilitychange",tt,!1),Ee&&window.clearTimeout(Ee)}})}finally{qt()}})).apply(this,arguments)}function ut(Te){return $e.apply(this,arguments)}function $e(){return($e=(0,u.Z)(function*(Te){const se=jt(Te),be=yield crypto.subtle.digest("SHA-256",se);return Array.from(new Uint8Array(be)).map(qt=>qt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function jt(Te){if((0,ee.ap)(/[0-9a-zA-Z]+/.test(Te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Te);const se=new ArrayBuffer(Te.length),be=new Uint8Array(se);for(let ht=0;ht<Te.length;ht++)be[ht]=Te.charCodeAt(ht);return be}class qe extends ee.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(se=>{this.resolveInialized=se})}addPassiveListener(se){this.passiveListeners.add(se)}removePassiveListener(se){this.passiveListeners.delete(se)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(se){return this.resolveInialized(),this.passiveListeners.forEach(be=>be(se)),super.onEvent(se)}initialized(){var se=this;return(0,u.Z)(function*(){yield se.initPromise})()}}function rt(Te){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,u.Z)(function*(Te){const se=yield Ge()._get(wt(Te));return se&&(yield Ge()._remove(wt(Te))),se})).apply(this,arguments)}function Ne(){const Te=[],se="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let be=0;be<20;be++){const ht=Math.floor(Math.random()*se.length);Te.push(se.charAt(ht))}return Te.join("")}function Ge(){return(0,ee.az)(ee.b)}function wt(Te){return(0,ee.aA)("authEvent",Te.config.apiKey,Te.name)}function Kt(Te){if(!Te?.includes("?"))return{};const[se,...be]=Te.split("?");return(0,Se.zd)(be.join("?"))}function ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.aw)("no-auth-event")}}function Fe(){var Te;return(null===(Te=self?.location)||void 0===Te?void 0:Te.protocol)||null}function Xt(Te=(0,Se.z$)()){return!("file:"!==Fe()&&"ionic:"!==Fe()&&"capacitor:"!==Fe()||!Te.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){try{const Te=self.localStorage,se=ee.aI();if(Te)return Te.setItem(se,"1"),Te.removeItem(se),!function ii(Te=(0,Se.z$)()){return function Dr(){return(0,Se.w1)()&&11===document?.documentMode}()||function jn(Te=(0,Se.z$)()){return/Edge\/\d+/.test(Te)}(Te)}()||(0,Se.hl)()}catch{return Nr()&&(0,Se.hl)()}return!1}function Nr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function st(){return"http:"===Fe()||"https:"===Fe()}()||(0,Se.ru)()||Xt())&&!function an(){return(0,Se.b$)()||(0,Se.UG)()}()&&br()&&!Nr()}function sr(){return Xt()&&typeof document<"u"}function un(){return(un=(0,u.Z)(function*(){return!!sr()&&new Promise(Te=>{const se=setTimeout(()=>{Te(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(se),Te(!0)})})})).apply(this,arguments)}const er={LOCAL:"local",NONE:"none",SESSION:"session"},ur=ee.ax,Xr="persistence";function Kn(Te){return pr.apply(this,arguments)}function pr(){return(pr=(0,u.Z)(function*(Te){yield Te._initializationPromise;const se=Tn(),be=ee.aA(Xr,Te.config.apiKey,Te.name);se&&se.setItem(be,Te._getPersistence())})).apply(this,arguments)}function Tn(){var Te;try{return(null===(Te=function Rr(){return typeof window<"u"?window:null}())||void 0===Te?void 0:Te.sessionStorage)||null}catch{return null}}const In=ee.ax;class kn{constructor(){this.browserResolver=ee.az(ee.k),this.cordovaResolver=ee.az(class Mt{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(se){var be=this;return(0,u.Z)(function*(){const ht=se._key();let qt=be.eventManagers.get(ht);return qt||(qt=new qe(se),be.eventManagers.set(ht,qt),be.attachCallbackListeners(se,qt)),qt})()}_openPopup(se){(0,ee.as)(se,"operation-not-supported-in-this-environment")}_openRedirect(se,be,ht,qt){var bn=this;return(0,u.Z)(function*(){!function yt(Te){var se,be,ht,qt,bn,Nn,Ee,ve,pe,tt;const ft=ke();(0,ee.ax)("function"==typeof(null===(se=ft?.universalLinks)||void 0===se?void 0:se.subscribe),Te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.ax)(typeof(null===(be=ft?.BuildInfo)||void 0===be?void 0:be.packageName)<"u",Te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.ax)("function"==typeof(null===(bn=null===(qt=null===(ht=ft?.cordova)||void 0===ht?void 0:ht.plugins)||void 0===qt?void 0:qt.browsertab)||void 0===bn?void 0:bn.openUrl),Te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(ve=null===(Ee=null===(Nn=ft?.cordova)||void 0===Nn?void 0:Nn.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===ve?void 0:ve.isAvailable),Te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(tt=null===(pe=ft?.cordova)||void 0===pe?void 0:pe.InAppBrowser)||void 0===tt?void 0:tt.open),Te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(se);const Nn=yield bn._initialize(se);yield Nn.initialized(),Nn.resetRedirect(),(0,ee.aD)(),yield bn._originValidation(se);const Ee=function ze(Te,se,be=null){return{type:se,eventId:be,urlResponse:null,sessionId:Ne(),postBody:null,tenantId:Te.tenantId,error:(0,ee.aw)(Te,"no-auth-event")}}(se,ht,qt);yield function $t(Te,se){return Ge()._set(wt(Te),se)}(se,Ee);const ve=yield function we(Te,se,be){return ye.apply(this,arguments)}(se,Ee,be),pe=yield function mt(Te){const{cordova:se}=ke();return new Promise(be=>{se.plugins.browsertab.isAvailable(ht=>{let qt=null;ht?se.plugins.browsertab.openUrl(Te):qt=se.InAppBrowser.open(Te,(0,ee.av)()?"_blank":"_system","location=yes"),be(qt)})})}(ve);return function lt(Te,se,be){return xt.apply(this,arguments)}(se,Nn,pe)})()}_isIframeWebStorageSupported(se,be){throw new Error("Method not implemented.")}_originValidation(se){const be=se._key();return this.originValidationPromises[be]||(this.originValidationPromises[be]=function He(Te){return Nt.apply(this,arguments)}(se)),this.originValidationPromises[be]}attachCallbackListeners(se,be){const{universalLinks:ht,handleOpenURL:qt,BuildInfo:bn}=ke(),Nn=setTimeout((0,u.Z)(function*(){yield rt(se),be.onEvent(ge())}),500),Ee=function(){var tt=(0,u.Z)(function*(ft){clearTimeout(Nn);const tn=yield rt(se);let Zn=null;tn&&ft?.url&&(Zn=function bt(Te,se){var be,ht;const qt=function Ht(Te){const se=Kt(Te),be=se.link?decodeURIComponent(se.link):void 0,ht=Kt(be).link,qt=se.deep_link_id?decodeURIComponent(se.deep_link_id):void 0;return Kt(qt).link||qt||ht||be||Te}(se);if(qt.includes("/__/auth/callback")){const bn=Kt(qt),Nn=bn.firebaseError?function nt(Te){try{return JSON.parse(Te)}catch{return null}}(decodeURIComponent(bn.firebaseError)):null,Ee=null===(ht=null===(be=Nn?.code)||void 0===be?void 0:be.split("auth/"))||void 0===ht?void 0:ht[1],ve=Ee?(0,ee.aw)(Ee):null;return ve?{type:Te.type,eventId:Te.eventId,tenantId:Te.tenantId,error:ve,urlResponse:null,sessionId:null,postBody:null}:{type:Te.type,eventId:Te.eventId,tenantId:Te.tenantId,sessionId:Te.sessionId,urlResponse:qt,postBody:null}}return null}(tn,ft.url)),be.onEvent(Zn||ge())});return function(tn){return tt.apply(this,arguments)}}();typeof ht<"u"&&"function"==typeof ht.subscribe&&ht.subscribe(null,Ee);const ve=qt,pe=`${bn.packageName.toLowerCase()}://`;ke().handleOpenURL=function(){var tt=(0,u.Z)(function*(ft){if(ft.toLowerCase().startsWith(pe)&&Ee({url:ft}),"function"==typeof ve)try{ve(ft)}catch(tn){console.error(tn)}});return function(ft){return tt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(se){var be=this;return(0,u.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._initialize(se)})()}_openPopup(se,be,ht,qt){var bn=this;return(0,u.Z)(function*(){return yield bn.selectUnderlyingResolver(),bn.assertedUnderlyingResolver._openPopup(se,be,ht,qt)})()}_openRedirect(se,be,ht,qt){var bn=this;return(0,u.Z)(function*(){return yield bn.selectUnderlyingResolver(),bn.assertedUnderlyingResolver._openRedirect(se,be,ht,qt)})()}_isIframeWebStorageSupported(se,be){this.assertedUnderlyingResolver._isIframeWebStorageSupported(se,be)}_originValidation(se){return this.assertedUnderlyingResolver._originValidation(se)}get _shouldInitProactively(){return sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return In(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var se=this;return(0,u.Z)(function*(){if(se.underlyingResolver)return;const be=yield function Tr(){return un.apply(this,arguments)}();se.underlyingResolver=be?se.cordovaResolver:se.browserResolver})()}}function xn(Te){return Te.unwrap()}function Ai(Te){return ci(Te)}function ci(Te){const{_tokenResponse:se}=Te instanceof Se.ZR?Te.customData:Te;if(!se)return null;if(!(Te instanceof Se.ZR)&&"temporaryProof"in se&&"phoneNumber"in se)return ee.P.credentialFromResult(Te);const be=se.providerId;if(!be||be===ee.o.PASSWORD)return null;let ht;switch(be){case ee.o.GOOGLE:ht=ee.Q;break;case ee.o.FACEBOOK:ht=ee.N;break;case ee.o.GITHUB:ht=ee.T;break;case ee.o.TWITTER:ht=ee.W;break;default:const{oauthIdToken:qt,oauthAccessToken:bn,oauthTokenSecret:Nn,pendingToken:Ee,nonce:ve}=se;return bn||Nn||qt||Ee?Ee?be.startsWith("saml.")?ee.aL._create(be,Ee):ee.J._fromParams({providerId:be,signInMethod:be,pendingToken:Ee,idToken:qt,accessToken:bn}):new ee.U(be).credential({idToken:qt,accessToken:bn,rawNonce:ve}):null}return Te instanceof Se.ZR?ht.credentialFromError(Te):ht.credentialFromResult(Te)}function vn(Te,se){return se.catch(be=>{throw be instanceof Se.ZR&&function Vn(Te,se){var be;const ht=null===(be=se.customData)||void 0===be?void 0:be._tokenResponse;if("auth/multi-factor-auth-required"===se?.code)se.resolver=new si(Te,ee.an(Te,se));else if(ht){const qt=ci(se),bn=se;qt&&(bn.credential=qt,bn.tenantId=ht.tenantId||void 0,bn.email=ht.email||void 0,bn.phoneNumber=ht.phoneNumber||void 0)}}(Te,be),be}).then(be=>{const qt=be.user;return{operationType:be.operationType,credential:Ai(be),additionalUserInfo:ee.al(be),user:Pr.getOrCreate(qt)}})}function Di(Te,se){return _r.apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(Te,se){const be=yield se;return{verificationId:be.verificationId,confirm:ht=>vn(Te,be.confirm(ht))}})).apply(this,arguments)}class si{constructor(se,be){this.resolver=be,this.auth=function Mr(Te){return Te.wrapped()}(se)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(se){return vn(xn(this.auth),this.resolver.resolveSignIn(se))}}class Pr{constructor(se){this._delegate=se,this.multiFactor=ee.ao(se)}static getOrCreate(se){return Pr.USER_MAP.has(se)||Pr.USER_MAP.set(se,new Pr(se)),Pr.USER_MAP.get(se)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(se){return this._delegate.getIdTokenResult(se)}getIdToken(se){return this._delegate.getIdToken(se)}linkAndRetrieveDataWithCredential(se){return this.linkWithCredential(se)}linkWithCredential(se){var be=this;return(0,u.Z)(function*(){return vn(be.auth,ee.Z(be._delegate,se))})()}linkWithPhoneNumber(se,be){var ht=this;return(0,u.Z)(function*(){return Di(ht.auth,ee.l(ht._delegate,se,be))})()}linkWithPopup(se){var be=this;return(0,u.Z)(function*(){return vn(be.auth,ee.d(be._delegate,se,kn))})()}linkWithRedirect(se){var be=this;return(0,u.Z)(function*(){return yield Kn(ee.aE(be.auth)),ee.g(be._delegate,se,kn)})()}reauthenticateAndRetrieveDataWithCredential(se){return this.reauthenticateWithCredential(se)}reauthenticateWithCredential(se){var be=this;return(0,u.Z)(function*(){return vn(be.auth,ee._(be._delegate,se))})()}reauthenticateWithPhoneNumber(se,be){return Di(this.auth,ee.r(this._delegate,se,be))}reauthenticateWithPopup(se){return vn(this.auth,ee.e(this._delegate,se,kn))}reauthenticateWithRedirect(se){var be=this;return(0,u.Z)(function*(){return yield Kn(ee.aE(be.auth)),ee.h(be._delegate,se,kn)})()}sendEmailVerification(se){return ee.ab(this._delegate,se)}unlink(se){var be=this;return(0,u.Z)(function*(){return yield ee.ak(be._delegate,se),be})()}updateEmail(se){return ee.ag(this._delegate,se)}updatePassword(se){return ee.ah(this._delegate,se)}updatePhoneNumber(se){return ee.u(this._delegate,se)}updateProfile(se){return ee.af(this._delegate,se)}verifyBeforeUpdateEmail(se,be){return ee.ac(this._delegate,se,be)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Pr.USER_MAP=new WeakMap;const yn=ee.ax;let Ut=(()=>{class Te{constructor(be,ht){if(this.app=be,ht.isInitialized())return this._delegate=ht.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qt}=be.options;yn(qt,"invalid-api-key",{appName:be.name}),yn(qt,"invalid-api-key",{appName:be.name});const bn=typeof window<"u"?kn:void 0;this._delegate=ht.initialize({options:{persistence:Gn(qt,be.name),popupRedirectResolver:bn}}),this._delegate._updateErrorMap(ee.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Pr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(be){this._delegate.languageCode=be}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(be){this._delegate.tenantId=be}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(be,ht){ee.G(this._delegate,be,ht)}applyActionCode(be){return ee.a2(this._delegate,be)}checkActionCode(be){return ee.a3(this._delegate,be)}confirmPasswordReset(be,ht){return ee.a1(this._delegate,be,ht)}createUserWithEmailAndPassword(be,ht){var qt=this;return(0,u.Z)(function*(){return vn(qt._delegate,ee.a5(qt._delegate,be,ht))})()}fetchProvidersForEmail(be){return this.fetchSignInMethodsForEmail(be)}fetchSignInMethodsForEmail(be){return ee.aa(this._delegate,be)}isSignInWithEmailLink(be){return ee.a8(this._delegate,be)}getRedirectResult(){var be=this;return(0,u.Z)(function*(){yn(Wn(),be._delegate,"operation-not-supported-in-this-environment");const ht=yield ee.j(be._delegate,kn);return ht?vn(be._delegate,Promise.resolve(ht)):{credential:null,user:null}})()}addFrameworkForLogging(be){!function ie(Te,se){(0,ee.aE)(Te)._logFramework(se)}(this._delegate,be)}onAuthStateChanged(be,ht,qt){const{next:bn,error:Nn,complete:Ee}=En(be,ht,qt);return this._delegate.onAuthStateChanged(bn,Nn,Ee)}onIdTokenChanged(be,ht,qt){const{next:bn,error:Nn,complete:Ee}=En(be,ht,qt);return this._delegate.onIdTokenChanged(bn,Nn,Ee)}sendSignInLinkToEmail(be,ht){return ee.a7(this._delegate,be,ht)}sendPasswordResetEmail(be,ht){return ee.a0(this._delegate,be,ht||void 0)}setPersistence(be){var ht=this;return(0,u.Z)(function*(){let qt;switch(function ji(Te,se){ur(Object.values(er).includes(se),Te,"invalid-persistence-type"),(0,Se.b$)()?ur(se!==er.SESSION,Te,"unsupported-persistence-type"):(0,Se.UG)()?ur(se===er.NONE,Te,"unsupported-persistence-type"):Nr()?ur(se===er.NONE||se===er.LOCAL&&(0,Se.hl)(),Te,"unsupported-persistence-type"):ur(se===er.NONE||br(),Te,"unsupported-persistence-type")}(ht._delegate,be),be){case er.SESSION:qt=ee.a;break;case er.LOCAL:qt=(yield ee.az(ee.i)._isAvailable())?ee.i:ee.b;break;case er.NONE:qt=ee.L;break;default:return ee.as("argument-error",{appName:ht._delegate.name})}return ht._delegate.setPersistence(qt)})()}signInAndRetrieveDataWithCredential(be){return this.signInWithCredential(be)}signInAnonymously(){return vn(this._delegate,ee.X(this._delegate))}signInWithCredential(be){return vn(this._delegate,ee.Y(this._delegate,be))}signInWithCustomToken(be){return vn(this._delegate,ee.$(this._delegate,be))}signInWithEmailAndPassword(be,ht){return vn(this._delegate,ee.a6(this._delegate,be,ht))}signInWithEmailLink(be,ht){return vn(this._delegate,ee.a9(this._delegate,be,ht))}signInWithPhoneNumber(be,ht){return Di(this._delegate,ee.s(this._delegate,be,ht))}signInWithPopup(be){var ht=this;return(0,u.Z)(function*(){return yn(Wn(),ht._delegate,"operation-not-supported-in-this-environment"),vn(ht._delegate,ee.c(ht._delegate,be,kn))})()}signInWithRedirect(be){var ht=this;return(0,u.Z)(function*(){return yn(Wn(),ht._delegate,"operation-not-supported-in-this-environment"),yield Kn(ht._delegate),ee.f(ht._delegate,be,kn)})()}updateCurrentUser(be){return this._delegate.updateCurrentUser(be)}verifyPasswordResetCode(be){return ee.a4(this._delegate,be)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Te.Persistence=er,Te})();function En(Te,se,be){let ht=Te;"function"!=typeof Te&&({next:ht,error:se,complete:be}=Te);const qt=ht;return{next:Nn=>qt(Nn&&Pr.getOrCreate(Nn)),error:se,complete:be}}function Gn(Te,se){const be=function dr(Te,se){const be=Tn();if(!be)return[];const ht=ee.aA(Xr,Te,se);switch(be.getItem(ht)){case er.NONE:return[ee.L];case er.LOCAL:return[ee.i,ee.a];case er.SESSION:return[ee.a];default:return[]}}(Te,se);if(typeof self<"u"&&!be.includes(ee.i)&&be.push(ee.i),typeof window<"u")for(const ht of[ee.b,ee.a])be.includes(ht)||be.push(ht);return be.includes(ee.L)||be.push(ee.L),be}class Ln{constructor(){this.providerId="phone",this._delegate=new ee.P(xn(L.Z.auth()))}static credential(se,be){return ee.P.credential(se,be)}verifyPhoneNumber(se,be){return this._delegate.verifyPhoneNumber(se,be)}unwrap(){return this._delegate}}Ln.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,Ln.PROVIDER_ID=ee.P.PROVIDER_ID;const tr=ee.ax;class Be{constructor(se,be,ht=L.Z.app()){var qt;tr(null===(qt=ht.options)||void 0===qt?void 0:qt.apiKey,"invalid-api-key",{appName:ht.name}),this._delegate=new ee.R(se,be,ht.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ze(Te){Te.INTERNAL.registerComponent(new We.wA("auth-compat",se=>{const be=se.getProvider("app-compat").getImmediate(),ht=se.getProvider("auth");return new Ut(be,ht)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.M,FacebookAuthProvider:ee.N,GithubAuthProvider:ee.T,GoogleAuthProvider:ee.Q,OAuthProvider:ee.U,SAMLAuthProvider:ee.V,PhoneAuthProvider:Ln,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:Be,TwitterAuthProvider:ee.W,Auth:Ut,AuthCredential:ee.H,Error:Se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Te.registerVersion("@firebase/auth-compat","0.3.0")}(L.Z)},8766:(hn,dt,B)=>{B.d(dt,{Lj:()=>gt,X3:()=>jt});var u=B(5861);let ee,Se;const We=new WeakMap,ke=new WeakMap,Je=new WeakMap,we=new WeakMap,ye=new WeakMap;let mt={get(Ue,bt,Ne){if(Ue instanceof IDBTransaction){if("done"===bt)return ke.get(Ue);if("objectStoreNames"===bt)return Ue.objectStoreNames||Je.get(Ue);if("store"===bt)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return ut(Ue[bt])},set:(Ue,bt,Ne)=>(Ue[bt]=Ne,!0),has:(Ue,bt)=>Ue instanceof IDBTransaction&&("done"===bt||"store"===bt)||bt in Ue};function yt(Ue){return"function"==typeof Ue?function xt(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...bt){return Ue.apply($e(this),bt),ut(We.get(this))}:function(...bt){return ut(Ue.apply($e(this),bt))}:function(bt,...Ne){const Ge=Ue.call($e(this),bt,...Ne);return Je.set(Ge,bt.sort?bt.sort():[bt]),ut(Ge)}}(Ue):(Ue instanceof IDBTransaction&&function Nt(Ue){if(ke.has(Ue))return;const bt=new Promise((Ne,Ge)=>{const wt=()=>{Ue.removeEventListener("complete",nt),Ue.removeEventListener("error",Ht),Ue.removeEventListener("abort",Ht)},nt=()=>{Ne(),wt()},Ht=()=>{Ge(Ue.error||new DOMException("AbortError","AbortError")),wt()};Ue.addEventListener("complete",nt),Ue.addEventListener("error",Ht),Ue.addEventListener("abort",Ht)});ke.set(Ue,bt)}(Ue),((Ue,bt)=>bt.some(Ne=>Ue instanceof Ne))(Ue,function Oe(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,mt):Ue)}function ut(Ue){if(Ue instanceof IDBRequest)return function He(Ue){const bt=new Promise((Ne,Ge)=>{const wt=()=>{Ue.removeEventListener("success",nt),Ue.removeEventListener("error",Ht)},nt=()=>{Ne(ut(Ue.result)),wt()},Ht=()=>{Ge(Ue.error),wt()};Ue.addEventListener("success",nt),Ue.addEventListener("error",Ht)});return bt.then(Ne=>{Ne instanceof IDBCursor&&We.set(Ne,Ue)}).catch(()=>{}),ye.set(bt,Ue),bt}(Ue);if(we.has(Ue))return we.get(Ue);const bt=yt(Ue);return bt!==Ue&&(we.set(Ue,bt),ye.set(bt,Ue)),bt}const $e=Ue=>ye.get(Ue);function jt(Ue,bt,{blocked:Ne,upgrade:Ge,blocking:wt,terminated:nt}={}){const Ht=indexedDB.open(Ue,bt),Kt=ut(Ht);return Ge&&Ht.addEventListener("upgradeneeded",Mn=>{Ge(ut(Ht.result),Mn.oldVersion,Mn.newVersion,ut(Ht.transaction))}),Ne&&Ht.addEventListener("blocked",()=>Ne()),Kt.then(Mn=>{nt&&Mn.addEventListener("close",()=>nt()),wt&&Mn.addEventListener("versionchange",()=>wt())}).catch(()=>{}),Kt}function gt(Ue,{blocked:bt}={}){const Ne=indexedDB.deleteDatabase(Ue);return bt&&Ne.addEventListener("blocked",()=>bt()),ut(Ne).then(()=>{})}const qe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],$t=new Map;function rt(Ue,bt){if(!(Ue instanceof IDBDatabase)||bt in Ue||"string"!=typeof bt)return;if($t.get(bt))return $t.get(bt);const Ne=bt.replace(/FromIndex$/,""),Ge=bt!==Ne,wt=ze.includes(Ne);if(!(Ne in(Ge?IDBIndex:IDBObjectStore).prototype)||!wt&&!qe.includes(Ne))return;const nt=function(){var Ht=(0,u.Z)(function*(Kt,...Mn){const Mt=this.transaction(Kt,wt?"readwrite":"readonly");let en=Mt.store;return Ge&&(en=en.index(Mn.shift())),(yield Promise.all([en[Ne](...Mn),wt&&Mt.done]))[0]});return function(Mn){return Ht.apply(this,arguments)}}();return $t.set(bt,nt),nt}!function lt(Ue){mt=Ue(mt)}(Ue=>({...Ue,get:(bt,Ne,Ge)=>rt(bt,Ne)||Ue.get(bt,Ne,Ge),has:(bt,Ne)=>!!rt(bt,Ne)||Ue.has(bt,Ne)}))},5861:(hn,dt,B)=>{function u(ee,Se,Oe,Me,We,ke,Je){try{var we=ee[ke](Je),ye=we.value}catch(He){return void Oe(He)}we.done?Se(ye):Promise.resolve(ye).then(Me,We)}function L(ee){return function(){var Se=this,Oe=arguments;return new Promise(function(Me,We){var ke=ee.apply(Se,Oe);function Je(ye){u(ke,Me,We,Je,we,"next",ye)}function we(ye){u(ke,Me,We,Je,we,"throw",ye)}Je(void 0)})}}B.d(dt,{Z:()=>L})}},hn=>{hn(hn.s=668)}]);