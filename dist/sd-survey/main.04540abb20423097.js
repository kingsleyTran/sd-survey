"use strict";(self.webpackChunksd_survey=self.webpackChunksd_survey||[]).push([[179],{6217:(cn,dt,L)=>{L.d(dt,{nm:()=>ji});var h=L(2122);L(4650),L(259);var gt=L(5861),qe=L(9681),ze=L(4859),jt=L(2090),nt=L(1877);const Ve=new Map,bt={activated:!1,tokenObservers:[]},Se={initialized:!1,enabled:!1};function $e(ut){return Ve.get(ut)||Object.assign({},bt)}function tt(){return Se}class ie{constructor(Je,vt,Wt,ln,xn){if(this.operation=Je,this.retryPolicy=vt,this.getWaitDuration=Wt,this.lowerBound=ln,this.upperBound=xn,this.pending=null,this.nextErrorWaitInterval=ln,ln>xn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Je){var vt=this;return(0,gt.Z)(function*(){vt.stop();try{vt.pending=new jt.BH,yield function At(ut){return new Promise(Je=>{setTimeout(Je,ut)})}(vt.getNextRun(Je)),vt.pending.resolve(),yield vt.pending.promise,vt.pending=new jt.BH,yield vt.operation(),vt.pending.resolve(),yield vt.pending.promise,vt.process(!0).catch(()=>{})}catch(Wt){vt.retryPolicy(Wt)?vt.process(!1).catch(()=>{}):vt.stop()}})()}getNextRun(Je){if(Je)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const vt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),vt}}}const Ye=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ot(ut){if(!$e(ut).activated)throw Ye.create("use-before-activation",{appName:ut.name})}function Dr(ut,Je){return jn.apply(this,arguments)}function jn(){return(jn=(0,gt.Z)(function*({url:ut,body:Je},vt){const Wt={"Content-Type":"application/json"},ln=vt.getImmediate({optional:!0});if(ln){const Bi=yield ln.getHeartbeatsHeader();Bi&&(Wt["X-Firebase-Client"]=Bi)}const xn={method:"POST",body:JSON.stringify(Je),headers:Wt};let sr,Di;try{sr=yield fetch(ut,xn)}catch(Bi){throw Ye.create("fetch-network-error",{originalErrorMessage:Bi?.message})}if(200!==sr.status)throw Ye.create("fetch-status-error",{httpStatus:sr.status});try{Di=yield sr.json()}catch(Bi){throw Ye.create("fetch-parse-error",{originalErrorMessage:Bi?.message})}const oi=Di.ttl.match(/^([\d.]+)(s)$/);if(!oi||!oi[2]||isNaN(Number(oi[1])))throw Ye.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Di.ttl}`});const ho=1e3*Number(oi[1]),ms=Date.now();return{token:Di.token,expireTimeMillis:ms+ho,issuedAtTimeMillis:ms}})).apply(this,arguments)}function Sr(ut,Je){const{projectId:vt,appId:Wt,apiKey:ln}=ut.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${vt}/apps/${Wt}:exchangeDebugToken?key=${ln}`,body:{debug_token:Je}}}const Tr="firebase-app-check-store";let br=null;function Gn(){return br||(br=new Promise((ut,Je)=>{try{const vt=indexedDB.open("firebase-app-check-database",1);vt.onsuccess=Wt=>{ut(Wt.target.result)},vt.onerror=Wt=>{var ln;Je(Ye.create("storage-open",{originalErrorMessage:null===(ln=Wt.target.error)||void 0===ln?void 0:ln.message}))},vt.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(vt){Je(Ye.create("storage-open",{originalErrorMessage:vt?.message}))}}),br)}function lr(){return(lr=(0,gt.Z)(function*(ut,Je){const Wt=(yield Gn()).transaction(Tr,"readwrite"),xn=Wt.objectStore(Tr).put({compositeKey:ut,value:Je});return new Promise((sr,Di)=>{xn.onsuccess=oi=>{sr()},Wt.onerror=oi=>{var ho;Di(Ye.create("storage-set",{originalErrorMessage:null===(ho=oi.target.error)||void 0===ho?void 0:ho.message}))}})})).apply(this,arguments)}const On=new nt.Yd("@firebase/app-check");function kn(ut,Je){return(0,jt.hl)()?function Yr(ut,Je){return function fr(ut,Je){return lr.apply(this,arguments)}(function Pn(ut){return`${ut.options.appId}-${ut.name}`}(ut),Je)}(ut,Je).catch(vt=>{On.warn(`Failed to write token to IndexedDB. Error: ${vt}`)}):Promise.resolve()}function Si(){return tt().enabled}function mr(){return si.apply(this,arguments)}function si(){return(si=(0,gt.Z)(function*(){const ut=tt();if(ut.enabled&&ut.token)return ut.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mn={error:"UNKNOWN_ERROR"};function Bt(ut){return jt.US.encodeString(JSON.stringify(ut),!1)}function bn(ut){return zn.apply(this,arguments)}function zn(){return(zn=(0,gt.Z)(function*(ut,Je=!1){const vt=ut.app;ot(vt);const Wt=$e(vt);let xn,ln=Wt.token;if(ln&&!De(ln)&&(Wt.token=void 0,ln=void 0),!ln){const oi=yield Wt.cachedTokenPromise;oi&&(De(oi)?ln=oi:yield kn(vt,void 0))}if(!Je&&ln&&De(ln))return{token:ln.token};let Di,sr=!1;if(Si()){Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Dr(Sr(vt,yield mr()),ut.heartbeatServiceProvider).finally(()=>{Wt.exchangeTokenPromise=void 0}),sr=!0);const oi=yield Wt.exchangeTokenPromise;return yield kn(vt,oi),Wt.token=oi,{token:oi.token}}try{Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Wt.provider.getToken().finally(()=>{Wt.exchangeTokenPromise=void 0}),sr=!0),ln=yield $e(vt).exchangeTokenPromise}catch(oi){"appCheck/throttled"===oi.code?On.warn(oi.message):On.error(oi),xn=oi}return ln?xn?Di=De(ln)?{token:ln.token,internalError:xn}:ae(xn):(Di={token:ln.token},Wt.token=ln,yield kn(vt,ln)):Di=ae(xn),sr&&Qe(vt,Di),Di})).apply(this,arguments)}function tr(ut,Je){const vt=$e(ut),Wt=vt.tokenObservers.filter(ln=>ln.next!==Je);0===Wt.length&&vt.tokenRefresher&&vt.tokenRefresher.isRunning()&&vt.tokenRefresher.stop(),vt.tokenObservers=Wt}function Fe(ut){const{app:Je}=ut,vt=$e(Je);let Wt=vt.tokenRefresher;Wt||(Wt=function Ae(ut){const{app:Je}=ut;return new ie((0,gt.Z)(function*(){let Wt;if(Wt=$e(Je).token?yield bn(ut,!0):yield bn(ut),Wt.error)throw Wt.error;if(Wt.internalError)throw Wt.internalError}),()=>!0,()=>{const vt=$e(Je);if(vt.token){let Wt=vt.token.issuedAtTimeMillis+.5*(vt.token.expireTimeMillis-vt.token.issuedAtTimeMillis)+3e5;return Wt=Math.min(Wt,vt.token.expireTimeMillis-3e5),Math.max(0,Wt-Date.now())}return 0},3e4,96e4)}(ut),vt.tokenRefresher=Wt),!Wt.isRunning()&&vt.isTokenAutoRefreshEnabled&&Wt.start()}function Qe(ut,Je){const vt=$e(ut).tokenObservers;for(const Wt of vt)try{"EXTERNAL"===Wt.type&&null!=Je.error?Wt.error(Je.error):Wt.next(Je)}catch{}}function De(ut){return ut.expireTimeMillis-Date.now()>0}function ae(ut){return{token:Bt(mn),error:ut}}class be{constructor(Je,vt){this.app=Je,this.heartbeatServiceProvider=vt}_delete(){const{tokenObservers:Je}=$e(this.app);for(const vt of Je)tr(this.app,vt.next);return Promise.resolve()}}const Ss="app-check-internal";!function As(){(0,qe._registerComponent)(new ze.wA("app-check",ut=>function ht(ut,Je){return new be(ut,Je)}(ut.getProvider("app").getImmediate(),ut.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ut,Je,vt)=>{ut.getProvider(Ss).initialize()})),(0,qe._registerComponent)(new ze.wA(Ss,ut=>function Yt(ut){return{getToken:Je=>bn(ut,Je),addTokenListener:Je=>function Bn(ut,Je,vt,Wt){const{app:ln}=ut,xn=$e(ln);if(xn.tokenObservers=[...xn.tokenObservers,{next:vt,error:Wt,type:Je}],xn.token&&De(xn.token)){const Di=xn.token;Promise.resolve().then(()=>{vt({token:Di.token}),Fe(ut)}).catch(()=>{})}xn.cachedTokenPromise.then(()=>Fe(ut))}(ut,"INTERNAL",Je),removeTokenListener:Je=>tr(ut.app,Je)}}(ut.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qe.registerVersion)("@firebase/app-check","0.6.0")}();class ji{constructor(){return(0,h.vb)("app-check")}}typeof window<"u"&&window},3385:(cn,dt,L)=>{L.d(dt,{zQ:()=>$e,ww:()=>wt,rT:()=>nt,f7:()=>bt,L6:()=>ze,_Q:()=>jt,lh:()=>Ve,Qv:()=>qe,nw:()=>Se});var h=L(4650),U=L(7579),ee=L(9646),Ce=L(9751),Me=L(8996),Oe=L(6451),Ge=L(5363),Pe=L(3900),Ze=L(4004),we=L(3151),_e=L(590),Ue=L(576);function Nt(tt,Ut){return(0,Ue.m)(Ut)?(0,Pe.w)(()=>tt,Ut):(0,Pe.w)(()=>tt)}var mt=L(9468),lt=L(9300),xt=L(2122),yt=L(2011),ct=L(6895),je=L(6217),Ht=L(9260);const qe=new h.OlP("angularfire2.auth.use-emulator"),ze=new h.OlP("angularfire2.auth.settings"),jt=new h.OlP("angularfire2.auth.tenant-id"),nt=new h.OlP("angularfire2.auth.langugage-code"),Ve=new h.OlP("angularfire2.auth.use-device-language"),bt=new h.OlP("angularfire.auth.persistence"),Se=(tt,Ut,Kt,An,Mt,tn,pe,ie)=>(0,yt.cc)(`${tt.name}.auth`,"AngularFireAuth",tt.name,()=>{const At=Ut.runOutsideAngular(()=>tt.auth());if(Kt&&At.useEmulator(...Kt),An&&(At.tenantId=An),At.languageCode=Mt,tn&&At.useDeviceLanguage(),pe)for(const[We,Ye]of Object.entries(pe))At.settings[We]=Ye;return ie&&At.setPersistence(ie),At},[Kt,An,Mt,tn,pe,ie]);let $e=(()=>{class tt{constructor(Kt,An,Mt,tn,pe,ie,At,We,Ye,Be,ot,en){const an=new U.x,Dr=(0,ee.of)(void 0).pipe((0,Ge.Q)(pe.outsideAngular),(0,Pe.w)(()=>tn.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9568)))),(0,Ze.U)(()=>(0,yt.on)(Kt,tn,An)),(0,Ze.U)(jn=>Se(jn,tn,ie,We,Ye,Be,At,ot)),(0,we.d)({bufferSize:1,refCount:!1}));if((0,ct.PM)(Mt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{Dr.pipe((0,_e.P)()).subscribe();const gi=Dr.pipe((0,Pe.w)(Kn=>Kn.getRedirectResult().then(ir=>ir,()=>null)),xt.iC,(0,we.d)({bufferSize:1,refCount:!1})),vr=Dr.pipe((0,Pe.w)(Kn=>new Ce.y(ir=>({unsubscribe:tn.runOutsideAngular(()=>Kn.onAuthStateChanged(Tr=>ir.next(Tr),Tr=>ir.error(Tr),()=>ir.complete()))})))),Sr=Dr.pipe((0,Pe.w)(Kn=>new Ce.y(ir=>({unsubscribe:tn.runOutsideAngular(()=>Kn.onIdTokenChanged(Tr=>ir.next(Tr),Tr=>ir.error(Tr),()=>ir.complete()))}))));this.authState=gi.pipe(Nt(vr),(0,mt.R)(pe.outsideAngular),(0,Ge.Q)(pe.insideAngular)),this.user=gi.pipe(Nt(Sr),(0,mt.R)(pe.outsideAngular),(0,Ge.Q)(pe.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Kn=>Kn?(0,Me.D)(Kn.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Kn=>Kn?(0,Me.D)(Kn.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Oe.T)(gi,an,this.authState.pipe((0,lt.h)(Kn=>!Kn))).pipe((0,Ze.U)(Kn=>Kn?.user?Kn:null),(0,mt.R)(pe.outsideAngular),(0,Ge.Q)(pe.insideAngular))}return(0,yt.pX)(this,Dr,tn,{spy:{apply:(jn,gi,vr)=>{(jn.startsWith("signIn")||jn.startsWith("createUser"))&&vr.then(Sr=>an.next(Sr))}}})}}return tt.\u0275fac=function(Kt){return new(Kt||tt)(h.LFG(yt.Dh),h.LFG(yt.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(xt.HU),h.LFG(qe,8),h.LFG(ze,8),h.LFG(jt,8),h.LFG(nt,8),h.LFG(Ve,8),h.LFG(bt,8),h.LFG(je.nm,8))},tt.\u0275prov=h.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"any"}),tt})(),wt=(()=>{class tt{constructor(){Ht.Z.registerVersion("angularfire",xt.q4.full,"auth-compat")}}return tt.\u0275fac=function(Kt){return new(Kt||tt)},tt.\u0275mod=h.oAB({type:tt}),tt.\u0275inj=h.cJS({providers:[$e]}),tt})()},3101:(cn,dt,L)=>{L.d(dt,{ST:()=>fy,yb:()=>rv});var h=L(4650),U=L(4986),ee=L(9751),Ce=L(8996),Me=L(9646),Oe=L(2122),Ge=L(8675),Pe=L(4482),Ze=L(5403);function we(){return(0,Pe.e)((i,e)=>{let t,a=!1;i.subscribe((0,Ze.x)(e,f=>{const y=t;t=f,a&&e.next([y,f]),a=!0}))})}var Ve,_e=L(4004),Ue=L(5026),Nt=L(1884),mt=L(9300),lt=L(2011),xt=L(6895),ct=(L(9568),L(3942)),je=L(5861),Ht=L(9681),gt=L(4859),qe=L(1877),ze=L(2090),jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nt={},bt=bt||{},Se=jt||self;function $e(){}function wt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function tt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Kt="closure_uid_"+(1e9*Math.random()>>>0),An=0;function Mt(i,e,t){return i.call.apply(i.bind,arguments)}function tn(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,a),i.apply(e,f)}}return function(){return i.apply(e,arguments)}}function pe(i,e,t){return(pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mt:tn).apply(null,arguments)}function ie(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function At(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(a,f,y){for(var T=Array(arguments.length-2),x=2;x<arguments.length;x++)T[x-2]=arguments[x];return e.prototype[f].apply(a,T)}}function We(){this.s=this.s,this.o=this.o}We.prototype.s=!1,We.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ut(i){Object.prototype.hasOwnProperty.call(i,Kt)&&i[Kt]||(i[Kt]=++An)}(this)},We.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Be=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function ot(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function en(i,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(wt(a)){const f=i.length||0,y=a.length||0;i.length=f+y;for(let T=0;T<y;T++)i[f+T]=a[T]}else i.push(a)}}function an(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var Dr=function(){if(!Se.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Se.addEventListener("test",$e,e),Se.removeEventListener("test",$e,e)}catch{}return i}();function jn(i){return/^[\s\xa0]*$/.test(i)}var gi=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function vr(i,e){return i<e?-1:i>e?1:0}function Sr(){var i=Se.navigator;return i&&(i=i.userAgent)?i:""}function Kn(i){return-1!=Sr().indexOf(i)}function ir(i){return ir[" "](i),i}ir[" "]=$e;var fr,i,hn=Kn("Opera"),br=Kn("Trident")||Kn("MSIE"),Gn=Kn("Edge"),Ar=Gn||br,Yr=Kn("Gecko")&&!(-1!=Sr().toLowerCase().indexOf("webkit")&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),Gr=-1!=Sr().toLowerCase().indexOf("webkit")&&!Kn("Edge");function Qn(){var i=Se.document;return i?i.documentMode:void 0}e:{var lr="",Ln=(i=Sr(),Yr?/rv:([^\);]+)(\)|;)/.exec(i):Gn?/Edge\/([\d\.]+)/.exec(i):br?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Gr?/WebKit\/(\S+)/.exec(i):hn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ln&&(lr=Ln?Ln[1]:""),br){var En=Qn();if(null!=En&&En>parseFloat(lr)){fr=String(En);break e}}fr=lr}var Pn={};var kn=Se.document&&br&&(Qn()||parseInt(fr,10))||void 0;function Ri(i,e){if(an.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Yr){e:{try{ir(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:gn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ri.X.h.call(this)}}At(Ri,an);var gn={2:"touch",3:"pen",4:"mouse"};Ri.prototype.h=function(){Ri.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Si="closure_listenable_"+(1e6*Math.random()|0),mr=0;function si(i,e,t,a,f){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ha=f,this.key=++mr,this.ba=this.ea=!1}function Rr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function mn(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function Bt(i){const e={};for(const t in i)e[t]=i[t];return e}const bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zn(i,e){let t,a;for(let f=1;f<arguments.length;f++){for(t in a=arguments[f],a)i[t]=a[t];for(let y=0;y<bn.length;y++)t=bn[y],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function Bn(i){this.src=i,this.g={},this.h=0}function tr(i,e){var t=e.type;if(t in i.g){var y,a=i.g[t],f=Be(a,e);(y=0<=f)&&Array.prototype.splice.call(a,f,1),y&&(Rr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Fe(i,e,t,a){for(var f=0;f<i.length;++f){var y=i[f];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==a)return f}return-1}Bn.prototype.add=function(i,e,t,a,f){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var T=Fe(i,e,a,f);return-1<T?(e=i[T],t||(e.ea=!1)):((e=new si(e,this.src,y,!!a,f)).ea=t,i.push(e)),e};var Ae="closure_lm_"+(1e6*Math.random()|0),Qe={};function De(i,e,t,a,f){if(a&&a.once)return ht(i,e,t,a,f);if(Array.isArray(e)){for(var y=0;y<e.length;y++)De(i,e[y],t,a,f);return null}return t=et(t),i&&i[Si]?i.N(e,t,tt(a)?!!a.capture:!!a,f):ae(i,e,t,!1,a,f)}function ae(i,e,t,a,f,y){if(!e)throw Error("Invalid event type");var T=tt(f)?!!f.capture:!!f,x=ve(i);if(x||(i[Ae]=x=new Bn(i)),(t=x.add(e,t,a,T,y)).proxy)return t;if(a=function be(){const e=Ee;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)Dr||(f=T),void 0===f&&(f=!1),i.addEventListener(e.toString(),a,f);else if(i.attachEvent)i.attachEvent(Rn(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function ht(i,e,t,a,f){if(Array.isArray(e)){for(var y=0;y<e.length;y++)ht(i,e[y],t,a,f);return null}return t=et(t),i&&i[Si]?i.O(e,t,tt(a)?!!a.capture:!!a,f):ae(i,e,t,!0,a,f)}function Yt(i,e,t,a,f){if(Array.isArray(e))for(var y=0;y<e.length;y++)Yt(i,e[y],t,a,f);else a=tt(a)?!!a.capture:!!a,t=et(t),i&&i[Si]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Fe(y=i.g[e],t,a,f))&&(Rr(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=ve(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Fe(e,t,a,f)),(t=-1<i?e[i]:null)&&pn(t))}function pn(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Si])tr(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(Rn(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=ve(e))?(tr(t,i),0==t.h&&(t.src=null,e[Ae]=null)):Rr(i)}}}function Rn(i){return i in Qe?Qe[i]:Qe[i]="on"+i}function Ee(i,e){if(i.ba)i=!0;else{e=new Ri(e,this);var t=i.listener,a=i.ha||i.src;i.ea&&pn(i),i=t.call(a,e)}return i}function ve(i){return(i=i[Ae])instanceof Bn?i:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(i){return"function"==typeof i?i:(i[ge]||(i[ge]=function(e){return i.handleEvent(e)}),i[ge])}function ft(){We.call(this),this.i=new Bn(this),this.P=this,this.I=null}function Qt(i,e){var t,a=i.I;if(a)for(t=[];a;a=a.I)t.push(a);if(i=i.P,a=e.type||e,"string"==typeof e)e=new an(e,i);else if(e instanceof an)e.target=e.target||i;else{var f=e;zn(e=new an(a,i),f)}if(f=!0,t)for(var y=t.length-1;0<=y;y--){var T=e.g=t[y];f=ur(T,a,!0,e)&&f}if(f=ur(T=e.g=i,a,!0,e)&&f,f=ur(T,a,!1,e)&&f,t)for(y=0;y<t.length;y++)f=ur(T=e.g=t[y],a,!1,e)&&f}function ur(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,y=0;y<e.length;++y){var T=e[y];if(T&&!T.ba&&T.capture==t){var x=T.listener,Q=T.ha||T.src;T.ea&&tr(i.i,T),f=!1!==x.call(Q,a)&&f}}return f&&!a.defaultPrevented}At(ft,We),ft.prototype[Si]=!0,ft.prototype.removeEventListener=function(i,e,t,a){Yt(this,i,e,t,a)},ft.prototype.M=function(){if(ft.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)Rr(t[a]);delete i.g[e],i.h--}}this.I=null},ft.prototype.N=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},ft.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var Xn=Se.JSON.stringify;function Ur(){var i=ps;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ts,Nn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new es,i=>i.reset());class es{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Co(i){Se.setTimeout(()=>{throw i},0)}function $s(i,e){ts||function Xr(){var i=Se.Promise.resolve(void 0);ts=function(){i.then(Ps)}}(),to||(ts(),to=!0),ps.add(i,e)}var to=!1,ps=new class wi{constructor(){this.h=this.g=null}add(e,t){const a=Nn.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function Ps(){for(var i;i=Ur();){try{i.h.call(i.g)}catch(t){Co(t)}var e=Nn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}to=!1}function Ei(i,e){ft.call(this),this.h=i||1,this.g=e||Se,this.j=pe(this.lb,this),this.l=Date.now()}function co(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Hr(i,e,t){if("function"==typeof i)t&&(i=pe(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=pe(i.handleEvent,i)}return 2147483647<Number(e)?-1:Se.setTimeout(i,e||0)}function Io(i){i.g=Hr(()=>{i.g=null,i.i&&(i.i=!1,Io(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}At(Ei,ft),(Ve=Ei.prototype).ca=!1,Ve.R=null,Ve.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qt(this,"tick"),this.ca&&(co(this),this.start()))}},Ve.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ve.M=function(){Ei.X.M.call(this),co(this),delete this.g};class Ss extends We{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Io(this)}M(){super.M(),this.g&&(Se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(i){We.call(this),this.h=i,this.g={}}At(As,We);var ks=[];function Ns(i,e,t,a){Array.isArray(t)||(t&&(ks[0]=t.toString()),t=ks);for(var f=0;f<t.length;f++){var y=De(e,t[f],a||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function ji(i){mn(i.g,function(e,t){this.g.hasOwnProperty(t)&&pn(e)},i),i.g={}}function Rs(){this.g=!0}function hr(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ta(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var f=a[1];if(Array.isArray(f)&&!(1>f.length)){var y=f[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var T=1;T<f.length;T++)f[T]=""}}}return Xn(t)}catch{return e}}(i,t)+(a?" "+a:"")})}As.prototype.M=function(){As.X.M.call(this),ji(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rs.prototype.Aa=function(){this.g=!1},Rs.prototype.info=function(){};var gs={},_o=null;function Pi(){return _o=_o||new ft}function na(i){an.call(this,gs.Pa,i)}function Ls(i){const e=Pi();Qt(e,new na(e))}function ra(i,e){an.call(this,gs.STAT_EVENT,i),this.stat=e}function Yi(i){const e=Pi();Qt(e,new ra(e,i))}function xo(i,e){an.call(this,gs.Qa,i),this.size=e}function ns(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Se.setTimeout(function(){i()},e)}gs.Pa="serverreachability",At(na,an),gs.STAT_EVENT="statevent",At(ra,an),gs.Qa="timingevent",At(xo,an);var ut={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Je={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vt(){}function ln(){}vt.prototype.h=null;var oi,xn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function sr(){an.call(this,"d")}function Di(){an.call(this,"c")}function ho(){}function ms(i,e,t,a){this.l=i,this.j=e,this.m=t,this.U=a||1,this.S=new As(this),this.O=Ma,this.T=new Ei(i=Ar?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}At(sr,an),At(Di,an),At(ho,vt),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},oi=new ho;var Ma=45e3,Po={},qs={};function jr(i,e,t){i.K=1,i.v=no(Qs(e)),i.s=t,i.P=!0,Mr(i,null)}function Mr(i,e){i.F=Date.now(),Ys(i),i.A=Qs(i.v);var t=i.A,a=i.U;Array.isArray(a)||(a=[String(a)]),Ws(t.i,"t",a),i.C=0,t=i.l.H,i.h=new Bi,i.g=ua(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Ss(pe(i.La,i,i.g),i.N)),Ns(i.S,i.g,"readystatechange",i.ib),e=i.H?Bt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Ls(),function mi(i,e,t,a,f,y){i.info(function(){if(i.g)if(y)for(var T="",x=y.split("&"),Q=0;Q<x.length;Q++){var re=x[Q].split("=");if(1<re.length){var me=re[0];re=re[1];var Ke=me.split("_");T=2<=Ke.length&&"type"==Ke[1]?T+(me+"=")+re+"&":T+(me+"=redacted&")}}else T=null;else T=y;return"XMLHTTP REQ ("+a+") [attempt "+f+"]: "+e+"\n"+t+"\n"+T})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Jn(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function _s(i,e,t){let f,a=!0;for(;!i.I&&i.C<t.length;){if(f=Wr(i,t),f==qs){4==e&&(i.o=4,Yi(14),a=!1),hr(i.j,i.m,null,"[Incomplete Response]");break}if(f==Po){i.o=4,Yi(15),hr(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}hr(i.j,i.m,f,null),wr(i,f)}Jn(i)&&f!=qs&&f!=Po&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Yi(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),hi(e),e.K=!0,Yi(11))):(hr(i.j,i.m,t,"[Invalid Chunked Response]"),kr(i),yo(i))}function Wr(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?qs:(t=Number(e.substring(t,a)),isNaN(t)?Po:(a+=1)+t>e.length?qs:(e=e.substr(a,t),i.C=a+t,e))}function Ys(i){i.V=Date.now()+i.O,wa(i,i.O)}function wa(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ns(pe(i.gb,i),e)}function Gs(i){i.B&&(Se.clearTimeout(i.B),i.B=null)}function yo(i){0==i.l.G||i.I||ss(i.l,i)}function kr(i){Gs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,co(i.T),ji(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function wr(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||qt(t.h,i)))if(!i.J&&qt(t.h,i)&&3==t.G){try{var a=t.Fa.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var f=a;if(0==f[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Zr(t),F(t)}ai(t),Yi(18)}}else t.Ba=f[1],0<t.Ba-t.T&&37500>f[2]&&t.L&&0==t.A&&!t.v&&(t.v=ns(pe(t.cb,t),6e3));if(1>=Da(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Fi(t,11)}else if((i.J||t.g==i)&&Zr(t),!jn(e))for(f=t.Fa.g.parse(e),e=0;e<f.length;e++){let re=f[e];if(t.T=re[0],re=re[1],2==t.G)if("c"==re[0]){t.I=re[1],t.ka=re[2];const me=re[3];null!=me&&(t.ma=me,t.j.info("VER="+t.ma));const Ke=re[4];null!=Ke&&(t.Ca=Ke,t.j.info("SVER="+t.Ca));const It=re[5];null!=It&&"number"==typeof It&&0<It&&(t.J=a=1.5*It,t.j.info("backChannelRequestTimeoutMs_="+a)),a=t;const Xt=i.g;if(Xt){const on=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(on){var y=a.h;y.g||-1==on.indexOf("spdy")&&-1==on.indexOf("quic")&&-1==on.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(pr(y,y.h),y.h=null))}if(a.D){const Yn=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yn&&(a.za=Yn,_i(a.F,a.D,Yn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var T=i;if((a=t).sa=la(a,a.H?a.ka:null,a.V),T.J){oa(a.h,T);var x=T,Q=a.J;Q&&x.setTimeout(Q),x.B&&(Gs(x),Ys(x)),a.g=T}else Fn(a);0<t.i.length&&$(t)}else"stop"!=re[0]&&"close"!=re[0]||Fi(t,7);else 3==t.G&&("stop"==re[0]||"close"==re[0]?"stop"==re[0]?Fi(t,7):po(t):"noop"!=re[0]&&t.l&&t.l.wa(re),t.A=0)}Ls()}catch{}}function Ms(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(wt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Ko(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(wt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const a in i)e[t++]=a;return e}}}(i),a=function ki(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(wt(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),f=a.length,y=0;y<f;y++)e.call(void 0,a[y],t&&t[y],i)}(Ve=ms.prototype).setTimeout=function(i){this.O=i},Ve.ib=function(i){i=i.target;const e=this.L;e&&3==qr(i)?e.l():this.La(i)},Ve.La=function(i){try{if(i==this.g)e:{const me=qr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>me)&&(3!=me||Ar||this.g&&(this.h.h||this.g.fa()||vs(this.g)))){this.I||4!=me||7==e||Ls(),Gs(this);var t=this.g.aa();this.Y=t;t:if(Jn(this)){var a=vs(this.g);i="";var f=a.length,y=4==qr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),yo(this);var T="";break t}this.h.i=new Se.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:y&&e==f-1});a.splice(0,f),this.h.g+=i,this.C=0,T=this.h.g}else T=this.g.fa();if(this.i=200==t,function ba(i,e,t,a,f,y,T){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+f+"]: "+e+"\n"+t+"\n"+y+" "+T})}(this.j,this.u,this.A,this.m,this.U,me,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var x,Q=this.g;if((x=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(x)){var re=x;break t}}re=null}if(!(t=re)){this.i=!1,this.o=3,Yi(12),kr(this),yo(this);break e}hr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wr(this,t)}this.P?(_s(this,me,T),Ar&&this.i&&3==me&&(Ns(this.S,this.T,"tick",this.hb),this.T.start())):(hr(this.j,this.m,T,null),wr(this,T)),4==me&&kr(this),this.i&&!this.I&&(4==me?ss(this.l,this):(this.i=!1,Ys(this)))}else 400==t&&0<T.indexOf("Unknown SID")?(this.o=3,Yi(12)):(this.o=0,Yi(13)),kr(this),yo(this)}}}catch{}},Ve.hb=function(){if(this.g){var i=qr(this.g),e=this.g.fa();this.C<e.length&&(Gs(this),_s(this,i,e),this.i&&4!=i&&Ys(this))}},Ve.cancel=function(){this.I=!0,kr(this)},Ve.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Fs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ls(),Yi(17)),kr(this),this.o=2,yo(this)):wa(this,this.V-i)};var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zs(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Zs){this.h=void 0!==e?e:i.h,ia(this,i.j),this.s=i.s,this.g=i.g,zr(this,i.m),this.l=i.l,e=i.i;var t=new rs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ea(this,t),this.o=i.o}else i&&(t=String(i).match(Vi))?(this.h=!!e,ia(this,t[1]||"",!0),this.s=us(t[2]||""),this.g=us(t[3]||"",!0),zr(this,t[4]),this.l=us(t[5]||"",!0),Ea(this,t[6]||"",!0),this.o=us(t[7]||"")):(this.h=!!e,this.i=new rs(null,this.h))}function Qs(i){return new Zs(i)}function ia(i,e,t){i.j=t?us(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function zr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ea(i,e,t){e instanceof rs?(i.i=e,function ys(i,e){e&&!i.j&&(Ui(i),i.i=null,i.g.forEach(function(t,a){var f=a.toLowerCase();a!=f&&(ei(this,a),Ws(this,f,t))},i)),i.j=e}(i.i,i.h)):(t||(e=ko(e,or)),i.i=new rs(e,i.h))}function _i(i,e,t){i.i.set(e,t)}function no(i){return _i(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function us(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ko(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,qo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function qo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Zs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ko(e,So,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ko(e,So,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(ko(t,"/"==t.charAt(0)?Fo:Kr,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ko(t,Es)),i.join("")};var So=/[#\/\?@]/g,Kr=/[#\?:]/g,Fo=/[#\?]/g,or=/[#\?@]/g,Es=/#/g;function rs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ui(i){i.g||(i.g=new Map,i.h=0,i.i&&function Bs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),f=null;if(0<=a){var y=i[t].substring(0,a);f=i[t].substring(a+1)}else y=i[t];e(y,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ei(i,e){Ui(i),e=sa(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function dr(i,e){return Ui(i),e=sa(i,e),i.g.has(e)}function Ws(i,e,t){ei(i,e),0<t.length&&(i.i=null,i.g.set(sa(i,e),ot(t)),i.h+=t.length)}function sa(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function fo(i){this.l=i||ro,i=Se.PerformanceNavigationTiming?0<(i=Se.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Se.g&&Se.g.Ga&&Se.g.Ga()&&Se.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ve=rs.prototype).add=function(i,e){Ui(this),this.i=null,i=sa(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Ve.forEach=function(i,e){Ui(this),this.g.forEach(function(t,a){t.forEach(function(f){i.call(e,f,a,this)},this)},this)},Ve.oa=function(){Ui(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const f=i[a];for(let y=0;y<f.length;y++)t.push(e[a])}return t},Ve.W=function(i){Ui(this);let e=[];if("string"==typeof i)dr(this,i)&&(e=e.concat(this.g.get(sa(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Ve.set=function(i,e){return Ui(this),this.i=null,dr(this,i=sa(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ve.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Ve.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const y=encodeURIComponent(String(a)),T=this.W(a);for(a=0;a<T.length;a++){var f=y;""!==T[a]&&(f+="="+encodeURIComponent(String(T[a]))),i.push(f)}}return this.i=i.join("&")};var ro=10;function Ka(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Da(i){return i.h?1:i.g?i.g.size:0}function qt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function pr(i,e){i.g?i.g.add(e):i.h=e}function oa(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ta(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return ot(i.i)}function cs(){}function Z(){this.g=new cs}function W(i,e,t){const a=t||"";try{Ms(i,function(f,y){let T=f;tt(f)&&(T=Xn(f)),e.push(a+y+"="+encodeURIComponent(T))})}catch(f){throw e.push(a+"type="+encodeURIComponent("_badmap")),f}}function ue(i,e,t,a,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(a)}catch{}}function kt(i){this.l=i.ac||null,this.j=i.jb||!1}function Y(i,e){ft.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=K,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fo.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},cs.prototype.stringify=function(i){return Se.JSON.stringify(i,void 0)},cs.prototype.parse=function(i){return Se.JSON.parse(i,void 0)},At(kt,vt),kt.prototype.g=function(){return new Y(this.l,this.j)},kt.prototype.i=function(i){return function(){return i}}({}),At(Y,ft);var K=0;function fe(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ie(i){i.readyState=4,i.l=null,i.j=null,i.A=null,He(i)}function He(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ve=Y.prototype).open=function(i,e){if(this.readyState!=K)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,He(this)},Ve.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Se).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ve.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ie(this)),this.readyState=K},Ve.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,He(this)),this.g&&(this.readyState=3,He(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Se.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fe(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Ve.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ie(this):He(this),3==this.readyState&&fe(this)}},Ve.Va=function(i){this.g&&(this.response=this.responseText=i,Ie(this))},Ve.Ua=function(i){this.g&&(this.response=i,Ie(this))},Ve.ga=function(){this.g&&Ie(this)},Ve.setRequestHeader=function(i,e){this.v.append(i,e)},Ve.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ve.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Y.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ct=Se.JSON.parse;function _t(i){ft.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vn,this.K=this.L=!1}At(_t,ft);var Vn="",Dn=/^https?$/i,cr=["POST","PUT"];function $i(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Gi(i),Ai(i)}function Gi(i){i.D||(i.D=!0,Qt(i,"complete"),Qt(i,"error"))}function yi(i){if(i.h&&typeof bt<"u"&&(!i.C[1]||4!=qr(i)||2!=i.aa()))if(i.v&&4==qr(i))Hr(i.Ha,0,i);else if(Qt(i,"readystatechange"),4==qr(i)){i.h=!1;try{const x=i.aa();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===x){var f=String(i.H).match(Vi)[1]||null;if(!f&&Se.self&&Se.self.location){var y=Se.self.location.protocol;f=y.substr(0,y.length-1)}a=!Dn.test(f?f.toLowerCase():"")}t=a}if(t)Qt(i,"complete"),Qt(i,"success");else{i.m=6;try{var T=2<qr(i)?i.g.statusText:""}catch{T=""}i.j=T+" ["+i.aa()+"]",Gi(i)}}finally{Ai(i)}}}function Ai(i,e){if(i.g){is(i);const t=i.g,a=i.C[0]?$e:null;i.g=null,i.C=null,e||Qt(i,"ready");try{t.onreadystatechange=a}catch{}}}function is(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Se.clearTimeout(i.A),i.A=null)}function qr(i){return i.g?i.g.readyState:0}function vs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Vn:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(i){let e="";return mn(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function Wi(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=Lo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):_i(i,e,t))}function zi(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Bo(i){this.Ca=0,this.i=[],this.j=new Rs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=zi("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=zi("baseRetryDelayMs",5e3,i),this.bb=zi("retryDelaySeedMs",1e4,i),this.$a=zi("forwardChannelMaxRetries",2,i),this.ta=zi("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new fo(i&&i.concurrentRequestLimit),this.Fa=new Z,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function po(i){if(ne(i),3==i.G){var e=i.U++,t=Qs(i.F);_i(t,"SID",i.I),_i(t,"RID",e),_i(t,"TYPE","terminate"),Tt(i,t),(e=new ms(i,i.j,e,void 0)).K=2,e.v=no(Qs(t)),t=!1,Se.navigator&&Se.navigator.sendBeacon&&(t=Se.navigator.sendBeacon(e.v.toString(),"")),!t&&Se.Image&&((new Image).src=e.v,t=!0),t||(e.g=ua(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ys(e)}aa(i)}function F(i){i.g&&(hi(i),i.g.cancel(),i.g=null)}function ne(i){F(i),i.u&&(Se.clearTimeout(i.u),i.u=null),Zr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Se.clearTimeout(i.m),i.m=null)}function $(i){Ka(i.h)||i.m||(i.m=!0,$s(i.Ja,i),i.C=0)}function Le(i,e){var t;t=e?e.m:i.U++;const a=Qs(i.F);_i(a,"SID",i.I),_i(a,"RID",t),_i(a,"AID",i.T),Tt(i,a),i.o&&i.s&&Wi(a,i.o,i.s),t=new ms(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Vt(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),pr(i.h,t),jr(t,a,e)}function Tt(i,e){i.ia&&mn(i.ia,function(t,a){_i(e,a,t)}),i.l&&Ms({},function(t,a){_i(e,a,t)})}function Vt(i,e,t){t=Math.min(i.i.length,t);var a=i.l?pe(i.l.Ra,i.l,i):null;e:{var f=i.i;let y=-1;for(;;){const T=["count="+t];-1==y?0<t?(y=f[0].h,T.push("ofs="+y)):y=0:T.push("ofs="+y);let x=!0;for(let Q=0;Q<t;Q++){let re=f[Q].h;const me=f[Q].g;if(re-=y,0>re)y=Math.max(0,f[Q].h-100),x=!1;else try{W(me,T,"req"+re+"_")}catch{a&&a(me)}}if(x){a=T.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,a}function Fn(i){i.g||i.u||(i.Z=1,$s(i.Ia,i),i.A=0)}function ai(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ns(pe(i.Ia,i),fi(i,i.A)),i.A++,0))}function hi(i){null!=i.B&&(Se.clearTimeout(i.B),i.B=null)}function li(i){i.g=new ms(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Qs(i.sa);_i(e,"RID","rpc"),_i(e,"SID",i.I),_i(e,"CI",i.L?"0":"1"),_i(e,"AID",i.T),_i(e,"TYPE","xmlhttp"),Tt(i,e),i.o&&i.s&&Wi(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=no(Qs(e)),t.s=null,t.P=!0,Mr(t,i)}function Zr(i){null!=i.v&&(Se.clearTimeout(i.v),i.v=null)}function ss(i,e){var t=null;if(i.g==e){Zr(i),hi(i),i.g=null;var a=2}else{if(!qt(i.h,e))return;t=e.D,oa(i.h,e),a=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var f=i.C;Qt(a=Pi(),new xo(a,t)),$(i)}else Fn(i);else if(3==(f=e.o)||0==f&&0<i.pa||!(1==a&&function ce(i,e){return!(Da(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ns(pe(i.Ja,i,e),fi(i,i.C)),i.C++,0)))}(i,e)||2==a&&ai(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),f){case 1:Fi(i,5);break;case 4:Fi(i,10);break;case 3:Fi(i,6);break;default:Fi(i,2)}}function fi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Fi(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var a=pe(i.kb,i);t||(t=new Zs("//www.google.com/images/cleardot.gif"),Se.location&&"http"==Se.location.protocol||ia(t,"https"),no(t)),function j(i,e){const t=new Rs;if(Se.Image){const a=new Image;a.onload=ie(ue,t,a,"TestLoadImage: loaded",!0,e),a.onerror=ie(ue,t,a,"TestLoadImage: error",!1,e),a.onabort=ie(ue,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=ie(ue,t,a,"TestLoadImage: timeout",!1,e),Se.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else Yi(2);i.G=0,i.l&&i.l.va(e),aa(i),ne(i)}function aa(i){if(i.G=0,i.la=[],i.l){const e=Ta(i.h);(0!=e.length||0!=i.i.length)&&(en(i.la,e),en(i.la,i.i),i.h.i.length=0,ot(i.i),i.i.length=0),i.l.ua()}}function la(i,e,t){var a=t instanceof Zs?Qs(t):new Zs(t,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),zr(a,a.m);else{var f=Se.location;a=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var y=new Zs(null,void 0);a&&ia(y,a),e&&(y.g=e),f&&zr(y,f),t&&(y.l=t),a=y}return e=i.za,(t=i.D)&&e&&_i(a,t,e),_i(a,"VER",i.ma),Tt(i,a),a}function ua(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _t(t&&i.Da&&!i.ra?new kt({jb:!0}):i.ra)).Ka(i.H),e}function qa(){}function vo(){if(br&&!(10<=Number(kn)))throw Error("Environmental error: no available transport.")}function os(i,e){ft.call(this),this.g=new Bo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!jn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Zi(this)}function Nl(i){sr.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Yo(){Di.call(this),this.status=1}function Zi(i){this.g=i}(Ve=_t.prototype).Ka=function(i){this.L=i},Ve.da=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oi.g(),this.C=function Wt(i){return i.h||(i.h=i.i())}(this.u?this.u:oi),this.g.onreadystatechange=pe(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void $i(this,y)}if(i=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var f in a)t.set(f,a[f]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const y of a.keys())t.set(y,a.get(y))}a=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),f=Se.FormData&&i instanceof Se.FormData,!(0<=Be(cr,e))||a||f||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,T]of t)this.g.setRequestHeader(y,T);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{is(this),0<this.B&&((this.K=function qn(i){return br&&function On(){return function Tr(i){var e=Pn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=gi(String(fr)).split("."),t=gi("9").split("."),a=Math.max(e.length,t.length);for(let T=0;0==i&&T<a;T++){var f=e[T]||"",y=t[T]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==f[0].length&&0==y[0].length)break;i=vr(0==f[1].length?0:parseInt(f[1],10),0==y[1].length?0:parseInt(y[1],10))||vr(0==f[2].length,0==y[2].length)||vr(f[2],y[2]),f=f[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pe(this.qa,this)):this.A=Hr(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){$i(this,y)}},Ve.qa=function(){typeof bt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qt(this,"timeout"),this.abort(8))},Ve.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Qt(this,"complete"),Qt(this,"abort"),Ai(this))},Ve.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ai(this,!0)),_t.X.M.call(this)},Ve.Ha=function(){this.s||(this.F||this.v||this.l?yi(this):this.fb())},Ve.fb=function(){yi(this)},Ve.aa=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},Ve.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ve.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ct(e)}},Ve.Ea=function(){return this.m},Ve.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ve=Bo.prototype).ma=8,Ve.G=1,Ve.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const f=new ms(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=Bt(y),zn(y,this.S)):y=this.S),null!==this.o||this.N||(f.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var a=this.i[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vt(this,f,e),_i(t=Qs(this.F),"RID",i),_i(t,"CVER",22),this.D&&_i(t,"X-HTTP-Session-Id",this.D),Tt(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(Lo(y)))+"&"+e:this.o&&Wi(t,this.o,y)),pr(this.h,f),this.Ya&&_i(t,"TYPE","init"),this.O?(_i(t,"$req",e),_i(t,"SID","null"),f.Z=!0,jr(f,t,null)):jr(f,t,e),this.G=2}}else 3==this.G&&(i?Le(this,i):0==this.i.length||Ka(this.h)||Le(this))},Ve.Ia=function(){if(this.u=null,li(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ns(pe(this.eb,this),i)}},Ve.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Yi(10),F(this),li(this))},Ve.cb=function(){null!=this.v&&(this.v=null,F(this),ai(this),Yi(19))},Ve.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Yi(2)):(this.j.info("Failed to ping google.com"),Yi(1))},(Ve=qa.prototype).xa=function(){},Ve.wa=function(){},Ve.va=function(){},Ve.ua=function(){},Ve.Ra=function(){},vo.prototype.g=function(i,e){return new os(i,e)},At(os,ft),os.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Yi(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=la(i,null,i.V),$(i)},os.prototype.close=function(){po(this.g)},os.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Xn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&$(e)},os.prototype.M=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,os.X.M.call(this)},At(Nl,sr),At(Yo,Di),At(Zi,qa),Zi.prototype.xa=function(){Qt(this.g,"a")},Zi.prototype.wa=function(i){Qt(this.g,new Nl(i))},Zi.prototype.va=function(i){Qt(this.g,new Yo)},Zi.prototype.ua=function(){Qt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,Je.COMPLETE="complete",ln.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",ft.prototype.listen=ft.prototype.N,_t.prototype.listenOnce=_t.prototype.O,_t.prototype.getLastError=_t.prototype.Oa,_t.prototype.getLastErrorCode=_t.prototype.Ea,_t.prototype.getStatus=_t.prototype.aa,_t.prototype.getResponseJson=_t.prototype.Sa,_t.prototype.getResponseText=_t.prototype.fa,_t.prototype.send=_t.prototype.da,_t.prototype.setWithCredentials=_t.prototype.Ka;var Gl=nt.createWebChannelTransport=function(){return new vo},Pu=nt.getStatEventTarget=function(){return Pi()},_l=nt.ErrorCode=ut,ou=nt.EventType=Je,yl=nt.Event=gs,ca=nt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Oa=nt.FetchXmlHttpFactory=kt,pu=nt.WebChannel=ln,gu=nt.XhrIo=_t;const vl="@firebase/firestore";class io{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}io.UNAUTHENTICATED=new io(null),io.GOOGLE_CREDENTIALS=new io("google-credentials-uid"),io.FIRST_PARTY=new io("first-party-uid"),io.MOCK_USER=new io("mock-user");let Ds="9.15.0";const xa=new qe.Yd("@firebase/firestore");function Ca(){return xa.logLevel}function rn(i,...e){if(xa.logLevel<=qe.in.DEBUG){const t=e.map(as);xa.debug(`Firestore (${Ds}): ${i}`,...t)}}function Ki(i,...e){if(xa.logLevel<=qe.in.ERROR){const t=e.map(as);xa.error(`Firestore (${Ds}): ${i}`,...t)}}function ol(i,...e){if(xa.logLevel<=qe.in.WARN){const t=e.map(as);xa.warn(`Firestore (${Ds}): ${i}`,...t)}}function as(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function dn(i="Unexpected state"){const e=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: `+i;throw Ki(e),new Error(e)}function wn(i,e){i||dn()}function yn(i,e){return i}const Pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(io.UNAUTHENTICATED))}shutdown(){}}class bl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Za{constructor(e){this.t=e,this.currentUser=io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let f=this.i;const y=re=>this.i!==f?(f=this.i,t(re)):Promise.resolve();let T=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),T.resolve(),T=new ui,e.enqueueRetryable(()=>y(this.currentUser))};const x=()=>{const re=T;e.enqueueRetryable((0,je.Z)(function*(){yield re.promise,yield y(a.currentUser)}))},Q=re=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=re,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(re=>Q(re)),setTimeout(()=>{if(!this.auth){const re=this.t.getImmediate({optional:!0});re?Q(re):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),T.resolve(),T=new ui)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wn("string"==typeof a.accessToken),new Ya(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new io(e)}}class wl{constructor(e,t,a,f){this.h=e,this.l=t,this.m=a,this.g=f,this.type="FirstParty",this.user=io.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zs{constructor(e,t,a,f){this.h=e,this.l=t,this.m=a,this.g=f}getToken(){return Promise.resolve(new wl(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(io.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ka{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const a=y=>{null!=y.error&&rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const T=y.token!==this.A;return this.A=y.token,rn("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>a(y))};const f=y=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>f(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?f(y):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wn("string"==typeof t.token),this.A=t.token,new Wl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ku(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}class El{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const f=ku(40);for(let y=0;y<f.length;++y)a.length<20&&f[y]<t&&(a+=e.charAt(f[y]%e.length))}return a}}function _r(i,e){return i<e?-1:i>e?1:0}function da(i,e,t){return i.length===e.length&&i.every((a,f)=>t(a,e[f]))}function Fu(i){return i+"\0"}class Qi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qi.fromMillis(Date.now())}static fromDate(e){return Qi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Qi(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_r(this.nanoseconds,e.nanoseconds):_r(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mn(e)}static min(){return new Mn(new Qi(0,0))}static max(){return new Mn(new Qi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rl{constructor(e,t,a){void 0===t?t=0:t>e.length&&dn(),void 0===a?a=e.length-t:a>e.length-t&&dn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Rl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rl?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let f=0;f<a;f++){const y=e.get(f),T=t.get(f);if(y<T)return-1;if(y>T)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ti extends Rl{construct(e,t,a){return new ti(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(f=>f.length>0))}return new ti(t)}static emptyPath(){return new ti([])}}const Ml=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Rl{construct(e,t,a){return new Qr(e,t,a)}static isValidIdentifier(e){return Ml.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const t=[];let a="",f=0;const y=()=>{if(0===a.length)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let T=!1;for(;f<e.length;){const x=e[f];if("\\"===x){if(f+1===e.length)throw new Zt(Pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[f+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new Zt(Pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=Q,f+=2}else"`"===x?(T=!T,f++):"."!==x||T?(a+=x,f++):(y(),f++)}if(y(),T)throw new Zt(Pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}class vn{constructor(e){this.path=e}static fromPath(e){return new vn(ti.fromString(e))}static fromName(e){return new vn(ti.fromString(e).popFirst(5))}static empty(){return new vn(ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ti.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ti.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vn(new ti(e.slice()))}}class so{constructor(e,t,a,f){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=f}}function Zo(i){return i.fields.find(e=>2===e.kind)}function Fa(i){return i.fields.filter(e=>2!==e.kind)}so.UNKNOWN_ID=-1;class wo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mi(0,ha.min())}}function Lu(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,f=Mn.fromTimestamp(1e9===a?new Qi(t+1,0):new Qi(t,a));return new ha(f,vn.empty(),e)}function pc(i){return new ha(i.readTime,i.key,-1)}class ha{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ha(Mn.min(),vn.empty(),-1)}static max(){return new ha(Mn.max(),vn.empty(),-1)}}function gc(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=vn.comparator(i.documentKey,e.documentKey),0!==t?t:_r(i.largestBatchId,e.largestBatchId))}const qc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class au{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xl(i){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,je.Z)(function*(i){if(i.code!==Pt.FAILED_PRECONDITION||i.message!==qc)throw i;rn("LocalStore","Unexpectedly lost primary lease")}),Vo.apply(this,arguments)}class Ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ot((a,f)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(a,f)},this.catchCallback=y=>{this.wrapFailure(t,y).next(a,f)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ot?t:Ot.resolve(t)}catch(t){return Ot.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ot.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ot.reject(t)}static resolve(e){return new Ot((t,a)=>{t(e)})}static reject(e){return new Ot((t,a)=>{a(e)})}static waitFor(e){return new Ot((t,a)=>{let f=0,y=0,T=!1;e.forEach(x=>{++f,x.next(()=>{++y,T&&y===f&&t()},Q=>a(Q))}),T=!0,y===f&&t()})}static or(e){let t=Ot.resolve(!1);for(const a of e)t=t.next(f=>f?Ot.resolve(f):a());return t}static forEach(e,t){const a=[];return e.forEach((f,y)=>{a.push(t.call(this,f,y))}),this.waitFor(a)}static mapArray(e,t){return new Ot((a,f)=>{const y=e.length,T=new Array(y);let x=0;for(let Q=0;Q<y;Q++){const re=Q;t(e[re]).next(me=>{T[re]=me,++x,x===y&&a(T)},me=>f(me))}})}static doWhile(e,t){return new Ot((a,f)=>{const y=()=>{!0===e()?t().next(()=>{y()},f):a()};y()})}}class Pl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ui,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new al(e,t.error)):this.P.resolve()},this.transaction.onerror=a=>{const f=Sa(a.target.error);this.P.reject(new al(e,f))}}static open(e,t,a,f){try{return new Pl(t,e.transaction(f,a))}catch(y){throw new al(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(rn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bu(t)}}class Ti{constructor(e,t,a){this.name=e,this.version=t,this.S=a,12.2===Ti.D((0,ze.z$)())&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rn("SimpleDb","Removing database:",e),Ts(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ze.hl)())return!1;if(Ti.N())return!0;const e=(0,ze.z$)(),t=Ti.D(e),a=0<t&&t<10,f=Ti.k(e),y=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||y)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var t=this;return(0,je.Z)(function*(){return t.db||(rn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,f)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=T=>{a(T.target.result)},y.onblocked=()=>{f(new al(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=T=>{const x=T.target.error;f("VersionError"===x.name?new Zt(Pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new Zt(Pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new al(e,x))},y.onupgradeneeded=T=>{rn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',T.oldVersion),t.S.$(T.target.result,y.transaction,T.oldVersion,t.version).next(()=>{rn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=a=>t.B(a)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,f){var y=this;return(0,je.Z)(function*(){const T="readonly"===t;let x=0;for(;;){++x;try{y.db=yield y.F(e);const Q=Pl.open(y.db,e,T?"readonly":"readwrite",a),re=f(Q).next(me=>(Q.V(),me)).catch(me=>(Q.abort(me),Ot.reject(me))).toPromise();return re.catch(()=>{}),yield Q.v,re}catch(Q){const re=Q,me="FirebaseError"!==re.name&&x<3;if(rn("SimpleDb","Transaction failed with error:",re.message,"Retrying:",me),y.close(),!me)return Promise.reject(re)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kl{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ts(this.q.delete())}}class al extends Zt{constructor(e,t){super(Pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ja(i){return"IndexedDbTransactionError"===i.name}class Bu{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(rn("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Ts(a)}add(e){return rn("SimpleDb","ADD",this.store.name,e,e),Ts(this.store.add(e))}get(e){return Ts(this.store.get(e)).next(t=>(void 0===t&&(t=null),rn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rn("SimpleDb","DELETE",this.store.name,e),Ts(this.store.delete(e))}count(){return rn("SimpleDb","COUNT",this.store.name),Ts(this.store.count())}W(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const f=this.cursor(a),y=[];return this.H(f,(T,x)=>{y.push(x)}).next(()=>y)}{const f=this.store.getAll(a.range);return new Ot((y,T)=>{f.onerror=x=>{T(x.target.error)},f.onsuccess=x=>{y(x.target.result)}})}}J(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new Ot((f,y)=>{a.onerror=T=>{y(T.target.error)},a.onsuccess=T=>{f(T.target.result)}})}Y(e,t){rn("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.X=!1;const f=this.cursor(a);return this.H(f,(y,T,x)=>x.delete())}Z(e,t){let a;t?a=e:(a={},t=e);const f=this.cursor(a);return this.H(f,t)}tt(e){const t=this.cursor({});return new Ot((a,f)=>{t.onerror=y=>{const T=Sa(y.target.error);f(T)},t.onsuccess=y=>{const T=y.target.result;T?e(T.primaryKey,T.value).next(x=>{x?T.continue():a()}):a()}})}H(e,t){const a=[];return new Ot((f,y)=>{e.onerror=T=>{y(T.target.error)},e.onsuccess=T=>{const x=T.target.result;if(!x)return void f();const Q=new kl(x),re=t(x.primaryKey,x.value,Q);if(re instanceof Ot){const me=re.catch(Ke=>(Q.done(),Ot.reject(Ke)));a.push(me)}Q.isDone?f():null===Q.G?x.continue():x.continue(Q.G)}}).next(()=>Ot.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ts(i){return new Ot((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const f=Sa(a.target.error);t(f)}})}let La=!1;function Sa(i){const e=Ti.D((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return La||(La=!0,setTimeout(()=>{throw a},0)),a}}return i}class lu{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;rn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,je.Z)(function*(){t.task=null;try{rn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(a){Ja(a)?rn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield xl(a)}yield t.nt(6e4)}))}}class A{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,je.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.it(a,e))})()}it(e,t){const a=new Set;let f=t,y=!0;return Ot.doWhile(()=>!0===y&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(T=>{if(null!==T&&!a.has(T))return rn("IndexBackiller",`Processing collection: ${T}`),this.rt(e,T,f).next(x=>{f-=x,a.add(T)});y=!1})).next(()=>t-f)}rt(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(f=>this.localStore.localDocuments.getNextDocuments(e,t,f,a).next(y=>{const T=y.changes;return this.localStore.indexManager.updateIndexEntries(e,T).next(()=>this.ot(f,y)).next(x=>(rn("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>T.size)}))}ot(e,t){let a=e;return t.changes.forEach((f,y)=>{const T=pc(y);gc(T,a)>0&&(a=T)}),new ha(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let R=(()=>{class i{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=f=>this.ut(f),this.ct=f=>a.writeSequenceNumber(f))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class S{constructor(e,t,a,f,y,T,x,Q){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=f,this.ssl=y,this.forceLongPolling=T,this.autoDetectLongPolling=x,this.useFetchStreams=Q}}class B{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new B("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof B&&e.projectId===this.projectId&&e.database===this.database}}function z(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function le(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ne(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function xe(i){return null==i}function Ft(i){return 0===i&&1/i==-1/0}function fn(i){return"number"==typeof i&&Number.isInteger(i)&&!Ft(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _n(t)}static fromUint8Array(e){const t=function(a){let f="";for(let y=0;y<a.length;++y)f+=String.fromCharCode(a[y]);return f}(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _r(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const Hi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(i){if(wn(!!i),"string"==typeof i){let e=0;const t=Hi.exec(i);if(wn(!!t),t[1]){let f=t[1];f=(f+"000000000").substr(0,9),e=Number(f)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Li(i.seconds),nanos:Li(i.nanos)}}function Li(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Uo(i){return"string"==typeof i?_n.fromBase64String(i):_n.fromUint8Array(i)}function fa(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _u(i){const e=i.mapValue.fields.__previous_value__;return fa(e)?_u(e):e}function Aa(i){const e=Cs(i.mapValue.fields.__local_write_time__.timestampValue);return new Qi(e.seconds,e.nanos)}const Ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ao={nullValue:"NULL_VALUE"};function Xa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fa(i)?4:se(i)?9007199254740991:10:dn()}function Va(i,e){if(i===e)return!0;const t=Xa(i);if(t!==Xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Aa(i).isEqual(Aa(e));case 3:return function(a,f){if("string"==typeof a.timestampValue&&"string"==typeof f.timestampValue&&a.timestampValue.length===f.timestampValue.length)return a.timestampValue===f.timestampValue;const y=Cs(a.timestampValue),T=Cs(f.timestampValue);return y.seconds===T.seconds&&y.nanos===T.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return f=e,Uo(i.bytesValue).isEqual(Uo(f.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,f){return Li(a.geoPointValue.latitude)===Li(f.geoPointValue.latitude)&&Li(a.geoPointValue.longitude)===Li(f.geoPointValue.longitude)}(i,e);case 2:return function(a,f){if("integerValue"in a&&"integerValue"in f)return Li(a.integerValue)===Li(f.integerValue);if("doubleValue"in a&&"doubleValue"in f){const y=Li(a.doubleValue),T=Li(f.doubleValue);return y===T?Ft(y)===Ft(T):isNaN(y)&&isNaN(T)}return!1}(i,e);case 9:return da(i.arrayValue.values||[],e.arrayValue.values||[],Va);case 10:return function(a,f){const y=a.mapValue.fields||{},T=f.mapValue.fields||{};if(z(y)!==z(T))return!1;for(const x in y)if(y.hasOwnProperty(x)&&(void 0===T[x]||!Va(y[x],T[x])))return!1;return!0}(i,e);default:return dn()}var f}function Qo(i,e){return void 0!==(i.values||[]).find(t=>Va(t,e))}function No(i,e){if(i===e)return 0;const t=Xa(i),a=Xa(e);if(t!==a)return _r(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return _r(i.booleanValue,e.booleanValue);case 2:return function(f,y){const T=Li(f.integerValue||f.doubleValue),x=Li(y.integerValue||y.doubleValue);return T<x?-1:T>x?1:T===x?0:isNaN(T)?isNaN(x)?0:-1:1}(i,e);case 3:return uu(i.timestampValue,e.timestampValue);case 4:return uu(Aa(i),Aa(e));case 5:return _r(i.stringValue,e.stringValue);case 6:return function(f,y){const T=Uo(f),x=Uo(y);return T.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(f,y){const T=f.split("/"),x=y.split("/");for(let Q=0;Q<T.length&&Q<x.length;Q++){const re=_r(T[Q],x[Q]);if(0!==re)return re}return _r(T.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,y){const T=_r(Li(f.latitude),Li(y.latitude));return 0!==T?T:_r(Li(f.longitude),Li(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(f,y){const T=f.values||[],x=y.values||[];for(let Q=0;Q<T.length&&Q<x.length;++Q){const re=No(T[Q],x[Q]);if(re)return re}return _r(T.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(f,y){if(f===Ba.mapValue&&y===Ba.mapValue)return 0;if(f===Ba.mapValue)return 1;if(y===Ba.mapValue)return-1;const T=f.fields||{},x=Object.keys(T),Q=y.fields||{},re=Object.keys(Q);x.sort(),re.sort();for(let me=0;me<x.length&&me<re.length;++me){const Ke=_r(x[me],re[me]);if(0!==Ke)return Ke;const It=No(T[x[me]],Q[re[me]]);if(0!==It)return It}return _r(x.length,re.length)}(i.mapValue,e.mapValue);default:throw dn()}}function uu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return _r(i,e);const t=Cs(i),a=Cs(e),f=_r(t.seconds,a.seconds);return 0!==f?f:_r(t.nanos,a.nanos)}function ll(i){return mc(i)}function mc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const f=Cs(a);return`time(${f.seconds},${f.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Uo(i.bytesValue).toBase64():"referenceValue"in i?vn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let f="[",y=!0;for(const T of a.values||[])y?y=!1:f+=",",f+=mc(T);return f+"]"}(i.arrayValue):"mapValue"in i?function(a){const f=Object.keys(a.fields||{}).sort();let y="{",T=!0;for(const x of f)T?T=!1:y+=",",y+=`${x}:${mc(a.fields[x])}`;return y+"}"}(i.mapValue):dn();var e}function Dl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Tl(i){return!!i&&"integerValue"in i}function yu(i){return!!i&&"arrayValue"in i}function oo(i){return!!i&&"nullValue"in i}function Cl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function H(i){return!!i&&"mapValue"in i}function q(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return le(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=q(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=q(i.arrayValue.values[t]);return e}return Object.assign({},i)}function se(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ke(i){return"nullValue"in i?Ao:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Dl(B.empty(),vn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:dn()}function pt(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Dl(B.empty(),vn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ba:dn()}function Rt(i,e){const t=No(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function sn(i,e){const t=No(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Sn{constructor(e,t){this.position=e,this.inclusive=t}}function er(i,e,t){let a=0;for(let f=0;f<i.position.length;f++){const y=e[f],T=i.position[f];if(a=y.field.isKeyField()?vn.comparator(vn.fromName(T.referenceValue),t.key):No(T,t.data.field(y.field)),"desc"===y.dir&&(a*=-1),0!==a)break}return a}function ar(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Va(i.position[t],e.position[t]))return!1;return!0}class $r{}class Tn extends $r{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new Fh(e,t,a):"array-contains"===t?new bd(e,a):"in"===t?new Lh(e,a):"not-in"===t?new cu(e,a):"array-contains-any"===t?new oh(e,a):new Tn(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new sh(e,a):new Xf(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(No(t,this.value)):null!==t&&Xa(this.value)===Xa(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xr extends $r{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new xr(e,t)}matches(e){return ds(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ds(i){return"and"===i.op}function el(i){return"or"===i.op}function zl(i){return Kl(i)&&ds(i)}function Kl(i){for(const e of i.filters)if(e instanceof xr)return!1;return!0}function go(i){if(i instanceof Tn)return i.field.canonicalString()+i.op.toString()+ll(i.value);{const e=i.filters.map(t=>go(t)).join(",");return`${i.op}(${e})`}}function Ho(i,e){return i instanceof Tn?(t=i,(a=e)instanceof Tn&&t.op===a.op&&t.field.isEqual(a.field)&&Va(t.value,a.value)):i instanceof xr?function(t,a){return a instanceof xr&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((f,y,T)=>f&&Ho(y,a.filters[T]),!0)}(i,e):void dn();var t,a}function Yc(i,e){const t=i.filters.concat(e);return xr.create(t,i.op)}function Zc(i){return i instanceof Tn?`${(e=i).field.canonicalString()} ${e.op} ${ll(e.value)}`:i instanceof xr?function(e){return e.op.toString()+" {"+e.getFilters().map(Zc).join(" ,")+"}"}(i):"Filter";var e}class Fh extends Tn{constructor(e,t,a){super(e,t,a),this.key=vn.fromName(a.referenceValue)}matches(e){const t=vn.comparator(e.key,this.key);return this.matchesComparison(t)}}class sh extends Tn{constructor(e,t){super(e,"in",t),this.keys=vd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xf extends Tn{constructor(e,t){super(e,"not-in",t),this.keys=vd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>vn.fromName(a.referenceValue))}class bd extends Tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yu(t)&&Qo(t.arrayValue,this.value)}}class Lh extends Tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qo(this.value.arrayValue,t)}}class cu extends Tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qo(this.value.arrayValue,t)}}class oh extends Tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Qo(this.value.arrayValue,a))}}class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function Bh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ao{constructor(e,t){this.comparator=e,this.root=t||pa.EMPTY}insert(e,t){return new ao(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pa.BLACK,null,null))}remove(e){return new ao(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const f=this.comparator(e,a.key);if(0===f)return t+a.left.size;f<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,t,a,f){this.isReverse=f,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?a(e.key,t):1,t&&f&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pa{constructor(e,t,a,f,y){this.key=e,this.value=t,this.color=a??pa.RED,this.left=f??pa.EMPTY,this.right=y??pa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,f,y){return new pa(e??this.key,t??this.value,a??this.color,f??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let f=this;const y=a(e,f.key);return f=y<0?f.copy(null,null,null,f.left.insert(e,t,a),null):0===y?f.copy(null,t,null,null,null):f.copy(null,null,null,null,f.right.insert(e,t,a)),f.fixUp()}removeMin(){if(this.left.isEmpty())return pa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,f=this;if(t(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,t),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===t(e,f.key)){if(f.right.isEmpty())return pa.EMPTY;a=f.right.min(),f=f.copy(a.key,a.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,t))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dn();const e=this.left.check();if(e!==this.right.check())throw dn();return e+(this.isRed()?0:1)}}pa.EMPTY=null,pa.RED=!0,pa.BLACK=!1,pa.EMPTY=new class{constructor(){this.size=0}get key(){throw dn()}get value(){throw dn()}get color(){throw dn()}get left(){throw dn()}get right(){throw dn()}copy(i,e,t,a,f){return this}insert(i,e,t){return new pa(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ls{constructor(e){this.comparator=e,this.data=new ao(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const f=a.getNext();if(this.comparator(f.key,e[1])>=0)return;t(f.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vu(this.data.getIterator())}getIteratorFrom(e){return new Vu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=a.getNext().key;if(0!==this.comparator(f,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ls(this.comparator);return t.data=e,t}}class Vu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fl(i){return i.hasNext()?i.getNext():void 0}class Il{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new Il([])}unionWith(e){let t=new ls(Qr.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Il(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Ua{constructor(e){this.value=e}static empty(){return new Ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!H(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=q(t)}setAll(e){let t=Qr.emptyPath(),a={},f=[];e.forEach((T,x)=>{if(!t.isImmediateParentOf(x)){const Q=this.getFieldsMap(t);this.applyChanges(Q,a,f),a={},f=[],t=x.popLast()}T?a[x.lastSegment()]=q(T):f.push(x.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,a,f)}delete(e){const t=this.field(e.popLast());H(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let f=t.mapValue.fields[e.get(a)];H(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=f),t=f}return t.mapValue.fields}applyChanges(e,t,a){le(t,(f,y)=>e[f]=y);for(const f of a)delete e[f]}clone(){return new Ua(q(this.value))}}function vc(i){const e=[];return le(i.fields,(t,a)=>{const f=new Qr([t]);if(H(a)){const y=vc(a.mapValue).fields;if(0===y.length)e.push(f);else for(const T of y)e.push(f.child(T))}else e.push(f)}),new Il(e)}class Js{constructor(e,t,a,f,y,T,x){this.key=e,this.documentType=t,this.version=a,this.readTime=f,this.createTime=y,this.data=T,this.documentState=x}static newInvalidDocument(e){return new Js(e,0,Mn.min(),Mn.min(),Mn.min(),Ua.empty(),0)}static newFoundDocument(e,t,a,f){return new Js(e,1,t,Mn.min(),a,f,0)}static newNoDocument(e,t){return new Js(e,2,t,Mn.min(),Mn.min(),Ua.empty(),0)}static newUnknownDocument(e,t){return new Js(e,3,t,Mn.min(),Mn.min(),Ua.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Js&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Js(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pg{constructor(e,t=null,a=[],f=[],y=null,T=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=f,this.limit=y,this.startAt=T,this.endAt=x,this.ft=null}}function bc(i,e=null,t=[],a=[],f=null,y=null,T=null){return new pg(i,e,t,a,f,y,T)}function Uu(i){const e=yn(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>go(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(f=a).field.canonicalString()+f.dir;var f}).join(","),xe(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ll(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ll(a)).join(",")),e.ft=t}return e.ft}function ah(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Bh(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Ho(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ar(i.startAt,e.startAt)&&ar(i.endAt,e.endAt)}function lh(i){return vn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function wd(i,e){return i.filters.filter(t=>t instanceof Tn&&t.field.isEqual(e))}function Hu(i,e,t){let a=Ao,f=!0;for(const y of wd(i,e)){let T=Ao,x=!0;switch(y.op){case"<":case"<=":T=ke(y.value);break;case"==":case"in":case">=":T=y.value;break;case">":T=y.value,x=!1;break;case"!=":case"not-in":T=Ao}Rt({value:a,inclusive:f},{value:T,inclusive:x})<0&&(a=T,f=x)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const T=t.position[y];Rt({value:a,inclusive:f},{value:T,inclusive:t.inclusive})<0&&(a=T,f=t.inclusive);break}return{value:a,inclusive:f}}function Qc(i,e,t){let a=Ba,f=!0;for(const y of wd(i,e)){let T=Ba,x=!0;switch(y.op){case">=":case">":T=pt(y.value),x=!1;break;case"==":case"in":case"<=":T=y.value;break;case"<":T=y.value,x=!1;break;case"!=":case"not-in":T=Ba}sn({value:a,inclusive:f},{value:T,inclusive:x})>0&&(a=T,f=x)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const T=t.position[y];sn({value:a,inclusive:f},{value:T,inclusive:t.inclusive})>0&&(a=T,f=t.inclusive);break}return{value:a,inclusive:f}}class ul{constructor(e,t=null,a=[],f=[],y=null,T="F",x=null,Q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=f,this.limit=y,this.limitType=T,this.startAt=x,this.endAt=Q,this.dt=null,this._t=null}}function Vh(i,e,t,a,f,y,T,x){return new ul(i,e,t,a,f,y,T,x)}function jo(i){return new ul(i)}function ql(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function vu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function uh(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Jc(i){return null!==i.collectionGroup}function cl(i){const e=yn(i);if(null===e.dt){e.dt=[];const t=uh(e),a=vu(e);if(null!==t&&null===a)t.isKeyField()||e.dt.push(new _c(t)),e.dt.push(new _c(Qr.keyField(),"asc"));else{let f=!1;for(const y of e.explicitOrderBy)e.dt.push(y),y.field.isKeyField()&&(f=!0);if(!f){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new _c(Qr.keyField(),y))}}}return e.dt}function Jo(i){const e=yn(i);if(!e._t)if("F"===e.limitType)e._t=bc(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of cl(e))t.push(new _c(y.field,"desc"===y.dir?"asc":"desc"));const a=e.endAt?new Sn(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new Sn(e.startAt.position,e.startAt.inclusive):null;e._t=bc(e.path,e.collectionGroup,t,e.filters,e.limit,a,f)}return e._t}function ga(i,e){e.getFirstInequalityField(),uh(i);const t=i.filters.concat([e]);return new ul(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Os(i,e,t){return new ul(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function $o(i,e){return ah(Jo(i),Jo(e))&&i.limitType===e.limitType}function Ed(i){return`${Uu(Jo(i))}|lt:${i.limitType}`}function wc(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>Zc(a)).join(", ")}]`),xe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(f=a).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>ll(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>ll(a)).join(",")),`Target(${t})`}(Jo(i))}; limitType=${i.limitType})`}function Ro(i,e){return e.isFoundDocument()&&function(t,a){const f=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(f):vn.isDocumentKey(t.path)?t.path.isEqual(f):t.path.isImmediateParentOf(f)}(i,e)&&function(t,a){for(const f of cl(t))if(!f.field.isKeyField()&&null===a.data.field(f.field))return!1;return!0}(i,e)&&function(t,a){for(const f of t.filters)if(!f.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(f,y,T){const x=er(f,y,T);return f.inclusive?x<=0:x<0}(t.startAt,cl(t),a)||t.endAt&&!function(f,y,T){const x=er(f,y,T);return f.inclusive?x>=0:x>0}(t.endAt,cl(t),a)));var t,a}function Dd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function N(i){return(e,t)=>{let a=!1;for(const f of cl(i)){const y=b(f,e,t);if(0!==y)return y;a=a||f.field.isKeyField()}return 0}}function b(i,e,t){const a=i.field.isKeyField()?vn.comparator(e.key,t.key):function(f,y,T){const x=y.data.field(f),Q=T.data.field(f);return null!==x&&null!==Q?No(x,Q):dn()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return dn()}}function E(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ft(e)?"-0":e}}function P(i){return{integerValue:""+i}}function oe(i,e){return fn(e)?P(e):E(i,e)}class ye{constructor(){this._=void 0}}function Et(i,e,t){return i instanceof Zn?function(a,f){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return f&&(y.fields.__previous_value__=f),{mapValue:y}}(t,e):i instanceof Er?hs(i,e):i instanceof Eo?dl(i,e):function(a,f){const y=$n(a,f),T=hl(y)+hl(a.gt);return Tl(y)&&Tl(a.gt)?P(T):E(a.yt,T)}(i,e)}function nn(i,e,t){return i instanceof Er?hs(i,e):i instanceof Eo?dl(i,e):t}function $n(i,e){return i instanceof tl?Tl(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class Zn extends ye{}class Er extends ye{constructor(e){super(),this.elements=e}}function hs(i,e){const t=Xc(e);for(const a of i.elements)t.some(f=>Va(f,a))||t.push(a);return{arrayValue:{values:t}}}class Eo extends ye{constructor(e){super(),this.elements=e}}function dl(i,e){let t=Xc(e);for(const a of i.elements)t=t.filter(f=>!Va(f,a));return{arrayValue:{values:t}}}class tl extends ye{constructor(e,t){super(),this.yt=e,this.gt=t}}function hl(i){return Li(i.integerValue||i.doubleValue)}function Xc(i){return yu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ec{constructor(e,t){this.field=e,this.transform=t}}class ju{constructor(e,t){this.version=e,this.transformResults=t}}class Xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Td(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class $u{}function Dc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Sd(i.key,Xs.none()):new Cd(i.key,i.data,Xs.none());{const t=i.data,a=Ua.empty();let f=new ls(Qr.comparator);for(let y of e.fields)if(!f.has(y)){let T=t.field(y);null===T&&y.length>1&&(y=y.popLast(),T=t.field(y)),null===T?a.delete(y):a.set(y,T),f=f.add(y)}return new wu(i.key,a,new Il(f.toArray()),Xs.none())}}function Uh(i,e,t){i instanceof Cd?function(a,f,y){const T=a.value.clone(),x=gg(a.fieldTransforms,f,y.transformResults);T.setAll(x),f.convertToFoundDocument(y.version,T).setHasCommittedMutations()}(i,e,t):i instanceof wu?function(a,f,y){if(!Td(a.precondition,f))return void f.convertToUnknownDocument(y.version);const T=gg(a.fieldTransforms,f,y.transformResults),x=f.data;x.setAll(Id(a)),x.setAll(T),f.convertToFoundDocument(y.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ed(i,e,t,a){return i instanceof Cd?function(f,y,T,x){if(!Td(f.precondition,y))return T;const Q=f.value.clone(),re=Tc(f.fieldTransforms,x,y);return Q.setAll(re),y.convertToFoundDocument(y.version,Q).setHasLocalMutations(),null}(i,e,t,a):i instanceof wu?function(f,y,T,x){if(!Td(f.precondition,y))return T;const Q=Tc(f.fieldTransforms,x,y),re=y.data;return re.setAll(Id(f)),re.setAll(Q),y.convertToFoundDocument(y.version,re).setHasLocalMutations(),null===T?null:T.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(me=>me.field))}(i,e,t,a):(T=t,Td(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):T);var y,T}function Yl(i,e){let t=null;for(const a of i.fieldTransforms){const f=e.data.field(a.field),y=$n(a.transform,f||null);null!=y&&(null===t&&(t=Ua.empty()),t.set(a.field,y))}return t||null}function bu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&da(t,a,(f,y)=>function gf(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof Er&&a instanceof Er||t instanceof Eo&&a instanceof Eo?da(t.elements,a.elements,Va):t instanceof tl&&a instanceof tl?Va(t.gt,a.gt):t instanceof Zn&&a instanceof Zn);var t,a}(f,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}class Cd extends $u{constructor(e,t,a,f=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class wu extends $u{constructor(e,t,a,f,y=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=f,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function Id(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function gg(i,e,t){const a=new Map;wn(i.length===t.length);for(let f=0;f<t.length;f++){const y=i[f],T=y.transform,x=e.data.field(y.field);a.set(y.field,nn(T,x,t[f]))}return a}function Tc(i,e,t){const a=new Map;for(const f of i){const y=f.transform,T=t.data.field(f.field);a.set(f.field,Et(y,T,e))}return a}class Sd extends $u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ch extends $u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mf{constructor(e){this.count=e}}var Mo,vi;function Ad(i){switch(i){default:return dn();case Pt.CANCELLED:case Pt.UNKNOWN:case Pt.DEADLINE_EXCEEDED:case Pt.RESOURCE_EXHAUSTED:case Pt.INTERNAL:case Pt.UNAVAILABLE:case Pt.UNAUTHENTICATED:return!1;case Pt.INVALID_ARGUMENT:case Pt.NOT_FOUND:case Pt.ALREADY_EXISTS:case Pt.PERMISSION_DENIED:case Pt.FAILED_PRECONDITION:case Pt.ABORTED:case Pt.OUT_OF_RANGE:case Pt.UNIMPLEMENTED:case Pt.DATA_LOSS:return!0}}function Cc(i){if(void 0===i)return Ki("GRPC error has no .code"),Pt.UNKNOWN;switch(i){case Mo.OK:return Pt.OK;case Mo.CANCELLED:return Pt.CANCELLED;case Mo.UNKNOWN:return Pt.UNKNOWN;case Mo.DEADLINE_EXCEEDED:return Pt.DEADLINE_EXCEEDED;case Mo.RESOURCE_EXHAUSTED:return Pt.RESOURCE_EXHAUSTED;case Mo.INTERNAL:return Pt.INTERNAL;case Mo.UNAVAILABLE:return Pt.UNAVAILABLE;case Mo.UNAUTHENTICATED:return Pt.UNAUTHENTICATED;case Mo.INVALID_ARGUMENT:return Pt.INVALID_ARGUMENT;case Mo.NOT_FOUND:return Pt.NOT_FOUND;case Mo.ALREADY_EXISTS:return Pt.ALREADY_EXISTS;case Mo.PERMISSION_DENIED:return Pt.PERMISSION_DENIED;case Mo.FAILED_PRECONDITION:return Pt.FAILED_PRECONDITION;case Mo.ABORTED:return Pt.ABORTED;case Mo.OUT_OF_RANGE:return Pt.OUT_OF_RANGE;case Mo.UNIMPLEMENTED:return Pt.UNIMPLEMENTED;case Mo.DATA_LOSS:return Pt.DATA_LOSS;default:return dn()}}(vi=Mo||(Mo={}))[vi.OK=0]="OK",vi[vi.CANCELLED=1]="CANCELLED",vi[vi.UNKNOWN=2]="UNKNOWN",vi[vi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vi[vi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vi[vi.NOT_FOUND=5]="NOT_FOUND",vi[vi.ALREADY_EXISTS=6]="ALREADY_EXISTS",vi[vi.PERMISSION_DENIED=7]="PERMISSION_DENIED",vi[vi.UNAUTHENTICATED=16]="UNAUTHENTICATED",vi[vi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vi[vi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vi[vi.ABORTED=10]="ABORTED",vi[vi.OUT_OF_RANGE=11]="OUT_OF_RANGE",vi[vi.UNIMPLEMENTED=12]="UNIMPLEMENTED",vi[vi.INTERNAL=13]="INTERNAL",vi[vi.UNAVAILABLE=14]="UNAVAILABLE",vi[vi.DATA_LOSS=15]="DATA_LOSS";class Gu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[f,y]of a)if(this.equalsFn(f,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),f=this.inner[a];if(void 0===f)return this.inner[a]=[[e,t]],void this.innerSize++;for(let y=0;y<f.length;y++)if(this.equalsFn(f[y][0],e))return void(f[y]=[e,t]);f.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let f=0;f<a.length;f++)if(this.equalsFn(a[f][0],e))return 1===a.length?delete this.inner[t]:a.splice(f,1),this.innerSize--,!0;return!1}forEach(e){le(this.inner,(t,a)=>{for(const[f,y]of a)e(f,y)})}isEmpty(){return Ne(this.inner)}size(){return this.innerSize}}const ep=new ao(vn.comparator);function Oo(){return ep}const tp=new ao(vn.comparator);function td(...i){let e=tp;for(const t of i)e=e.insert(t.key,t);return e}function Wu(i){let e=tp;return i.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Zl(){return nd()}function Ic(){return nd()}function nd(){return new Gu(i=>i.toString(),(i,e)=>i.isEqual(e))}const mg=new ao(vn.comparator),Ha=new ls(vn.comparator);function Jr(...i){let e=Ha;for(const t of i)e=e.add(t);return e}const zu=new ls(_r);function Ku(){return zu}class ja{constructor(e,t,a,f,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=f,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const f=new Map;return f.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ja(Mn.min(),f,Ku(),Oo(),Jr())}}class Sl{constructor(e,t,a,f,y){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=f,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Sl(a,t,Jr(),Jr(),Jr())}}class Nd{constructor(e,t,a,f){this.It=e,this.removedTargetIds=t,this.key=a,this.Tt=f}}class rd{constructor(e,t){this.targetId=e,this.Et=t}}class Ll{constructor(e,t,a=_n.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=f}}class Hh{constructor(){this.At=0,this.Rt=Rd(),this.bt=_n.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Jr(),t=Jr(),a=Jr();return this.Rt.forEach((f,y)=>{switch(y){case 0:e=e.add(f);break;case 2:t=t.add(f);break;case 1:a=a.add(f);break;default:dn()}}),new Sl(this.bt,this.Pt,e,t,a)}xt(){this.vt=!1,this.Rt=Rd()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class jh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Oo(),this.qt=$h(),this.Ut=new ls(_r)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const a=this.Wt(t);switch(e.state){case 0:this.zt(t)&&a.Dt(e.resumeToken);break;case 1:a.Mt(),a.Vt||a.xt(),a.Dt(e.resumeToken);break;case 2:a.Mt(),a.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(a.Ft(),a.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),a.Dt(e.resumeToken));break;default:dn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((a,f)=>{this.zt(f)&&t(f)})}Jt(e){const t=e.targetId,a=e.Et.count,f=this.Yt(t);if(f){const y=f.target;if(lh(y))if(0===a){const T=new vn(y.path);this.Qt(t,T,Js.newNoDocument(T,Mn.min()))}else wn(1===a);else this.Xt(t)!==a&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((y,T)=>{const x=this.Yt(T);if(x){if(y.current&&lh(x.target)){const Q=new vn(x.target.path);null!==this.Lt.get(Q)||this.te(T,Q)||this.Qt(T,Q,Js.newNoDocument(Q,e))}y.St&&(t.set(T,y.Ct()),y.xt())}});let a=Jr();this.qt.forEach((y,T)=>{let x=!0;T.forEachWhile(Q=>{const re=this.Yt(Q);return!re||2===re.purpose||(x=!1,!1)}),x&&(a=a.add(y))}),this.Lt.forEach((y,T)=>T.setReadTime(e));const f=new ja(e,t,this.Ut,this.Lt,a);return this.Lt=Oo(),this.qt=$h(),this.Ut=new ls(_r),f}Gt(e,t){if(!this.zt(e))return;const a=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,a),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,a){if(!this.zt(e))return;const f=this.Wt(e);this.te(e,t)?f.Nt(t,1):f.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),a&&(this.Lt=this.Lt.insert(t,a))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Hh,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ls(_r),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Hh),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function $h(){return new ao(vn.comparator)}function Rd(){return new ao(vn.comparator)}const id={asc:"ASCENDING",desc:"DESCENDING"},Tm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_g={and:"AND",or:"OR"};class np{constructor(e,t){this.databaseId=e,this.wt=t}}function Eu(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sd(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Sc(i,e){return Eu(i,e.toTimestamp())}function Ks(i){return wn(!!i),Mn.fromTimestamp(function(e){const t=Cs(e);return new Qi(t.seconds,t.nanos)}(i))}function od(i,e){return(t=i,new ti(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Du(i){const e=ti.fromString(i);return wn(Eg(e)),e}function ad(i,e){return od(i.databaseId,e.path)}function Ql(i,e){const t=Du(e);if(t.get(1)!==i.databaseId.projectId)throw new Zt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Zt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new vn(ip(t))}function rp(i,e){return od(i.databaseId,e)}function du(i){const e=Du(i);return 4===e.length?ti.emptyPath():ip(e)}function Tu(i){return new ti(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ip(i){return wn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function _f(i,e,t){return{name:ad(i,e),fields:t.value.mapValue.fields}}function dh(i,e,t){const a=Ql(i,e.name),f=Ks(e.updateTime),y=e.createTime?Ks(e.createTime):Mn.min(),T=new Ua({mapValue:{fields:e.fields}}),x=Js.newFoundDocument(a,f,y,T);return t&&x.setHasCommittedMutations(),t?x.setHasCommittedMutations():x}function Md(i,e){let t;if(e instanceof Cd)t={update:_f(i,e.key,e.value)};else if(e instanceof Sd)t={delete:ad(i,e.key)};else if(e instanceof wu)t={update:_f(i,e.key,e.data),updateMask:Im(e.fieldMask)};else{if(!(e instanceof ch))return dn();t={verify:ad(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,y){const T=y.transform;if(T instanceof Zn)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof Er)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Eo)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof tl)return{fieldPath:y.field.canonicalString(),increment:T.gt};throw dn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:Sc(i,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:dn()),t;var f}function vf(i,e){const t=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?Xs.updateTime(Ks(f.updateTime)):void 0!==f.exists?Xs.exists(f.exists):Xs.none():Xs.none(),a=e.updateTransforms?e.updateTransforms.map(f=>function(y,T){let x=null;"setToServerValue"in T?(wn("REQUEST_TIME"===T.setToServerValue),x=new Zn):"appendMissingElements"in T?x=new Er(T.appendMissingElements.values||[]):"removeAllFromArray"in T?x=new Eo(T.removeAllFromArray.values||[]):"increment"in T?x=new tl(y,T.increment):dn();const Q=Qr.fromServerFormat(T.fieldPath);return new Ec(Q,x)}(i,f)):[];var f;if(e.update){const f=Ql(i,e.update.name),y=new Ua({mapValue:{fields:e.update.fields}});if(e.updateMask){const T=new Il((e.updateMask.fieldPaths||[]).map(re=>Qr.fromServerFormat(re)));return new wu(f,y,T,t,a)}return new Cd(f,y,t,a)}if(e.delete){const f=Ql(i,e.delete);return new Sd(f,t)}if(e.verify){const f=Ql(i,e.verify);return new ch(f,t)}return dn()}function yg(i,e){return{documents:[rp(i,e.path)]}}function sp(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=rp(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rp(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const f=function(Q){if(0!==Q.length)return wg(xr.create(Q,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const y=function(Q){if(0!==Q.length)return Q.map(re=>{return{field:hh((me=re).field),direction:Ac(me.dir)};var me})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const T=(re=e.limit,i.wt||xe(re)?re:{value:re});var re,x,Q;return null!==T&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Q=e.endAt).inclusive,values:Q.position}),t}function vg(i){let e=du(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let f=null;if(a>0){wn(1===a);const me=t.from[0];me.allDescendants?f=me.collectionId:e=e.child(me.collectionId)}let y=[];t.where&&(y=function(me){const Ke=bg(me);return Ke instanceof xr&&zl(Ke)?Ke.getFilters():[Ke]}(t.where));let T=[];t.orderBy&&(T=t.orderBy.map(me=>{return new _c(ud((Ke=me).field),function(It){switch(It){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ke.direction));var Ke}));let x=null;t.limit&&(x=function(me){let Ke;return Ke="object"==typeof me?me.value:me,xe(Ke)?null:Ke}(t.limit));let Q=null;var me;t.startAt&&(Q=new Sn((me=t.startAt).values||[],!!me.before));let re=null;return t.endAt&&(re=function(me){return new Sn(me.values||[],!me.before)}(t.endAt)),Vh(e,f,T,y,x,"F",Q,re)}function bg(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ud(e.unaryFilter.field);return Tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=ud(e.unaryFilter.field);return Tn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=ud(e.unaryFilter.field);return Tn.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=ud(e.unaryFilter.field);return Tn.create(y,"!=",{nullValue:"NULL_VALUE"});default:return dn()}}(i):void 0!==i.fieldFilter?Tn.create(ud((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return xr.create(e.compositeFilter.filters.map(t=>bg(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dn()}}(e.compositeFilter.op))}(i):dn();var e}function Ac(i){return id[i]}function ld(i){return Tm[i]}function Cm(i){return _g[i]}function hh(i){return{fieldPath:i.canonicalString()}}function ud(i){return Qr.fromServerFormat(i.fieldPath)}function wg(i){return i instanceof Tn?function(e){if("=="===e.op){if(Cl(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NAN"}};if(oo(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cl(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NAN"}};if(oo(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hh(e.field),op:ld(e.op),value:e.value}}}(i):i instanceof xr?function(e){const t=e.getFilters().map(a=>wg(a));return 1===t.length?t[0]:{compositeFilter:{op:Cm(e.op),filters:t}}}(i):dn()}function Im(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Eg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function lo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=bf(e)),e=Dg(i.get(t),e);return bf(e)}function Dg(i,e){let t=e;const a=i.length;for(let f=0;f<a;f++){const y=i.charAt(f);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function bf(i){return i+"\x01\x01"}function Cu(i){const e=i.length;if(wn(e>=2),2===e)return wn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ti.emptyPath();const t=e-2,a=[];let f="";for(let y=0;y<e;){const T=i.indexOf("\x01",y);switch((T<0||T>t)&&dn(),i.charAt(T+1)){case"\x01":const x=i.substring(y,T);let Q;0===f.length?Q=x:(f+=x,Q=f,f=""),a.push(Q);break;case"\x10":f+=i.substring(y,T),f+="\0";break;case"\x11":f+=i.substring(y,T+1);break;default:dn()}y=T+2}return new ti(a)}const ap=["userId","batchId"];function cd(i,e){return[i,lo(e)]}function qu(i,e,t){return[i,lo(e),t]}const xd={},Tg=["prefixPath","collectionGroup","readTime","documentId"],Cg=["prefixPath","collectionGroup","documentId"],lp=["collectionGroup","readTime","prefixPath","documentId"],R_=["canonicalId","targetId"],M_=["targetId","path"],Sm=["path","targetId"],wf=["collectionId","parent"],up=["indexId","uid"],O_=["uid","sequenceNumber"],x_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ef=["indexId","uid","orderedDocumentKey"],Am=["userId","collectionPath","documentId"],Nm=["userId","collectionPath","largestBatchId"],Rm=["userId","collectionGroup","largestBatchId"],Ig=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cp=[...Ig,"documentOverlays"],Df=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sg=Df,dp=[...Sg,"indexConfiguration","indexState","indexEntries"];class hp extends au{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ci(i,e){const t=yn(i);return Ti.M(t.se,e)}class Wh{constructor(e,t,a,f){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=f}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let f=0;f<this.mutations.length;f++){const y=this.mutations[f];y.key.isEqual(e.key)&&Uh(y,e,a[f])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ed(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ed(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Ic();return this.mutations.forEach(f=>{const y=e.get(f.key),T=y.overlayedDocument;let x=this.applyToLocalView(T,y.mutatedFields);x=t.has(f.key)?null:x;const Q=Dc(T,x);null!==Q&&a.set(f.key,Q),T.isValidDocument()||T.convertToNoDocument(Mn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jr())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,(t,a)=>bu(t,a))&&da(this.baseMutations,e.baseMutations,(t,a)=>bu(t,a))}}class fp{constructor(e,t,a,f){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=f}static from(e,t,a){wn(e.mutations.length===a.length);let f=mg;const y=e.mutations;for(let T=0;T<y.length;T++)f=f.insert(y[T].key,a[T].version);return new fp(e,t,a,f)}}class zh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nc{constructor(e,t,a,f,y=Mn.min(),T=Mn.min(),x=_n.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=f,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=x}withSequenceNumber(e){return new Nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ag{constructor(e){this.ie=e}}function $a(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:ad(f=i.ie,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:Eu(f,y.version.toTimestamp()),createTime:Eu(f,y.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Jl(e.version)};else{if(!e.isUnknownDocument())return dn();a.unknownDocument={path:t.path.toArray(),version:Jl(e.version)}}var f,y;return a}function fl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Jl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pd(i){const e=new Qi(i.seconds,i.nanoseconds);return Mn.fromTimestamp(e)}function kd(i,e){const t=(e.baseMutations||[]).map(y=>vf(i.ie,y));for(let y=0;y<e.mutations.length-1;++y){const T=e.mutations[y];y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(T.updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y)}const a=e.mutations.map(y=>vf(i.ie,y)),f=Qi.fromMillis(e.localWriteTimeMs);return new Wh(e.batchId,f,t,a)}function m(i){const e=Pd(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Pd(i.lastLimboFreeSnapshotVersion):Mn.min();let a;var f;return void 0!==i.query.documents?(wn(1===(f=i.query).documents.length),a=Jo(jo(du(f.documents[0])))):a=Jo(vg(i.query)),new Nc(a,i.targetId,0,i.lastListenSequenceNumber,e,t,_n.fromBase64String(i.resumeToken))}function w(i,e){const t=Jl(e.snapshotVersion),a=Jl(e.lastLimboFreeSnapshotVersion);let f;f=lh(e.target)?yg(i.ie,e.target):sp(i.ie,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uu(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:f}}function p(i){const e=vg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Os(e,e.limit,"L"):e}function C(i,e){return new zh(e.largestBatchId,vf(i.ie,e.overlayMutation))}function k(i,e){const t=e.path.lastSegment();return[i,lo(e.path.popLast()),t]}function J(i,e,t,a){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Jl(a.readTime),documentKey:lo(a.documentKey.path),largestBatchId:a.largestBatchId}}class Re{getBundleMetadata(e,t){return rt(e).get(t).next(a=>{if(a)return{id:(f=a).bundleId,createTime:Pd(f.createTime),version:f.version};var f})}saveBundleMetadata(e,t){return rt(e).put({bundleId:(a=t).id,createTime:Jl(Ks(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return it(e).get(t).next(a=>{if(a)return{name:(f=a).name,query:p(f.bundledQuery),readTime:Pd(f.readTime)};var f})}saveNamedQuery(e,t){return it(e).put({name:(a=t).name,readTime:Jl(Ks(a.readTime)),bundledQuery:a.bundledQuery});var a}}function rt(i){return Ci(i,"bundles")}function it(i){return Ci(i,"namedQueries")}class Lt{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Lt(e,t.uid||"")}getOverlay(e,t){return $t(e).get(k(this.userId,t)).next(a=>a?C(this.yt,a):null)}getOverlays(e,t){const a=Zl();return Ot.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&a.set(f,y)})).next(()=>a)}saveOverlays(e,t,a){const f=[];return a.forEach((y,T)=>{const x=new zh(t,T);f.push(this.oe(e,x))}),Ot.waitFor(f)}removeOverlaysForBatchId(e,t,a){const f=new Set;t.forEach(T=>f.add(lo(T.getCollectionPath())));const y=[];return f.forEach(T=>{const x=IDBKeyRange.bound([this.userId,T,a],[this.userId,T,a+1],!1,!0);y.push($t(e).Y("collectionPathOverlayIndex",x))}),Ot.waitFor(y)}getOverlaysForCollection(e,t,a){const f=Zl(),y=lo(t),T=IDBKeyRange.bound([this.userId,y,a],[this.userId,y,Number.POSITIVE_INFINITY],!0);return $t(e).W("collectionPathOverlayIndex",T).next(x=>{for(const Q of x){const re=C(this.yt,Q);f.set(re.getKey(),re)}return f})}getOverlaysForCollectionGroup(e,t,a,f){const y=Zl();let T;const x=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $t(e).Z({index:"collectionGroupOverlayIndex",range:x},(Q,re,me)=>{const Ke=C(this.yt,re);y.size()<f||Ke.largestBatchId===T?(y.set(Ke.getKey(),Ke),T=Ke.largestBatchId):me.done()}).next(()=>y)}oe(e,t){return $t(e).put(function(a,f,y){const[T,x,Q]=k(f,y.mutation.key);return{userId:f,collectionPath:x,documentId:Q,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Md(a.ie,y.mutation)}}(this.yt,this.userId,t))}}function $t(i){return Ci(i,"documentOverlays")}class Un{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Li(e.integerValue));else if("doubleValue"in e){const a=Li(e.doubleValue);isNaN(a)?this.he(t,13):(this.he(t,15),Ft(a)?t.le(0):t.le(a))}else if("timestampValue"in e){const a=e.timestampValue;this.he(t,20),"string"==typeof a?t.fe(a):(t.fe(`${a.seconds||""}`),t.le(a.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Uo(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.he(t,45),t.le(a.latitude||0),t.le(a.longitude||0)}else"mapValue"in e?se(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):dn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const a=e.fields||{};this.he(t,55);for(const f of Object.keys(a))this.de(f,t),this.ce(a[f],t)}ye(e,t){const a=e.values||[];this.he(t,50);for(const f of a)this.ce(f,t)}me(e,t){this.he(t,37),vn.fromName(e).path.forEach(a=>{this.he(t,60),this.pe(a,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Hn(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function nr(i){const e=64-function(t){let a=0;for(let f=0;f<8;++f){const y=Hn(255&t[f]);if(a+=y,8!==y)break}return a}(i);return Math.ceil(e/8)}Un.Ie=new Un;class Ni{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ee(a.value),a=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.be(a.value),a=t.next();this.Pe()}ve(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ee(a);else if(a<2048)this.Ee(960|a>>>6),this.Ee(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a);else{const f=t.codePointAt(0);this.Ee(240|f>>>18),this.Ee(128|63&f>>>12),this.Ee(128|63&f>>>6),this.Ee(128|63&f)}}this.Ae()}Ve(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.be(a);else if(a<2048)this.be(960|a>>>6),this.be(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.be(480|a>>>12),this.be(128|63&a>>>6),this.be(128|63&a);else{const f=t.codePointAt(0);this.be(240|f>>>18),this.be(128|63&f>>>12),this.be(128|63&f>>>6),this.be(128|63&f)}}this.Pe()}Se(e){const t=this.De(e),a=nr(t);this.Ce(1+a),this.buffer[this.position++]=255&a;for(let f=t.length-a;f<t.length;++f)this.buffer[this.position++]=255&t[f]}xe(e){const t=this.De(e),a=nr(t);this.Ce(1+a),this.buffer[this.position++]=~(255&a);for(let f=t.length-a;f<t.length;++f)this.buffer[this.position++]=~(255&t[f])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(f){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,f,!1),new Uint8Array(y.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let f=1;f<t.length;++f)t[f]^=a?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const f=new Uint8Array(a);f.set(this.buffer),this.buffer=f}}class Cr{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class ni{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class ci{constructor(){this.$e=new Ni,this.Be=new Cr(this.$e),this.Le=new ni(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class di{constructor(e,t,a,f){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=f}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new di(this.indexId,this.documentKey,this.arrayValue,a)}}function Ji(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Oi(i.arrayValue,e.arrayValue),0!==t?t:(t=Oi(i.directionalValue,e.directionalValue),0!==t?t:vn.comparator(i.documentKey,e.documentKey)))}function Oi(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class pi{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const a=t;a.isInequality()?this.Qe=a:this.Ge.push(a)}}je(e){wn(e.collectionGroup===this.collectionId);const t=Zo(e);if(void 0!==t&&!this.We(t))return!1;const a=Fa(e);let f=0,y=0;for(;f<a.length&&this.We(a[f]);++f);if(f===a.length)return!0;if(void 0!==this.Qe){const T=a[f];if(!this.ze(this.Qe,T)||!this.He(this.Ke[y++],T))return!1;++f}for(;f<a.length;++f){const T=a[f];if(y>=this.Ke.length||!this.He(this.Ke[y++],T))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qi(i){var e,t;if(wn(i instanceof Tn||i instanceof xr),i instanceof Tn){if(i instanceof Lh){const f=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>Tn.create(i.field,"==",y)))||[];return xr.create(f,"or")}return i}const a=i.filters.map(f=>qi(f));return xr.create(a,i.op)}function Vs(i){if(0===i.getFilters().length)return[];const e=Us(qi(i));return wn(Wo(e)),bs(e)||Go(e)?[e]:e.getFilters()}function bs(i){return i instanceof Tn}function Go(i){return i instanceof xr&&zl(i)}function Wo(i){return bs(i)||Go(i)||function(e){if(e instanceof xr&&el(e)){for(const t of e.getFilters())if(!bs(t)&&!Go(t))return!1;return!0}return!1}(i)}function Us(i){if(wn(i instanceof Tn||i instanceof xr),i instanceof Tn)return i;if(1===i.filters.length)return Us(i.filters[0]);const e=i.filters.map(a=>Us(a));let t=xr.create(e,i.op);return t=Iu(t),Wo(t)?t:(wn(t instanceof xr),wn(ds(t)),wn(t.filters.length>1),t.filters.reduce((a,f)=>Bl(a,f)))}function Bl(i,e){let t;return wn(i instanceof Tn||i instanceof xr),wn(e instanceof Tn||e instanceof xr),t=i instanceof Tn?e instanceof Tn?xr.create([i,e],"and"):nl(i,e):e instanceof Tn?nl(e,i):function(a,f){if(wn(a.filters.length>0&&f.filters.length>0),ds(a)&&ds(f))return Yc(a,f.getFilters());const y=el(a)?a:f,T=el(a)?f:a,x=y.filters.map(Q=>Bl(Q,T));return xr.create(x,"or")}(i,e),Iu(t)}function nl(i,e){if(ds(e))return Yc(e,i.getFilters());{const t=e.filters.map(a=>Bl(i,a));return xr.create(t,"or")}}function Iu(i){if(wn(i instanceof Tn||i instanceof xr),i instanceof Tn)return i;const e=i.getFilters();if(1===e.length)return Iu(e[0]);if(Kl(i))return i;const t=e.map(f=>Iu(f)),a=[];return t.forEach(f=>{f instanceof Tn?a.push(f):f instanceof xr&&(f.op===i.op?a.push(...f.filters):a.push(f))}),1===a.length?a[0]:xr.create(a,i.op)}class hd{constructor(){this.Je=new Ga}addToCollectionParentIndex(e,t){return this.Je.add(t),Ot.resolve()}getCollectionParents(e,t){return Ot.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ot.resolve()}deleteFieldIndex(e,t){return Ot.resolve()}getDocumentsMatchingTarget(e,t){return Ot.resolve(null)}getIndexType(e,t){return Ot.resolve(0)}getFieldIndexes(e,t){return Ot.resolve([])}getNextCollectionGroupToUpdate(e){return Ot.resolve(null)}getMinOffset(e,t){return Ot.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,t){return Ot.resolve(ha.min())}updateCollectionGroup(e,t,a){return Ot.resolve()}updateIndexEntries(e,t){return Ot.resolve()}}class Ga{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),f=this.index[t]||new ls(ti.comparator),y=!f.has(a);return this.index[t]=f.add(a),y}has(e){const t=e.lastSegment(),a=e.popLast(),f=this.index[t];return f&&f.has(a)}getEntries(e){return(this.index[e]||new ls(ti.comparator)).toArray()}}const pl=new Uint8Array(0);class fh{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Ga,this.Xe=new Gu(a=>Uu(a),(a,f)=>ah(a,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const a=t.lastSegment(),f=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const y={collectionId:a,parent:lo(f)};return Rc(e).put(y)}return Ot.resolve()}getCollectionParents(e,t){const a=[],f=IDBKeyRange.bound([t,""],[Fu(t),""],!1,!0);return Rc(e).W(f).next(y=>{for(const T of y){if(T.collectionId!==t)break;a.push(Cu(T.parent))}return a})}addFieldIndex(e,t){const a=ph(e),f={indexId:(T=t).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var T;delete f.indexId;const y=a.add(f);if(t.indexState){const T=Zu(e);return y.next(x=>{T.put(J(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const a=ph(e),f=Zu(e),y=Yu(e);return a.delete(t.indexId).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=Yu(e);let f=!0;const y=new Map;return Ot.forEach(this.Ze(t),T=>this.tn(e,T).next(x=>{f&&(f=!!x),y.set(T,x)})).next(()=>{if(f){let T=Jr();const x=[];return Ot.forEach(y,(Q,re)=>{var me;rn("IndexedDbIndexManager",`Using index ${me=Q,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(Is=>`${Is.fieldPath}:${Is.kind}`).join(",")}`} to execute ${Uu(t)}`);const Ke=function(Is,ya){const xs=Zo(ya);if(void 0===xs)return null;for(const js of wd(Is,xs.fieldPath))switch(js.op){case"array-contains-any":return js.value.arrayValue.values||[];case"array-contains":return[js.value]}return null}(re,Q),It=function(Is,ya){const xs=new Map;for(const js of Fa(ya))for(const va of wd(Is,js.fieldPath))switch(va.op){case"==":case"in":xs.set(js.fieldPath.canonicalString(),va.value);break;case"not-in":case"!=":return xs.set(js.fieldPath.canonicalString(),va.value),Array.from(xs.values())}return null}(re,Q),Xt=function(Is,ya){const xs=[];let js=!0;for(const va of Fa(ya)){const wm=0===va.kind?Hu(Is,va.fieldPath,Is.startAt):Qc(Is,va.fieldPath,Is.startAt);xs.push(wm.value),js&&(js=wm.inclusive)}return new Sn(xs,js)}(re,Q),on=function(Is,ya){const xs=[];let js=!0;for(const va of Fa(ya)){const wm=0===va.kind?Qc(Is,va.fieldPath,Is.endAt):Hu(Is,va.fieldPath,Is.endAt);xs.push(wm.value),js&&(js=wm.inclusive)}return new Sn(xs,js)}(re,Q),Yn=this.en(Q,re,Xt),yr=this.en(Q,re,on),mo=this.nn(Q,re,It),ea=this.sn(Q.indexId,Ke,Yn,Xt.inclusive,yr,on.inclusive,mo);return Ot.forEach(ea,Is=>a.J(Is,t.limit).next(ya=>{ya.forEach(xs=>{const js=vn.fromSegments(xs.documentKey);T.has(js)||(T=T.add(js),x.push(js))})}))}).next(()=>x)}return Ot.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Vs(xr.create(e.filters,"and")).map(a=>bc(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,a,f,y,T,x){const Q=(null!=t?t.length:1)*Math.max(a.length,y.length),re=Q/(null!=t?t.length:1),me=[];for(let Ke=0;Ke<Q;++Ke){const It=t?this.rn(t[Ke/re]):pl,Xt=this.on(e,It,a[Ke%re],f),on=this.un(e,It,y[Ke%re],T),Yn=x.map(yr=>this.on(e,It,yr,!0));me.push(...this.createRange(Xt,on,Yn))}return me}on(e,t,a,f){const y=new di(e,vn.empty(),t,a);return f?y:y.Ue()}un(e,t,a,f){const y=new di(e,vn.empty(),t,a);return f?y.Ue():y}tn(e,t){const a=new pi(t),f=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,f).next(y=>{let T=null;for(const x of y)a.je(x)&&(!T||x.fields.length>T.fields.length)&&(T=x);return T})}getIndexType(e,t){let a=2;const f=this.Ze(t);return Ot.forEach(f,y=>this.tn(e,y).next(T=>{T?0!==a&&T.fields.length<function(x){let Q=new ls(Qr.comparator),re=!1;for(const me of x.filters)for(const Ke of me.getFlattenedFilters())Ke.field.isKeyField()||("array-contains"===Ke.op||"array-contains-any"===Ke.op?re=!0:Q=Q.add(Ke.field));for(const me of x.orderBy)me.field.isKeyField()||(Q=Q.add(me.field));return Q.size+(re?1:0)}(y)&&(a=1):a=0})).next(()=>null!==t.limit&&f.length>1&&2===a?1:a)}cn(e,t){const a=new ci;for(const f of Fa(e)){const y=t.data.field(f.fieldPath);if(null==y)return null;const T=a.qe(f.kind);Un.Ie.ue(y,T)}return a.Fe()}rn(e){const t=new ci;return Un.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const a=new ci;return Un.Ie.ue(Dl(this.databaseId,t),a.qe(function(f){const y=Fa(f);return 0===y.length?0:y[y.length-1].kind}(e))),a.Fe()}nn(e,t,a){if(null===a)return[];let f=[];f.push(new ci);let y=0;for(const T of Fa(e)){const x=a[y++];for(const Q of f)if(this.hn(t,T.fieldPath)&&yu(x))f=this.ln(f,T,x);else{const re=Q.qe(T.kind);Un.Ie.ue(x,re)}}return this.fn(f)}en(e,t,a){return this.nn(e,t,a.position)}fn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Fe();return t}ln(e,t,a){const f=[...e],y=[];for(const T of a.arrayValue.values||[])for(const x of f){const Q=new ci;Q.seed(x.Fe()),Un.Ie.ue(T,Q.qe(t.kind)),y.push(Q)}return y}hn(e,t){return!!e.filters.find(a=>a instanceof Tn&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=ph(e),f=Zu(e);return(t?a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.W()).next(y=>{const T=[];return Ot.forEach(y,x=>f.get([x.indexId,this.uid]).next(Q=>{T.push(function(re,me){const Ke=me?new Mi(me.sequenceNumber,new ha(Pd(me.readTime),new vn(Cu(me.documentKey)),me.largestBatchId)):Mi.empty(),It=re.fields.map(([Xt,on])=>new wo(Qr.fromServerFormat(Xt),on));return new so(re.indexId,re.collectionGroup,It,Ke)}(x,Q))})).next(()=>T)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,f)=>{const y=a.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==y?y:_r(a.collectionGroup,f.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const f=ph(e),y=Zu(e);return this.dn(e).next(T=>f.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>Ot.forEach(x,Q=>y.put(J(Q.indexId,this.user,T,a)))))}updateIndexEntries(e,t){const a=new Map;return Ot.forEach(t,(f,y)=>{const T=a.get(f.collectionGroup);return(T?Ot.resolve(T):this.getFieldIndexes(e,f.collectionGroup)).next(x=>(a.set(f.collectionGroup,x),Ot.forEach(x,Q=>this._n(e,f,Q).next(re=>{const me=this.wn(y,Q);return re.isEqual(me)?Ot.resolve():this.mn(e,y,Q,re,me)}))))})}gn(e,t,a,f){return Yu(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.an(a,t.key),documentKey:t.key.path.toArray()})}yn(e,t,a,f){return Yu(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.an(a,t.key),t.key.path.toArray()])}_n(e,t,a){const f=Yu(e);let y=new ls(Ji);return f.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.an(a,t)])},(T,x)=>{y=y.add(new di(a.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>y)}wn(e,t){let a=new ls(Ji);const f=this.cn(t,e);if(null==f)return a;const y=Zo(t);if(null!=y){const T=e.data.field(y.fieldPath);if(yu(T))for(const x of T.arrayValue.values||[])a=a.add(new di(t.indexId,e.key,this.rn(x),f))}else a=a.add(new di(t.indexId,e.key,pl,f));return a}mn(e,t,a,f,y){rn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const T=[];return function(x,Q,re,me,Ke){const It=x.getIterator(),Xt=Q.getIterator();let on=Fl(It),Yn=Fl(Xt);for(;on||Yn;){let yr=!1,mo=!1;if(on&&Yn){const ea=re(on,Yn);ea<0?mo=!0:ea>0&&(yr=!0)}else null!=on?mo=!0:yr=!0;yr?(me(Yn),Yn=Fl(Xt)):mo?(Ke(on),on=Fl(It)):(on=Fl(It),Yn=Fl(Xt))}}(f,y,Ji,x=>{T.push(this.gn(e,t,a,x))},x=>{T.push(this.yn(e,t,a,x))}),Ot.waitFor(T)}dn(e){let t=1;return Zu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,f,y)=>{y.done(),t=f.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((T,x)=>Ji(T,x)).filter((T,x,Q)=>!x||0!==Ji(T,Q[x-1]));const f=[];f.push(e);for(const T of a){const x=Ji(T,e),Q=Ji(T,t);if(0===x)f[0]=e.Ue();else if(x>0&&Q<0)f.push(T),f.push(T.Ue());else if(Q>0)break}f.push(t);const y=[];for(let T=0;T<f.length;T+=2){if(this.pn(f[T],f[T+1]))return[];y.push(IDBKeyRange.bound([f[T].indexId,this.uid,f[T].arrayValue,f[T].directionalValue,pl,[]],[f[T+1].indexId,this.uid,f[T+1].arrayValue,f[T+1].directionalValue,pl,[]]))}return y}pn(e,t){return Ji(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Su)}getMinOffset(e,t){return Ot.mapArray(this.Ze(t),a=>this.tn(e,a).next(f=>f||dn())).next(Su)}}function Rc(i){return Ci(i,"collectionParents")}function Yu(i){return Ci(i,"indexEntries")}function ph(i){return Ci(i,"indexConfiguration")}function Zu(i){return Ci(i,"indexState")}function Su(i){wn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<i.length;a++){const f=i[a].indexState.offset;gc(f,e)<0&&(e=f),t<f.largestBatchId&&(t=f.largestBatchId)}return new ha(e.readTime,e.documentKey,t)}const Mc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qu(i,e,t){const a=i.store("mutations"),f=i.store("documentMutations"),y=[],T=IDBKeyRange.only(t.batchId);let x=0;const Q=a.Z({range:T},(me,Ke,It)=>(x++,It.delete()));y.push(Q.next(()=>{wn(1===x)}));const re=[];for(const me of t.mutations){const Ke=qu(e,me.key.path,t.batchId);y.push(f.delete(Ke)),re.push(me.key)}return Ot.waitFor(y).next(()=>re)}function fd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw dn();e=i.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class Ju{constructor(e,t,a,f){this.userId=e,this.yt=t,this.indexManager=a,this.referenceDelegate=f,this.In={}}static re(e,t,a,f){wn(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new Ju(y,t,a,f)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oc(e).Z({index:"userMutationsIndex",range:a},(f,y,T)=>{t=!1,T.done()}).next(()=>t)}addMutationBatch(e,t,a,f){const y=Xu(e),T=Oc(e);return T.add({}).next(x=>{wn("number"==typeof x);const Q=new Wh(x,t,a,f),re=function(It,Xt,on){const Yn=on.baseMutations.map(mo=>Md(It.ie,mo)),yr=on.mutations.map(mo=>Md(It.ie,mo));return{userId:Xt,batchId:on.batchId,localWriteTimeMs:on.localWriteTime.toMillis(),baseMutations:Yn,mutations:yr}}(this.yt,this.userId,Q),me=[];let Ke=new ls((It,Xt)=>_r(It.canonicalString(),Xt.canonicalString()));for(const It of f){const Xt=qu(this.userId,It.key.path,x);Ke=Ke.add(It.key.path.popLast()),me.push(T.put(re)),me.push(y.put(Xt,xd))}return Ke.forEach(It=>{me.push(this.indexManager.addToCollectionParentIndex(e,It))}),e.addOnCommittedListener(()=>{this.In[x]=Q.keys()}),Ot.waitFor(me).next(()=>Q)})}lookupMutationBatch(e,t){return Oc(e).get(t).next(a=>a?(wn(a.userId===this.userId),kd(this.yt,a)):null)}Tn(e,t){return this.In[t]?Ot.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const f=a.keys();return this.In[t]=f,f}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,f=IDBKeyRange.lowerBound([this.userId,a]);let y=null;return Oc(e).Z({index:"userMutationsIndex",range:f},(T,x,Q)=>{x.userId===this.userId&&(wn(x.batchId>=a),y=kd(this.yt,x)),Q.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Oc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(f,y,T)=>{a=y.batchId,T.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oc(e).W("userMutationsIndex",t).next(a=>a.map(f=>kd(this.yt,f)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=cd(this.userId,t.path),f=IDBKeyRange.lowerBound(a),y=[];return Xu(e).Z({range:f},(T,x,Q)=>{const[re,me,Ke]=T,It=Cu(me);if(re===this.userId&&t.path.isEqual(It))return Oc(e).get(Ke).next(Xt=>{if(!Xt)throw dn();wn(Xt.userId===this.userId),y.push(kd(this.yt,Xt))});Q.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new ls(_r);const f=[];return t.forEach(y=>{const T=cd(this.userId,y.path),x=IDBKeyRange.lowerBound(T),Q=Xu(e).Z({range:x},(re,me,Ke)=>{const[It,Xt,on]=re,Yn=Cu(Xt);It===this.userId&&y.path.isEqual(Yn)?a=a.add(on):Ke.done()});f.push(Q)}),Ot.waitFor(f).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,f=a.length+1,y=cd(this.userId,a),T=IDBKeyRange.lowerBound(y);let x=new ls(_r);return Xu(e).Z({range:T},(Q,re,me)=>{const[Ke,It,Xt]=Q,on=Cu(It);Ke===this.userId&&a.isPrefixOf(on)?on.length===f&&(x=x.add(Xt)):me.done()}).next(()=>this.En(e,x))}En(e,t){const a=[],f=[];return t.forEach(y=>{f.push(Oc(e).get(y).next(T=>{if(null===T)throw dn();wn(T.userId===this.userId),a.push(kd(this.yt,T))}))}),Ot.waitFor(f).next(()=>a)}removeMutationBatch(e,t){return Qu(e.se,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ot.forEach(a,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ot.resolve();const a=IDBKeyRange.lowerBound([this.userId]),f=[];return Xu(e).Z({range:a},(y,T,x)=>{if(y[0]===this.userId){const Q=Cu(y[1]);f.push(Q)}else x.done()}).next(()=>{wn(0===f.length)})})}containsKey(e,t){return gh(e,this.userId,t)}Rn(e){return mh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gh(i,e,t){const a=cd(e,t.path),f=a[1],y=IDBKeyRange.lowerBound(a);let T=!1;return Xu(i).Z({range:y,X:!0},(x,Q,re)=>{const[me,Ke,It]=x;me===e&&Ke===f&&(T=!0),re.done()}).next(()=>T)}function Oc(i){return Ci(i,"mutations")}function Xu(i){return Ci(i,"documentMutations")}function mh(i){return Ci(i,"mutationQueues")}class rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new rl(0)}static vn(){return new rl(-1)}}class Ng{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const a=new rl(t.highestTargetId);return t.highestTargetId=a.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mn.fromTimestamp(new Qi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.Vn(e).next(f=>(f.highestListenSequenceNumber=t,a&&(f.lastRemoteSnapshotVersion=a.toTimestamp()),t>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=t),this.Sn(e,f)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(t,a),this.Sn(e,a))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(a=>(wn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,t,a){let f=0;const y=[];return xc(e).Z((T,x)=>{const Q=m(x);Q.sequenceNumber<=t&&null===a.get(Q.targetId)&&(f++,y.push(this.removeTargetData(e,Q)))}).next(()=>Ot.waitFor(y)).next(()=>f)}forEachTarget(e,t){return xc(e).Z((a,f)=>{const y=m(f);t(y)})}Vn(e){return _h(e).get("targetGlobalKey").next(t=>(wn(null!==t),t))}Sn(e,t){return _h(e).put("targetGlobalKey",t)}Dn(e,t){return xc(e).put(w(this.yt,t))}Cn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Uu(t),f=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let y=null;return xc(e).Z({range:f,index:"queryTargetsIndex"},(T,x,Q)=>{const re=m(x);ah(t,re.target)&&(y=re,Q.done())}).next(()=>y)}addMatchingKeys(e,t,a){const f=[],y=Au(e);return t.forEach(T=>{const x=lo(T.path);f.push(y.put({targetId:a,path:x})),f.push(this.referenceDelegate.addReference(e,a,T))}),Ot.waitFor(f)}removeMatchingKeys(e,t,a){const f=Au(e);return Ot.forEach(t,y=>{const T=lo(y.path);return Ot.waitFor([f.delete([a,T]),this.referenceDelegate.removeReference(e,a,y)])})}removeMatchingKeysForTargetId(e,t){const a=Au(e),f=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(f)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),f=Au(e);let y=Jr();return f.Z({range:a,X:!0},(T,x,Q)=>{const re=Cu(T[1]),me=new vn(re);y=y.add(me)}).next(()=>y)}containsKey(e,t){const a=lo(t.path),f=IDBKeyRange.bound([a],[Fu(a)],!1,!0);let y=0;return Au(e).Z({index:"documentTargetsIndex",X:!0,range:f},([T,x],Q,re)=>{0!==T&&(y++,re.done())}).next(()=>y>0)}ne(e,t){return xc(e).get(t).next(a=>a?m(a):null)}}function xc(i){return Ci(i,"targets")}function _h(i){return Ci(i,"targetGlobal")}function Au(i){return Ci(i,"targetDocuments")}function yh([i,e],[t,a]){const f=_r(i,t);return 0===f?_r(e,a):f}class Fd{constructor(e){this.xn=e,this.buffer=new ls(yh),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();yh(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pd{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;rn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,je.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){Ja(a)?rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield xl(a)}yield t.Fn(3e5)}))}}class Pc{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return Ot.resolve(R.at);const a=new Fd(t);return this.$n.forEachTarget(e,f=>a.On(f.sequenceNumber)).next(()=>this.$n.Ln(e,f=>a.On(f))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.$n.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),Ot.resolve(Mc)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mc):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let a,f,y,T,x,Q,re;const me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ke=>(Ke>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ke}`),f=this.params.maximumSequenceNumbersToCollect):f=Ke,T=Date.now(),this.nthSequenceNumber(e,f))).next(Ke=>(a=Ke,x=Date.now(),this.removeTargets(e,a,t))).next(Ke=>(y=Ke,Q=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ke=>(re=Date.now(),Ca()<=qe.in.DEBUG&&rn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${T-me}ms\n\tDetermined least recently used ${f} in `+(x-T)+`ms\n\tRemoved ${y} targets in `+(Q-x)+`ms\n\tRemoved ${Ke} documents in `+(re-Q)+`ms\nTotal Duration: ${re-me}ms`),Ot.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:y,documentsRemoved:Ke})))}}class zo{constructor(e,t){this.db=e,this.garbageCollector=new Pc(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(f=>a+f))}Un(e){let t=0;return this.Ln(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(a,f)=>t(f))}addReference(e,t,a){return gd(e,a)}removeReference(e,t,a){return gd(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return gd(e,t)}Gn(e,t){return function(a,f){let y=!1;return mh(a).tt(T=>gh(a,T,f).next(x=>(x&&(y=!0),Ot.resolve(!x)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let y=0;return this.Kn(e,(T,x)=>{if(x<=t){const Q=this.Gn(e,T).next(re=>{if(!re)return y++,a.getEntry(e,T).next(()=>(a.removeEntry(T,Mn.min()),Au(e).delete([0,lo(T.path)])))});f.push(Q)}}).next(()=>Ot.waitFor(f)).next(()=>a.apply(e)).next(()=>y)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return gd(e,t)}Kn(e,t){const a=Au(e);let f,y=R.at;return a.Z({index:"documentTargetsIndex"},([T,x],{path:Q,sequenceNumber:re})=>{0===T?(y!==R.at&&t(new vn(Cu(f)),y),y=re,f=Q):y=R.at}).next(()=>{y!==R.at&&t(new vn(Cu(f)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gd(i,e){return Au(i).put((a=i.currentSequenceNumber,{targetId:0,path:lo(e.path),sequenceNumber:a}));var a}class Ld{constructor(){this.changes=new Gu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Js.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?Ot.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vh{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Bd(e).put(a)}removeEntry(e,t,a){return Bd(e).delete(function(f,y){const T=f.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],fl(y),T[T.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Qn(e,a)))}getEntry(e,t){let a=Js.newInvalidDocument(t);return Bd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(f,y)=>{a=this.jn(t,y)}).next(()=>a)}Wn(e,t){let a={size:0,document:Js.newInvalidDocument(t)};return Bd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(f,y)=>{a={document:this.jn(t,y),size:fd(y)}}).next(()=>a)}getEntries(e,t){let a=Oo();return this.zn(e,t,(f,y)=>{const T=this.jn(f,y);a=a.insert(f,T)}).next(()=>a)}Hn(e,t){let a=Oo(),f=new ao(vn.comparator);return this.zn(e,t,(y,T)=>{const x=this.jn(y,T);a=a.insert(y,x),f=f.insert(y,fd(T))}).next(()=>({documents:a,Jn:f}))}zn(e,t,a){if(t.isEmpty())return Ot.resolve();let f=new ls(yy);t.forEach(Q=>f=f.add(Q));const y=IDBKeyRange.bound(Vd(f.first()),Vd(f.last())),T=f.getIterator();let x=T.getNext();return Bd(e).Z({index:"documentKeyIndex",range:y},(Q,re,me)=>{const Ke=vn.fromSegments([...re.prefixPath,re.collectionGroup,re.documentId]);for(;x&&yy(x,Ke)<0;)a(x,null),x=T.getNext();x&&x.isEqual(Ke)&&(a(x,re),x=T.hasNext()?T.getNext():null),x?me.j(Vd(x)):me.done()}).next(()=>{for(;x;)a(x,null),x=T.hasNext()?T.getNext():null})}getAllFromCollection(e,t,a){const f=[t.popLast().toArray(),t.lastSegment(),fl(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],y=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bd(e).W(IDBKeyRange.bound(f,y,!0)).next(T=>{let x=Oo();for(const Q of T){const re=this.jn(vn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);x=x.insert(re.key,re)}return x})}getAllFromCollectionGroup(e,t,a,f){let y=Oo();const T=P_(t,a),x=P_(t,ha.max());return Bd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(T,x,!0)},(Q,re,me)=>{const Ke=this.jn(vn.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);y=y.insert(Ke.key,Ke),y.size===f&&me.done()}).next(()=>y)}newChangeBuffer(e){return new ec(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xl(e).get("remoteDocumentGlobalKey").next(t=>(wn(!!t),t))}Qn(e,t){return Xl(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const a=function dd(i,e){let t;if(e.document)t=dh(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=vn.fromSegments(e.noDocument.path),f=Pd(e.noDocument.readTime);t=Js.newNoDocument(a,f),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dn();{const a=vn.fromSegments(e.unknownDocument.path),f=Pd(e.unknownDocument.version);t=Js.newUnknownDocument(a,f)}}return e.readTime&&t.setReadTime(function(a){const f=new Qi(a[0],a[1]);return Mn.fromTimestamp(f)}(e.readTime)),t}(this.yt,t);if(!a.isNoDocument()||!a.version.isEqual(Mn.min()))return a}return Js.newInvalidDocument(e)}}function Kh(i){return new vh(i)}class ec extends Ld{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Gu(a=>a.toString(),(a,f)=>a.isEqual(f))}applyChanges(e){const t=[];let a=0,f=new ls((y,T)=>_r(y.canonicalString(),T.canonicalString()));return this.changes.forEach((y,T)=>{const x=this.Xn.get(y);if(t.push(this.Yn.removeEntry(e,y,x.readTime)),T.isValidDocument()){const Q=$a(this.Yn.yt,T);f=f.add(y.path.popLast()),a+=fd(Q)-x.size,t.push(this.Yn.addEntry(e,y,Q))}else if(a-=x.size,this.trackRemovals){const Q=$a(this.Yn.yt,T.convertToNoDocument(Mn.min()));t.push(this.Yn.addEntry(e,y,Q))}}),f.forEach(y=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Yn.updateMetadata(e,a)),Ot.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(a=>(this.Xn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:a,Jn:f})=>(f.forEach((y,T)=>{this.Xn.set(y,{size:T,readTime:a.get(y).readTime})}),a))}}function Xl(i){return Ci(i,"remoteDocumentGlobal")}function Bd(i){return Ci(i,"remoteDocumentsV14")}function Vd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P_(i,e){const t=e.documentKey.path.toArray();return[i,fl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yy(i,e){const t=i.path.toArray(),a=e.path.toArray();let f=0;for(let y=0;y<t.length-2&&y<a.length-2;++y)if(f=_r(t[y],a[y]),f)return f;return f=_r(t.length,a.length),f||(f=_r(t[t.length-2],a[a.length-2]),f||_r(t[t.length-1],a[a.length-1]))}class k_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vy{constructor(e,t,a,f){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=f}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(f=>(a=f,this.remoteDocumentCache.getEntry(e,t))).next(f=>(null!==a&&ed(a.mutation,f,Il.empty(),Qi.now()),f))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Jr()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Jr()){const f=Zl();return this.populateOverlays(e,f,t).next(()=>this.computeViews(e,t,f,a).next(y=>{let T=td();return y.forEach((x,Q)=>{T=T.insert(x,Q.overlayedDocument)}),T}))}getOverlayedDocuments(e,t){const a=Zl();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Jr()))}populateOverlays(e,t,a){const f=[];return a.forEach(y=>{t.has(y)||f.push(y)}),this.documentOverlayCache.getOverlays(e,f).next(y=>{y.forEach((T,x)=>{t.set(T,x)})})}computeViews(e,t,a,f){let y=Oo();const T=nd(),x=nd();return t.forEach((Q,re)=>{const me=a.get(re.key);f.has(re.key)&&(void 0===me||me.mutation instanceof wu)?y=y.insert(re.key,re):void 0!==me&&(T.set(re.key,me.mutation.getFieldMask()),ed(me.mutation,re,me.mutation.getFieldMask(),Qi.now()))}),this.recalculateAndSaveOverlays(e,y).next(Q=>(Q.forEach((re,me)=>T.set(re,me)),t.forEach((re,me)=>{var Ke;return x.set(re,new k_(me,null!==(Ke=T.get(re))&&void 0!==Ke?Ke:null))}),x))}recalculateAndSaveOverlays(e,t){const a=nd();let f=new ao((T,x)=>T-x),y=Jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(T=>{for(const x of T)x.keys().forEach(Q=>{const re=t.get(Q);if(null===re)return;let me=a.get(Q)||Il.empty();me=x.applyToLocalView(re,me),a.set(Q,me);const Ke=(f.get(x.batchId)||Jr()).add(Q);f=f.insert(x.batchId,Ke)})}).next(()=>{const T=[],x=f.getReverseIterator();for(;x.hasNext();){const Q=x.getNext(),re=Q.key,me=Q.value,Ke=Ic();me.forEach(It=>{if(!y.has(It)){const Xt=Dc(t.get(It),a.get(It));null!==Xt&&Ke.set(It,Xt),y=y.add(It)}}),T.push(this.documentOverlayCache.saveOverlays(e,re,Ke))}return Ot.waitFor(T)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return vn.isDocumentKey((f=t).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var f}getNextDocuments(e,t,a,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,f).next(y=>{const T=f-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,f-y.size):Ot.resolve(Zl());let x=-1,Q=y;return T.next(re=>Ot.forEach(re,(me,Ke)=>(x<Ke.largestBatchId&&(x=Ke.largestBatchId),y.get(me)?Ot.resolve():this.remoteDocumentCache.getEntry(e,me).next(It=>{Q=Q.insert(me,It)}))).next(()=>this.populateOverlays(e,re,y)).next(()=>this.computeViews(e,Q,re,Jr())).next(me=>({batchId:x,changes:Wu(me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vn(t)).next(a=>{let f=td();return a.isFoundDocument()&&(f=f.insert(a.key,a)),f})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const f=t.collectionGroup;let y=td();return this.indexManager.getCollectionParents(e,f).next(T=>Ot.forEach(T,x=>{const Q=(re=t,me=x.child(f),new ul(me,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));var re,me;return this.getDocumentsMatchingCollectionQuery(e,Q,a).next(re=>{re.forEach((me,Ke)=>{y=y.insert(me,Ke)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,a){let f;return this.remoteDocumentCache.getAllFromCollection(e,t.path,a).next(y=>(f=y,this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId))).next(y=>{y.forEach((x,Q)=>{const re=Q.getKey();null===f.get(re)&&(f=f.insert(re,Js.newInvalidDocument(re)))});let T=td();return f.forEach((x,Q)=>{const re=y.get(x);void 0!==re&&ed(re.mutation,Q,Il.empty(),Qi.now()),Ro(t,Q)&&(T=T.insert(x,Q))}),T})}}class F_{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ot.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var a;return this.Zn.set(t.id,{id:(a=t).id,version:a.version,createTime:Ks(a.createTime)}),Ot.resolve()}getNamedQuery(e,t){return Ot.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(a=t).name,query:p(a.bundledQuery),readTime:Ks(a.readTime)}),Ot.resolve();var a}}class pv{constructor(){this.overlays=new ao(vn.comparator),this.es=new Map}getOverlay(e,t){return Ot.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Zl();return Ot.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&a.set(f,y)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((f,y)=>{this.oe(e,t,y)}),Ot.resolve()}removeOverlaysForBatchId(e,t,a){const f=this.es.get(a);return void 0!==f&&(f.forEach(y=>this.overlays=this.overlays.remove(y)),this.es.delete(a)),Ot.resolve()}getOverlaysForCollection(e,t,a){const f=Zl(),y=t.length+1,T=new vn(t.child("")),x=this.overlays.getIteratorFrom(T);for(;x.hasNext();){const Q=x.getNext().value,re=Q.getKey();if(!t.isPrefixOf(re.path))break;re.path.length===y&&Q.largestBatchId>a&&f.set(Q.getKey(),Q)}return Ot.resolve(f)}getOverlaysForCollectionGroup(e,t,a,f){let y=new ao((re,me)=>re-me);const T=this.overlays.getIterator();for(;T.hasNext();){const re=T.getNext().value;if(re.getKey().getCollectionGroup()===t&&re.largestBatchId>a){let me=y.get(re.largestBatchId);null===me&&(me=Zl(),y=y.insert(re.largestBatchId,me)),me.set(re.getKey(),re)}}const x=Zl(),Q=y.getIterator();for(;Q.hasNext()&&(Q.getNext().value.forEach((re,me)=>x.set(re,me)),!(x.size()>=f)););return Ot.resolve(x)}oe(e,t,a){const f=this.overlays.get(a.key);if(null!==f){const T=this.es.get(f.largestBatchId).delete(a.key);this.es.set(f.largestBatchId,T)}this.overlays=this.overlays.insert(a.key,new zh(t,a));let y=this.es.get(t);void 0===y&&(y=Jr(),this.es.set(t,y)),this.es.set(t,y.add(a.key))}}class Rg{constructor(){this.ns=new ls(gl.ss),this.rs=new ls(gl.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const a=new gl(e,t);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.cs(new gl(e,t))}hs(e,t){e.forEach(a=>this.removeReference(a,t))}ls(e){const t=new vn(new ti([])),a=new gl(t,e),f=new gl(t,e+1),y=[];return this.rs.forEachInRange([a,f],T=>{this.cs(T),y.push(T.key)}),y}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new vn(new ti([])),a=new gl(t,e),f=new gl(t,e+1);let y=Jr();return this.rs.forEachInRange([a,f],T=>{y=y.add(T.key)}),y}containsKey(e){const t=new gl(e,0),a=this.ns.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class gl{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return vn.comparator(e.key,t.key)||_r(e._s,t._s)}static os(e,t){return _r(e._s,t._s)||vn.comparator(e.key,t.key)}}class L_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ls(gl.ss)}checkEmpty(e){return Ot.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,f){const y=this.ws;this.ws++;const T=new Wh(y,t,a,f);this.mutationQueue.push(T);for(const x of f)this.gs=this.gs.add(new gl(x.key,y)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ot.resolve(T)}lookupMutationBatch(e,t){return Ot.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const f=this.ps(t+1),y=f<0?0:f;return Ot.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return Ot.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new gl(t,0),f=new gl(t,Number.POSITIVE_INFINITY),y=[];return this.gs.forEachInRange([a,f],T=>{const x=this.ys(T._s);y.push(x)}),Ot.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new ls(_r);return t.forEach(f=>{const y=new gl(f,0),T=new gl(f,Number.POSITIVE_INFINITY);this.gs.forEachInRange([y,T],x=>{a=a.add(x._s)})}),Ot.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,f=a.length+1;let y=a;vn.isDocumentKey(y)||(y=y.child(""));const T=new gl(new vn(y),0);let x=new ls(_r);return this.gs.forEachWhile(Q=>{const re=Q.key.path;return!!a.isPrefixOf(re)&&(re.length===f&&(x=x.add(Q._s)),!0)},T),Ot.resolve(this.Is(x))}Is(e){const t=[];return e.forEach(a=>{const f=this.ys(a);null!==f&&t.push(f)}),t}removeMutationBatch(e,t){wn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return Ot.forEach(t.mutations,f=>{const y=new gl(f.key,t.batchId);return a=a.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,t){const a=new gl(t,0),f=this.gs.firstAfterOrEqual(a);return Ot.resolve(t.isEqual(f&&f.key))}performConsistencyCheck(e){return Ot.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class by{constructor(e){this.Es=e,this.docs=new ao(vn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,f=this.docs.get(a),y=f?f.size:0,T=this.Es(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:T}),this.size+=T-y,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Ot.resolve(a?a.document.mutableCopy():Js.newInvalidDocument(t))}getEntries(e,t){let a=Oo();return t.forEach(f=>{const y=this.docs.get(f);a=a.insert(f,y?y.document.mutableCopy():Js.newInvalidDocument(f))}),Ot.resolve(a)}getAllFromCollection(e,t,a){let f=Oo();const y=new vn(t.child("")),T=this.docs.getIteratorFrom(y);for(;T.hasNext();){const{key:x,value:{document:Q}}=T.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||gc(pc(Q),a)<=0||(f=f.insert(Q.key,Q.mutableCopy()))}return Ot.resolve(f)}getAllFromCollectionGroup(e,t,a,f){dn()}As(e,t){return Ot.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new B_(this)}getSize(e){return Ot.resolve(this.size)}}class B_ extends Ld{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((a,f)=>{f.isValidDocument()?t.push(this.Yn.addEntry(e,f)):this.Yn.removeEntry(a)}),Ot.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class tc{constructor(e){this.persistence=e,this.Rs=new Gu(t=>Uu(t),ah),this.lastRemoteSnapshotVersion=Mn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rg,this.targetCount=0,this.vs=rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((a,f)=>t(f)),Ot.resolve()}getLastRemoteSnapshotVersion(e){return Ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ot.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ot.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.bs&&(this.bs=t),Ot.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ot.resolve()}updateTargetData(e,t){return this.Dn(t),Ot.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ot.resolve()}removeTargets(e,t,a){let f=0;const y=[];return this.Rs.forEach((T,x)=>{x.sequenceNumber<=t&&null===a.get(x.targetId)&&(this.Rs.delete(T),y.push(this.removeMatchingKeysForTargetId(e,x.targetId)),f++)}),Ot.waitFor(y).next(()=>f)}getTargetCount(e){return Ot.resolve(this.targetCount)}getTargetData(e,t){const a=this.Rs.get(t)||null;return Ot.resolve(a)}addMatchingKeys(e,t,a){return this.Ps.us(t,a),Ot.resolve()}removeMatchingKeys(e,t,a){this.Ps.hs(t,a);const f=this.persistence.referenceDelegate,y=[];return f&&t.forEach(T=>{y.push(f.markPotentiallyOrphaned(e,T))}),Ot.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ot.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Ps.ds(t);return Ot.resolve(a)}containsKey(e,t){return Ot.resolve(this.Ps.containsKey(t))}}class Mg{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new R(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new tc(this),this.indexManager=new hd,this.remoteDocumentCache=new by(a=>this.referenceDelegate.xs(a)),this.yt=new Ag(t),this.Ns=new F_(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Vs[e.toKey()];return a||(a=new L_(t,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,a){rn("MemoryPersistence","Starting transaction:",e);const f=new pp(this.Ss.next());return this.referenceDelegate.ks(),a(f).next(y=>this.referenceDelegate.Os(f).next(()=>y)).toPromise().then(y=>(f.raiseOnCommittedEvent(),y))}Ms(e,t){return Ot.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,t)))}}class pp extends au{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.Fs=new Rg,this.$s=null}static Bs(e){return new qh(e)}get Ls(){if(this.$s)return this.$s;throw dn()}addReference(e,t,a){return this.Fs.addReference(a,t),this.Ls.delete(a.toString()),Ot.resolve()}removeReference(e,t,a){return this.Fs.removeReference(a,t),this.Ls.add(a.toString()),Ot.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ot.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(f=>this.Ls.add(f.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(f=>{f.forEach(y=>this.Ls.add(y.toString()))}).next(()=>a.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ot.forEach(this.Ls,a=>{const f=vn.fromPath(a);return this.qs(e,f).next(y=>{y||t.removeEntry(f,Mn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(a=>{a?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ot.or([()=>Ot.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Mm{constructor(e){this.yt=e}$(e,t,a,f){const y=new Pl("createOrUpgrade",t);var x;a<1&&f>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ap,{unique:!0}),x.createObjectStore("documentMutations"),Om(e),function(x){x.createObjectStore("remoteDocuments")}(e));let T=Ot.resolve();return a<3&&f>=3&&(0!==a&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Om(e)),T=T.next(()=>function(x){const Q=x.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mn.min().toTimestamp(),targetCount:0};return Q.put("targetGlobalKey",re)}(y))),a<4&&f>=4&&(0!==a&&(T=T.next(()=>function(x,Q){return Q.store("mutations").W().next(re=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ap,{unique:!0});const me=Q.store("mutations"),Ke=re.map(It=>me.put(It));return Ot.waitFor(Ke)})}(e,y))),T=T.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&f>=5&&(T=T.next(()=>this.Us(y))),a<6&&f>=6&&(T=T.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(y)))),a<7&&f>=7&&(T=T.next(()=>this.Gs(y))),a<8&&f>=8&&(T=T.next(()=>this.Qs(e,y))),a<9&&f>=9&&(T=T.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&f>=10&&(T=T.next(()=>this.js(y))),a<11&&f>=11&&(T=T.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&f>=12&&(T=T.next(()=>{!function(x){const Q=x.createObjectStore("documentOverlays",{keyPath:Am});Q.createIndex("collectionPathOverlayIndex",Nm,{unique:!1}),Q.createIndex("collectionGroupOverlayIndex",Rm,{unique:!1})}(e)})),a<13&&f>=13&&(T=T.next(()=>function(x){const Q=x.createObjectStore("remoteDocumentsV14",{keyPath:Tg});Q.createIndex("documentKeyIndex",Cg),Q.createIndex("collectionGroupIndex",lp)}(e)).next(()=>this.Ws(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&f>=14&&(T=T.next(()=>this.zs(e,y))),a<15&&f>=15&&(T=T.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:up}).createIndex("sequenceNumberIndex",O_,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:x_}).createIndex("documentKeyIndex",Ef,{unique:!1})}(e))),T}Ks(e){let t=0;return e.store("remoteDocuments").Z((a,f)=>{t+=fd(f)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Us(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.W().next(f=>Ot.forEach(f,y=>{const T=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",T).next(x=>Ot.forEach(x,Q=>{wn(Q.userId===y.userId);const re=kd(this.yt,Q);return Qu(e,y.userId,re).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const y=[];return a.Z((T,x)=>{const Q=new ti(T),re=[0,lo(Q)];y.push(t.get(re).next(me=>me?Ot.resolve():t.put({targetId:0,path:lo(Q),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>Ot.waitFor(y))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:wf});const a=t.store("collectionParents"),f=new Ga,y=T=>{if(f.add(T)){const x=T.lastSegment(),Q=T.popLast();return a.put({collectionId:x,parent:lo(Q)})}};return t.store("remoteDocuments").Z({X:!0},(T,x)=>{const Q=new ti(T);return y(Q.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([T,x,Q],re)=>{const me=Cu(x);return y(me.popLast())}))}js(e){const t=e.store("targets");return t.Z((a,f)=>{const y=m(f),T=w(this.yt,y);return t.put(T)})}Ws(e,t){const a=t.store("remoteDocuments"),f=[];return a.Z((y,T)=>{const x=t.store("remoteDocumentsV14"),Q=(re=T,re.document?new vn(ti.fromString(re.document.name).popFirst(5)):re.noDocument?vn.fromSegments(re.noDocument.path):re.unknownDocument?vn.fromSegments(re.unknownDocument.path):dn()).path.toArray();var re;const me={prefixPath:Q.slice(0,Q.length-2),collectionGroup:Q[Q.length-2],documentId:Q[Q.length-1],readTime:T.readTime||[0,0],unknownDocument:T.unknownDocument,noDocument:T.noDocument,document:T.document,hasCommittedMutations:!!T.hasCommittedMutations};f.push(x.put(me))}).next(()=>Ot.waitFor(f))}zs(e,t){const a=t.store("mutations"),f=Kh(this.yt),y=new Mg(qh.Bs,this.yt.ie);return a.W().next(T=>{const x=new Map;return T.forEach(Q=>{var re;let me=null!==(re=x.get(Q.userId))&&void 0!==re?re:Jr();kd(this.yt,Q).keys().forEach(Ke=>me=me.add(Ke)),x.set(Q.userId,me)}),Ot.forEach(x,(Q,re)=>{const me=new io(re),Ke=Lt.re(this.yt,me),It=y.getIndexManager(me),Xt=Ju.re(me,this.yt,It,y.referenceDelegate);return new vy(f,Xt,Ke,It).recalculateAndSaveOverlaysForDocumentKeys(new hp(t,R.at),Q).next()})})}}function Om(i){i.createObjectStore("targetDocuments",{keyPath:M_}).createIndex("documentTargetsIndex",Sm,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",R_,{unique:!0}),i.createObjectStore("targetGlobal")}const Tf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gp{constructor(e,t,a,f,y,T,x,Q,re,me,Ke=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Hs=y,this.window=T,this.document=x,this.Js=re,this.Ys=me,this.Xs=Ke,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=It=>Promise.resolve(),!gp.C())throw new Zt(Pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zo(this,f),this.ii=t+"main",this.yt=new Ag(Q),this.ri=new Ti(this.ii,this.Xs,new Mm(this.yt)),this.Cs=new Ng(this.referenceDelegate,this.yt),this.remoteDocumentCache=Kh(this.yt),this.Ns=new Re,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===me&&Ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(Pt.FAILED_PRECONDITION,Tf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new R(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var a=(0,je.Z)(function*(f){if(t.started)return e(f)});return function(f){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,je.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,je.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Og(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ja(e))return rn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return mp(e).get("owner").next(t=>Ot.resolve(this.mi(t)))}gi(e){return Og(e).delete(this.clientId)}yi(){var e=this;return(0,je.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const f=Ci(a,"clientMetadata");return f.W().next(y=>{const T=e.Ii(y,18e5),x=y.filter(Q=>-1===T.indexOf(Q));return Ot.forEach(x,Q=>f.delete(Q.clientId)).next(()=>x)})}).catch(()=>[]);if(e.oi)for(const a of t)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ot.resolve(!0):mp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Zt(Pt.FAILED_PRECONDITION,Tf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Og(e).W().next(a=>void 0===this.Ii(a,5e3).find(f=>{if(this.clientId!==f.clientId){const T=!this.inForeground&&f.inForeground,x=this.networkEnabled===f.networkEnabled;if(!this.networkEnabled&&f.networkEnabled||T&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&rn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,je.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new hp(t,R.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(a=>this.pi(a.updateTimeMs,t)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Og(e).W().next(t=>this.Ii(t,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ju.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fh(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Lt.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,a){rn("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===t?"readonly":"readwrite",y=15===(T=this.Xs)?dp:14===T?Sg:13===T?Df:12===T?cp:11===T?Ig:void dn();var T;let x;return this.ri.runTransaction(e,f,y,Q=>(x=new hp(Q,this.Ss?this.Ss.next():R.at),"readwrite-primary"===t?this.fi(x).next(re=>!!re||this.di(x)).next(re=>{if(!re)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Zt(Pt.FAILED_PRECONDITION,qc);return a(x)}).next(re=>this.wi(x).next(()=>re)):this.Vi(x).next(()=>a(x)))).then(Q=>(x.raiseOnCommittedEvent(),Q))}Vi(e){return mp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(Pt.FAILED_PRECONDITION,Tf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mp(e).put("owner",t)}static C(){return Ti.C()}_i(e){const t=mp(e);return t.get("owner").next(a=>this.mi(a)?(rn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ot.resolve())}pi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Ki(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ze.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const a=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rn("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Ki("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mp(i){return Ci(i,"owner")}function Og(i){return Ci(i,"clientMetadata")}function xg(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class ri{constructor(e,t,a,f){this.targetId=e,this.fromCache=t,this.Si=a,this.Di=f}static Ci(e,t){let a=Jr(),f=Jr();for(const y of t.docChanges)switch(y.type){case 0:a=a.add(y.doc.key);break;case 1:f=f.add(y.doc.key)}return new ri(e,t.fromCache,a,f)}}class xm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,a,f){return this.ki(e,t).next(y=>y||this.Oi(e,t,f,a)).next(y=>y||this.Mi(e,t))}ki(e,t){if(ql(t))return Ot.resolve(null);let a=Jo(t);return this.indexManager.getIndexType(e,a).next(f=>0===f?null:(null!==t.limit&&1===f&&(t=Os(t,null,"F"),a=Jo(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(y=>{const T=Jr(...y);return this.Ni.getDocuments(e,T).next(x=>this.indexManager.getMinOffset(e,a).next(Q=>{const re=this.Fi(t,x);return this.$i(t,re,T,Q.readTime)?this.ki(e,Os(t,null,"F")):this.Bi(e,re,t,Q)}))})))}Oi(e,t,a,f){return ql(t)||f.isEqual(Mn.min())?this.Mi(e,t):this.Ni.getDocuments(e,a).next(y=>{const T=this.Fi(t,y);return this.$i(t,T,a,f)?this.Mi(e,t):(Ca()<=qe.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),wc(t)),this.Bi(e,T,t,Lu(f,-1)))})}Fi(e,t){let a=new ls(N(e));return t.forEach((f,y)=>{Ro(e,y)&&(a=a.add(y))}),a}$i(e,t,a,f){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(f)>0)}Mi(e,t){return Ca()<=qe.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",wc(t)),this.Ni.getDocumentsMatchingQuery(e,t,ha.min())}Bi(e,t,a,f){return this.Ni.getDocumentsMatchingQuery(e,a,f).next(y=>(t.forEach(T=>{y=y.insert(T.key,T)}),y))}}class V_{constructor(e,t,a,f){this.persistence=e,this.Li=t,this.yt=f,this.qi=new ao(_r),this.Ui=new Gu(y=>Uu(y),ah),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function eo(i,e,t,a){return new V_(i,e,t,a)}function U_(i,e){return _p.apply(this,arguments)}function _p(){return _p=(0,je.Z)(function*(i,e){const t=yn(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let f;return t.mutationQueue.getAllMutationBatches(a).next(y=>(f=y,t.Qi(e),t.mutationQueue.getAllMutationBatches(a))).next(y=>{const T=[],x=[];let Q=Jr();for(const re of f){T.push(re.batchId);for(const me of re.mutations)Q=Q.add(me.key)}for(const re of y){x.push(re.batchId);for(const me of re.mutations)Q=Q.add(me.key)}return t.localDocuments.getDocuments(a,Q).next(re=>({ji:re,removedBatchIds:T,addedBatchIds:x}))})})}),_p.apply(this,arguments)}function Pm(i,e){const t=yn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const f=e.batch.keys(),y=t.Gi.newChangeBuffer({trackRemovals:!0});return function(T,x,Q,re){const me=Q.batch,Ke=me.keys();let It=Ot.resolve();return Ke.forEach(Xt=>{It=It.next(()=>re.getEntry(x,Xt)).next(on=>{const Yn=Q.docVersions.get(Xt);wn(null!==Yn),on.version.compareTo(Yn)<0&&(me.applyToRemoteDocument(on,Q),on.isValidDocument()&&(on.setReadTime(Q.commitVersion),re.addEntry(on)))})}),It.next(()=>T.mutationQueue.removeMutationBatch(x,me))}(t,a,e,y).next(()=>y.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,f,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(T){let x=Jr();for(let Q=0;Q<T.mutationResults.length;++Q)T.mutationResults[Q].transformResults.length>0&&(x=x.add(T.batch.mutations[Q].key));return x}(e))).next(()=>t.localDocuments.getDocuments(a,f))})}function km(i){const e=yn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Fm(i,e){const t=yn(i),a=e.snapshotVersion;let f=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const T=t.Gi.newChangeBuffer({trackRemovals:!0});f=t.qi;const x=[];e.targetChanges.forEach((me,Ke)=>{const It=f.get(Ke);if(!It)return;x.push(t.Cs.removeMatchingKeys(y,me.removedDocuments,Ke).next(()=>t.Cs.addMatchingKeys(y,me.addedDocuments,Ke)));let Xt=It.withSequenceNumber(y.currentSequenceNumber);var on,Yn,yr;e.targetMismatches.has(Ke)?Xt=Xt.withResumeToken(_n.EMPTY_BYTE_STRING,Mn.min()).withLastLimboFreeSnapshotVersion(Mn.min()):me.resumeToken.approximateByteSize()>0&&(Xt=Xt.withResumeToken(me.resumeToken,a)),f=f.insert(Ke,Xt),Yn=Xt,yr=me,(0===(on=It).resumeToken.approximateByteSize()||Yn.snapshotVersion.toMicroseconds()-on.snapshotVersion.toMicroseconds()>=3e8||yr.addedDocuments.size+yr.modifiedDocuments.size+yr.removedDocuments.size>0)&&x.push(t.Cs.updateTargetData(y,Xt))});let Q=Oo(),re=Jr();if(e.documentUpdates.forEach(me=>{e.resolvedLimboDocuments.has(me)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(y,me))}),x.push(Lm(y,T,e.documentUpdates).next(me=>{Q=me.Wi,re=me.zi})),!a.isEqual(Mn.min())){const me=t.Cs.getLastRemoteSnapshotVersion(y).next(Ke=>t.Cs.setTargetsMetadata(y,y.currentSequenceNumber,a));x.push(me)}return Ot.waitFor(x).next(()=>T.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,Q,re)).next(()=>Q)}).then(y=>(t.qi=f,y))}function Lm(i,e,t){let a=Jr(),f=Jr();return t.forEach(y=>a=a.add(y)),e.getEntries(i,a).next(y=>{let T=Oo();return t.forEach((x,Q)=>{const re=y.get(x);Q.isFoundDocument()!==re.isFoundDocument()&&(f=f.add(x)),Q.isNoDocument()&&Q.version.isEqual(Mn.min())?(e.removeEntry(x,Q.readTime),T=T.insert(x,Q)):!re.isValidDocument()||Q.version.compareTo(re.version)>0||0===Q.version.compareTo(re.version)&&re.hasPendingWrites?(e.addEntry(Q),T=T.insert(x,Q)):rn("LocalStore","Ignoring outdated watch update for ",x,". Current version:",re.version," Watch version:",Q.version)}),{Wi:T,zi:f}})}function H_(i,e){const t=yn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Cf(i,e){const t=yn(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let f;return t.Cs.getTargetData(a,e).next(y=>y?(f=y,Ot.resolve(f)):t.Cs.allocateTargetId(a).next(T=>(f=new Nc(e,T,0,a.currentSequenceNumber),t.Cs.addTargetData(a,f).next(()=>f))))}).then(a=>{const f=t.qi.get(a.targetId);return(null===f||a.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(t.qi=t.qi.insert(a.targetId,a),t.Ui.set(e,a.targetId)),a})}function bh(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,je.Z)(function*(i,e,t){const a=yn(i),f=a.qi.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",y,T=>a.persistence.referenceDelegate.removeTarget(T,f)))}catch(T){if(!Ja(T))throw T;rn("LocalStore",`Failed to update sequence numbers for target ${e}: ${T}`)}a.qi=a.qi.remove(e),a.Ui.delete(f.target)}),yp.apply(this,arguments)}function kc(i,e,t){const a=yn(i);let f=Mn.min(),y=Jr();return a.persistence.runTransaction("Execute query","readonly",T=>function(x,Q,re){const me=yn(x),Ke=me.Ui.get(re);return void 0!==Ke?Ot.resolve(me.qi.get(Ke)):me.Cs.getTargetData(Q,re)}(a,T,Jo(e)).next(x=>{if(x)return f=x.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(T,x.targetId).next(Q=>{y=Q})}).next(()=>a.Li.getDocumentsMatchingQuery(T,e,t?f:Mn.min(),t?y:Jr())).next(x=>(vp(a,Dd(e),x),{documents:x,Hi:y})))}function Bm(i,e){const t=yn(i),a=yn(t.Cs),f=t.qi.get(e);return f?Promise.resolve(f.target):t.persistence.runTransaction("Get target data","readonly",y=>a.ne(y,e).next(T=>T?T.target:null))}function Pg(i,e){const t=yn(i),a=t.Ki.get(e)||Mn.min();return t.persistence.runTransaction("Get new document changes","readonly",f=>t.Gi.getAllFromCollectionGroup(f,e,Lu(a,-1),Number.MAX_SAFE_INTEGER)).then(f=>(vp(t,e,f),f))}function vp(i,e,t){let a=i.Ki.get(e)||Mn.min();t.forEach((f,y)=>{y.readTime.compareTo(a)>0&&(a=y.readTime)}),i.Ki.set(e,a)}function Vm(){return Vm=(0,je.Z)(function*(i,e,t,a){const f=yn(i);let y=Jr(),T=Oo();for(const re of t){const me=e.Ji(re.metadata.name);re.document&&(y=y.add(me));const Ke=e.Yi(re);Ke.setReadTime(e.Xi(re.metadata.readTime)),T=T.insert(me,Ke)}const x=f.Gi.newChangeBuffer({trackRemovals:!0}),Q=yield Cf(f,(re=a,Jo(jo(ti.fromString(`__bundle__/docs/${re}`)))));var re;return f.persistence.runTransaction("Apply bundle documents","readwrite",re=>Lm(re,x,T).next(me=>(x.apply(re),me)).next(me=>f.Cs.removeMatchingKeysForTargetId(re,Q.targetId).next(()=>f.Cs.addMatchingKeys(re,y,Q.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(re,me.Wi,me.zi)).next(()=>me.Wi)))}),Vm.apply(this,arguments)}function wy(i,e){return Um.apply(this,arguments)}function Um(){return Um=(0,je.Z)(function*(i,e,t=Jr()){const a=yield Cf(i,Jo(p(e.bundledQuery))),f=yn(i);return f.persistence.runTransaction("Save named query","readwrite",y=>{const T=Ks(e.readTime);if(a.snapshotVersion.compareTo(T)>=0)return f.Ns.saveNamedQuery(y,e);const x=a.withResumeToken(_n.EMPTY_BYTE_STRING,T);return f.qi=f.qi.insert(x.targetId,x),f.Cs.updateTargetData(y,x).next(()=>f.Cs.removeMatchingKeysForTargetId(y,a.targetId)).next(()=>f.Cs.addMatchingKeys(y,t,a.targetId)).next(()=>f.Ns.saveNamedQuery(y,e))})}),Um.apply(this,arguments)}function Hm(i,e){return`firestore_clients_${i}_${e}`}function kg(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function jm(i,e){return`firestore_targets_${i}_${e}`}class bp{constructor(e,t,a,f){this.user=e,this.batchId=t,this.state=a,this.error=f}static Zi(e,t,a){const f=JSON.parse(a);let y,T="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return T&&f.error&&(T="string"==typeof f.error.message&&"string"==typeof f.error.code,T&&(y=new Zt(f.error.code,f.error.message))),T?new bp(e,t,f.state,y):(Ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fc{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Zi(e,t){const a=JSON.parse(t);let f,y="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return y&&a.error&&(y="string"==typeof a.error.message&&"string"==typeof a.error.code,y&&(f=new Zt(a.error.code,a.error.message))),y?new Fc(e,a.state,f):(Ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const a=JSON.parse(t);let f="object"==typeof a&&a.activeTargetIds instanceof Array,y=Ku();for(let T=0;f&&T<a.activeTargetIds.length;++T)f=fn(a.activeTargetIds[T]),y=y.add(a.activeTargetIds[T]);return f?new wp(e,y):(Ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ep{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ep(t.clientId,t.onlineState):(Ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yh{constructor(){this.activeTargetIds=Ku()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fg{constructor(e,t,a,f,y){this.window=e,this.Hs=t,this.persistenceKey=a,this.sr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ao(_r),this.started=!1,this.cr=[];const T=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.ar=Hm(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Yh),this.lr=new RegExp(`^firestore_clients_${T}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${T}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${T}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,je.Z)(function*(){const t=yield e.syncEngine.vi();for(const f of t){if(f===e.sr)continue;const y=e.getItem(Hm(e.persistenceKey,f));if(y){const T=wp.Zi(f,y);T&&(e.ur=e.ur.insert(T.clientId,T))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const f=e.yr(a);f&&e.pr(f)}for(const f of e.cr)e.rr(f);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((a,f)=>{f.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,a){this.Tr(e,t,a),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(jm(this.persistenceKey,e));if(a){const f=Fc.Zi(e,a);f&&(t=f.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jm(this.persistenceKey,e))}updateQueryState(e,t,a){this.Rr(e,t,a)}handleUserChange(e,t,a){t.forEach(f=>{this.Er(f)}),this.currentUser=e,a.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rn("SharedClientState","READ",e,t),t}setItem(e,t){rn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(rn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void Ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,je.Z)(function*(){if(t.started){if(null!==a.key)if(t.lr.test(a.key)){if(null==a.newValue){const f=t.vr(a.key);return t.Vr(f,null)}{const f=t.Sr(a.key,a.newValue);if(f)return t.Vr(f.clientId,f)}}else if(t.dr.test(a.key)){if(null!==a.newValue){const f=t.Dr(a.key,a.newValue);if(f)return t.Cr(f)}}else if(t._r.test(a.key)){if(null!==a.newValue){const f=t.Nr(a.key,a.newValue);if(f)return t.kr(f)}}else if(a.key===t.wr){if(null!==a.newValue){const f=t.yr(a.newValue);if(f)return t.pr(f)}}else if(a.key===t.hr){const f=function(y){let T=R.at;if(null!=y)try{const x=JSON.parse(y);wn("number"==typeof x),T=x}catch(x){Ki("SharedClientState","Failed to read sequence number from WebStorage",x)}return T}(a.newValue);f!==R.at&&t.sequenceNumberHandler(f)}else if(a.key===t.mr){const f=t.Or(a.newValue);yield Promise.all(f.map(y=>t.syncEngine.Mr(y)))}}else t.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,a){const f=new bp(this.currentUser,e,t,a),y=kg(this.persistenceKey,this.currentUser,e);this.setItem(y,f.tr())}Er(e){const t=kg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,a){const f=jm(this.persistenceKey,e),y=new Fc(e,t,a);this.setItem(f,y.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const a=this.vr(e);return wp.Zi(a,t)}Dr(e,t){const a=this.dr.exec(e),f=Number(a[1]);return bp.Zi(new io(void 0!==a[2]?a[2]:null),f,t)}Nr(e,t){const a=this._r.exec(e),f=Number(a[1]);return Fc.Zi(f,t)}yr(e){return Ep.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,je.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);rn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const a=t?this.ur.insert(e,t):this.ur.remove(e),f=this.Ir(this.ur),y=this.Ir(a),T=[],x=[];return y.forEach(Q=>{f.has(Q)||T.push(Q)}),f.forEach(Q=>{y.has(Q)||x.push(Q)}),this.syncEngine.Br(T,x).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ku();return e.forEach((a,f)=>{t=t.unionWith(f.activeTargetIds)}),t}}class Lg{constructor(){this.Lr=new Yh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,a){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Yh,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $_{Ur(e){}shutdown(){}}class $m{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const G_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class z_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,a,f,y){const T=this.ho(e,t);rn("RestConnection","Sending: ",T,a);const x={};return this.lo(x,f,y),this.fo(e,T,x,a).then(Q=>(rn("RestConnection","Received: ",Q),Q),Q=>{throw ol("RestConnection",`${e} failed with error: `,Q,"url: ",T,"request:",a),Q})}_o(e,t,a,f,y,T){return this.ao(e,t,a,f,y)}lo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ds,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((f,y)=>e[y]=f),a&&a.headers.forEach((f,y)=>e[y]=f)}ho(e,t){return`${this.oo}/v1/${t}:${G_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,a,f){return new Promise((y,T)=>{const x=new gu;x.setWithCredentials(!0),x.listenOnce(ou.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case _l.NO_ERROR:const re=x.getResponseJson();rn("Connection","XHR received:",JSON.stringify(re)),y(re);break;case _l.TIMEOUT:rn("Connection",'RPC "'+e+'" timed out'),T(new Zt(Pt.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const me=x.getStatus();if(rn("Connection",'RPC "'+e+'" failed with status:',me,"response text:",x.getResponseText()),me>0){let Ke=x.getResponseJson();Array.isArray(Ke)&&(Ke=Ke[0]);const It=Ke?.error;if(It&&It.status&&It.message){const Xt=function(on){const Yn=on.toLowerCase().replace(/_/g,"-");return Object.values(Pt).indexOf(Yn)>=0?Yn:Pt.UNKNOWN}(It.status);T(new Zt(Xt,It.message))}else T(new Zt(Pt.UNKNOWN,"Server responded with status "+x.getStatus()))}else T(new Zt(Pt.UNAVAILABLE,"Connection failed."));break;default:dn()}}finally{rn("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(f);x.send(t,"POST",Q,a,15)})}wo(e,t,a){const f=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Gl(),T=Pu(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new Oa({})),this.lo(x.initMessageHeaders,t,a),x.encodeInitMessageHeaders=!0;const Q=f.join("");rn("Connection","Creating WebChannel: "+Q,x);const re=y.createWebChannel(Q,x);let me=!1,Ke=!1;const It=new W_({Hr:on=>{Ke?rn("Connection","Not sending because WebChannel is closed:",on):(me||(rn("Connection","Opening WebChannel transport."),re.open(),me=!0),rn("Connection","WebChannel sending:",on),re.send(on))},Jr:()=>re.close()}),Xt=(on,Yn,yr)=>{on.listen(Yn,mo=>{try{yr(mo)}catch(ea){setTimeout(()=>{throw ea},0)}})};return Xt(re,pu.EventType.OPEN,()=>{Ke||rn("Connection","WebChannel transport opened.")}),Xt(re,pu.EventType.CLOSE,()=>{Ke||(Ke=!0,rn("Connection","WebChannel transport closed"),It.io())}),Xt(re,pu.EventType.ERROR,on=>{Ke||(Ke=!0,ol("Connection","WebChannel transport errored:",on),It.io(new Zt(Pt.UNAVAILABLE,"The operation could not be completed")))}),Xt(re,pu.EventType.MESSAGE,on=>{var Yn;if(!Ke){const yr=on.data[0];wn(!!yr);const mo=yr,ea=mo.error||(null===(Yn=mo[0])||void 0===Yn?void 0:Yn.error);if(ea){rn("Connection","WebChannel received error:",ea);const Is=ea.status;let ya=function(js){const va=Mo[js];if(void 0!==va)return Cc(va)}(Is),xs=ea.message;void 0===ya&&(ya=Pt.INTERNAL,xs="Unknown error status: "+Is+" with message "+ea.message),Ke=!0,It.io(new Zt(ya,xs)),re.close()}else rn("Connection","WebChannel received:",yr),It.ro(yr)}}),Xt(T,yl.STAT_EVENT,on=>{on.stat===ca.PROXY?rn("Connection","Detected buffering proxy"):on.stat===ca.NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(()=>{It.so()},0),It}}function Bg(){return typeof window<"u"?window:null}function Dp(){return typeof document<"u"?document:null}function If(i){return new np(i,!0)}class Tp{constructor(e,t,a=1e3,f=1.5,y=6e4){this.Hs=e,this.timerId=t,this.mo=a,this.yo=f,this.po=y,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),f=Math.max(0,t-a);f>0&&rn("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,f,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Cp{constructor(e,t,a,f,y,T,x,Q){this.Hs=e,this.vo=a,this.Vo=f,this.connection=y,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=x,this.listener=Q,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Tp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,je.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,je.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var a=this;return(0,je.Z)(function*(){a.Lo(),a.qo(),a.xo.cancel(),a.So++,4!==e?a.xo.reset():t&&t.code===Pt.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),a.xo.Ao()):t&&t.code===Pt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Uo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,f])=>{this.So===t&&this.Go(a,f)},a=>{e(()=>{const f=new Zt(Pt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.Qo(f)})})}Go(e,t){const a=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{a(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(f=>{a(()=>this.Qo(f))}),this.stream.onMessage(f=>{a(()=>this.onMessage(f))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,je.Z)(function*(){e.state=0,e.start()}))}Qo(e){return rn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ey extends Cp{constructor(e,t,a,f,y,T){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,f,T),this.yt=y}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function yf(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:dn(),f=e.targetChange.targetIds||[],y=function(Q,re){return Q.wt?(wn(void 0===re||"string"==typeof re),_n.fromBase64String(re||"")):(wn(void 0===re||re instanceof Uint8Array),_n.fromUint8Array(re||new Uint8Array))}(i,e.targetChange.resumeToken),T=e.targetChange.cause,x=T&&function(Q){const re=void 0===Q.code?Pt.UNKNOWN:Cc(Q.code);return new Zt(re,Q.message||"")}(T);t=new Ll(a,f,y,x||null)}else if("documentChange"in e){const a=e.documentChange,f=Ql(i,a.document.name),y=Ks(a.document.updateTime),T=a.document.createTime?Ks(a.document.createTime):Mn.min(),x=new Ua({mapValue:{fields:a.document.fields}}),Q=Js.newFoundDocument(f,y,T,x);t=new Nd(a.targetIds||[],a.removedTargetIds||[],Q.key,Q)}else if("documentDelete"in e){const a=e.documentDelete,f=Ql(i,a.document),y=a.readTime?Ks(a.readTime):Mn.min(),T=Js.newNoDocument(f,y);t=new Nd([],a.removedTargetIds||[],T.key,T)}else if("documentRemove"in e){const a=e.documentRemove,f=Ql(i,a.document);t=new Nd([],a.removedTargetIds||[],f,null)}else{if(!("filter"in e))return dn();{const a=e.filter,y=new mf(a.count||0);t=new rd(a.targetId,y)}}var Q;return t}(this.yt,e),a=function(f){if(!("targetChange"in f))return Mn.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?Mn.min():y.readTime?Ks(y.readTime):Mn.min()}(e);return this.listener.Wo(t,a)}zo(e){const t={};t.database=Tu(this.yt),t.addTarget=function(f,y){let T;const x=y.target;return T=lh(x)?{documents:yg(f,x)}:{query:sp(f,x)},T.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?T.resumeToken=sd(f,y.resumeToken):y.snapshotVersion.compareTo(Mn.min())>0&&(T.readTime=Eu(f,y.snapshotVersion.toTimestamp())),T}(this.yt,e);const a=function op(i,e){const t=function(a,f){switch(f){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Bo(t)}Ho(e){const t={};t.database=Tu(this.yt),t.removeTarget=e,this.Bo(t)}}class Sf extends Cp{constructor(e,t,a,f,y,T){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,f,T),this.yt=y,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Od(i,e){return i&&i.length>0?(wn(void 0!==e),i.map(t=>function(a,f){let y=Ks(a.updateTime?a.updateTime:f);return y.isEqual(Mn.min())&&(y=Ks(f)),new ju(y,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Ks(e.commitTime);return this.listener.Zo(a,t)}return wn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Tu(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>Md(this.yt,a))};this.Bo(t)}}class Ud extends class{}{constructor(e,t,a,f){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.yt=f,this.nu=!1}su(){if(this.nu)throw new Zt(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.ao(e,t,a,f,y)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Zt(Pt.UNKNOWN,f.toString())})}_o(e,t,a,f){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,T])=>this.connection._o(e,t,a,y,T,f)).catch(y=>{throw"FirebaseError"===y.name?(y.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new Zt(Pt.UNKNOWN,y.toString())})}terminate(){this.nu=!0}}class Ip{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ki(t),this.ou=!1):rn("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Sp{constructor(e,t,a,f,y){var T=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=y,this.mu.Ur(x=>{a.enqueueAndForget((0,je.Z)(function*(){var Q;Bc(T)&&(rn("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,je.Z)(function*(re){const me=yn(re);me._u.add(4),yield md(me),me.gu.set("Unknown"),me._u.delete(4),yield Na(me)}),function(re){return Q.apply(this,arguments)})(T))}))}),this.gu=new Ip(a,f)}}function Na(i){return eu.apply(this,arguments)}function eu(){return eu=(0,je.Z)(function*(i){if(Bc(i))for(const e of i.wu)yield e(!0)}),eu.apply(this,arguments)}function md(i){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,je.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Ap.apply(this,arguments)}function wh(i,e){const t=yn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ug(t)?nc(t):ic(t).ko()&&Np(t,e))}function Vl(i,e){const t=yn(i),a=ic(t);t.du.delete(e),a.ko()&&Vg(t,e),0===t.du.size&&(a.ko()?a.Fo():Bc(t)&&t.gu.set("Unknown"))}function Np(i,e){i.yu.Ot(e.targetId),ic(i).zo(e)}function Vg(i,e){i.yu.Ot(e),ic(i).Ho(e)}function nc(i){i.yu=new jh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),ic(i).start(),i.gu.uu()}function Ug(i){return Bc(i)&&!ic(i).No()&&i.du.size>0}function Bc(i){return 0===yn(i)._u.size}function Dy(i){i.yu=void 0}function Rp(i){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,je.Z)(function*(i){i.du.forEach((e,t)=>{Np(i,e)})}),Eh.apply(this,arguments)}function Mp(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,je.Z)(function*(i,e){Dy(i),Ug(i)?(i.gu.hu(e),nc(i)):i.gu.set("Unknown")}),Op.apply(this,arguments)}function xp(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,je.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Ll&&2===e.state&&e.cause)try{yield(a=(0,je.Z)(function*(f,y){const T=y.cause;for(const x of y.targetIds)f.du.has(x)&&(yield f.remoteSyncer.rejectListen(x,T),f.du.delete(x),f.yu.removeTarget(x))}),function(f,y){return a.apply(this,arguments)})(i,e)}catch(a){rn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield kp(i,a)}else if(e instanceof Nd?i.yu.Kt(e):e instanceof rd?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Mn.min()))try{const a=yield km(i.localStore);t.compareTo(a)>=0&&(yield function(f,y){const T=f.yu.Zt(y);return T.targetChanges.forEach((x,Q)=>{if(x.resumeToken.approximateByteSize()>0){const re=f.du.get(Q);re&&f.du.set(Q,re.withResumeToken(x.resumeToken,y))}}),T.targetMismatches.forEach(x=>{const Q=f.du.get(x);if(!Q)return;f.du.set(x,Q.withResumeToken(_n.EMPTY_BYTE_STRING,Q.snapshotVersion)),Vg(f,x);const re=new Nc(Q.target,x,1,Q.sequenceNumber);Np(f,re)}),f.remoteSyncer.applyRemoteEvent(T)}(i,t))}catch(a){rn("RemoteStore","Failed to raise snapshot:",a),yield kp(i,a)}var a}),Pp.apply(this,arguments)}function kp(i,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,je.Z)(function*(i,e,t){if(!Ja(e))throw e;i._u.add(1),yield md(i),i.gu.set("Offline"),t||(t=()=>km(i.localStore)),i.asyncQueue.enqueueRetryable((0,je.Z)(function*(){rn("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Na(i)}))}),Fp.apply(this,arguments)}function Gm(i,e){return e().catch(t=>kp(i,t,e))}function Hd(i){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,je.Z)(function*(i){const e=yn(i),t=Wa(e);let a=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Hg(e);)try{const f=yield H_(e.localStore,a);if(null===f){0===e.fu.length&&t.Fo();break}a=f.batchId,Lp(e,f)}catch(f){yield kp(e,f)}Wm(e)&&Af(e)}),Dh.apply(this,arguments)}function Hg(i){return Bc(i)&&i.fu.length<10}function Lp(i,e){i.fu.push(e);const t=Wa(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Wm(i){return Bc(i)&&!Wa(i).No()&&i.fu.length>0}function Af(i){Wa(i).start()}function Vc(i){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,je.Z)(function*(i){Wa(i).eu()}),Nf.apply(this,arguments)}function Zh(i){return zm.apply(this,arguments)}function zm(){return zm=(0,je.Z)(function*(i){const e=Wa(i);for(const t of i.fu)e.Xo(t.mutations)}),zm.apply(this,arguments)}function Bp(i,e,t){return jg.apply(this,arguments)}function jg(){return jg=(0,je.Z)(function*(i,e,t){const a=i.fu.shift(),f=fp.from(a,e,t);yield Gm(i,()=>i.remoteSyncer.applySuccessfulWrite(f)),yield Hd(i)}),jg.apply(this,arguments)}function Ty(i,e){return $g.apply(this,arguments)}function $g(){return $g=(0,je.Z)(function*(i,e){var t;e&&Wa(i).Yo&&(yield(t=(0,je.Z)(function*(a,f){if(Ad(y=f.code)&&y!==Pt.ABORTED){const T=a.fu.shift();Wa(a).Mo(),yield Gm(a,()=>a.remoteSyncer.rejectFailedWrite(T.batchId,f)),yield Hd(a)}var y}),function(a,f){return t.apply(this,arguments)})(i,e)),Wm(i)&&Af(i)}),$g.apply(this,arguments)}function jd(i,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,je.Z)(function*(i,e){const t=yn(i);t.asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials");const a=Bc(t);t._u.add(3),yield md(t),a&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Na(t)}),Gg.apply(this,arguments)}function Wg(i,e){return rc.apply(this,arguments)}function rc(){return rc=(0,je.Z)(function*(i,e){const t=yn(i);e?(t._u.delete(2),yield Na(t)):e||(t._u.add(2),yield md(t),t.gu.set("Unknown"))}),rc.apply(this,arguments)}function ic(i){return i.pu||(i.pu=function(e,t,a){const f=yn(e);return f.su(),new Ey(t,f.connection,f.authCredentials,f.appCheckCredentials,f.yt,a)}(i.datastore,i.asyncQueue,{Yr:Rp.bind(null,i),Zr:Mp.bind(null,i),Wo:xp.bind(null,i)}),i.wu.push(function(){var e=(0,je.Z)(function*(t){t?(i.pu.Mo(),Ug(i)?nc(i):i.gu.set("Unknown")):(yield i.pu.stop(),Dy(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Wa(i){return i.Iu||(i.Iu=function(e,t,a){const f=yn(e);return f.su(),new Sf(t,f.connection,f.authCredentials,f.appCheckCredentials,f.yt,a)}(i.datastore,i.asyncQueue,{Yr:Vc.bind(null,i),Zr:Ty.bind(null,i),tu:Zh.bind(null,i),Zo:Bp.bind(null,i)}),i.wu.push(function(){var e=(0,je.Z)(function*(t){t?(i.Iu.Mo(),yield Hd(i)):(yield i.Iu.stop(),i.fu.length>0&&(rn("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Rf{constructor(e,t,a,f,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=f,this.removalCallback=y,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}static createAndSchedule(e,t,a,f,y){const T=Date.now()+a,x=new Rf(e,t,T,f,y);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(Pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(i,e){if(Ki("AsyncQueue",`${e}: ${i}`),Ja(i))return new Zt(Pt.UNAVAILABLE,`${e}: ${i}`);throw i}class Gd{constructor(e){this.comparator=e?(t,a)=>e(t,a)||vn.comparator(t.key,a.key):(t,a)=>vn.comparator(t.key,a.key),this.keyedMap=td(),this.sortedSet=new ao(this.comparator)}static emptySet(e){return new Gd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=a.getNext().key;if(!f.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Gd;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Wd{constructor(){this.Tu=new ao(vn.comparator)}track(e){const t=e.doc.key,a=this.Tu.get(t);a?0!==e.type&&3===a.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==a.type?this.Tu=this.Tu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Tu=this.Tu.remove(t):1===e.type&&2===a.type?this.Tu=this.Tu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,a)=>{e.push(a)}),e}}class Uc{constructor(e,t,a,f,y,T,x,Q,re){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=f,this.mutatedKeys=y,this.fromCache=T,this.syncStateChanged=x,this.excludesMetadataChanges=Q,this.hasCachedResults=re}static fromInitialDocuments(e,t,a,f,y){const T=[];return t.forEach(x=>{T.push({type:0,doc:x})}),new Uc(e,t,Gd.emptySet(t),T,a,f,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$o(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let f=0;f<t.length;f++)if(t[f].type!==a[f].type||!t[f].doc.isEqual(a[f].doc))return!1;return!0}}class zg{constructor(){this.Au=void 0,this.listeners=[]}}class Kg{constructor(){this.queries=new Gu(e=>Ed(e),$o),this.onlineState="Unknown",this.Ru=new Set}}function Hc(i,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,je.Z)(function*(i,e){const t=yn(i),a=e.query;let f=!1,y=t.queries.get(a);if(y||(f=!0,y=new zg),f)try{y.Au=yield t.onListen(a)}catch(T){const x=$d(T,`Initialization of query '${wc(e.query)}' failed`);return void e.onError(x)}t.queries.set(a,y),y.listeners.push(e),e.bu(t.onlineState),y.Au&&e.Pu(y.Au)&&Qh(t)}),Vp.apply(this,arguments)}function qg(i,e){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,je.Z)(function*(i,e){const t=yn(i),a=e.query;let f=!1;const y=t.queries.get(a);if(y){const T=y.listeners.indexOf(e);T>=0&&(y.listeners.splice(T,1),f=0===y.listeners.length)}if(f)return t.queries.delete(a),t.onUnlisten(a)}),Ul.apply(this,arguments)}function Yg(i,e){const t=yn(i);let a=!1;for(const f of e){const T=t.queries.get(f.query);if(T){for(const x of T.listeners)x.Pu(f)&&(a=!0);T.Au=f}}a&&Qh(t)}function Up(i,e,t){const a=yn(i),f=a.queries.get(e);if(f)for(const y of f.listeners)y.onError(t);a.queries.delete(e)}function Qh(i){i.Ru.forEach(e=>{e.next()})}class Jh{constructor(e,t,a){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=a||{}}Pu(e){if(!this.options.includeMetadataChanges){const a=[];for(const f of e.docChanges)3!==f.type&&a.push(f);e=new Uc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Xh{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Hp{constructor(e){this.yt=e}Ji(e){return Ql(this.yt,e)}Yi(e){return e.metadata.exists?dh(this.yt,e.document,!1):Js.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ks(e)}}class Mf{constructor(e,t,a){this.Mu=e,this.localStore=t,this.yt=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zg(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const a=ti.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,a=new Hp(this.yt);for(const f of e)if(f.metadata.queries){const y=a.Ji(f.metadata.name);for(const T of f.metadata.queries){const x=(t.get(T)||Jr()).add(y);t.set(T,x)}}return t}complete(){var e=this;return(0,je.Z)(function*(){const t=yield function j_(i,e,t,a){return Vm.apply(this,arguments)}(e.localStore,new Hp(e.yt),e.documents,e.Mu.id),a=e.$u(e.documents);for(const f of e.queries)yield wy(e.localStore,f,a.get(f.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Zg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class zd{constructor(e){this.key=e}}class Qg{constructor(e){this.key=e}}class Jg{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jr(),this.mutatedKeys=Jr(),this.Gu=N(e),this.Qu=new Gd(this.Gu)}get ju(){return this.qu}Wu(e,t){const a=t?t.zu:new Wd,f=t?t.Qu:this.Qu;let y=t?t.mutatedKeys:this.mutatedKeys,T=f,x=!1;const Q="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,re="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((me,Ke)=>{const It=f.get(me),Xt=Ro(this.query,Ke)?Ke:null,on=!!It&&this.mutatedKeys.has(It.key),Yn=!!Xt&&(Xt.hasLocalMutations||this.mutatedKeys.has(Xt.key)&&Xt.hasCommittedMutations);let yr=!1;It&&Xt?It.data.isEqual(Xt.data)?on!==Yn&&(a.track({type:3,doc:Xt}),yr=!0):this.Hu(It,Xt)||(a.track({type:2,doc:Xt}),yr=!0,(Q&&this.Gu(Xt,Q)>0||re&&this.Gu(Xt,re)<0)&&(x=!0)):!It&&Xt?(a.track({type:0,doc:Xt}),yr=!0):It&&!Xt&&(a.track({type:1,doc:It}),yr=!0,(Q||re)&&(x=!0)),yr&&(Xt?(T=T.add(Xt),y=Yn?y.add(me):y.delete(me)):(T=T.delete(me),y=y.delete(me)))}),null!==this.query.limit)for(;T.size>this.query.limit;){const me="F"===this.query.limitType?T.last():T.first();T=T.delete(me.key),y=y.delete(me.key),a.track({type:1,doc:me})}return{Qu:T,zu:a,$i:x,mutatedKeys:y}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const f=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const y=e.zu.Eu();y.sort((re,me)=>function(Ke,It){const Xt=on=>{switch(on){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dn()}};return Xt(Ke)-Xt(It)}(re.type,me.type)||this.Gu(re.doc,me.doc)),this.Ju(a);const T=t?this.Yu():[],x=0===this.Ku.size&&this.current?1:0,Q=x!==this.Uu;return this.Uu=x,0!==y.length||Q?{snapshot:new Uc(this.query,e.Qu,f,y,e.mutatedKeys,0===x,Q,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:T}:{Xu:T}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Wd,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const t=[];return e.forEach(a=>{this.Ku.has(a)||t.push(new Qg(a))}),this.Ku.forEach(a=>{e.has(a)||t.push(new zd(a))}),t}tc(e){this.qu=e.Hi,this.Ku=Jr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Uc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Xg{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class ef{constructor(e){this.key=e,this.nc=!1}}class Of{constructor(e,t,a,f,y,T){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=f,this.currentUser=y,this.maxConcurrentLimboResolutions=T,this.sc={},this.ic=new Gu(x=>Ed(x),$o),this.rc=new Map,this.oc=new Set,this.uc=new ao(vn.comparator),this.cc=new Map,this.ac=new Rg,this.hc={},this.lc=new Map,this.fc=rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function jp(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,je.Z)(function*(i,e){const t=Qp(i);let a,f;const y=t.ic.get(e);if(y)a=y.targetId,t.sharedClientState.addLocalQueryTarget(a),f=y.view.ec();else{const T=yield Cf(t.localStore,Jo(e));t.isPrimaryClient&&wh(t.remoteStore,T);const x=t.sharedClientState.addLocalQueryTarget(T.targetId);a=T.targetId,f=yield Km(t,e,a,"current"===x,T.resumeToken)}return f}),$p.apply(this,arguments)}function Km(i,e,t,a,f){return xf.apply(this,arguments)}function xf(){return xf=(0,je.Z)(function*(i,e,t,a,f){i._c=(Ke,It,Xt)=>{return(on=(0,je.Z)(function*(Yn,yr,mo,ea){let Is=yr.view.Wu(mo);Is.$i&&(Is=yield kc(Yn.localStore,yr.query,!1).then(({documents:js})=>yr.view.Wu(js,Is)));const ya=ea&&ea.targetChanges.get(yr.targetId),xs=yr.view.applyChanges(Is,Yn.isPrimaryClient,ya);return Ff(Yn,yr.targetId,xs.Xu),xs.snapshot}),function(Yn,yr,mo,ea){return on.apply(this,arguments)})(i,Ke,It,Xt);var on};const y=yield kc(i.localStore,e,!0),T=new Jg(e,y.Hi),x=T.Wu(y.documents),Q=Sl.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState,f),re=T.applyChanges(x,i.isPrimaryClient,Q);Ff(i,t,re.Xu);const me=new Xg(e,t,T);return i.ic.set(e,me),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),re.snapshot}),xf.apply(this,arguments)}function em(i,e){return tm.apply(this,arguments)}function tm(){return tm=(0,je.Z)(function*(i,e){const t=yn(i),a=t.ic.get(e),f=t.rc.get(a.targetId);if(f.length>1)return t.rc.set(a.targetId,f.filter(y=>!$o(y,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield bh(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),Vl(t.remoteStore,a.targetId),Ch(t,a.targetId)}).catch(xl))):(Ch(t,a.targetId),yield bh(t.localStore,a.targetId,!0))}),tm.apply(this,arguments)}function Gp(){return Gp=(0,je.Z)(function*(i,e,t){const a=tf(i);try{const f=yield function(y,T){const x=yn(y),Q=Qi.now(),re=T.reduce((It,Xt)=>It.add(Xt.key),Jr());let me,Ke;return x.persistence.runTransaction("Locally write mutations","readwrite",It=>{let Xt=Oo(),on=Jr();return x.Gi.getEntries(It,re).next(Yn=>{Xt=Yn,Xt.forEach((yr,mo)=>{mo.isValidDocument()||(on=on.add(yr))})}).next(()=>x.localDocuments.getOverlayedDocuments(It,Xt)).next(Yn=>{me=Yn;const yr=[];for(const mo of T){const ea=Yl(mo,me.get(mo.key).overlayedDocument);null!=ea&&yr.push(new wu(mo.key,ea,vc(ea.value.mapValue),Xs.exists(!0)))}return x.mutationQueue.addMutationBatch(It,Q,yr,T)}).next(Yn=>{Ke=Yn;const yr=Yn.applyToLocalDocumentSet(me,on);return x.documentOverlayCache.saveOverlays(It,Yn.batchId,yr)})}).then(()=>({batchId:Ke.batchId,changes:Wu(me)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(f.batchId),function(y,T,x){let Q=y.hc[y.currentUser.toKey()];Q||(Q=new ao(_r)),Q=Q.insert(T,x),y.hc[y.currentUser.toKey()]=Q}(a,f.batchId,t),yield jc(a,f.changes),yield Hd(a.remoteStore)}catch(f){const y=$d(f,"Failed to persist write");t.reject(y)}}),Gp.apply(this,arguments)}function Ym(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,je.Z)(function*(i,e){const t=yn(i);try{const a=yield Fm(t.localStore,e);e.targetChanges.forEach((f,y)=>{const T=t.cc.get(y);T&&(wn(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?T.nc=!0:f.modifiedDocuments.size>0?wn(T.nc):f.removedDocuments.size>0&&(wn(T.nc),T.nc=!1))}),yield jc(t,a,e)}catch(a){yield xl(a)}}),Hl.apply(this,arguments)}function nm(i,e,t){const a=yn(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const f=[];a.ic.forEach((y,T)=>{const x=T.view.bu(e);x.snapshot&&f.push(x.snapshot)}),function(y,T){const x=yn(y);x.onlineState=T;let Q=!1;x.queries.forEach((re,me)=>{for(const Ke of me.listeners)Ke.bu(T)&&(Q=!0)}),Q&&Qh(x)}(a.eventManager,e),f.length&&a.sc.Wo(f),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Th(i,e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,je.Z)(function*(i,e,t){const a=yn(i);a.sharedClientState.updateQueryState(e,"rejected",t);const f=a.cc.get(e),y=f&&f.key;if(y){let T=new ao(vn.comparator);T=T.insert(y,Js.newNoDocument(y,Mn.min()));const x=Jr().add(y),Q=new ja(Mn.min(),new Map,new ls(_r),T,x);yield Ym(a,Q),a.uc=a.uc.remove(y),a.cc.delete(e),Kp(a)}else yield bh(a.localStore,e,!1).then(()=>Ch(a,e,t)).catch(xl)}),Wp.apply(this,arguments)}function rm(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,je.Z)(function*(i,e){const t=yn(i),a=e.batch.batchId;try{const f=yield Pm(t.localStore,e);Pf(t,a,null),zp(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield jc(t,f)}catch(f){yield xl(f)}}),Kd.apply(this,arguments)}function Zm(i,e,t){return im.apply(this,arguments)}function im(){return im=(0,je.Z)(function*(i,e,t){const a=yn(i);try{const f=yield function(y,T){const x=yn(y);return x.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let re;return x.mutationQueue.lookupMutationBatch(Q,T).next(me=>(wn(null!==me),re=me.keys(),x.mutationQueue.removeMutationBatch(Q,me))).next(()=>x.mutationQueue.performConsistencyCheck(Q)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(Q,re,T)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Q,re)).next(()=>x.localDocuments.getDocuments(Q,re))})}(a.localStore,e);Pf(a,e,t),zp(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield jc(a,f)}catch(f){yield xl(f)}}),im.apply(this,arguments)}function sm(){return sm=(0,je.Z)(function*(i,e){const t=yn(i);Bc(t.remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(y){const T=yn(y);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>T.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===a)return void e.resolve();const f=t.lc.get(a)||[];f.push(e),t.lc.set(a,f)}catch(a){const f=$d(a,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),sm.apply(this,arguments)}function zp(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Pf(i,e,t){const a=yn(i);let f=a.hc[a.currentUser.toKey()];if(f){const y=f.get(e);y&&(t?y.reject(t):y.resolve(),f=f.remove(e)),a.hc[a.currentUser.toKey()]=f}}function Ch(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.rc.get(e))i.ic.delete(a),t&&i.sc.wc(a,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(a=>{i.ac.containsKey(a)||kf(i,a)})}function kf(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Vl(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Kp(i))}function Ff(i,e,t){for(const a of t)a instanceof zd?(i.ac.addReference(a.key,e),Lf(i,a)):a instanceof Qg?(rn("SyncEngine","Document no longer in limbo: "+a.key),i.ac.removeReference(a.key,e),i.ac.containsKey(a.key)||kf(i,a.key)):dn()}function Lf(i,e){const t=e.key,a=t.path.canonicalString();i.uc.get(t)||i.oc.has(a)||(rn("SyncEngine","New document in limbo: "+t),i.oc.add(a),Kp(i))}function Kp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new vn(ti.fromString(e)),a=i.fc.next();i.cc.set(a,new ef(t)),i.uc=i.uc.insert(t,a),wh(i.remoteStore,new Nc(Jo(jo(t.path)),a,2,R.at))}}function jc(i,e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,je.Z)(function*(i,e,t){const a=yn(i),f=[],y=[],T=[];var x;a.ic.isEmpty()||(a.ic.forEach((x,Q)=>{T.push(a._c(Q,e,t).then(re=>{if((re||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(Q.targetId,re?.fromCache?"not-current":"current"),re){f.push(re);const me=ri.Ci(Q.targetId,re);y.push(me)}}))}),yield Promise.all(T),a.sc.Wo(f),yield(x=(0,je.Z)(function*(Q,re){const me=yn(Q);try{yield me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ke=>Ot.forEach(re,It=>Ot.forEach(It.Si,Xt=>me.persistence.referenceDelegate.addReference(Ke,It.targetId,Xt)).next(()=>Ot.forEach(It.Di,Xt=>me.persistence.referenceDelegate.removeReference(Ke,It.targetId,Xt)))))}catch(Ke){if(!Ja(Ke))throw Ke;rn("LocalStore","Failed to update sequence numbers: "+Ke)}for(const Ke of re){const It=Ke.targetId;if(!Ke.fromCache){const Xt=me.qi.get(It),Yn=Xt.withLastLimboFreeSnapshotVersion(Xt.snapshotVersion);me.qi=me.qi.insert(It,Yn)}}}),function(Q,re){return x.apply(this,arguments)})(a.localStore,y))}),Nu.apply(this,arguments)}function Qm(i,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,je.Z)(function*(i,e){const t=yn(i);if(!t.currentUser.isEqual(e)){rn("SyncEngine","User change. New user:",e.toKey());const a=yield U_(t.localStore,e);t.currentUser=e,(f=t).lc.forEach(T=>{T.forEach(x=>{x.reject(new Zt(Pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.lc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield jc(t,a.ji)}var f}),Bf.apply(this,arguments)}function Cy(i,e){const t=yn(i),a=t.cc.get(e);if(a&&a.nc)return Jr().add(a.key);{let f=Jr();const y=t.rc.get(e);if(!y)return f;for(const T of y){const x=t.ic.get(T);f=f.unionWith(x.view.ju)}return f}}function Iy(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,je.Z)(function*(i,e){const t=yn(i),a=yield kc(t.localStore,e.query,!0),f=e.view.tc(a);return t.isPrimaryClient&&Ff(t,e.targetId,f.Xu),f}),qp.apply(this,arguments)}function Jm(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,je.Z)(function*(i,e){const t=yn(i);return Pg(t.localStore,e).then(a=>jc(t,a))}),Vf.apply(this,arguments)}function Xm(i,e,t,a){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,je.Z)(function*(i,e,t,a){const f=yn(i),y=yield function(T,x){const Q=yn(T),re=yn(Q.mutationQueue);return Q.persistence.runTransaction("Lookup mutation documents","readonly",me=>re.Tn(me,x).next(Ke=>Ke?Q.localDocuments.getDocuments(me,Ke):Ot.resolve(null)))}(f.localStore,e);var x;null!==y?("pending"===t?yield Hd(f.remoteStore):"acknowledged"===t||"rejected"===t?(Pf(f,e,a||null),zp(f,e),x=e,yn(yn(f.localStore).mutationQueue).An(x)):dn(),yield jc(f,y)):rn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yp.apply(this,arguments)}function om(){return om=(0,je.Z)(function*(i,e){const t=yn(i);if(Qp(t),tf(t),!0===e&&!0!==t.dc){const a=t.sharedClientState.getAllActiveQueryTargets(),f=yield Uf(t,a.toArray());t.dc=!0,yield Wg(t.remoteStore,!0);for(const y of f)wh(t.remoteStore,y)}else if(!1===e&&!1!==t.dc){const a=[];let f=Promise.resolve();t.rc.forEach((y,T)=>{t.sharedClientState.isLocalQueryTarget(T)?a.push(T):f=f.then(()=>(Ch(t,T),bh(t.localStore,T,!0))),Vl(t.remoteStore,T)}),yield f,yield Uf(t,a),function(y){const T=yn(y);T.cc.forEach((x,Q)=>{Vl(T.remoteStore,Q)}),T.ac.fs(),T.cc=new Map,T.uc=new ao(vn.comparator)}(t),t.dc=!1,yield Wg(t.remoteStore,!1)}}),om.apply(this,arguments)}function Uf(i,e,t){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,je.Z)(function*(i,e,t){const a=yn(i),f=[],y=[];for(const T of e){let x;const Q=a.rc.get(T);if(Q&&0!==Q.length){x=yield Cf(a.localStore,Jo(Q[0]));for(const re of Q){const me=a.ic.get(re),Ke=yield Iy(a,me);Ke.snapshot&&y.push(Ke.snapshot)}}else{const re=yield Bm(a.localStore,T);x=yield Cf(a.localStore,re),yield Km(a,jf(re),T,!1,x.resumeToken)}f.push(x)}return a.sc.Wo(y),f}),Hf.apply(this,arguments)}function jf(i){return Vh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Sy(i){const e=yn(i);return yn(yn(e.localStore).persistence).vi()}function Zp(i,e,t,a){return e_.apply(this,arguments)}function e_(){return e_=(0,je.Z)(function*(i,e,t,a){const f=yn(i);if(f.dc)return void rn("SyncEngine","Ignoring unexpected query state notification.");const y=f.rc.get(e);if(y&&y.length>0)switch(t){case"current":case"not-current":{const T=yield Pg(f.localStore,Dd(y[0])),x=ja.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_n.EMPTY_BYTE_STRING);yield jc(f,T,x);break}case"rejected":yield bh(f.localStore,e,!0),Ch(f,e,a);break;default:dn()}}),e_.apply(this,arguments)}function t_(i,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,je.Z)(function*(i,e,t){const a=Qp(i);if(a.dc){for(const f of e){if(a.rc.has(f)){rn("SyncEngine","Adding an already active target "+f);continue}const y=yield Bm(a.localStore,f),T=yield Cf(a.localStore,y);yield Km(a,jf(y),T.targetId,!1,T.resumeToken),wh(a.remoteStore,T)}for(const f of t)a.rc.has(f)&&(yield bh(a.localStore,f,!1).then(()=>{Vl(a.remoteStore,f),Ch(a,f)}).catch(xl))}}),$f.apply(this,arguments)}function Qp(i){const e=yn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ym.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Th.bind(null,e),e.sc.Wo=Yg.bind(null,e.eventManager),e.sc.wc=Up.bind(null,e.eventManager),e}function tf(i){const e=yn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zm.bind(null,e),e}class $c{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,je.Z)(function*(){t.yt=If(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return eo(this.persistence,new xm,e.initialUser,this.yt)}yc(e){return new Mg(qh.Bs,this.yt)}gc(e){return new Lg}terminate(){var e=this;return(0,je.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Gf extends $c{constructor(e,t,a){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,je.Z)(function*(){yield t().call(a,e),yield a.Ac.initialize(a,e),yield tf(a.Ac.syncEngine),yield Hd(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return eo(this.persistence,new xm,e.initialUser,this.yt)}Tc(e,t){return new pd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const a=new A(t,this.persistence);return new lu(e.asyncQueue,a)}yc(e){const t=xg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new gp(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,Bg(),Dp(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Lg}}class Jp extends Gf{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,je.Z)(function*(){yield t().call(a,e);const f=a.Ac.syncEngine;a.sharedClientState instanceof Fg&&(a.sharedClientState.syncEngine={Fr:Xm.bind(null,f),$r:Zp.bind(null,f),Br:t_.bind(null,f),vi:Sy.bind(null,f),Mr:Jm.bind(null,f)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var y=(0,je.Z)(function*(T){yield function Y_(i,e){return om.apply(this,arguments)}(a.Ac.syncEngine,T),a.gcScheduler&&(T&&!a.gcScheduler.started?a.gcScheduler.start():T||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(T&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():T||a.indexBackfillerScheduler.stop())});return function(T){return y.apply(this,arguments)}}())})()}gc(e){const t=Bg();if(!Fg.C(t))throw new Zt(Pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=xg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fg(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class qd{initialize(e,t){var a=this;return(0,je.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=f=>nm(a.syncEngine,f,1),a.remoteStore.remoteSyncer.handleCredentialChange=Qm.bind(null,a.syncEngine),yield Wg(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Kg}createDatastore(e){const t=If(e.databaseInfo.databaseId),a=new z_(e.databaseInfo);return new Ud(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,f=e.asyncQueue,y=x=>nm(this.syncEngine,x,0),T=$m.C()?new $m:new $_,new Sp(t,a,f,y,T);var t,a,f,y,T}createSyncEngine(e,t){return function(a,f,y,T,x,Q,re){const me=new Of(a,f,y,T,x,Q);return re&&(me.dc=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,je.Z)(function*(t){const a=yn(t);rn("RemoteStore","RemoteStore shutting down."),a._u.add(5),yield md(a),a.mu.shutdown(),a.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lm(i,e,t){if(!t)throw new Zt(Pt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function jl(i,e,t,a){if(!0===e&&!0===a)throw new Zt(Pt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Wf(i){if(!vn.isDocumentKey(i))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nf(i){if(vn.isDocumentKey(i))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":dn()}function xi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Zt(Pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rf(i);throw new Zt(Pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function n_(i,e){if(e<=0)throw new Zt(Pt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const um=new Map;class r_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(Pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(Pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jl("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,a,f){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zt(Pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(Pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bo;switch(t.type){case"gapi":return new zs(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Zt(Pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=um.get(e);t&&(rn("ComponentProvider","Removing Datastore"),um.delete(e),t.terminate())}(this),Promise.resolve()}}class Do{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Do(this.firestore,e,this._key)}}class il{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new il(this.firestore,e,this._query)}}class Ru extends il{constructor(e,t,a){super(e,t,jo(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Do(this.firestore,null,new vn(e))}withConverter(e){return new Ru(this.firestore,e,this._path)}}function Kf(i,e,...t){if(i=(0,ze.m9)(i),lm("collection","path",e),i instanceof Xp){const a=ti.fromString(e,...t);return nf(a),new Ru(i,null,a)}{if(!(i instanceof Do||i instanceof Ru))throw new Zt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ti.fromString(e,...t));return nf(a),new Ru(i.firestore,null,a)}}function sc(i,e,...t){if(i=(0,ze.m9)(i),1===arguments.length&&(e=El.R()),lm("doc","path",e),i instanceof Xp){const a=ti.fromString(e,...t);return Wf(a),new Do(i,null,new vn(a))}{if(!(i instanceof Do||i instanceof Ru))throw new Zt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ti.fromString(e,...t));return Wf(a),new Do(i.firestore,i instanceof Ru?i.converter:null,new vn(a))}}function i_(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),(i instanceof Do||i instanceof Ru)&&(e instanceof Do||e instanceof Ru)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function cm(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),i instanceof il&&e instanceof il&&i.firestore===e.firestore&&$o(i._query,e._query)&&i.converter===e.converter}function dm(i,e=10240){let t=0;return{read:()=>(0,je.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,je.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class s_{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new ui,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.ku)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,je.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,je.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,je.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const a=e.vc.decode(t),f=Number(a);isNaN(f)&&e.Dc(`length string (${a}) is not valid number`);const y=yield e.Cc(f);return new Xh(JSON.parse(y),t.length+f)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,je.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}Cc(e){var t=this;return(0,je.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const a=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,je.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class o_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,je.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(Pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(f=(0,je.Z)(function*(y,T){const x=yn(y),Q=Tu(x.yt)+"/documents",re={documents:T.map(Xt=>ad(x.yt,Xt))},me=yield x._o("BatchGetDocuments",Q,re,T.length),Ke=new Map;me.forEach(Xt=>{const on=function Gh(i,e){return"found"in e?function(t,a){wn(!!a.found);const f=Ql(t,a.found.name),y=Ks(a.found.updateTime),T=a.found.createTime?Ks(a.found.createTime):Mn.min(),x=new Ua({mapValue:{fields:a.found.fields}});return Js.newFoundDocument(f,y,T,x)}(i,e):"missing"in e?function(t,a){wn(!!a.missing),wn(!!a.readTime);const f=Ql(t,a.missing),y=Ks(a.readTime);return Js.newNoDocument(f,y)}(i,e):dn()}(x.yt,Xt);Ke.set(on.key.toString(),on)});const It=[];return T.forEach(Xt=>{const on=Ke.get(Xt.toString());wn(!!on),It.push(on)}),It}),function(y,T){return f.apply(this,arguments)})(t.datastore,e);var f;return a.forEach(f=>t.recordVersion(f)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,je.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,f)=>{const y=vn.fromPath(f);e.mutations.push(new ch(y,e.precondition(y)))}),yield(a=(0,je.Z)(function*(f,y){const T=yn(f),x=Tu(T.yt)+"/documents",Q={writes:y.map(re=>Md(T.yt,re))};yield T.ao("Commit",x,Q)}),function(f,y){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dn();t=Mn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Zt(Pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mn.min())?Xs.exists(!1):Xs.updateTime(t):Xs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mn.min()))throw new Zt(Pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xs.updateTime(t)}return Xs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qf{constructor(e,t,a,f,y){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=f,this.deferred=y,this.kc=a.maxAttempts,this.xo=new Tp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,je.Z)(function*(){const t=new o_(e.datastore),a=e.Mc(t);a&&a.then(f=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(f)}).catch(y=>{e.Fc(y)}))}).catch(f=>{e.Fc(f)})}))}Mc(e){try{const t=this.updateFunction(e);return!xe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ad(t)}return!1}}class a_{constructor(e,t,a,f){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=f,this.user=io.UNAUTHENTICATED,this.clientId=El.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var T=(0,je.Z)(function*(x){rn("FirestoreClient","Received user=",x.uid),yield y.authCredentialListener(x),y.user=x});return function(x){return T.apply(this,arguments)}}()),this.appCheckCredentials.start(a,T=>(rn("FirestoreClient","Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}getConfiguration(){var e=this;return(0,je.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,je.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const f=$d(a,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}function l_(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,je.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var f=(0,je.Z)(function*(y){a.isEqual(y)||(yield U_(e.localStore,y),a=y)});return function(y){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Yf.apply(this,arguments)}function u_(i,e){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,je.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Yd(i);rn("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(f=>jd(e.remoteStore,f)),i.setAppCheckTokenChangeListener((f,y)=>jd(e.remoteStore,y)),i.onlineComponents=e}),Ou.apply(this,arguments)}function Yd(i){return ma.apply(this,arguments)}function ma(){return ma=(0,je.Z)(function*(i){return i.offlineComponents||(rn("FirestoreClient","Using default OfflineComponentProvider"),yield l_(i,new $c)),i.offlineComponents}),ma.apply(this,arguments)}function oc(i){return sf.apply(this,arguments)}function sf(){return sf=(0,je.Z)(function*(i){return i.onlineComponents||(rn("FirestoreClient","Using default OnlineComponentProvider"),yield u_(i,new qd)),i.onlineComponents}),sf.apply(this,arguments)}function tu(i){return Yd(i).then(e=>e.persistence)}function af(i){return Yd(i).then(e=>e.localStore)}function Zd(i){return oc(i).then(e=>e.remoteStore)}function Qd(i){return oc(i).then(e=>e.syncEngine)}function ac(i){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,je.Z)(function*(i){const e=yield oc(i),t=e.eventManager;return t.onListen=jp.bind(null,e.syncEngine),t.onUnlisten=em.bind(null,e.syncEngine),t}),Jd.apply(this,arguments)}function Rh(i,e,t={}){const a=new ui;return i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return function(f,y,T,x,Q){const re=new eg({next:Ke=>{y.enqueueAndForget(()=>qg(f,me));const It=Ke.docs.has(T);!It&&Ke.fromCache?Q.reject(new Zt(Pt.UNAVAILABLE,"Failed to get document because the client is offline.")):It&&Ke.fromCache&&x&&"server"===x.source?Q.reject(new Zt(Pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(Ke)},error:Ke=>Q.reject(Ke)}),me=new Jh(jo(T.path),re,{includeMetadataChanges:!0,Nu:!0});return Hc(f,me)}(yield ac(i),i.asyncQueue,e,t,a)})),a.promise}function c_(i,e,t={}){const a=new ui;return i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return function(f,y,T,x,Q){const re=new eg({next:Ke=>{y.enqueueAndForget(()=>qg(f,me)),Ke.fromCache&&"server"===x.source?Q.reject(new Zt(Pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(Ke)},error:Ke=>Q.reject(Ke)}),me=new Jh(T,re,{includeMetadataChanges:!0,Nu:!0});return Hc(f,me)}(yield ac(i),i.asyncQueue,e,t,a)})),a.promise}class f_{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Tp(this,"async_queue_retry"),this.Wc=()=>{const t=Dp();t&&rn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new ui;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,je.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ja(t))throw t;rn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,Ki("INTERNAL UNHANDLED ERROR: ",function(y){let T=y.message||"";return y.stack&&(T=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),T}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=t,t}enqueueAfterDelay(e,t,a){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const f=Rf.createAndSchedule(this,e,t,a,y=>this.Yc(y));return this.Uc.push(f),f}zc(){this.Kc&&dn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,je.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ng(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const f of["next","error","complete"])if(f in a&&"function"==typeof a[f])return!0;return!1}(i)}class u{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class o extends Xp{constructor(e,t,a,f){super(e,t,a,f),this.type="firestore",this._queue=new f_,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M(this),this._firestoreClient.terminate()}}function D(i){return i._firestoreClient||M(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function M(i){var e;const t=i._freezeSettings(),a=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new S(i._databaseId,y,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var y,x;i._firestoreClient=new a_(i._authCredentials,i._appCheckCredentials,i._queue,a)}function de(i,e,t){const a=new ui;return i.asyncQueue.enqueue((0,je.Z)(function*(){try{yield l_(i,t),yield u_(i,e),a.resolve()}catch(f){const y=f;if(!("FirebaseError"===(T=y).name?T.code===Pt.FAILED_PRECONDITION||T.code===Pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&T instanceof DOMException)||22===T.code||20===T.code||11===T.code))throw y;ol("Error enabling offline persistence. Falling back to persistence disabled: "+y),a.reject(y)}var T})).then(()=>a.promise)}function Nr(i){if(i._initialized||i._terminated)throw new Zt(Pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(_n.fromBase64String(e))}catch(t){throw new Zt(Pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bi(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ws{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(Pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nu{constructor(e){this._methodName=e}}class ru{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(Pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(Pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _r(this._lat,e._lat)||_r(this._long,e._long)}}const $l=/^__.*__$/;class Gc{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cd(e,this.data,t,this.fieldTransforms)}}class lc{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uc(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dn()}}class lf{constructor(e,t,a,f,y,T){this.settings=e,this.databaseId=t,this.yt=a,this.ignoreUndefinedProperties=f,void 0===y&&this.na(),this.fieldTransforms=y||[],this.fieldMask=T||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ia({path:a,oa:!1});return f.ua(e),f}ca(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ia({path:a,oa:!1});return f.na(),f}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Mh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(uc(this.sa)&&$l.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Zf{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=a||If(e)}da(e,t,a,f=!1){return new lf({sa:e,methodName:t,fa:a,path:Qr.emptyPath(),oa:!1,la:f},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function iu(i){const e=i._freezeSettings(),t=If(i._databaseId);return new Zf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function uf(i,e,t,a,f,y={}){const T=i.da(y.merge||y.mergeFields?2:0,e,t,f);sl("Data must be an object, but it was:",T,a);const x=p_(a,T);let Q,re;if(y.merge)Q=new Il(T.fieldMask),re=T.fieldTransforms;else if(y.mergeFields){const me=[];for(const Ke of y.mergeFields){const It=zc(e,Ke,t);if(!T.contains(It))throw new Zt(Pt.INVALID_ARGUMENT,`Field '${It}' is specified in your field mask but missing from your input data.`);Ay(me,It)||me.push(It)}Q=new Il(me),re=T.fieldTransforms.filter(Ke=>Q.covers(Ke.field))}else Q=null,re=T.fieldTransforms;return new Gc(new Ua(x),Q,re)}class eh extends nu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function rr(i,e,t){return new lf({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Ir extends nu{_toFieldTransform(e){return new Ec(e.path,new Zn)}isEqual(e){return e instanceof Ir}}class Br extends nu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rr(this,e,!0),a=this._a.map(y=>Hs(y,t)),f=new Er(a);return new Ec(e.path,f)}isEqual(e){return this===e}}class fs extends nu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rr(this,e,!0),a=this._a.map(y=>Hs(y,t)),f=new Eo(a);return new Ec(e.path,f)}isEqual(e){return this===e}}class za extends nu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new tl(e.yt,oe(e.yt,this.wa));return new Ec(e.path,t)}isEqual(e){return this===e}}function hu(i,e,t,a){const f=i.da(1,e,t);sl("Data must be an object, but it was:",f,a);const y=[],T=Ua.empty();le(a,(Q,re)=>{const me=To(e,Q,t);re=(0,ze.m9)(re);const Ke=f.ca(me);if(re instanceof eh)y.push(me);else{const It=Hs(re,Ke);null!=It&&(y.push(me),T.set(me,It))}});const x=new Il(y);return new lc(T,x,f.fieldTransforms)}function Al(i,e,t,a,f,y){const T=i.da(1,e,t),x=[zc(e,a,t)],Q=[f];if(y.length%2!=0)throw new Zt(Pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let It=0;It<y.length;It+=2)x.push(zc(e,y[It])),Q.push(y[It+1]);const re=[],me=Ua.empty();for(let It=x.length-1;It>=0;--It)if(!Ay(re,x[It])){const Xt=x[It];let on=Q[It];on=(0,ze.m9)(on);const Yn=T.ca(Xt);if(on instanceof eh)re.push(Xt);else{const yr=Hs(on,Yn);null!=yr&&(re.push(Xt),me.set(Xt,yr))}}const Ke=new Il(re);return new lc(me,Ke,T.fieldTransforms)}function Wc(i,e,t,a=!1){return Hs(t,i.da(a?4:3,e))}function Hs(i,e){if(g_(i=(0,ze.m9)(i)))return sl("Unsupported field value:",e,i),p_(i,e);if(i instanceof nu)return function(t,a){if(!uc(a.sa))throw a.ha(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${t._methodName}() is not currently supported inside arrays`);const f=t._toFieldTransform(a);f&&a.fieldTransforms.push(f)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,a){const f=[];let y=0;for(const T of t){let x=Hs(T,a.aa(y));null==x&&(x={nullValue:"NULL_VALUE"}),f.push(x),y++}return{arrayValue:{values:f}}}(i,e)}return function(t,a){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oe(a.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const f=Qi.fromDate(t);return{timestampValue:Eu(a.yt,f)}}if(t instanceof Qi){const f=new Qi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Eu(a.yt,f)}}if(t instanceof ru)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bi)return{bytesValue:sd(a.yt,t._byteString)};if(t instanceof Do){const f=a.databaseId,y=t.firestore._databaseId;if(!y.isEqual(f))throw a.ha(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:od(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.ha(`Unsupported field value: ${rf(t)}`)}(i,e)}function p_(i,e){const t={};return Ne(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):le(i,(a,f)=>{const y=Hs(f,e.ra(a));null!=y&&(t[a]=y)}),{mapValue:{fields:t}}}function g_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Qi||i instanceof ru||i instanceof bi||i instanceof Do||i instanceof nu)}function sl(i,e,t){if(!g_(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=rf(t);throw e.ha("an object"===a?i+" a custom object":i+" "+a)}var a}function zc(i,e,t){if((e=(0,ze.m9)(e))instanceof ws)return e._internalPath;if("string"==typeof e)return To(i,e);throw Mh("Field path arguments must be of type string or ",i,!1,void 0,t)}const xu=new RegExp("[~\\*/\\[\\]]");function To(i,e,t){if(e.search(xu)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ws(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Mh(i,e,t,a,f){const y=a&&!a.isEmpty(),T=void 0!==f;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let Q="";return(y||T)&&(Q+=" (found",y&&(Q+=` in field ${a}`),T&&(Q+=` in document ${f}`),Q+=")"),new Zt(Pt.INVALID_ARGUMENT,x+i+Q)}function Ay(i,e){return i.some(t=>t.isEqual(e))}class fm{constructor(e,t,a,f,y){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=f,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Do(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(m_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ny extends fm{data(){return super.data()}}function m_(i,e){return"string"==typeof e?To(i,e):e instanceof ws?e._internalPath:e._delegate._internalPath}function J_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Zt(Pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class __{}class th extends __{}function cf(i,e,...t){let a=[];e instanceof __&&a.push(e),a=a.concat(t),function(f){const y=f.filter(x=>x instanceof rg).length,T=f.filter(x=>x instanceof pm).length;if(y>1||y>0&&T>0)throw new Zt(Pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const f of a)i=f._apply(i);return i}class pm extends th{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new pm(e,t,a)}_apply(e){const t=this._parse(e);return y_(e._query,t),new il(e.firestore,e.converter,ga(e._query,t))}_parse(e){const t=iu(e.firestore);return function(f,y,T,x,Q,re,me){let Ke;if(Q.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){ky(me,re);const It=[];for(const Xt of me)It.push(Py(x,f,Xt));Ke={arrayValue:{values:It}}}else Ke=Py(x,f,me)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||ky(me,re),Ke=Wc(T,"where",me,"in"===re||"not-in"===re);return Tn.create(Q,re,Ke)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class rg extends __{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,f){let y=a;const T=f.getFlattenedFilters();for(const x of T)y_(y,x),y=ga(y,x)}(e._query,t),new il(e.firestore,e.converter,ga(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class gm extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gm(e,t)}_apply(e){const t=function(a,f,y){if(null!==a.startAt)throw new Zt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Zt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const T=new _c(f,y);return function(x,Q){if(null===vu(x)){const re=uh(x);null!==re&&ig(0,re,Q.field)}}(a,T),T}(e._query,this._field,this._direction);return new il(e.firestore,e.converter,function(a,f){const y=a.explicitOrderBy.concat([f]);return new ul(a.path,a.collectionGroup,y,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class cc extends th{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new cc(e,t,a)}_apply(e){return new il(e.firestore,e.converter,Os(e._query,this._limit,this._limitType))}}class dc extends th{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new dc(e,t,a)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new il(e.firestore,e.converter,(f=t,new ul((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,f,a.endAt)));var a,f}}class mm extends th{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new mm(e,t,a)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new il(e.firestore,e.converter,(f=t,new ul((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,f)));var a,f}}function xy(i,e,t,a){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof fm)return function(f,y,T,x,Q){if(!x)throw new Zt(Pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const re=[];for(const me of cl(f))if(me.field.isKeyField())re.push(Dl(y,x.key));else{const Ke=x.data.field(me.field);if(fa(Ke))throw new Zt(Pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ke){const It=me.field.canonicalString();throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${It}' (used as the orderBy) does not exist.`)}re.push(Ke)}return new Sn(re,Q)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const f=iu(i.firestore);return function(y,T,x,Q,re,me){const Ke=y.explicitOrderBy;if(re.length>Ke.length)throw new Zt(Pt.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const It=[];for(let Xt=0;Xt<re.length;Xt++){const on=re[Xt];if(Ke[Xt].field.isKeyField()){if("string"!=typeof on)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof on}`);if(!Jc(y)&&-1!==on.indexOf("/"))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Q}() must be a plain document ID, but '${on}' contains a slash.`);const Yn=y.path.child(ti.fromString(on));if(!vn.isDocumentKey(Yn))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Q}() must result in a valid document path, but '${Yn}' is not because it contains an odd number of segments.`);const yr=new vn(Yn);It.push(Dl(T,yr))}else{const Yn=Wc(x,Q,on);It.push(Yn)}}return new Sn(It,me)}(i._query,i.firestore._databaseId,f,e,t,a)}}function Py(i,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new Zt(Pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(e)&&-1!==t.indexOf("/"))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ti.fromString(t));if(!vn.isDocumentKey(a))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Dl(i,new vn(a))}if(t instanceof Do)return Dl(i,t._key);throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(t)}.`)}function ky(i,e){if(!Array.isArray(i)||0===i.length)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function y_(i,e){if(e.isInequality()){const a=uh(i),f=e.field;if(null!==a&&!a.isEqual(f))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${f.toString()}'`);const y=vu(i);null!==y&&ig(0,f,y)}const t=function(a,f){for(const y of a)for(const T of y.getFlattenedFilters())if(f.indexOf(T.op)>=0)return T.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Zt(Pt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ig(i,e,t){if(!t.isEqual(e))throw new Zt(Pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class v_{convertValue(e,t="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dn()}}convertObject(e,t){const a={};return le(e.fields,(f,y)=>{a[f]=this.convertValue(y,t)}),a}convertGeoPoint(e){return new ru(Li(e.latitude),Li(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=_u(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new Qi(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ti.fromString(e);wn(Eg(a));const f=new B(a.get(1),a.get(3)),y=new vn(a.popFirst(5));return f.isEqual(t)||Ki(`Document ${y} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}function b_(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class Ly extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Do(this.firestore,null,t)}}class df{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends fm{constructor(e,t,a,f,y,T){super(e,t,a,f,T),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(m_("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class _m extends Kc{data(e={}){return super.data(e)}}class Oh{constructor(e,t,a,f){this._firestore=e,this._userDataWriter=t,this._snapshot=f,this.metadata=new df(f.hasPendingWrites,f.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new _m(this._firestore,this._userDataWriter,a.key,a,new df(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(Pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,f){if(a._snapshot.oldDocs.isEmpty()){let y=0;return a._snapshot.docChanges.map(T=>({type:"added",doc:new _m(a._firestore,a._userDataWriter,T.doc.key,T.doc,new df(a._snapshot.mutatedKeys.has(T.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:y++}))}{let y=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(T=>f||3!==T.type).map(T=>{const x=new _m(a._firestore,a._userDataWriter,T.doc.key,T.doc,new df(a._snapshot.mutatedKeys.has(T.doc.key),a._snapshot.fromCache),a.query.converter);let Q=-1,re=-1;return 0!==T.type&&(Q=y.indexOf(T.doc.key),y=y.delete(T.doc.key)),1!==T.type&&(y=y.add(T.doc),re=y.indexOf(T.doc.key)),{type:By(T.type),doc:x,oldIndex:Q,newIndex:re}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function By(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dn()}}function w_(i,e){return i instanceof Kc&&e instanceof Kc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Oh&&e instanceof Oh&&i._firestore===e._firestore&&cm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class nh extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Do(this.firestore,null,t)}}function ey(i,e,t){i=xi(i,Do);const a=xi(i.firestore,o),f=b_(i.converter,e,t);return sg(a,[uf(iu(a),"setDoc",i._key,f,null!==i.converter,t).toMutation(i._key,Xs.none())])}function ty(i,e,t,...a){i=xi(i,Do);const f=xi(i.firestore,o),y=iu(f);let T;return T="string"==typeof(e=(0,ze.m9)(e))||e instanceof ws?Al(y,"updateDoc",i._key,e,t,a):hu(y,"updateDoc",i._key,e),sg(f,[T.toMutation(i._key,Xs.exists(!0))])}function Gy(i,...e){var t,a,f;i=(0,ze.m9)(i);let y={includeMetadataChanges:!1},T=0;"object"!=typeof e[T]||ng(e[T])||(y=e[T],T++);const x={includeMetadataChanges:y.includeMetadataChanges};if(ng(e[T])){const Ke=e[T];e[T]=null===(t=Ke.next)||void 0===t?void 0:t.bind(Ke),e[T+1]=null===(a=Ke.error)||void 0===a?void 0:a.bind(Ke),e[T+2]=null===(f=Ke.complete)||void 0===f?void 0:f.bind(Ke)}let Q,re,me;if(i instanceof Do)re=xi(i.firestore,o),me=jo(i._key.path),Q={next:Ke=>{e[T]&&e[T](ny(re,i,Ke))},error:e[T+1],complete:e[T+2]};else{const Ke=xi(i,il);re=xi(Ke.firestore,o),me=Ke._query;const It=new nh(re);Q={next:Xt=>{e[T]&&e[T](new Oh(re,It,Ke,Xt))},error:e[T+1],complete:e[T+2]},J_(i._query)}return function(Ke,It,Xt,on){const Yn=new eg(on),yr=new Jh(It,Yn,Xt);return Ke.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return Hc(yield ac(Ke),yr)})),()=>{Yn.bc(),Ke.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return qg(yield ac(Ke),yr)}))}}(D(re),me,x,Q)}function sg(i,e){return function(t,a){const f=new ui;return t.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return function qm(i,e,t){return Gp.apply(this,arguments)}(yield Qd(t),a,f)})),f.promise}(D(i),e)}function ny(i,e,t){const a=t.docs.get(e._key),f=new nh(i);return new Kc(i,f,e._key,a,new df(t.hasPendingWrites,t.fromCache),e.converter)}const wv={maxAttempts:5};class Wy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}set(e,t,a){this._verifyNotCommitted();const f=hf(e,this._firestore),y=b_(f.converter,t,a),T=uf(this._dataReader,"WriteBatch.set",f._key,y,null!==f.converter,a);return this._mutations.push(T.toMutation(f._key,Xs.none())),this}update(e,t,a,...f){this._verifyNotCommitted();const y=hf(e,this._firestore);let T;return T="string"==typeof(t=(0,ze.m9)(t))||t instanceof ws?Al(this._dataReader,"WriteBatch.update",y._key,t,a,f):hu(this._dataReader,"WriteBatch.update",y._key,t),this._mutations.push(T.toMutation(y._key,Xs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hf(e,this._firestore);return this._mutations=this._mutations.concat(new Sd(t._key,Xs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(Pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(i,e){if((i=(0,ze.m9)(i)).firestore!==e)throw new Zt(Pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Ev extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=iu(e)}get(e){const t=hf(e,this._firestore),a=new Ly(this._firestore);return this._transaction.lookup([t._key]).then(f=>{if(!f||1!==f.length)return dn();const y=f[0];if(y.isFoundDocument())return new fm(this._firestore,a,y.key,y,t.converter);if(y.isNoDocument())return new fm(this._firestore,a,t._key,null,t.converter);throw dn()})}set(e,t,a){const f=hf(e,this._firestore),y=b_(f.converter,t,a),T=uf(this._dataReader,"Transaction.set",f._key,y,null!==f.converter,a);return this._transaction.set(f._key,T),this}update(e,t,a,...f){const y=hf(e,this._firestore);let T;return T="string"==typeof(t=(0,ze.m9)(t))||t instanceof ws?Al(this._dataReader,"Transaction.update",y._key,t,a,f):hu(this._dataReader,"Transaction.update",y._key,t),this._transaction.update(y._key,T),this}delete(e){const t=hf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hf(e,this._firestore),a=new nh(this._firestore);return super.get(e).then(f=>new Kc(this._firestore,a,t._key,f._document,new df(!1,!1),t.converter))}}function D_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function iy(){if(typeof Uint8Array>"u")throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function sy(){if(!function Or(){return typeof atob<"u"}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Ds=Ht.SDK_VERSION,(0,Ht._registerComponent)(new gt.wA("firestore",(t,{instanceIdentifier:a,options:f})=>{const y=t.getProvider("app").getImmediate(),T=new o(new Za(t.getProvider("auth-internal")),new ka(t.getProvider("app-check-internal")),function(x,Q){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Zt(Pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B(x.options.projectId,Q)}(y,a),y);return f=Object.assign({useFetchStreams:e},f),T._setSettings(f),T},"PUBLIC").setMultipleInstances(!0)),(0,Ht.registerVersion)(vl,"3.8.0",i),(0,Ht.registerVersion)(vl,"3.8.0","esm2017")}();class og{constructor(e){this._delegate=e}static fromBase64String(e){return sy(),new og(bi.fromBase64String(e))}static fromUint8Array(e){return iy(),new og(bi.fromUint8Array(e))}toBase64(){return sy(),this._delegate.toBase64()}toUint8Array(){return iy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ym(i){return function oy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class Qf{enableIndexedDbPersistence(e,t){return function G(i,e){Nr(i=xi(i,o));const t=D(i),a=i._freezeSettings(),f=new qd;return de(t,f,new Gf(f,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function te(i){Nr(i=xi(i,o));const e=D(i),t=i._freezeSettings(),a=new qd;return de(e,a,new Jp(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Xe(i){if(i._initialized&&!i._terminated)throw new Zt(Pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return i._queue.enqueueAndForgetEvenWhileRestricted((0,je.Z)(function*(){try{yield(t=(0,je.Z)(function*(a){if(!Ti.C())return Promise.resolve();const f=a+"main";yield Ti.delete(f)}),function(a){return t.apply(this,arguments)})(xg(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qy{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof B||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ol("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function zf(i,e,t,a={}){var f;const y=(i=xi(i,Xp))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&ol("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let T,x;if("string"==typeof a.mockUserToken)T=a.mockUserToken,x=io.MOCK_USER;else{T=(0,ze.Sg)(a.mockUserToken,null===(f=i._app)||void 0===f?void 0:f.options.projectId);const Q=a.mockUserToken.sub||a.mockUserToken.user_id;if(!Q)throw new Zt(Pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new io(Q)}i._authCredentials=new bl(new Ya(T,x))}}(this._delegate,e,t,a)}enableNetwork(){return function Dt(i){return function Ah(i){return i.asyncQueue.enqueue((0,je.Z)(function*(){const e=yield tu(i),t=yield Zd(i);return e.setNetworkEnabled(!0),function(a){const f=yn(a);return f._u.delete(0),Na(f)}(t)}))}(D(i=xi(i,o)))}(this._delegate)}disableNetwork(){return function Gt(i){return function Xd(i){return i.asyncQueue.enqueue((0,je.Z)(function*(){const e=yield tu(i),t=yield Zd(i);return e.setNetworkEnabled(!1),(a=(0,je.Z)(function*(f){const y=yn(f);y._u.add(0),yield md(y),y.gu.set("Offline")}),function(f){return a.apply(this,arguments)})(t);var a}))}(D(i=xi(i,o)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,jl("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function st(i){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return function q_(i,e){return sm.apply(this,arguments)}(yield Qd(e),t)})),t.promise}(D(i=xi(i,o)))}(this._delegate)}onSnapshotsInSync(e){return function bv(i,e){return function Q_(i,e){const t=new eg(e);return i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return a=yield ac(i),f=t,yn(a).Ru.add(f),void f.next();var a,f})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return a=yield ac(i),f=t,void yn(a).Ru.delete(f);var a,f}))}}(D(i=xi(i,o)),ng(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xh(this,Kf(this._delegate,e))}catch(t){throw su(t,"collection()","Firestore.collection()")}}doc(e){try{return new hc(this,sc(this._delegate,e))}catch(t){throw su(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fu(this,function Mu(i,e){if(i=xi(i,Xp),lm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(Pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new il(i,null,(t=e,new ul(ti.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw su(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dv(i,e,t){i=xi(i,o);const a=Object.assign(Object.assign({},wv),t);return function(f){if(f.maxAttempts<1)throw new Zt(Pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(f,y,T){const x=new ui;return f.asyncQueue.enqueueAndForget((0,je.Z)(function*(){const Q=yield function Sh(i){return oc(i).then(e=>e.datastore)}(f);new qf(f.asyncQueue,Q,T,y,x).run()})),x.promise}(D(i),f=>e(new Ev(i,f)),a)}(this._delegate,t=>e(new Mv(this,t)))}batch(){return D(this._delegate),new C_(new Wy(this._delegate,e=>sg(this._delegate,e)))}loadBundle(e){return function Cn(i,e){const t=D(i=xi(i,o)),a=new u;return function d_(i,e,t,a){const f=function(y,T){let x;return x="string"==typeof y?(new TextEncoder).encode(y):y,Q=function(Q,re){if(Q instanceof Uint8Array)return dm(Q,void 0);if(Q instanceof ArrayBuffer)return dm(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new s_(Q,T);var Q}(t,If(e));i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){!function am(i,e,t){const a=yn(i);var f;(f=(0,je.Z)(function*(y,T,x){try{const Q=yield T.getMetadata();if(yield function(It,Xt){const on=yn(It),Yn=Ks(Xt.createTime);return on.persistence.runTransaction("hasNewerBundle","readonly",yr=>on.Ns.getBundleMetadata(yr,Xt.id)).then(yr=>!!yr&&yr.createTime.compareTo(Yn)>=0)}(y.localStore,Q))return yield T.close(),x._completeWith({taskState:"Success",documentsLoaded:(It=Q).totalDocuments,bytesLoaded:It.totalBytes,totalDocuments:It.totalDocuments,totalBytes:It.totalBytes}),Promise.resolve(new Set);x._updateProgress(Zg(Q));const re=new Mf(Q,y.localStore,T.yt);let me=yield T.mc();for(;me;){const It=yield re.Fu(me);It&&x._updateProgress(It),me=yield T.mc()}const Ke=yield re.complete();return yield jc(y,Ke.Lu,void 0),yield function(It,Xt){const on=yn(It);return on.persistence.runTransaction("Save bundle","readwrite",Yn=>on.Ns.saveBundleMetadata(Yn,Xt))}(y.localStore,Q),x._completeWith(Ke.progress),Promise.resolve(Ke.Bu)}catch(Q){return ol("SyncEngine",`Loading bundle failed with ${Q}`),x._failWith(Q),Promise.resolve(new Set)}var It}),function(y,T,x){return f.apply(this,arguments)})(a,e,t).then(f=>{a.sharedClientState.notifyBundleLoaded(f)})}(yield Qd(i),f,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Pr(i,e){return function h_(i,e){return i.asyncQueue.enqueue((0,je.Z)(function*(){return function(t,a){const f=yn(t);return f.persistence.runTransaction("Get named query","readonly",y=>f.Ns.getNamedQuery(y,a))}(yield af(i),e)}))}(D(i=xi(i,o)),e).then(t=>t?new il(i,null,t.query):null)}(this._delegate,e).then(t=>t?new fu(this,t):null)}}class T_ extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new og(new bi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hc.forKey(t,this.firestore,null)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new T_(e)}get(e){const t=rh(e);return this._delegate.get(t).then(a=>new vm(this._firestore,new Kc(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const f=rh(e);return a?(D_("Transaction.set",a),this._delegate.set(f,t,a)):this._delegate.set(f,t),this}update(e,t,a,...f){const y=rh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...f),this}delete(e){const t=rh(e);return this._delegate.delete(t),this}}class C_{constructor(e){this._delegate=e}set(e,t,a){const f=rh(e);return a?(D_("WriteBatch.set",a),this._delegate.set(f,t,a)):this._delegate.set(f,t),this}update(e,t,a,...f){const y=rh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,a,...f),this}delete(e){const t=rh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lg{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new _m(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bm(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=lg.INSTANCES;let f=a.get(e);f||(f=new WeakMap,a.set(e,f));let y=f.get(t);return y||(y=new lg(e,new T_(e),t),f.set(t,y)),y}}lg.INSTANCES=new WeakMap;class hc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new T_(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hc(t,new Do(t._delegate,a,new vn(e)))}static forKey(e,t,a){return new hc(t,new Do(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new xh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xh(this.firestore,Kf(this._delegate,e))}catch(t){throw su(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof Do&&i_(this._delegate,e)}set(e,t){t=D_("DocumentReference.set",t);try{return t?ey(this._delegate,e,t):ey(this._delegate,e)}catch(a){throw su(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?ty(this._delegate,e):ty(this._delegate,e,t,...a)}catch(f){throw su(f,"updateDoc()","DocumentReference.update()")}}delete(){return function yv(i){return sg(xi(i.firestore,o),[new Sd(i._key,Xs.none())])}(this._delegate)}onSnapshot(...e){const t=Ov(e),a=Fr(e,f=>new vm(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return Gy(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function Vy(i){i=xi(i,Do);const e=xi(i.firestore,o),t=D(e),a=new nh(e);return function Nh(i,e){const t=new ui;return i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return(a=(0,je.Z)(function*(f,y,T){try{const x=yield function(Q,re){const me=yn(Q);return me.persistence.runTransaction("read document","readonly",Ke=>me.localDocuments.getDocument(Ke,re))}(f,y);x.isFoundDocument()?T.resolve(x):x.isNoDocument()?T.resolve(null):T.reject(new Zt(Pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const Q=$d(x,`Failed to get document '${y} from cache`);T.reject(Q)}}),function(f,y,T){return a.apply(this,arguments)})(yield af(i),e,t);var a})),t.promise}(t,i._key).then(f=>new Kc(e,a,i._key,f,new df(null!==f&&f.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Uy(i){i=xi(i,Do);const e=xi(i.firestore,o);return Rh(D(e),i._key,{source:"server"}).then(t=>ny(e,i,t))}(this._delegate):function E_(i){i=xi(i,Do);const e=xi(i.firestore,o);return Rh(D(e),i._key).then(t=>ny(e,i,t))}(this._delegate),t.then(a=>new vm(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new hc(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function su(i,e,t){return i.message=i.message.replace(e,t),i}function Ov(i){for(const e of i)if("object"==typeof e&&!ym(e))return e;return{}}function Fr(i,e){var t,a;let f;return f=ym(i[0])?i[0]:ym(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:y=>{f.next&&f.next(e(y))},error:null===(t=f.error)||void 0===t?void 0:t.bind(f),complete:null===(a=f.complete)||void 0===a?void 0:a.bind(f)}}class vm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return w_(this._delegate,e._delegate)}}class bm extends vm{data(e){const t=this._delegate.data(e);return function Pa(i,e){i||dn()}(void 0!==t),t}}class fu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new T_(e)}where(e,t,a){try{return new fu(this.firestore,cf(this._delegate,function Ry(i,e,t){const a=e,f=m_("where",i);return pm._create(f,a,t)}(e,t,a)))}catch(f){throw su(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fu(this.firestore,cf(this._delegate,function X_(i,e="asc"){const t=e,a=m_("orderBy",i);return gm._create(a,t)}(e,t)))}catch(a){throw su(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fu(this.firestore,cf(this._delegate,function mv(i){return n_("limit",i),cc._create("limit",i,"F")}(e)))}catch(t){throw su(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fu(this.firestore,cf(this._delegate,function My(i){return n_("limitToLast",i),cc._create("limitToLast",i,"L")}(e)))}catch(t){throw su(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fu(this.firestore,cf(this._delegate,function _d(...i){return dc._create("startAt",i,!0)}(...e)))}catch(t){throw su(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fu(this.firestore,cf(this._delegate,function yd(...i){return dc._create("startAfter",i,!1)}(...e)))}catch(t){throw su(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fu(this.firestore,cf(this._delegate,function Oy(...i){return mm._create("endBefore",i,!1)}(...e)))}catch(t){throw su(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fu(this.firestore,cf(this._delegate,function _v(...i){return mm._create("endAt",i,!0)}(...e)))}catch(t){throw su(t,"endAt()","Query.endAt()")}}isEqual(e){return cm(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function jy(i){i=xi(i,il);const e=xi(i.firestore,o),t=D(e),a=new nh(e);return function Z_(i,e){const t=new ui;return i.asyncQueue.enqueueAndForget((0,je.Z)(function*(){return(a=(0,je.Z)(function*(f,y,T){try{const x=yield kc(f,y,!0),Q=new Jg(y,x.Hi),re=Q.Wu(x.documents),me=Q.applyChanges(re,!1);T.resolve(me.snapshot)}catch(x){const Q=$d(x,`Failed to execute query '${y} against cache`);T.reject(Q)}}),function(f,y,T){return a.apply(this,arguments)})(yield af(i),e,t);var a})),t.promise}(t,i._query).then(f=>new Oh(e,a,i,f))}(this._delegate):"server"===e?.source?function $y(i){i=xi(i,il);const e=xi(i.firestore,o),t=D(e),a=new nh(e);return c_(t,i._query,{source:"server"}).then(f=>new Oh(e,a,i,f))}(this._delegate):function Hy(i){i=xi(i,il);const e=xi(i.firestore,o),t=D(e),a=new nh(e);return J_(i._query),c_(t,i._query).then(f=>new Oh(e,a,i,f))}(this._delegate),t.then(a=>new ay(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=Ov(e),a=Fr(e,f=>new ay(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return Gy(this._delegate,t,a)}withConverter(e){return new fu(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ay{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ug(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new bm(this._firestore,a))})}isEqual(e){return w_(this._delegate,e._delegate)}}class xh extends fu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hc(this.firestore,e):null}doc(e){try{return new hc(this.firestore,void 0===e?sc(this._delegate):sc(this._delegate,e))}catch(t){throw su(t,"doc()","CollectionReference.doc()")}}add(e){return function vv(i,e){const t=xi(i.firestore,o),a=sc(i),f=b_(i.converter,e);return sg(t,[uf(iu(i.firestore),"addDoc",a._key,f,null!==i.converter,{}).toMutation(a._key,Xs.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new hc(this.firestore,t))}isEqual(e){return i_(this._delegate,e._delegate)}withConverter(e){return new xh(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function rh(i){return xi(i,Do)}class Xo{constructor(...e){this._delegate=new ws(...e)}static documentId(){return new Xo(Qr.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof ws&&this._delegate._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cv(){return new Ir("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cg(e)}static delete(){const e=function Tv(){return new eh("deleteField")}();return e._methodName="FieldValue.delete",new cg(e)}static arrayUnion(...e){const t=function Iv(...i){return new Br("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new cg(t)}static arrayRemove(...e){const t=function Sv(...i){return new fs("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new cg(t)}static increment(e){const t=function Av(i){return new za("increment",i)}(e);return t._methodName="FieldValue.increment",new cg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yy={Firestore:qy,GeoPoint:ru,Timestamp:Qi,Blob:og,Transaction:Mv,WriteBatch:C_,DocumentReference:hc,DocumentSnapshot:vm,Query:fu,QueryDocumentSnapshot:bm,QuerySnapshot:ay,CollectionReference:xh,FieldPath:Xo,FieldValue:cg,setLogLevel:function ag(i){!function mu(i){xa.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function xv(i){(function Zy(i,e){i.INTERNAL.registerComponent(new gt.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),f=t.getProvider("firestore").getImmediate();return e(a,f)},"PUBLIC").setServiceProps(Object.assign({},Yy)))})(i,(e,t)=>new qy(e,t,new Qf)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(ct.Z);var Ph=L(3385),Qy=L(6217),Jy=L(9260);function ev(i,e){return function Xy(i,e=U.z){return new ee.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(i,e)}function ly(i,e){return ev(i,e).pipe((0,_e.U)(t=>({payload:t,type:"query"})))}function ff(i,e){return ly(i,e).pipe((0,Ge.O)(void 0),we(),(0,_e.U)(([t,a])=>{const f=a.payload.docChanges(),y=f.map(T=>({type:T.type,payload:T}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((T,x)=>{const Q=f.find(me=>me.doc.ref.isEqual(T.ref)),re=t?.payload.docs.find(me=>me.ref.isEqual(T.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(T.metadata)||!Q&&re&&JSON.stringify(re.metadata)===JSON.stringify(T.metadata)||y.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:T}})}),y}))}function tv(i,e,t){return ff(i,t).pipe((0,Ue.R)((a,f)=>function kv(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function I_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return uy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uy(i,e.oldIndex,1)}return i}(i,a))}),i}(a,f.map(y=>y.payload),e),[]),(0,Nt.x)(),(0,_e.U)(a=>a.map(f=>({type:f.type,payload:f}))))}function uy(i,e,t,...a){const f=i.slice();return f.splice(e,t,...a),f}function cy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class dy{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=ff(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_e.U)(a=>a.filter(f=>e.indexOf(f.type)>-1)))),t.pipe((0,Ge.O)(void 0),we(),(0,mt.h)(([a,f])=>f.length>0||!a),(0,_e.U)(([a,f])=>f),Oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ue.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=cy(e);return tv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oe.iC)}valueChanges(e={}){return ly(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Oe.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(Oe.iC)}add(e){return this.ref.add(e)}doc(e){return new hy(this.ref.doc(e),this.afs)}}class hy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:f,query:y}=nv(a,t);return new dy(f,y,this.afs)}snapshotChanges(){return function Pv(i,e){return ev(i,e).pipe((0,Ge.O)(void 0),we(),(0,_e.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Oe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_e.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ce.D)(this.ref.get(e)).pipe(Oe.iC)}}class Fv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ff(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,mt.h)(t=>t.length>0),Oe.iC):ff(this.query,this.afs.schedulers.outsideAngular).pipe(Oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ue.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=cy(e);return tv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oe.iC)}valueChanges(e={}){return ly(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(a=>a.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),Oe.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(Oe.iC)}}const dg=new h.OlP("angularfire2.enableFirestorePersistence"),hg=new h.OlP("angularfire2.firestore.persistenceSettings"),Lv=new h.OlP("angularfire2.firestore.settings"),Bv=new h.OlP("angularfire2.firestore.use-emulator");function nv(i,e=(t=>t)){return{query:e(i),ref:i}}let fy=(()=>{class i{constructor(t,a,f,y,T,x,Q,re,me,Ke,It,Xt,on,Yn,yr,mo,ea){this.schedulers=Q;const Is=(0,lt.on)(t,x,a),ya=me;Ke&&(0,Ph.nw)(Is,x,It,on,Yn,yr,Xt,mo),[this.firestore,this.persistenceEnabled$]=(0,lt.cc)(`${Is.name}.firestore`,"AngularFirestore",Is.name,()=>{const xs=x.runOutsideAngular(()=>Is.firestore());if(y&&xs.settings(y),ya&&xs.useEmulator(...ya),f&&!(0,xt.PM)(T)){const js=()=>{try{return(0,Ce.D)(xs.enablePersistence(re||void 0).then(()=>!0,()=>!1))}catch(va){return typeof console<"u"&&console.warn(va),(0,Me.of)(!1)}};return[xs,x.runOutsideAngular(js)]}return[xs,(0,Me.of)(!1)]},[y,ya,f])}collection(t,a){let f;f="string"==typeof t?this.firestore.collection(t):t;const{ref:y,query:T}=nv(f,a),x=this.schedulers.ngZone.run(()=>y);return new dy(x,T,this)}collectionGroup(t,a){const f=a||(T=>T),y=this.firestore.collectionGroup(t);return new Fv(f(y),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const f=this.schedulers.ngZone.run(()=>a);return new hy(f,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(h.LFG(lt.Dh),h.LFG(lt.xv,8),h.LFG(dg,8),h.LFG(Lv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Oe.HU),h.LFG(hg,8),h.LFG(Bv,8),h.LFG(Ph.zQ,8),h.LFG(Ph.Qv,8),h.LFG(Ph.L6,8),h.LFG(Ph._Q,8),h.LFG(Ph.rT,8),h.LFG(Ph.lh,8),h.LFG(Ph.f7,8),h.LFG(Qy.nm,8))},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),rv=(()=>{class i{constructor(){Jy.Z.registerVersion("angularfire",Oe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:dg,useValue:!0},{provide:hg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=h.oAB({type:i}),i.\u0275inj=h.cJS({providers:[fy]}),i})()},377:(cn,dt,L)=>{L.d(dt,{Q1:()=>W,TE:()=>kt,hP:()=>oa});var h=L(9751),U=L(9646),ee=L(8996),Ce=L(4986),Me=L(4482),Oe=L(5403),Pe=L(4004),Ze=L(3900),we=L(2122),_e=L(4650),Ue=L(2011),Nt=L(3942),mt=L(5861),lt=L(9681),xt=L(2090),yt=L(4859);const ct="firebasestorage.googleapis.com",je="storageBucket";class ze extends xt.ZR{constructor(K,fe,Ie=0){super(jt(K),`Firebase Storage: ${fe} (${jt(K)})`),this.status_=Ie,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return jt(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function jt(Y){return"storage/"+Y}function nt(){return new ze("unknown","An unknown error occurred, please check the error payload for server response.")}function tt(){return new ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Ut(){return new ze("canceled","User canceled the upload/download.")}function tn(){return new ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function We(Y){return new ze("invalid-argument",Y)}function Ye(){return new ze("app-deleted","The Firebase app was deleted.")}function Be(Y){return new ze("invalid-root-operation","The operation '"+Y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ot(Y,K){return new ze("invalid-format","String does not match format '"+Y+"': "+K)}function en(Y){throw new ze("internal-error","Internal error: "+Y)}class an{constructor(K,fe){this.bucket=K,this.path_=fe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,fe){let Ie;try{Ie=an.makeFromUrl(K,fe)}catch{return new an(K,"")}if(""===Ie.path)return Ie;throw function An(Y){return new ze("invalid-default-bucket","Invalid default bucket '"+Y+"'.")}(K)}static makeFromUrl(K,fe){let Ie=null;const He="([A-Za-z0-9.\\-_]+)",Vn=new RegExp("^gs://"+He+"(/(.*))?$","i");function cr(zi){zi.path_=decodeURIComponent(zi.path)}const $i=fe.replace(/[.]/g,"\\."),Wi=[{regex:Vn,indices:{bucket:1,path:3},postModify:function Ct(zi){"/"===zi.path.charAt(zi.path.length-1)&&(zi.path_=zi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${$i}/v[A-Za-z0-9_]+/b/${He}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:cr},{regex:new RegExp(`^https?://${fe===ct?"(?:storage.googleapis.com|storage.cloud.google.com)":fe}/${He}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:cr}];for(let zi=0;zi<Wi.length;zi++){const Bo=Wi[zi],po=Bo.regex.exec(K);if(po){let ne=po[Bo.indices.path];ne||(ne=""),Ie=new an(po[Bo.indices.bucket],ne),Bo.postModify(Ie);break}}if(null==Ie)throw function Kt(Y){return new ze("invalid-url","Invalid URL '"+Y+"'.")}(K);return Ie}}class Dr{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function ir(Y){return"string"==typeof Y||Y instanceof String}function Tr(Y){return hn()&&Y instanceof Blob}function hn(){return typeof Blob<"u"&&!(0,xt.UG)()}function br(Y,K,fe,Ie){if(Ie<K)throw We(`Invalid value for '${Y}'. Expected ${K} or greater.`);if(Ie>fe)throw We(`Invalid value for '${Y}'. Expected ${fe} or less.`)}function Gn(Y,K,fe){let Ie=K;return null==fe&&(Ie=`https://${K}`),`${fe}://${Ie}/v0${Y}`}function Ar(Y){const K=encodeURIComponent;let fe="?";for(const Ie in Y)Y.hasOwnProperty(Ie)&&(fe=fe+(K(Ie)+"=")+K(Y[Ie])+"&");return fe=fe.slice(0,-1),fe}var Yr=(()=>{return(Y=Yr||(Yr={}))[Y.NO_ERROR=0]="NO_ERROR",Y[Y.NETWORK_ERROR=1]="NETWORK_ERROR",Y[Y.ABORT=2]="ABORT",Yr;var Y})();function Gr(Y,K){const fe=Y>=500&&Y<600,He=-1!==[408,429].indexOf(Y),Ct=-1!==K.indexOf(Y);return fe||He||Ct}class Qn{constructor(K,fe,Ie,He,Ct,_t,Vn,Dn,cr,qn,$i,Gi=!0){this.url_=K,this.method_=fe,this.headers_=Ie,this.body_=He,this.successCodes_=Ct,this.additionalRetryCodes_=_t,this.callback_=Vn,this.errorCallback_=Dn,this.timeout_=cr,this.progressCallback_=qn,this.connectionFactory_=$i,this.retry=Gi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((yi,Ai)=>{this.resolve_=yi,this.reject_=Ai,this.start_()})}start_(){const fe=(Ie,He)=>{const Ct=this.resolve_,_t=this.reject_,Vn=He.connection;if(He.wasSuccessCode)try{const Dn=this.callback_(Vn,Vn.getResponse());!function vr(Y){return void 0!==Y}(Dn)?Ct():Ct(Dn)}catch(Dn){_t(Dn)}else if(null!==Vn){const Dn=nt();Dn.serverResponse=Vn.getErrorText(),_t(this.errorCallback_?this.errorCallback_(Vn,Dn):Dn)}else _t(He.canceled?this.appDelete_?Ye():Ut():tt())};this.canceled_?fe(0,new fr(!1,null,!0)):this.backoffId_=function jn(Y,K,fe){let Ie=1,He=null,Ct=null,_t=!1,Vn=0;function Dn(){return 2===Vn}let cr=!1;function qn(...qr){cr||(cr=!0,K.apply(null,qr))}function $i(qr){He=setTimeout(()=>{He=null,Y(yi,Dn())},qr)}function Gi(){Ct&&clearTimeout(Ct)}function yi(qr,...vs){if(cr)return void Gi();if(qr)return Gi(),void qn.call(null,qr,...vs);if(Dn()||_t)return Gi(),void qn.call(null,qr,...vs);let Wi;Ie<64&&(Ie*=2),1===Vn?(Vn=2,Wi=0):Wi=1e3*(Ie+Math.random()),$i(Wi)}let Ai=!1;function is(qr){Ai||(Ai=!0,Gi(),!cr&&(null!==He?(qr||(Vn=2),clearTimeout(He),$i(0)):qr||(Vn=1)))}return $i(0),Ct=setTimeout(()=>{_t=!0,is(!0)},fe),is}((Ie,He)=>{if(He)return void Ie(!1,new fr(!1,null,!0));const Ct=this.connectionFactory_();this.pendingConnection_=Ct;const _t=Vn=>{null!==this.progressCallback_&&this.progressCallback_(Vn.loaded,Vn.lengthComputable?Vn.total:-1)};null!==this.progressCallback_&&Ct.addUploadProgressListener(_t),Ct.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ct.removeUploadProgressListener(_t),this.pendingConnection_=null;const Vn=Ct.getErrorCode()===Yr.NO_ERROR,Dn=Ct.getStatus();if((!Vn||Gr(Dn,this.additionalRetryCodes_))&&this.retry){const qn=Ct.getErrorCode()===Yr.ABORT;return void Ie(!1,new fr(!1,null,qn))}const cr=-1!==this.successCodes_.indexOf(Dn);Ie(!0,new fr(cr,Ct))})},fe,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function gi(Y){Y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fr{constructor(K,fe,Ie){this.wasSuccessCode=K,this.connection=fe,this.canceled=!!Ie}}function Ii(...Y){const K=function Lr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==K){const fe=new K;for(let Ie=0;Ie<Y.length;Ie++)fe.append(Y[Ie]);return fe.getBlob()}if(hn())return new Blob(Y);throw new ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}const gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Si{constructor(K,fe){this.data=K,this.contentType=fe||null}}function mr(Y,K){switch(Y){case gn.RAW:return new Si(si(K));case gn.BASE64:case gn.BASE64URL:return new Si(mn(Y,K));case gn.DATA_URL:return new Si(function bn(Y){const K=new Bt(Y);return K.base64?mn(gn.BASE64,K.rest):function Rr(Y){let K;try{K=decodeURIComponent(Y)}catch{throw ot(gn.DATA_URL,"Malformed data URL.")}return si(K)}(K.rest)}(K),function zn(Y){return new Bt(Y).contentType}(K))}throw nt()}function si(Y){const K=[];for(let fe=0;fe<Y.length;fe++){let Ie=Y.charCodeAt(fe);Ie<=127?K.push(Ie):Ie<=2047?K.push(192|Ie>>6,128|63&Ie):55296==(64512&Ie)?fe<Y.length-1&&56320==(64512&Y.charCodeAt(fe+1))?(Ie=65536|(1023&Ie)<<10|1023&Y.charCodeAt(++fe),K.push(240|Ie>>18,128|Ie>>12&63,128|Ie>>6&63,128|63&Ie)):K.push(239,191,189):56320==(64512&Ie)?K.push(239,191,189):K.push(224|Ie>>12,128|Ie>>6&63,128|63&Ie)}return new Uint8Array(K)}function mn(Y,K){switch(Y){case gn.BASE64:{const He=-1!==K.indexOf("-"),Ct=-1!==K.indexOf("_");if(He||Ct)throw ot(Y,"Invalid character '"+(He?"-":"_")+"' found: is it base64url encoded?");break}case gn.BASE64URL:{const He=-1!==K.indexOf("+"),Ct=-1!==K.indexOf("/");if(He||Ct)throw ot(Y,"Invalid character '"+(He?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let fe;try{fe=function Ri(Y){if(typeof atob>"u")throw function At(Y){return new ze("unsupported-environment",`${Y} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Y)}(K)}catch(He){throw He.message.includes("polyfill")?He:ot(Y,"Invalid character found")}const Ie=new Uint8Array(fe.length);for(let He=0;He<fe.length;He++)Ie[He]=fe.charCodeAt(He);return Ie}class Bt{constructor(K){this.base64=!1,this.contentType=null;const fe=K.match(/^data:([^,]+)?,/);if(null===fe)throw ot(gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ie=fe[1]||null;null!=Ie&&(this.base64=function Bn(Y,K){return Y.length>=K.length&&Y.substring(Y.length-K.length)===K}(Ie,";base64"),this.contentType=this.base64?Ie.substring(0,Ie.length-7):Ie),this.rest=K.substring(K.indexOf(",")+1)}}class tr{constructor(K,fe){let Ie=0,He="";Tr(K)?(this.data_=K,Ie=K.size,He=K.type):K instanceof ArrayBuffer?(fe?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),Ie=this.data_.length):K instanceof Uint8Array&&(fe?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),Ie=K.length),this.size_=Ie,this.type_=He}size(){return this.size_}type(){return this.type_}slice(K,fe){if(Tr(this.data_)){const He=function kn(Y,K,fe){return Y.webkitSlice?Y.webkitSlice(K,fe):Y.mozSlice?Y.mozSlice(K,fe):Y.slice?Y.slice(K,fe):null}(this.data_,K,fe);return null===He?null:new tr(He)}{const Ie=new Uint8Array(this.data_.buffer,K,fe-K);return new tr(Ie,!0)}}static getBlob(...K){if(hn()){const fe=K.map(Ie=>Ie instanceof tr?Ie.data_:Ie);return new tr(Ii.apply(null,fe))}{const fe=K.map(_t=>ir(_t)?mr(gn.RAW,_t).data:_t.data_);let Ie=0;fe.forEach(_t=>{Ie+=_t.byteLength});const He=new Uint8Array(Ie);let Ct=0;return fe.forEach(_t=>{for(let Vn=0;Vn<_t.length;Vn++)He[Ct++]=_t[Vn]}),new tr(He,!0)}}uploadData(){return this.data_}}function Fe(Y){let K;try{K=JSON.parse(Y)}catch{return null}return function Kn(Y){return"object"==typeof Y&&!Array.isArray(Y)}(K)?K:null}function De(Y){const K=Y.lastIndexOf("/",Y.length-2);return-1===K?Y:Y.slice(K+1)}function ae(Y,K){return K}class be{constructor(K,fe,Ie,He){this.server=K,this.local=fe||K,this.writable=!!Ie,this.xform=He||ae}}let ht=null;function pn(){if(ht)return ht;const Y=[];Y.push(new be("bucket")),Y.push(new be("generation")),Y.push(new be("metageneration")),Y.push(new be("name","fullPath",!0));const fe=new be("name");fe.xform=function K(Ct,_t){return function Yt(Y){return!ir(Y)||Y.length<2?Y:De(Y)}(_t)},Y.push(fe);const He=new be("size");return He.xform=function Ie(Ct,_t){return void 0!==_t?Number(_t):_t},Y.push(He),Y.push(new be("timeCreated")),Y.push(new be("updated")),Y.push(new be("md5Hash",null,!0)),Y.push(new be("cacheControl",null,!0)),Y.push(new be("contentDisposition",null,!0)),Y.push(new be("contentEncoding",null,!0)),Y.push(new be("contentLanguage",null,!0)),Y.push(new be("contentType",null,!0)),Y.push(new be("metadata","customMetadata",!0)),ht=Y,ht}function ve(Y,K,fe){const Ie=Fe(K);return null===Ie?null:function Ee(Y,K,fe){const Ie={type:"file"},He=fe.length;for(let Ct=0;Ct<He;Ct++){const _t=fe[Ct];Ie[_t.local]=_t.xform(Ie,K[_t.server])}return function Rn(Y,K){Object.defineProperty(Y,"ref",{get:function fe(){const Ct=new an(Y.bucket,Y.fullPath);return K._makeStorageReference(Ct)}})}(Ie,Y),Ie}(Y,Ie,fe)}function et(Y,K){const fe={},Ie=K.length;for(let He=0;He<Ie;He++){const Ct=K[He];Ct.writable&&(fe[Ct.server]=Y[Ct.local])}return JSON.stringify(fe)}const ft="prefixes";class Ur{constructor(K,fe,Ie,He){this.url=K,this.method=fe,this.handler=Ie,this.timeout=He,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wi(Y){if(!Y)throw nt()}function Nn(Y,K){return function fe(Ie,He){const Ct=ve(Y,He,K);return wi(null!==Ct),Ct}}function $s(Y){return function K(fe,Ie){let He;return He=401===fe.getStatus()?fe.getErrorText().includes("Firebase App Check token is invalid")?function $e(){return new ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Se(){return new ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===fe.getStatus()?function bt(Y){return new ze("quota-exceeded","Quota for bucket '"+Y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Y.bucket):403===fe.getStatus()?function wt(Y){return new ze("unauthorized","User does not have permission to access '"+Y+"'.")}(Y.path):Ie,He.status=fe.getStatus(),He.serverResponse=Ie.serverResponse,He}}function ts(Y){const K=$s(Y);return function fe(Ie,He){let Ct=K(Ie,He);return 404===Ie.getStatus()&&(Ct=function Ve(Y){return new ze("object-not-found","Object '"+Y+"' does not exist.")}(Y.path)),Ct.serverResponse=He.serverResponse,Ct}}function Xr(Y,K,fe){const He=Gn(K.fullServerUrl(),Y.host,Y._protocol),_t=Y.maxOperationRetryTime,Vn=new Ur(He,"GET",Nn(Y,fe),_t);return Vn.errorHandler=ts(K),Vn}function to(Y,K,fe,Ie,He){const Ct={};Ct.prefix=K.isRoot?"":K.path+"/",fe&&fe.length>0&&(Ct.delimiter=fe),Ie&&(Ct.pageToken=Ie),He&&(Ct.maxResults=He);const Vn=Gn(K.bucketOnlyServerUrl(),Y.host,Y._protocol),cr=Y.maxOperationRetryTime,qn=new Ur(Vn,"GET",function es(Y,K){return function fe(Ie,He){const Ct=function Xn(Y,K,fe){const Ie=Fe(fe);return null===Ie?null:function ur(Y,K,fe){const Ie={prefixes:[],items:[],nextPageToken:fe.nextPageToken};if(fe[ft])for(const He of fe[ft]){const Ct=He.replace(/\/$/,""),_t=Y._makeStorageReference(new an(K,Ct));Ie.prefixes.push(_t)}if(fe.items)for(const He of fe.items){const Ct=Y._makeStorageReference(new an(K,He.name));Ie.items.push(Ct)}return Ie}(Y,K,Ie)}(Y,K,He);return wi(null!==Ct),Ct}}(Y,K.bucket),cr);return qn.urlParams=Ct,qn.errorHandler=$s(K),qn}function Io(Y,K,fe){const Ie=Object.assign({},fe);return Ie.fullPath=Y.path,Ie.size=K.size(),Ie.contentType||(Ie.contentType=function Hr(Y,K){return Y&&Y.contentType||K&&K.type()||"application/octet-stream"}(null,K)),Ie}class As{constructor(K,fe,Ie,He){this.current=K,this.total=fe,this.finalized=!!Ie,this.metadata=He||null}}function ks(Y,K){let fe=null;try{fe=Y.getResponseHeader("X-Goog-Upload-Status")}catch{wi(!1)}return wi(!!fe&&-1!==(K||["active"]).indexOf(fe)),fe}const ba={STATE_CHANGED:"state_changed"},hr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fs(Y){switch(Y){case"running":case"pausing":case"canceling":return hr.RUNNING;case"paused":return hr.PAUSED;case"success":return hr.SUCCESS;case"canceled":return hr.CANCELED;default:return hr.ERROR}}class ta{constructor(K,fe,Ie){if(function Sr(Y){return"function"==typeof Y}(K)||null!=fe||null!=Ie)this.next=K,this.error=fe??void 0,this.complete=Ie??void 0;else{const Ct=K;this.next=Ct.next,this.error=Ct.error,this.complete=Ct.complete}}}function gs(Y){return(...K)=>{Promise.resolve().then(()=>Y(...K))}}class na extends class Pi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yr.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yr.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yr.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,fe,Ie,He){if(this.sent_)throw en("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(fe,K,!0),void 0!==He)for(const Ct in He)He.hasOwnProperty(Ct)&&this.xhr_.setRequestHeader(Ct,He[Ct].toString());return void 0!==Ie?this.xhr_.send(Ie):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw en("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw en("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw en("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw en("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Ls(){return new na}class ut{constructor(K,fe,Ie=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=fe,this._metadata=Ie,this._mappings=pn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=He=>{if(this._request=void 0,this._chunkMultiplier=1,He._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Ct=this.isExponentialBackoffExpired();if(Gr(He.status,[])){if(!Ct)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();He=tt()}this._error=He,this._transition("error")}},this._metadataErrorHandler=He=>{this._request=void 0,He._codeEquals("canceled")?this.completeTransitions_():(this._error=He,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((He,Ct)=>{this._resolve=He,this._reject=Ct,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return fe=>this._updateProgress(K+fe)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([fe,Ie])=>{switch(this._state){case"running":K(fe,Ie);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,fe)=>{const Ie=function Ns(Y,K,fe,Ie,He){const Ct=K.bucketOnlyServerUrl(),_t=Io(K,Ie,He),Vn={name:_t.fullPath},Dn=Gn(Ct,Y.host,Y._protocol),qn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ie.size()}`,"X-Goog-Upload-Header-Content-Type":_t.contentType,"Content-Type":"application/json; charset=utf-8"},$i=et(_t,fe),Ai=new Ur(Dn,"POST",function yi(is){let qr;ks(is);try{qr=is.getResponseHeader("X-Goog-Upload-URL")}catch{wi(!1)}return wi(ir(qr)),qr},Y.maxUploadRetryTime);return Ai.urlParams=Vn,Ai.headers=qn,Ai.body=$i,Ai.errorHandler=$s(K),Ai}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),He=this._ref.storage._makeRequest(Ie,Ls,K,fe);this._request=He,He.getPromise().then(Ct=>{this._request=void 0,this._uploadUrl=Ct,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((fe,Ie)=>{const He=function ji(Y,K,fe,Ie){const Dn=new Ur(fe,"POST",function Ct(cr){const qn=ks(cr,["active","final"]);let $i=null;try{$i=cr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wi(!1)}$i||wi(!1);const Gi=Number($i);return wi(!isNaN(Gi)),new As(Gi,Ie.size(),"final"===qn)},Y.maxUploadRetryTime);return Dn.headers={"X-Goog-Upload-Command":"query"},Dn.errorHandler=$s(K),Dn}(this._ref.storage,this._ref._location,K,this._blob),Ct=this._ref.storage._makeRequest(He,Ls,fe,Ie);this._request=Ct,Ct.getPromise().then(_t=>{this._request=void 0,this._updateProgress(_t.current),this._needToFetchStatus=!1,_t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,fe=new As(this._transferred,this._blob.size()),Ie=this._uploadUrl;this._resolveToken((He,Ct)=>{let _t;try{_t=function mi(Y,K,fe,Ie,He,Ct,_t,Vn){const Dn=new As(0,0);if(_t?(Dn.current=_t.current,Dn.total=_t.total):(Dn.current=0,Dn.total=Ie.size()),Ie.size()!==Dn.total)throw function pe(){return new ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const cr=Dn.total-Dn.current;let qn=cr;He>0&&(qn=Math.min(qn,He));const $i=Dn.current;let yi="";yi=0===qn?"finalize":cr===qn?"upload, finalize":"upload";const Ai={"X-Goog-Upload-Command":yi,"X-Goog-Upload-Offset":`${Dn.current}`},is=Ie.slice($i,$i+qn);if(null===is)throw tn();const Wi=new Ur(fe,"POST",function qr(zi,Bo){const po=ks(zi,["active","final"]),F=Dn.current+qn,ne=Ie.size();let $;return $="final"===po?Nn(K,Ct)(zi,Bo):null,new As(F,ne,"final"===po,$)},K.maxUploadRetryTime);return Wi.headers=Ai,Wi.body=is.uploadData(),Wi.progressCallback=Vn||null,Wi.errorHandler=$s(Y),Wi}(this._ref._location,this._ref.storage,Ie,this._blob,K,this._mappings,fe,this._makeProgressCallback())}catch(Dn){return this._error=Dn,void this._transition("error")}const Vn=this._ref.storage._makeRequest(_t,Ls,He,Ct,!1);this._request=Vn,Vn.getPromise().then(Dn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Dn.current),Dn.finalized?(this._metadata=Dn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,fe)=>{const Ie=Xr(this._ref.storage,this._ref._location,this._mappings),He=this._ref.storage._makeRequest(Ie,Ls,K,fe);this._request=He,He.getPromise().then(Ct=>{this._request=void 0,this._metadata=Ct,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,fe)=>{const Ie=function Ss(Y,K,fe,Ie,He){const Ct=K.bucketOnlyServerUrl(),_t={"X-Goog-Upload-Protocol":"multipart"},Dn=function Vn(){let Wi="";for(let zi=0;zi<2;zi++)Wi+=Math.random().toString().slice(2);return Wi}();_t["Content-Type"]="multipart/related; boundary="+Dn;const cr=Io(K,Ie,He),qn=et(cr,fe),yi=tr.getBlob("--"+Dn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qn+"\r\n--"+Dn+"\r\nContent-Type: "+cr.contentType+"\r\n\r\n",Ie,"\r\n--"+Dn+"--");if(null===yi)throw tn();const Ai={name:cr.fullPath},is=Gn(Ct,Y.host,Y._protocol),vs=Y.maxUploadRetryTime,Lo=new Ur(is,"POST",Nn(Y,fe),vs);return Lo.urlParams=Ai,Lo.headers=_t,Lo.body=yi.uploadData(),Lo.errorHandler=$s(K),Lo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),He=this._ref.storage._makeRequest(Ie,Ls,K,fe);this._request=He,He.getPromise().then(Ct=>{this._request=void 0,this._metadata=Ct,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const fe=this._transferred;this._transferred=K,this._transferred!==fe&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const fe="paused"===this._state;this._state=K,fe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=Ut(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=Fs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,fe,Ie,He){const Ct=new ta(fe||void 0,Ie||void 0,He||void 0);return this._addObserver(Ct),()=>{this._removeObserver(Ct)}}then(K,fe){return this._promise.then(K,fe)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const fe=this._observers.indexOf(K);-1!==fe&&this._observers.splice(fe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(fe=>{this._notifyObserver(fe)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(Fs(this._state)){case hr.SUCCESS:gs(this._resolve.bind(null,this.snapshot))();break;case hr.CANCELED:case hr.ERROR:gs(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(Fs(this._state)){case hr.RUNNING:case hr.PAUSED:K.next&&gs(K.next.bind(K,this.snapshot))();break;case hr.SUCCESS:K.complete&&gs(K.complete.bind(K))();break;default:K.error&&gs(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class Je{constructor(K,fe){this._service=K,this._location=fe instanceof an?fe:an.makeFromUrl(fe,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,fe){return new Je(K,fe)}get root(){const K=new an(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return De(this._location.path)}get storage(){return this._service}get parent(){const K=function Ae(Y){if(0===Y.length)return null;const K=Y.lastIndexOf("/");return-1===K?"":Y.slice(0,K)}(this._location.path);if(null===K)return null;const fe=new an(this._location.bucket,K);return new Je(this._service,fe)}_throwIfRoot(K){if(""===this._location.path)throw Be(K)}}function oi(Y,K,fe){return ho.apply(this,arguments)}function ho(){return(ho=(0,mt.Z)(function*(Y,K,fe){const He=yield ms(Y,{pageToken:fe});K.prefixes.push(...He.prefixes),K.items.push(...He.items),null!=He.nextPageToken&&(yield oi(Y,K,He.nextPageToken))})).apply(this,arguments)}function ms(Y,K){null!=K&&"number"==typeof K.maxResults&&br("options.maxResults",1,1e3,K.maxResults);const fe=K||{},Ie=to(Y.storage,Y._location,"/",fe.pageToken,fe.maxResults);return Y.storage.makeRequestWithTokens(Ie,Ls)}function Po(Y){Y._throwIfRoot("getDownloadURL");const K=function Ps(Y,K,fe){const He=Gn(K.fullServerUrl(),Y.host,Y._protocol),_t=Y.maxOperationRetryTime,Vn=new Ur(He,"GET",function Co(Y,K){return function fe(Ie,He){const Ct=ve(Y,He,K);return wi(null!==Ct),function ge(Y,K,fe,Ie){const He=Fe(K);if(null===He||!ir(He.downloadTokens))return null;const Ct=He.downloadTokens;if(0===Ct.length)return null;const _t=encodeURIComponent;return Ct.split(",").map(cr=>{const $i=Y.fullPath;return Gn("/b/"+_t(Y.bucket)+"/o/"+_t($i),fe,Ie)+Ar({alt:"media",token:cr})})[0]}(Ct,He,Y.host,Y._protocol)}}(Y,fe),_t);return Vn.errorHandler=ts(K),Vn}(Y.storage,Y._location,pn());return Y.storage.makeRequestWithTokens(K,Ls).then(fe=>{if(null===fe)throw function ie(){return new ze("no-download-url","The given file does not have any download URLs.")}();return fe})}function jr(Y,K){const fe=function Qe(Y,K){const fe=K.split("/").filter(Ie=>Ie.length>0).join("/");return 0===Y.length?fe:Y+"/"+fe}(Y._location.path,K),Ie=new an(Y._location.bucket,fe);return new Je(Y.storage,Ie)}function _s(Y,K){if(Y instanceof Gs){const fe=Y;if(null==fe._bucket)throw function Mt(){return new ze("no-default-bucket","No default bucket found. Did you set the '"+je+"' property when initializing the app?")}();const Ie=new Je(fe,fe._bucket);return null!=K?_s(Ie,K):Ie}return void 0!==K?jr(Y,K):Y}function Wr(Y,K){if(K&&function Mr(Y){return/^[A-Za-z]+:\/\//.test(Y)}(K)){if(Y instanceof Gs)return function Jn(Y,K){return new Je(Y,K)}(Y,K);throw We("To use ref(service, url), the first argument must be a Storage instance.")}return _s(Y,K)}function Ys(Y,K){const fe=K?.[je];return null==fe?null:an.makeFromBucketSpec(fe,Y)}class Gs{constructor(K,fe,Ie,He,Ct){this.app=K,this._authProvider=fe,this._appCheckProvider=Ie,this._url=He,this._firebaseVersion=Ct,this._bucket=null,this._host=ct,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=He?an.makeFromBucketSpec(He,this._host):Ys(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?an.makeFromBucketSpec(this._url,K):Ys(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){br("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){br("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,mt.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const fe=K._authProvider.getImmediate({optional:!0});if(fe){const Ie=yield fe.getToken();if(null!==Ie)return Ie.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,mt.Z)(function*(){const fe=K._appCheckProvider.getImmediate({optional:!0});return fe?(yield fe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new Je(this,K)}_makeRequest(K,fe,Ie,He,Ct=!0){if(this._deleted)return new Dr(Ye());{const _t=function On(Y,K,fe,Ie,He,Ct,_t=!0){const Vn=Ar(Y.urlParams),Dn=Y.url+Vn,cr=Object.assign({},Y.headers);return function En(Y,K){K&&(Y["X-Firebase-GMPID"]=K)}(cr,K),function lr(Y,K){null!==K&&K.length>0&&(Y.Authorization="Firebase "+K)}(cr,fe),function Ln(Y,K){Y["X-Firebase-Storage-Version"]="webjs/"+(K??"AppManager")}(cr,Ct),function Pn(Y,K){null!==K&&(Y["X-Firebase-AppCheck"]=K)}(cr,Ie),new Qn(Dn,Y.method,cr,Y.body,Y.successCodes,Y.additionalRetryCodes,Y.handler,Y.errorHandler,Y.timeout,Y.progressCallback,He,_t)}(K,this._appId,Ie,He,fe,this._firebaseVersion,Ct);return this._requests.add(_t),_t.getPromise().then(()=>this._requests.delete(_t),()=>this._requests.delete(_t)),_t}}makeRequestWithTokens(K,fe){var Ie=this;return(0,mt.Z)(function*(){const[He,Ct]=yield Promise.all([Ie._getAuthToken(),Ie._getAppCheckToken()]);return Ie._makeRequest(K,fe,He,Ct).getPromise()})()}}const yo="@firebase/storage";function _i(Y,K){return Wr(Y=(0,xt.m9)(Y),K)}function Kr(Y,{instanceIdentifier:K}){const fe=Y.getProvider("app").getImmediate(),Ie=Y.getProvider("auth-internal"),He=Y.getProvider("app-check-internal");return new Gs(fe,Ie,He,K,lt.SDK_VERSION)}!function Fo(){(0,lt._registerComponent)(new yt.wA("storage",Kr,"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(yo,"0.10.0",""),(0,lt.registerVersion)(yo,"0.10.0","esm2017")}();class or{constructor(K,fe,Ie){this._delegate=K,this.task=fe,this.ref=Ie}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Es{constructor(K,fe){this._delegate=K,this._ref=fe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new or(this._delegate.snapshot,this,this._ref)}then(K,fe){return this._delegate.then(Ie=>{if(K)return K(new or(Ie,this,this._ref))},fe)}on(K,fe,Ie,He){let Ct;return fe&&(Ct="function"==typeof fe?_t=>fe(new or(_t,this,this._ref)):{next:fe.next?_t=>fe.next(new or(_t,this,this._ref)):void 0,complete:fe.complete||void 0,error:fe.error||void 0}),this._delegate.on(K,Ct,Ie||void 0,He||void 0)}}class rs{constructor(K,fe){this._delegate=K,this._service=fe}get prefixes(){return this._delegate.prefixes.map(K=>new Ui(K,this._service))}get items(){return this._delegate.items.map(K=>new Ui(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ui{constructor(K,fe){this._delegate=K,this.storage=fe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const fe=function no(Y,K){return jr(Y,K)}(this._delegate,K);return new Ui(fe,this.storage)}get root(){return new Ui(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new Ui(K,this.storage)}put(K,fe){return this._throwIfRoot("put"),new Es(function Vi(Y,K,fe){return function xn(Y,K,fe){return Y._throwIfRoot("uploadBytesResumable"),new ut(Y,new tr(K),fe)}(Y=(0,xt.m9)(Y),K,fe)}(this._delegate,K,fe),this)}putString(K,fe=gn.RAW,Ie){this._throwIfRoot("putString");const He=mr(fe,K),Ct=Object.assign({},Ie);return null==Ct.contentType&&null!=He.contentType&&(Ct.contentType=He.contentType),new Es(new ut(this._delegate,new tr(He.data,!0),Ct),this)}listAll(){return function ia(Y){return function Di(Y){const K={prefixes:[],items:[]};return oi(Y,K).then(()=>K)}(Y=(0,xt.m9)(Y))}(this._delegate).then(K=>new rs(K,this.storage))}list(K){return function Qs(Y,K){return ms(Y=(0,xt.m9)(Y),K)}(this._delegate,K||void 0).then(fe=>new rs(fe,this.storage))}getMetadata(){return function Bs(Y){return function Bi(Y){Y._throwIfRoot("getMetadata");const K=Xr(Y.storage,Y._location,pn());return Y.storage.makeRequestWithTokens(K,Ls)}(Y=(0,xt.m9)(Y))}(this._delegate)}updateMetadata(K){return function Zs(Y,K){return function Ma(Y,K){Y._throwIfRoot("updateMetadata");const fe=function Ei(Y,K,fe,Ie){const Ct=Gn(K.fullServerUrl(),Y.host,Y._protocol),Vn=et(fe,Ie),cr=Y.maxOperationRetryTime,qn=new Ur(Ct,"PATCH",Nn(Y,Ie),cr);return qn.headers={"Content-Type":"application/json; charset=utf-8"},qn.body=Vn,qn.errorHandler=ts(K),qn}(Y.storage,Y._location,K,pn());return Y.storage.makeRequestWithTokens(fe,Ls)}(Y=(0,xt.m9)(Y),K)}(this._delegate,K)}getDownloadURL(){return function zr(Y){return Po(Y=(0,xt.m9)(Y))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ea(Y){return function qs(Y){Y._throwIfRoot("deleteObject");const K=function co(Y,K){const Ie=Gn(K.fullServerUrl(),Y.host,Y._protocol),Vn=new Ur(Ie,"DELETE",function _t(Dn,cr){},Y.maxOperationRetryTime);return Vn.successCodes=[200,204],Vn.errorHandler=ts(K),Vn}(Y.storage,Y._location);return Y.storage.makeRequestWithTokens(K,Ls)}(Y=(0,xt.m9)(Y))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw Be(K)}}class ei{constructor(K,fe){this.app=K,this._delegate=fe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(dr(K))throw We("ref() expected a child path but got a URL, use refFromURL instead.");return new Ui(_i(this._delegate,K),this)}refFromURL(K){if(!dr(K))throw We("refFromURL() expected a full URL but got a child path, use ref() instead.");try{an.makeFromUrl(K,this._delegate.host)}catch{throw We("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ui(_i(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,fe,Ie={}){!function ko(Y,K,fe,Ie={}){!function wa(Y,K,fe,Ie={}){Y.host=`${K}:${fe}`,Y._protocol="http";const{mockUserToken:He}=Ie;He&&(Y._overrideAuthToken="string"==typeof He?He:(0,xt.Sg)(He,Y.app.options.projectId))}(Y,K,fe,Ie)}(this._delegate,K,fe,Ie)}}function dr(Y){return/^[A-Za-z]+:\/\//.test(Y)}function ml(Y,{instanceIdentifier:K}){const fe=Y.getProvider("app-compat").getImmediate(),Ie=Y.getProvider("storage").getImmediate({identifier:K});return new ei(fe,Ie)}!function fo(Y){const K={TaskState:hr,TaskEvent:ba,StringFormat:gn,Storage:ei,Reference:Ui};Y.INTERNAL.registerComponent(new yt.wA("storage-compat",ml,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),Y.registerVersion("@firebase/storage-compat","0.2.0")}(Nt.Z);var ro=L(6217),Ka=L(9260);function qt(Y){const K=function Da(Y){return new h.y(K=>{const fe=_t=>K.next(_t);fe(Y.snapshot);const Ct=Y.on("state_changed",fe);return Y.then(_t=>{fe(_t),K.complete()},_t=>{fe(Y.snapshot),(_t=>{K.error(_t)})(_t)}),function(){Ct()}}).pipe(function Ge(Y,K=Ce.z){return(0,Me.e)((fe,Ie)=>{let He=null,Ct=null,_t=null;const Vn=()=>{if(He){He.unsubscribe(),He=null;const cr=Ct;Ct=null,Ie.next(cr)}};function Dn(){const cr=_t+Y,qn=K.now();if(qn<cr)return He=this.schedule(void 0,cr-qn),void Ie.add(He);Vn()}fe.subscribe((0,Oe.x)(Ie,cr=>{Ct=cr,_t=K.now(),He||(He=K.schedule(Dn,Y),Ie.add(He))},()=>{Vn(),Ie.complete()},void 0,()=>{Ct=He=null}))})}(0))}(Y);return{task:Y,then:Y.then.bind(Y),catch:Y.catch.bind(Y),pause:Y.pause.bind(Y),cancel:Y.cancel.bind(Y),resume:Y.resume.bind(Y),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,Pe.U)(fe=>fe.bytesTransferred/fe.totalBytes*100))}}function pr(Y){return{getDownloadURL:()=>(0,U.of)(void 0).pipe(we.fc,(0,Ze.w)(()=>Y.getDownloadURL()),we.iC),getMetadata:()=>(0,U.of)(void 0).pipe(we.fc,(0,Ze.w)(()=>Y.getMetadata()),we.iC),delete:()=>(0,ee.D)(Y.delete()),child:K=>pr(Y.child(K)),updateMetadata:K=>(0,ee.D)(Y.updateMetadata(K)),put:(K,fe)=>qt(Y.put(K,fe)),putString:(K,fe,Ie)=>qt(Y.putString(K,fe,Ie)),list:K=>(0,ee.D)(Y.list(K)),listAll:()=>(0,ee.D)(Y.listAll())}}const oa=new _e.OlP("angularfire2.storageBucket"),Ta=new _e.OlP("angularfire2.storage.maxUploadRetryTime"),cs=new _e.OlP("angularfire2.storage.maxOperationRetryTime"),Z=new _e.OlP("angularfire2.storage.use-emulator");let W=(()=>{class Y{constructor(fe,Ie,He,Ct,_t,Vn,Dn,cr,qn,$i){const Gi=(0,Ue.on)(fe,_t,Ie);this.storage=(0,Ue.cc)(`${Gi.name}.storage.${He}`,"AngularFireStorage",Gi.name,()=>{const yi=_t.runOutsideAngular(()=>Gi.storage(He||void 0)),Ai=qn;return Ai&&yi.useEmulator(...Ai),Dn&&yi.setMaxUploadRetryTime(Dn),cr&&yi.setMaxOperationRetryTime(cr),yi},[Dn,cr])}ref(fe){return pr(this.storage.ref(fe))}refFromURL(fe){return pr(this.storage.refFromURL(fe))}upload(fe,Ie,He){return pr(this.storage.ref(fe)).put(Ie,He)}}return Y.\u0275fac=function(fe){return new(fe||Y)(_e.LFG(Ue.Dh),_e.LFG(Ue.xv,8),_e.LFG(oa,8),_e.LFG(_e.Lbi),_e.LFG(_e.R0b),_e.LFG(we.HU),_e.LFG(Ta,8),_e.LFG(cs,8),_e.LFG(Z,8),_e.LFG(ro.nm,8))},Y.\u0275prov=_e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"any"}),Y})(),ue=(()=>{class Y{}return Y.\u0275fac=function(fe){return new(fe||Y)},Y.\u0275mod=_e.oAB({type:Y}),Y.\u0275inj=_e.cJS({}),Y})(),kt=(()=>{class Y{constructor(){Ka.Z.registerVersion("angularfire",we.q4.full,"gcs-compat")}}return Y.\u0275fac=function(fe){return new(fe||Y)},Y.\u0275mod=_e.oAB({type:Y}),Y.\u0275inj=_e.cJS({providers:[W],imports:[ue]}),Y})()},2011:(cn,dt,L)=>{L.d(dt,{Dh:()=>Pe,GT:()=>Oe,cc:()=>mt,hO:()=>Nt,on:()=>we,pX:()=>Me,xv:()=>Ze});var h=L(4650),U=L(9260),ee=L(2122);cn=L.hmd(cn);const Ce=["ngOnDestroy"],Me=(ct,je,Ht,gt={})=>new Proxy(ct,{get:(qe,ze)=>Ht.runOutsideAngular(()=>{var jt;if(ct[ze])return!(null===(jt=gt?.spy)||void 0===jt)&&jt.get&&gt.spy.get(ze,ct[ze]),ct[ze];if(Ce.indexOf(ze)>-1)return()=>{};const nt=je.toPromise().then(Ve=>{const bt=Ve&&Ve[ze];return"function"==typeof bt?bt.bind(Ve):bt&&bt.then?bt.then(Se=>Ht.run(()=>Se)):Ht.run(()=>bt)});return new Proxy(()=>{},{get:(Ve,bt)=>nt[bt],apply:(Ve,bt,Se)=>nt.then($e=>{var wt;const tt=$e&&$e(...Se);return!(null===(wt=gt?.spy)||void 0===wt)&&wt.apply&&gt.spy.apply(ze,Se,tt),tt})})})}),Oe=(ct,je)=>{je.forEach(Ht=>{Object.getOwnPropertyNames(Ht.prototype||Ht).forEach(gt=>{Object.defineProperty(ct.prototype,gt,Object.getOwnPropertyDescriptor(Ht.prototype||Ht,gt))})})};class Ge{constructor(je){return je}}const Pe=new h.OlP("angularfire2.app.options"),Ze=new h.OlP("angularfire2.app.name");function we(ct,je,Ht){const qe="object"==typeof Ht&&Ht||{};qe.name=qe.name||"string"==typeof Ht&&Ht||"[DEFAULT]";const jt=U.Z.apps.filter(nt=>nt&&nt.name===qe.name)[0]||je.runOutsideAngular(()=>U.Z.initializeApp(ct,qe));try{JSON.stringify(ct)!==JSON.stringify(jt.options)&&_e("error",`${jt.name} Firebase App already initialized with different options${cn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ge(jt)}const _e=(ct,...je)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ct](...je)},Ue={provide:Ge,useFactory:we,deps:[Pe,h.R0b,[new h.FiY,Ze]]};let Nt=(()=>{class ct{constructor(Ht){U.Z.registerVersion("angularfire",ee.q4.full,"core"),U.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),U.Z.registerVersion("angular",h.q4F.full,Ht.toString())}static initializeApp(Ht,gt){return{ngModule:ct,providers:[{provide:Pe,useValue:Ht},{provide:Ze,useValue:gt}]}}}return ct.\u0275fac=function(Ht){return new(Ht||ct)(h.LFG(h.Lbi))},ct.\u0275mod=h.oAB({type:ct}),ct.\u0275inj=h.cJS({providers:[Ue]}),ct})();function mt(ct,je,Ht,gt,qe){const[,ze,jt]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===ct)||[];if(ze)return function lt(ct,je){try{return ct.toString()===je.toString()}catch{return ct===je}}(qe,jt)||(yt("error",`${je} was already initialized on the ${Ht} Firebase App with different settings.${xt?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:qe,was:jt})),ze;{const nt=gt();return globalThis.\u0275AngularfireInstanceCache.push([ct,nt,qe]),nt}}const xt=!!cn.hot,yt=(ct,...je)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ct](...je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(cn,dt,L)=>{L.d(dt,{q4:()=>xe,iC:()=>Tl,fc:()=>mc,HU:()=>Qo,vb:()=>Ba,JM:()=>Aa});var h=L(4650),U=L(259),ee=L(5861),Ce=L(9681),Me=L(2090),Oe=L(4859),Ge=L(1877),Pe=L(8766);const Ze="@firebase/installations",Ue="w:0.6.0",Nt="FIS_v2",je=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ht(H){return H instanceof Me.ZR&&H.code.includes("request-failed")}function gt({projectId:H}){return`https://firebaseinstallations.googleapis.com/v1/projects/${H}/installations`}function qe(H){return{token:H.token,requestStatus:2,expiresIn:$e(H.expiresIn),creationTime:Date.now()}}function ze(H,q){return jt.apply(this,arguments)}function jt(){return(jt=(0,ee.Z)(function*(H,q){const ke=(yield q.json()).error;return je.create("request-failed",{requestName:H,serverCode:ke.code,serverMessage:ke.message,serverStatus:ke.status})})).apply(this,arguments)}function nt({apiKey:H}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H})}function Ve(H,{refreshToken:q}){const se=nt(H);return se.append("Authorization",function wt(H){return`${Nt} ${H}`}(q)),se}function bt(H){return Se.apply(this,arguments)}function Se(){return(Se=(0,ee.Z)(function*(H){const q=yield H();return q.status>=500&&q.status<600?H():q})).apply(this,arguments)}function $e(H){return Number(H.replace("s","000"))}function tt(H,q){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,ee.Z)(function*({appConfig:H,heartbeatServiceProvider:q},{fid:se}){const ke=gt(H),pt=nt(H),Rt=q.getImmediate({optional:!0});if(Rt){const ar=yield Rt.getHeartbeatsHeader();ar&&pt.append("x-firebase-client",ar)}const Sn={method:"POST",headers:pt,body:JSON.stringify({fid:se,authVersion:Nt,appId:H.appId,sdkVersion:Ue})},er=yield bt(()=>fetch(ke,Sn));if(er.ok){const ar=yield er.json();return{fid:ar.fid||se,registrationStatus:2,refreshToken:ar.refreshToken,authToken:qe(ar.authToken)}}throw yield ze("Create Installation",er)})).apply(this,arguments)}function Kt(H){return new Promise(q=>{setTimeout(q,H)})}const Mt=/^[cdef][\w-]{21}$/;function pe(){try{const H=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(H),H[0]=112+H[0]%16;const se=function ie(H){return function An(H){return btoa(String.fromCharCode(...H)).replace(/\+/g,"-").replace(/\//g,"_")}(H).substr(0,22)}(H);return Mt.test(se)?se:""}catch{return""}}function At(H){return`${H.appName}!${H.appId}`}const We=new Map;function Ye(H,q){const se=At(H);en(se,q),function an(H,q){const se=function jn(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=H=>{en(H.data.key,H.data.fid)}),Dr}();se&&se.postMessage({key:H,fid:q}),function gi(){0===We.size&&Dr&&(Dr.close(),Dr=null)}()}(se,q)}function en(H,q){const se=We.get(H);if(se)for(const ke of se)ke(q)}let Dr=null;const Kn="firebase-installations-store";let ir=null;function Tr(){return ir||(ir=(0,Pe.X3)("firebase-installations-database",1,{upgrade:(H,q)=>{0===q&&H.createObjectStore(Kn)}})),ir}function hn(H,q){return br.apply(this,arguments)}function br(){return(br=(0,ee.Z)(function*(H,q){const se=At(H),pt=(yield Tr()).transaction(Kn,"readwrite"),Rt=pt.objectStore(Kn),sn=yield Rt.get(se);return yield Rt.put(q,se),yield pt.done,(!sn||sn.fid!==q.fid)&&Ye(H,q.fid),q})).apply(this,arguments)}function Gn(H){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,ee.Z)(function*(H){const q=At(H),ke=(yield Tr()).transaction(Kn,"readwrite");yield ke.objectStore(Kn).delete(q),yield ke.done})).apply(this,arguments)}function Yr(H,q){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,ee.Z)(function*(H,q){const se=At(H),pt=(yield Tr()).transaction(Kn,"readwrite"),Rt=pt.objectStore(Kn),sn=yield Rt.get(se),Sn=q(sn);return void 0===Sn?yield Rt.delete(se):yield Rt.put(Sn,se),yield pt.done,Sn&&(!sn||sn.fid!==Sn.fid)&&Ye(H,Sn.fid),Sn})).apply(this,arguments)}function Qn(H){return fr.apply(this,arguments)}function fr(){return(fr=(0,ee.Z)(function*(H){let q;const se=yield Yr(H.appConfig,ke=>{const pt=lr(ke),Rt=Ln(H,pt);return q=Rt.registrationPromise,Rt.installationEntry});return""===se.fid?{installationEntry:yield q}:{installationEntry:se,registrationPromise:q}})).apply(this,arguments)}function lr(H){return kn(H||{fid:pe(),registrationStatus:0})}function Ln(H,q){if(0===q.registrationStatus){if(!navigator.onLine)return{installationEntry:q,registrationPromise:Promise.reject(je.create("app-offline"))};const se={fid:q.fid,registrationStatus:1,registrationTime:Date.now()},ke=function En(H,q){return Pn.apply(this,arguments)}(H,se);return{installationEntry:se,registrationPromise:ke}}return 1===q.registrationStatus?{installationEntry:q,registrationPromise:On(H)}:{installationEntry:q}}function Pn(){return(Pn=(0,ee.Z)(function*(H,q){try{const se=yield tt(H,q);return hn(H.appConfig,se)}catch(se){throw Ht(se)&&409===se.customData.serverCode?yield Gn(H.appConfig):yield hn(H.appConfig,{fid:q.fid,registrationStatus:0}),se}})).apply(this,arguments)}function On(H){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,ee.Z)(function*(H){let q=yield Ii(H.appConfig);for(;1===q.registrationStatus;)yield Kt(100),q=yield Ii(H.appConfig);if(0===q.registrationStatus){const{installationEntry:se,registrationPromise:ke}=yield Qn(H);return ke||se}return q})).apply(this,arguments)}function Ii(H){return Yr(H,q=>{if(!q)throw je.create("installation-not-found");return kn(q)})}function kn(H){return function Ri(H){return 1===H.registrationStatus&&H.registrationTime+1e4<Date.now()}(H)?{fid:H.fid,registrationStatus:0}:H}function gn(H,q){return Si.apply(this,arguments)}function Si(){return(Si=(0,ee.Z)(function*({appConfig:H,heartbeatServiceProvider:q},se){const ke=mr(H,se),pt=Ve(H,se),Rt=q.getImmediate({optional:!0});if(Rt){const ar=yield Rt.getHeartbeatsHeader();ar&&pt.append("x-firebase-client",ar)}const Sn={method:"POST",headers:pt,body:JSON.stringify({installation:{sdkVersion:Ue,appId:H.appId}})},er=yield bt(()=>fetch(ke,Sn));if(er.ok)return qe(yield er.json());throw yield ze("Generate Auth Token",er)})).apply(this,arguments)}function mr(H,{fid:q}){return`${gt(H)}/${q}/authTokens:generate`}function si(H){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,ee.Z)(function*(H,q=!1){let se;const ke=yield Yr(H.appConfig,Rt=>{if(!tr(Rt))throw je.create("not-registered");const sn=Rt.authToken;if(!q&&Fe(sn))return Rt;if(1===sn.requestStatus)return se=mn(H,q),Rt;{if(!navigator.onLine)throw je.create("app-offline");const Sn=Qe(Rt);return se=zn(H,Sn),Sn}});return se?yield se:ke.authToken})).apply(this,arguments)}function mn(H,q){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,ee.Z)(function*(H,q){let se=yield bn(H.appConfig);for(;1===se.authToken.requestStatus;)yield Kt(100),se=yield bn(H.appConfig);const ke=se.authToken;return 0===ke.requestStatus?si(H,q):ke})).apply(this,arguments)}function bn(H){return Yr(H,q=>{if(!tr(q))throw je.create("not-registered");return function De(H){return 1===H.requestStatus&&H.requestTime+1e4<Date.now()}(q.authToken)?Object.assign(Object.assign({},q),{authToken:{requestStatus:0}}):q})}function zn(H,q){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,ee.Z)(function*(H,q){try{const se=yield gn(H,q),ke=Object.assign(Object.assign({},q),{authToken:se});return yield hn(H.appConfig,ke),se}catch(se){if(!Ht(se)||401!==se.customData.serverCode&&404!==se.customData.serverCode){const ke=Object.assign(Object.assign({},q),{authToken:{requestStatus:0}});yield hn(H.appConfig,ke)}else yield Gn(H.appConfig);throw se}})).apply(this,arguments)}function tr(H){return void 0!==H&&2===H.registrationStatus}function Fe(H){return 2===H.requestStatus&&!function Ae(H){const q=Date.now();return q<H.creationTime||H.creationTime+H.expiresIn<q+36e5}(H)}function Qe(H){const q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},H),{authToken:q})}function be(){return(be=(0,ee.Z)(function*(H){const q=H,{installationEntry:se,registrationPromise:ke}=yield Qn(q);return ke?ke.catch(console.error):si(q).catch(console.error),se.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,ee.Z)(function*(H,q=!1){const se=H;return yield pn(se),(yield si(se,q)).token})).apply(this,arguments)}function pn(H){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ee.Z)(function*(H){const{registrationPromise:q}=yield Qn(H);q&&(yield q)})).apply(this,arguments)}function Ur(H){return je.create("missing-app-config-values",{valueName:H})}const wi="installations",es=H=>{const q=H.getProvider("app").getImmediate(),se=function Xn(H){if(!H||!H.options)throw Ur("App Configuration");if(!H.name)throw Ur("App Name");const q=["projectId","apiKey","appId"];for(const se of q)if(!H.options[se])throw Ur(se);return{appName:H.name,projectId:H.options.projectId,apiKey:H.options.apiKey,appId:H.options.appId}}(q);return{app:q,appConfig:se,heartbeatServiceProvider:(0,Ce._getProvider)(q,"heartbeat"),_delete:()=>Promise.resolve()}},Co=H=>{const q=H.getProvider("app").getImmediate(),se=(0,Ce._getProvider)(q,wi).getImmediate();return{getId:()=>function ae(H){return be.apply(this,arguments)}(se),getToken:pt=>function ht(H){return Yt.apply(this,arguments)}(se,pt)}};(function $s(){(0,Ce._registerComponent)(new Oe.wA(wi,es,"PUBLIC")),(0,Ce._registerComponent)(new Oe.wA("installations-internal",Co,"PRIVATE"))})(),(0,Ce.registerVersion)(Ze,"0.6.0"),(0,Ce.registerVersion)(Ze,"0.6.0","esm2017");const ts="@firebase/remote-config",Ei=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ra{constructor(q,se,ke,pt){this.client=q,this.storage=se,this.storageCache=ke,this.logger=pt}isCachedDataFresh(q,se){if(!se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ke=Date.now()-se,pt=ke<=q;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ke}. Cache max age millis (minimumFetchIntervalMillis setting): ${q}. Is cache hit: ${pt}.`),pt}fetch(q){var se=this;return(0,ee.Z)(function*(){const[ke,pt]=yield Promise.all([se.storage.getLastSuccessfulFetchTimestampMillis(),se.storage.getLastSuccessfulFetchResponse()]);if(pt&&se.isCachedDataFresh(q.cacheMaxAgeMillis,ke))return pt;q.eTag=pt&&pt.eTag;const Rt=yield se.client.fetch(q),sn=[se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&sn.push(se.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(sn),Rt})()}}function Yi(H=navigator){return H.languages&&H.languages[0]||H.language}class xo{constructor(q,se,ke,pt,Rt,sn){this.firebaseInstallations=q,this.sdkVersion=se,this.namespace=ke,this.projectId=pt,this.apiKey=Rt,this.appId=sn}fetch(q){var se=this;return(0,ee.Z)(function*(){const[ke,pt]=yield Promise.all([se.firebaseInstallations.getId(),se.firebaseInstallations.getToken()]),sn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${se.projectId}/namespaces/${se.namespace}:fetch?key=${se.apiKey}`,Sn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":q.eTag||"*"},er={sdk_version:se.sdkVersion,app_instance_id:ke,app_instance_id_token:pt,app_id:se.appId,language_code:Yi()},ar={method:"POST",headers:Sn,body:JSON.stringify(er)},$r=fetch(sn,ar),Tn=new Promise((go,Ho)=>{q.signal.addEventListener(()=>{const Yc=new Error("The operation was aborted.");Yc.name="AbortError",Ho(Yc)})});let xr;try{yield Promise.race([$r,Tn]),xr=yield $r}catch(go){let Ho="fetch-client-network";throw"AbortError"===go?.name&&(Ho="fetch-timeout"),Ei.create(Ho,{originalErrorMessage:go?.message})}let ds=xr.status;const el=xr.headers.get("ETag")||void 0;let zl,Kl;if(200===xr.status){let go;try{go=yield xr.json()}catch(Ho){throw Ei.create("fetch-client-parse",{originalErrorMessage:Ho?.message})}zl=go.entries,Kl=go.state}if("INSTANCE_STATE_UNSPECIFIED"===Kl?ds=500:"NO_CHANGE"===Kl?ds=304:("NO_TEMPLATE"===Kl||"EMPTY_CONFIG"===Kl)&&(zl={}),304!==ds&&200!==ds)throw Ei.create("fetch-status",{httpStatus:ds});return{status:ds,eTag:el,config:zl}})()}}class Je{constructor(q,se){this.client=q,this.storage=se}fetch(q){var se=this;return(0,ee.Z)(function*(){const ke=(yield se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return se.attemptFetch(q,ke)})()}attemptFetch(q,{throttleEndTimeMillis:se,backoffCount:ke}){var pt=this;return(0,ee.Z)(function*(){yield function ns(H,q){return new Promise((se,ke)=>{const pt=Math.max(q-Date.now(),0),Rt=setTimeout(se,pt);H.addEventListener(()=>{clearTimeout(Rt),ke(Ei.create("fetch-throttle",{throttleEndTimeMillis:q}))})})}(q.signal,se);try{const Rt=yield pt.client.fetch(q);return yield pt.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function ut(H){if(!(H instanceof Me.ZR&&H.customData))return!1;const q=Number(H.customData.httpStatus);return 429===q||500===q||503===q||504===q}(Rt))throw Rt;const sn={throttleEndTimeMillis:Date.now()+(0,Me.$s)(ke),backoffCount:ke+1};return yield pt.storage.setThrottleMetadata(sn),pt.attemptFetch(q,sn)}})()}}class ln{constructor(q,se,ke,pt,Rt){this.app=q,this._client=se,this._storageCache=ke,this._storage=pt,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xn(H,q){const se=H.target.error||void 0;return Ei.create(q,{originalErrorMessage:se&&se?.message})}const sr="app_namespace_store";class ms{constructor(q,se,ke,pt=function ho(){return new Promise((H,q)=>{try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=ke=>{q(xn(ke,"storage-open"))},se.onsuccess=ke=>{H(ke.target.result)},se.onupgradeneeded=ke=>{0===ke.oldVersion&&ke.target.result.createObjectStore(sr,{keyPath:"compositeKey"})}}catch(se){q(Ei.create("storage-open",{originalErrorMessage:se?.message}))}})}()){this.appId=q,this.appName=se,this.namespace=ke,this.openDbPromise=pt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(q){return this.set("last_fetch_status",q)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(q){return this.set("last_successful_fetch_timestamp_millis",q)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(q){return this.set("last_successful_fetch_response",q)}getActiveConfig(){return this.get("active_config")}setActiveConfig(q){return this.set("active_config",q)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(q){return this.set("active_config_etag",q)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(q){return this.set("throttle_metadata",q)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(q){var se=this;return(0,ee.Z)(function*(){const ke=yield se.openDbPromise;return new Promise((pt,Rt)=>{const Sn=ke.transaction([sr],"readonly").objectStore(sr),er=se.createCompositeKey(q);try{const ar=Sn.get(er);ar.onerror=$r=>{Rt(xn($r,"storage-get"))},ar.onsuccess=$r=>{const Tn=$r.target.result;pt(Tn?Tn.value:void 0)}}catch(ar){Rt(Ei.create("storage-get",{originalErrorMessage:ar?.message}))}})})()}set(q,se){var ke=this;return(0,ee.Z)(function*(){const pt=yield ke.openDbPromise;return new Promise((Rt,sn)=>{const er=pt.transaction([sr],"readwrite").objectStore(sr),ar=ke.createCompositeKey(q);try{const $r=er.put({compositeKey:ar,value:se});$r.onerror=Tn=>{sn(xn(Tn,"storage-set"))},$r.onsuccess=()=>{Rt()}}catch($r){sn(Ei.create("storage-set",{originalErrorMessage:$r?.message}))}})})()}delete(q){var se=this;return(0,ee.Z)(function*(){const ke=yield se.openDbPromise;return new Promise((pt,Rt)=>{const Sn=ke.transaction([sr],"readwrite").objectStore(sr),er=se.createCompositeKey(q);try{const ar=Sn.delete(er);ar.onerror=$r=>{Rt(xn($r,"storage-delete"))},ar.onsuccess=()=>{pt()}}catch(ar){Rt(Ei.create("storage-delete",{originalErrorMessage:ar?.message}))}})})()}createCompositeKey(q){return[this.appId,this.appName,this.namespace,q].join()}}class Bi{constructor(q){this.storage=q}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var q=this;return(0,ee.Z)(function*(){const se=q.storage.getLastFetchStatus(),ke=q.storage.getLastSuccessfulFetchTimestampMillis(),pt=q.storage.getActiveConfig(),Rt=yield se;Rt&&(q.lastFetchStatus=Rt);const sn=yield ke;sn&&(q.lastSuccessfulFetchTimestampMillis=sn);const Sn=yield pt;Sn&&(q.activeConfig=Sn)})()}setLastFetchStatus(q){return this.lastFetchStatus=q,this.storage.setLastFetchStatus(q)}setLastSuccessfulFetchTimestampMillis(q){return this.lastSuccessfulFetchTimestampMillis=q,this.storage.setLastSuccessfulFetchTimestampMillis(q)}setActiveConfig(q){return this.activeConfig=q,this.storage.setActiveConfig(q)}}function jr(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,ee.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch{return!1}})).apply(this,arguments)}!function Ma(){(0,Ce._registerComponent)(new Oe.wA("remote-config",function H(q,{instanceIdentifier:se}){const ke=q.getProvider("app").getImmediate(),pt=q.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ei.create("registration-window");if(!(0,Me.hl)())throw Ei.create("indexed-db-unavailable");const{projectId:Rt,apiKey:sn,appId:Sn}=ke.options;if(!Rt)throw Ei.create("registration-project-id");if(!sn)throw Ei.create("registration-api-key");if(!Sn)throw Ei.create("registration-app-id");const er=new ms(Sn,ke.name,se=se||"firebase"),ar=new Bi(er),$r=new Ge.Yd(ts);$r.logLevel=Ge.in.ERROR;const Tn=new xo(pt,Ce.SDK_VERSION,se,Rt,sn,Sn),xr=new Je(Tn,er),ds=new ra(xr,er,ar,$r),el=new ln(ke,ds,ar,er,$r);return function mi(H){const q=(0,Me.m9)(H);q._initializePromise||(q._initializePromise=q._storageCache.loadFromStorage().then(()=>{q._isInitializationComplete=!0}))}(el),el},"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(ts,"0.4.0"),(0,Ce.registerVersion)(ts,"0.4.0","esm2017")}();const Jn="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",Wr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wa="google.c.a.c_id",Gs="google.c.a.c_l",yo="google.c.a.ts",kr="google.c.a.e";var ki=(()=>{return(H=ki||(ki={})).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked",ki;var H})();function Ko(H){const q=new Uint8Array(H);return btoa(String.fromCharCode(...q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ms(H){const se=(H+"=".repeat((4-H.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ke=atob(se),pt=new Uint8Array(ke.length);for(let Rt=0;Rt<ke.length;++Rt)pt[Rt]=ke.charCodeAt(Rt);return pt}const Vi="fcm_token_details_db",Zs="fcm_token_object_Store";function Qs(H){return ia.apply(this,arguments)}function ia(){return ia=(0,ee.Z)(function*(H){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(Vi))return null;let q=null;return(yield(0,Pe.X3)(Vi,5,{upgrade:(ke=(0,ee.Z)(function*(pt,Rt,sn,Sn){var er;if(Rt<2||!pt.objectStoreNames.contains(Zs))return;const ar=Sn.objectStore(Zs),$r=yield ar.index("fcmSenderId").get(H);if(yield ar.clear(),$r)if(2===Rt){const Tn=$r;if(!Tn.auth||!Tn.p256dh||!Tn.endpoint)return;q={token:Tn.fcmToken,createTime:null!==(er=Tn.createTime)&&void 0!==er?er:Date.now(),subscriptionOptions:{auth:Tn.auth,p256dh:Tn.p256dh,endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:"string"==typeof Tn.vapidKey?Tn.vapidKey:Ko(Tn.vapidKey)}}}else if(3===Rt){const Tn=$r;q={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ko(Tn.auth),p256dh:Ko(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ko(Tn.vapidKey)}}}else if(4===Rt){const Tn=$r;q={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ko(Tn.auth),p256dh:Ko(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ko(Tn.vapidKey)}}}}),function(Rt,sn,Sn,er){return ke.apply(this,arguments)})})).close(),yield(0,Pe.Lj)(Vi),yield(0,Pe.Lj)("fcm_vapid_details_db"),yield(0,Pe.Lj)("undefined"),zr(q)?q:null;var ke}),ia.apply(this,arguments)}function zr(H){if(!H||!H.subscriptionOptions)return!1;const{subscriptionOptions:q}=H;return"number"==typeof H.createTime&&H.createTime>0&&"string"==typeof H.token&&H.token.length>0&&"string"==typeof q.auth&&q.auth.length>0&&"string"==typeof q.p256dh&&q.p256dh.length>0&&"string"==typeof q.endpoint&&q.endpoint.length>0&&"string"==typeof q.swScope&&q.swScope.length>0&&"string"==typeof q.vapidKey&&q.vapidKey.length>0}const no="firebase-messaging-store";let us=null;function ko(){return us||(us=(0,Pe.X3)("firebase-messaging-database",1,{upgrade:(H,q)=>{0===q&&H.createObjectStore(no)}})),us}function qo(H){return So.apply(this,arguments)}function So(){return(So=(0,ee.Z)(function*(H){const q=rs(H),ke=yield(yield ko()).transaction(no).objectStore(no).get(q);if(ke)return ke;{const pt=yield Qs(H.appConfig.senderId);if(pt)return yield Kr(H,pt),pt}})).apply(this,arguments)}function Kr(H,q){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,ee.Z)(function*(H,q){const se=rs(H),pt=(yield ko()).transaction(no,"readwrite");return yield pt.objectStore(no).put(q,se),yield pt.done,q})).apply(this,arguments)}function or(H){return Es.apply(this,arguments)}function Es(){return(Es=(0,ee.Z)(function*(H){const q=rs(H),ke=(yield ko()).transaction(no,"readwrite");yield ke.objectStore(no).delete(q),yield ke.done})).apply(this,arguments)}function rs({appConfig:H}){return H.appId}const ei=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dr(H,q){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,ee.Z)(function*(H,q){const se=yield Ka(H),ke=qt(q),pt={method:"POST",headers:se,body:JSON.stringify(ke)};let Rt;try{Rt=yield(yield fetch(ro(H.appConfig),pt)).json()}catch(sn){throw ei.create("token-subscribe-failed",{errorInfo:sn?.toString()})}if(Rt.error)throw ei.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ei.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function sa(H,q){return ys.apply(this,arguments)}function ys(){return(ys=(0,ee.Z)(function*(H,q){const se=yield Ka(H),ke=qt(q.subscriptionOptions),pt={method:"PATCH",headers:se,body:JSON.stringify(ke)};let Rt;try{Rt=yield(yield fetch(`${ro(H.appConfig)}/${q.token}`,pt)).json()}catch(sn){throw ei.create("token-update-failed",{errorInfo:sn?.toString()})}if(Rt.error)throw ei.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw ei.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function ml(H,q){return fo.apply(this,arguments)}function fo(){return(fo=(0,ee.Z)(function*(H,q){const ke={method:"DELETE",headers:yield Ka(H)};try{const Rt=yield(yield fetch(`${ro(H.appConfig)}/${q}`,ke)).json();if(Rt.error)throw ei.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(pt){throw ei.create("token-unsubscribe-failed",{errorInfo:pt?.toString()})}})).apply(this,arguments)}function ro({projectId:H}){return`https://fcmregistrations.googleapis.com/v1/projects/${H}/registrations`}function Ka(H){return Da.apply(this,arguments)}function Da(){return(Da=(0,ee.Z)(function*({appConfig:H,installations:q}){const se=yield q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${se}`})})).apply(this,arguments)}function qt({p256dh:H,auth:q,endpoint:se,vapidKey:ke}){const pt={web:{endpoint:se,auth:q,p256dh:H}};return ke!==Wr&&(pt.web.applicationPubKey=ke),pt}const pr=6048e5;function oa(H){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,ee.Z)(function*(H){const q=yield Y(H.swRegistration,H.vapidKey),se={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:q.endpoint,auth:Ko(q.getKey("auth")),p256dh:Ko(q.getKey("p256dh"))},ke=yield qo(H.firebaseDependencies);if(ke){if(fe(ke.subscriptionOptions,se))return Date.now()>=ke.createTime+pr?W(H,{token:ke.token,createTime:Date.now(),subscriptionOptions:se}):ke.token;try{yield ml(H.firebaseDependencies,ke.token)}catch(pt){console.warn(pt)}return ue(H.firebaseDependencies,se)}return ue(H.firebaseDependencies,se)})).apply(this,arguments)}function cs(H){return Z.apply(this,arguments)}function Z(){return(Z=(0,ee.Z)(function*(H){const q=yield qo(H.firebaseDependencies);q&&(yield ml(H.firebaseDependencies,q.token),yield or(H.firebaseDependencies));const se=yield H.swRegistration.pushManager.getSubscription();return!se||se.unsubscribe()})).apply(this,arguments)}function W(H,q){return j.apply(this,arguments)}function j(){return(j=(0,ee.Z)(function*(H,q){try{const se=yield sa(H.firebaseDependencies,q),ke=Object.assign(Object.assign({},q),{token:se,createTime:Date.now()});return yield Kr(H.firebaseDependencies,ke),se}catch(se){throw yield cs(H),se}})).apply(this,arguments)}function ue(H,q){return kt.apply(this,arguments)}function kt(){return(kt=(0,ee.Z)(function*(H,q){const ke={token:yield dr(H,q),createTime:Date.now(),subscriptionOptions:q};return yield Kr(H,ke),ke.token})).apply(this,arguments)}function Y(H,q){return K.apply(this,arguments)}function K(){return(K=(0,ee.Z)(function*(H,q){return(yield H.pushManager.getSubscription())||H.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ms(q)})})).apply(this,arguments)}function fe(H,q){return q.vapidKey===H.vapidKey&&q.endpoint===H.endpoint&&q.auth===H.auth&&q.p256dh===H.p256dh}function Ie(H){const q={from:H.from,collapseKey:H.collapse_key,messageId:H.fcmMessageId};return function He(H,q){if(!q.notification)return;H.notification={};const se=q.notification.title;se&&(H.notification.title=se);const ke=q.notification.body;ke&&(H.notification.body=ke);const pt=q.notification.image;pt&&(H.notification.image=pt);const Rt=q.notification.icon;Rt&&(H.notification.icon=Rt)}(q,H),function Ct(H,q){!q.data||(H.data=q.data)}(q,H),function _t(H,q){var se,ke,pt,Rt,sn;if(!(q.fcmOptions||null!==(se=q.notification)&&void 0!==se&&se.click_action))return;H.fcmOptions={};const Sn=null!==(pt=null===(ke=q.fcmOptions)||void 0===ke?void 0:ke.link)&&void 0!==pt?pt:null===(Rt=q.notification)||void 0===Rt?void 0:Rt.click_action;Sn&&(H.fcmOptions.link=Sn);const er=null===(sn=q.fcmOptions)||void 0===sn?void 0:sn.analytics_label;er&&(H.fcmOptions.analyticsLabel=er)}(q,H),q}function Vn(H){return"object"==typeof H&&!!H&&wa in H}function Dn(H,q){const se=[];for(let ke=0;ke<H.length;ke++)se.push(H.charAt(ke)),ke<q.length&&se.push(q.charAt(ke));return se.join("")}function qn(H){return ei.create("missing-app-config-values",{valueName:H})}Dn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $i{constructor(q,se,ke){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pt=function cr(H){if(!H||!H.options)throw qn("App Configuration Object");if(!H.name)throw qn("App Name");const q=["projectId","apiKey","appId","messagingSenderId"],{options:se}=H;for(const ke of q)if(!se[ke])throw qn(ke);return{appName:H.name,projectId:se.projectId,apiKey:se.apiKey,appId:se.appId,senderId:se.messagingSenderId}}(q);this.firebaseDependencies={app:q,appConfig:pt,installations:se,analyticsProvider:ke}}_delete(){return Promise.resolve()}}function Gi(H){return yi.apply(this,arguments)}function yi(){return(yi=(0,ee.Z)(function*(H){try{H.swRegistration=yield navigator.serviceWorker.register(Jn,{scope:_s}),H.swRegistration.update().catch(()=>{})}catch(q){throw ei.create("failed-service-worker-registration",{browserErrorMessage:q?.message})}})).apply(this,arguments)}function Ai(H,q){return is.apply(this,arguments)}function is(){return(is=(0,ee.Z)(function*(H,q){if(!q&&!H.swRegistration&&(yield Gi(H)),q||!H.swRegistration){if(!(q instanceof ServiceWorkerRegistration))throw ei.create("invalid-sw-registration");H.swRegistration=q}})).apply(this,arguments)}function qr(H,q){return vs.apply(this,arguments)}function vs(){return(vs=(0,ee.Z)(function*(H,q){q?H.vapidKey=q:H.vapidKey||(H.vapidKey=Wr)})).apply(this,arguments)}function Wi(){return(Wi=(0,ee.Z)(function*(H,q){if(!navigator)throw ei.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ei.create("permission-blocked");return yield qr(H,q?.vapidKey),yield Ai(H,q?.serviceWorkerRegistration),oa(H)})).apply(this,arguments)}function zi(H,q,se){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,ee.Z)(function*(H,q,se){const ke=po(q);(yield H.firebaseDependencies.analyticsProvider.get()).logEvent(ke,{message_id:se[wa],message_name:se[Gs],message_time:se[yo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function po(H){switch(H){case ki.NOTIFICATION_CLICKED:return"notification_open";case ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ne(){return(ne=(0,ee.Z)(function*(H,q){const se=q.data;if(!se.isFirebaseMessaging)return;H.onMessageHandler&&se.messageType===ki.PUSH_RECEIVED&&("function"==typeof H.onMessageHandler?H.onMessageHandler(Ie(se)):H.onMessageHandler.next(Ie(se)));const ke=se.data;Vn(ke)&&"1"===ke[kr]&&(yield zi(H,se.messageType,ke))})).apply(this,arguments)}const $="@firebase/messaging",Le=H=>{const q=new $i(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),H.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",se=>function F(H,q){return ne.apply(this,arguments)}(q,se)),q},Tt=H=>{const q=H.getProvider("messaging").getImmediate();return{getToken:ke=>function Lo(H,q){return Wi.apply(this,arguments)}(q,ke)}};function Fn(){return ai.apply(this,arguments)}function ai(){return(ai=(0,ee.Z)(function*(){try{yield(0,Me.eu)()}catch{return!1}return typeof window<"u"&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vt(){(0,Ce._registerComponent)(new Oe.wA("messaging",Le,"PUBLIC")),(0,Ce._registerComponent)(new Oe.wA("messaging-internal",Tt,"PRIVATE")),(0,Ce.registerVersion)($,"0.12.0"),(0,Ce.registerVersion)($,"0.12.0","esm2017")}();const ua="analytics",qa="firebase_id",Nl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yo="https://www.googletagmanager.com/gtag/js",Zi=new Ge.Yd("@firebase/analytics");function Gl(H){return Promise.all(H.map(q=>q.catch(se=>se)))}function Pu(H,q){const se=document.createElement("script");se.src=`${Yo}?l=${H}&id=${q}`,se.async=!0,document.head.appendChild(se)}function ou(H,q,se,ke,pt,Rt){return yl.apply(this,arguments)}function yl(){return(yl=(0,ee.Z)(function*(H,q,se,ke,pt,Rt){const sn=ke[pt];try{if(sn)yield q[sn];else{const er=(yield Gl(se)).find(ar=>ar.measurementId===pt);er&&(yield q[er.appId])}}catch(Sn){Zi.error(Sn)}H("config",pt,Rt)})).apply(this,arguments)}function ca(H,q,se,ke,pt){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,ee.Z)(function*(H,q,se,ke,pt){try{let Rt=[];if(pt&&pt.send_to){let sn=pt.send_to;Array.isArray(sn)||(sn=[sn]);const Sn=yield Gl(se);for(const er of sn){const ar=Sn.find(Tn=>Tn.measurementId===er),$r=ar&&q[ar.appId];if(!$r){Rt=[];break}Rt.push($r)}}0===Rt.length&&(Rt=Object.values(q)),yield Promise.all(Rt),H("event",ke,pt||{})}catch(Rt){Zi.error(Rt)}})).apply(this,arguments)}function vl(H){const q=window.document.getElementsByTagName("script");for(const se of Object.values(q))if(se.src&&se.src.includes(Yo)&&se.src.includes(H))return se;return null}const Ds=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rn=new class mu{constructor(q={},se=1e3){this.throttleMetadata=q,this.intervalMillis=se}getThrottleMetadata(q){return this.throttleMetadata[q]}setThrottleMetadata(q,se){this.throttleMetadata[q]=se}deleteThrottleMetadata(q){delete this.throttleMetadata[q]}};function Ki(H){return new Headers({Accept:"application/json","x-goog-api-key":H})}function ol(H){return as.apply(this,arguments)}function as(){return(as=(0,ee.Z)(function*(H){var q;const{appId:se,apiKey:ke}=H,pt={method:"GET",headers:Ki(ke)},Rt=Nl.replace("{app-id}",se),sn=yield fetch(Rt,pt);if(200!==sn.status&&304!==sn.status){let Sn="";try{const er=yield sn.json();null!==(q=er.error)&&void 0!==q&&q.message&&(Sn=er.error.message)}catch{}throw Ds.create("config-fetch-failed",{httpStatus:sn.status,responseMessage:Sn})}return sn.json()})).apply(this,arguments)}function dn(H){return wn.apply(this,arguments)}function wn(){return(wn=(0,ee.Z)(function*(H,q=rn,se){const{appId:ke,apiKey:pt,measurementId:Rt}=H.options;if(!ke)throw Ds.create("no-app-id");if(!pt){if(Rt)return{measurementId:Rt,appId:ke};throw Ds.create("no-api-key")}const sn=q.getThrottleMetadata(ke)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Sn=new ui;return setTimeout((0,ee.Z)(function*(){Sn.abort()}),void 0!==se?se:6e4),Pa({appId:ke,apiKey:pt,measurementId:Rt},sn,Sn,q)})).apply(this,arguments)}function Pa(H,q,se){return yn.apply(this,arguments)}function yn(){return(yn=(0,ee.Z)(function*(H,{throttleEndTimeMillis:q,backoffCount:se},ke,pt=rn){var Rt;const{appId:sn,measurementId:Sn}=H;try{yield Pt(ke,q)}catch(er){if(Sn)return Zi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Sn} provided in the "measurementId" field in the local Firebase config. [${er?.message}]`),{appId:sn,measurementId:Sn};throw er}try{const er=yield ol(H);return pt.deleteThrottleMetadata(sn),er}catch(er){const ar=er;if(!Zt(ar)){if(pt.deleteThrottleMetadata(sn),Sn)return Zi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Sn} provided in the "measurementId" field in the local Firebase config. [${ar?.message}]`),{appId:sn,measurementId:Sn};throw er}const $r=503===Number(null===(Rt=ar?.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,Me.$s)(se,pt.intervalMillis,30):(0,Me.$s)(se,pt.intervalMillis),Tn={throttleEndTimeMillis:Date.now()+$r,backoffCount:se+1};return pt.setThrottleMetadata(sn,Tn),Zi.debug(`Calling attemptFetch again in ${$r} millis`),Pa(H,Tn,ke,pt)}})).apply(this,arguments)}function Pt(H,q){return new Promise((se,ke)=>{const pt=Math.max(q-Date.now(),0),Rt=setTimeout(se,pt);H.addEventListener(()=>{clearTimeout(Rt),ke(Ds.create("fetch-throttle",{throttleEndTimeMillis:q}))})})}function Zt(H){if(!(H instanceof Me.ZR&&H.customData))return!1;const q=Number(H.customData.httpStatus);return 429===q||500===q||503===q||504===q}class ui{constructor(){this.listeners=[]}addEventListener(q){this.listeners.push(q)}abort(){this.listeners.forEach(q=>q())}}let Ya,_r;function bl(){return(bl=(0,ee.Z)(function*(H,q,se,ke,pt){if(pt&&pt.global)H("event",se,ke);else{const Rt=yield q;H("event",se,Object.assign(Object.assign({},ke),{send_to:Rt}))}})).apply(this,arguments)}function da(H){_r=H}function Fu(H){Ya=H}function Qi(){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,ee.Z)(function*(){if(!(0,Me.hl)())return Zi.warn(Ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch(H){return Zi.warn(Ds.create("indexeddb-unavailable",{errorInfo:H?.toString()}).message),!1}return!0})).apply(this,arguments)}function ti(){return(ti=(0,ee.Z)(function*(H,q,se,ke,pt,Rt,sn){var Sn;const er=dn(H);er.then(ds=>{se[ds.measurementId]=ds.appId,H.options.measurementId&&ds.measurementId!==H.options.measurementId&&Zi.warn(`The measurement ID in the local Firebase config (${H.options.measurementId}) does not match the measurement ID fetched from the server (${ds.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ds=>Zi.error(ds)),q.push(er);const ar=Qi().then(ds=>{if(ds)return ke.getId()}),[$r,Tn]=yield Promise.all([er,ar]);vl(Rt)||Pu(Rt,$r.measurementId),_r&&(pt("consent","default",_r),da(void 0)),pt("js",new Date);const xr=null!==(Sn=sn?.config)&&void 0!==Sn?Sn:{};return xr.origin="firebase",xr.update=!0,null!=Tn&&(xr[qa]=Tn),pt("config",$r.measurementId,xr),Ya&&(pt("set",Ya),Fu(void 0)),$r.measurementId})).apply(this,arguments)}class Ml{constructor(q){this.app=q}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},vn=[];const so={};let Ia,wo,Zo="dataLayer",Ol=!1;function pc(H,q,se){!function Lu(){const H=[];if((0,Me.ru)()&&H.push("This is a browser extension environment."),(0,Me.zI)()||H.push("Cookies are not available."),H.length>0){const q=H.map((ke,pt)=>`(${pt+1}) ${ke}`).join(" "),se=Ds.create("invalid-analytics-context",{errorInfo:q});Zi.warn(se.message)}}();const ke=H.options.appId;if(!ke)throw Ds.create("no-app-id");if(!H.options.apiKey){if(!H.options.measurementId)throw Ds.create("no-api-key");Zi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${H.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[ke])throw Ds.create("already-exists",{id:ke});if(!Ol){!function _l(H){let q=[];Array.isArray(window[H])?q=window[H]:window[H]=q}(Zo);const{wrappedGtag:Rt,gtagCore:sn}=function gu(H,q,se,ke,pt){let Rt=function(...sn){window[ke].push(arguments)};return window[pt]&&"function"==typeof window[pt]&&(Rt=window[pt]),window[pt]=function pu(H,q,se,ke){function Rt(){return(Rt=(0,ee.Z)(function*(sn,Sn,er){try{"event"===sn?yield ca(H,q,se,Sn,er):"config"===sn?yield ou(H,q,se,ke,Sn,er):"consent"===sn?H("consent","update",er):H("set",Sn)}catch(ar){Zi.error(ar)}})).apply(this,arguments)}return function pt(sn,Sn,er){return Rt.apply(this,arguments)}}(Rt,H,q,se),{gtagCore:Rt,wrappedGtag:window[pt]}}(Qr,vn,so,Zo,"gtag");wo=Rt,Ia=sn,Ol=!0}return Qr[ke]=function Rl(H,q,se,ke,pt,Rt,sn){return ti.apply(this,arguments)}(H,vn,so,q,Ia,Zo,se),new Ml(H)}function qc(){return au.apply(this,arguments)}function au(){return(au=(0,ee.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch{return!1}})).apply(this,arguments)}const Ja="@firebase/analytics";!function Ts(){(0,Ce._registerComponent)(new Oe.wA(ua,(q,{options:se})=>pc(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),se),"PUBLIC")),(0,Ce._registerComponent)(new Oe.wA("analytics-internal",function H(q){try{const se=q.getProvider(ua).getImmediate();return{logEvent:(ke,pt,Rt)=>function kl(H,q,se,ke){H=(0,Me.m9)(H),function bo(H,q,se,ke,pt){return bl.apply(this,arguments)}(wo,Qr[H.app.options.appId],q,se,ke).catch(pt=>Zi.error(pt))}(se,ke,pt,Rt)}}catch(se){throw Ds.create("interop-component-reg-failed",{reason:se})}},"PRIVATE")),(0,Ce.registerVersion)(Ja,"0.9.0"),(0,Ce.registerVersion)(Ja,"0.9.0","esm2017")}();var La=L(4408),lu=L(7565);const R=new class A extends lu.v{}(class Sa extends La.o{constructor(q,se){super(q,se),this.scheduler=q,this.work=se}schedule(q,se=0){return se>0?super.schedule(q,se):(this.delay=se,this.state=q,this.scheduler.flush(this),this)}execute(q,se){return se>0||this.closed?super.execute(q,se):this._execute(q,se)}requestAsyncId(q,se,ke=0){return null!=ke&&ke>0||null==ke&&this.delay>0?super.requestAsyncId(q,se,ke):(q.flush(this),0)}});var B=L(4986),z=L(8505),le=L(5363),Ne=L(9468);const xe=new h.GfV("7.5.0"),Ft="__angularfire_symbol__analyticsIsSupportedValue",fn="__angularfire_symbol__analyticsIsSupported",Or="__angularfire_symbol__remoteConfigIsSupportedValue",_n="__angularfire_symbol__remoteConfigIsSupported",Hi="__angularfire_symbol__messagingIsSupportedValue",Cs="__angularfire_symbol__messagingIsSupported";function Aa(H,q,se){if(q){if(1===q.length)return q[0];const Rt=q.filter(sn=>sn.app===se);if(1===Rt.length)return Rt[0]}return se.container.getProvider(H).getImmediate({optional:!0})}globalThis[fn]||(globalThis[fn]=qc().then(H=>globalThis[Ft]=H).catch(()=>globalThis[Ft]=!1)),globalThis[Cs]||(globalThis[Cs]=Fn().then(H=>globalThis[Hi]=H).catch(()=>globalThis[Hi]=!1)),globalThis[_n]||(globalThis[_n]=jr().then(H=>globalThis[Or]=H).catch(()=>globalThis[Or]=!1));const Ba=(H,q)=>{const se=q?[q]:(0,U.C6)(),ke=[];return se.forEach(pt=>{pt.container.getProvider(H).instances.forEach(sn=>{ke.includes(sn)||ke.push(sn)})}),ke};function Ao(){}class Xa{constructor(q,se=R){this.zone=q,this.delegate=se}now(){return this.delegate.now()}schedule(q,se,ke){const pt=this.zone;return this.delegate.schedule(function(sn){pt.runGuarded(()=>{q.apply(this,[sn])})},se,ke)}}class Va{constructor(q){this.zone=q,this.task=null}call(q,se){const ke=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)),se.pipe((0,z.b)({next:ke,complete:ke,error:ke})).subscribe(q).add(ke)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qo=(()=>{class H{constructor(se){this.ngZone=se,this.outsideAngular=se.runOutsideAngular(()=>new Xa(Zone.current)),this.insideAngular=se.run(()=>new Xa(Zone.current,B.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return H.\u0275fac=function(se){return new(se||H)(h.LFG(h.R0b))},H.\u0275prov=h.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();function No(){const H=globalThis.\u0275AngularFireScheduler;if(!H)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return H}function mc(H){return H.pipe((0,le.Q)(No().outsideAngular))}function Tl(H){return No(),function yu(H){return function(se){return(se=se.lift(new Va(H.ngZone))).pipe((0,Ne.R)(H.outsideAngular),(0,le.Q)(H.insideAngular))}}(No())(H)}},552:(cn,dt,L)=>{L.d(dt,{$:()=>ro,A:()=>_e,B:()=>mt,G:()=>Co,H:()=>ps,J:()=>Je,L:()=>Fe,M:()=>Mr,N:()=>Ys,P:()=>B,Q:()=>wa,R:()=>Pl,T:()=>Gs,U:()=>Wr,V:()=>ki,W:()=>Ko,X:()=>Qs,Y:()=>Ui,Z:()=>dr,_:()=>sa,a:()=>Ca,a0:()=>oa,a1:()=>cs,a2:()=>W,a3:()=>ue,a4:()=>Y,a5:()=>fe,a6:()=>He,a7:()=>Ct,a8:()=>Vn,a9:()=>Dn,aA:()=>Ae,aB:()=>er,aC:()=>mc,aD:()=>ll,aE:()=>Nn,aI:()=>Ki,aL:()=>kr,aa:()=>Gi,ab:()=>Ai,ac:()=>qr,af:()=>zi,ag:()=>po,ah:()=>F,ak:()=>no,al:()=>li,an:()=>Yo,ao:()=>yl,ap:()=>bt,aq:()=>ve,ar:()=>pn,as:()=>Ht,at:()=>Hu,au:()=>go,av:()=>ge,aw:()=>gt,ax:()=>nt,ay:()=>ds,az:()=>$e,b:()=>Ds,c:()=>Hi,d:()=>fa,e:()=>Li,f:()=>yu,g:()=>ke,h:()=>H,i:()=>Mn,j:()=>sn,k:()=>jo,l:()=>Bu,m:()=>uh,o:()=>Pe,r:()=>La,s:()=>al,u:()=>R});var h=L(5861),U=L(2090),ee=L(9681),Ce=L(1877),Me=L(655),Oe=L(4859);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_e={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mt=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function Nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xt=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new Ce.Yd("@firebase/auth");function je(N,...b){ct.logLevel<=Ce.in.ERROR&&ct.error(`Auth (${ee.SDK_VERSION}): ${N}`,...b)}function Ht(N,...b){throw jt(N,...b)}function gt(N,...b){return jt(N,...b)}function qe(N,b,E){const P=Object.assign(Object.assign({},lt()),{[b]:E});return new U.LL("auth","Firebase",P).create(b,{appName:N.name})}function ze(N,b,E){if(!(b instanceof E))throw E.name!==b.constructor.name&&Ht(N,"argument-error"),qe(N,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jt(N,...b){if("string"!=typeof N){const E=b[0],P=[...b.slice(1)];return P[0]&&(P[0].appName=N.name),N._errorFactory.create(E,...P)}return xt.create(N,...b)}function nt(N,b,...E){if(!N)throw jt(b,...E)}function Ve(N){const b="INTERNAL ASSERTION FAILED: "+N;throw je(b),new Error(b)}function bt(N,b){N||Ve(b)}const Se=new Map;function $e(N){bt(N instanceof Function,"Expected a class definition");let b=Se.get(N);return b?(bt(b instanceof N,"Instance stored in cache mismatched with class"),b):(b=new N,Se.set(N,b),b)}function Ut(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.href)||""}function Kt(){return"http:"===An()||"https:"===An()}function An(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class pe{constructor(b,E){this.shortDelay=b,this.longDelay=E,bt(E>b,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(N,b){bt(N.emulator,"Emulator should always be set here");const{url:E}=N.emulator;return b?`${E}${b.startsWith("/")?b.slice(1):b}`:E}class At{static initialize(b,E,P){this.fetchImpl=b,E&&(this.headersImpl=E),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const We={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ye=new pe(3e4,6e4);function Be(N,b){return N.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:N.tenantId}):b}function ot(N,b,E,P){return en.apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(N,b,E,P,oe={}){return an(N,oe,(0,h.Z)(function*(){let ye={},Et={};P&&("GET"===b?Et=P:ye={body:JSON.stringify(P)});const nn=(0,U.xO)(Object.assign({key:N.config.apiKey},Et)).slice(1),$n=yield N._getAdditionalHeaders();return $n["Content-Type"]="application/json",N.languageCode&&($n["X-Firebase-Locale"]=N.languageCode),At.fetch()(vr(N,N.config.apiHost,E,nn),Object.assign({method:b,headers:$n,referrerPolicy:"no-referrer"},ye))}))})).apply(this,arguments)}function an(N,b,E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(N,b,E){N._canInitEmulator=!1;const P=Object.assign(Object.assign({},We),b);try{const oe=new Sr(N),ye=yield Promise.race([E(),oe.promise]);oe.clearNetworkTimeout();const Et=yield ye.json();if("needConfirmation"in Et)throw Kn(N,"account-exists-with-different-credential",Et);if(ye.ok&&!("errorMessage"in Et))return Et;{const nn=ye.ok?Et.errorMessage:Et.error.message,[$n,Zn]=nn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$n)throw Kn(N,"credential-already-in-use",Et);if("EMAIL_EXISTS"===$n)throw Kn(N,"email-already-in-use",Et);if("USER_DISABLED"===$n)throw Kn(N,"user-disabled",Et);const Er=P[$n]||$n.toLowerCase().replace(/[_\s]+/g,"-");if(Zn)throw qe(N,Er,Zn);Ht(N,Er)}}catch(oe){if(oe instanceof U.ZR)throw oe;Ht(N,"network-request-failed")}})).apply(this,arguments)}function jn(N,b,E,P){return gi.apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(N,b,E,P,oe={}){const ye=yield ot(N,b,E,P,oe);return"mfaPendingCredential"in ye&&Ht(N,"multi-factor-auth-required",{_serverResponse:ye}),ye})).apply(this,arguments)}function vr(N,b,E,P){const oe=`${b}${E}?${P}`;return N.config.emulator?ie(N.config,oe):`${N.config.apiScheme}://${oe}`}class Sr{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((E,P)=>{this.timer=setTimeout(()=>P(gt(this.auth,"network-request-failed")),Ye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(N,b,E){const P={appName:N.name};E.email&&(P.email=E.email),E.phoneNumber&&(P.phoneNumber=E.phoneNumber);const oe=gt(N,b,P);return oe.customData._tokenResponse=E,oe}function Tr(){return(Tr=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function hn(N,b){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Gn(N,b){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function Yr(N){if(N)try{const b=new Date(Number(N));if(!isNaN(b.getTime()))return b.toUTCString()}catch{}}function fr(){return(fr=(0,h.Z)(function*(N,b=!1){const E=(0,U.m9)(N),P=yield E.getIdToken(b),oe=Ln(P);nt(oe&&oe.exp&&oe.auth_time&&oe.iat,E.auth,"internal-error");const ye="object"==typeof oe.firebase?oe.firebase:void 0,Et=ye?.sign_in_provider;return{claims:oe,token:P,authTime:Yr(lr(oe.auth_time)),issuedAtTime:Yr(lr(oe.iat)),expirationTime:Yr(lr(oe.exp)),signInProvider:Et||null,signInSecondFactor:ye?.sign_in_second_factor||null}})).apply(this,arguments)}function lr(N){return 1e3*Number(N)}function Ln(N){const[b,E,P]=N.split(".");if(void 0===b||void 0===E||void 0===P)return je("JWT malformed, contained fewer than 3 sections"),null;try{const oe=(0,U.tV)(E);return oe?JSON.parse(oe):(je("Failed to decode base64 JWT payload"),null)}catch(oe){return je("Caught error parsing JWT payload as JSON",oe?.toString()),null}}function Pn(N,b){return On.apply(this,arguments)}function On(){return(On=(0,h.Z)(function*(N,b,E=!1){if(E)return b;try{return yield b}catch(P){throw P instanceof U.ZR&&Lr(P)&&N.auth.currentUser===N&&(yield N.auth.signOut()),P}})).apply(this,arguments)}function Lr({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}class Ii{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var E;if(b){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const oe=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,oe)}}schedule(b=!1){var E=this;if(!this.isRunning)return;const P=this.getInterval(b);this.timerId=setTimeout((0,h.Z)(function*(){yield E.iteration()}),P)}iteration(){var b=this;return(0,h.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&b.schedule(!0))}b.schedule()})()}}class kn{constructor(b,E){this.createdAt=b,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ri(N){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(N){var b;const E=N.auth,P=yield N.getIdToken(),oe=yield Pn(N,Gn(E,{idToken:P}));nt(oe?.users.length,E,"internal-error");const ye=oe.users[0];N._notifyReloadListener(ye);const Et=null!==(b=ye.providerUserInfo)&&void 0!==b&&b.length?Rr(ye.providerUserInfo):[],nn=si(N.providerData,Et),Er=!!N.isAnonymous&&!(N.email&&ye.passwordHash||nn?.length),hs={uid:ye.localId,displayName:ye.displayName||null,photoURL:ye.photoUrl||null,email:ye.email||null,emailVerified:ye.emailVerified||!1,phoneNumber:ye.phoneNumber||null,tenantId:ye.tenantId||null,providerData:nn,metadata:new kn(ye.createdAt,ye.lastLoginAt),isAnonymous:Er};Object.assign(N,hs)})).apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(N){const b=(0,U.m9)(N);yield Ri(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function si(N,b){return[...N.filter(P=>!b.some(oe=>oe.providerId===P.providerId)),...b]}function Rr(N){return N.map(b=>{var{providerId:E}=b,P=(0,Me._T)(b,["providerId"]);return{providerId:E,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}function Bt(){return(Bt=(0,h.Z)(function*(N,b){const E=yield an(N,{},(0,h.Z)(function*(){const P=(0,U.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:oe,apiKey:ye}=N.config,Et=vr(N,oe,"/v1/token",`key=${ye}`),nn=yield N._getAdditionalHeaders();return nn["Content-Type"]="application/x-www-form-urlencoded",At.fetch()(Et,{method:"POST",headers:nn,body:P})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){nt(b.idToken,"internal-error"),nt(typeof b.idToken<"u","internal-error"),nt(typeof b.refreshToken<"u","internal-error");const E="expiresIn"in b&&typeof b.expiresIn<"u"?Number(b.expiresIn):function En(N){const b=Ln(N);return nt(b,"internal-error"),nt(typeof b.exp<"u","internal-error"),nt(typeof b.iat<"u","internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,E)}getToken(b,E=!1){var P=this;return(0,h.Z)(function*(){return nt(!P.accessToken||P.refreshToken,b,"user-token-expired"),E||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(b,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,E){var P=this;return(0,h.Z)(function*(){const{accessToken:oe,refreshToken:ye,expiresIn:Et}=yield function mn(N,b){return Bt.apply(this,arguments)}(b,E);P.updateTokensAndExpiration(oe,ye,Number(Et))})()}updateTokensAndExpiration(b,E,P){this.refreshToken=E||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(b,E){const{refreshToken:P,accessToken:oe,expirationTime:ye}=E,Et=new bn;return P&&(nt("string"==typeof P,"internal-error",{appName:b}),Et.refreshToken=P),oe&&(nt("string"==typeof oe,"internal-error",{appName:b}),Et.accessToken=oe),ye&&(nt("number"==typeof ye,"internal-error",{appName:b}),Et.expirationTime=ye),Et}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return Ve("not implemented")}}function zn(N,b){nt("string"==typeof N||typeof N>"u","internal-error",{appName:b})}class Bn{constructor(b){var{uid:E,auth:P,stsTokenManager:oe}=b,ye=(0,Me._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ii(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=P,this.stsTokenManager=oe,this.accessToken=oe.accessToken,this.displayName=ye.displayName||null,this.email=ye.email||null,this.emailVerified=ye.emailVerified||!1,this.phoneNumber=ye.phoneNumber||null,this.photoURL=ye.photoURL||null,this.isAnonymous=ye.isAnonymous||!1,this.tenantId=ye.tenantId||null,this.providerData=ye.providerData?[...ye.providerData]:[],this.metadata=new kn(ye.createdAt||void 0,ye.lastLoginAt||void 0)}getIdToken(b){var E=this;return(0,h.Z)(function*(){const P=yield Pn(E,E.stsTokenManager.getToken(E.auth,b));return nt(P,E.auth,"internal-error"),E.accessToken!==P&&(E.accessToken=P,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),P})()}getIdTokenResult(b){return function Qn(N){return fr.apply(this,arguments)}(this,b)}reload(){return function Si(N){return mr.apply(this,arguments)}(this)}_assign(b){this!==b&&(nt(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(E=>Object.assign({},E)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new Bn(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,E=!1){var P=this;return(0,h.Z)(function*(){let oe=!1;b.idToken&&b.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(b),oe=!0),E&&(yield Ri(P)),yield P.auth._persistUserIfCurrent(P),oe&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var b=this;return(0,h.Z)(function*(){const E=yield b.getIdToken();return yield Pn(b,function ir(N,b){return Tr.apply(this,arguments)}(b.auth,{idToken:E})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,E){var P,oe,ye,Et,nn,$n,Zn,Er;const hs=null!==(P=E.displayName)&&void 0!==P?P:void 0,Eo=null!==(oe=E.email)&&void 0!==oe?oe:void 0,dl=null!==(ye=E.phoneNumber)&&void 0!==ye?ye:void 0,tl=null!==(Et=E.photoURL)&&void 0!==Et?Et:void 0,hl=null!==(nn=E.tenantId)&&void 0!==nn?nn:void 0,Xc=null!==($n=E._redirectEventId)&&void 0!==$n?$n:void 0,Ec=null!==(Zn=E.createdAt)&&void 0!==Zn?Zn:void 0,gf=null!==(Er=E.lastLoginAt)&&void 0!==Er?Er:void 0,{uid:ju,emailVerified:Xs,isAnonymous:Td,providerData:$u,stsTokenManager:Dc}=E;nt(ju&&Dc,b,"internal-error");const Uh=bn.fromJSON(this.name,Dc);nt("string"==typeof ju,b,"internal-error"),zn(hs,b.name),zn(Eo,b.name),nt("boolean"==typeof Xs,b,"internal-error"),nt("boolean"==typeof Td,b,"internal-error"),zn(dl,b.name),zn(tl,b.name),zn(hl,b.name),zn(Xc,b.name),zn(Ec,b.name),zn(gf,b.name);const ed=new Bn({uid:ju,auth:b,email:Eo,emailVerified:Xs,displayName:hs,isAnonymous:Td,photoURL:tl,phoneNumber:dl,tenantId:hl,stsTokenManager:Uh,createdAt:Ec,lastLoginAt:gf});return $u&&Array.isArray($u)&&(ed.providerData=$u.map(Yl=>Object.assign({},Yl))),Xc&&(ed._redirectEventId=Xc),ed}static _fromIdTokenResponse(b,E,P=!1){return(0,h.Z)(function*(){const oe=new bn;oe.updateFromServerResponse(E);const ye=new Bn({uid:E.localId,auth:b,stsTokenManager:oe,isAnonymous:P});return yield Ri(ye),ye})()}}const Fe=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(E,P){var oe=this;return(0,h.Z)(function*(){oe.storage[E]=P})()}_get(E){var P=this;return(0,h.Z)(function*(){const oe=P.storage[E];return void 0===oe?null:oe})()}_remove(E){var P=this;return(0,h.Z)(function*(){delete P.storage[E]})()}_addListener(E,P){}_removeListener(E,P){}}return N.type="NONE",N})();function Ae(N,b,E){return`firebase:${N}:${b}:${E}`}class Qe{constructor(b,E,P){this.persistence=b,this.auth=E,this.userKey=P;const{config:oe,name:ye}=this.auth;this.fullUserKey=Ae(this.userKey,oe.apiKey,ye),this.fullPersistenceKey=Ae("persistence",oe.apiKey,ye),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,h.Z)(function*(){const E=yield b.persistence._get(b.fullUserKey);return E?Bn._fromJSON(b.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var E=this;return(0,h.Z)(function*(){if(E.persistence===b)return;const P=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=b,P?E.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,E,P="authUser"){return(0,h.Z)(function*(){if(!E.length)return new Qe($e(Fe),b,P);const oe=(yield Promise.all(E.map(function(){var Zn=(0,h.Z)(function*(Er){if(yield Er._isAvailable())return Er});return function(Er){return Zn.apply(this,arguments)}}()))).filter(Zn=>Zn);let ye=oe[0]||$e(Fe);const Et=Ae(P,b.config.apiKey,b.name);let nn=null;for(const Zn of E)try{const Er=yield Zn._get(Et);if(Er){const hs=Bn._fromJSON(b,Er);Zn!==ye&&(nn=hs),ye=Zn;break}}catch{}const $n=oe.filter(Zn=>Zn._shouldAllowMigration);return ye._shouldAllowMigration&&$n.length?(ye=$n[0],nn&&(yield ye._set(Et,nn.toJSON())),yield Promise.all(E.map(function(){var Zn=(0,h.Z)(function*(Er){if(Er!==ye)try{yield Er._remove(Et)}catch{}});return function(Er){return Zn.apply(this,arguments)}}())),new Qe(ye,b,P)):new Qe(ye,b,P)})()}}function De(N){const b=N.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(Yt(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(ae(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(Rn(b))return"Blackberry";if(Ee(b))return"Webos";if(be(b))return"Safari";if((b.includes("chrome/")||ht(b))&&!b.includes("edge/"))return"Chrome";if(pn(b))return"Android";{const P=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function ae(N=(0,U.z$)()){return/firefox\//i.test(N)}function be(N=(0,U.z$)()){const b=N.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function ht(N=(0,U.z$)()){return/crios\//i.test(N)}function Yt(N=(0,U.z$)()){return/iemobile/i.test(N)}function pn(N=(0,U.z$)()){return/android/i.test(N)}function Rn(N=(0,U.z$)()){return/blackberry/i.test(N)}function Ee(N=(0,U.z$)()){return/webos/i.test(N)}function ve(N=(0,U.z$)()){return/iphone|ipad|ipod/i.test(N)||/macintosh/i.test(N)&&/mobile/i.test(N)}function ge(N=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(N)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(N)}function Qt(N=(0,U.z$)()){return ve(N)||pn(N)||Ee(N)||Rn(N)||/windows phone/i.test(N)||Yt(N)}function Xn(N,b=[]){let E;switch(N){case"Browser":E=De((0,U.z$)());break;case"Worker":E=`${De((0,U.z$)())}-${N}`;break;default:E=N}const P=b.length?b.join(","):"FirebaseCore-web";return`${E}/JsCore/${ee.SDK_VERSION}/${P}`}class Ur{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,E){const P=ye=>new Promise((Et,nn)=>{try{Et(b(ye))}catch($n){nn($n)}});P.onAbort=E,this.queue.push(P);const oe=this.queue.length-1;return()=>{this.queue[oe]=()=>Promise.resolve()}}runMiddleware(b){var E=this;return(0,h.Z)(function*(){if(E.auth.currentUser===b)return;const P=[];try{for(const oe of E.queue)yield oe(b),oe.onAbort&&P.push(oe.onAbort)}catch(oe){P.reverse();for(const ye of P)try{ye()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:oe?.message})}})()}}class wi{constructor(b,E,P){this.app=b,this.heartbeatServiceProvider=E,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new es(this),this.idTokenSubscription=new es(this),this.beforeStateQueue=new Ur(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(b,E){var P=this;return E&&(this._popupRedirectResolver=$e(E)),this._initializationPromise=this.queue((0,h.Z)(function*(){var oe,ye;if(!P._deleted&&(P.persistenceManager=yield Qe.create(P,b),!P._deleted)){if(null!==(oe=P._popupRedirectResolver)&&void 0!==oe&&oe._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(E),P.lastNotifiedUid=(null===(ye=P.currentUser)||void 0===ye?void 0:ye.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,h.Z)(function*(){if(b._deleted)return;const E=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||E){if(b.currentUser&&E&&b.currentUser.uid===E.uid)return b._currentUser._assign(E),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(E,!0)}})()}initializeCurrentUser(b){var E=this;return(0,h.Z)(function*(){var P;const oe=yield E.assertedPersistence.getCurrentUser();let ye=oe,Et=!1;if(b&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const nn=null===(P=E.redirectUser)||void 0===P?void 0:P._redirectEventId,$n=ye?._redirectEventId,Zn=yield E.tryRedirectSignIn(b);(!nn||nn===$n)&&Zn?.user&&(ye=Zn.user,Et=!0)}if(!ye)return E.directlySetCurrentUser(null);if(!ye._redirectEventId){if(Et)try{yield E.beforeStateQueue.runMiddleware(ye)}catch(nn){ye=oe,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(nn))}return ye?E.reloadAndSetCurrentUserOrClear(ye):E.directlySetCurrentUser(null)}return nt(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ye._redirectEventId?E.directlySetCurrentUser(ye):E.reloadAndSetCurrentUserOrClear(ye)})()}tryRedirectSignIn(b){var E=this;return(0,h.Z)(function*(){let P=null;try{P=yield E._popupRedirectResolver._completeRedirectFn(E,b,!0)}catch{yield E._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(b){var E=this;return(0,h.Z)(function*(){try{yield Ri(b)}catch(P){if("auth/network-request-failed"!==P?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var b=this;return(0,h.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var E=this;return(0,h.Z)(function*(){const P=b?(0,U.m9)(b):null;return P&&nt(P.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(P&&P._clone(E))})()}_updateCurrentUser(b,E=!1){var P=this;return(0,h.Z)(function*(){if(!P._deleted)return b&&nt(P.tenantId===b.tenantId,P,"tenant-id-mismatch"),E||(yield P.beforeStateQueue.runMiddleware(b)),P.queue((0,h.Z)(function*(){yield P.directlySetCurrentUser(b),P.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,h.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var E=this;return this.queue((0,h.Z)(function*(){yield E.assertedPersistence.setPersistence($e(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new U.LL("auth","Firebase",b())}onAuthStateChanged(b,E,P){return this.registerStateListener(this.authStateSubscription,b,E,P)}beforeAuthStateChanged(b,E){return this.beforeStateQueue.pushCallback(b,E)}onIdTokenChanged(b,E,P){return this.registerStateListener(this.idTokenSubscription,b,E,P)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,E){var P=this;return(0,h.Z)(function*(){const oe=yield P.getOrInitRedirectPersistenceManager(E);return null===b?oe.removeCurrentUser():oe.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var E=this;return(0,h.Z)(function*(){if(!E.redirectPersistenceManager){const P=b&&$e(b)||E._popupRedirectResolver;nt(P,E,"argument-error"),E.redirectPersistenceManager=yield Qe.create(E,[$e(P._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(b){var E=this;return(0,h.Z)(function*(){var P,oe;return E._isInitialized&&(yield E.queue((0,h.Z)(function*(){}))),(null===(P=E._currentUser)||void 0===P?void 0:P._redirectEventId)===b?E._currentUser:(null===(oe=E.redirectUser)||void 0===oe?void 0:oe._redirectEventId)===b?E.redirectUser:null})()}_persistUserIfCurrent(b){var E=this;return(0,h.Z)(function*(){if(b===E.currentUser)return E.queue((0,h.Z)(function*(){return E.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(E=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,E,P,oe){if(this._deleted)return()=>{};const ye="function"==typeof E?E:E.next.bind(E),Et=this._isInitialized?Promise.resolve():this._initializationPromise;return nt(Et,this,"internal-error"),Et.then(()=>ye(this.currentUser)),"function"==typeof E?b.addObserver(E,P,oe):b.addObserver(E)}directlySetCurrentUser(b){var E=this;return(0,h.Z)(function*(){E.currentUser&&E.currentUser!==b&&E._currentUser._stopProactiveRefresh(),b&&E.isProactiveRefreshEnabled&&b._startProactiveRefresh(),E.currentUser=b,b?yield E.assertedPersistence.setCurrentUser(b):yield E.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=Xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,h.Z)(function*(){var E;const P={"X-Client-Version":b.clientVersion};b.app.options.appId&&(P["X-Firebase-gmpid"]=b.app.options.appId);const oe=yield null===(E=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return oe&&(P["X-Firebase-Client"]=oe),P})()}}function Nn(N){return(0,U.m9)(N)}class es{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,U.ne)(E=>this.observer=E)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Co(N,b,E){const P=Nn(N);nt(P._canInitEmulator,P,"emulator-config-failed"),nt(/^https?:\/\//.test(b),P,"invalid-emulator-scheme");const oe=!!E?.disableWarnings,ye=$s(b),{host:Et,port:nn}=function ts(N){const b=$s(N),E=/(\/\/)?([^?#/]+)/.exec(N.substr(b.length));if(!E)return{host:"",port:null};const P=E[2].split("@").pop()||"",oe=/^(\[[^\]]+\])(:|$)/.exec(P);if(oe){const ye=oe[1];return{host:ye,port:Xr(P.substr(ye.length+1))}}{const[ye,Et]=P.split(":");return{host:ye,port:Xr(Et)}}}(b);P.config.emulator={url:`${ye}//${Et}${null===nn?"":`:${nn}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:Et,port:nn,protocol:ye.replace(":",""),options:Object.freeze({disableWarnings:oe})}),oe||function to(){function N(){const b=document.createElement("p"),E=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",N):N())}()}function $s(N){const b=N.indexOf(":");return b<0?"":N.substr(0,b+1)}function Xr(N){if(!N)return null;const b=Number(N);return isNaN(b)?null:b}class ps{constructor(b,E){this.providerId=b,this.signInMethod=E}toJSON(){return Ve("not implemented")}_getIdTokenResponse(b){return Ve("not implemented")}_linkToIdToken(b,E){return Ve("not implemented")}_getReauthenticationResolver(b){return Ve("not implemented")}}function Ps(N,b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:resetPassword",Be(N,b))})).apply(this,arguments)}function co(N,b){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Io(N,b){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:update",Be(N,b))})).apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPassword",Be(N,b))})).apply(this,arguments)}function Ns(N,b){return ji.apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:sendOobCode",Be(N,b))})).apply(this,arguments)}function Rs(N,b){return mi.apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(N,b){return Ns(N,b)})).apply(this,arguments)}function ba(N,b){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(N,b){return Ns(N,b)})).apply(this,arguments)}function Fs(N,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(N,b){return Ns(N,b)})).apply(this,arguments)}function gs(N,b){return _o.apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(N,b){return Ns(N,b)})).apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithEmailLink",Be(N,b))})).apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithEmailLink",Be(N,b))})).apply(this,arguments)}class Yi extends ps{constructor(b,E,P,oe=null){super("password",P),this._email=b,this._password=E,this._tenantId=oe}static _fromEmailAndPassword(b,E){return new Yi(b,E,"password")}static _fromEmailAndCode(b,E,P=null){return new Yi(b,E,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(b){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return function As(N,b){return ks.apply(this,arguments)}(b,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pi(N,b){return na.apply(this,arguments)}(b,{email:E._email,oobCode:E._password});default:Ht(b,"internal-error")}})()}_linkToIdToken(b,E){var P=this;return(0,h.Z)(function*(){switch(P.signInMethod){case"password":return co(b,{idToken:E,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function Ls(N,b){return ra.apply(this,arguments)}(b,{idToken:E,email:P._email,oobCode:P._password});default:Ht(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function xo(N,b){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithIdp",Be(N,b))})).apply(this,arguments)}class Je extends ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const E=new Je(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(E.idToken=b.idToken),b.accessToken&&(E.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(E.nonce=b.nonce),b.pendingToken&&(E.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(E.accessToken=b.oauthToken,E.secret=b.oauthTokenSecret):Ht("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b,{providerId:P,signInMethod:oe}=E,ye=(0,Me._T)(E,["providerId","signInMethod"]);if(!P||!oe)return null;const Et=new Je(P,oe);return Et.idToken=ye.idToken||void 0,Et.accessToken=ye.accessToken||void 0,Et.secret=ye.secret,Et.nonce=ye.nonce,Et.pendingToken=ye.pendingToken||null,Et}_getIdTokenResponse(b){return xo(b,this.buildRequest())}_linkToIdToken(b,E){const P=this.buildRequest();return P.idToken=E,xo(b,P)}_getReauthenticationResolver(b){const E=this.buildRequest();return E.autoCreate=!1,xo(b,E)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),b.postBody=(0,U.xO)(E)}return b}}function vt(N,b){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:sendVerificationCode",Be(N,b))})).apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Be(N,b))})).apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(N,b){const E=yield jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Be(N,b));if(E.temporaryProof)throw Kn(N,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const oi={USER_NOT_FOUND:"user-not-found"};function ms(){return(ms=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithPhoneNumber",Be(N,Object.assign(Object.assign({},b),{operation:"REAUTH"})),oi)})).apply(this,arguments)}class Bi extends ps{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,E){return new Bi({verificationId:b,verificationCode:E})}static _fromTokenResponse(b,E){return new Bi({phoneNumber:b,temporaryProof:E})}_getIdTokenResponse(b){return function ln(N,b){return xn.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,E){return function sr(N,b){return Di.apply(this,arguments)}(b,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function ho(N,b){return ms.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:E,verificationId:P,verificationCode:oe}=this.params;return b&&E?{temporaryProof:b,phoneNumber:E}:{sessionInfo:P,code:oe}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:E,verificationCode:P,phoneNumber:oe,temporaryProof:ye}=b;return P||E||oe||ye?new Bi({verificationId:E,verificationCode:P,phoneNumber:oe,temporaryProof:ye}):null}}class qs{constructor(b){var E,P,oe,ye,Et,nn;const $n=(0,U.zd)((0,U.pd)(b)),Zn=null!==(E=$n.apiKey)&&void 0!==E?E:null,Er=null!==(P=$n.oobCode)&&void 0!==P?P:null,hs=function Ma(N){switch(N){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(oe=$n.mode)&&void 0!==oe?oe:null);nt(Zn&&Er&&hs,"argument-error"),this.apiKey=Zn,this.operation=hs,this.code=Er,this.continueUrl=null!==(ye=$n.continueUrl)&&void 0!==ye?ye:null,this.languageCode=null!==(Et=$n.languageCode)&&void 0!==Et?Et:null,this.tenantId=null!==(nn=$n.tenantId)&&void 0!==nn?nn:null}static parseLink(b){const E=function Po(N){const b=(0,U.zd)((0,U.pd)(N)).link,E=b?(0,U.zd)((0,U.pd)(b)).deep_link_id:null,P=(0,U.zd)((0,U.pd)(N)).deep_link_id;return(P?(0,U.zd)((0,U.pd)(P)).link:null)||P||E||b||N}(b);try{return new qs(E)}catch{return null}}}let Mr=(()=>{class N{constructor(){this.providerId=N.PROVIDER_ID}static credential(E,P){return Yi._fromEmailAndPassword(E,P)}static credentialWithLink(E,P){const oe=qs.parseLink(P);return nt(oe,"argument-error"),Yi._fromEmailAndCode(E,oe.code,oe.tenantId)}}return N.PROVIDER_ID="password",N.EMAIL_PASSWORD_SIGN_IN_METHOD="password",N.EMAIL_LINK_SIGN_IN_METHOD="emailLink",N})();class Jn{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class _s extends Jn{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class Wr extends _s{static credentialFromJSON(b){const E="string"==typeof b?JSON.parse(b):b;return nt("providerId"in E&&"signInMethod"in E,"argument-error"),Je._fromParams(E)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return nt(b.idToken||b.accessToken,"argument-error"),Je._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return Wr.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return Wr.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:E,oauthAccessToken:P,oauthTokenSecret:oe,pendingToken:ye,nonce:Et,providerId:nn}=b;if(!P&&!oe&&!E&&!ye||!nn)return null;try{return new Wr(nn)._credential({idToken:E,accessToken:P,nonce:Et,pendingToken:ye})}catch{return null}}}let Ys=(()=>{class N extends _s{constructor(){super("facebook.com")}static credential(E){return Je._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return N.credentialFromTaggedObject(E)}static credentialFromError(E){return N.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return N.credential(E.oauthAccessToken)}catch{return null}}}return N.FACEBOOK_SIGN_IN_METHOD="facebook.com",N.PROVIDER_ID="facebook.com",N})(),wa=(()=>{class N extends _s{constructor(){super("google.com"),this.addScope("profile")}static credential(E,P){return Je._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:P})}static credentialFromResult(E){return N.credentialFromTaggedObject(E)}static credentialFromError(E){return N.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:P,oauthAccessToken:oe}=E;if(!P&&!oe)return null;try{return N.credential(P,oe)}catch{return null}}}return N.GOOGLE_SIGN_IN_METHOD="google.com",N.PROVIDER_ID="google.com",N})(),Gs=(()=>{class N extends _s{constructor(){super("github.com")}static credential(E){return Je._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return N.credentialFromTaggedObject(E)}static credentialFromError(E){return N.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return N.credential(E.oauthAccessToken)}catch{return null}}}return N.GITHUB_SIGN_IN_METHOD="github.com",N.PROVIDER_ID="github.com",N})();class kr extends ps{constructor(b,E){super(b,b),this.pendingToken=E}_getIdTokenResponse(b){return xo(b,this.buildRequest())}_linkToIdToken(b,E){const P=this.buildRequest();return P.idToken=E,xo(b,P)}_getReauthenticationResolver(b){const E=this.buildRequest();return E.autoCreate=!1,xo(b,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const E="string"==typeof b?JSON.parse(b):b,{providerId:P,signInMethod:oe,pendingToken:ye}=E;return P&&oe&&ye&&P===oe?new kr(P,ye):null}static _create(b,E){return new kr(b,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ki extends Jn{constructor(b){nt(b.startsWith("saml."),"argument-error"),super(b)}static credentialFromResult(b){return ki.samlCredentialFromTaggedObject(b)}static credentialFromError(b){return ki.samlCredentialFromTaggedObject(b.customData||{})}static credentialFromJSON(b){const E=kr.fromJSON(b);return nt(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{pendingToken:E,providerId:P}=b;if(!E||!P)return null;try{return kr._create(P,E)}catch{return null}}}let Ko=(()=>{class N extends _s{constructor(){super("twitter.com")}static credential(E,P){return Je._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:P})}static credentialFromResult(E){return N.credentialFromTaggedObject(E)}static credentialFromError(E){return N.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:P,oauthTokenSecret:oe}=E;if(!P||!oe)return null;try{return N.credential(P,oe)}catch{return null}}}return N.TWITTER_SIGN_IN_METHOD="twitter.com",N.PROVIDER_ID="twitter.com",N})();function Ms(N,b){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signUp",Be(N,b))})).apply(this,arguments)}class Bs{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,E,P,oe=!1){return(0,h.Z)(function*(){const ye=yield Bn._fromIdTokenResponse(b,P,oe),Et=Zs(P);return new Bs({user:ye,providerId:Et,_tokenResponse:P,operationType:E})})()}static _forOperation(b,E,P){return(0,h.Z)(function*(){yield b._updateTokensIfNecessary(P,!0);const oe=Zs(P);return new Bs({user:b,providerId:oe,_tokenResponse:P,operationType:E})})()}}function Zs(N){return N.providerId?N.providerId:"phoneNumber"in N?"phone":null}function Qs(N){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(N){var b;const E=Nn(N);if(yield E._initializationPromise,null!==(b=E.currentUser)&&void 0!==b&&b.isAnonymous)return new Bs({user:E.currentUser,providerId:null,operationType:"signIn"});const P=yield Ms(E,{returnSecureToken:!0}),oe=yield Bs._fromIdTokenResponse(E,"signIn",P,!0);return yield E._updateCurrentUser(oe.user),oe})).apply(this,arguments)}class zr extends U.ZR{constructor(b,E,P,oe){var ye;super(E.code,E.message),this.operationType=P,this.user=oe,Object.setPrototypeOf(this,zr.prototype),this.customData={appName:b.name,tenantId:null!==(ye=b.tenantId)&&void 0!==ye?ye:void 0,_serverResponse:E.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(b,E,P,oe){return new zr(b,E,P,oe)}}function Ea(N,b,E,P){return("reauthenticate"===b?E._getReauthenticationResolver(N):E._getIdTokenResponse(N)).catch(ye=>{throw"auth/multi-factor-auth-required"===ye.code?zr._fromErrorAndOperation(N,ye,b,P):ye})}function _i(N){return new Set(N.map(({providerId:b})=>b).filter(b=>!!b))}function no(N,b){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(N,b){const E=(0,U.m9)(N);yield So(!0,E,b);const{providerUserInfo:P}=yield hn(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[b]}),oe=_i(P||[]);return E.providerData=E.providerData.filter(ye=>oe.has(ye.providerId)),oe.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function ko(N,b){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(N,b,E=!1){const P=yield Pn(N,b._linkToIdToken(N.auth,yield N.getIdToken()),E);return Bs._forOperation(N,"link",P)})).apply(this,arguments)}function So(N,b,E){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,h.Z)(function*(N,b,E){yield Ri(b);const oe=!1===N?"provider-already-linked":"no-such-provider";nt(_i(b.providerData).has(E)===N,b.auth,oe)})).apply(this,arguments)}function Fo(N,b){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(N,b,E=!1){const{auth:P}=N,oe="reauthenticate";try{const ye=yield Pn(N,Ea(P,oe,b,N),E);nt(ye.idToken,P,"internal-error");const Et=Ln(ye.idToken);nt(Et,P,"internal-error");const{sub:nn}=Et;return nt(N.uid===nn,P,"user-mismatch"),Bs._forOperation(N,oe,ye)}catch(ye){throw"auth/user-not-found"===ye?.code&&Ht(P,"user-mismatch"),ye}})).apply(this,arguments)}function Es(N,b){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(N,b,E=!1){const P="signIn",oe=yield Ea(N,P,b),ye=yield Bs._fromIdTokenResponse(N,P,oe);return E||(yield N._updateCurrentUser(ye.user)),ye})).apply(this,arguments)}function Ui(N,b){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(N,b){return Es(Nn(N),b)})).apply(this,arguments)}function dr(N,b){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(N,b){const E=(0,U.m9)(N);return yield So(!1,E,b.providerId),ko(E,b)})).apply(this,arguments)}function sa(N,b){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(N,b){return Fo((0,U.m9)(N),b)})).apply(this,arguments)}function ml(N,b){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(N,b){return jn(N,"POST","/v1/accounts:signInWithCustomToken",Be(N,b))})).apply(this,arguments)}function ro(N,b){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(N,b){const E=Nn(N),P=yield ml(E,{token:b,returnSecureToken:!0}),oe=yield Bs._fromIdTokenResponse(E,"signIn",P);return yield E._updateCurrentUser(oe.user),oe})).apply(this,arguments)}class Da{constructor(b,E){this.factorId=b,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(b,E){return"phoneInfo"in E?qt._fromServerResponse(b,E):Ht(b,"internal-error")}}class qt extends Da{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,E){return new qt(E)}}function pr(N,b,E){var P;nt((null===(P=E.url)||void 0===P?void 0:P.length)>0,N,"invalid-continue-uri"),nt(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),b.continueUrl=E.url,b.dynamicLinkDomain=E.dynamicLinkDomain,b.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(nt(E.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),b.iOSBundleId=E.iOS.bundleId),E.android&&(nt(E.android.packageName.length>0,N,"missing-android-pkg-name"),b.androidInstallApp=E.android.installApp,b.androidMinimumVersionCode=E.android.minimumVersion,b.androidPackageName=E.android.packageName)}function oa(N,b,E){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N),oe={requestType:"PASSWORD_RESET",email:b};E&&pr(P,oe,E),yield ba(P,oe)})).apply(this,arguments)}function cs(N,b,E){return Z.apply(this,arguments)}function Z(){return(Z=(0,h.Z)(function*(N,b,E){yield Ps((0,U.m9)(N),{oobCode:b,newPassword:E})})).apply(this,arguments)}function W(N,b){return j.apply(this,arguments)}function j(){return(j=(0,h.Z)(function*(N,b){yield Io((0,U.m9)(N),{oobCode:b})})).apply(this,arguments)}function ue(N,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(N,b){const E=(0,U.m9)(N),P=yield Ps(E,{oobCode:b}),oe=P.requestType;switch(nt(oe,E,"internal-error"),oe){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":nt(P.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":nt(P.mfaInfo,E,"internal-error");default:nt(P.email,E,"internal-error")}let ye=null;return P.mfaInfo&&(ye=Da._fromServerResponse(Nn(E),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:ye},operation:oe}})).apply(this,arguments)}function Y(N,b){return K.apply(this,arguments)}function K(){return(K=(0,h.Z)(function*(N,b){const{data:E}=yield ue((0,U.m9)(N),b);return E.email})).apply(this,arguments)}function fe(N,b,E){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,h.Z)(function*(N,b,E){const P=Nn(N),oe=yield Ms(P,{returnSecureToken:!0,email:b,password:E}),ye=yield Bs._fromIdTokenResponse(P,"signIn",oe);return yield P._updateCurrentUser(ye.user),ye})).apply(this,arguments)}function He(N,b,E){return Ui((0,U.m9)(N),Mr.credential(b,E))}function Ct(N,b,E){return _t.apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N),oe={requestType:"EMAIL_SIGNIN",email:b};nt(E.handleCodeInApp,P,"argument-error"),E&&pr(P,oe,E),yield Fs(P,oe)})).apply(this,arguments)}function Vn(N,b){return"EMAIL_SIGNIN"===qs.parseLink(b)?.operation}function Dn(N,b,E){return cr.apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N),oe=Mr.credentialWithLink(b,E||Ut());return nt(oe._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),Ui(P,oe)})).apply(this,arguments)}function qn(N,b){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:createAuthUri",Be(N,b))})).apply(this,arguments)}function Gi(N,b){return yi.apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(N,b){const P={identifier:b,continueUri:Kt()?Ut():"http://localhost"},{signinMethods:oe}=yield qn((0,U.m9)(N),P);return oe||[]})).apply(this,arguments)}function Ai(N,b){return is.apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(N,b){const E=(0,U.m9)(N),oe={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};b&&pr(E.auth,oe,b);const{email:ye}=yield Rs(E.auth,oe);ye!==N.email&&(yield N.reload())})).apply(this,arguments)}function qr(N,b,E){return vs.apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N),ye={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield N.getIdToken(),newEmail:b};E&&pr(P.auth,ye,E);const{email:Et}=yield gs(P.auth,ye);Et!==N.email&&(yield N.reload())})).apply(this,arguments)}function Lo(N,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(N,b){return ot(N,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function zi(N,b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(N,{displayName:b,photoURL:E}){if(void 0===b&&void 0===E)return;const P=(0,U.m9)(N),ye={idToken:yield P.getIdToken(),displayName:b,photoUrl:E,returnSecureToken:!0},Et=yield Pn(P,Lo(P.auth,ye));P.displayName=Et.displayName||null,P.photoURL=Et.photoUrl||null;const nn=P.providerData.find(({providerId:$n})=>"password"===$n);nn&&(nn.displayName=P.displayName,nn.photoURL=P.photoURL),yield P._updateTokensIfNecessary(Et)})).apply(this,arguments)}function po(N,b){return ne((0,U.m9)(N),b,null)}function F(N,b){return ne((0,U.m9)(N),null,b)}function ne(N,b,E){return $.apply(this,arguments)}function $(){return($=(0,h.Z)(function*(N,b,E){const{auth:P}=N,ye={idToken:yield N.getIdToken(),returnSecureToken:!0};b&&(ye.email=b),E&&(ye.password=E);const Et=yield Pn(N,co(P,ye));yield N._updateTokensIfNecessary(Et,!0)})).apply(this,arguments)}class Le{constructor(b,E,P={}){this.isNewUser=b,this.providerId=E,this.profile=P}}class Tt extends Le{constructor(b,E,P,oe){super(b,E,P),this.username=oe}}class Vt extends Le{constructor(b,E){super(b,"facebook.com",E)}}class Fn extends Tt{constructor(b,E){super(b,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class ai extends Le{constructor(b,E){super(b,"google.com",E)}}class hi extends Tt{constructor(b,E,P){super(b,"twitter.com",E,P)}}function li(N){const{user:b,_tokenResponse:E}=N;return b.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function ce(N){var b,E;if(!N)return null;const{providerId:P}=N,oe=N.rawUserInfo?JSON.parse(N.rawUserInfo):{},ye=N.isNewUser||"identitytoolkit#SignupNewUserResponse"===N.kind;if(!P&&N?.idToken){const Et=null===(E=null===(b=Ln(N.idToken))||void 0===b?void 0:b.firebase)||void 0===E?void 0:E.sign_in_provider;if(Et)return new Le(ye,"anonymous"!==Et&&"custom"!==Et?Et:null)}if(!P)return null;switch(P){case"facebook.com":return new Vt(ye,oe);case"github.com":return new Fn(ye,oe);case"google.com":return new ai(ye,oe);case"twitter.com":return new hi(ye,oe,N.screenName||null);case"custom":case"anonymous":return new Le(ye,null);default:return new Le(ye,P,oe)}}(E)}class os{constructor(b,E,P){this.type=b,this.credential=E,this.auth=P}static _fromIdtoken(b,E){return new os("enroll",b,E)}static _fromMfaPendingCredential(b){return new os("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var E,P;if(b?.multiFactorSession){if(null!==(E=b.multiFactorSession)&&void 0!==E&&E.pendingCredential)return os._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null!==(P=b.multiFactorSession)&&void 0!==P&&P.idToken)return os._fromIdtoken(b.multiFactorSession.idToken)}return null}}class Nl{constructor(b,E,P){this.session=b,this.hints=E,this.signInResolver=P}static _fromError(b,E){const P=Nn(b),oe=E.customData._serverResponse,ye=(oe.mfaInfo||[]).map(nn=>Da._fromServerResponse(P,nn));nt(oe.mfaPendingCredential,P,"internal-error");const Et=os._fromMfaPendingCredential(oe.mfaPendingCredential);return new Nl(Et,ye,function(){var nn=(0,h.Z)(function*($n){const Zn=yield $n._process(P,Et);delete oe.mfaInfo,delete oe.mfaPendingCredential;const Er=Object.assign(Object.assign({},oe),{idToken:Zn.idToken,refreshToken:Zn.refreshToken});switch(E.operationType){case"signIn":const hs=yield Bs._fromIdTokenResponse(P,E.operationType,Er);return yield P._updateCurrentUser(hs.user),hs;case"reauthenticate":return nt(E.user,P,"internal-error"),Bs._forOperation(E.user,E.operationType,Er);default:Ht(P,"internal-error")}});return function($n){return nn.apply(this,arguments)}}())}resolveSignIn(b){var E=this;return(0,h.Z)(function*(){return E.signInResolver(b)})()}}function Yo(N,b){var E;const P=(0,U.m9)(N),oe=b;return nt(b.customData.operationType,P,"argument-error"),nt(null===(E=oe.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,P,"argument-error"),Nl._fromError(P,oe)}function Zi(N,b){return ot(N,"POST","/v2/accounts/mfaEnrollment:start",Be(N,b))}class _l{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(P=>Da._fromServerResponse(b.auth,P)))})}static _fromUser(b){return new _l(b)}getSession(){var b=this;return(0,h.Z)(function*(){return os._fromIdtoken(yield b.user.getIdToken(),b.user.auth)})()}enroll(b,E){var P=this;return(0,h.Z)(function*(){const oe=b,ye=yield P.getSession(),Et=yield Pn(P.user,oe._process(P.user.auth,ye,E));return yield P.user._updateTokensIfNecessary(Et),P.user.reload()})()}unenroll(b){var E=this;return(0,h.Z)(function*(){const P="string"==typeof b?b:b.uid,oe=yield E.user.getIdToken(),ye=yield Pn(E.user,function Pu(N,b){return ot(N,"POST","/v2/accounts/mfaEnrollment:withdraw",Be(N,b))}(E.user.auth,{idToken:oe,mfaEnrollmentId:P}));E.enrolledFactors=E.enrolledFactors.filter(({uid:Et})=>Et!==P),yield E.user._updateTokensIfNecessary(ye);try{yield E.user.reload()}catch(Et){if("auth/user-token-expired"!==Et?.code)throw Et}})()}}const ou=new WeakMap;function yl(N){const b=(0,U.m9)(N);return ou.has(b)||ou.set(b,_l._fromUser(b)),ou.get(b)}const ca="__sak";class Oa{constructor(b,E){this.storageRetriever=b,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(b,E){return this.storage.setItem(b,JSON.stringify(E)),Promise.resolve()}_get(b){const E=this.storage.getItem(b);return Promise.resolve(E?JSON.parse(E):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ds=(()=>{class N extends Oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,P)=>this.onStorageEvent(E,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pu(){const N=(0,U.z$)();return be(N)||ve(N)}()&&function ur(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Qt(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const P of Object.keys(this.listeners)){const oe=this.storage.getItem(P),ye=this.localCache[P];oe!==ye&&E(P,ye,oe)}}onStorageEvent(E,P=!1){if(!E.key)return void this.forAllChangedKeys((nn,$n,Zn)=>{this.notifyListeners(nn,Zn)});const oe=E.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nn=this.storage.getItem(oe);if(E.newValue!==nn)null!==E.newValue?this.storage.setItem(oe,E.newValue):this.storage.removeItem(oe);else if(this.localCache[oe]===E.newValue&&!P)return}const ye=()=>{const nn=this.storage.getItem(oe);!P&&this.localCache[oe]===nn||this.notifyListeners(oe,nn)},Et=this.storage.getItem(oe);!function ft(){return(0,U.w1)()&&10===document.documentMode}()||Et===E.newValue||E.newValue===E.oldValue?ye():setTimeout(ye,10)}notifyListeners(E,P){this.localCache[E]=P;const oe=this.listeners[E];if(oe)for(const ye of Array.from(oe))ye(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,P,oe)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:P,newValue:oe}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(P)}_removeListener(E,P){this.listeners[E]&&(this.listeners[E].delete(P),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,P){var oe=()=>super._set,ye=this;return(0,h.Z)(function*(){yield oe().call(ye,E,P),ye.localCache[E]=JSON.stringify(P)})()}_get(E){var P=()=>super._get,oe=this;return(0,h.Z)(function*(){const ye=yield P().call(oe,E);return oe.localCache[E]=JSON.stringify(ye),ye})()}_remove(E){var P=()=>super._remove,oe=this;return(0,h.Z)(function*(){yield P().call(oe,E),delete oe.localCache[E]})()}}return N.type="LOCAL",N})(),Ca=(()=>{class N extends Oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,P){}_removeListener(E,P){}}return N.type="SESSION",N})();let rn=(()=>{class N{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const P=this.receivers.find(ye=>ye.isListeningto(E));if(P)return P;const oe=new N(E);return this.receivers.push(oe),oe}isListeningto(E){return this.eventTarget===E}handleEvent(E){var P=this;return(0,h.Z)(function*(){const oe=E,{eventId:ye,eventType:Et,data:nn}=oe.data,$n=P.handlersMap[Et];if(!$n?.size)return;oe.ports[0].postMessage({status:"ack",eventId:ye,eventType:Et});const Zn=Array.from($n).map(function(){var hs=(0,h.Z)(function*(Eo){return Eo(oe.origin,nn)});return function(Eo){return hs.apply(this,arguments)}}()),Er=yield function mu(N){return Promise.all(N.map(function(){var b=(0,h.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(P){return{fulfilled:!1,reason:P}}});return function(E){return b.apply(this,arguments)}}()))}(Zn);oe.ports[0].postMessage({status:"done",eventId:ye,eventType:Et,response:Er})})()}_subscribe(E,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(P)}_unsubscribe(E,P){this.handlersMap[E]&&P&&this.handlersMap[E].delete(P),(!P||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return N.receivers=[],N})();function Ki(N="",b=10){let E="";for(let P=0;P<b;P++)E+=Math.floor(10*Math.random());return N+E}class ol{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,E,P=50){var oe=this;return(0,h.Z)(function*(){const ye=typeof MessageChannel<"u"?new MessageChannel:null;if(!ye)throw new Error("connection_unavailable");let Et,nn;return new Promise(($n,Zn)=>{const Er=Ki("",20);ye.port1.start();const hs=setTimeout(()=>{Zn(new Error("unsupported_event"))},P);nn={messageChannel:ye,onMessage(Eo){const dl=Eo;if(dl.data.eventId===Er)switch(dl.data.status){case"ack":clearTimeout(hs),Et=setTimeout(()=>{Zn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Et),$n(dl.data.response);break;default:clearTimeout(hs),clearTimeout(Et),Zn(new Error("invalid_response"))}}},oe.handlers.add(nn),ye.port1.addEventListener("message",nn.onMessage),oe.target.postMessage({eventType:b,eventId:Er,data:E},[ye.port2])}).finally(()=>{nn&&oe.removeMessageHandler(nn)})})()}}function as(){return window}function wn(){return typeof as().WorkerGlobalScope<"u"&&"function"==typeof as().importScripts}function yn(){return(yn=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ui="firebaseLocalStorageDb",bo="firebaseLocalStorage",bl="fbase_key";class Za{constructor(b){this.request=b}toPromise(){return new Promise((b,E)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function wl(N,b){return N.transaction([bo],b?"readwrite":"readonly").objectStore(bo)}function Wl(){const N=indexedDB.open(ui,1);return new Promise((b,E)=>{N.addEventListener("error",()=>{E(N.error)}),N.addEventListener("upgradeneeded",()=>{const P=N.result;try{P.createObjectStore(bo,{keyPath:bl})}catch(oe){E(oe)}}),N.addEventListener("success",(0,h.Z)(function*(){const P=N.result;P.objectStoreNames.contains(bo)?b(P):(P.close(),yield function zs(){const N=indexedDB.deleteDatabase(ui);return new Za(N).toPromise()}(),b(yield Wl()))}))})}function ka(N,b,E){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(N,b,E){const P=wl(N,!0).put({[bl]:b,value:E});return new Za(P).toPromise()})).apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(N,b){const E=wl(N,!1).get(b),P=yield new Za(E).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function _r(N,b){const E=wl(N,!0).delete(b);return new Za(E).toPromise()}const Mn=(()=>{class N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,h.Z)(function*(){return E.db||(E.db=yield Wl()),E.db})()}_withRetries(E){var P=this;return(0,h.Z)(function*(){let oe=0;for(;;)try{const ye=yield P._openDb();return yield E(ye)}catch(ye){if(oe++>3)throw ye;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,h.Z)(function*(){return wn()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,h.Z)(function*(){E.receiver=rn._getInstance(function Zt(){return wn()?self:null}()),E.receiver._subscribe("keyChanged",function(){var P=(0,h.Z)(function*(oe,ye){return{keyProcessed:(yield E._poll()).includes(ye.key)}});return function(oe,ye){return P.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var P=(0,h.Z)(function*(oe,ye){return["keyChanged"]});return function(oe,ye){return P.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,h.Z)(function*(){var P,oe;if(E.activeServiceWorker=yield function Pa(){return yn.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new ol(E.activeServiceWorker);const ye=yield E.sender._send("ping",{},800);!ye||(null===(P=ye[0])||void 0===P?void 0:P.fulfilled)&&(null===(oe=ye[0])||void 0===oe?void 0:oe.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var P=this;return(0,h.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function Pt(){var N;return(null===(N=navigator?.serviceWorker)||void 0===N?void 0:N.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:E},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const E=yield Wl();return yield ka(E,ca,"1"),yield _r(E,ca),!0}catch{}return!1})()}_withPendingWrite(E){var P=this;return(0,h.Z)(function*(){P.pendingWrites++;try{yield E()}finally{P.pendingWrites--}})()}_set(E,P){var oe=this;return(0,h.Z)(function*(){return oe._withPendingWrite((0,h.Z)(function*(){return yield oe._withRetries(ye=>ka(ye,E,P)),oe.localCache[E]=P,oe.notifyServiceWorker(E)}))})()}_get(E){var P=this;return(0,h.Z)(function*(){const oe=yield P._withRetries(ye=>function ku(N,b){return El.apply(this,arguments)}(ye,E));return P.localCache[E]=oe,oe})()}_remove(E){var P=this;return(0,h.Z)(function*(){return P._withPendingWrite((0,h.Z)(function*(){return yield P._withRetries(oe=>_r(oe,E)),delete P.localCache[E],P.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,h.Z)(function*(){const P=yield E._withRetries(Et=>{const nn=wl(Et,!1).getAll();return new Za(nn).toPromise()});if(!P)return[];if(0!==E.pendingWrites)return[];const oe=[],ye=new Set;for(const{fbase_key:Et,value:nn}of P)ye.add(Et),JSON.stringify(E.localCache[Et])!==JSON.stringify(nn)&&(E.notifyListeners(Et,nn),oe.push(Et));for(const Et of Object.keys(E.localCache))E.localCache[Et]&&!ye.has(Et)&&(E.notifyListeners(Et,null),oe.push(Et));return oe})()}notifyListeners(E,P){this.localCache[E]=P;const oe=this.listeners[E];if(oe)for(const ye of Array.from(oe))ye(P)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(P)}_removeListener(E,P){this.listeners[E]&&(this.listeners[E].delete(P),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return N.type="LOCAL",N})();function Rl(N,b){return ot(N,"POST","/v2/accounts/mfaSignIn:start",Be(N,b))}function Qr(){return(Qr=(0,h.Z)(function*(N){return(yield ot(N,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(N){return new Promise((b,E)=>{const P=document.createElement("script");P.setAttribute("src",N),P.onload=b,P.onerror=oe=>{const ye=gt("internal-error");ye.customData=oe,E(ye)},P.type="text/javascript",P.charset="UTF-8",function vn(){var N,b;return null!==(b=null===(N=document.getElementsByTagName("head"))||void 0===N?void 0:N[0])&&void 0!==b?b:document}().appendChild(P)})}function Zo(N){return`__${N}${Math.floor(1e6*Math.random())}`}const wo=1e12;class Ol{constructor(b){this.auth=b,this.counter=wo,this._widgets=new Map}render(b,E){const P=this.counter;return this._widgets.set(P,new Mi(b,this.auth.name,E||{})),this.counter++,P}reset(b){var E;const P=b||wo;null===(E=this._widgets.get(P))||void 0===E||E.delete(),this._widgets.delete(P)}getResponse(b){var E;return(null===(E=this._widgets.get(b||wo))||void 0===E?void 0:E.getResponse())||""}execute(b){var E=this;return(0,h.Z)(function*(){var P;return null===(P=E._widgets.get(b||wo))||void 0===P||P.execute(),""})()}}class Mi{constructor(b,E,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const oe="string"==typeof b?document.getElementById(b):b;nt(oe,"argument-error",{appName:E}),this.container=oe,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lu(N){const b=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<N;P++)b.push(E.charAt(Math.floor(Math.random()*E.length)));return b.join("")}(50);const{callback:b,"expired-callback":E}=this.params;if(b)try{b(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pc=Zo("rcb"),ha=new pe(3e4,6e4);class qc{constructor(){var b;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(b=as().grecaptcha)||void 0===b||!b.render)}load(b,E=""){return nt(function au(N){return N.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(N)}(E),b,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(as().grecaptcha):new Promise((P,oe)=>{const ye=as().setTimeout(()=>{oe(gt(b,"network-request-failed"))},ha.get());as()[pc]=()=>{as().clearTimeout(ye),delete as()[pc];const nn=as().grecaptcha;if(!nn)return void oe(gt(b,"internal-error"));const $n=nn.render;nn.render=(Zn,Er)=>{const hs=$n(Zn,Er);return this.counter++,hs},this.hostLanguage=E,P(nn)},so(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:pc,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ye),oe(gt(b,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){var E;return!(null===(E=as().grecaptcha)||void 0===E||!E.render)&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xl{load(b){return(0,h.Z)(function*(){return new Ol(b)})()}clearedOneInstance(){}}const Vo="recaptcha",Ot={theme:"light",type:"image"};class Pl{constructor(b,E=Object.assign({},Ot),P){this.parameters=E,this.type=Vo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(P),this.isInvisible="invisible"===this.parameters.size,nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const oe="string"==typeof b?document.getElementById(b):b;nt(oe,this.auth,"argument-error"),this.container=oe,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xl:new qc,this.validateStartingState()}verify(){var b=this;return(0,h.Z)(function*(){b.assertNotDestroyed();const E=yield b.render(),P=b.getAssertedRecaptcha();return P.getResponse(E)||new Promise(ye=>{const Et=nn=>{!nn||(b.tokenChangeListeners.delete(Et),ye(nn))};b.tokenChangeListeners.add(Et),b.isInvisible&&P.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){nt(!this.parameters.sitekey,this.auth,"argument-error"),nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return E=>{if(this.tokenChangeListeners.forEach(P=>P(E)),"function"==typeof b)b(E);else if("string"==typeof b){const P=as()[b];"function"==typeof P&&P(E)}}}assertNotDestroyed(){nt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,h.Z)(function*(){if(yield b.init(),!b.widgetId){let E=b.container;if(!b.isInvisible){const P=document.createElement("div");E.appendChild(P),E=P}b.widgetId=b.getAssertedRecaptcha().render(E,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,h.Z)(function*(){nt(Kt()&&!wn(),b.auth,"internal-error"),yield function Ti(){let N=null;return new Promise(b=>{"complete"!==document.readyState?(N=()=>b(),window.addEventListener("load",N)):b()}).catch(b=>{throw N&&window.removeEventListener("load",N),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const E=yield function Ml(N){return Qr.apply(this,arguments)}(b.auth);nt(E,b.auth,"internal-error"),b.parameters.sitekey=E})()}getAssertedRecaptcha(){return nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kl{constructor(b,E){this.verificationId=b,this.onConfirmation=E}confirm(b){const E=Bi._fromVerification(this.verificationId,b);return this.onConfirmation(E)}}function al(N,b,E){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,h.Z)(function*(N,b,E){const P=Nn(N),oe=yield lu(P,b,(0,U.m9)(E));return new kl(oe,ye=>Ui(P,ye))})).apply(this,arguments)}function Bu(N,b,E){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N);yield So(!1,P,"phone");const oe=yield lu(P.auth,b,(0,U.m9)(E));return new kl(oe,ye=>dr(P,ye))})).apply(this,arguments)}function La(N,b,E){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N),oe=yield lu(P.auth,b,(0,U.m9)(E));return new kl(oe,ye=>sa(P,ye))})).apply(this,arguments)}function lu(N,b,E){return A.apply(this,arguments)}function A(){return(A=(0,h.Z)(function*(N,b,E){var P;const oe=yield E.verify();try{let ye;if(nt("string"==typeof oe,N,"argument-error"),nt(E.type===Vo,N,"argument-error"),ye="string"==typeof b?{phoneNumber:b}:b,"session"in ye){const Et=ye.session;if("phoneNumber"in ye)return nt("enroll"===Et.type,N,"internal-error"),(yield Zi(N,{idToken:Et.credential,phoneEnrollmentInfo:{phoneNumber:ye.phoneNumber,recaptchaToken:oe}})).phoneSessionInfo.sessionInfo;{nt("signin"===Et.type,N,"internal-error");const nn=(null===(P=ye.multiFactorHint)||void 0===P?void 0:P.uid)||ye.multiFactorUid;return nt(nn,N,"missing-multi-factor-info"),(yield Rl(N,{mfaPendingCredential:Et.credential,mfaEnrollmentId:nn,phoneSignInInfo:{recaptchaToken:oe}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Et}=yield vt(N,{phoneNumber:ye.phoneNumber,recaptchaToken:oe});return Et}}finally{E._reset()}})).apply(this,arguments)}function R(N,b){return S.apply(this,arguments)}function S(){return(S=(0,h.Z)(function*(N,b){yield ko((0,U.m9)(N),b)})).apply(this,arguments)}let B=(()=>{class N{constructor(E){this.providerId=N.PROVIDER_ID,this.auth=Nn(E)}verifyPhoneNumber(E,P){return lu(this.auth,E,(0,U.m9)(P))}static credential(E,P){return Bi._fromVerification(E,P)}static credentialFromResult(E){return N.credentialFromTaggedObject(E)}static credentialFromError(E){return N.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:P,temporaryProof:oe}=E;return P&&oe?Bi._fromTokenResponse(P,oe):null}}return N.PROVIDER_ID="phone",N.PHONE_SIGN_IN_METHOD="phone",N})();function z(N,b){return b?$e(b):(nt(N._popupRedirectResolver,N,"argument-error"),N._popupRedirectResolver)}class le extends ps{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return xo(b,this._buildIdpRequest())}_linkToIdToken(b,E){return xo(b,this._buildIdpRequest(E))}_getReauthenticationResolver(b){return xo(b,this._buildIdpRequest())}_buildIdpRequest(b){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(E.idToken=b),E}}function Ne(N){return Es(N.auth,new le(N),N.bypassAuthState)}function xe(N){const{auth:b,user:E}=N;return nt(E,b,"internal-error"),Fo(E,new le(N),N.bypassAuthState)}function Ft(N){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(N){const{auth:b,user:E}=N;return nt(E,b,"internal-error"),ko(E,new le(N),N.bypassAuthState)})).apply(this,arguments)}class Or{constructor(b,E,P,oe,ye=!1){this.auth=b,this.resolver=P,this.user=oe,this.bypassAuthState=ye,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var b=this;return new Promise(function(){var E=(0,h.Z)(function*(P,oe){b.pendingPromise={resolve:P,reject:oe};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(ye){b.reject(ye)}});return function(P,oe){return E.apply(this,arguments)}}())}onAuthEvent(b){var E=this;return(0,h.Z)(function*(){const{urlResponse:P,sessionId:oe,postBody:ye,tenantId:Et,error:nn,type:$n}=b;if(nn)return void E.reject(nn);const Zn={auth:E.auth,requestUri:P,sessionId:oe,tenantId:Et||void 0,postBody:ye||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask($n)(Zn))}catch(Er){E.reject(Er)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return Ne;case"linkViaPopup":case"linkViaRedirect":return Ft;case"reauthViaPopup":case"reauthViaRedirect":return xe;default:Ht(this.auth,"internal-error")}}resolve(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _n=new pe(2e3,1e4);function Hi(N,b,E){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(N,b,E){const P=Nn(N);ze(N,b,Jn);const oe=z(P,E);return new Aa(P,"signInViaPopup",b,oe).executeNotNull()})).apply(this,arguments)}function Li(N,b,E){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N);ze(P.auth,b,Jn);const oe=z(P.auth,E);return new Aa(P.auth,"reauthViaPopup",b,oe,P).executeNotNull()})).apply(this,arguments)}function fa(N,b,E){return _u.apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N);ze(P.auth,b,Jn);const oe=z(P.auth,E);return new Aa(P.auth,"linkViaPopup",b,oe,P).executeNotNull()})).apply(this,arguments)}let Aa=(()=>{class N extends Or{constructor(E,P,oe,ye,Et){super(E,P,ye,Et),this.provider=oe,this.authWindow=null,this.pollId=null,N.currentPopupAction&&N.currentPopupAction.cancel(),N.currentPopupAction=this}executeNotNull(){var E=this;return(0,h.Z)(function*(){const P=yield E.execute();return nt(P,E.auth,"internal-error"),P})()}onExecution(){var E=this;return(0,h.Z)(function*(){bt(1===E.filter.length,"Popup operations only handle one event");const P=Ki();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],P),E.authWindow.associatedEvent=P,E.resolver._originValidation(E.auth).catch(oe=>{E.reject(oe)}),E.resolver._isIframeWebStorageSupported(E.auth,oe=>{oe||E.reject(gt(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,N.currentPopupAction=null}pollUserCancellation(){const E=()=>{var P,oe;this.pollId=null!==(oe=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==oe&&oe.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,_n.get())};E()}}return N.currentPopupAction=null,N})();const Ao=new Map;class Xa extends Or{constructor(b,E,P=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,P),this.eventId=null}execute(){var b=()=>super.execute,E=this;return(0,h.Z)(function*(){let P=Ao.get(E.auth._key());if(!P){try{const ye=(yield function Va(N,b){return Qo.apply(this,arguments)}(E.resolver,E.auth))?yield b().call(E):null;P=()=>Promise.resolve(ye)}catch(oe){P=()=>Promise.reject(oe)}Ao.set(E.auth._key(),P)}return E.bypassAuthState||Ao.set(E.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(b){var E=()=>super.onAuthEvent,P=this;return(0,h.Z)(function*(){if("signInViaRedirect"===b.type)return E().call(P,b);if("unknown"!==b.type){if(b.eventId){const oe=yield P.auth._redirectUserForId(b.eventId);if(oe)return P.user=oe,E().call(P,b);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Qo(){return(Qo=(0,h.Z)(function*(N,b){const E=Tl(b),P=Dl(N);if(!(yield P._isAvailable()))return!1;const oe="true"===(yield P._get(E));return yield P._remove(E),oe})).apply(this,arguments)}function No(N,b){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(N,b){return Dl(N)._set(Tl(b),"true")})).apply(this,arguments)}function ll(){Ao.clear()}function mc(N,b){Ao.set(N._key(),b)}function Dl(N){return $e(N._redirectPersistence)}function Tl(N){return Ae("pendingRedirect",N.config.apiKey,N.name)}function yu(N,b,E){return function oo(N,b,E){return Cl.apply(this,arguments)}(N,b,E)}function Cl(){return(Cl=(0,h.Z)(function*(N,b,E){const P=Nn(N);ze(N,b,Jn);const oe=z(P,E);return yield No(oe,P),oe._openRedirect(P,b,"signInViaRedirect")})).apply(this,arguments)}function H(N,b,E){return function q(N,b,E){return se.apply(this,arguments)}(N,b,E)}function se(){return(se=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N);ze(P.auth,b,Jn);const oe=z(P.auth,E);yield No(oe,P.auth);const ye=yield $r(P);return oe._openRedirect(P.auth,b,"reauthViaRedirect",ye)})).apply(this,arguments)}function ke(N,b,E){return function pt(N,b,E){return Rt.apply(this,arguments)}(N,b,E)}function Rt(){return(Rt=(0,h.Z)(function*(N,b,E){const P=(0,U.m9)(N);ze(P.auth,b,Jn);const oe=z(P.auth,E);yield So(!1,P,b.providerId),yield No(oe,P.auth);const ye=yield $r(P);return oe._openRedirect(P.auth,b,"linkViaRedirect",ye)})).apply(this,arguments)}function sn(N,b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(N,b){return yield Nn(N)._initializationPromise,er(N,b,!1)})).apply(this,arguments)}function er(N,b){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(N,b,E=!1){const P=Nn(N),oe=z(P,b),Et=yield new Xa(P,oe,E).execute();return Et&&!E&&(delete Et.user._redirectEventId,yield P._persistUserIfCurrent(Et.user),yield P._setRedirectUser(null,b)),Et})).apply(this,arguments)}function $r(N){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(N){const b=Ki(`${N.uid}:::`);return N._redirectEventId=b,yield N.auth._setRedirectUser(N),yield N.auth._persistUserIfCurrent(N),b})).apply(this,arguments)}class ds{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let E=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(b,P)&&(E=!0,this.sendToConsumer(b,P),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Kl(N){switch(N.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zl(N);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=b,E=!0)),E}sendToConsumer(b,E){var P;if(b.error&&!zl(b)){const oe=(null===(P=b.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";E.onError(gt(this.auth,oe))}else E.onAuthEvent(b)}isEventForConsumer(b,E){const P=null===E.eventId||!!b.eventId&&b.eventId===E.eventId;return E.filter.includes(b.type)&&P}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(el(b))}saveEventToCache(b){this.cachedEventUids.add(el(b)),this.lastProcessedEventTime=Date.now()}}function el(N){return[N.type,N.eventId,N.sessionId,N.tenantId].filter(b=>b).join("-")}function zl({type:N,error:b}){return"unknown"===N&&"auth/no-auth-event"===b?.code}function go(N){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(N,b={}){return ot(N,"GET","/v1/projects",b)})).apply(this,arguments)}const Yc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zc=/^https?/;function sh(){return(sh=(0,h.Z)(function*(N){if(N.config.emulator)return;const{authorizedDomains:b}=yield go(N);for(const E of b)try{if(Xf(E))return}catch{}Ht(N,"unauthorized-domain")})).apply(this,arguments)}function Xf(N){const b=Ut(),{protocol:E,hostname:P}=new URL(b);if(N.startsWith("chrome-extension://")){const Et=new URL(N);return""===Et.hostname&&""===P?"chrome-extension:"===E&&N.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===E&&Et.hostname===P}if(!Zc.test(E))return!1;if(Yc.test(N))return P===N;const oe=N.replace(/\./g,"\\.");return new RegExp("^(.+\\."+oe+"|"+oe+")$","i").test(P)}const vd=new pe(3e4,6e4);function bd(){const N=as().___jsl;if(N?.H)for(const b of Object.keys(N.H))if(N.H[b].r=N.H[b].r||[],N.H[b].L=N.H[b].L||[],N.H[b].r=[...N.H[b].L],N.CP)for(let E=0;E<N.CP.length;E++)N.CP[E]=null}let cu=null;function oh(N){return cu=cu||function Lh(N){return new Promise((b,E)=>{var P,oe,ye;function Et(){bd(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{bd(),E(gt(N,"network-request-failed"))},timeout:vd.get()})}if(null!==(oe=null===(P=as().gapi)||void 0===P?void 0:P.iframes)&&void 0!==oe&&oe.Iframe)b(gapi.iframes.getContext());else{if(null===(ye=as().gapi)||void 0===ye||!ye.load){const nn=Zo("iframefcb");return as()[nn]=()=>{gapi.load?Et():E(gt(N,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${nn}`).catch($n=>E($n))}Et()}}).catch(b=>{throw cu=null,b})}(N),cu}const _c=new pe(5e3,15e3),yc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ls(N){const b=N.config;nt(b.authDomain,N,"auth-domain-config-required");const E=b.emulator?ie(b,"emulator/auth/iframe"):`https://${N.config.authDomain}/__/auth/iframe`,P={apiKey:b.apiKey,appName:N.name,v:ee.SDK_VERSION},oe=pa.get(N.config.apiHost);oe&&(P.eid=oe);const ye=N._getFrameworks();return ye.length&&(P.fw=ye.join(",")),`${E}?${(0,U.xO)(P).slice(1)}`}function Fl(){return Fl=(0,h.Z)(function*(N){const b=yield oh(N),E=as().gapi;return nt(E,N,"internal-error"),b.open({where:document.body,url:ls(N),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yc,dontclear:!0},P=>new Promise(function(){var oe=(0,h.Z)(function*(ye,Et){yield P.restyle({setHideOnLeave:!1});const nn=gt(N,"network-request-failed"),$n=as().setTimeout(()=>{Et(nn)},_c.get());function Zn(){as().clearTimeout($n),ye(P)}P.ping(Zn).then(Zn,()=>{Et(nn)})});return function(ye,Et){return oe.apply(this,arguments)}}()))}),Fl.apply(this,arguments)}const Il={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bc{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hu(N,b,E,P,oe,ye){nt(N.config.authDomain,N,"auth-domain-config-required"),nt(N.config.apiKey,N,"invalid-api-key");const Et={apiKey:N.config.apiKey,appName:N.name,authType:E,redirectUrl:P,v:ee.SDK_VERSION,eventId:oe};if(b instanceof Jn){b.setDefaultLanguage(N.languageCode),Et.providerId=b.providerId||"",(0,U.xb)(b.getCustomParameters())||(Et.customParameters=JSON.stringify(b.getCustomParameters()));for(const[$n,Zn]of Object.entries(ye||{}))Et[$n]=Zn}if(b instanceof _s){const $n=b.getScopes().filter(Zn=>""!==Zn);$n.length>0&&(Et.scopes=$n.join(","))}N.tenantId&&(Et.tid=N.tenantId);const nn=Et;for(const $n of Object.keys(nn))void 0===nn[$n]&&delete nn[$n];return`${function Qc({config:N}){return N.emulator?ie(N,"emulator/auth/handler"):`https://${N.authDomain}/__/auth/handler`}(N)}?${(0,U.xO)(nn).slice(1)}`}const ul="webStorageSupport",jo=class Vh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ca,this._completeRedirectFn=er,this._overrideRedirectResult=mc}_openPopup(b,E,P,oe){var ye=this;return(0,h.Z)(function*(){var Et;bt(null===(Et=ye.eventManagers[b._key()])||void 0===Et?void 0:Et.manager,"_initialize() not called before _openPopup()");const nn=Hu(b,E,P,Ut(),oe);return function Uu(N,b,E,P=500,oe=600){const ye=Math.max((window.screen.availHeight-oe)/2,0).toString(),Et=Math.max((window.screen.availWidth-P)/2,0).toString();let nn="";const $n=Object.assign(Object.assign({},Il),{width:P.toString(),height:oe.toString(),top:ye,left:Et}),Zn=(0,U.z$)().toLowerCase();E&&(nn=ht(Zn)?"_blank":E),ae(Zn)&&(b=b||"http://localhost",$n.scrollbars="yes");const Er=Object.entries($n).reduce((Eo,[dl,tl])=>`${Eo}${dl}=${tl},`,"");if(function et(N=(0,U.z$)()){var b;return ve(N)&&!(null===(b=window.navigator)||void 0===b||!b.standalone)}(Zn)&&"_self"!==nn)return function ah(N,b){const E=document.createElement("a");E.href=N,E.target=b;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(P)}(b||"",nn),new bc(null);const hs=window.open(b||"",nn,Er);nt(hs,N,"popup-blocked");try{hs.focus()}catch{}return new bc(hs)}(b,nn,Ki())})()}_openRedirect(b,E,P,oe){var ye=this;return(0,h.Z)(function*(){return yield ye._originValidation(b),function dn(N){as().location.href=N}(Hu(b,E,P,Ut(),oe)),new Promise(()=>{})})()}_initialize(b){const E=b._key();if(this.eventManagers[E]){const{manager:oe,promise:ye}=this.eventManagers[E];return oe?Promise.resolve(oe):(bt(ye,"If manager is not set, promise should be"),ye)}const P=this.initAndGetManager(b);return this.eventManagers[E]={promise:P},P.catch(()=>{delete this.eventManagers[E]}),P}initAndGetManager(b){var E=this;return(0,h.Z)(function*(){const P=yield function Vu(N){return Fl.apply(this,arguments)}(b),oe=new ds(b);return P.register("authEvent",ye=>(nt(ye?.authEvent,b,"invalid-auth-event"),{status:oe.onEvent(ye.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[b._key()]={manager:oe},E.iframes[b._key()]=P,oe})()}_isIframeWebStorageSupported(b,E){this.iframes[b._key()].send(ul,{type:ul},oe=>{var ye;const Et=null===(ye=oe?.[0])||void 0===ye?void 0:ye[ul];void 0!==Et&&E(!!Et),Ht(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const E=b._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Fh(N){return sh.apply(this,arguments)}(b)),this.originValidationPromises[E]}get _shouldInitProactively(){return Qt()||be()||ve()}};class vu extends class ql{constructor(b){this.factorId=b}_process(b,E,P){switch(E.type){case"enroll":return this._finalizeEnroll(b,E.credential,P);case"signin":return this._finalizeSignIn(b,E.credential);default:return Ve("unexpected MultiFactorSessionType")}}}{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new vu(b)}_finalizeEnroll(b,E,P){return function Gl(N,b){return ot(N,"POST","/v2/accounts/mfaEnrollment:finalize",Be(N,b))}(b,{idToken:E,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,E){return function ti(N,b){return ot(N,"POST","/v2/accounts/mfaSignIn:finalize",Be(N,b))}(b,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uh=(()=>{class N{constructor(){}static assertion(E){return vu._fromCredential(E)}}return N.FACTOR_ID="phone",N})();var Jc="@firebase/auth";class Jo{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var E=this;return(0,h.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const E=this.auth.onIdTokenChanged(P=>{b(P?.stsTokenManager.accessToken||null)});this.internalListeners.set(b,E),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const E=this.internalListeners.get(b);!E||(this.internalListeners.delete(b),E(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function Os(N){(0,ee._registerComponent)(new Oe.wA("auth",(b,{options:E})=>{const P=b.getProvider("app").getImmediate(),oe=b.getProvider("heartbeat"),{apiKey:ye,authDomain:Et}=P.options;return((nn,$n)=>{nt(ye&&!ye.includes(":"),"invalid-api-key",{appName:nn.name}),nt(!Et?.includes(":"),"argument-error",{appName:nn.name});const Zn={apiKey:ye,authDomain:Et,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xn(N)},Er=new wi(nn,$n,Zn);return function tt(N,b){const E=b?.persistence||[],P=(Array.isArray(E)?E:[E]).map($e);b?.errorMap&&N._updateErrorMap(b.errorMap),N._initializeWithPersistence(P,b?.popupRedirectResolver)}(Er,E),Er})(P,oe)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,E,P)=>{b.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new Oe.wA("auth-internal",b=>{const E=Nn(b.getProvider("auth").getImmediate());return new Jo(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Jc,"0.21.0",function ga(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,ee.registerVersion)(Jc,"0.21.0","esm2017")}("Browser")},2090:(cn,dt,L)=>{L.d(dt,{$s:()=>bn,BH:()=>tn,DV:()=>Kn,Dv:()=>On,G6:()=>ze,GJ:()=>vr,L:()=>Pe,LL:()=>We,Pz:()=>Mt,Sg:()=>pe,UG:()=>lt,UI:()=>Tr,US:()=>Oe,Wj:()=>kn,Wl:()=>en,Yr:()=>qe,ZB:()=>_e,ZR:()=>At,aH:()=>An,b$:()=>ct,cI:()=>ot,dS:()=>gn,eu:()=>nt,g5:()=>ee,gK:()=>Lr,gQ:()=>Qn,h$:()=>Ge,hl:()=>jt,hu:()=>U,jU:()=>xt,lb:()=>Ri,m9:()=>tr,ne:()=>fr,p$:()=>we,pd:()=>Gr,r3:()=>Sr,ru:()=>yt,tV:()=>Ze,uI:()=>mt,ug:()=>Si,vZ:()=>hn,w1:()=>Ht,w9:()=>gi,xO:()=>Ar,xb:()=>ir,z$:()=>Nt,zI:()=>Ve,zd:()=>Yr});const U=function(Fe,Ae){if(!Fe)throw ee(Ae)},ee=function(Fe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Fe)},Ce=function(Fe){const Ae=[];let Qe=0;for(let De=0;De<Fe.length;De++){let ae=Fe.charCodeAt(De);ae<128?Ae[Qe++]=ae:ae<2048?(Ae[Qe++]=ae>>6|192,Ae[Qe++]=63&ae|128):55296==(64512&ae)&&De+1<Fe.length&&56320==(64512&Fe.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&Fe.charCodeAt(++De)),Ae[Qe++]=ae>>18|240,Ae[Qe++]=ae>>12&63|128,Ae[Qe++]=ae>>6&63|128,Ae[Qe++]=63&ae|128):(Ae[Qe++]=ae>>12|224,Ae[Qe++]=ae>>6&63|128,Ae[Qe++]=63&ae|128)}return Ae},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Fe,Ae){if(!Array.isArray(Fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Qe=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<Fe.length;ae+=3){const be=Fe[ae],ht=ae+1<Fe.length,Yt=ht?Fe[ae+1]:0,pn=ae+2<Fe.length,Rn=pn?Fe[ae+2]:0;let ge=(15&Yt)<<2|Rn>>6,et=63&Rn;pn||(et=64,ht||(ge=64)),De.push(Qe[be>>2],Qe[(3&be)<<4|Yt>>4],Qe[ge],Qe[et])}return De.join("")},encodeString(Fe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Fe):this.encodeByteArray(Ce(Fe),Ae)},decodeString(Fe,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Fe):function(Fe){const Ae=[];let Qe=0,De=0;for(;Qe<Fe.length;){const ae=Fe[Qe++];if(ae<128)Ae[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const be=Fe[Qe++];Ae[De++]=String.fromCharCode((31&ae)<<6|63&be)}else if(ae>239&&ae<365){const pn=((7&ae)<<18|(63&Fe[Qe++])<<12|(63&Fe[Qe++])<<6|63&Fe[Qe++])-65536;Ae[De++]=String.fromCharCode(55296+(pn>>10)),Ae[De++]=String.fromCharCode(56320+(1023&pn))}else{const be=Fe[Qe++],ht=Fe[Qe++];Ae[De++]=String.fromCharCode((15&ae)<<12|(63&be)<<6|63&ht)}}return Ae.join("")}(this.decodeStringToByteArray(Fe,Ae))},decodeStringToByteArray(Fe,Ae){this.init_();const Qe=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<Fe.length;){const be=Qe[Fe.charAt(ae++)],Yt=ae<Fe.length?Qe[Fe.charAt(ae)]:0;++ae;const Rn=ae<Fe.length?Qe[Fe.charAt(ae)]:64;++ae;const ve=ae<Fe.length?Qe[Fe.charAt(ae)]:64;if(++ae,null==be||null==Yt||null==Rn||null==ve)throw Error();De.push(be<<2|Yt>>4),64!==Rn&&(De.push(Yt<<4&240|Rn>>2),64!==ve&&De.push(Rn<<6&192|ve))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Fe=0;Fe<this.ENCODED_VALS.length;Fe++)this.byteToCharMap_[Fe]=this.ENCODED_VALS.charAt(Fe),this.charToByteMap_[this.byteToCharMap_[Fe]]=Fe,this.byteToCharMapWebSafe_[Fe]=this.ENCODED_VALS_WEBSAFE.charAt(Fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Fe]]=Fe,Fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Fe)]=Fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Fe)]=Fe)}}},Ge=function(Fe){const Ae=Ce(Fe);return Oe.encodeByteArray(Ae,!0)},Pe=function(Fe){return Ge(Fe).replace(/\./g,"")},Ze=function(Fe){try{return Oe.decodeString(Fe,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function we(Fe){return _e(void 0,Fe)}function _e(Fe,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Fe&&(Fe={});break;case Array:Fe=[];break;default:return Ae}for(const Qe in Ae)!Ae.hasOwnProperty(Qe)||!Ue(Qe)||(Fe[Qe]=_e(Fe[Qe],Ae[Qe]));return Fe}function Ue(Fe){return"__proto__"!==Fe}function Nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function yt(){const Fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Fe&&void 0!==Fe.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ht(){const Fe=Nt();return Fe.indexOf("MSIE ")>=0||Fe.indexOf("Trident/")>=0}function qe(){return!1}function ze(){return!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jt(){try{return"object"==typeof indexedDB}catch{return!1}}function nt(){return new Promise((Fe,Ae)=>{try{let Qe=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),Qe||self.indexedDB.deleteDatabase(De),Fe(!0)},ae.onupgradeneeded=()=>{Qe=!1},ae.onerror=()=>{var be;Ae((null===(be=ae.error)||void 0===be?void 0:be.message)||"")}}catch(Qe){Ae(Qe)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const tt=()=>{try{return function bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Fe=process.env.__FIREBASE_DEFAULTS__;return Fe?JSON.parse(Fe):void 0})()||(()=>{if(typeof document>"u")return;let Fe;try{Fe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ae=Fe&&Ze(Fe[1]);return Ae&&JSON.parse(Ae)})()}catch(Fe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Fe}`)}},An=()=>{var Fe;return null===(Fe=tt())||void 0===Fe?void 0:Fe.config},Mt=Fe=>{var Ae;return null===(Ae=tt())||void 0===Ae?void 0:Ae[`_${Fe}`]};class tn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,Qe)=>{this.resolve=Ae,this.reject=Qe})}wrapCallback(Ae){return(Qe,De)=>{Qe?this.reject(Qe):this.resolve(De),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(Qe):Ae(Qe,De))}}}function pe(Fe,Ae){if(Fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=Ae||"demo-project",ae=Fe.iat||0,be=Fe.sub||Fe.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Fe);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(ht)),""].join(".")}class At extends Error{constructor(Ae,Qe,De){super(Qe),this.code=Ae,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,At.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(Ae,Qe,De){this.service=Ae,this.serviceName=Qe,this.errors=De}create(Ae,...Qe){const De=Qe[0]||{},ae=`${this.service}/${Ae}`,be=this.errors[Ae],ht=be?function Ye(Fe,Ae){return Fe.replace(Be,(Qe,De)=>{const ae=Ae[De];return null!=ae?String(ae):`<${De}?>`})}(be,De):"Error";return new At(ae,`${this.serviceName}: ${ht} (${ae}).`,De)}}const Be=/\{\$([^}]+)}/g;function ot(Fe){return JSON.parse(Fe)}function en(Fe){return JSON.stringify(Fe)}const an=function(Fe){let Ae={},Qe={},De={},ae="";try{const be=Fe.split(".");Ae=ot(Ze(be[0])||""),Qe=ot(Ze(be[1])||""),ae=be[2],De=Qe.d||{},delete Qe.d}catch{}return{header:Ae,claims:Qe,data:De,signature:ae}},gi=function(Fe){const Qe=an(Fe).claims;return!!Qe&&"object"==typeof Qe&&Qe.hasOwnProperty("iat")},vr=function(Fe){const Ae=an(Fe).claims;return"object"==typeof Ae&&!0===Ae.admin};function Sr(Fe,Ae){return Object.prototype.hasOwnProperty.call(Fe,Ae)}function Kn(Fe,Ae){if(Object.prototype.hasOwnProperty.call(Fe,Ae))return Fe[Ae]}function ir(Fe){for(const Ae in Fe)if(Object.prototype.hasOwnProperty.call(Fe,Ae))return!1;return!0}function Tr(Fe,Ae,Qe){const De={};for(const ae in Fe)Object.prototype.hasOwnProperty.call(Fe,ae)&&(De[ae]=Ae.call(Qe,Fe[ae],ae,Fe));return De}function hn(Fe,Ae){if(Fe===Ae)return!0;const Qe=Object.keys(Fe),De=Object.keys(Ae);for(const ae of Qe){if(!De.includes(ae))return!1;const be=Fe[ae],ht=Ae[ae];if(br(be)&&br(ht)){if(!hn(be,ht))return!1}else if(be!==ht)return!1}for(const ae of De)if(!Qe.includes(ae))return!1;return!0}function br(Fe){return null!==Fe&&"object"==typeof Fe}function Ar(Fe){const Ae=[];for(const[Qe,De]of Object.entries(Fe))Array.isArray(De)?De.forEach(ae=>{Ae.push(encodeURIComponent(Qe)+"="+encodeURIComponent(ae))}):Ae.push(encodeURIComponent(Qe)+"="+encodeURIComponent(De));return Ae.length?"&"+Ae.join("&"):""}function Yr(Fe){const Ae={};return Fe.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,be]=De.split("=");Ae[decodeURIComponent(ae)]=decodeURIComponent(be)}}),Ae}function Gr(Fe){const Ae=Fe.indexOf("?");if(!Ae)return"";const Qe=Fe.indexOf("#",Ae);return Fe.substring(Ae,Qe>0?Qe:void 0)}class Qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ae=1;Ae<this.blockSize;++Ae)this.pad_[Ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ae,Qe){Qe||(Qe=0);const De=this.W_;if("string"==typeof Ae)for(let ve=0;ve<16;ve++)De[ve]=Ae.charCodeAt(Qe)<<24|Ae.charCodeAt(Qe+1)<<16|Ae.charCodeAt(Qe+2)<<8|Ae.charCodeAt(Qe+3),Qe+=4;else for(let ve=0;ve<16;ve++)De[ve]=Ae[Qe]<<24|Ae[Qe+1]<<16|Ae[Qe+2]<<8|Ae[Qe+3],Qe+=4;for(let ve=16;ve<80;ve++){const ge=De[ve-3]^De[ve-8]^De[ve-14]^De[ve-16];De[ve]=4294967295&(ge<<1|ge>>>31)}let Rn,Ee,ae=this.chain_[0],be=this.chain_[1],ht=this.chain_[2],Yt=this.chain_[3],pn=this.chain_[4];for(let ve=0;ve<80;ve++){ve<40?ve<20?(Rn=Yt^be&(ht^Yt),Ee=1518500249):(Rn=be^ht^Yt,Ee=1859775393):ve<60?(Rn=be&ht|Yt&(be|ht),Ee=2400959708):(Rn=be^ht^Yt,Ee=3395469782);const ge=(ae<<5|ae>>>27)+Rn+pn+Ee+De[ve]&4294967295;pn=Yt,Yt=ht,ht=4294967295&(be<<30|be>>>2),be=ae,ae=ge}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+be&4294967295,this.chain_[2]=this.chain_[2]+ht&4294967295,this.chain_[3]=this.chain_[3]+Yt&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(Ae,Qe){if(null==Ae)return;void 0===Qe&&(Qe=Ae.length);const De=Qe-this.blockSize;let ae=0;const be=this.buf_;let ht=this.inbuf_;for(;ae<Qe;){if(0===ht)for(;ae<=De;)this.compress_(Ae,ae),ae+=this.blockSize;if("string"==typeof Ae){for(;ae<Qe;)if(be[ht]=Ae.charCodeAt(ae),++ht,++ae,ht===this.blockSize){this.compress_(be),ht=0;break}}else for(;ae<Qe;)if(be[ht]=Ae[ae],++ht,++ae,ht===this.blockSize){this.compress_(be),ht=0;break}}this.inbuf_=ht,this.total_+=Qe}digest(){const Ae=[];let Qe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&Qe,Qe/=256;this.compress_(this.buf_);let De=0;for(let ae=0;ae<5;ae++)for(let be=24;be>=0;be-=8)Ae[De]=this.chain_[ae]>>be&255,++De;return Ae}}function fr(Fe,Ae){const Qe=new lr(Fe,Ae);return Qe.subscribe.bind(Qe)}class lr{constructor(Ae,Qe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Qe,this.task.then(()=>{Ae(this)}).catch(De=>{this.error(De)})}next(Ae){this.forEachObserver(Qe=>{Qe.next(Ae)})}error(Ae){this.forEachObserver(Qe=>{Qe.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,Qe,De){let ae;if(void 0===Ae&&void 0===Qe&&void 0===De)throw new Error("Missing Observer.");ae=function En(Fe,Ae){if("object"!=typeof Fe||null===Fe)return!1;for(const Qe of Ae)if(Qe in Fe&&"function"==typeof Fe[Qe])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:Qe,complete:De},void 0===ae.next&&(ae.next=Pn),void 0===ae.error&&(ae.error=Pn),void 0===ae.complete&&(ae.complete=Pn);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),be}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let Qe=0;Qe<this.observers.length;Qe++)this.sendOne(Qe,Ae)}sendOne(Ae,Qe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{Qe(this.observers[Ae])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pn(){}const On=function(Fe,Ae,Qe,De){let ae;if(De<Ae?ae="at least "+Ae:De>Qe&&(ae=0===Qe?"none":"no more than "+Qe),ae)throw new Error(Fe+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ae+".")};function Lr(Fe,Ae){return`${Fe} failed: ${Ae} argument `}function kn(Fe,Ae,Qe,De){if((!De||Qe)&&"function"!=typeof Qe)throw new Error(Lr(Fe,Ae)+"must be a valid function.")}function Ri(Fe,Ae,Qe,De){if((!De||Qe)&&("object"!=typeof Qe||null===Qe))throw new Error(Lr(Fe,Ae)+"must be a valid context object.")}const gn=function(Fe){const Ae=[];let Qe=0;for(let De=0;De<Fe.length;De++){let ae=Fe.charCodeAt(De);if(ae>=55296&&ae<=56319){const be=ae-55296;De++,U(De<Fe.length,"Surrogate pair missing trail surrogate."),ae=65536+(be<<10)+(Fe.charCodeAt(De)-56320)}ae<128?Ae[Qe++]=ae:ae<2048?(Ae[Qe++]=ae>>6|192,Ae[Qe++]=63&ae|128):ae<65536?(Ae[Qe++]=ae>>12|224,Ae[Qe++]=ae>>6&63|128,Ae[Qe++]=63&ae|128):(Ae[Qe++]=ae>>18|240,Ae[Qe++]=ae>>12&63|128,Ae[Qe++]=ae>>6&63|128,Ae[Qe++]=63&ae|128)}return Ae},Si=function(Fe){let Ae=0;for(let Qe=0;Qe<Fe.length;Qe++){const De=Fe.charCodeAt(Qe);De<128?Ae++:De<2048?Ae+=2:De>=55296&&De<=56319?(Ae+=4,Qe++):Ae+=3}return Ae};function bn(Fe,Ae=1e3,Qe=2){const De=Ae*Math.pow(Qe,Fe),ae=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ae)}function tr(Fe){return Fe&&Fe._delegate?Fe._delegate:Fe}},6132:(cn,dt,L)=>{L.d(dt,{e:()=>we});var h=L(552),Oe=(L(2090),L(9681),L(1877),L(4859),L(4650)),Ge=L(3101),Pe=L(3385),Ze=L(7799);let we=(()=>{class _e{constructor(Nt,mt,lt,xt){this.firestore=Nt,this.auth=mt,this.router=lt,this.ngZone=xt,this.auth.authState.subscribe(yt=>{yt?(this.setUser(yt),localStorage.setItem("user",JSON.stringify(this.currentUser())),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUser(Nt){this.user$=Nt}currentUser(){return this.user$?this.user$:JSON.parse(localStorage.getItem("user"))}AuthLogin(Nt){return this.auth.signInWithPopup(Nt).then(mt=>{console.log("resp = ",mt),this.setUser(mt.user),this.router.navigate(["admin/dashboard/categories"])}).catch(mt=>{window.alert(mt)})}login(){this.AuthLogin(new h.Q).then(Nt=>{this.router.navigate(["admin/dashboard"])})}logout(){return this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["admin/log-in"])})}}return _e.\u0275fac=function(Nt){return new(Nt||_e)(Oe.LFG(Ge.ST),Oe.LFG(Pe.zQ),Oe.LFG(Ze.F0),Oe.LFG(Oe.R0b))},_e.\u0275prov=Oe.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},7087:(cn,dt,L)=>{L.d(dt,{D:()=>ee});var h=L(7579),U=L(4650);let ee=(()=>{class Ce{constructor(){this.isLoading=new h.x}show(){setTimeout(()=>{this.isLoading.next(!0)},0),setTimeout(()=>{this.isLoading.next(!1)},1500)}hide(){setTimeout(()=>{this.isLoading.next(!1)},0)}}return Ce.\u0275fac=function(Oe){return new(Oe||Ce)},Ce.\u0275prov=U.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},4466:(cn,dt,L)=>{L.d(dt,{m:()=>Me});var h=L(6895),U=L(377),ee=L(6188),Ce=L(4650);let Me=(()=>{class Oe{}return Oe.\u0275fac=function(Pe){return new(Pe||Oe)},Oe.\u0275mod=Ce.oAB({type:Oe}),Oe.\u0275inj=Ce.cJS({providers:[{provide:U.hP,useValue:"savourydining.appspot.com"}],imports:[h.ez,U.TE,ee.aw]}),Oe})()},668:(cn,dt,L)=>{var h=L(1481),U=L(4650),ee=L(4541),Ce=L(7799);const Me=[{path:"",redirectTo:"survey",pathMatch:"full"},{path:"survey",loadChildren:()=>Promise.all([L.e(226),L.e(982)]).then(L.bind(L,1982)).then(u=>u.SurveyModule)},{path:"admin",loadChildren:()=>Promise.all([L.e(226),L.e(892)]).then(L.bind(L,7892)).then(u=>u.AdminModule)}];let Oe=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u}),u.\u0275inj=U.cJS({imports:[Ce.Bz.forRoot(Me),Ce.Bz]}),u})();var Ge=L(6188),Pe=L(7087),Ze=L(6895);function we(u,s){1&u&&(U.TgZ(0,"div",1)(1,"div",2),U.O4$(),U.TgZ(2,"svg",3),U._UZ(3,"path",4)(4,"path",5),U.qZA(),U.kcU(),U.TgZ(5,"span",6),U._uU(6,"Loading..."),U.qZA()()())}let _e=(()=>{class u{constructor(o){this.loaderService=o,this.value=50,this.isLoading=this.loaderService.isLoading}}return u.\u0275fac=function(o){return new(o||u)(U.Y36(Pe.D))},u.\u0275cmp=U.Xpm({type:u,selectors:[["app-standby"]],decls:2,vars:3,consts:[["class","text-center overlay",4,"ngIf"],[1,"text-center","overlay"],["role","status"],["viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","mr-2","w-8","h-8","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(o,d){1&o&&(U.YNc(0,we,7,0,"div",0),U.ALo(1,"async")),2&o&&U.Q6J("ngIf",U.lcZ(1,1,d.isLoading))},dependencies:[Ze.O5,Ze.Ov],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;display:flex;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.45);z-index:99999;align-items:center;justify-content:center}.spinner[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;top:calc(50% - 50px);left:calc(50% - 50px);transform:translate(calc(-50% + 50px),calc(-50% + 50px))}  .mat-progress-spinner circle,   .mat-spinner circle{stroke:var(--primary-color)}"]}),u})(),Ue=(()=>{class u{constructor(o){this.title="sd-survey",o.addLangs(["en","no"]),o.setDefaultLang("en"),o.use("en")}}return u.\u0275fac=function(o){return new(o||u)(U.Y36(Ge.sK))},u.\u0275cmp=U.Xpm({type:u,selectors:[["app-root"]],decls:3,vars:0,consts:[["role","main",1,"content"]],template:function(o,d){1&o&&(U.TgZ(0,"div",0),U._UZ(1,"app-standby")(2,"router-outlet"),U.qZA())},dependencies:[Ce.lC,_e],styles:["*[_ngcontent-%COMP%]{font-family:Montserrat,Arial,Helvetica,Nimbus Sans L,sans-serif}"]}),u})();var Nt=L(4006);const mt_firebase={apiKey:"AIzaSyDmLMkMhma-fXNM7GYnbV2xvBChvmGG2MY",authDomain:"savourydining.firebaseapp.com",projectId:"savourydining",storageBucket:"savourydining.appspot.com",messagingSenderId:"207394989073",appId:"1:207394989073:web:5a12bc301624da108cfdb0",measurementId:"G-SPWRLE6MVT"};var lt=L(2011),xt=L(3385),yt=L(377),ct=L(3101),je=L(4986),Ht=L(9751),gt=L(9646),qe=L(6451),ze=L(4004),jt=L(3099),nt=L(3900),Ve=L(5026),bt=L(1884),Se=L(1365),$e=L(4482),wt=L(5403),Ut=L(2122),An=(L(9568),L(3942)),Mt=L(4859),tn=L(5861),pe=L(9681),ie=L(2090),At=L(1877);const We="@firebase/database";let Be="";function ot(u){Be=u}class en{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,o){null==o?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,ie.Wl)(o))}get(s){const o=this.domStorage_.getItem(this.prefixedName_(s));return null==o?null:(0,ie.cI)(o)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}class an{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,o){null==o?delete this.cache_[s]:this.cache_[s]=o}get(s){return(0,ie.r3)(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}const Dr=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const s=window[u];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new en(s)}}catch{}return new an},jn=Dr("localStorage"),gi=Dr("sessionStorage"),vr=new At.Yd("@firebase/database"),Sr=function(){let u=1;return function(){return u++}}(),Kn=function(u){const s=(0,ie.dS)(u),o=new ie.gQ;o.update(s);const d=o.digest();return ie.US.encodeByteArray(d)},ir=function(...u){let s="";for(let o=0;o<u.length;o++){const d=u[o];Array.isArray(d)||d&&"object"==typeof d&&"number"==typeof d.length?s+=ir.apply(null,d):s+="object"==typeof d?(0,ie.Wl)(d):d,s+=" "}return s};let Tr=null,hn=!0;const br=function(u,s){(0,ie.hu)(!s||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(vr.logLevel=At.in.VERBOSE,Tr=vr.log.bind(vr),s&&gi.set("logging_enabled",!0)):"function"==typeof u?Tr=u:(Tr=null,gi.remove("logging_enabled"))},Gn=function(...u){if(!0===hn&&(hn=!1,null===Tr&&!0===gi.get("logging_enabled")&&br(!0)),Tr){const s=ir.apply(null,u);Tr(s)}},Ar=function(u){return function(...s){Gn(u,...s)}},Yr=function(...u){const s="FIREBASE INTERNAL ERROR: "+ir(...u);vr.error(s)},Gr=function(...u){const s=`FIREBASE FATAL ERROR: ${ir(...u)}`;throw vr.error(s),new Error(s)},Qn=function(...u){const s="FIREBASE WARNING: "+ir(...u);vr.warn(s)},lr=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},En="[MIN_NAME]",Pn="[MAX_NAME]",On=function(u,s){if(u===s)return 0;if(u===En||s===Pn)return-1;if(s===En||u===Pn)return 1;{const o=zn(u),d=zn(s);return null!==o?null!==d?o-d==0?u.length-s.length:o-d:-1:null!==d?1:u<s?-1:1}},Lr=function(u,s){return u===s?0:u<s?-1:1},Ii=function(u,s){if(s&&u in s)return s[u];throw new Error("Missing required key ("+u+") in object: "+(0,ie.Wl)(s))},kn=function(u){if("object"!=typeof u||null===u)return(0,ie.Wl)(u);const s=[];for(const d in u)s.push(d);s.sort();let o="{";for(let d=0;d<s.length;d++)0!==d&&(o+=","),o+=(0,ie.Wl)(s[d]),o+=":",o+=kn(u[s[d]]);return o+="}",o},Ri=function(u,s){const o=u.length;if(o<=s)return[u];const d=[];for(let _=0;_<o;_+=s)d.push(u.substring(_,_+s>o?o:_+s));return d};function gn(u,s){for(const o in u)u.hasOwnProperty(o)&&s(o,u[o])}const Si=function(u){(0,ie.hu)(!lr(u),"Invalid JSON number");const d=1023;let _,D,M,G,te;0===u?(D=0,M=0,_=1/u==-1/0?1:0):(_=u<0,(u=Math.abs(u))>=Math.pow(2,1-d)?(G=Math.min(Math.floor(Math.log(u)/Math.LN2),d),D=G+d,M=Math.round(u*Math.pow(2,52-G)-Math.pow(2,52))):(D=0,M=Math.round(u/Math.pow(2,-1074))));const de=[];for(te=52;te;te-=1)de.push(M%2?1:0),M=Math.floor(M/2);for(te=11;te;te-=1)de.push(D%2?1:0),D=Math.floor(D/2);de.push(_?1:0),de.reverse();const Xe=de.join("");let st="";for(te=0;te<64;te+=8){let Dt=parseInt(Xe.substr(te,8),2).toString(16);1===Dt.length&&(Dt="0"+Dt),st+=Dt}return st.toLowerCase()},mn=new RegExp("^-?(0*)\\d{1,10}$"),zn=function(u){if(mn.test(u)){const s=Number(u);if(s>=-2147483648&&s<=2147483647)return s}return null},Bn=function(u){try{u()}catch(s){setTimeout(()=>{throw Qn("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},Fe=function(u,s){const o=setTimeout(u,s);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class Ae{constructor(s,o){this.appName_=s,this.appCheckProvider=o,this.appCheck=o?.getImmediate({optional:!0}),this.appCheck||o?.get().then(d=>this.appCheck=d)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((o,d)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(o,d):o(null)},0)})}addTokenChangeListener(s){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(d=>d.addTokenListener(s))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Qe{constructor(s,o,d){this.appName_=s,this.firebaseOptions_=o,this.authProvider_=d,this.auth_=null,this.auth_=d.getImmediate({optional:!0}),this.auth_||d.onInit(_=>this.auth_=_)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(o=>o&&"auth/token-not-initialized"===o.code?(Gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,d)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(o,d):o(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(o=>o.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(o=>o.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(s)}}let De=(()=>{class u{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Rn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,et="websocket",ft="long_polling";class Qt{constructor(s,o,d,_,D=!1,M="",G=!1){this.secure=o,this.namespace=d,this.webSocketOnly=_,this.nodeAdmin=D,this.persistenceKey=M,this.includeNamespaceInQueryParams=G,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jn.get("host:"+s)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&jn.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Xn(u,s,o){let d;if((0,ie.hu)("string"==typeof s,"typeof type must == string"),(0,ie.hu)("object"==typeof o,"typeof params must == object"),s===et)d=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(s!==ft)throw new Error("Unknown connection type: "+s);d=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function ur(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(o.ns=u.namespace);const _=[];return gn(o,(D,M)=>{_.push(D+"="+M)}),d+_.join("&")}class Ur{constructor(){this.counters_={}}incrementCounter(s,o=1){(0,ie.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=o}get(){return(0,ie.p$)(this.counters_)}}const wi={},Nn={};function es(u){const s=u.toString();return wi[s]||(wi[s]=new Ur),wi[s]}class $s{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,o){this.closeAfterResponse=s,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,o){for(this.pendingResponses[s]=o;this.pendingResponses[this.currentResponseNum];){const d=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<d.length;++_)d[_]&&Bn(()=>{this.onMessage_(d[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hr{constructor(s,o,d,_,D,M,G){this.connId=s,this.repoInfo=o,this.applicationId=d,this.appCheckToken=_,this.authToken=D,this.transportSessionId=M,this.lastSessionId=G,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ar(s),this.stats_=es(o),this.urlFn=te=>(this.appCheckToken&&(te.ac=this.appCheckToken),Xn(o,ft,te))}open(s,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new $s(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,ie.Yr)()||"complete"===document.readyState)u();else{let s=!1;const o=function(){document.body?s||(s=!0,u()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fs((...D)=>{const[M,G,te,de,Xe]=D;if(this.incrementIncomingBytes_(D),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===M)this.id=G,this.password=te;else{if("close"!==M)throw new Error("Unrecognized command received: "+M);G?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(G,()=>{this.onClosed_()})):this.onClosed_()}},(...D)=>{const[M,G]=D;this.incrementIncomingBytes_(D),this.myPacketOrderer.handleResponse(M,G)},()=>{this.onClosed_()},this.urlFn);const d={start:"t"};d.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(d.cb=this.scriptTagHolder.uniqueCallbackIdentifier),d.v="5",this.transportSessionId&&(d.s=this.transportSessionId),this.lastSessionId&&(d.ls=this.lastSessionId),this.applicationId&&(d.p=this.applicationId),this.appCheckToken&&(d.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Rn.test(location.hostname)&&(d.r="f");const _=this.urlFn(d);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hr.forceAllow_=!0}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!hr.forceAllow_&&(hr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const o=(0,ie.Wl)(s);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const d=(0,ie.h$)(o),_=Ri(d,1840);for(let D=0;D<_.length;D++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[D]),this.curSegmentNum++}addDisconnectPingFrame(s,o){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const d={dframe:"t"};d.id=s,d.pw=o,this.myDisconnFrame.src=this.urlFn(d),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const o=(0,ie.Wl)(s).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class Fs{constructor(s,o,d,_){if(this.onDisconnect=d,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=s,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=Sr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=Fs.createIFrame_();let D="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(D='<script>document.domain="'+document.domain+'";<\/script>');const M="<html><body>"+D+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(M),this.myIFrame.doc.close()}catch(G){Gn("frame writing exception"),G.stack&&Gn(G.stack),Gn(G)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||Gn("No IE domain setting required")}catch{const d=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+d+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,o){for(this.myID=s,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;let o=this.urlFn(s),d="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+d.length<=1870;){const M=this.pendingSegs.shift();d=d+"&seg"+_+"="+M.seg+"&ts"+_+"="+M.ts+"&d"+_+"="+M.d,_++}return o+=d,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(s,o,d){this.pendingSegs.push({seg:s,ts:o,d}),this.alive&&this.newRequest_()}addLongPollTag_(s,o){this.outstandingRequests.add(o);const d=()=>{this.outstandingRequests.delete(o),this.newRequest_()},_=setTimeout(d,Math.floor(25e3));this.addTag(s,()=>{clearTimeout(_),d()})}addTag(s,o){(0,ie.Yr)()?this.doNodeLongPoll(s,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const d=this.myIFrame.doc.createElement("script");d.type="text/javascript",d.async=!0,d.src=s,d.onload=d.onreadystatechange=function(){const _=d.readyState;(!_||"loaded"===_||"complete"===_)&&(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),o())},d.onerror=()=>{Gn("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(d)}catch{}},Math.floor(1))}}let _o=null;typeof MozWebSocket<"u"?_o=MozWebSocket:typeof WebSocket<"u"&&(_o=WebSocket);let Pi=(()=>{class u{constructor(o,d,_,D,M,G,te){this.connId=o,this.applicationId=_,this.appCheckToken=D,this.authToken=M,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ar(this.connId),this.stats_=es(d),this.connURL=u.connectionURL_(d,G,te,D,_),this.nodeAdmin=d.nodeAdmin}static connectionURL_(o,d,_,D,M){const G={v:"5"};return!(0,ie.Yr)()&&typeof location<"u"&&location.hostname&&Rn.test(location.hostname)&&(G.r="f"),d&&(G.s=d),_&&(G.ls=_),D&&(G.ac=D),M&&(G.p=M),Xn(o,et,G)}open(o,d){this.onDisconnect=d,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jn.set("previous_websocket_failure",!0);try{let _;if((0,ie.Yr)()){_={headers:{"User-Agent":`Firebase/5/${Be}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(_.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(_.headers["X-Firebase-AppCheck"]=this.appCheckToken);const M=process.env,G=0===this.connURL.indexOf("wss://")?M.HTTPS_PROXY||M.https_proxy:M.HTTP_PROXY||M.http_proxy;G&&(_.proxy={origin:G})}this.mySock=new _o(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const D=_.message||_.data;return D&&this.log_(D),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const D=_.message||_.data;D&&this.log_(D),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(o=!0)}return!o&&null!==_o&&!u.forceDisallow_}static previouslyFailed(){return jn.isInMemoryStorage||!0===jn.get("previous_websocket_failure")}markConnectionHealthy(){jn.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const d=this.frames.join("");this.frames=null;const _=(0,ie.cI)(d);this.onMessage(_)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const d=Number(o);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const d=o.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(d);else{const _=this.extractFrameCount_(d);null!==_&&this.appendFrame_(_)}}send(o){this.resetKeepAlive();const d=(0,ie.Wl)(o);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const _=Ri(d,16384);_.length>1&&this.sendString_(String(_.length));for(let D=0;D<_.length;D++)this.sendString_(_[D])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),na=(()=>{class u{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[hr,Pi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const d=Pi&&Pi.isAvailable();let _=d&&!Pi.previouslyFailed();if(o.webSocketOnly&&(d||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[Pi];else{const D=this.transports_=[];for(const M of u.ALL_TRANSPORTS)M&&M.isAvailable()&&D.push(M);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class ho{constructor(s,o,d,_,D,M,G,te,de,Xe){this.id=s,this.repoInfo_=o,this.applicationId_=d,this.appCheckToken_=_,this.authToken_=D,this.onMessage_=M,this.onReady_=G,this.onDisconnect_=te,this.onKill_=de,this.lastSessionId=Xe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ar("c:"+this.id+":"),this.transportManager_=new na(o),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),d=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,d)},Math.floor(0));const _=s.healthyTimeout||0;_>0&&(this.healthyTimeout_=Fe(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return o=>{s===this.conn_?this.onConnectionLost_(o):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return o=>{2!==this.state_&&(s===this.rx_?this.onPrimaryMessageReceived_(o):s===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(s){this.sendData_({t:"d",d:s})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if("t"in s){const o=s.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const o=Ii("t",s),d=Ii("d",s);if("c"===o)this.onSecondaryControl_(d);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(d)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const o=Ii("t",s),d=Ii("d",s);"c"===o?this.onControl_(d):"d"===o&&this.onDataMessage_(d)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const o=Ii("t",s);if("d"in s){const d=s.d;if("h"===o)this.onHandshake_(d);else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(d):"r"===o?this.onReset_(d):"e"===o?Yr("Server Error: "+d):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yr("Unknown control packet command: "+o)}}onHandshake_(s){const o=s.ts,d=s.v,_=s.h;this.sessionId=s.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==d&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),d=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,d),Fe(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,o){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fe(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ms{put(s,o,d,_){}merge(s,o,d,_){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,o,d){}onDisconnectMerge(s,o,d){}onDisconnectCancel(s,o){}reportStats(s){}}class Bi{constructor(s){this.allowedEvents_=s,this.listeners_={},(0,ie.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...o){if(Array.isArray(this.listeners_[s])){const d=[...this.listeners_[s]];for(let _=0;_<d.length;_++)d[_].callback.apply(d[_].context,o)}}on(s,o,d){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:o,context:d});const _=this.getInitialEvent(s);_&&o.apply(d,_)}off(s,o,d){this.validateEventType_(s);const _=this.listeners_[s]||[];for(let D=0;D<_.length;D++)if(_[D].callback===o&&(!d||d===_[D].context))return void _.splice(D,1)}validateEventType_(s){(0,ie.hu)(this.allowedEvents_.find(o=>o===s),"Unknown event: "+s)}}class Ma extends Bi{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ma}getInitialEvent(s){return(0,ie.hu)("online"===s,"Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}class jr{constructor(s,o){if(void 0===o){this.pieces_=s.split("/");let d=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[d]=this.pieces_[_],d++);this.pieces_.length=d,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=o}toString(){let s="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(s+="/"+this.pieces_[o]);return s||"/"}}function Mr(){return new jr("")}function Jn(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function _s(u){return u.pieces_.length-u.pieceNum_}function Wr(u){let s=u.pieceNum_;return s<u.pieces_.length&&s++,new jr(u.pieces_,s)}function Ys(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function Gs(u,s=0){return u.pieces_.slice(u.pieceNum_+s)}function yo(u){if(u.pieceNum_>=u.pieces_.length)return null;const s=[];for(let o=u.pieceNum_;o<u.pieces_.length-1;o++)s.push(u.pieces_[o]);return new jr(s,0)}function kr(u,s){const o=[];for(let d=u.pieceNum_;d<u.pieces_.length;d++)o.push(u.pieces_[d]);if(s instanceof jr)for(let d=s.pieceNum_;d<s.pieces_.length;d++)o.push(s.pieces_[d]);else{const d=s.split("/");for(let _=0;_<d.length;_++)d[_].length>0&&o.push(d[_])}return new jr(o,0)}function wr(u){return u.pieceNum_>=u.pieces_.length}function ki(u,s){const o=Jn(u),d=Jn(s);if(null===o)return s;if(o===d)return ki(Wr(u),Wr(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+u+")")}function Ko(u,s){const o=Gs(u,0),d=Gs(s,0);for(let _=0;_<o.length&&_<d.length;_++){const D=On(o[_],d[_]);if(0!==D)return D}return o.length===d.length?0:o.length<d.length?-1:1}function Ms(u,s){if(_s(u)!==_s(s))return!1;for(let o=u.pieceNum_,d=s.pieceNum_;o<=u.pieces_.length;o++,d++)if(u.pieces_[o]!==s.pieces_[d])return!1;return!0}function Vi(u,s){let o=u.pieceNum_,d=s.pieceNum_;if(_s(u)>_s(s))return!1;for(;o<u.pieces_.length;){if(u.pieces_[o]!==s.pieces_[d])return!1;++o,++d}return!0}class Bs{constructor(s,o){this.errorPrefix_=o,this.parts_=Gs(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let d=0;d<this.parts_.length;d++)this.byteLength_+=(0,ie.ug)(this.parts_[d]);ia(this)}}function ia(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zr(u))}function zr(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Ea extends Bi{constructor(){let s,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const d=!document[s];d!==this.visible_&&(this.visible_=d,this.trigger("visible",d))},!1)}static getInstance(){return new Ea}getInitialEvent(s){return(0,ie.hu)("visible"===s,"Unknown event type: "+s),[this.visible_]}}const _i=1e3;let rs,Fo=(()=>{class u extends ms{constructor(o,d,_,D,M,G,te,de){if(super(),this.repoInfo_=o,this.applicationId_=d,this.onDataUpdate_=_,this.onConnectStatus_=D,this.onServerInfoUpdate_=M,this.authTokenProvider_=G,this.appCheckTokenProvider_=te,this.authOverride_=de,this.id=u.nextPersistentConnectionId_++,this.log_=Ar("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_i,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,de&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ea.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&Ma.getInstance().on("online",this.onOnline_,this)}sendRequest(o,d,_){const D=++this.requestNumber_,M={r:D,a:o,b:d};this.log_((0,ie.Wl)(M)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(M),_&&(this.requestCBHash_[D]=_)}get(o){this.initConnection_();const d=new ie.BH,_={p:o._path.toString(),q:o._queryObject};return this.outstandingGets_.push({action:"g",request:_,onComplete:G=>{const te=G.d;"ok"===G.s?d.resolve(te):d.reject(te)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),d.promise}listen(o,d,_,D){this.initConnection_();const M=o._queryIdentifier,G=o._path.toString();this.log_("Listen called for "+G+" "+M),this.listens.has(G)||this.listens.set(G,new Map),(0,ie.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(G).has(M),"listen() called twice for same path/queryId.");const te={onComplete:D,hashFn:d,query:o,tag:_};this.listens.get(G).set(M,te),this.connected_&&this.sendListen_(te)}sendGet_(o){const d=this.outstandingGets_[o];this.sendRequest("g",d.request,_=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),d.onComplete&&d.onComplete(_)})}sendListen_(o){const d=o.query,_=d._path.toString(),D=d._queryIdentifier;this.log_("Listen on "+_+" for "+D);const M={p:_};o.tag&&(M.q=d._queryObject,M.t=o.tag),M.h=o.hashFn(),this.sendRequest("q",M,te=>{const de=te.d,Xe=te.s;u.warnOnListenWarnings_(de,d),(this.listens.get(_)&&this.listens.get(_).get(D))===o&&(this.log_("listen response",te),"ok"!==Xe&&this.removeListen_(_,D),o.onComplete&&o.onComplete(Xe,de))})}static warnOnListenWarnings_(o,d){if(o&&"object"==typeof o&&(0,ie.r3)(o,"w")){const _=(0,ie.DV)(o,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const D='".indexOn": "'+d._queryParams.getIndex().toString()+'"',M=d._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${D} at ${M} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,ie.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,d=(0,ie.w9)(o)?"auth":"gauth",_={cred:o};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(d,_,D=>{const M=D.s,G=D.d||"error";this.authToken_===o&&("ok"===M?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(M,G))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const d=o.s,_=o.d||"error";"ok"===d?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(d,_)})}unlisten(o,d){const _=o._path.toString(),D=o._queryIdentifier;this.log_("Unlisten called for "+_+" "+D),(0,ie.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,D)&&this.connected_&&this.sendUnlisten_(_,D,o._queryObject,d)}sendUnlisten_(o,d,_,D){this.log_("Unlisten on "+o+" for "+d);const M={p:o};D&&(M.q=_,M.t=D),this.sendRequest("n",M)}onDisconnectPut(o,d,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,d,_):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:d,onComplete:_})}onDisconnectMerge(o,d,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,d,_):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:d,onComplete:_})}onDisconnectCancel(o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,d):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:d})}sendOnDisconnect_(o,d,_,D){const M={p:d,d:_};this.log_("onDisconnect "+o,M),this.sendRequest(o,M,G=>{D&&setTimeout(()=>{D(G.s,G.d)},Math.floor(0))})}put(o,d,_,D){this.putInternal("p",o,d,_,D)}merge(o,d,_,D){this.putInternal("m",o,d,_,D)}putInternal(o,d,_,D,M){this.initConnection_();const G={p:d,d:_};void 0!==M&&(G.h=M),this.outstandingPuts_.push({action:o,request:G,onComplete:D}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+d)}sendPut_(o){const d=this.outstandingPuts_[o].action,_=this.outstandingPuts_[o].request,D=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(d,_,M=>{this.log_(d+" response",M),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),D&&D(M.s,M.d)})}reportStats(o){if(this.connected_){const d={c:o};this.log_("reportStats",d),this.sendRequest("s",d,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,ie.Wl)(o));const d=o.r,_=this.requestCBHash_[d];_&&(delete this.requestCBHash_[d],_(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,d){this.log_("handleServerMessage",o,d),"d"===o?this.onDataUpdate_(d.p,d.d,!1,d.t):"m"===o?this.onDataUpdate_(d.p,d.d,!0,d.t):"c"===o?this.onListenRevoked_(d.p,d.q):"ac"===o?this.onAuthRevoked_(d.s,d.d):"apc"===o?this.onAppCheckRevoked_(d.s,d.d):"sd"===o?this.onSecurityDebugPacket_(d):Yr("Unrecognized action received from server: "+(0,ie.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_i),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let d=Math.max(0,this.reconnectDelay_-o);d=Math.random()*d,this.log_("Trying to reconnect in "+d+"ms"),this.scheduleConnect_(d),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,tn.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const d=o.onDataMessage_.bind(o),_=o.onReady_.bind(o),D=o.onRealtimeDisconnect_.bind(o),M=o.id+":"+u.nextConnectionId_++,G=o.lastSessionId;let te=!1,de=null;const Xe=function(){de?de.close():(te=!0,D())};o.realtime_={close:Xe,sendRequest:function(Gt){(0,ie.hu)(de,"sendRequest call when we're not connected not allowed."),de.sendRequest(Gt)}};const Dt=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[Gt,zt]=yield Promise.all([o.authTokenProvider_.getToken(Dt),o.appCheckTokenProvider_.getToken(Dt)]);te?Gn("getToken() completed but was canceled"):(Gn("getToken() completed. Creating connection."),o.authToken_=Gt&&Gt.accessToken,o.appCheckToken_=zt&&zt.token,de=new ho(M,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,d,_,D,Cn=>{Qn(Cn+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},G))}catch(Gt){o.log_("Failed to get token: "+Gt),te||(o.repoInfo_.nodeAdmin&&Qn(Gt),Xe())}}})()}interrupt(o){Gn("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){Gn("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const d=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:d})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const d=this.outstandingPuts_[o];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,d){let _;_=d?d.map(M=>kn(M)).join("$"):"default";const D=this.removeListen_(o,_);D&&D.onComplete&&D.onComplete("permission_denied")}removeListen_(o,d){const _=new jr(o).toString();let D;if(this.listens.has(_)){const M=this.listens.get(_);D=M.get(d),M.delete(d),0===M.size&&this.listens.delete(_)}else D=void 0;return D}onAuthRevoked_(o,d){Gn("Auth token revoked: "+o+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,d){Gn("App check token revoked: "+o+"/"+d),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const d of o.values())this.sendListen_(d);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let d="js";(0,ie.Yr)()&&(d=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+d+"."+Be.replace(/\./g,"-")]=1,(0,ie.uI)()?o["framework.cordova"]=1:(0,ie.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=Ma.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&o}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class or{constructor(s,o){this.name=s,this.node=o}static Wrap(s,o){return new or(s,o)}}class Es{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,o){const d=new or(En,s),_=new or(En,o);return 0!==this.compare(d,_)}minPost(){return or.MIN}}class Ui extends Es{static get __EMPTY_NODE(){return rs}static set __EMPTY_NODE(s){rs=s}compare(s,o){return On(s.name,o.name)}isDefinedOn(s){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,o){return!1}minPost(){return or.MIN}maxPost(){return new or(Pn,rs)}makePost(s,o){return(0,ie.hu)("string"==typeof s,"KeyIndex indexValue must always be a string."),new or(s,rs)}toString(){return".key"}}const ei=new Ui;class dr{constructor(s,o,d,_,D=null){this.isReverse_=_,this.resultGenerator_=D,this.nodeStack_=[];let M=1;for(;!s.isEmpty();)if(M=o?d(s.key,o):1,_&&(M*=-1),M<0)s=this.isReverse_?s.left:s.right;else{if(0===M){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,s=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}let ro,Ws=(()=>{class u{constructor(o,d,_,D,M){this.key=o,this.value=d,this.color=_??u.RED,this.left=D??ys.EMPTY_NODE,this.right=M??ys.EMPTY_NODE}copy(o,d,_,D,M){return new u(o??this.key,d??this.value,_??this.color,D??this.left,M??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,d,_){let D=this;const M=_(o,D.key);return D=M<0?D.copy(null,null,null,D.left.insert(o,d,_),null):0===M?D.copy(null,d,null,null,null):D.copy(null,null,null,null,D.right.insert(o,d,_)),D.fixUp_()}removeMin_(){if(this.left.isEmpty())return ys.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,d){let _,D;if(_=this,d(o,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(o,d),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===d(o,_.key)){if(_.right.isEmpty())return ys.EMPTY_NODE;D=_.right.min_(),_=_.copy(D.key,D.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(o,d))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,d)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class ys{constructor(s,o=ys.EMPTY_NODE){this.comparator_=s,this.root_=o}insert(s,o){return new ys(this.comparator_,this.root_.insert(s,o,this.comparator_).copy(null,null,Ws.BLACK,null,null))}remove(s){return new ys(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,Ws.BLACK,null,null))}get(s){let o,d=this.root_;for(;!d.isEmpty();){if(o=this.comparator_(s,d.key),0===o)return d.value;o<0?d=d.left:o>0&&(d=d.right)}return null}getPredecessorKey(s){let o,d=this.root_,_=null;for(;!d.isEmpty();){if(o=this.comparator_(s,d.key),0===o){if(d.left.isEmpty())return _?_.key:null;for(d=d.left;!d.right.isEmpty();)d=d.right;return d.key}o<0?d=d.left:o>0&&(_=d,d=d.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new dr(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,o){return new dr(this.root_,s,this.comparator_,!1,o)}getReverseIteratorFrom(s,o){return new dr(this.root_,s,this.comparator_,!0,o)}getReverseIterator(s){return new dr(this.root_,null,this.comparator_,!0,s)}}function ml(u,s){return On(u.name,s.name)}function fo(u,s){return On(u,s)}ys.EMPTY_NODE=new class sa{copy(s,o,d,_,D){return this}insert(s,o,d){return new Ws(s,o,null)}remove(s,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Da=function(u){return"number"==typeof u?"number:"+Si(u):"string:"+u},qt=function(u){if(u.isLeafNode()){const s=u.val();(0,ie.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,ie.r3)(s,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(u===ro||u.isEmpty(),"priority of unexpected type.");(0,ie.hu)(u===ro||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pr,Ta,cs,oa=(()=>{class u{constructor(o,d=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=d,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}static set __childrenNodeConstructor(o){pr=o}static get __childrenNodeConstructor(){return pr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new u(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return wr(o)?this:".priority"===Jn(o)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,d){return null}updateImmediateChild(o,d){return".priority"===o?this.updatePriority(d):d.isEmpty()&&".priority"!==o?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,d).updatePriority(this.priorityNode_)}updateChild(o,d){const _=Jn(o);return null===_?d:d.isEmpty()&&".priority"!==_?this:((0,ie.hu)(".priority"!==_||1===_s(o),".priority must be the last token in a path"),this.updateImmediateChild(_,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wr(o),d)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,d){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+Da(this.priorityNode_.val())+":");const d=typeof this.value_;o+=d+":",o+="number"===d?Si(this.value_):this.value_,this.lazyHash_=Kn(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===u.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof u.__childrenNodeConstructor?-1:((0,ie.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const d=typeof o.value_,_=typeof this.value_,D=u.VALUE_TYPE_ORDER.indexOf(d),M=u.VALUE_TYPE_ORDER.indexOf(_);return(0,ie.hu)(D>=0,"Unknown leaf type: "+d),(0,ie.hu)(M>=0,"Unknown leaf type: "+_),D===M?"object"===_?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:M-D}withIndex(){return this}isIndexed(){return!0}equals(o){if(o===this)return!0;if(o.isLeafNode()){const d=o;return this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const ue=new class j extends Es{compare(s,o){const d=s.node.getPriority(),_=o.node.getPriority(),D=d.compareTo(_);return 0===D?On(s.name,o.name):D}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,o){return!s.getPriority().equals(o.getPriority())}minPost(){return or.MIN}maxPost(){return new or(Pn,new oa("[PRIORITY-POST]",cs))}makePost(s,o){const d=Ta(s);return new or(o,new oa("[PRIORITY-POST]",d))}toString(){return".priority"}},kt=Math.log(2);class Y{constructor(s){this.count=parseInt(Math.log(s+1)/kt,10),this.current_=this.count-1;const _=(D=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=s+1&_}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const K=function(u,s,o,d){u.sort(s);const _=function(te,de){const Xe=de-te;let st,Dt;if(0===Xe)return null;if(1===Xe)return st=u[te],Dt=o?o(st):st,new Ws(Dt,st.node,Ws.BLACK,null,null);{const Gt=parseInt(Xe/2,10)+te,zt=_(te,Gt),Cn=_(Gt+1,de);return st=u[Gt],Dt=o?o(st):st,new Ws(Dt,st.node,Ws.BLACK,zt,Cn)}},G=function(te){let de=null,Xe=null,st=u.length;const Dt=function(zt,Cn){const Pr=st-zt,Nr=st;st-=zt;const bi=_(Pr+1,Nr),ws=u[Pr],_a=o?o(ws):ws;Gt(new Ws(_a,ws.node,Cn,null,bi))},Gt=function(zt){de?(de.left=zt,de=zt):(Xe=zt,de=zt)};for(let zt=0;zt<te.count;++zt){const Cn=te.nextBitIsOne(),Pr=Math.pow(2,te.count-(zt+1));Cn?Dt(Pr,Ws.BLACK):(Dt(Pr,Ws.BLACK),Dt(Pr,Ws.RED))}return Xe}(new Y(u.length));return new ys(d||s,G)};let fe;const Ie={};class He{constructor(s,o){this.indexes_=s,this.indexSet_=o}static get Default(){return(0,ie.hu)(Ie&&ue,"ChildrenNode.ts has not been loaded"),fe=fe||new He({".priority":Ie},{".priority":ue}),fe}get(s){const o=(0,ie.DV)(this.indexes_,s);if(!o)throw new Error("No index defined for "+s);return o instanceof ys?o:null}hasIndex(s){return(0,ie.r3)(this.indexSet_,s.toString())}addIndex(s,o){(0,ie.hu)(s!==ei,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const d=[];let _=!1;const D=o.getIterator(or.Wrap);let G,M=D.getNext();for(;M;)_=_||s.isDefinedOn(M.node),d.push(M),M=D.getNext();G=_?K(d,s.getCompare()):Ie;const te=s.toString(),de=Object.assign({},this.indexSet_);de[te]=s;const Xe=Object.assign({},this.indexes_);return Xe[te]=G,new He(Xe,de)}addToIndexes(s,o){const d=(0,ie.UI)(this.indexes_,(_,D)=>{const M=(0,ie.DV)(this.indexSet_,D);if((0,ie.hu)(M,"Missing index implementation for "+D),_===Ie){if(M.isDefinedOn(s.node)){const G=[],te=o.getIterator(or.Wrap);let de=te.getNext();for(;de;)de.name!==s.name&&G.push(de),de=te.getNext();return G.push(s),K(G,M.getCompare())}return Ie}{const G=o.get(s.name);let te=_;return G&&(te=te.remove(new or(s.name,G))),te.insert(s,s.node)}});return new He(d,this.indexSet_)}removeFromIndexes(s,o){const d=(0,ie.UI)(this.indexes_,_=>{if(_===Ie)return _;{const D=o.get(s.name);return D?_.remove(new or(s.name,D)):_}});return new He(d,this.indexSet_)}}let Ct,_t=(()=>{class u{constructor(o,d,_){this.children_=o,this.priorityNode_=d,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ct||(Ct=new u(new ys(fo),null,He.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ct}updatePriority(o){return this.children_.isEmpty()?this:new u(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const d=this.children_.get(o);return null===d?Ct:d}}getChild(o){const d=Jn(o);return null===d?this:this.getImmediateChild(d).getChild(Wr(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,d){if((0,ie.hu)(d,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(d);{const _=new or(o,d);let D,M;d.isEmpty()?(D=this.children_.remove(o),M=this.indexMap_.removeFromIndexes(_,this.children_)):(D=this.children_.insert(o,d),M=this.indexMap_.addToIndexes(_,this.children_));const G=D.isEmpty()?Ct:this.priorityNode_;return new u(D,G,M)}}updateChild(o,d){const _=Jn(o);if(null===_)return d;{(0,ie.hu)(".priority"!==Jn(o)||1===_s(o),".priority must be the last token in a path");const D=this.getImmediateChild(_).updateChild(Wr(o),d);return this.updateImmediateChild(_,D)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const d={};let _=0,D=0,M=!0;if(this.forEachChild(ue,(G,te)=>{d[G]=te.val(o),_++,M&&u.INTEGER_REGEXP_.test(G)?D=Math.max(D,Number(G)):M=!1}),!o&&M&&D<2*_){const G=[];for(const te in d)G[te]=d[te];return G}return o&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+Da(this.getPriority().val())+":"),this.forEachChild(ue,(d,_)=>{const D=_.hash();""!==D&&(o+=":"+d+":"+D)}),this.lazyHash_=""===o?"":Kn(o)}return this.lazyHash_}getPredecessorChildName(o,d,_){const D=this.resolveIndex_(_);if(D){const M=D.getPredecessorKey(new or(o,d));return M?M.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const d=this.resolveIndex_(o);if(d){const _=d.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(o){const d=this.getFirstChildName(o);return d?new or(d,this.children_.get(d)):null}getLastChildName(o){const d=this.resolveIndex_(o);if(d){const _=d.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(o){const d=this.getLastChildName(o);return d?new or(d,this.children_.get(d)):null}forEachChild(o,d){const _=this.resolveIndex_(o);return _?_.inorderTraversal(D=>d(D.name,D.node)):this.children_.inorderTraversal(d)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,d){const _=this.resolveIndex_(d);if(_)return _.getIteratorFrom(o,D=>D);{const D=this.children_.getIteratorFrom(o.name,or.Wrap);let M=D.peek();for(;null!=M&&d.compare(M,o)<0;)D.getNext(),M=D.peek();return D}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,d){const _=this.resolveIndex_(d);if(_)return _.getReverseIteratorFrom(o,D=>D);{const D=this.children_.getReverseIteratorFrom(o.name,or.Wrap);let M=D.peek();for(;null!=M&&d.compare(M,o)>0;)D.getNext(),M=D.peek();return D}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===Dn?-1:0}withIndex(o){if(o===ei||this.indexMap_.hasIndex(o))return this;{const d=this.indexMap_.addIndex(o,this.children_);return new u(this.children_,this.priorityNode_,d)}}isIndexed(o){return o===ei||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const d=o;if(this.getPriority().equals(d.getPriority())){if(this.children_.count()===d.children_.count()){const _=this.getIterator(ue),D=d.getIterator(ue);let M=_.getNext(),G=D.getNext();for(;M&&G;){if(M.name!==G.name||!M.node.equals(G.node))return!1;M=_.getNext(),G=D.getNext()}return null===M&&null===G}return!1}return!1}}resolveIndex_(o){return o===ei?null:this.indexMap_.get(o.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Dn=new class Vn extends _t{constructor(){super(new ys(fo),_t.EMPTY_NODE,He.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return _t.EMPTY_NODE}isEmpty(){return!1}};function qn(u,s=null){if(null===u)return _t.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(s=u[".priority"]),(0,ie.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new oa(u,qn(s));if(u instanceof Array){let o=_t.EMPTY_NODE;return gn(u,(d,_)=>{if((0,ie.r3)(u,d)&&"."!==d.substring(0,1)){const D=qn(_);(D.isLeafNode()||!D.isEmpty())&&(o=o.updateImmediateChild(d,D))}}),o.updatePriority(qn(s))}{const o=[];let d=!1;if(gn(u,(M,G)=>{if("."!==M.substring(0,1)){const te=qn(G);te.isEmpty()||(d=d||!te.getPriority().isEmpty(),o.push(new or(M,te)))}}),0===o.length)return _t.EMPTY_NODE;const D=K(o,ml,M=>M.name,fo);if(d){const M=K(o,ue.getCompare());return new _t(D,qn(s),new He({".priority":M},{".priority":ue}))}return new _t(D,qn(s),He.Default)}}Object.defineProperties(or,{MIN:{value:new or(En,_t.EMPTY_NODE)},MAX:{value:new or(Pn,Dn)}}),Ui.__EMPTY_NODE=_t.EMPTY_NODE,oa.__childrenNodeConstructor=_t,function Ka(u){ro=u}(Dn),function W(u){cs=u}(Dn),function Z(u){Ta=u}(qn);class $i extends Es{constructor(s){super(),this.indexPath_=s,(0,ie.hu)(!wr(s)&&".priority"!==Jn(s),"Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,o){const d=this.extractChild(s.node),_=this.extractChild(o.node),D=d.compareTo(_);return 0===D?On(s.name,o.name):D}makePost(s,o){const d=qn(s),_=_t.EMPTY_NODE.updateChild(this.indexPath_,d);return new or(o,_)}maxPost(){const s=_t.EMPTY_NODE.updateChild(this.indexPath_,Dn);return new or(Pn,s)}toString(){return Gs(this.indexPath_,0).join("/")}}const yi=new class Gi extends Es{compare(s,o){const d=s.node.compareTo(o.node);return 0===d?On(s.name,o.name):d}isDefinedOn(s){return!0}indexedValueChanged(s,o){return!s.equals(o)}minPost(){return or.MIN}maxPost(){return or.MAX}makePost(s,o){const d=qn(s);return new or(o,d)}toString(){return".value"}};function Ai(u){return{type:"value",snapshotNode:u}}function is(u,s){return{type:"child_added",snapshotNode:s,childName:u}}function qr(u,s){return{type:"child_removed",snapshotNode:s,childName:u}}function vs(u,s,o){return{type:"child_changed",snapshotNode:s,childName:u,oldSnap:o}}class Wi{constructor(s){this.index_=s}updateChild(s,o,d,_,D,M){(0,ie.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const G=s.getImmediateChild(o);return G.getChild(_).equals(d.getChild(_))&&G.isEmpty()===d.isEmpty()||(null!=M&&(d.isEmpty()?s.hasChild(o)?M.trackChildChange(qr(o,G)):(0,ie.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):G.isEmpty()?M.trackChildChange(is(o,d)):M.trackChildChange(vs(o,d,G))),s.isLeafNode()&&d.isEmpty())?s:s.updateImmediateChild(o,d).withIndex(this.index_)}updateFullNode(s,o,d){return null!=d&&(s.isLeafNode()||s.forEachChild(ue,(_,D)=>{o.hasChild(_)||d.trackChildChange(qr(_,D))}),o.isLeafNode()||o.forEachChild(ue,(_,D)=>{if(s.hasChild(_)){const M=s.getImmediateChild(_);M.equals(D)||d.trackChildChange(vs(_,D,M))}else d.trackChildChange(is(_,D))})),o.withIndex(this.index_)}updatePriority(s,o){return s.isEmpty()?_t.EMPTY_NODE:s.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class zi{constructor(s){this.indexedFilter_=new Wi(s.getIndex()),this.index_=s.getIndex(),this.startPost_=zi.getStartPost_(s),this.endPost_=zi.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,d=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return o&&d}updateChild(s,o,d,_,D,M){return this.matches(new or(o,d))||(d=_t.EMPTY_NODE),this.indexedFilter_.updateChild(s,o,d,_,D,M)}updateFullNode(s,o,d){o.isLeafNode()&&(o=_t.EMPTY_NODE);let _=o.withIndex(this.index_);_=_.updatePriority(_t.EMPTY_NODE);const D=this;return o.forEachChild(ue,(M,G)=>{D.matches(new or(M,G))||(_=_.updateImmediateChild(M,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,_,d)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const o=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),o)}return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const o=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),o)}return s.getIndex().maxPost()}}class Bo{constructor(s){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const d=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?d<=0:d<0},this.withinEndPost=o=>{const d=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?d<=0:d<0},this.rangedFilter_=new zi(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,o,d,_,D,M){return this.rangedFilter_.matches(new or(o,d))||(d=_t.EMPTY_NODE),s.getImmediateChild(o).equals(d)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,o,d,_,D,M):this.fullLimitUpdateChild_(s,o,d,D,M)}updateFullNode(s,o,d){let _;if(o.isLeafNode()||o.isEmpty())_=_t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let D;_=_t.EMPTY_NODE.withIndex(this.index_),D=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let M=0;for(;D.hasNext()&&M<this.limit_;){const G=D.getNext();if(this.withinDirectionalStart(G)){if(!this.withinDirectionalEnd(G))break;_=_.updateImmediateChild(G.name,G.node),M++}}}else{let D;_=o.withIndex(this.index_),_=_.updatePriority(_t.EMPTY_NODE),D=this.reverse_?_.getReverseIterator(this.index_):_.getIterator(this.index_);let M=0;for(;D.hasNext();){const G=D.getNext();M<this.limit_&&this.withinDirectionalStart(G)&&this.withinDirectionalEnd(G)?M++:_=_.updateImmediateChild(G.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,_,d)}updatePriority(s,o){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,o,d,_,D){let M;if(this.reverse_){const st=this.index_.getCompare();M=(Dt,Gt)=>st(Gt,Dt)}else M=this.index_.getCompare();const G=s;(0,ie.hu)(G.numChildren()===this.limit_,"");const te=new or(o,d),de=this.reverse_?G.getFirstChild(this.index_):G.getLastChild(this.index_),Xe=this.rangedFilter_.matches(te);if(G.hasChild(o)){const st=G.getImmediateChild(o);let Dt=_.getChildAfterChild(this.index_,de,this.reverse_);for(;null!=Dt&&(Dt.name===o||G.hasChild(Dt.name));)Dt=_.getChildAfterChild(this.index_,Dt,this.reverse_);const Gt=null==Dt?1:M(Dt,te);if(Xe&&!d.isEmpty()&&Gt>=0)return D?.trackChildChange(vs(o,d,st)),G.updateImmediateChild(o,d);{D?.trackChildChange(qr(o,st));const Cn=G.updateImmediateChild(o,_t.EMPTY_NODE);return null!=Dt&&this.rangedFilter_.matches(Dt)?(D?.trackChildChange(is(Dt.name,Dt.node)),Cn.updateImmediateChild(Dt.name,Dt.node)):Cn}}return d.isEmpty()?s:Xe&&M(de,te)>=0?(null!=D&&(D.trackChildChange(qr(de.name,de.node)),D.trackChildChange(is(o,d))),G.updateImmediateChild(o,d).updateImmediateChild(de.name,_t.EMPTY_NODE)):s}}class po{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ue}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:En}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ue}copy(){const s=new po;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function ce(u,s,o){const d=u.copy();return d.startSet_=!0,void 0===s&&(s=null),d.indexStartValue_=s,null!=o?(d.startNameSet_=!0,d.indexStartName_=o):(d.startNameSet_=!1,d.indexStartName_=""),d}function Tt(u,s,o){const d=u.copy();return d.endSet_=!0,void 0===s&&(s=null),d.indexEndValue_=s,void 0!==o?(d.endNameSet_=!0,d.indexEndName_=o):(d.endNameSet_=!1,d.indexEndName_=""),d}function Fn(u,s){const o=u.copy();return o.index_=s,o}function ai(u){const s={};if(u.isDefault())return s;let o;if(u.index_===ue?o="$priority":u.index_===yi?o="$value":u.index_===ei?o="$key":((0,ie.hu)(u.index_ instanceof $i,"Unrecognized index type!"),o=u.index_.toString()),s.orderBy=(0,ie.Wl)(o),u.startSet_){const d=u.startAfterSet_?"startAfter":"startAt";s[d]=(0,ie.Wl)(u.indexStartValue_),u.startNameSet_&&(s[d]+=","+(0,ie.Wl)(u.indexStartName_))}if(u.endSet_){const d=u.endBeforeSet_?"endBefore":"endAt";s[d]=(0,ie.Wl)(u.indexEndValue_),u.endNameSet_&&(s[d]+=","+(0,ie.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?s.limitToFirst=u.limit_:s.limitToLast=u.limit_),s}function hi(u){const s={};if(u.startSet_&&(s.sp=u.indexStartValue_,u.startNameSet_&&(s.sn=u.indexStartName_),s.sin=!u.startAfterSet_),u.endSet_&&(s.ep=u.indexEndValue_,u.endNameSet_&&(s.en=u.indexEndName_),s.ein=!u.endBeforeSet_),u.limitSet_){s.l=u.limit_;let o=u.viewFrom_;""===o&&(o=u.isViewFromLeft()?"l":"r"),s.vf=o}return u.index_!==ue&&(s.i=u.index_.toString()),s}class li extends ms{constructor(s,o,d,_){super(),this.repoInfo_=s,this.onDataUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=_,this.log_=Ar("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,o){return void 0!==o?"tag$"+o:((0,ie.hu)(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,o,d,_){const D=s._path.toString();this.log_("Listen called for "+D+" "+s._queryIdentifier);const M=li.getListenId_(s,d),G={};this.listens_[M]=G;const te=ai(s._queryParams);this.restRequest_(D+".json",te,(de,Xe)=>{let st=Xe;if(404===de&&(st=null,de=null),null===de&&this.onDataUpdate_(D,st,!1,d),(0,ie.DV)(this.listens_,M)===G){let Dt;Dt=de?401===de?"permission_denied":"rest_error:"+de:"ok",_(Dt,null)}})}unlisten(s,o){const d=li.getListenId_(s,o);delete this.listens_[d]}get(s){const o=ai(s._queryParams),d=s._path.toString(),_=new ie.BH;return this.restRequest_(d+".json",o,(D,M)=>{let G=M;404===D&&(G=null,D=null),null===D?(this.onDataUpdate_(d,G,!1,null),_.resolve(G)):_.reject(new Error(G))}),_.promise}refreshAuthToken(s){}restRequest_(s,o={},d){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,D])=>{_&&_.accessToken&&(o.auth=_.accessToken),D&&D.token&&(o.ac=D.token);const M=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(o);this.log_("Sending REST request for "+M);const G=new XMLHttpRequest;G.onreadystatechange=()=>{if(d&&4===G.readyState){this.log_("REST Response for "+M+" received. status:",G.status,"response:",G.responseText);let te=null;if(G.status>=200&&G.status<300){try{te=(0,ie.cI)(G.responseText)}catch{Qn("Failed to parse JSON response for "+M+": "+G.responseText)}d(null,te)}else 401!==G.status&&404!==G.status&&Qn("Got unsuccessful REST response for "+M+" Status: "+G.status),d(G.status);d=null}},G.open("GET",M,!0),G.send()})}}class Zr{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,o){this.rootNode_=this.rootNode_.updateChild(s,o)}}function ss(){return{value:null,children:new Map}}function fi(u,s,o){if(wr(s))u.value=o,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(s,o);else{const d=Jn(s);u.children.has(d)||u.children.set(d,ss()),fi(u.children.get(d),s=Wr(s),o)}}function Fi(u,s){if(wr(s))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const o=u.value;return u.value=null,o.forEachChild(ue,(d,_)=>{fi(u,new jr(d),_)}),Fi(u,s)}}if(u.children.size>0){const o=Jn(s);return s=Wr(s),u.children.has(o)&&Fi(u.children.get(o),s)&&u.children.delete(o),0===u.children.size}return!0}function aa(u,s,o){null!==u.value?o(s,u.value):function la(u,s){u.children.forEach((o,d)=>{s(d,o)})}(u,(d,_)=>{aa(_,new jr(s.toString()+"/"+d),o)})}class ua{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),o=Object.assign({},s);return this.last_&&gn(this.last_,(d,_)=>{o[d]=o[d]-_}),this.last_=s,o}}class Nl{constructor(s,o){this.server_=o,this.statsToReport_={},this.statsListener_=new ua(s);const d=1e4+2e4*Math.random();Fe(this.reportStats_.bind(this),Math.floor(d))}reportStats_(){const s=this.statsListener_.get(),o={};let d=!1;gn(s,(_,D)=>{D>0&&(0,ie.r3)(this.statsToReport_,_)&&(o[_]=D,d=!0)}),d&&this.server_.reportStats(o),Fe(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Yo=(()=>{return(u=Yo||(Yo={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Yo;var u})();function Pu(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class _l{constructor(s,o,d){this.path=s,this.affectedTree=o,this.revert=d,this.type=Yo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(s){if(wr(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new jr(s));return new _l(Mr(),o,this.revert)}}return(0,ie.hu)(Jn(this.path)===s,"operationForChild called for unrelated child."),new _l(Wr(this.path),this.affectedTree,this.revert)}}class ou{constructor(s,o){this.source=s,this.path=o,this.type=Yo.LISTEN_COMPLETE}operationForChild(s){return wr(this.path)?new ou(this.source,Mr()):new ou(this.source,Wr(this.path))}}class yl{constructor(s,o,d){this.source=s,this.path=o,this.snap=d,this.type=Yo.OVERWRITE}operationForChild(s){return wr(this.path)?new yl(this.source,Mr(),this.snap.getImmediateChild(s)):new yl(this.source,Wr(this.path),this.snap)}}class ca{constructor(s,o,d){this.source=s,this.path=o,this.children=d,this.type=Yo.MERGE}operationForChild(s){if(wr(this.path)){const o=this.children.subtree(new jr(s));return o.isEmpty()?null:o.value?new yl(this.source,Mr(),o.value):new ca(this.source,Mr(),o)}return(0,ie.hu)(Jn(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new ca(this.source,Wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Oa{constructor(s,o,d){this.node_=s,this.fullyInitialized_=o,this.filtered_=d}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(wr(s))return this.isFullyInitialized()&&!this.filtered_;const o=Jn(s);return this.isCompleteForChild(o)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}class pu{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function vl(u,s,o,d,_,D){const M=d.filter(G=>G.type===o);M.sort((G,te)=>function Ds(u,s,o){if(null==s.childName||null==o.childName)throw(0,ie.g5)("Should only compare child_ events.");const d=new or(s.childName,s.snapshotNode),_=new or(o.childName,o.snapshotNode);return u.index_.compare(d,_)}(u,G,te)),M.forEach(G=>{const te=function io(u,s,o){return"value"===s.type||"child_removed"===s.type||(s.prevName=o.getPredecessorChildName(s.childName,s.snapshotNode,u.index_)),s}(u,G,D);_.forEach(de=>{de.respondsTo(G.type)&&s.push(de.createEvent(te,u.query_))})})}function xa(u,s){return{eventCache:u,serverCache:s}}function Ca(u,s,o,d){return xa(new Oa(s,o,d),u.serverCache)}function mu(u,s,o,d){return xa(u.eventCache,new Oa(s,o,d))}function rn(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function Ki(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let ol;class dn{constructor(s,o=(()=>(ol||(ol=new ys(Lr)),ol))()){this.value=s,this.children=o}static fromObject(s){let o=new dn(null);return gn(s,(d,_)=>{o=o.set(new jr(d),_)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,o){if(null!=this.value&&o(this.value))return{path:Mr(),value:this.value};if(wr(s))return null;{const d=Jn(s),_=this.children.get(d);if(null!==_){const D=_.findRootMostMatchingPathAndValue(Wr(s),o);return null!=D?{path:kr(new jr(d),D.path),value:D.value}:null}return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(wr(s))return this;{const o=Jn(s),d=this.children.get(o);return null!==d?d.subtree(Wr(s)):new dn(null)}}set(s,o){if(wr(s))return new dn(o,this.children);{const d=Jn(s),D=(this.children.get(d)||new dn(null)).set(Wr(s),o),M=this.children.insert(d,D);return new dn(this.value,M)}}remove(s){if(wr(s))return this.children.isEmpty()?new dn(null):new dn(null,this.children);{const o=Jn(s),d=this.children.get(o);if(d){const _=d.remove(Wr(s));let D;return D=_.isEmpty()?this.children.remove(o):this.children.insert(o,_),null===this.value&&D.isEmpty()?new dn(null):new dn(this.value,D)}return this}}get(s){if(wr(s))return this.value;{const o=Jn(s),d=this.children.get(o);return d?d.get(Wr(s)):null}}setTree(s,o){if(wr(s))return o;{const d=Jn(s),D=(this.children.get(d)||new dn(null)).setTree(Wr(s),o);let M;return M=D.isEmpty()?this.children.remove(d):this.children.insert(d,D),new dn(this.value,M)}}fold(s){return this.fold_(Mr(),s)}fold_(s,o){const d={};return this.children.inorderTraversal((_,D)=>{d[_]=D.fold_(kr(s,_),o)}),o(s,this.value,d)}findOnPath(s,o){return this.findOnPath_(s,Mr(),o)}findOnPath_(s,o,d){const _=!!this.value&&d(o,this.value);if(_)return _;if(wr(s))return null;{const D=Jn(s),M=this.children.get(D);return M?M.findOnPath_(Wr(s),kr(o,D),d):null}}foreachOnPath(s,o){return this.foreachOnPath_(s,Mr(),o)}foreachOnPath_(s,o,d){if(wr(s))return this;{this.value&&d(o,this.value);const _=Jn(s),D=this.children.get(_);return D?D.foreachOnPath_(Wr(s),kr(o,_),d):new dn(null)}}foreach(s){this.foreach_(Mr(),s)}foreach_(s,o){this.children.inorderTraversal((d,_)=>{_.foreach_(kr(s,d),o)}),this.value&&o(s,this.value)}foreachChild(s){this.children.inorderTraversal((o,d)=>{d.value&&s(o,d.value)})}}class wn{constructor(s){this.writeTree_=s}static empty(){return new wn(new dn(null))}}function Pa(u,s,o){if(wr(s))return new wn(new dn(o));{const d=u.writeTree_.findRootMostValueAndPath(s);if(null!=d){const _=d.path;let D=d.value;const M=ki(_,s);return D=D.updateChild(M,o),new wn(u.writeTree_.set(_,D))}{const _=new dn(o),D=u.writeTree_.setTree(s,_);return new wn(D)}}}function yn(u,s,o){let d=u;return gn(o,(_,D)=>{d=Pa(d,kr(s,_),D)}),d}function Pt(u,s){if(wr(s))return wn.empty();{const o=u.writeTree_.setTree(s,new dn(null));return new wn(o)}}function Zt(u,s){return null!=ui(u,s)}function ui(u,s){const o=u.writeTree_.findRootMostValueAndPath(s);return null!=o?u.writeTree_.get(o.path).getChild(ki(o.path,s)):null}function Ya(u){const s=[],o=u.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(ue,(d,_)=>{s.push(new or(d,_))}):u.writeTree_.children.inorderTraversal((d,_)=>{null!=_.value&&s.push(new or(d,_.value))}),s}function bo(u,s){if(wr(s))return u;{const o=ui(u,s);return new wn(null!=o?new dn(o):u.writeTree_.subtree(s))}}function bl(u){return u.writeTree_.isEmpty()}function Za(u,s){return wl(Mr(),u.writeTree_,s)}function wl(u,s,o){if(null!=s.value)return o.updateChild(u,s.value);{let d=null;return s.children.inorderTraversal((_,D)=>{".priority"===_?((0,ie.hu)(null!==D.value,"Priority writes must always be leaf nodes"),d=D.value):o=wl(kr(u,_),D,o)}),!o.getChild(u).isEmpty()&&null!==d&&(o=o.updateChild(kr(u,".priority"),d)),o}}function zs(u,s){return Lu(s,u)}function El(u,s){if(u.snap)return Vi(u.path,s);for(const o in u.children)if(u.children.hasOwnProperty(o)&&Vi(kr(u.path,o),s))return!0;return!1}function da(u){return u.visible}function Fu(u,s,o){let d=wn.empty();for(let _=0;_<u.length;++_){const D=u[_];if(s(D)){const M=D.path;let G;if(D.snap)Vi(o,M)?(G=ki(o,M),d=Pa(d,G,D.snap)):Vi(M,o)&&(G=ki(M,o),d=Pa(d,Mr(),D.snap.getChild(G)));else{if(!D.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(Vi(o,M))G=ki(o,M),d=yn(d,G,D.children);else if(Vi(M,o))if(G=ki(M,o),wr(G))d=yn(d,Mr(),D.children);else{const te=(0,ie.DV)(D.children,Jn(G));if(te){const de=te.getChild(Wr(G));d=Pa(d,Mr(),de)}}}}}return d}function Qi(u,s,o,d,_){if(d||_){const D=bo(u.visibleWrites,s);return!_&&bl(D)?o:_||null!=o||Zt(D,Mr())?Za(Fu(u.allWrites,function(de){return(de.visible||_)&&(!d||!~d.indexOf(de.writeId))&&(Vi(de.path,s)||Vi(s,de.path))},s),o||_t.EMPTY_NODE):null}{const D=ui(u.visibleWrites,s);if(null!=D)return D;{const M=bo(u.visibleWrites,s);return bl(M)?o:null!=o||Zt(M,Mr())?Za(M,o||_t.EMPTY_NODE):null}}}function so(u,s,o,d){return Qi(u.writeTree,u.treePath,s,o,d)}function Zo(u,s){return function Mn(u,s,o){let d=_t.EMPTY_NODE;const _=ui(u.visibleWrites,s);if(_)return _.isLeafNode()||_.forEachChild(ue,(D,M)=>{d=d.updateImmediateChild(D,M)}),d;if(o){const D=bo(u.visibleWrites,s);return o.forEachChild(ue,(M,G)=>{const te=Za(bo(D,new jr(M)),G);d=d.updateImmediateChild(M,te)}),Ya(D).forEach(M=>{d=d.updateImmediateChild(M.name,M.node)}),d}return Ya(bo(u.visibleWrites,s)).forEach(M=>{d=d.updateImmediateChild(M.name,M.node)}),d}(u.writeTree,u.treePath,s)}function Fa(u,s,o,d){return function Rl(u,s,o,d,_){(0,ie.hu)(d||_,"Either existingEventSnap or existingServerSnap must exist");const D=kr(s,o);if(Zt(u.visibleWrites,D))return null;{const M=bo(u.visibleWrites,D);return bl(M)?_.getChild(o):Za(M,_.getChild(o))}}(u.writeTree,u.treePath,s,o,d)}function Ia(u,s){return function Ml(u,s){return ui(u.visibleWrites,s)}(u.writeTree,kr(u.treePath,s))}function Ol(u,s,o){return function ti(u,s,o,d){const _=kr(s,o),D=ui(u.visibleWrites,_);return null!=D?D:d.isCompleteForChild(o)?Za(bo(u.visibleWrites,_),d.getNode().getImmediateChild(o)):null}(u.writeTree,u.treePath,s,o)}function Mi(u,s){return Lu(kr(u.treePath,s),u.writeTree)}function Lu(u,s){return{treePath:u,writeTree:s}}class pc{constructor(){this.changeMap=new Map}trackChildChange(s){const o=s.type,d=s.childName;(0,ie.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==d,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(d);if(_){const D=_.type;if("child_added"===o&&"child_removed"===D)this.changeMap.set(d,vs(d,s.snapshotNode,_.snapshotNode));else if("child_removed"===o&&"child_added"===D)this.changeMap.delete(d);else if("child_removed"===o&&"child_changed"===D)this.changeMap.set(d,qr(d,_.oldSnap));else if("child_changed"===o&&"child_added"===D)this.changeMap.set(d,is(d,s.snapshotNode));else{if("child_changed"!==o||"child_changed"!==D)throw(0,ie.g5)("Illegal combination of changes: "+s+" occurred after "+_);this.changeMap.set(d,vs(d,s.snapshotNode,_.oldSnap))}}else this.changeMap.set(d,s)}getChanges(){return Array.from(this.changeMap.values())}}const gc=new class ha{getCompleteChild(s){return null}getChildAfterChild(s,o,d){return null}};class qc{constructor(s,o,d=null){this.writes_=s,this.viewCache_=o,this.optCompleteServerCache_=d}getCompleteChild(s){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(s))return o.getNode().getImmediateChild(s);{const d=null!=this.optCompleteServerCache_?new Oa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ol(this.writes_,s,d)}}getChildAfterChild(s,o,d){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ki(this.viewCache_),D=function wo(u,s,o,d,_,D){return function Qr(u,s,o,d,_,D,M){let G;const te=bo(u.visibleWrites,s),de=ui(te,Mr());if(null!=de)G=de;else{if(null==o)return[];G=Za(te,o)}if(G=G.withIndex(M),G.isEmpty()||G.isLeafNode())return[];{const Xe=[],st=M.getCompare(),Dt=D?G.getReverseIteratorFrom(d,M):G.getIteratorFrom(d,M);let Gt=Dt.getNext();for(;Gt&&Xe.length<_;)0!==st(Gt,d)&&Xe.push(Gt),Gt=Dt.getNext();return Xe}}(u.writeTree,u.treePath,s,o,d,_,D)}(this.writes_,_,o,1,d,s);return 0===D.length?null:D[0]}}function Pl(u,s,o,d,_,D){const M=s.eventCache;if(null!=Ia(d,o))return s;{let G,te;if(wr(o))if((0,ie.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const de=Ki(s),st=Zo(d,de instanceof _t?de:_t.EMPTY_NODE);G=u.filter.updateFullNode(s.eventCache.getNode(),st,D)}else{const de=so(d,Ki(s));G=u.filter.updateFullNode(s.eventCache.getNode(),de,D)}else{const de=Jn(o);if(".priority"===de){(0,ie.hu)(1===_s(o),"Can't have a priority with additional path components");const Xe=M.getNode();te=s.serverCache.getNode();const st=Fa(d,o,Xe,te);G=null!=st?u.filter.updatePriority(Xe,st):M.getNode()}else{const Xe=Wr(o);let st;if(M.isCompleteForChild(de)){te=s.serverCache.getNode();const Dt=Fa(d,o,M.getNode(),te);st=null!=Dt?M.getNode().getImmediateChild(de).updateChild(Xe,Dt):M.getNode().getImmediateChild(de)}else st=Ol(d,de,s.serverCache);G=null!=st?u.filter.updateChild(M.getNode(),de,st,Xe,_,D):M.getNode()}}return Ca(s,G,M.isFullyInitialized()||wr(o),u.filter.filtersNodes())}}function Ti(u,s,o,d,_,D,M,G){const te=s.serverCache;let de;const Xe=M?u.filter:u.filter.getIndexedFilter();if(wr(o))de=Xe.updateFullNode(te.getNode(),d,null);else if(Xe.filtersNodes()&&!te.isFiltered()){const Gt=te.getNode().updateChild(o,d);de=Xe.updateFullNode(te.getNode(),Gt,null)}else{const Gt=Jn(o);if(!te.isCompleteForPath(o)&&_s(o)>1)return s;const zt=Wr(o),Pr=te.getNode().getImmediateChild(Gt).updateChild(zt,d);de=".priority"===Gt?Xe.updatePriority(te.getNode(),Pr):Xe.updateChild(te.getNode(),Gt,Pr,zt,gc,null)}const st=mu(s,de,te.isFullyInitialized()||wr(o),Xe.filtersNodes());return Pl(u,st,o,_,new qc(_,st,D),G)}function kl(u,s,o,d,_,D,M){const G=s.eventCache;let te,de;const Xe=new qc(_,s,D);if(wr(o))de=u.filter.updateFullNode(s.eventCache.getNode(),d,M),te=Ca(s,de,!0,u.filter.filtersNodes());else{const st=Jn(o);if(".priority"===st)de=u.filter.updatePriority(s.eventCache.getNode(),d),te=Ca(s,de,G.isFullyInitialized(),G.isFiltered());else{const Dt=Wr(o),Gt=G.getNode().getImmediateChild(st);let zt;if(wr(Dt))zt=d;else{const Cn=Xe.getCompleteChild(st);zt=null!=Cn?".priority"===Ys(Dt)&&Cn.getChild(yo(Dt)).isEmpty()?Cn:Cn.updateChild(Dt,d):_t.EMPTY_NODE}te=Gt.equals(zt)?s:Ca(s,u.filter.updateChild(G.getNode(),st,zt,Dt,Xe,M),G.isFullyInitialized(),u.filter.filtersNodes())}}return te}function al(u,s){return u.eventCache.isCompleteForChild(s)}function Bu(u,s,o){return o.foreach((d,_)=>{s=s.updateChild(d,_)}),s}function Ts(u,s,o,d,_,D,M,G){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let de,te=s;de=wr(o)?d:new dn(null).setTree(o,d);const Xe=s.serverCache.getNode();return de.children.inorderTraversal((st,Dt)=>{if(Xe.hasChild(st)){const zt=Bu(0,s.serverCache.getNode().getImmediateChild(st),Dt);te=Ti(u,te,new jr(st),zt,_,D,M,G)}}),de.children.inorderTraversal((st,Dt)=>{const Gt=!s.serverCache.isCompleteForChild(st)&&null===Dt.value;if(!Xe.hasChild(st)&&!Gt){const Cn=Bu(0,s.serverCache.getNode().getImmediateChild(st),Dt);te=Ti(u,te,new jr(st),Cn,_,D,M,G)}}),te}class A{constructor(s,o){this.query_=s,this.eventRegistrations_=[];const d=this.query_._queryParams,_=new Wi(d.getIndex()),D=function F(u){return u.loadsAllData()?new Wi(u.getIndex()):u.hasLimit()?new Bo(u):new zi(u)}(d);this.processor_=function au(u){return{filter:u}}(D);const M=o.serverCache,G=o.eventCache,te=_.updateFullNode(_t.EMPTY_NODE,M.getNode(),null),de=D.updateFullNode(_t.EMPTY_NODE,G.getNode(),null),Xe=new Oa(te,M.isFullyInitialized(),_.filtersNodes()),st=new Oa(de,G.isFullyInitialized(),D.filtersNodes());this.viewCache_=xa(st,Xe),this.eventGenerator_=new pu(this.query_)}get query(){return this.query_}}function B(u,s){const o=Ki(u.viewCache_);return o&&(u.query._queryParams.loadsAllData()||!wr(s)&&!o.getImmediateChild(Jn(s)).isEmpty())?o.getChild(s):null}function z(u){return 0===u.eventRegistrations_.length}function Ne(u,s,o){const d=[];if(o){(0,ie.hu)(null==s,"A cancel should cancel all event registrations.");const _=u.query._path;u.eventRegistrations_.forEach(D=>{const M=D.createCancelEvent(o,_);M&&d.push(M)})}if(s){let _=[];for(let D=0;D<u.eventRegistrations_.length;++D){const M=u.eventRegistrations_[D];if(M.matches(s)){if(s.hasAnyCallback()){_=_.concat(u.eventRegistrations_.slice(D+1));break}}else _.push(M)}u.eventRegistrations_=_}else u.eventRegistrations_=[];return d}function xe(u,s,o,d){s.type===Yo.MERGE&&null!==s.source.queryId&&((0,ie.hu)(Ki(u.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(rn(u.viewCache_),"Missing event cache, even though we have a server cache"));const _=u.viewCache_,D=function Vo(u,s,o,d,_){const D=new pc;let M,G;if(o.type===Yo.OVERWRITE){const de=o;de.source.fromUser?M=kl(u,s,de.path,de.snap,d,_,D):((0,ie.hu)(de.source.fromServer,"Unknown source."),G=de.source.tagged||s.serverCache.isFiltered()&&!wr(de.path),M=Ti(u,s,de.path,de.snap,d,_,G,D))}else if(o.type===Yo.MERGE){const de=o;de.source.fromUser?M=function Ja(u,s,o,d,_,D,M){let G=s;return d.foreach((te,de)=>{const Xe=kr(o,te);al(s,Jn(Xe))&&(G=kl(u,G,Xe,de,_,D,M))}),d.foreach((te,de)=>{const Xe=kr(o,te);al(s,Jn(Xe))||(G=kl(u,G,Xe,de,_,D,M))}),G}(u,s,de.path,de.children,d,_,D):((0,ie.hu)(de.source.fromServer,"Unknown source."),G=de.source.tagged||s.serverCache.isFiltered(),M=Ts(u,s,de.path,de.children,d,_,G,D))}else if(o.type===Yo.ACK_USER_WRITE){const de=o;M=de.revert?function lu(u,s,o,d,_,D){let M;if(null!=Ia(d,o))return s;{const G=new qc(d,s,_),te=s.eventCache.getNode();let de;if(wr(o)||".priority"===Jn(o)){let Xe;if(s.serverCache.isFullyInitialized())Xe=so(d,Ki(s));else{const st=s.serverCache.getNode();(0,ie.hu)(st instanceof _t,"serverChildren would be complete if leaf node"),Xe=Zo(d,st)}de=u.filter.updateFullNode(te,Xe,D)}else{const Xe=Jn(o);let st=Ol(d,Xe,s.serverCache);null==st&&s.serverCache.isCompleteForChild(Xe)&&(st=te.getImmediateChild(Xe)),de=null!=st?u.filter.updateChild(te,Xe,st,Wr(o),G,D):s.eventCache.getNode().hasChild(Xe)?u.filter.updateChild(te,Xe,_t.EMPTY_NODE,Wr(o),G,D):te,de.isEmpty()&&s.serverCache.isFullyInitialized()&&(M=so(d,Ki(s)),M.isLeafNode()&&(de=u.filter.updateFullNode(de,M,D)))}return M=s.serverCache.isFullyInitialized()||null!=Ia(d,Mr()),Ca(s,de,M,u.filter.filtersNodes())}}(u,s,de.path,d,_,D):function La(u,s,o,d,_,D,M){if(null!=Ia(_,o))return s;const G=s.serverCache.isFiltered(),te=s.serverCache;if(null!=d.value){if(wr(o)&&te.isFullyInitialized()||te.isCompleteForPath(o))return Ti(u,s,o,te.getNode().getChild(o),_,D,G,M);if(wr(o)){let de=new dn(null);return te.getNode().forEachChild(ei,(Xe,st)=>{de=de.set(new jr(Xe),st)}),Ts(u,s,o,de,_,D,G,M)}return s}{let de=new dn(null);return d.foreach((Xe,st)=>{const Dt=kr(o,Xe);te.isCompleteForPath(Dt)&&(de=de.set(Xe,te.getNode().getChild(Dt)))}),Ts(u,s,o,de,_,D,G,M)}}(u,s,de.path,de.affectedTree,d,_,D)}else{if(o.type!==Yo.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+o.type);M=function Sa(u,s,o,d,_){const D=s.serverCache;return Pl(u,mu(s,D.getNode(),D.isFullyInitialized()||wr(o),D.isFiltered()),o,d,gc,_)}(u,s,o.path,d,D)}const te=D.getChanges();return function Ot(u,s,o){const d=s.eventCache;if(d.isFullyInitialized()){const _=d.getNode().isLeafNode()||d.getNode().isEmpty(),D=rn(u);(o.length>0||!u.eventCache.isFullyInitialized()||_&&!d.getNode().equals(D)||!d.getNode().getPriority().equals(D.getPriority()))&&o.push(Ai(rn(s)))}}(s,M,te),{viewCache:M,changes:te}}(u.processor_,_,s,o,d);return function xl(u,s){(0,ie.hu)(s.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(s.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,D.viewCache),(0,ie.hu)(D.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=D.viewCache,fn(u,D.changes,D.viewCache.eventCache.getNode(),null)}function fn(u,s,o,d){return function gu(u,s,o,d){const _=[],D=[];return s.forEach(M=>{"child_changed"===M.type&&u.index_.indexedValueChanged(M.oldSnap,M.snapshotNode)&&D.push(function Lo(u,s){return{type:"child_moved",snapshotNode:s,childName:u}}(M.childName,M.snapshotNode))}),vl(u,_,"child_removed",s,d,o),vl(u,_,"child_added",s,d,o),vl(u,_,"child_moved",D,d,o),vl(u,_,"child_changed",s,d,o),vl(u,_,"value",s,d,o),_}(u.eventGenerator_,s,o,d?[d]:u.eventRegistrations_)}let Or,uu;class _n{constructor(){this.views=new Map}}function Uo(u,s,o,d){const _=s.source.queryId;if(null!==_){const D=u.views.get(_);return(0,ie.hu)(null!=D,"SyncTree gave us an op for an invalid query."),xe(D,s,o,d)}{let D=[];for(const M of u.views.values())D=D.concat(xe(M,s,o,d));return D}}function fa(u,s,o,d,_){const M=u.views.get(s._queryIdentifier);if(!M){let G=so(o,_?d:null),te=!1;G?te=!0:d instanceof _t?(G=Zo(o,d),te=!1):(G=_t.EMPTY_NODE,te=!1);const de=xa(new Oa(G,te,!1),new Oa(d,_,!1));return new A(s,de)}return M}function Ba(u){const s=[];for(const o of u.views.values())o.query._queryParams.loadsAllData()||s.push(o);return s}function Ao(u,s){let o=null;for(const d of u.views.values())o=o||B(d,s);return o}function Xa(u,s){return s._queryParams.loadsAllData()?No(u):u.views.get(s._queryIdentifier)}function Va(u,s){return null!=Xa(u,s)}function Qo(u){return null!=No(u)}function No(u){for(const s of u.views.values())if(s.query._queryParams.loadsAllData())return s;return null}let Dl=1;class Tl{constructor(s){this.listenProvider_=s,this.syncPointTree_=new dn(null),this.pendingWriteTree_=function vn(){return{visibleWrites:wn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yu(u,s,o,d,_){return function Wl(u,s,o,d,_){(0,ie.hu)(d>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),u.allWrites.push({path:s,snap:o,writeId:d,visible:_}),_&&(u.visibleWrites=Pa(u.visibleWrites,s,o)),u.lastWriteId=d}(u.pendingWriteTree_,s,o,d,_),_?$r(u,new yl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,o)):[]}function Cl(u,s,o=!1){const d=function Qa(u,s){for(let o=0;o<u.allWrites.length;o++){const d=u.allWrites[o];if(d.writeId===s)return d}return null}(u.pendingWriteTree_,s);if(function ku(u,s){const o=u.allWrites.findIndex(G=>G.writeId===s);(0,ie.hu)(o>=0,"removeWrite called with nonexistent writeId.");const d=u.allWrites[o];u.allWrites.splice(o,1);let _=d.visible,D=!1,M=u.allWrites.length-1;for(;_&&M>=0;){const G=u.allWrites[M];G.visible&&(M>=o&&El(G,d.path)?_=!1:Vi(d.path,G.path)&&(D=!0)),M--}return!!_&&(D?(function _r(u){u.visibleWrites=Fu(u.allWrites,da,Mr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(d.snap?u.visibleWrites=Pt(u.visibleWrites,d.path):gn(d.children,te=>{u.visibleWrites=Pt(u.visibleWrites,kr(d.path,te))}),!0))}(u.pendingWriteTree_,s)){let D=new dn(null);return null!=d.snap?D=D.set(Mr(),!0):gn(d.children,M=>{D=D.set(new jr(M),!0)}),$r(u,new _l(d.path,D,o))}return[]}function H(u,s,o){return $r(u,new yl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,o))}function pt(u,s,o,d,_=!1){const D=s._path,M=u.syncPointTree_.get(D);let G=[];if(M&&("default"===s._queryIdentifier||Va(M,s))){const te=function Aa(u,s,o,d){const _=s._queryIdentifier,D=[];let M=[];const G=Qo(u);if("default"===_)for(const[te,de]of u.views.entries())M=M.concat(Ne(de,o,d)),z(de)&&(u.views.delete(te),de.query._queryParams.loadsAllData()||D.push(de.query));else{const te=u.views.get(_);te&&(M=M.concat(Ne(te,o,d)),z(te)&&(u.views.delete(_),te.query._queryParams.loadsAllData()||D.push(te.query)))}return G&&!Qo(u)&&D.push(new(function Cs(){return(0,ie.hu)(Or,"Reference.ts has not been loaded"),Or}())(s._repo,s._path)),{removed:D,events:M}}(M,s,o,d);(function Li(u){return 0===u.views.size})(M)&&(u.syncPointTree_=u.syncPointTree_.remove(D));const de=te.removed;if(G=te.events,!_){const Xe=-1!==de.findIndex(Dt=>Dt._queryParams.loadsAllData()),st=u.syncPointTree_.findOnPath(D,(Dt,Gt)=>Qo(Gt));if(Xe&&!st){const Dt=u.syncPointTree_.subtree(D);if(!Dt.isEmpty()){const Gt=function Yc(u){return u.fold((s,o,d)=>{if(o&&Qo(o))return[No(o)];{let _=[];return o&&(_=Ba(o)),gn(d,(D,M)=>{_=_.concat(M)}),_}})}(Dt);for(let zt=0;zt<Gt.length;++zt){const Cn=Gt[zt],Pr=Cn.query,Nr=ds(u,Cn);u.listenProvider_.startListening(Zc(Pr),el(u,Pr),Nr.hashFn,Nr.onComplete)}}}!st&&de.length>0&&!d&&(Xe?u.listenProvider_.stopListening(Zc(s),null):de.forEach(Dt=>{const Gt=u.queryToTagMap.get(zl(Dt));u.listenProvider_.stopListening(Zc(Dt),Gt)}))}!function Fh(u,s){for(let o=0;o<s.length;++o){const d=s[o];if(!d._queryParams.loadsAllData()){const _=zl(d),D=u.queryToTagMap.get(_);u.queryToTagMap.delete(_),u.tagToQueryMap.delete(D)}}}(u,de)}return G}function Rt(u,s,o,d){const _=Kl(u,d);if(null!=_){const D=go(_),M=D.path,G=D.queryId,te=ki(M,s);return Ho(u,M,new yl(Pu(G),te,o))}return[]}function Sn(u,s,o,d=!1){const _=s._path;let D=null,M=!1;u.syncPointTree_.foreachOnPath(_,(Dt,Gt)=>{const zt=ki(Dt,_);D=D||Ao(Gt,zt),M=M||Qo(Gt)});let te,G=u.syncPointTree_.get(_);G?(M=M||Qo(G),D=D||Ao(G,Mr())):(G=new _n,u.syncPointTree_=u.syncPointTree_.set(_,G)),null!=D?te=!0:(te=!1,D=_t.EMPTY_NODE,u.syncPointTree_.subtree(_).foreachChild((Gt,zt)=>{const Cn=Ao(zt,Mr());Cn&&(D=D.updateImmediateChild(Gt,Cn))}));const de=Va(G,s);if(!de&&!s._queryParams.loadsAllData()){const Dt=zl(s);(0,ie.hu)(!u.queryToTagMap.has(Dt),"View does not exist, but we have a tag");const Gt=function sh(){return Dl++}();u.queryToTagMap.set(Dt,Gt),u.tagToQueryMap.set(Gt,Dt)}let st=function _u(u,s,o,d,_,D){const M=fa(u,s,d,_,D);return u.views.has(s._queryIdentifier)||u.views.set(s._queryIdentifier,M),function le(u,s){u.eventRegistrations_.push(s)}(M,o),function Ft(u,s){const o=u.viewCache_.eventCache,d=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(ue,(D,M)=>{d.push(is(D,M))}),o.isFullyInitialized()&&d.push(Ai(o.getNode())),fn(u,d,o.getNode(),s)}(M,o)}(G,s,o,zs(u.pendingWriteTree_,_),D,te);if(!de&&!M&&!d){const Dt=Xa(G,s);st=st.concat(function Xf(u,s,o){const d=s._path,_=el(u,s),D=ds(u,o),M=u.listenProvider_.startListening(Zc(s),_,D.hashFn,D.onComplete),G=u.syncPointTree_.subtree(d);if(_)(0,ie.hu)(!Qo(G.value),"If we're adding a query, it shouldn't be shadowed");else{const te=G.fold((de,Xe,st)=>{if(!wr(de)&&Xe&&Qo(Xe))return[No(Xe).query];{let Dt=[];return Xe&&(Dt=Dt.concat(Ba(Xe).map(Gt=>Gt.query))),gn(st,(Gt,zt)=>{Dt=Dt.concat(zt)}),Dt}});for(let de=0;de<te.length;++de){const Xe=te[de];u.listenProvider_.stopListening(Zc(Xe),el(u,Xe))}}return M}(u,s,Dt))}return st}function er(u,s,o){const _=u.pendingWriteTree_,D=u.syncPointTree_.findOnPath(s,(M,G)=>{const de=Ao(G,ki(M,s));if(de)return de});return Qi(_,s,D,o,!0)}function $r(u,s){return Tn(s,u.syncPointTree_,null,zs(u.pendingWriteTree_,Mr()))}function Tn(u,s,o,d){if(wr(u.path))return xr(u,s,o,d);{const _=s.get(Mr());null==o&&null!=_&&(o=Ao(_,Mr()));let D=[];const M=Jn(u.path),G=u.operationForChild(M),te=s.children.get(M);if(te&&G){const de=o?o.getImmediateChild(M):null,Xe=Mi(d,M);D=D.concat(Tn(G,te,de,Xe))}return _&&(D=D.concat(Uo(_,u,d,o))),D}}function xr(u,s,o,d){const _=s.get(Mr());null==o&&null!=_&&(o=Ao(_,Mr()));let D=[];return s.children.inorderTraversal((M,G)=>{const te=o?o.getImmediateChild(M):null,de=Mi(d,M),Xe=u.operationForChild(M);Xe&&(D=D.concat(xr(Xe,G,te,de)))}),_&&(D=D.concat(Uo(_,u,d,o))),D}function ds(u,s){const o=s.query,d=el(u,o);return{hashFn:()=>(function R(u){return u.viewCache_.serverCache.getNode()}(s)||_t.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return d?function ke(u,s,o){const d=Kl(u,o);if(d){const _=go(d),D=_.path,M=_.queryId,G=ki(D,s);return Ho(u,D,new ou(Pu(M),G))}return[]}(u,o._path,d):function se(u,s){return $r(u,new ou({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(u,o._path);{const D=function Rr(u,s){let o="Unknown Error";"too_big"===u?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?o="Client doesn't have permission to access the desired data.":"unavailable"===u&&(o="The service is unavailable");const d=new Error(u+" at "+s._path.toString()+": "+o);return d.code=u.toUpperCase(),d}(_,o);return pt(u,o,null,D)}}}}function el(u,s){const o=zl(s);return u.queryToTagMap.get(o)}function zl(u){return u._path.toString()+"$"+u._queryIdentifier}function Kl(u,s){return u.tagToQueryMap.get(s)}function go(u){const s=u.indexOf("$");return(0,ie.hu)(-1!==s&&s<u.length-1,"Bad queryKey."),{queryId:u.substr(s+1),path:new jr(u.substr(0,s))}}function Ho(u,s,o){const d=u.syncPointTree_.get(s);return(0,ie.hu)(d,"Missing sync point for query tag that we're tracking"),Uo(d,o,zs(u.pendingWriteTree_,s),null)}function Zc(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function mc(){return(0,ie.hu)(uu,"Reference.ts has not been loaded"),uu}())(u._repo,u._path):u}class vd{constructor(s){this.node_=s}getImmediateChild(s){const o=this.node_.getImmediateChild(s);return new vd(o)}node(){return this.node_}}class bd{constructor(s,o){this.syncTree_=s,this.path_=o}getImmediateChild(s){const o=kr(this.path_,s);return new bd(this.syncTree_,o)}node(){return er(this.syncTree_,this.path_)}}const cu=function(u,s,o){return u&&"object"==typeof u?((0,ie.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?oh(u[".sv"],s,o):"object"==typeof u[".sv"]?_c(u[".sv"],s):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},oh=function(u,s,o){if("timestamp"===u)return o.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+u)},_c=function(u,s,o){u.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const d=u.increment;"number"!=typeof d&&(0,ie.hu)(!1,"Unexpected increment value: "+d);const _=s.node();if((0,ie.hu)(null!==_&&typeof _<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return d;const M=_.getValue();return"number"!=typeof M?d:M+d},Bh=function(u,s,o,d){return yc(s,new bd(o,u),d)},ao=function(u,s,o){return yc(u,new vd(s),o)};function yc(u,s,o){const d=u.getPriority().val(),_=cu(d,s.getImmediateChild(".priority"),o);let D;if(u.isLeafNode()){const M=u,G=cu(M.getValue(),s,o);return G!==M.getValue()||_!==M.getPriority().val()?new oa(G,qn(_)):u}{const M=u;return D=M,_!==M.getPriority().val()&&(D=D.updatePriority(new oa(_))),M.forEachChild(ue,(G,te)=>{const de=yc(te,s.getImmediateChild(G),o);de!==te&&(D=D.updateImmediateChild(G,de))}),D}}class pa{constructor(s="",o=null,d={children:{},childCount:0}){this.name=s,this.parent=o,this.node=d}}function ls(u,s){let o=s instanceof jr?s:new jr(s),d=u,_=Jn(o);for(;null!==_;){const D=(0,ie.DV)(d.node.children,_)||{children:{},childCount:0};d=new pa(_,d,D),o=Wr(o),_=Jn(o)}return d}function Vu(u){return u.node.value}function Fl(u,s){u.node.value=s,Uu(u)}function Il(u){return u.node.childCount>0}function vc(u,s){gn(u.node.children,(o,d)=>{s(new pa(o,u,d))})}function Js(u,s,o,d){o&&!d&&s(u),vc(u,_=>{Js(_,s,!0,d)}),o&&d&&s(u)}function bc(u){return new jr(null===u.parent?u.name:bc(u.parent)+"/"+u.name)}function Uu(u){null!==u.parent&&function ah(u,s,o){const d=function Ua(u){return void 0===Vu(u)&&!Il(u)}(o),_=(0,ie.r3)(u.node.children,s);d&&_?(delete u.node.children[s],u.node.childCount--,Uu(u)):!d&&!_&&(u.node.children[s]=o.node,u.node.childCount++,Uu(u))}(u.parent,u.name,u)}const lh=/[\[\].#$\/\u0000-\u001F\u007F]/,wd=/[\[\].#$\u0000-\u001F\u007F]/,Hu=10485760,Qc=function(u){return"string"==typeof u&&0!==u.length&&!lh.test(u)},ul=function(u){return"string"==typeof u&&0!==u.length&&!wd.test(u)},jo=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!lr(u)||u&&"object"==typeof u&&(0,ie.r3)(u,".sv")},ql=function(u,s,o,d){d&&void 0===s||vu((0,ie.gK)(u,"value"),s,o)},vu=function(u,s,o){const d=o instanceof jr?new Bs(o,u):o;if(void 0===s)throw new Error(u+"contains undefined "+zr(d));if("function"==typeof s)throw new Error(u+"contains a function "+zr(d)+" with contents = "+s.toString());if(lr(s))throw new Error(u+"contains "+s.toString()+" "+zr(d));if("string"==typeof s&&s.length>Hu/3&&(0,ie.ug)(s)>Hu)throw new Error(u+"contains a string greater than "+Hu+" utf8 bytes "+zr(d)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){let _=!1,D=!1;if(gn(s,(M,G)=>{if(".value"===M)_=!0;else if(".priority"!==M&&".sv"!==M&&(D=!0,!Qc(M)))throw new Error(u+" contains an invalid key ("+M+") "+zr(d)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Zs(u,s){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=(0,ie.ug)(s),ia(u)})(d,M),vu(u,G,d),function Qs(u){const s=u.parts_.pop();u.byteLength_-=(0,ie.ug)(s),u.parts_.length>0&&(u.byteLength_-=1)}(d)}),_&&D)throw new Error(u+' contains ".value" child '+zr(d)+" in addition to actual children.")}},Jc=function(u,s,o,d){if(d&&void 0===s)return;const _=(0,ie.gK)(u,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(_+" must be an object containing the children to replace.");const D=[];gn(s,(M,G)=>{const te=new jr(M);if(vu(_,G,kr(o,te)),".priority"===Ys(te)&&!jo(G))throw new Error(_+"contains an invalid value for '"+te.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");D.push(te)}),function(u,s){let o,d;for(o=0;o<s.length;o++){d=s[o];const D=Gs(d);for(let M=0;M<D.length;M++)if((".priority"!==D[M]||M!==D.length-1)&&!Qc(D[M]))throw new Error(u+"contains an invalid key ("+D[M]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(Ko);let _=null;for(o=0;o<s.length;o++){if(d=s[o],null!==_&&Vi(_,d))throw new Error(u+"contains a path "+_.toString()+" that is ancestor of another path "+d.toString());_=d}}(_,D)},cl=function(u,s,o){if(!o||void 0!==s){if(lr(s))throw new Error((0,ie.gK)(u,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jo(s))throw new Error((0,ie.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jo=function(u,s,o,d){if(!(d&&void 0===o||Qc(o)))throw new Error((0,ie.gK)(u,s)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ga=function(u,s,o,d){if(!(d&&void 0===o||ul(o)))throw new Error((0,ie.gK)(u,s)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$o=function(u,s){if(".info"===Jn(s))throw new Error(u+" failed = Can't modify data under /.info/")},Ed=function(u,s){const o=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!Qc(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==o.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),ul(u)}(o))throw new Error((0,ie.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ro(u,s){let o=null;for(let d=0;d<s.length;d++){const _=s[d],D=_.getPath();null!==o&&!Ms(D,o.path)&&(u.eventLists_.push(o),o=null),null===o&&(o={events:[],path:D}),o.events.push(_)}o&&u.eventLists_.push(o)}function Dd(u,s,o){Ro(u,o),b(u,d=>Ms(d,s))}function N(u,s,o){Ro(u,o),b(u,d=>Vi(d,s)||Vi(s,d))}function b(u,s){u.recursionDepth_++;let o=!0;for(let d=0;d<u.eventLists_.length;d++){const _=u.eventLists_[d];_&&(s(_.path)?(E(u.eventLists_[d]),u.eventLists_[d]=null):o=!1)}o&&(u.eventLists_=[]),u.recursionDepth_--}function E(u){for(let s=0;s<u.events.length;s++){const o=u.events[s];if(null!==o){u.events[s]=null;const d=o.getEventRunner();Tr&&Gn("event: "+o.toString()),Bn(d)}}}const P="repo_interrupt";class ye{constructor(s,o,d,_){this.repoInfo_=s,this.forceRestClient_=o,this.authTokenProvider_=d,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ss(),this.transactionQueueTree_=new pa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nn(u){const o=u.infoData_.getNode(new jr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function $n(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:nn(u)})}function Zn(u,s,o,d,_){u.dataUpdateCount++;const D=new jr(s);o=u.interceptServerDataCallback_?u.interceptServerDataCallback_(s,o):o;let M=[];if(_)if(d){const te=(0,ie.UI)(o,de=>qn(de));M=function sn(u,s,o,d){const _=Kl(u,d);if(_){const D=go(_),M=D.path,G=D.queryId,te=ki(M,s),de=dn.fromObject(o);return Ho(u,M,new ca(Pu(G),te,de))}return[]}(u.serverSyncTree_,D,te,_)}else{const te=qn(o);M=Rt(u.serverSyncTree_,D,te,_)}else if(d){const te=(0,ie.UI)(o,de=>qn(de));M=function q(u,s,o){const d=dn.fromObject(o);return $r(u,new ca({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,d))}(u.serverSyncTree_,D,te)}else{const te=qn(o);M=H(u.serverSyncTree_,D,te)}let G=D;M.length>0&&(G=Tc(u,D)),N(u.eventQueue_,G,M)}function Er(u,s){Eo(u,"connected",s),!1===s&&function Ec(u){Yl(u,"onDisconnectEvents");const s=$n(u),o=ss();aa(u.onDisconnect_,Mr(),(_,D)=>{const M=Bh(_,D,u.serverSyncTree_,s);fi(o,_,M)});let d=[];aa(o,Mr(),(_,D)=>{d=d.concat(H(u.serverSyncTree_,_,D));const M=Ad(u,_);Tc(u,M)}),u.onDisconnect_=ss(),N(u.eventQueue_,Mr(),d)}(u)}function Eo(u,s,o){const d=new jr("/.info/"+s),_=qn(o);u.infoData_.updateSnapshot(d,_);const D=H(u.infoSyncTree_,d,_);N(u.eventQueue_,d,D)}function dl(u){return u.nextWriteId_++}function hl(u,s,o,d,_){Yl(u,"set",{path:s.toString(),value:o,priority:d});const D=$n(u),M=qn(o,d),G=er(u.serverSyncTree_,s),te=ao(M,G,D),de=dl(u),Xe=yu(u.serverSyncTree_,s,te,de,!0);Ro(u.eventQueue_,Xe),u.server_.put(s.toString(),M.val(!0),(Dt,Gt)=>{const zt="ok"===Dt;zt||Qn("set at "+s+" failed: "+Dt);const Cn=Cl(u.serverSyncTree_,de,!zt);N(u.eventQueue_,s,Cn),bu(0,_,Dt,Gt)});const st=Ad(u,s);Tc(u,st),N(u.eventQueue_,st,[])}function gf(u,s,o){u.server_.onDisconnectCancel(s.toString(),(d,_)=>{"ok"===d&&Fi(u.onDisconnect_,s),bu(0,o,d,_)})}function ju(u,s,o,d){const _=qn(o);u.server_.onDisconnectPut(s.toString(),_.val(!0),(D,M)=>{"ok"===D&&fi(u.onDisconnect_,s,_),bu(0,d,D,M)})}function Dc(u,s,o){let d;d=".info"===Jn(s._path)?pt(u.infoSyncTree_,s,o):pt(u.serverSyncTree_,s,o),Dd(u.eventQueue_,s._path,d)}function Uh(u){u.persistentConnection_&&u.persistentConnection_.interrupt(P)}function Yl(u,...s){let o="";u.persistentConnection_&&(o=u.persistentConnection_.id+":"),Gn(o,...s)}function bu(u,s,o,d){s&&Bn(()=>{if("ok"===o)s(null);else{const _=(o||"error").toUpperCase();let D=_;d&&(D+=": "+d);const M=new Error(D);M.code=_,s(M)}})}function wu(u,s,o){return er(u.serverSyncTree_,s,o)||_t.EMPTY_NODE}function Id(u,s=u.transactionQueueTree_){if(s||vi(u,s),Vu(s)){const o=mf(u,s);(0,ie.hu)(o.length>0,"Sending zero length transaction queue"),o.every(_=>0===_.status)&&function gg(u,s,o){const d=o.map(de=>de.currentWriteId),_=wu(u,s,d);let D=_;const M=_.hash();for(let de=0;de<o.length;de++){const Xe=o[de];(0,ie.hu)(0===Xe.status,"tryToSendTransactionQueue_: items in queue should all be run."),Xe.status=1,Xe.retryCount++;const st=ki(s,Xe.path);D=D.updateChild(st,Xe.currentOutputSnapshotRaw)}const G=D.val(!0),te=s;u.server_.put(te.toString(),G,de=>{Yl(u,"transaction put response",{path:te.toString(),status:de});let Xe=[];if("ok"===de){const st=[];for(let Dt=0;Dt<o.length;Dt++)o[Dt].status=2,Xe=Xe.concat(Cl(u.serverSyncTree_,o[Dt].currentWriteId)),o[Dt].onComplete&&st.push(()=>o[Dt].onComplete(null,!0,o[Dt].currentOutputSnapshotResolved)),o[Dt].unwatcher();vi(u,ls(u.transactionQueueTree_,s)),Id(u,u.transactionQueueTree_),N(u.eventQueue_,s,Xe);for(let Dt=0;Dt<st.length;Dt++)Bn(st[Dt])}else{if("datastale"===de)for(let st=0;st<o.length;st++)o[st].status=3===o[st].status?4:0;else{Qn("transaction at "+te.toString()+" failed: "+de);for(let st=0;st<o.length;st++)o[st].status=4,o[st].abortReason=de}Tc(u,s)}},M)}(u,bc(s),o)}else Il(s)&&vc(s,o=>{Id(u,o)})}function Tc(u,s){const o=ch(u,s),d=bc(o);return function Sd(u,s,o){if(0===s.length)return;const d=[];let _=[];const M=s.filter(G=>0===G.status).map(G=>G.currentWriteId);for(let G=0;G<s.length;G++){const te=s[G],de=ki(o,te.path);let st,Xe=!1;if((0,ie.hu)(null!==de,"rerunTransactionsUnderNode_: relativePath should not be null."),4===te.status)Xe=!0,st=te.abortReason,_=_.concat(Cl(u.serverSyncTree_,te.currentWriteId,!0));else if(0===te.status)if(te.retryCount>=25)Xe=!0,st="maxretry",_=_.concat(Cl(u.serverSyncTree_,te.currentWriteId,!0));else{const Dt=wu(u,te.path,M);te.currentInputSnapshot=Dt;const Gt=s[G].update(Dt.val());if(void 0!==Gt){vu("transaction failed: Data returned ",Gt,te.path);let zt=qn(Gt);"object"==typeof Gt&&null!=Gt&&(0,ie.r3)(Gt,".priority")||(zt=zt.updatePriority(Dt.getPriority()));const Pr=te.currentWriteId,Nr=$n(u),bi=ao(zt,Dt,Nr);te.currentOutputSnapshotRaw=zt,te.currentOutputSnapshotResolved=bi,te.currentWriteId=dl(u),M.splice(M.indexOf(Pr),1),_=_.concat(yu(u.serverSyncTree_,te.path,bi,te.currentWriteId,te.applyLocally)),_=_.concat(Cl(u.serverSyncTree_,Pr,!0))}else Xe=!0,st="nodata",_=_.concat(Cl(u.serverSyncTree_,te.currentWriteId,!0))}N(u.eventQueue_,o,_),_=[],Xe&&(s[G].status=2,setTimeout(s[G].unwatcher,Math.floor(0)),s[G].onComplete&&d.push("nodata"===st?()=>s[G].onComplete(null,!1,s[G].currentInputSnapshot):()=>s[G].onComplete(new Error(st),!1,null)))}vi(u,u.transactionQueueTree_);for(let G=0;G<d.length;G++)Bn(d[G]);Id(u,u.transactionQueueTree_)}(u,mf(u,o),d),d}function ch(u,s){let o,d=u.transactionQueueTree_;for(o=Jn(s);null!==o&&void 0===Vu(d);)d=ls(d,o),o=Jn(s=Wr(s));return d}function mf(u,s){const o=[];return Mo(u,s,o),o.sort((d,_)=>d.order-_.order),o}function Mo(u,s,o){const d=Vu(s);if(d)for(let _=0;_<d.length;_++)o.push(d[_]);vc(s,_=>{Mo(u,_,o)})}function vi(u,s){const o=Vu(s);if(o){let d=0;for(let _=0;_<o.length;_++)2!==o[_].status&&(o[d]=o[_],d++);o.length=d,Fl(s,o.length>0?o:void 0)}vc(s,d=>{vi(u,d)})}function Ad(u,s){const o=bc(ch(u,s)),d=ls(u.transactionQueueTree_,s);return function pg(u,s,o){let d=o?u:u.parent;for(;null!==d;){if(s(d))return!0;d=d.parent}}(d,_=>{Cc(u,_)}),Cc(u,d),Js(d,_=>{Cc(u,_)}),o}function Cc(u,s){const o=Vu(s);if(o){const d=[];let _=[],D=-1;for(let M=0;M<o.length;M++)3===o[M].status||(1===o[M].status?((0,ie.hu)(D===M-1,"All SENT items should be at beginning of queue."),D=M,o[M].status=3,o[M].abortReason="set"):((0,ie.hu)(0===o[M].status,"Unexpected transaction status in abort"),o[M].unwatcher(),_=_.concat(Cl(u.serverSyncTree_,o[M].currentWriteId,!0)),o[M].onComplete&&d.push(o[M].onComplete.bind(null,new Error("set"),!1,null))));-1===D?Fl(s,void 0):o.length=D+1,N(u.eventQueue_,bc(s),_);for(let M=0;M<d.length;M++)Bn(d[M])}}const Oo=function(u,s){const o=tp(u),d=o.namespace;return"firebase.com"===o.domain&&Gr(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!d||"undefined"===d)&&"localhost"!==o.domain&&Gr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Qt(o.host,o.secure,d,"ws"===o.scheme||"wss"===o.scheme,s,"",d!==o.subdomain),path:new jr(o.pathString)}},tp=function(u){let s="",o="",d="",_="",D="",M=!0,G="https",te=443;if("string"==typeof u){let de=u.indexOf("//");de>=0&&(G=u.substring(0,de-1),u=u.substring(de+2));let Xe=u.indexOf("/");-1===Xe&&(Xe=u.length);let st=u.indexOf("?");-1===st&&(st=u.length),s=u.substring(0,Math.min(Xe,st)),Xe<st&&(_=function Gu(u){let s="";const o=u.split("/");for(let d=0;d<o.length;d++)if(o[d].length>0){let _=o[d];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch{}s+="/"+_}return s}(u.substring(Xe,st)));const Dt=function ep(u){const s={};"?"===u.charAt(0)&&(u=u.substring(1));for(const o of u.split("&")){if(0===o.length)continue;const d=o.split("=");2===d.length?s[decodeURIComponent(d[0])]=decodeURIComponent(d[1]):Qn(`Invalid query segment '${o}' in query '${u}'`)}return s}(u.substring(Math.min(u.length,st)));de=s.indexOf(":"),de>=0?(M="https"===G||"wss"===G,te=parseInt(s.substring(de+1),10)):de=s.length;const Gt=s.slice(0,de);if("localhost"===Gt.toLowerCase())o="localhost";else if(Gt.split(".").length<=2)o=Gt;else{const zt=s.indexOf(".");d=s.substring(0,zt).toLowerCase(),o=s.substring(zt+1),D=d}"ns"in Dt&&(D=Dt.ns)}return{host:s,port:te,domain:o,subdomain:d,secure:M,scheme:G,pathString:_,namespace:D}},td="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wu=function(){let u=0;const s=[];return function(o){const d=o===u;let _;u=o;const D=new Array(8);for(_=7;_>=0;_--)D[_]=td.charAt(o%64),o=Math.floor(o/64);(0,ie.hu)(0===o,"Cannot push at time == 0");let M=D.join("");if(d){for(_=11;_>=0&&63===s[_];_--)s[_]=0;s[_]++}else for(_=0;_<12;_++)s[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)M+=td.charAt(s[_]);return(0,ie.hu)(20===M.length,"nextPushId: Length should be 20."),M}}();class Zl{constructor(s,o,d,_){this.eventType=s,this.eventRegistration=o,this.snapshot=d,this.prevName=_}getPath(){const s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class Ic{constructor(s,o,d){this.eventRegistration=s,this.error=o,this.path=d}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class nd{constructor(s,o){this.snapshotCallback=s,this.cancelCallback=o}onValue(s,o){this.snapshotCallback.call(null,s,o)}onCancel(s){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}class mg{constructor(s,o){this._repo=s,this._path=o}cancel(){const s=new ie.BH;return gf(this._repo,this._path,s.wrapCallback(()=>{})),s.promise}remove(){$o("OnDisconnect.remove",this._path);const s=new ie.BH;return ju(this._repo,this._path,null,s.wrapCallback(()=>{})),s.promise}set(s){$o("OnDisconnect.set",this._path),ql("OnDisconnect.set",s,this._path,!1);const o=new ie.BH;return ju(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}setWithPriority(s,o){$o("OnDisconnect.setWithPriority",this._path),ql("OnDisconnect.setWithPriority",s,this._path,!1),cl("OnDisconnect.setWithPriority",o,!1);const d=new ie.BH;return function Xs(u,s,o,d,_){const D=qn(o,d);u.server_.onDisconnectPut(s.toString(),D.val(!0),(M,G)=>{"ok"===M&&fi(u.onDisconnect_,s,D),bu(0,_,M,G)})}(this._repo,this._path,s,o,d.wrapCallback(()=>{})),d.promise}update(s){$o("OnDisconnect.update",this._path),Jc("OnDisconnect.update",s,this._path,!1);const o=new ie.BH;return function Td(u,s,o,d){if((0,ie.xb)(o))return Gn("onDisconnect().update() called with empty data.  Don't do anything."),void bu(0,d,"ok",void 0);u.server_.onDisconnectMerge(s.toString(),o,(_,D)=>{"ok"===_&&gn(o,(M,G)=>{const te=qn(G);fi(u.onDisconnect_,kr(s,M),te)}),bu(0,d,_,D)})}(this._repo,this._path,s,o.wrapCallback(()=>{})),o.promise}}class Ha{constructor(s,o,d,_){this._repo=s,this._path=o,this._queryParams=d,this._orderByCalled=_}get key(){return wr(this._path)?null:Ys(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const s=hi(this._queryParams),o=kn(s);return"{}"===o?"default":o}get _queryObject(){return hi(this._queryParams)}isEqual(s){if(!((s=(0,ie.m9)(s))instanceof Ha))return!1;const o=this._repo===s._repo,d=Ms(this._path,s._path);return o&&d&&this._queryIdentifier===s._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function wa(u){let s="";for(let o=u.pieceNum_;o<u.pieces_.length;o++)""!==u.pieces_[o]&&(s+="/"+encodeURIComponent(String(u.pieces_[o])));return s||"/"}(this._path)}}function Jr(u,s){if(!0===u._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function zu(u){let s=null,o=null;if(u.hasStart()&&(s=u.getIndexStartValue()),u.hasEnd()&&(o=u.getIndexEndValue()),u.getIndex()===ei){const d="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==En)throw new Error(d);if("string"!=typeof s)throw new Error(_)}if(u.hasEnd()){if(u.getIndexEndName()!==Pn)throw new Error(d);if("string"!=typeof o)throw new Error(_)}}else if(u.getIndex()===ue){if(null!=s&&!jo(s)||null!=o&&!jo(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(u.getIndex()instanceof $i||u.getIndex()===yi,"unknown index type."),null!=s&&"object"==typeof s||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ku(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ja extends Ha{constructor(s,o){super(s,o,new po,!1)}get parent(){const s=yo(this._path);return null===s?null:new ja(this._repo,s)}get root(){let s=this;for(;null!==s.parent;)s=s.parent;return s}}class Sl{constructor(s,o,d){this._node=s,this.ref=o,this._index=d}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const o=new jr(s),d=Ll(this.ref,s);return new Sl(this._node.getChild(o),d,ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(d,_)=>s(new Sl(_,Ll(this.ref,d),ue)))}hasChild(s){const o=new jr(s);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nd(u,s){return(u=(0,ie.m9)(u))._checkNotDeleted("ref"),void 0!==s?Ll(u._root,s):u._root}function rd(u,s){(u=(0,ie.m9)(u))._checkNotDeleted("refFromURL");const o=Oo(s,u._repo.repoInfo_.nodeAdmin);Ed("refFromURL",o);const d=o.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&d.host!==u._repo.repoInfo_.host&&Gr("refFromURL: Host name does not match the current database: (found "+d.host+" but expected "+u._repo.repoInfo_.host+")"),Nd(u,o.path.toString())}function Ll(u,s){return null===Jn((u=(0,ie.m9)(u))._path)?(o=s,o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),ga("child","path",o,!1)):ga("child","path",s,!1),new ja(u._repo,kr(u._path,s));var o}function Rd(u,s){u=(0,ie.m9)(u),$o("set",u._path),ql("set",s,u._path,!1);const o=new ie.BH;return hl(u._repo,u._path,s,null,o.wrapCallback(()=>{})),o.promise}function _g(u,s){Jc("update",s,u._path,!1);const o=new ie.BH;return function Xc(u,s,o,d){Yl(u,"update",{path:s.toString(),value:o});let _=!0;const D=$n(u),M={};if(gn(o,(G,te)=>{_=!1,M[G]=Bh(kr(s,G),qn(te),u.serverSyncTree_,D)}),_)Gn("update() called with empty data.  Don't do anything."),bu(0,d,"ok",void 0);else{const G=dl(u),te=function oo(u,s,o,d){!function ka(u,s,o,d){(0,ie.hu)(d>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:s,children:o,writeId:d,visible:!0}),u.visibleWrites=yn(u.visibleWrites,s,o),u.lastWriteId=d}(u.pendingWriteTree_,s,o,d);const _=dn.fromObject(o);return $r(u,new ca({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,_))}(u.serverSyncTree_,s,M,G);Ro(u.eventQueue_,te),u.server_.merge(s.toString(),o,(de,Xe)=>{const st="ok"===de;st||Qn("update at "+s+" failed: "+de);const Dt=Cl(u.serverSyncTree_,G,!st),Gt=Dt.length>0?Tc(u,s):s;N(u.eventQueue_,Gt,Dt),bu(0,d,de,Xe)}),gn(o,de=>{const Xe=Ad(u,kr(s,de));Tc(u,Xe)}),N(u.eventQueue_,s,[])}}(u._repo,u._path,s,o.wrapCallback(()=>{})),o.promise}function np(u){u=(0,ie.m9)(u);const s=new nd(()=>{}),o=new Eu(s);return function tl(u,s,o){const d=function ar(u,s){const o=s._path;let d=null;u.syncPointTree_.foreachOnPath(o,(de,Xe)=>{const st=ki(de,o);d=d||Ao(Xe,st)});let _=u.syncPointTree_.get(o);_?d=d||Ao(_,Mr()):(_=new _n,u.syncPointTree_=u.syncPointTree_.set(o,_));const D=null!=d,M=D?new Oa(d,!0,!1):null;return function S(u){return rn(u.viewCache_)}(fa(_,s,zs(u.pendingWriteTree_,s._path),D?M.getNode():_t.EMPTY_NODE,D))}(u.serverSyncTree_,s);return null!=d?Promise.resolve(d):u.server_.get(s).then(_=>{const D=qn(_).withIndex(s._queryParams.getIndex());let M;if(Sn(u.serverSyncTree_,s,o,!0),s._queryParams.loadsAllData())M=H(u.serverSyncTree_,s._path,D);else{const G=el(u.serverSyncTree_,s);M=Rt(u.serverSyncTree_,s._path,D,G)}return N(u.eventQueue_,s._path,M),pt(u.serverSyncTree_,s,o,null,!0),D},_=>(Yl(u,"get for query "+(0,ie.Wl)(s)+" failed: "+_),Promise.reject(new Error(_))))}(u._repo,u,o).then(d=>new Sl(d,new ja(u._repo,u._path),u._queryParams.getIndex()))}class Eu{constructor(s){this.callbackContext=s}respondsTo(s){return"value"===s}createEvent(s,o){const d=o._queryParams.getIndex();return new Zl("value",this,new Sl(s.snapshotNode,new ja(o._repo,o._path),d))}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new Ic(this,s,o):null}matches(s){return s instanceof Eu&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sd{constructor(s,o){this.eventType=s,this.callbackContext=o}respondsTo(s){let o="children_added"===s?"child_added":s;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(s,o){return this.callbackContext.hasCancelCallback?new Ic(this,s,o):null}createEvent(s,o){(0,ie.hu)(null!=s.childName,"Child events should have a childName.");const d=Ll(new ja(o._repo,o._path),s.childName),_=o._queryParams.getIndex();return new Zl(s.type,this,new Sl(s.snapshotNode,d,_),s.prevName)}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof sd&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Sc(u,s,o,d,_){let D;if("object"==typeof d&&(D=void 0,_=d),"function"==typeof d&&(D=d),_&&_.onlyOnce){const te=o,de=(Xe,st)=>{Dc(u._repo,u,G),te(Xe,st)};de.userCallback=o.userCallback,de.context=o.context,o=de}const M=new nd(o,D||void 0),G="value"===s?new Eu(M):new sd(s,M);return function $u(u,s,o){let d;d=".info"===Jn(s._path)?Sn(u.infoSyncTree_,s,o):Sn(u.serverSyncTree_,s,o),Dd(u.eventQueue_,s._path,d)}(u._repo,u,G),()=>Dc(u._repo,u,G)}function Ks(u,s,o,d){return Sc(u,"value",s,o,d)}function od(u,s,o,d){return Sc(u,"child_added",s,o,d)}function Du(u,s,o,d){return Sc(u,"child_changed",s,o,d)}function ad(u,s,o,d){return Sc(u,"child_moved",s,o,d)}function Ql(u,s,o,d){return Sc(u,"child_removed",s,o,d)}function rp(u,s,o){let d=null;const _=o?new nd(o):null;"value"===s?d=new Eu(_):s&&(d=new sd(s,_)),Dc(u._repo,u,d)}class du{}class Tu extends du{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){ql("endAt",this._value,s._path,!0);const o=Tt(s._queryParams,this._value,this._key);if(Ku(o),zu(o),s._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ha(s._repo,s._path,o,s._orderByCalled)}}class _f extends du{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){ql("endBefore",this._value,s._path,!1);const o=function Vt(u,s,o){let d;return d=Tt(u,s,u.index_===ei||o?o:En),d.endBeforeSet_=!0,d}(s._queryParams,this._value,this._key);if(Ku(o),zu(o),s._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ha(s._repo,s._path,o,s._orderByCalled)}}class Gh extends du{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){ql("startAt",this._value,s._path,!0);const o=ce(s._queryParams,this._value,this._key);if(Ku(o),zu(o),s._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ha(s._repo,s._path,o,s._orderByCalled)}}class Md extends du{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){ql("startAfter",this._value,s._path,!1);const o=function Le(u,s,o){let d;return d=ce(u,s,u.index_===ei||o?o:Pn),d.startAfterSet_=!0,d}(s._queryParams,this._value,this._key);if(Ku(o),zu(o),s._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ha(s._repo,s._path,o,s._orderByCalled)}}class Od extends du{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ha(s._repo,s._path,function ne(u,s){const o=u.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="l",o}(s._queryParams,this._limit),s._orderByCalled)}}class sp extends du{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ha(s._repo,s._path,function $(u,s){const o=u.copy();return o.limitSet_=!0,o.limit_=s,o.viewFrom_="r",o}(s._queryParams,this._limit),s._orderByCalled)}}class op extends du{constructor(s){super(),this._path=s}_apply(s){Jr(s,"orderByChild");const o=new jr(this._path);if(wr(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const d=new $i(o),_=Fn(s._queryParams,d);return zu(_),new Ha(s._repo,s._path,_,!0)}}class Ac extends du{_apply(s){Jr(s,"orderByKey");const o=Fn(s._queryParams,ei);return zu(o),new Ha(s._repo,s._path,o,!0)}}class Cm extends du{_apply(s){Jr(s,"orderByPriority");const o=Fn(s._queryParams,ue);return zu(o),new Ha(s._repo,s._path,o,!0)}}class ud extends du{_apply(s){Jr(s,"orderByValue");const o=Fn(s._queryParams,yi);return zu(o),new Ha(s._repo,s._path,o,!0)}}class Im extends du{constructor(s,o){super(),this._value=s,this._key=o}_apply(s){if(ql("equalTo",this._value,s._path,!1),s._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(s._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Tu(this._value,this._key)._apply(new Gh(this._value,this._key)._apply(s))}}function lo(u,...s){let o=(0,ie.m9)(u);for(const d of s)o=d._apply(o);return o}(function Hi(u){(0,ie.hu)(!Or,"__referenceConstructor has already been defined"),Or=u})(ja),function ll(u){(0,ie.hu)(!uu,"__referenceConstructor has already been defined"),uu=u}(ja);const bf={};function cd(u,s,o,d,_){let D=d||u.options.databaseURL;void 0===D&&(u.options.projectId||Gr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gn("Using default host for project ",u.options.projectId),D=`${u.options.projectId}-default-rtdb.firebaseio.com`);let te,de,M=Oo(D,_),G=M.repoInfo;typeof process<"u"&&process.env&&(de=process.env.FIREBASE_DATABASE_EMULATOR_HOST),de?(te=!0,D=`http://${de}?ns=${G.namespace}`,M=Oo(D,_),G=M.repoInfo):te=!M.repoInfo.secure;const Xe=_&&te?new De(De.OWNER):new Qe(u.name,u.options,s);Ed("Invalid Firebase Database URL",M),wr(M.path)||Gr("Database URL must point to the root of a Firebase Database (not including a child path).");const st=function xd(u,s,o,d){let _=bf[s.name];_||(_={},bf[s.name]=_);let D=_[u.toURLString()];return D&&Gr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),D=new ye(u,false,o,d),_[u.toURLString()]=D,D}(G,u,Xe,new Ae(u.name,o));return new Cg(st,u)}class Cg{constructor(s,o){this._repoInternal=s,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Et(u,s,o){if(u.stats_=es(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new li(u.repoInfo_,(d,_,D,M)=>{Zn(u,d,_,D,M)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Er(u,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(o)}catch(d){throw new Error("Invalid authOverride provided: "+d)}}u.persistentConnection_=new Fo(u.repoInfo_,s,(d,_,D,M)=>{Zn(u,d,_,D,M)},d=>{Er(u,d)},d=>{!function hs(u,s){gn(s,(o,d)=>{Eo(u,o,d)})}(u,d)},u.authTokenProvider_,u.appCheckProvider_,o),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(d=>{u.server_.refreshAuthToken(d)}),u.appCheckProvider_.addTokenChangeListener(d=>{u.server_.refreshAppCheckToken(d.token)}),u.statsReporter_=function Co(u,s){const o=u.toString();return Nn[o]||(Nn[o]=s()),Nn[o]}(u.repoInfo_,()=>new Nl(u.stats_,u.server_)),u.infoData_=new Zr,u.infoSyncTree_=new Tl({startListening:(d,_,D,M)=>{let G=[];const te=u.infoData_.getNode(d._path);return te.isEmpty()||(G=H(u.infoSyncTree_,d._path,te),setTimeout(()=>{M("ok")},0)),G},stopListening:()=>{}}),Eo(u,"connected",!1),u.serverSyncTree_=new Tl({startListening:(d,_,D,M)=>(u.server_.listen(d,D,_,(G,te)=>{const de=M(G,te);N(u.eventQueue_,d._path,de)}),[]),stopListening:(d,_)=>{u.server_.unlisten(d,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,Mr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function qu(u,s){const o=bf[s];(!o||o[u.key]!==u)&&Gr(`Database ${s}(${u.repoInfo_}) has already been deleted.`),Uh(u),delete o[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){null===this._rootInternal&&Gr("Cannot call "+s+" on a deleted database.")}}function lp(){na.IS_TRANSPORT_INITIALIZED&&Qn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function R_(){lp(),hr.forceDisallow()}function M_(){lp(),Pi.forceDisallow(),hr.forceAllow()}function x_(u,s){br(u,s)}const Am={".sv":"timestamp"};class Ig{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fo.prototype.simpleListen=function(u,s){this.sendRequest("q",{p:u},s)},Fo.prototype.echo=function(u,s){this.sendRequest("echo",{d:u},s)},function Ef(u){ot(pe.SDK_VERSION),(0,pe._registerComponent)(new Mt.wA("database",(s,{instanceIdentifier:o})=>cd(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(We,"0.14.0",u),(0,pe.registerVersion)(We,"0.14.0","esm2017")}();const Ci=new At.Yd("@firebase/database-compat"),Wh=function(u){Ci.warn("FIREBASE WARNING: "+u)};class Nc{constructor(s){this._delegate=s}cancel(s){(0,ie.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.cancel","onComplete",s,!0);const o=this._delegate.cancel();return s&&o.then(()=>s(null),d=>s(d)),o}remove(s){(0,ie.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.remove","onComplete",s,!0);const o=this._delegate.remove();return s&&o.then(()=>s(null),d=>s(d)),o}set(s,o){(0,ie.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ie.Wj)("OnDisconnect.set","onComplete",o,!0);const d=this._delegate.set(s);return o&&d.then(()=>o(null),_=>o(_)),d}setWithPriority(s,o,d){(0,ie.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ie.Wj)("OnDisconnect.setWithPriority","onComplete",d,!0);const _=this._delegate.setWithPriority(s,o);return d&&_.then(()=>d(null),D=>d(D)),_}update(s,o){if((0,ie.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){const _={};for(let D=0;D<s.length;++D)_[""+D]=s[D];s=_,Wh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ie.Wj)("OnDisconnect.update","onComplete",o,!0);const d=this._delegate.update(s);return o&&d.then(()=>o(null),_=>o(_)),d}}class Ag{constructor(s,o){this.committed=s,this.snapshot=o}toJSON(){return(0,ie.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class dd{constructor(s,o){this._database=s,this._delegate=o}val(){return(0,ie.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ie.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ie.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ie.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(s){return(0,ie.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),ga("DataSnapshot.child","path",s,!1),new dd(this._database,this._delegate.child(s))}hasChild(s){return(0,ie.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ga("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)}getPriority(){return(0,ie.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(s){return(0,ie.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ie.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(o=>s(new dd(this._database,o)))}hasChildren(){return(0,ie.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ie.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ie.Dv)("DataSnapshot.ref",0,0,arguments.length),new fl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $a{constructor(s,o){this.database=s,this._delegate=o}on(s,o,d,_){var D;(0,ie.Dv)("Query.on",2,4,arguments.length),(0,ie.Wj)("Query.on","callback",o,!1);const M=$a.getCancelAndContextArgs_("Query.on",d,_),G=(de,Xe)=>{o.call(M.context,new dd(this.database,de),Xe)};G.userCallback=o,G.context=M.context;const te=null===(D=M.cancel)||void 0===D?void 0:D.bind(M.context);switch(s){case"value":return Ks(this._delegate,G,te),o;case"child_added":return od(this._delegate,G,te),o;case"child_removed":return Ql(this._delegate,G,te),o;case"child_changed":return Du(this._delegate,G,te),o;case"child_moved":return ad(this._delegate,G,te),o;default:throw new Error((0,ie.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(s,o,d){if((0,ie.Dv)("Query.off",0,3,arguments.length),function(u,s,o){if(void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ie.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,s),(0,ie.Wj)("Query.off","callback",o,!0),(0,ie.lb)("Query.off","context",d,!0),o){const _=()=>{};_.userCallback=o,_.context=d,rp(this._delegate,s,_)}else rp(this._delegate,s)}get(){return np(this._delegate).then(s=>new dd(this.database,s))}once(s,o,d,_){(0,ie.Dv)("Query.once",1,4,arguments.length),(0,ie.Wj)("Query.once","callback",o,!0);const D=$a.getCancelAndContextArgs_("Query.once",d,_),M=new ie.BH,G=(de,Xe)=>{const st=new dd(this.database,de);o&&o.call(D.context,st,Xe),M.resolve(st)};G.userCallback=o,G.context=D.context;const te=de=>{D.cancel&&D.cancel.call(D.context,de),M.reject(de)};switch(s){case"value":Ks(this._delegate,G,te,{onlyOnce:!0});break;case"child_added":od(this._delegate,G,te,{onlyOnce:!0});break;case"child_removed":Ql(this._delegate,G,te,{onlyOnce:!0});break;case"child_changed":Du(this._delegate,G,te,{onlyOnce:!0});break;case"child_moved":ad(this._delegate,G,te,{onlyOnce:!0});break;default:throw new Error((0,ie.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return M.promise}limitToFirst(s){return(0,ie.Dv)("Query.limitToFirst",1,1,arguments.length),new $a(this.database,lo(this._delegate,function yg(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Od(u)}(s)))}limitToLast(s){return(0,ie.Dv)("Query.limitToLast",1,1,arguments.length),new $a(this.database,lo(this._delegate,function vg(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sp(u)}(s)))}orderByChild(s){return(0,ie.Dv)("Query.orderByChild",1,1,arguments.length),new $a(this.database,lo(this._delegate,function bg(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ga("orderByChild","path",u,!1),new op(u)}(s)))}orderByKey(){return(0,ie.Dv)("Query.orderByKey",0,0,arguments.length),new $a(this.database,lo(this._delegate,function ld(){return new Ac}()))}orderByPriority(){return(0,ie.Dv)("Query.orderByPriority",0,0,arguments.length),new $a(this.database,lo(this._delegate,function hh(){return new Cm}()))}orderByValue(){return(0,ie.Dv)("Query.orderByValue",0,0,arguments.length),new $a(this.database,lo(this._delegate,function wg(){return new ud}()))}startAt(s=null,o){return(0,ie.Dv)("Query.startAt",0,2,arguments.length),new $a(this.database,lo(this._delegate,function yf(u=null,s){return Jo("startAt","key",s,!0),new Gh(u,s)}(s,o)))}startAfter(s=null,o){return(0,ie.Dv)("Query.startAfter",0,2,arguments.length),new $a(this.database,lo(this._delegate,function vf(u,s){return Jo("startAfter","key",s,!0),new Md(u,s)}(s,o)))}endAt(s=null,o){return(0,ie.Dv)("Query.endAt",0,2,arguments.length),new $a(this.database,lo(this._delegate,function ip(u,s){return Jo("endAt","key",s,!0),new Tu(u,s)}(s,o)))}endBefore(s=null,o){return(0,ie.Dv)("Query.endBefore",0,2,arguments.length),new $a(this.database,lo(this._delegate,function dh(u,s){return Jo("endBefore","key",s,!0),new _f(u,s)}(s,o)))}equalTo(s,o){return(0,ie.Dv)("Query.equalTo",1,2,arguments.length),new $a(this.database,lo(this._delegate,function Eg(u,s){return Jo("equalTo","key",s,!0),new Im(u,s)}(s,o)))}toString(){return(0,ie.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ie.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(s){if((0,ie.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof $a))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(s._delegate)}static getCancelAndContextArgs_(s,o,d){const _={cancel:void 0,context:void 0};if(o&&d)_.cancel=o,(0,ie.Wj)(s,"cancel",_.cancel,!0),_.context=d,(0,ie.lb)(s,"context",_.context,!0);else if(o)if("object"==typeof o&&null!==o)_.context=o;else{if("function"!=typeof o)throw new Error((0,ie.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=o}return _}get ref(){return new fl(this.database,new ja(this._delegate._repo,this._delegate._path))}}class fl extends $a{constructor(s,o){super(s,new Ha(o._repo,o._path,new po,!1)),this.database=s,this._delegate=o}getKey(){return(0,ie.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(s){return(0,ie.Dv)("Reference.child",1,1,arguments.length),"number"==typeof s&&(s=String(s)),new fl(this.database,Ll(this._delegate,s))}getParent(){(0,ie.Dv)("Reference.parent",0,0,arguments.length);const s=this._delegate.parent;return s?new fl(this.database,s):null}getRoot(){return(0,ie.Dv)("Reference.root",0,0,arguments.length),new fl(this.database,this._delegate.root)}set(s,o){(0,ie.Dv)("Reference.set",1,2,arguments.length),(0,ie.Wj)("Reference.set","onComplete",o,!0);const d=Rd(this._delegate,s);return o&&d.then(()=>o(null),_=>o(_)),d}update(s,o){if((0,ie.Dv)("Reference.update",1,2,arguments.length),Array.isArray(s)){const _={};for(let D=0;D<s.length;++D)_[""+D]=s[D];s=_,Wh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$o("Reference.update",this._delegate._path),(0,ie.Wj)("Reference.update","onComplete",o,!0);const d=_g(this._delegate,s);return o&&d.then(()=>o(null),_=>o(_)),d}setWithPriority(s,o,d){(0,ie.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ie.Wj)("Reference.setWithPriority","onComplete",d,!0);const _=function Tm(u,s,o){if($o("setWithPriority",u._path),ql("setWithPriority",s,u._path,!1),cl("setWithPriority",o,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const d=new ie.BH;return hl(u._repo,u._path,s,o,d.wrapCallback(()=>{})),d.promise}(this._delegate,s,o);return d&&_.then(()=>d(null),D=>d(D)),_}remove(s){(0,ie.Dv)("Reference.remove",0,1,arguments.length),(0,ie.Wj)("Reference.remove","onComplete",s,!0);const o=function $h(u){return $o("remove",u._path),Rd(u,null)}(this._delegate);return s&&o.then(()=>s(null),d=>s(d)),o}transaction(s,o,d){(0,ie.Dv)("Reference.transaction",1,3,arguments.length),(0,ie.Wj)("Reference.transaction","transactionUpdate",s,!1),(0,ie.Wj)("Reference.transaction","onComplete",o,!0),function(u,s,o,d){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,ie.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,d);const _=function cp(u,s,o){var d;if(u=(0,ie.m9)(u),$o("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const _=null===(d=o?.applyLocally)||void 0===d||d,D=new ie.BH,G=Ks(u,()=>{});return function Cd(u,s,o,d,_,D){Yl(u,"transaction on "+s);const M={path:s,update:o,onComplete:d,status:null,order:Sr(),applyLocally:D,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},G=wu(u,s,void 0);M.currentInputSnapshot=G;const te=M.update(G.val());if(void 0===te)M.unwatcher(),M.currentOutputSnapshotRaw=null,M.currentOutputSnapshotResolved=null,M.onComplete&&M.onComplete(null,!1,M.currentInputSnapshot);else{vu("transaction failed: Data returned ",te,M.path),M.status=0;const de=ls(u.transactionQueueTree_,s),Xe=Vu(de)||[];let st;Xe.push(M),Fl(de,Xe),"object"==typeof te&&null!==te&&(0,ie.r3)(te,".priority")?(st=(0,ie.DV)(te,".priority"),(0,ie.hu)(jo(st),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):st=(er(u.serverSyncTree_,s)||_t.EMPTY_NODE).getPriority().val();const Dt=$n(u),Gt=qn(te,st),zt=ao(Gt,G,Dt);M.currentOutputSnapshotRaw=Gt,M.currentOutputSnapshotResolved=zt,M.currentWriteId=dl(u);const Cn=yu(u.serverSyncTree_,s,zt,M.currentWriteId,M.applyLocally);N(u.eventQueue_,s,Cn),Id(u,u.transactionQueueTree_)}}(u._repo,u._path,s,(te,de,Xe)=>{let st=null;te?D.reject(te):(st=new Sl(Xe,new ja(u._repo,u._path),ue),D.resolve(new Ig(de,st)))},G,_),D.promise}(this._delegate,s,{applyLocally:d}).then(D=>new Ag(D.committed,new dd(this.database,D.snapshot)));return o&&_.then(D=>o(null,D.committed,D.snapshot),D=>o(D,!1,null)),_}setPriority(s,o){(0,ie.Dv)("Reference.setPriority",1,2,arguments.length),(0,ie.Wj)("Reference.setPriority","onComplete",o,!0);const d=function id(u,s){u=(0,ie.m9)(u),$o("setPriority",u._path),cl("setPriority",s,!1);const o=new ie.BH;return hl(u._repo,kr(u._path,".priority"),s,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,s);return o&&d.then(()=>o(null),_=>o(_)),d}push(s,o){(0,ie.Dv)("Reference.push",0,2,arguments.length),(0,ie.Wj)("Reference.push","onComplete",o,!0);const d=function jh(u,s){u=(0,ie.m9)(u),$o("push",u._path),ql("push",s,u._path,!0);const o=nn(u._repo),d=Wu(o),_=Ll(u,d),D=Ll(u,d);let M;return M=null!=s?Rd(D,s).then(()=>D):Promise.resolve(D),_.then=M.then.bind(M),_.catch=M.then.bind(M,void 0),_}(this._delegate,s),_=d.then(M=>new fl(this.database,M));o&&_.then(()=>o(null),M=>o(M));const D=new fl(this.database,d);return D.then=_.then.bind(_),D.catch=_.catch.bind(_,void 0),D}onDisconnect(){return $o("Reference.onDisconnect",this._delegate._path),new Nc(new mg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Jl{constructor(s,o){this._delegate=s,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:R_,forceLongPolling:M_}}useEmulator(s,o,d={}){!function wf(u,s,o,d={}){(u=(0,ie.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Gr("Cannot call useEmulator() after instance has already been initialized.");const _=u._repoInternal;let D;if(_.repoInfo_.nodeAdmin)d.mockUserToken&&Gr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),D=new De(De.OWNER);else if(d.mockUserToken){const M="string"==typeof d.mockUserToken?d.mockUserToken:(0,ie.Sg)(d.mockUserToken,u.app.options.projectId);D=new De(M)}!function ap(u,s,o,d){u.repoInfo_=new Qt(`${s}:${o}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),d&&(u.authTokenProvider_=d)}(_,s,o,D)}(this._delegate,s,o,d)}ref(s){if((0,ie.Dv)("database.ref",0,1,arguments.length),s instanceof fl){const o=rd(this._delegate,s.toString());return new fl(this,o)}{const o=Nd(this._delegate,s);return new fl(this,o)}}refFromURL(s){(0,ie.Dv)("database.refFromURL",1,1,arguments.length);const d=rd(this._delegate,s);return new fl(this,d)}goOffline(){return(0,ie.Dv)("database.goOffline",0,0,arguments.length),function up(u){(u=(0,ie.m9)(u))._checkNotDeleted("goOffline"),Uh(u._repo)}(this._delegate)}goOnline(){return(0,ie.Dv)("database.goOnline",0,0,arguments.length),function O_(u){(u=(0,ie.m9)(u))._checkNotDeleted("goOnline"),function ed(u){u.persistentConnection_&&u.persistentConnection_.resume(P)}(u._repo)}(this._delegate)}}Jl.ServerValue={TIMESTAMP:function Nm(){return Am}(),increment:u=>function Rm(u){return{".sv":{increment:u}}}(u)};var kd=Object.freeze({__proto__:null,initStandalone:function Pd({app:u,url:s,version:o,customAuthImpl:d,namespace:_,nodeAdmin:D=!1}){ot(o);const M=new Mt.zt("auth-internal",new Mt.H0("database-standalone"));return M.setComponent(new Mt.wA("auth-internal",()=>d,"PRIVATE")),{instance:new Jl(cd(u,M,void 0,s,D),u),namespace:_}}});const m=Jl.ServerValue;!function w(u){u.INTERNAL.registerComponent(new Mt.wA("database-compat",(s,{instanceIdentifier:o})=>{const d=s.getProvider("app-compat").getImmediate(),_=s.getProvider("database").getImmediate({identifier:o});return new Jl(_,d)},"PUBLIC").setServiceProps({Reference:fl,Query:$a,Database:Jl,DataSnapshot:dd,enableLogging:x_,INTERNAL:kd,ServerValue:m}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.0")}(An.Z);var p=L(6217),C=L(9260);function Re(u){return null==u}function rt(u){return"function"==typeof u.set}function it(u,s){return rt(s)?s:u.ref(s)}function Lt(u,s){if(function k(u){return"string"==typeof u}(u))return s.stringCase();if(rt(u))return s.firebaseCase();if(function J(u){return"function"==typeof u.exportVal}(u))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function $t(u,s,o="on",d=je.z){return new Ht.y(_=>{let D=null;return D=u[o](s,(M,G)=>{d.schedule(()=>{_.next({snapshot:M,prevKey:G})}),"once"===o&&d.schedule(()=>_.complete())},M=>{d.schedule(()=>_.error(M))}),"on"===o?{unsubscribe(){null!=D&&u.off(s,D)}}:{unsubscribe(){}}}).pipe((0,ze.U)(_=>{const{snapshot:D,prevKey:M}=_;let G=null;return D.exists()&&(G=D.key),{type:s,payload:D,prevKey:M,key:G}}),(0,jt.B)())}function Hn(u,s){const o=u.length;for(let d=0;d<o;d++)if(u[d].payload.key===s)return d;return-1}function Ni(u,s){const{payload:o,prevKey:d,key:_}=s,D=Hn(u,_),M=function nr(u,s){if(Re(s))return 0;{const o=Hn(u,s);return-1===o?u.length:o+1}}(u,d);switch(s.type){case"value":if(s.payload&&s.payload.exists()){let G=null;s.payload.forEach(te=>{const de={payload:te,type:"value",prevKey:G,key:te.key};return G=te.key,u=[...u,de],!1})}return u;case"child_added":if(D>-1){const G=u[D-1];(G&&G.key||null)!==d&&(u=u.filter(te=>te.payload.key!==o.key)).splice(M,0,s)}else{if(null==d)return[s,...u];(u=u.slice()).splice(M,0,s)}return u;case"child_removed":return u.filter(G=>G.payload.key!==o.key);case"child_changed":return u.map(G=>G.payload.key===_?s:G);case"child_moved":if(D>-1){const G=u.splice(D,1)[0];return(u=u.slice()).splice(M,0,G),u}return u;default:return u}}function Cr(u){return(Re(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function ni(u,s,o){return function Un(u,s,o){return $t(u,"value","once",o).pipe((0,nt.w)(d=>{const _=[(0,gt.of)(d)];return s.forEach(D=>_.push($t(u,D,"on",o))),(0,qe.T)(..._).pipe((0,Ve.R)(Ni,[]))}),(0,bt.x)())}(u,s=Cr(s),o)}function ci(u,s,o){const d=(s=Cr(s)).map(_=>$t(u,_,"on",o));return(0,qe.T)(...d)}function pi(u,s){return function(d,_){return Lt(d,{stringCase:()=>u.child(d)[s](_),firebaseCase:()=>d[s](_),snapshotCase:()=>d.ref[s](_)})}}function qi(u){return function(o){return o?Lt(o,{stringCase:()=>u.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):u.remove()}}function bs(u,s){return function(){return $t(u,"value","on",s)}}const Wo=new U.OlP("angularfire2.realtimeDatabaseURL"),Us=new U.OlP("angularfire2.database.use-emulator");let Bl=(()=>{class u{constructor(o,d,_,D,M,G,te,de,Xe,st,Dt,Gt,zt,Cn,Pr){this.schedulers=G;const Nr=te,bi=(0,lt.on)(o,M,d);de&&(0,xt.nw)(bi,M,Xe,Dt,Gt,zt,st,Cn),this.database=(0,lt.cc)(`${bi.name}.database.${_}`,"AngularFireDatabase",bi.name,()=>{const ws=M.runOutsideAngular(()=>bi.database(_||void 0));return Nr&&ws.useEmulator(...Nr),ws},[Nr])}list(o,d){const _=this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,o));let D=_;return d&&(D=d(_)),function Vs(u,s){const o=s.schedulers.outsideAngular,d=s.schedulers.ngZone.run(()=>u.ref);return{query:u,update:pi(d,"update"),set:pi(d,"set"),push:_=>d.push(_),remove:qi(d),snapshotChanges:_=>ni(u,_,o).pipe(Ut.iC),stateChanges:_=>ci(u,_,o).pipe(Ut.iC),auditTrail:_=>function di(u,s,o){return function Oi(u,s,o){return function Ji(u,s){return $t(u,"value","on",s).pipe((0,ze.U)(o=>{let d;return o.payload.forEach(_=>(d=_.key,!1)),{data:o,lastKeyToLoad:d}}))}(u,o).pipe((0,Se.M)(s),(0,ze.U)(([_,D])=>{const M=_.lastKeyToLoad,G=D.map(te=>te.key);return{actions:D,lastKeyToLoad:M,loadedKeys:G}}),function tt(u){return(0,$e.e)((s,o)=>{let d=!1,_=0;s.subscribe((0,wt.x)(o,D=>(d||(d=!u(D,_++)))&&o.next(D)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,ze.U)(_=>_.actions))}(u,ci(u,s).pipe((0,Ve.R)((_,D)=>[..._,D],[])),o)}(u,_,o).pipe(Ut.iC),valueChanges:(_,D)=>ni(u,_,o).pipe((0,ze.U)(G=>G.map(te=>D&&D.idField?Object.assign(Object.assign({},te.payload.val()),{[D.idField]:te.key}):te.payload.val())),Ut.iC)}}(D,this)}object(o){return function Go(u,s){return{query:u,snapshotChanges:()=>bs(u,s.schedulers.outsideAngular)().pipe(Ut.iC),update:o=>u.ref.update(o),set:o=>u.ref.set(o),remove:()=>u.ref.remove(),valueChanges:()=>bs(u,s.schedulers.outsideAngular)().pipe(Ut.iC,(0,ze.U)(d=>d.payload.exists()?d.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(lt.Dh),U.LFG(lt.xv,8),U.LFG(Wo,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(Ut.HU),U.LFG(Us,8),U.LFG(xt.zQ,8),U.LFG(xt.Qv,8),U.LFG(xt.L6,8),U.LFG(xt._Q,8),U.LFG(xt.rT,8),U.LFG(xt.lh,8),U.LFG(xt.f7,8),U.LFG(p.nm,8))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),nl=(()=>{class u{constructor(){C.Z.registerVersion("angularfire",Ut.q4.full,"rtdb-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u}),u.\u0275inj=U.cJS({providers:[Bl]}),u})();var Iu=L(6132),hd=L(8746);let Ga=(()=>{class u{constructor(o){this.loaderService=o}intercept(o,d){return this.loaderService.show(),d.handle(o).pipe((0,hd.x)(()=>this.loaderService.hide()))}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Pe.D))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();var pl=L(4383),fh=L(2843),Rc=L(262);let Yu=(()=>{class u{constructor(o){this.injector=o}intercept(o,d){return this.toastrService=this.injector.get(pl._W),d.handle(o).pipe((0,Rc.K)(_=>(this.toastrService.error("Something went wrong, please check log","An error occurred",{positionClass:"toast-top-right"}),console.error(_),(0,fh._)(_))))}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(U.zs3))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var ph=L(4351),Zu=L(9300);class Su{}class Mc{}class Xi{constructor(s){this.normalizedNames=new Map,this.lazyUpdate=null,s?this.lazyInit="string"==typeof s?()=>{this.headers=new Map,s.split("\n").forEach(o=>{const d=o.indexOf(":");if(d>0){const _=o.slice(0,d),D=_.toLowerCase(),M=o.slice(d+1).trim();this.maybeSetNormalizedName(_,D),this.headers.has(D)?this.headers.get(D).push(M):this.headers.set(D,[M])}})}:()=>{this.headers=new Map,Object.keys(s).forEach(o=>{let d=s[o];const _=o.toLowerCase();"string"==typeof d&&(d=[d]),d.length>0&&(this.headers.set(_,d),this.maybeSetNormalizedName(o,_))})}:this.headers=new Map}has(s){return this.init(),this.headers.has(s.toLowerCase())}get(s){this.init();const o=this.headers.get(s.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(s){return this.init(),this.headers.get(s.toLowerCase())||null}append(s,o){return this.clone({name:s,value:o,op:"a"})}set(s,o){return this.clone({name:s,value:o,op:"s"})}delete(s,o){return this.clone({name:s,value:o,op:"d"})}maybeSetNormalizedName(s,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,s)}init(){this.lazyInit&&(this.lazyInit instanceof Xi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(s=>this.applyUpdate(s)),this.lazyUpdate=null))}copyFrom(s){s.init(),Array.from(s.headers.keys()).forEach(o=>{this.headers.set(o,s.headers.get(o)),this.normalizedNames.set(o,s.normalizedNames.get(o))})}clone(s){const o=new Xi;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof Xi?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([s]),o}applyUpdate(s){const o=s.name.toLowerCase();switch(s.op){case"a":case"s":let d=s.value;if("string"==typeof d&&(d=[d]),0===d.length)return;this.maybeSetNormalizedName(s.name,o);const _=("a"===s.op?this.headers.get(o):void 0)||[];_.push(...d),this.headers.set(o,_);break;case"d":const D=s.value;if(D){let M=this.headers.get(o);if(!M)return;M=M.filter(G=>-1===D.indexOf(G)),0===M.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,M)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(s){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>s(this.normalizedNames.get(o),this.headers.get(o)))}}class fd{encodeKey(s){return Xu(s)}encodeValue(s){return Xu(s)}decodeKey(s){return decodeURIComponent(s)}decodeValue(s){return decodeURIComponent(s)}}const gh=/%(\d[a-f0-9])/gi,Oc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Xu(u){return encodeURIComponent(u).replace(gh,(s,o)=>Oc[o]??s)}function mh(u){return`${u}`}class rl{constructor(s={}){if(this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new fd,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ju(u,s){const o=new Map;return u.length>0&&u.replace(/^\?/,"").split("&").forEach(_=>{const D=_.indexOf("="),[M,G]=-1==D?[s.decodeKey(_),""]:[s.decodeKey(_.slice(0,D)),s.decodeValue(_.slice(D+1))],te=o.get(M)||[];te.push(G),o.set(M,te)}),o}(s.fromString,this.encoder)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach(o=>{const d=s.fromObject[o],_=Array.isArray(d)?d.map(mh):[mh(d)];this.map.set(o,_)})):this.map=null}has(s){return this.init(),this.map.has(s)}get(s){this.init();const o=this.map.get(s);return o?o[0]:null}getAll(s){return this.init(),this.map.get(s)||null}keys(){return this.init(),Array.from(this.map.keys())}append(s,o){return this.clone({param:s,value:o,op:"a"})}appendAll(s){const o=[];return Object.keys(s).forEach(d=>{const _=s[d];Array.isArray(_)?_.forEach(D=>{o.push({param:d,value:D,op:"a"})}):o.push({param:d,value:_,op:"a"})}),this.clone(o)}set(s,o){return this.clone({param:s,value:o,op:"s"})}delete(s,o){return this.clone({param:s,value:o,op:"d"})}toString(){return this.init(),this.keys().map(s=>{const o=this.encoder.encodeKey(s);return this.map.get(s).map(d=>o+"="+this.encoder.encodeValue(d)).join("&")}).filter(s=>""!==s).join("&")}clone(s){const o=new rl({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(s),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(s=>this.map.set(s,this.cloneFrom.map.get(s))),this.updates.forEach(s=>{switch(s.op){case"a":case"s":const o=("a"===s.op?this.map.get(s.param):void 0)||[];o.push(mh(s.value)),this.map.set(s.param,o);break;case"d":if(void 0===s.value){this.map.delete(s.param);break}{let d=this.map.get(s.param)||[];const _=d.indexOf(mh(s.value));-1!==_&&d.splice(_,1),d.length>0?this.map.set(s.param,d):this.map.delete(s.param)}}}),this.cloneFrom=this.updates=null)}}class xc{constructor(){this.map=new Map}set(s,o){return this.map.set(s,o),this}get(s){return this.map.has(s)||this.map.set(s,s.defaultValue()),this.map.get(s)}delete(s){return this.map.delete(s),this}has(s){return this.map.has(s)}keys(){return this.map.keys()}}function Au(u){return typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer}function yh(u){return typeof Blob<"u"&&u instanceof Blob}function Fd(u){return typeof FormData<"u"&&u instanceof FormData}class Pc{constructor(s,o,d,_){let D;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=s.toUpperCase(),function _h(u){switch(u){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||_?(this.body=void 0!==d?d:null,D=_):D=d,D&&(this.reportProgress=!!D.reportProgress,this.withCredentials=!!D.withCredentials,D.responseType&&(this.responseType=D.responseType),D.headers&&(this.headers=D.headers),D.context&&(this.context=D.context),D.params&&(this.params=D.params)),this.headers||(this.headers=new Xi),this.context||(this.context=new xc),this.params){const M=this.params.toString();if(0===M.length)this.urlWithParams=o;else{const G=o.indexOf("?");this.urlWithParams=o+(-1===G?"?":G<o.length-1?"&":"")+M}}else this.params=new rl,this.urlWithParams=o}serializeBody(){return null===this.body?null:Au(this.body)||yh(this.body)||Fd(this.body)||function pd(u){return typeof URLSearchParams<"u"&&u instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fd(this.body)?null:yh(this.body)?this.body.type||null:Au(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(s={}){const o=s.method||this.method,d=s.url||this.url,_=s.responseType||this.responseType,D=void 0!==s.body?s.body:this.body,M=void 0!==s.withCredentials?s.withCredentials:this.withCredentials,G=void 0!==s.reportProgress?s.reportProgress:this.reportProgress;let te=s.headers||this.headers,de=s.params||this.params;const Xe=s.context??this.context;return void 0!==s.setHeaders&&(te=Object.keys(s.setHeaders).reduce((st,Dt)=>st.set(Dt,s.setHeaders[Dt]),te)),s.setParams&&(de=Object.keys(s.setParams).reduce((st,Dt)=>st.set(Dt,s.setParams[Dt]),de)),new Pc(o,d,D,{params:de,headers:te,context:Xe,reportProgress:G,responseType:_,withCredentials:M})}}var zo=(()=>((zo=zo||{})[zo.Sent=0]="Sent",zo[zo.UploadProgress=1]="UploadProgress",zo[zo.ResponseHeader=2]="ResponseHeader",zo[zo.DownloadProgress=3]="DownloadProgress",zo[zo.Response=4]="Response",zo[zo.User=5]="User",zo))();class gd{constructor(s,o=200,d="OK"){this.headers=s.headers||new Xi,this.status=void 0!==s.status?s.status:o,this.statusText=s.statusText||d,this.url=s.url||null,this.ok=this.status>=200&&this.status<300}}class Ld extends gd{constructor(s={}){super(s),this.type=zo.ResponseHeader}clone(s={}){return new Ld({headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class vh extends gd{constructor(s={}){super(s),this.type=zo.Response,this.body=void 0!==s.body?s.body:null}clone(s={}){return new vh({body:void 0!==s.body?s.body:this.body,headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class Kh extends gd{constructor(s){super(s,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${s.url||"(unknown url)"}`:`Http failure response for ${s.url||"(unknown url)"}: ${s.status} ${s.statusText}`,this.error=s.error||null}}function ec(u,s){return{body:s,headers:u.headers,context:u.context,observe:u.observe,params:u.params,reportProgress:u.reportProgress,responseType:u.responseType,withCredentials:u.withCredentials}}let Xl=(()=>{class u{constructor(o){this.handler=o}request(o,d,_={}){let D;if(o instanceof Pc)D=o;else{let te,de;te=_.headers instanceof Xi?_.headers:new Xi(_.headers),_.params&&(de=_.params instanceof rl?_.params:new rl({fromObject:_.params})),D=new Pc(o,d,void 0!==_.body?_.body:null,{headers:te,context:_.context,params:de,reportProgress:_.reportProgress,responseType:_.responseType||"json",withCredentials:_.withCredentials})}const M=(0,gt.of)(D).pipe((0,ph.b)(te=>this.handler.handle(te)));if(o instanceof Pc||"events"===_.observe)return M;const G=M.pipe((0,Zu.h)(te=>te instanceof vh));switch(_.observe||"body"){case"body":switch(D.responseType){case"arraybuffer":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&!(te.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return te.body}));case"blob":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&!(te.body instanceof Blob))throw new Error("Response is not a Blob.");return te.body}));case"text":return G.pipe((0,ze.U)(te=>{if(null!==te.body&&"string"!=typeof te.body)throw new Error("Response is not a string.");return te.body}));default:return G.pipe((0,ze.U)(te=>te.body))}case"response":return G;default:throw new Error(`Unreachable: unhandled observe type ${_.observe}}`)}}delete(o,d={}){return this.request("DELETE",o,d)}get(o,d={}){return this.request("GET",o,d)}head(o,d={}){return this.request("HEAD",o,d)}jsonp(o,d){return this.request("JSONP",o,{params:(new rl).append(d,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,d={}){return this.request("OPTIONS",o,d)}patch(o,d,_={}){return this.request("PATCH",o,ec(_,d))}post(o,d,_={}){return this.request("POST",o,ec(_,d))}put(o,d,_={}){return this.request("PUT",o,ec(_,d))}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Su))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();class Bd{constructor(s,o){this.next=s,this.interceptor=o}handle(s){return this.interceptor.intercept(s,this.next)}}const Vd=new U.OlP("HTTP_INTERCEPTORS");let P_=(()=>{class u{intercept(o,d){return d.handle(o)}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();const B_=/^\)\]\}',?\n/;let Mg=(()=>{class u{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ht.y(d=>{const _=this.xhrFactory.build();if(_.open(o.method,o.urlWithParams),o.withCredentials&&(_.withCredentials=!0),o.headers.forEach((Gt,zt)=>_.setRequestHeader(Gt,zt.join(","))),o.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const Gt=o.detectContentTypeHeader();null!==Gt&&_.setRequestHeader("Content-Type",Gt)}if(o.responseType){const Gt=o.responseType.toLowerCase();_.responseType="json"!==Gt?Gt:"text"}const D=o.serializeBody();let M=null;const G=()=>{if(null!==M)return M;const Gt=_.statusText||"OK",zt=new Xi(_.getAllResponseHeaders()),Cn=function tc(u){return"responseURL"in u&&u.responseURL?u.responseURL:/^X-Request-URL:/m.test(u.getAllResponseHeaders())?u.getResponseHeader("X-Request-URL"):null}(_)||o.url;return M=new Ld({headers:zt,status:_.status,statusText:Gt,url:Cn}),M},te=()=>{let{headers:Gt,status:zt,statusText:Cn,url:Pr}=G(),Nr=null;204!==zt&&(Nr=typeof _.response>"u"?_.responseText:_.response),0===zt&&(zt=Nr?200:0);let bi=zt>=200&&zt<300;if("json"===o.responseType&&"string"==typeof Nr){const ws=Nr;Nr=Nr.replace(B_,"");try{Nr=""!==Nr?JSON.parse(Nr):null}catch(_a){Nr=ws,bi&&(bi=!1,Nr={error:_a,text:Nr})}}bi?(d.next(new vh({body:Nr,headers:Gt,status:zt,statusText:Cn,url:Pr||void 0})),d.complete()):d.error(new Kh({error:Nr,headers:Gt,status:zt,statusText:Cn,url:Pr||void 0}))},de=Gt=>{const{url:zt}=G(),Cn=new Kh({error:Gt,status:_.status||0,statusText:_.statusText||"Unknown Error",url:zt||void 0});d.error(Cn)};let Xe=!1;const st=Gt=>{Xe||(d.next(G()),Xe=!0);let zt={type:zo.DownloadProgress,loaded:Gt.loaded};Gt.lengthComputable&&(zt.total=Gt.total),"text"===o.responseType&&!!_.responseText&&(zt.partialText=_.responseText),d.next(zt)},Dt=Gt=>{let zt={type:zo.UploadProgress,loaded:Gt.loaded};Gt.lengthComputable&&(zt.total=Gt.total),d.next(zt)};return _.addEventListener("load",te),_.addEventListener("error",de),_.addEventListener("timeout",de),_.addEventListener("abort",de),o.reportProgress&&(_.addEventListener("progress",st),null!==D&&_.upload&&_.upload.addEventListener("progress",Dt)),_.send(D),d.next({type:zo.Sent}),()=>{_.removeEventListener("error",de),_.removeEventListener("abort",de),_.removeEventListener("load",te),_.removeEventListener("timeout",de),o.reportProgress&&(_.removeEventListener("progress",st),null!==D&&_.upload&&_.upload.removeEventListener("progress",Dt)),_.readyState!==_.DONE&&_.abort()}})}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Ze.JF))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();const pp=new U.OlP("XSRF_COOKIE_NAME"),qh=new U.OlP("XSRF_HEADER_NAME");class Mm{}let Om=(()=>{class u{constructor(o,d,_){this.doc=o,this.platform=d,this.cookieName=_,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Ze.Mx)(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Ze.K0),U.LFG(U.Lbi),U.LFG(pp))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})(),Tf=(()=>{class u{constructor(o,d){this.tokenService=o,this.headerName=d}intercept(o,d){const _=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||_.startsWith("http://")||_.startsWith("https://"))return d.handle(o);const D=this.tokenService.getToken();return null!==D&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,D)})),d.handle(o)}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Mm),U.LFG(qh))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})(),gp=(()=>{class u{constructor(o,d){this.backend=o,this.injector=d,this.chain=null}handle(o){if(null===this.chain){const d=this.injector.get(Vd,[]);this.chain=d.reduceRight((_,D)=>new Bd(_,D),this.backend)}return this.chain.handle(o)}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Mc),U.LFG(U.zs3))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})(),xg=(()=>{class u{static disable(){return{ngModule:u,providers:[{provide:Tf,useClass:P_}]}}static withOptions(o={}){return{ngModule:u,providers:[o.cookieName?{provide:pp,useValue:o.cookieName}:[],o.headerName?{provide:qh,useValue:o.headerName}:[]]}}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u}),u.\u0275inj=U.cJS({providers:[Tf,{provide:Vd,useExisting:Tf,multi:!0},{provide:Mm,useClass:Om},{provide:pp,useValue:"XSRF-TOKEN"},{provide:qh,useValue:"X-XSRF-TOKEN"}]}),u})(),ri=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u}),u.\u0275inj=U.cJS({providers:[Xl,{provide:Su,useClass:gp},Mg,{provide:Mc,useExisting:Mg}],imports:[xg.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),u})();var eo=L(7340);function _p(u){return new U.vHH(3e3,!1)}function Ey(){return typeof window<"u"&&typeof window.document<"u"}function Sf(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ud(u){switch(u.length){case 0:return new eo.ZN;case 1:return u[0];default:return new eo.ZE(u)}}function K_(u,s,o,d,_=new Map,D=new Map){const M=[],G=[];let te=-1,de=null;if(d.forEach(Xe=>{const st=Xe.get("offset"),Dt=st==te,Gt=Dt&&de||new Map;Xe.forEach((zt,Cn)=>{let Pr=Cn,Nr=zt;if("offset"!==Cn)switch(Pr=s.normalizePropertyName(Pr,M),Nr){case eo.k1:Nr=_.get(Cn);break;case eo.l3:Nr=D.get(Cn);break;default:Nr=s.normalizeStyleValue(Cn,Pr,Nr,M)}Gt.set(Pr,Nr)}),Dt||G.push(Gt),de=Gt,te=st}),M.length)throw function Yh(u){return new U.vHH(3502,!1)}();return G}function Lc(u,s,o,d){switch(s){case"start":u.onStart(()=>d(o&&Ip(o,"start",u)));break;case"done":u.onDone(()=>d(o&&Ip(o,"done",u)));break;case"destroy":u.onDestroy(()=>d(o&&Ip(o,"destroy",u)))}}function Ip(u,s,o){const D=Sp(u.element,u.triggerName,u.fromState,u.toState,s||u.phaseName,o.totalTime??u.totalTime,!!o.disabled),M=u._data;return null!=M&&(D._data=M),D}function Sp(u,s,o,d,_="",D=0,M){return{element:u,triggerName:s,fromState:o,toState:d,phaseName:_,totalTime:D,disabled:!!M}}function Na(u,s,o){let d=u.get(s);return d||u.set(s,d=o),d}function eu(u){const s=u.indexOf(":");return[u.substring(1,s),u.slice(s+1)]}let md=(u,s)=>!1,Ap=(u,s,o)=>[],wh=null;function Vl(u){const s=u.parentNode||u.host;return s===wh?null:s}(Sf()||typeof Element<"u")&&(Ey()?(wh=(()=>document.documentElement)(),md=(u,s)=>{for(;s;){if(s===u)return!0;s=Vl(s)}return!1}):md=(u,s)=>u.contains(s),Ap=(u,s,o)=>{if(o)return Array.from(u.querySelectorAll(s));const d=u.querySelector(s);return d?[d]:[]});let nc=null,Ug=!1;const Eh=md,Mp=Ap;let xp=(()=>{class u{validateStyleProperty(o){return function Bc(u){nc||(nc=function Rp(){return typeof document<"u"?document.body:null}()||{},Ug=!!nc.style&&"WebkitAppearance"in nc.style);let s=!0;return nc.style&&!function Vg(u){return"ebkit"==u.substring(1,6)}(u)&&(s=u in nc.style,!s&&Ug&&(s="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in nc.style)),s}(o)}matchesElement(o,d){return!1}containsElement(o,d){return Eh(o,d)}getParentElement(o){return Vl(o)}query(o,d,_){return Mp(o,d,_)}computeStyle(o,d,_){return _||""}animate(o,d,_,D,M,G=[],te){return new eo.ZN(_,D)}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})(),Pp=(()=>{class u{}return u.NOOP=new xp,u})();const Hd="ng-enter",Dh="ng-leave",Hg="ng-trigger",Lp=".ng-trigger",Wm="ng-animating",Af=".ng-animating";function Vc(u){if("number"==typeof u)return u;const s=u.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:Nf(parseFloat(s[1]),s[2])}function Nf(u,s){return"s"===s?1e3*u:u}function Zh(u,s,o){return u.hasOwnProperty("duration")?u:function zm(u,s,o){let _,D=0,M="";if("string"==typeof u){const G=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===G)return s.push(_p()),{duration:0,delay:0,easing:""};_=Nf(parseFloat(G[1]),G[2]);const te=G[3];null!=te&&(D=Nf(parseFloat(te),G[4]));const de=G[5];de&&(M=de)}else _=u;if(!o){let G=!1,te=s.length;_<0&&(s.push(function Pm(){return new U.vHH(3100,!1)}()),G=!0),D<0&&(s.push(function km(){return new U.vHH(3101,!1)}()),G=!0),G&&s.splice(te,0,_p())}return{duration:_,delay:D,easing:M}}(u,s,o)}function Bp(u,s={}){return Object.keys(u).forEach(o=>{s[o]=u[o]}),s}function jg(u){const s=new Map;return Object.keys(u).forEach(o=>{s.set(o,u[o])}),s}function jd(u,s=new Map,o){if(o)for(let[d,_]of o)s.set(d,_);for(let[d,_]of u)s.set(d,_);return s}function Gg(u,s,o){return o?s+":"+o+";":""}function Wg(u){let s="";for(let o=0;o<u.style.length;o++){const d=u.style.item(o);s+=Gg(0,d,u.style.getPropertyValue(d))}for(const o in u.style)u.style.hasOwnProperty(o)&&!o.startsWith("_")&&(s+=Gg(0,Hc(o),u.style[o]));u.setAttribute("style",s)}function rc(u,s,o){u.style&&(s.forEach((d,_)=>{const D=Kg(_);o&&!o.has(_)&&o.set(_,u.style[D]),u.style[D]=d}),Sf()&&Wg(u))}function ic(u,s){u.style&&(s.forEach((o,d)=>{const _=Kg(d);u.style[_]=""}),Sf()&&Wg(u))}function Wa(u){return Array.isArray(u)?1==u.length?u[0]:(0,eo.vP)(u):u}const $d=new RegExp("{{\\s*(.+?)\\s*}}","g");function Gd(u){let s=[];if("string"==typeof u){let o;for(;o=$d.exec(u);)s.push(o[1]);$d.lastIndex=0}return s}function Wd(u,s,o){const d=u.toString(),_=d.replace($d,(D,M)=>{let G=s[M];return null==G&&(o.push(function Lm(u){return new U.vHH(3003,!1)}()),G=""),G.toString()});return _==d?u:_}function Uc(u){const s=[];let o=u.next();for(;!o.done;)s.push(o.value),o=u.next();return s}const zg=/-+([a-z0-9])/g;function Kg(u){return u.replace(zg,(...s)=>s[1].toUpperCase())}function Hc(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ul(u,s,o){switch(s.type){case 7:return u.visitTrigger(s,o);case 0:return u.visitState(s,o);case 1:return u.visitTransition(s,o);case 2:return u.visitSequence(s,o);case 3:return u.visitGroup(s,o);case 4:return u.visitAnimate(s,o);case 5:return u.visitKeyframes(s,o);case 6:return u.visitStyle(s,o);case 8:return u.visitReference(s,o);case 9:return u.visitAnimateChild(s,o);case 10:return u.visitAnimateRef(s,o);case 11:return u.visitQuery(s,o);case 12:return u.visitStagger(s,o);default:throw function H_(u){return new U.vHH(3004,!1)}()}}function Yg(u,s){return window.getComputedStyle(u)[s]}function Qg(u,s){const o=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(d=>function Jg(u,s,o){if(":"==u[0]){const te=function Xg(u,s){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,d)=>parseFloat(d)>parseFloat(o);case":decrement":return(o,d)=>parseFloat(d)<parseFloat(o);default:return s.push(function bp(u){return new U.vHH(3016,!1)}()),"* => *"}}(u,o);if("function"==typeof te)return void s.push(te);u=te}const d=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return o.push(function jm(u){return new U.vHH(3015,!1)}()),s;const _=d[1],D=d[2],M=d[3];s.push(jp(_,M));"<"==D[0]&&!("*"==_&&"*"==M)&&s.push(jp(M,_))}(d,o,s)):o.push(u),o}const ef=new Set(["true","1"]),Of=new Set(["false","0"]);function jp(u,s){const o=ef.has(u)||Of.has(u),d=ef.has(s)||Of.has(s);return(_,D)=>{let M="*"==u||u==_,G="*"==s||s==D;return!M&&o&&"boolean"==typeof _&&(M=_?ef.has(u):Of.has(u)),!G&&d&&"boolean"==typeof D&&(G=D?ef.has(s):Of.has(s)),M&&G}}const Km=new RegExp("s*:selfs*,?","g");function xf(u,s,o,d){return new tm(u).build(s,o,d)}class tm{constructor(s){this._driver=s}build(s,o,d){const _=new Ym(o);return this._resetContextStyleTimingState(_),Ul(this,Wa(s),_)}_resetContextStyleTimingState(s){s.currentQuerySelector="",s.collectedStyles=new Map,s.collectedStyles.set("",new Map),s.currentTime=0}visitTrigger(s,o){let d=o.queryCount=0,_=o.depCount=0;const D=[],M=[];return"@"==s.name.charAt(0)&&o.errors.push(function bh(){return new U.vHH(3006,!1)}()),s.definitions.forEach(G=>{if(this._resetContextStyleTimingState(o),0==G.type){const te=G,de=te.name;de.toString().split(/\s*,\s*/).forEach(Xe=>{te.name=Xe,D.push(this.visitState(te,o))}),te.name=de}else if(1==G.type){const te=this.visitTransition(G,o);d+=te.queryCount,_+=te.depCount,M.push(te)}else o.errors.push(function yp(){return new U.vHH(3007,!1)}())}),{type:7,name:s.name,states:D,transitions:M,queryCount:d,depCount:_,options:null}}visitState(s,o){const d=this.visitStyle(s.styles,o),_=s.options&&s.options.params||null;if(d.containsDynamicStyles){const D=new Set,M=_||{};d.styles.forEach(G=>{G instanceof Map&&G.forEach(te=>{Gd(te).forEach(de=>{M.hasOwnProperty(de)||D.add(de)})})}),D.size&&(Uc(D.values()),o.errors.push(function kc(u,s){return new U.vHH(3008,!1)}()))}return{type:0,name:s.name,style:d,options:_?{params:_}:null}}visitTransition(s,o){o.queryCount=0,o.depCount=0;const d=Ul(this,Wa(s.animation),o);return{type:1,matchers:Qg(s.expr,o.errors),animation:d,queryCount:o.queryCount,depCount:o.depCount,options:Th(s.options)}}visitSequence(s,o){return{type:2,steps:s.steps.map(d=>Ul(this,d,o)),options:Th(s.options)}}visitGroup(s,o){const d=o.currentTime;let _=0;const D=s.steps.map(M=>{o.currentTime=d;const G=Ul(this,M,o);return _=Math.max(_,o.currentTime),G});return o.currentTime=_,{type:3,steps:D,options:Th(s.options)}}visitAnimate(s,o){const d=function nm(u,s){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return Wp(Zh(u,s).duration,0,"");const o=u;if(o.split(/\s+/).some(D=>"{"==D.charAt(0)&&"{"==D.charAt(1))){const D=Wp(0,0,"");return D.dynamic=!0,D.strValue=o,D}const _=Zh(o,s);return Wp(_.duration,_.delay,_.easing)}(s.timings,o.errors);o.currentAnimateTimings=d;let _,D=s.styles?s.styles:(0,eo.oB)({});if(5==D.type)_=this.visitKeyframes(D,o);else{let M=s.styles,G=!1;if(!M){G=!0;const de={};d.easing&&(de.easing=d.easing),M=(0,eo.oB)(de)}o.currentTime+=d.duration+d.delay;const te=this.visitStyle(M,o);te.isEmptyStep=G,_=te}return o.currentAnimateTimings=null,{type:4,timings:d,style:_,options:null}}visitStyle(s,o){const d=this._makeStyleAst(s,o);return this._validateStyleAst(d,o),d}_makeStyleAst(s,o){const d=[],_=Array.isArray(s.styles)?s.styles:[s.styles];for(let G of _)"string"==typeof G?G===eo.l3?d.push(G):o.errors.push(new U.vHH(3002,!1)):d.push(jg(G));let D=!1,M=null;return d.forEach(G=>{if(G instanceof Map&&(G.has("easing")&&(M=G.get("easing"),G.delete("easing")),!D))for(let te of G.values())if(te.toString().indexOf("{{")>=0){D=!0;break}}),{type:6,styles:d,easing:M,offset:s.offset,containsDynamicStyles:D,options:null}}_validateStyleAst(s,o){const d=o.currentAnimateTimings;let _=o.currentTime,D=o.currentTime;d&&D>0&&(D-=d.duration+d.delay),s.styles.forEach(M=>{"string"!=typeof M&&M.forEach((G,te)=>{const de=o.collectedStyles.get(o.currentQuerySelector),Xe=de.get(te);let st=!0;Xe&&(D!=_&&D>=Xe.startTime&&_<=Xe.endTime&&(o.errors.push(function vp(u,s,o,d,_){return new U.vHH(3010,!1)}()),st=!1),D=Xe.startTime),st&&de.set(te,{startTime:D,endTime:_}),o.options&&function Rf(u,s,o){const d=s.params||{},_=Gd(u);_.length&&_.forEach(D=>{d.hasOwnProperty(D)||o.push(function Fm(u){return new U.vHH(3001,!1)}())})}(G,o.options,o.errors)})})}visitKeyframes(s,o){const d={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function j_(){return new U.vHH(3011,!1)}()),d;let D=0;const M=[];let G=!1,te=!1,de=0;const Xe=s.steps.map(Nr=>{const bi=this._makeStyleAst(Nr,o);let ws=null!=bi.offset?bi.offset:function Hl(u){if("string"==typeof u)return null;let s=null;if(Array.isArray(u))u.forEach(o=>{if(o instanceof Map&&o.has("offset")){const d=o;s=parseFloat(d.get("offset")),d.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const o=u;s=parseFloat(o.get("offset")),o.delete("offset")}return s}(bi.styles),_a=0;return null!=ws&&(D++,_a=bi.offset=ws),te=te||_a<0||_a>1,G=G||_a<de,de=_a,M.push(_a),bi});te&&o.errors.push(function Vm(){return new U.vHH(3012,!1)}()),G&&o.errors.push(function wy(){return new U.vHH(3200,!1)}());const st=s.steps.length;let Dt=0;D>0&&D<st?o.errors.push(function Um(){return new U.vHH(3202,!1)}()):0==D&&(Dt=1/(st-1));const Gt=st-1,zt=o.currentTime,Cn=o.currentAnimateTimings,Pr=Cn.duration;return Xe.forEach((Nr,bi)=>{const ws=Dt>0?bi==Gt?1:Dt*bi:M[bi],_a=ws*Pr;o.currentTime=zt+Cn.delay+_a,Cn.duration=_a,this._validateStyleAst(Nr,o),Nr.offset=ws,d.styles.push(Nr)}),d}visitReference(s,o){return{type:8,animation:Ul(this,Wa(s.animation),o),options:Th(s.options)}}visitAnimateChild(s,o){return o.depCount++,{type:9,options:Th(s.options)}}visitAnimateRef(s,o){return{type:10,animation:this.visitReference(s.animation,o),options:Th(s.options)}}visitQuery(s,o){const d=o.currentQuerySelector,_=s.options||{};o.queryCount++,o.currentQuery=s;const[D,M]=function qm(u){const s=!!u.split(/\s*,\s*/).find(o=>":self"==o);return s&&(u=u.replace(Km,"")),u=u.replace(/@\*/g,Lp).replace(/@\w+/g,o=>Lp+"-"+o.slice(1)).replace(/:animating/g,Af),[u,s]}(s.selector);o.currentQuerySelector=d.length?d+" "+D:D,Na(o.collectedStyles,o.currentQuerySelector,new Map);const G=Ul(this,Wa(s.animation),o);return o.currentQuery=null,o.currentQuerySelector=d,{type:11,selector:D,limit:_.limit||0,optional:!!_.optional,includeSelf:M,animation:G,originalSelector:s.selector,options:Th(s.options)}}visitStagger(s,o){o.currentQuery||o.errors.push(function Hm(){return new U.vHH(3013,!1)}());const d="full"===s.timings?{duration:0,delay:0,easing:"full"}:Zh(s.timings,o.errors,!0);return{type:12,animation:Ul(this,Wa(s.animation),o),timings:d,options:null}}}class Ym{constructor(s){this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Th(u){return u?(u=Bp(u)).params&&(u.params=function Gp(u){return u?Bp(u):null}(u.params)):u={},u}function Wp(u,s,o){return{duration:u,delay:s,easing:o}}function rm(u,s,o,d,_,D,M=null,G=!1){return{type:1,element:u,keyframes:s,preStyleProps:o,postStyleProps:d,duration:_,delay:D,totalTime:_+D,easing:M,subTimeline:G}}class Kd{constructor(){this._map=new Map}get(s){return this._map.get(s)||[]}append(s,o){let d=this._map.get(s);d||this._map.set(s,d=[]),d.push(...o)}has(s){return this._map.has(s)}clear(){this._map.clear()}}const q_=new RegExp(":enter","g"),zp=new RegExp(":leave","g");function Pf(u,s,o,d,_,D=new Map,M=new Map,G,te,de=[]){return(new Ch).buildKeyframes(u,s,o,d,_,D,M,G,te,de)}class Ch{buildKeyframes(s,o,d,_,D,M,G,te,de,Xe=[]){de=de||new Kd;const st=new Ff(s,o,de,_,D,Xe,[]);st.options=te;const Dt=te.delay?Vc(te.delay):0;st.currentTimeline.delayNextStep(Dt),st.currentTimeline.setStyles([M],null,st.errors,te),Ul(this,d,st);const Gt=st.timelines.filter(zt=>zt.containsAnimation());if(Gt.length&&G.size){let zt;for(let Cn=Gt.length-1;Cn>=0;Cn--){const Pr=Gt[Cn];if(Pr.element===o){zt=Pr;break}}zt&&!zt.allowOnlyTimelineStyles()&&zt.setStyles([G],null,st.errors,te)}return Gt.length?Gt.map(zt=>zt.buildKeyframes()):[rm(o,[],[],[],0,Dt,"",!1)]}visitTrigger(s,o){}visitState(s,o){}visitTransition(s,o){}visitAnimateChild(s,o){const d=o.subInstructions.get(o.element);if(d){const _=o.createSubContext(s.options),D=o.currentTimeline.currentTime,M=this._visitSubInstructions(d,_,_.options);D!=M&&o.transformIntoNewTimeline(M)}o.previousNode=s}visitAnimateRef(s,o){const d=o.createSubContext(s.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([s.options,s.animation.options],o,d),this.visitReference(s.animation,d),o.transformIntoNewTimeline(d.currentTimeline.currentTime),o.previousNode=s}_applyAnimationRefDelays(s,o,d){for(const _ of s){const D=_?.delay;if(D){const M="number"==typeof D?D:Vc(Wd(D,_?.params??{},o.errors));d.delayNextStep(M)}}}_visitSubInstructions(s,o,d){let D=o.currentTimeline.currentTime;const M=null!=d.duration?Vc(d.duration):null,G=null!=d.delay?Vc(d.delay):null;return 0!==M&&s.forEach(te=>{const de=o.appendInstructionToTimeline(te,M,G);D=Math.max(D,de.duration+de.delay)}),D}visitReference(s,o){o.updateOptions(s.options,!0),Ul(this,s.animation,o),o.previousNode=s}visitSequence(s,o){const d=o.subContextCount;let _=o;const D=s.options;if(D&&(D.params||D.delay)&&(_=o.createSubContext(D),_.transformIntoNewTimeline(),null!=D.delay)){6==_.previousNode.type&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=kf);const M=Vc(D.delay);_.delayNextStep(M)}s.steps.length&&(s.steps.forEach(M=>Ul(this,M,_)),_.currentTimeline.applyStylesToKeyframe(),_.subContextCount>d&&_.transformIntoNewTimeline()),o.previousNode=s}visitGroup(s,o){const d=[];let _=o.currentTimeline.currentTime;const D=s.options&&s.options.delay?Vc(s.options.delay):0;s.steps.forEach(M=>{const G=o.createSubContext(s.options);D&&G.delayNextStep(D),Ul(this,M,G),_=Math.max(_,G.currentTimeline.currentTime),d.push(G.currentTimeline)}),d.forEach(M=>o.currentTimeline.mergeTimelineCollectedStyles(M)),o.transformIntoNewTimeline(_),o.previousNode=s}_visitTiming(s,o){if(s.dynamic){const d=s.strValue;return Zh(o.params?Wd(d,o.params,o.errors):d,o.errors)}return{duration:s.duration,delay:s.delay,easing:s.easing}}visitAnimate(s,o){const d=o.currentAnimateTimings=this._visitTiming(s.timings,o),_=o.currentTimeline;d.delay&&(o.incrementTime(d.delay),_.snapshotCurrentStyles());const D=s.style;5==D.type?this.visitKeyframes(D,o):(o.incrementTime(d.duration),this.visitStyle(D,o),_.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=s}visitStyle(s,o){const d=o.currentTimeline,_=o.currentAnimateTimings;!_&&d.hasCurrentStyleProperties()&&d.forwardFrame();const D=_&&_.easing||s.easing;s.isEmptyStep?d.applyEmptyStep(D):d.setStyles(s.styles,D,o.errors,o.options),o.previousNode=s}visitKeyframes(s,o){const d=o.currentAnimateTimings,_=o.currentTimeline.duration,D=d.duration,G=o.createSubContext().currentTimeline;G.easing=d.easing,s.styles.forEach(te=>{G.forwardTime((te.offset||0)*D),G.setStyles(te.styles,te.easing,o.errors,o.options),G.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(G),o.transformIntoNewTimeline(_+D),o.previousNode=s}visitQuery(s,o){const d=o.currentTimeline.currentTime,_=s.options||{},D=_.delay?Vc(_.delay):0;D&&(6===o.previousNode.type||0==d&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=kf);let M=d;const G=o.invokeQuery(s.selector,s.originalSelector,s.limit,s.includeSelf,!!_.optional,o.errors);o.currentQueryTotal=G.length;let te=null;G.forEach((de,Xe)=>{o.currentQueryIndex=Xe;const st=o.createSubContext(s.options,de);D&&st.delayNextStep(D),de===o.element&&(te=st.currentTimeline),Ul(this,s.animation,st),st.currentTimeline.applyStylesToKeyframe(),M=Math.max(M,st.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(M),te&&(o.currentTimeline.mergeTimelineCollectedStyles(te),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=s}visitStagger(s,o){const d=o.parentContext,_=o.currentTimeline,D=s.timings,M=Math.abs(D.duration),G=M*(o.currentQueryTotal-1);let te=M*o.currentQueryIndex;switch(D.duration<0?"reverse":D.easing){case"reverse":te=G-te;break;case"full":te=d.currentStaggerTime}const Xe=o.currentTimeline;te&&Xe.delayNextStep(te);const st=Xe.currentTime;Ul(this,s.animation,o),o.previousNode=s,d.currentStaggerTime=_.currentTime-st+(_.startTime-d.currentTimeline.startTime)}}const kf={};class Ff{constructor(s,o,d,_,D,M,G,te){this._driver=s,this.element=o,this.subInstructions=d,this._enterClassName=_,this._leaveClassName=D,this.errors=M,this.timelines=G,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=te||new Lf(this._driver,o,0),G.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(s,o){if(!s)return;const d=s;let _=this.options;null!=d.duration&&(_.duration=Vc(d.duration)),null!=d.delay&&(_.delay=Vc(d.delay));const D=d.params;if(D){let M=_.params;M||(M=this.options.params={}),Object.keys(D).forEach(G=>{(!o||!M.hasOwnProperty(G))&&(M[G]=Wd(D[G],M,this.errors))})}}_copyOptions(){const s={};if(this.options){const o=this.options.params;if(o){const d=s.params={};Object.keys(o).forEach(_=>{d[_]=o[_]})}}return s}createSubContext(s=null,o,d){const _=o||this.element,D=new Ff(this._driver,_,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(_,d||0));return D.previousNode=this.previousNode,D.currentAnimateTimings=this.currentAnimateTimings,D.options=this._copyOptions(),D.updateOptions(s),D.currentQueryIndex=this.currentQueryIndex,D.currentQueryTotal=this.currentQueryTotal,D.parentContext=this,this.subContextCount++,D}transformIntoNewTimeline(s){return this.previousNode=kf,this.currentTimeline=this.currentTimeline.fork(this.element,s),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(s,o,d){const _={duration:o??s.duration,delay:this.currentTimeline.currentTime+(d??0)+s.delay,easing:""},D=new Kp(this._driver,s.element,s.keyframes,s.preStyleProps,s.postStyleProps,_,s.stretchStartingKeyframe);return this.timelines.push(D),_}incrementTime(s){this.currentTimeline.forwardTime(this.currentTimeline.duration+s)}delayNextStep(s){s>0&&this.currentTimeline.delayNextStep(s)}invokeQuery(s,o,d,_,D,M){let G=[];if(_&&G.push(this.element),s.length>0){s=(s=s.replace(q_,"."+this._enterClassName)).replace(zp,"."+this._leaveClassName);let de=this._driver.query(this.element,s,1!=d);0!==d&&(de=d<0?de.slice(de.length+d,de.length):de.slice(0,d)),G.push(...de)}return!D&&0==G.length&&M.push(function kg(u){return new U.vHH(3014,!1)}()),G}}class Lf{constructor(s,o,d,_){this._driver=s,this.element=o,this.startTime=d,this._elementTimelineStylesLookup=_,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(s){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+s),o&&this.snapshotCurrentStyles()):this.startTime+=s}fork(s,o){return this.applyStylesToKeyframe(),new Lf(this._driver,s,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(s){this.applyStylesToKeyframe(),this.duration=s,this._loadKeyframe()}_updateStyle(s,o){this._localTimelineStyles.set(s,o),this._globalTimelineStyles.set(s,o),this._styleSummary.set(s,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(s){s&&this._previousKeyframe.set("easing",s);for(let[o,d]of this._globalTimelineStyles)this._backFill.set(o,d||eo.l3),this._currentKeyframe.set(o,eo.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(s,o,d,_){o&&this._previousKeyframe.set("easing",o);const D=_&&_.params||{},M=function Nu(u,s){const o=new Map;let d;return u.forEach(_=>{if("*"===_){d=d||s.keys();for(let D of d)o.set(D,eo.l3)}else jd(_,o)}),o}(s,this._globalTimelineStyles);for(let[G,te]of M){const de=Wd(te,D,d);this._pendingStyles.set(G,de),this._localTimelineStyles.has(G)||this._backFill.set(G,this._globalTimelineStyles.get(G)??eo.l3),this._updateStyle(G,de)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((s,o)=>{this._currentKeyframe.set(o,s)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((s,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,s)}))}snapshotCurrentStyles(){for(let[s,o]of this._localTimelineStyles)this._pendingStyles.set(s,o),this._updateStyle(s,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const s=[];for(let o in this._currentKeyframe)s.push(o);return s}mergeTimelineCollectedStyles(s){s._styleSummary.forEach((o,d)=>{const _=this._styleSummary.get(d);(!_||o.time>_.time)&&this._updateStyle(d,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const s=new Set,o=new Set,d=1===this._keyframes.size&&0===this.duration;let _=[];this._keyframes.forEach((G,te)=>{const de=jd(G,new Map,this._backFill);de.forEach((Xe,st)=>{Xe===eo.k1?s.add(st):Xe===eo.l3&&o.add(st)}),d||de.set("offset",te/this.duration),_.push(de)});const D=s.size?Uc(s.values()):[],M=o.size?Uc(o.values()):[];if(d){const G=_[0],te=new Map(G);G.set("offset",0),te.set("offset",1),_=[G,te]}return rm(this.element,_,D,M,this.duration,this.startTime,this.easing,!1)}}class Kp extends Lf{constructor(s,o,d,_,D,M,G=!1){super(s,o,M.delay),this.keyframes=d,this.preStyleProps=_,this.postStyleProps=D,this._stretchStartingKeyframe=G,this.timings={duration:M.duration,delay:M.delay,easing:M.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let s=this.keyframes,{delay:o,duration:d,easing:_}=this.timings;if(this._stretchStartingKeyframe&&o){const D=[],M=d+o,G=o/M,te=jd(s[0]);te.set("offset",0),D.push(te);const de=jd(s[0]);de.set("offset",jc(G)),D.push(de);const Xe=s.length-1;for(let st=1;st<=Xe;st++){let Dt=jd(s[st]);const Gt=Dt.get("offset");Dt.set("offset",jc((o+Gt*d)/M)),D.push(Dt)}d=M,o=0,_="",s=D}return rm(this.element,s,this.preStyleProps,this.postStyleProps,d,o,_,!0)}}function jc(u,s=3){const o=Math.pow(10,s-1);return Math.round(u*o)/o}class Bf{}const Iy=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qp extends Bf{normalizePropertyName(s,o){return Kg(s)}normalizeStyleValue(s,o,d,_){let D="";const M=d.toString().trim();if(Iy.has(o)&&0!==d&&"0"!==d)if("number"==typeof d)D="px";else{const G=d.match(/^[+-]?[\d\.]+([a-z]*)$/);G&&0==G[1].length&&_.push(function Cf(u,s){return new U.vHH(3005,!1)}())}return M+D}}function Jm(u,s,o,d,_,D,M,G,te,de,Xe,st,Dt){return{type:0,element:u,triggerName:s,isRemovalTransition:_,fromState:o,fromStyles:D,toState:d,toStyles:M,timelines:G,queriedElements:te,preStyleProps:de,postStyleProps:Xe,totalTime:st,errors:Dt}}const Vf={};class Xm{constructor(s,o,d){this._triggerName=s,this.ast=o,this._stateStyles=d}match(s,o,d,_){return function Y_(u,s,o,d,_){return u.some(D=>D(s,o,d,_))}(this.ast.matchers,s,o,d,_)}buildStyles(s,o,d){let _=this._stateStyles.get("*");return void 0!==s&&(_=this._stateStyles.get(s?.toString())||_),_?_.buildStyles(o,d):new Map}build(s,o,d,_,D,M,G,te,de,Xe){const st=[],Dt=this.ast.options&&this.ast.options.params||Vf,zt=this.buildStyles(d,G&&G.params||Vf,st),Cn=te&&te.params||Vf,Pr=this.buildStyles(_,Cn,st),Nr=new Set,bi=new Map,ws=new Map,_a="void"===_,nu={params:om(Cn,Dt),delay:this.ast.options?.delay},ru=Xe?[]:Pf(s,o,this.ast.animation,D,M,zt,Pr,nu,de,st);let $l=0;if(ru.forEach(lc=>{$l=Math.max(lc.duration+lc.delay,$l)}),st.length)return Jm(o,this._triggerName,d,_,_a,zt,Pr,[],[],bi,ws,$l,st);ru.forEach(lc=>{const uc=lc.element,lf=Na(bi,uc,new Set);lc.preStyleProps.forEach(iu=>lf.add(iu));const Zf=Na(ws,uc,new Set);lc.postStyleProps.forEach(iu=>Zf.add(iu)),uc!==o&&Nr.add(uc)});const Gc=Uc(Nr.values());return Jm(o,this._triggerName,d,_,_a,zt,Pr,ru,Gc,bi,ws,$l)}}function om(u,s){const o=Bp(s);for(const d in u)u.hasOwnProperty(d)&&null!=u[d]&&(o[d]=u[d]);return o}class Uf{constructor(s,o,d){this.styles=s,this.defaultParams=o,this.normalizer=d}buildStyles(s,o){const d=new Map,_=Bp(this.defaultParams);return Object.keys(s).forEach(D=>{const M=s[D];null!==M&&(_[D]=M)}),this.styles.styles.forEach(D=>{"string"!=typeof D&&D.forEach((M,G)=>{M&&(M=Wd(M,_,o));const te=this.normalizer.normalizePropertyName(G,o);M=this.normalizer.normalizeStyleValue(G,te,M,o),d.set(te,M)})}),d}}class jf{constructor(s,o,d){this.name=s,this.ast=o,this._normalizer=d,this.transitionFactories=[],this.states=new Map,o.states.forEach(_=>{this.states.set(_.name,new Uf(_.style,_.options&&_.options.params||{},d))}),Zp(this.states,"true","1"),Zp(this.states,"false","0"),o.transitions.forEach(_=>{this.transitionFactories.push(new Xm(s,_,this.states))}),this.fallbackTransition=function Sy(u,s,o){return new Xm(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(M,G)=>!0],options:null,queryCount:0,depCount:0},s)}(s,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(s,o,d,_){return this.transitionFactories.find(M=>M.match(s,o,d,_))||null}matchStyles(s,o,d){return this.fallbackTransition.buildStyles(s,o,d)}}function Zp(u,s,o){u.has(s)?u.has(o)||u.set(o,u.get(s)):u.has(o)&&u.set(s,u.get(o))}const e_=new Kd;class t_{constructor(s,o,d){this.bodyNode=s,this._driver=o,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(s,o){const d=[],D=xf(this._driver,o,d,[]);if(d.length)throw function Fg(u){return new U.vHH(3503,!1)}();this._animations.set(s,D)}_buildPlayer(s,o,d){const _=s.element,D=K_(0,this._normalizer,0,s.keyframes,o,d);return this._driver.animate(_,D,s.duration,s.delay,s.easing,[],!0)}create(s,o,d={}){const _=[],D=this._animations.get(s);let M;const G=new Map;if(D?(M=Pf(this._driver,o,D,Hd,Dh,new Map,new Map,d,e_,_),M.forEach(Xe=>{const st=Na(G,Xe.element,new Map);Xe.postStyleProps.forEach(Dt=>st.set(Dt,null))})):(_.push(function Lg(){return new U.vHH(3300,!1)}()),M=[]),_.length)throw function $_(u){return new U.vHH(3504,!1)}();G.forEach((Xe,st)=>{Xe.forEach((Dt,Gt)=>{Xe.set(Gt,this._driver.computeStyle(st,Gt,eo.l3))})});const de=Ud(M.map(Xe=>{const st=G.get(Xe.element);return this._buildPlayer(Xe,new Map,st)}));return this._playersById.set(s,de),de.onDestroy(()=>this.destroy(s)),this.players.push(de),de}destroy(s){const o=this._getPlayer(s);o.destroy(),this._playersById.delete(s);const d=this.players.indexOf(o);d>=0&&this.players.splice(d,1)}_getPlayer(s){const o=this._playersById.get(s);if(!o)throw function $m(u){return new U.vHH(3301,!1)}();return o}listen(s,o,d,_){const D=Sp(o,"","","");return Lc(this._getPlayer(s),d,D,_),()=>{}}command(s,o,d,_){if("register"==d)return void this.register(s,_[0]);if("create"==d)return void this.create(s,o,_[0]||{});const D=this._getPlayer(s);switch(d){case"play":D.play();break;case"pause":D.pause();break;case"reset":D.reset();break;case"restart":D.restart();break;case"finish":D.finish();break;case"init":D.init();break;case"setPosition":D.setPosition(parseFloat(_[0]));break;case"destroy":this.destroy(s)}}}const $f="ng-animate-queued",tf="ng-animate-disabled",Jp=[],qd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jl="__ng_removed";class Wf{constructor(s,o=""){this.namespaceId=o;const d=s&&s.hasOwnProperty("value");if(this.value=function Xp(u){return u??null}(d?s.value:s),d){const D=Bp(s);delete D.value,this.options=D}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(s){const o=s.params;if(o){const d=this.options.params;Object.keys(o).forEach(_=>{null==d[_]&&(d[_]=o[_])})}}}const nf="void",rf=new Wf(nf);class xi{constructor(s,o,d){this.id=s,this.hostElement=o,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,Mu(o,this._hostClassName)}listen(s,o,d,_){if(!this._triggers.has(o))throw function G_(u,s){return new U.vHH(3302,!1)}();if(null==d||0==d.length)throw function W_(u){return new U.vHH(3303,!1)}();if(!function Do(u){return"start"==u||"done"==u}(d))throw function z_(u,s){return new U.vHH(3400,!1)}();const D=Na(this._elementListeners,s,[]),M={name:o,phase:d,callback:_};D.push(M);const G=Na(this._engine.statesByElement,s,new Map);return G.has(o)||(Mu(s,Hg),Mu(s,Hg+"-"+o),G.set(o,rf)),()=>{this._engine.afterFlush(()=>{const te=D.indexOf(M);te>=0&&D.splice(te,1),this._triggers.has(o)||G.delete(o)})}}register(s,o){return!this._triggers.has(s)&&(this._triggers.set(s,o),!0)}_getTrigger(s){const o=this._triggers.get(s);if(!o)throw function Bg(u){return new U.vHH(3401,!1)}();return o}trigger(s,o,d,_=!0){const D=this._getTrigger(o),M=new um(this.id,o,s);let G=this._engine.statesByElement.get(s);G||(Mu(s,Hg),Mu(s,Hg+"-"+o),this._engine.statesByElement.set(s,G=new Map));let te=G.get(o);const de=new Wf(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&te&&de.absorbOptions(te.options),G.set(o,de),te||(te=rf),de.value!==nf&&te.value===de.value){if(!function eg(u,s){const o=Object.keys(u),d=Object.keys(s);if(o.length!=d.length)return!1;for(let _=0;_<o.length;_++){const D=o[_];if(!s.hasOwnProperty(D)||u[D]!==s[D])return!1}return!0}(te.params,de.params)){const Cn=[],Pr=D.matchStyles(te.value,te.params,Cn),Nr=D.matchStyles(de.value,de.params,Cn);Cn.length?this._engine.reportError(Cn):this._engine.afterFlush(()=>{ic(s,Pr),rc(s,Nr)})}return}const Dt=Na(this._engine.playersByElement,s,[]);Dt.forEach(Cn=>{Cn.namespaceId==this.id&&Cn.triggerName==o&&Cn.queued&&Cn.destroy()});let Gt=D.matchTransition(te.value,de.value,s,de.params),zt=!1;if(!Gt){if(!_)return;Gt=D.fallbackTransition,zt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:o,transition:Gt,fromState:te,toState:de,player:M,isFallbackTransition:zt}),zt||(Mu(s,$f),M.onStart(()=>{sc(s,$f)})),M.onDone(()=>{let Cn=this.players.indexOf(M);Cn>=0&&this.players.splice(Cn,1);const Pr=this._engine.playersByElement.get(s);if(Pr){let Nr=Pr.indexOf(M);Nr>=0&&Pr.splice(Nr,1)}}),this.players.push(M),Dt.push(M),M}deregister(s){this._triggers.delete(s),this._engine.statesByElement.forEach(o=>o.delete(s)),this._elementListeners.forEach((o,d)=>{this._elementListeners.set(d,o.filter(_=>_.name!=s))})}clearElementCache(s){this._engine.statesByElement.delete(s),this._elementListeners.delete(s);const o=this._engine.playersByElement.get(s);o&&(o.forEach(d=>d.destroy()),this._engine.playersByElement.delete(s))}_signalRemovalForInnerTriggers(s,o){const d=this._engine.driver.query(s,Lp,!0);d.forEach(_=>{if(_[jl])return;const D=this._engine.fetchNamespacesByElement(_);D.size?D.forEach(M=>M.triggerLeaveAnimation(_,o,!1,!0)):this.clearElementCache(_)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(_=>this.clearElementCache(_)))}triggerLeaveAnimation(s,o,d,_){const D=this._engine.statesByElement.get(s),M=new Map;if(D){const G=[];if(D.forEach((te,de)=>{if(M.set(de,te.value),this._triggers.has(de)){const Xe=this.trigger(s,de,nf,_);Xe&&G.push(Xe)}}),G.length)return this._engine.markElementAsRemoved(this.id,s,!0,o,M),d&&Ud(G).onDone(()=>this._engine.processLeaveNode(s)),!0}return!1}prepareLeaveAnimationListeners(s){const o=this._elementListeners.get(s),d=this._engine.statesByElement.get(s);if(o&&d){const _=new Set;o.forEach(D=>{const M=D.name;if(_.has(M))return;_.add(M);const te=this._triggers.get(M).fallbackTransition,de=d.get(M)||rf,Xe=new Wf(nf),st=new um(this.id,M,s);this._engine.totalQueuedPlayers++,this._queue.push({element:s,triggerName:M,transition:te,fromState:de,toState:Xe,player:st,isFallbackTransition:!0})})}}removeNode(s,o){const d=this._engine;if(s.childElementCount&&this._signalRemovalForInnerTriggers(s,o),this.triggerLeaveAnimation(s,o,!0))return;let _=!1;if(d.totalAnimations){const D=d.players.length?d.playersByQueriedElement.get(s):[];if(D&&D.length)_=!0;else{let M=s;for(;M=M.parentNode;)if(d.statesByElement.get(M)){_=!0;break}}}if(this.prepareLeaveAnimationListeners(s),_)d.markElementAsRemoved(this.id,s,!1,o);else{const D=s[jl];(!D||D===qd)&&(d.afterFlush(()=>this.clearElementCache(s)),d.destroyInnerAnimations(s),d._onRemovalComplete(s,o))}}insertNode(s,o){Mu(s,this._hostClassName)}drainQueuedTransitions(s){const o=[];return this._queue.forEach(d=>{const _=d.player;if(_.destroyed)return;const D=d.element,M=this._elementListeners.get(D);M&&M.forEach(G=>{if(G.name==d.triggerName){const te=Sp(D,d.triggerName,d.fromState.value,d.toState.value);te._data=s,Lc(d.player,G.phase,te,G.callback)}}),_.markedForDestroy?this._engine.afterFlush(()=>{_.destroy()}):o.push(d)}),this._queue=[],o.sort((d,_)=>{const D=d.transition.ast.depCount,M=_.transition.ast.depCount;return 0==D||0==M?D-M:this._engine.driver.containsElement(d.element,_.element)?1:-1})}destroy(s){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,s)}elementContainsData(s){let o=!1;return this._elementListeners.has(s)&&(o=!0),o=!!this._queue.find(d=>d.element===s)||o,o}}class n_{constructor(s,o,d){this.bodyNode=s,this.driver=o,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(_,D)=>{}}_onRemovalComplete(s,o){this.onRemovalComplete(s,o)}get queuedPlayers(){const s=[];return this._namespaceList.forEach(o=>{o.players.forEach(d=>{d.queued&&s.push(d)})}),s}createNamespace(s,o){const d=new xi(s,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(d,o):(this.newHostElements.set(o,d),this.collectEnterElement(o)),this._namespaceLookup[s]=d}_balanceNamespaceList(s,o){const d=this._namespaceList,_=this.namespacesByHostElement;if(d.length-1>=0){let M=!1,G=this.driver.getParentElement(o);for(;G;){const te=_.get(G);if(te){const de=d.indexOf(te);d.splice(de+1,0,s),M=!0;break}G=this.driver.getParentElement(G)}M||d.unshift(s)}else d.push(s);return _.set(o,s),s}register(s,o){let d=this._namespaceLookup[s];return d||(d=this.createNamespace(s,o)),d}registerTrigger(s,o,d){let _=this._namespaceLookup[s];_&&_.register(o,d)&&this.totalAnimations++}destroy(s,o){if(!s)return;const d=this._fetchNamespace(s);this.afterFlush(()=>{this.namespacesByHostElement.delete(d.hostElement),delete this._namespaceLookup[s];const _=this._namespaceList.indexOf(d);_>=0&&this._namespaceList.splice(_,1)}),this.afterFlushAnimationsDone(()=>d.destroy(o))}_fetchNamespace(s){return this._namespaceLookup[s]}fetchNamespacesByElement(s){const o=new Set,d=this.statesByElement.get(s);if(d)for(let _ of d.values())if(_.namespaceId){const D=this._fetchNamespace(_.namespaceId);D&&o.add(D)}return o}trigger(s,o,d,_){if(zf(o)){const D=this._fetchNamespace(s);if(D)return D.trigger(o,d,_),!0}return!1}insertNode(s,o,d,_){if(!zf(o))return;const D=o[jl];if(D&&D.setForRemoval){D.setForRemoval=!1,D.setForMove=!0;const M=this.collectedLeaveElements.indexOf(o);M>=0&&this.collectedLeaveElements.splice(M,1)}if(s){const M=this._fetchNamespace(s);M&&M.insertNode(o,d)}_&&this.collectEnterElement(o)}collectEnterElement(s){this.collectedEnterElements.push(s)}markElementAsDisabled(s,o){o?this.disabledNodes.has(s)||(this.disabledNodes.add(s),Mu(s,tf)):this.disabledNodes.has(s)&&(this.disabledNodes.delete(s),sc(s,tf))}removeNode(s,o,d,_){if(zf(o)){const D=s?this._fetchNamespace(s):null;if(D?D.removeNode(o,_):this.markElementAsRemoved(s,o,!1,_),d){const M=this.namespacesByHostElement.get(o);M&&M.id!==s&&M.removeNode(o,_)}}else this._onRemovalComplete(o,_)}markElementAsRemoved(s,o,d,_,D){this.collectedLeaveElements.push(o),o[jl]={namespaceId:s,setForRemoval:_,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:D}}listen(s,o,d,_,D){return zf(o)?this._fetchNamespace(s).listen(o,d,_,D):()=>{}}_buildInstruction(s,o,d,_,D){return s.transition.build(this.driver,s.element,s.fromState.value,s.toState.value,d,_,s.fromState.options,s.toState.options,o,D)}destroyInnerAnimations(s){let o=this.driver.query(s,Lp,!0);o.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(s,Af,!0),o.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(s){const o=this.playersByElement.get(s);o&&o.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(s){const o=this.playersByQueriedElement.get(s);o&&o.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(s=>{if(this.players.length)return Ud(this.players).onDone(()=>s());s()})}processLeaveNode(s){const o=s[jl];if(o&&o.setForRemoval){if(s[jl]=qd,o.namespaceId){this.destroyInnerAnimations(s);const d=this._fetchNamespace(o.namespaceId);d&&d.clearElementCache(s)}this._onRemovalComplete(s,o.setForRemoval)}s.classList?.contains(tf)&&this.markElementAsDisabled(s,!1),this.driver.query(s,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(s=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,_)=>this._balanceNamespaceList(d,_)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)Mu(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{o=this._flushAnimations(d,s)}finally{for(let _=0;_<d.length;_++)d[_]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],o.length?Ud(o).onDone(()=>{d.forEach(_=>_())}):d.forEach(_=>_())}}reportError(s){throw function Dp(u){return new U.vHH(3402,!1)}()}_flushAnimations(s,o){const d=new Kd,_=[],D=new Map,M=[],G=new Map,te=new Map,de=new Map,Xe=new Set;this.disabledNodes.forEach(rr=>{Xe.add(rr);const Ir=this.driver.query(rr,".ng-animate-queued",!0);for(let Br=0;Br<Ir.length;Br++)Xe.add(Ir[Br])});const st=this.bodyNode,Dt=Array.from(this.statesByElement.keys()),Gt=Kf(Dt,this.collectedEnterElements),zt=new Map;let Cn=0;Gt.forEach((rr,Ir)=>{const Br=Hd+Cn++;zt.set(Ir,Br),rr.forEach(fs=>Mu(fs,Br))});const Pr=[],Nr=new Set,bi=new Set;for(let rr=0;rr<this.collectedLeaveElements.length;rr++){const Ir=this.collectedLeaveElements[rr],Br=Ir[jl];Br&&Br.setForRemoval&&(Pr.push(Ir),Nr.add(Ir),Br.hasAnimation?this.driver.query(Ir,".ng-star-inserted",!0).forEach(fs=>Nr.add(fs)):bi.add(Ir))}const ws=new Map,_a=Kf(Dt,Array.from(Nr));_a.forEach((rr,Ir)=>{const Br=Dh+Cn++;ws.set(Ir,Br),rr.forEach(fs=>Mu(fs,Br))}),s.push(()=>{Gt.forEach((rr,Ir)=>{const Br=zt.get(Ir);rr.forEach(fs=>sc(fs,Br))}),_a.forEach((rr,Ir)=>{const Br=ws.get(Ir);rr.forEach(fs=>sc(fs,Br))}),Pr.forEach(rr=>{this.processLeaveNode(rr)})});const nu=[],ru=[];for(let rr=this._namespaceList.length-1;rr>=0;rr--)this._namespaceList[rr].drainQueuedTransitions(o).forEach(Br=>{const fs=Br.player,za=Br.element;if(nu.push(fs),this.collectedEnterElements.length){const sl=za[jl];if(sl&&sl.setForMove){if(sl.previousTriggersValues&&sl.previousTriggersValues.has(Br.triggerName)){const zc=sl.previousTriggersValues.get(Br.triggerName),xu=this.statesByElement.get(Br.element);if(xu&&xu.has(Br.triggerName)){const To=xu.get(Br.triggerName);To.value=zc,xu.set(Br.triggerName,To)}}return void fs.destroy()}}const hu=!st||!this.driver.containsElement(st,za),Al=ws.get(za),Wc=zt.get(za),Hs=this._buildInstruction(Br,d,Wc,Al,hu);if(Hs.errors&&Hs.errors.length)return void ru.push(Hs);if(hu)return fs.onStart(()=>ic(za,Hs.fromStyles)),fs.onDestroy(()=>rc(za,Hs.toStyles)),void _.push(fs);if(Br.isFallbackTransition)return fs.onStart(()=>ic(za,Hs.fromStyles)),fs.onDestroy(()=>rc(za,Hs.toStyles)),void _.push(fs);const p_=[];Hs.timelines.forEach(sl=>{sl.stretchStartingKeyframe=!0,this.disabledNodes.has(sl.element)||p_.push(sl)}),Hs.timelines=p_,d.append(za,Hs.timelines),M.push({instruction:Hs,player:fs,element:za}),Hs.queriedElements.forEach(sl=>Na(G,sl,[]).push(fs)),Hs.preStyleProps.forEach((sl,zc)=>{if(sl.size){let xu=te.get(zc);xu||te.set(zc,xu=new Set),sl.forEach((To,Mh)=>xu.add(Mh))}}),Hs.postStyleProps.forEach((sl,zc)=>{let xu=de.get(zc);xu||de.set(zc,xu=new Set),sl.forEach((To,Mh)=>xu.add(Mh))})});if(ru.length){const rr=[];ru.forEach(Ir=>{rr.push(function Tp(u,s){return new U.vHH(3505,!1)}())}),nu.forEach(Ir=>Ir.destroy()),this.reportError(rr)}const $l=new Map,Gc=new Map;M.forEach(rr=>{const Ir=rr.element;d.has(Ir)&&(Gc.set(Ir,Ir),this._beforeAnimationBuild(rr.player.namespaceId,rr.instruction,$l))}),_.forEach(rr=>{const Ir=rr.element;this._getPreviousPlayers(Ir,!1,rr.namespaceId,rr.triggerName,null).forEach(fs=>{Na($l,Ir,[]).push(fs),fs.destroy()})});const lc=Pr.filter(rr=>s_(rr,te,de)),uc=new Map;Ru(uc,this.driver,bi,de,eo.l3).forEach(rr=>{s_(rr,te,de)&&lc.push(rr)});const Zf=new Map;Gt.forEach((rr,Ir)=>{Ru(Zf,this.driver,new Set(rr),te,eo.k1)}),lc.forEach(rr=>{const Ir=uc.get(rr),Br=Zf.get(rr);uc.set(rr,new Map([...Array.from(Ir?.entries()??[]),...Array.from(Br?.entries()??[])]))});const iu=[],uf=[],eh={};M.forEach(rr=>{const{element:Ir,player:Br,instruction:fs}=rr;if(d.has(Ir)){if(Xe.has(Ir))return Br.onDestroy(()=>rc(Ir,fs.toStyles)),Br.disabled=!0,Br.overrideTotalTime(fs.totalTime),void _.push(Br);let za=eh;if(Gc.size>1){let Al=Ir;const Wc=[];for(;Al=Al.parentNode;){const Hs=Gc.get(Al);if(Hs){za=Hs;break}Wc.push(Al)}Wc.forEach(Hs=>Gc.set(Hs,za))}const hu=this._buildAnimation(Br.namespaceId,fs,$l,D,Zf,uc);if(Br.setRealPlayer(hu),za===eh)iu.push(Br);else{const Al=this.playersByElement.get(za);Al&&Al.length&&(Br.parentPlayer=Ud(Al)),_.push(Br)}}else ic(Ir,fs.fromStyles),Br.onDestroy(()=>rc(Ir,fs.toStyles)),uf.push(Br),Xe.has(Ir)&&_.push(Br)}),uf.forEach(rr=>{const Ir=D.get(rr.element);if(Ir&&Ir.length){const Br=Ud(Ir);rr.setRealPlayer(Br)}}),_.forEach(rr=>{rr.parentPlayer?rr.syncPlayerEvents(rr.parentPlayer):rr.destroy()});for(let rr=0;rr<Pr.length;rr++){const Ir=Pr[rr],Br=Ir[jl];if(sc(Ir,Dh),Br&&Br.hasAnimation)continue;let fs=[];if(G.size){let hu=G.get(Ir);hu&&hu.length&&fs.push(...hu);let Al=this.driver.query(Ir,Af,!0);for(let Wc=0;Wc<Al.length;Wc++){let Hs=G.get(Al[Wc]);Hs&&Hs.length&&fs.push(...Hs)}}const za=fs.filter(hu=>!hu.destroyed);za.length?i_(this,Ir,za):this.processLeaveNode(Ir)}return Pr.length=0,iu.forEach(rr=>{this.players.push(rr),rr.onDone(()=>{rr.destroy();const Ir=this.players.indexOf(rr);this.players.splice(Ir,1)}),rr.play()}),iu}elementContainsData(s,o){let d=!1;const _=o[jl];return _&&_.setForRemoval&&(d=!0),this.playersByElement.has(o)&&(d=!0),this.playersByQueriedElement.has(o)&&(d=!0),this.statesByElement.has(o)&&(d=!0),this._fetchNamespace(s).elementContainsData(o)||d}afterFlush(s){this._flushFns.push(s)}afterFlushAnimationsDone(s){this._whenQuietFns.push(s)}_getPreviousPlayers(s,o,d,_,D){let M=[];if(o){const G=this.playersByQueriedElement.get(s);G&&(M=G)}else{const G=this.playersByElement.get(s);if(G){const te=!D||D==nf;G.forEach(de=>{de.queued||!te&&de.triggerName!=_||M.push(de)})}}return(d||_)&&(M=M.filter(G=>!(d&&d!=G.namespaceId||_&&_!=G.triggerName))),M}_beforeAnimationBuild(s,o,d){const D=o.element,M=o.isRemovalTransition?void 0:s,G=o.isRemovalTransition?void 0:o.triggerName;for(const te of o.timelines){const de=te.element,Xe=de!==D,st=Na(d,de,[]);this._getPreviousPlayers(de,Xe,M,G,o.toState).forEach(Gt=>{const zt=Gt.getRealPlayer();zt.beforeDestroy&&zt.beforeDestroy(),Gt.destroy(),st.push(Gt)})}ic(D,o.fromStyles)}_buildAnimation(s,o,d,_,D,M){const G=o.triggerName,te=o.element,de=[],Xe=new Set,st=new Set,Dt=o.timelines.map(zt=>{const Cn=zt.element;Xe.add(Cn);const Pr=Cn[jl];if(Pr&&Pr.removedBeforeQueried)return new eo.ZN(zt.duration,zt.delay);const Nr=Cn!==te,bi=function cm(u){const s=[];return dm(u,s),s}((d.get(Cn)||Jp).map($l=>$l.getRealPlayer())).filter($l=>!!$l.element&&$l.element===Cn),ws=D.get(Cn),_a=M.get(Cn),nu=K_(0,this._normalizer,0,zt.keyframes,ws,_a),ru=this._buildPlayer(zt,nu,bi);if(zt.subTimeline&&_&&st.add(Cn),Nr){const $l=new um(s,G,Cn);$l.setRealPlayer(ru),de.push($l)}return ru});de.forEach(zt=>{Na(this.playersByQueriedElement,zt.element,[]).push(zt),zt.onDone(()=>function r_(u,s,o){let d=u.get(s);if(d){if(d.length){const _=d.indexOf(o);d.splice(_,1)}0==d.length&&u.delete(s)}return d}(this.playersByQueriedElement,zt.element,zt))}),Xe.forEach(zt=>Mu(zt,Wm));const Gt=Ud(Dt);return Gt.onDestroy(()=>{Xe.forEach(zt=>sc(zt,Wm)),rc(te,o.toStyles)}),st.forEach(zt=>{Na(_,zt,[]).push(Gt)}),Gt}_buildPlayer(s,o,d){return o.length>0?this.driver.animate(s.element,o,s.duration,s.delay,s.easing,d):new eo.ZN(s.duration,s.delay)}}class um{constructor(s,o,d){this.namespaceId=s,this.triggerName=o,this.element=d,this._player=new eo.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(s){this._containsRealPlayer||(this._player=s,this._queuedCallbacks.forEach((o,d)=>{o.forEach(_=>Lc(s,d,void 0,_))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(s.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(s){this.totalTime=s}syncPlayerEvents(s){const o=this._player;o.triggerCallback&&s.onStart(()=>o.triggerCallback("start")),s.onDone(()=>this.finish()),s.onDestroy(()=>this.destroy())}_queueEvent(s,o){Na(this._queuedCallbacks,s,[]).push(o)}onDone(s){this.queued&&this._queueEvent("done",s),this._player.onDone(s)}onStart(s){this.queued&&this._queueEvent("start",s),this._player.onStart(s)}onDestroy(s){this.queued&&this._queueEvent("destroy",s),this._player.onDestroy(s)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(s){this.queued||this._player.setPosition(s)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(s){const o=this._player;o.triggerCallback&&o.triggerCallback(s)}}function zf(u){return u&&1===u.nodeType}function il(u,s){const o=u.style.display;return u.style.display=s??"none",o}function Ru(u,s,o,d,_){const D=[];o.forEach(te=>D.push(il(te)));const M=[];d.forEach((te,de)=>{const Xe=new Map;te.forEach(st=>{const Dt=s.computeStyle(de,st,_);Xe.set(st,Dt),(!Dt||0==Dt.length)&&(de[jl]=lm,M.push(de))}),u.set(de,Xe)});let G=0;return o.forEach(te=>il(te,D[G++])),M}function Kf(u,s){const o=new Map;if(u.forEach(G=>o.set(G,[])),0==s.length)return o;const _=new Set(s),D=new Map;function M(G){if(!G)return 1;let te=D.get(G);if(te)return te;const de=G.parentNode;return te=o.has(de)?de:_.has(de)?1:M(de),D.set(G,te),te}return s.forEach(G=>{const te=M(G);1!==te&&o.get(te).push(G)}),o}function Mu(u,s){u.classList?.add(s)}function sc(u,s){u.classList?.remove(s)}function i_(u,s,o){Ud(o).onDone(()=>u.processLeaveNode(s))}function dm(u,s){for(let o=0;o<u.length;o++){const d=u[o];d instanceof eo.ZE?dm(d.players,s):s.push(d)}}function s_(u,s,o){const d=o.get(u);if(!d)return!1;let _=s.get(u);return _?d.forEach(D=>_.add(D)):s.set(u,d),o.delete(u),!0}class hm{constructor(s,o,d){this.bodyNode=s,this._driver=o,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(_,D)=>{},this._transitionEngine=new n_(s,o,d),this._timelineEngine=new t_(s,o,d),this._transitionEngine.onRemovalComplete=(_,D)=>this.onRemovalComplete(_,D)}registerTrigger(s,o,d,_,D){const M=s+"-"+_;let G=this._triggerCache[M];if(!G){const te=[],Xe=xf(this._driver,D,te,[]);if(te.length)throw function Ep(u,s){return new U.vHH(3404,!1)}();G=function Hf(u,s,o){return new jf(u,s,o)}(_,Xe,this._normalizer),this._triggerCache[M]=G}this._transitionEngine.registerTrigger(o,_,G)}register(s,o){this._transitionEngine.register(s,o)}destroy(s,o){this._transitionEngine.destroy(s,o)}onInsert(s,o,d,_){this._transitionEngine.insertNode(s,o,d,_)}onRemove(s,o,d,_){this._transitionEngine.removeNode(s,o,_||!1,d)}disableAnimations(s,o){this._transitionEngine.markElementAsDisabled(s,o)}process(s,o,d,_){if("@"==d.charAt(0)){const[D,M]=eu(d);this._timelineEngine.command(D,o,M,_)}else this._transitionEngine.trigger(s,o,d,_)}listen(s,o,d,_,D){if("@"==d.charAt(0)){const[M,G]=eu(d);return this._timelineEngine.listen(M,o,G,D)}return this._transitionEngine.listen(s,o,d,_,D)}flush(s=-1){this._transitionEngine.flush(s)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ih=(()=>{class u{constructor(o,d,_){this._element=o,this._startStyles=d,this._endStyles=_,this._state=0;let D=u.initialStylesByElement.get(o);D||u.initialStylesByElement.set(o,D=new Map),this._initialStyles=D}start(){this._state<1&&(this._startStyles&&rc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rc(this._element,this._initialStyles),this._endStyles&&(rc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(ic(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ic(this._element,this._endStyles),this._endStyles=null),rc(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function o_(u){let s=null;return u.forEach((o,d)=>{(function qf(u){return"display"===u||"position"===u})(d)&&(s=s||new Map,s.set(d,o))}),s}class a_{constructor(s,o,d,_){this.element=s,this.keyframes=o,this.options=d,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(s=>s()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const s=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,s,this.options),this._finalKeyframe=s.length?s[s.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(s){const o=[];return s.forEach(d=>{o.push(Object.fromEntries(d))}),o}_triggerWebAnimation(s,o,d){return s.animate(this._convertKeyframesToObject(o),d)}onStart(s){this._originalOnStartFns.push(s),this._onStartFns.push(s)}onDone(s){this._originalOnDoneFns.push(s),this._onDoneFns.push(s)}onDestroy(s){this._onDestroyFns.push(s)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(s=>s()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(s=>s()),this._onDestroyFns=[])}setPosition(s){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=s*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const s=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,_)=>{"offset"!==_&&s.set(_,this._finished?d:Yg(this.element,_))}),this.currentSnapshot=s}triggerCallback(s){const o="start"===s?this._onStartFns:this._onDoneFns;o.forEach(d=>d()),o.length=0}}class l_{validateStyleProperty(s){return!0}validateAnimatableStyleProperty(s){return!0}matchesElement(s,o){return!1}containsElement(s,o){return Eh(s,o)}getParentElement(s){return Vl(s)}query(s,o,d){return Mp(s,o,d)}computeStyle(s,o,d){return window.getComputedStyle(s)[o]}animate(s,o,d,_,D,M=[]){const te={duration:d,delay:_,fill:0==_?"both":"forwards"};D&&(te.easing=D);const de=new Map,Xe=M.filter(Gt=>Gt instanceof a_);(function Vp(u,s){return 0===u||0===s})(d,_)&&Xe.forEach(Gt=>{Gt.currentSnapshot.forEach((zt,Cn)=>de.set(Cn,zt))});let st=function Ty(u){return u.length?u[0]instanceof Map?u:u.map(s=>jg(s)):[]}(o).map(Gt=>jd(Gt));st=function qg(u,s,o){if(o.size&&s.length){let d=s[0],_=[];if(o.forEach((D,M)=>{d.has(M)||_.push(M),d.set(M,D)}),_.length)for(let D=1;D<s.length;D++){let M=s[D];_.forEach(G=>M.set(G,Yg(u,G)))}}return s}(s,st,de);const Dt=function tg(u,s){let o=null,d=null;return Array.isArray(s)&&s.length?(o=o_(s[0]),s.length>1&&(d=o_(s[s.length-1]))):s instanceof Map&&(o=o_(s)),o||d?new Ih(u,o,d):null}(s,st);return new a_(s,st,te,Dt)}}let Yf=(()=>{class u extends eo._j{constructor(o,d){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(d.body,{id:"0",encapsulation:U.ifc.None,styles:[],data:{animation:[]}})}build(o){const d=this._nextAnimationId.toString();this._nextAnimationId++;const _=Array.isArray(o)?(0,eo.vP)(o):o;return Yd(this._renderer,null,d,"register",[_]),new u_(d,this._renderer)}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(U.FYo),U.LFG(Ze.K0))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();class u_ extends eo.LC{constructor(s,o){super(),this._id=s,this._renderer=o}create(s,o){return new Ou(this._id,s,o||{},this._renderer)}}class Ou{constructor(s,o,d,_){this.id=s,this.element=o,this._renderer=_,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(s,o){return this._renderer.listen(this.element,`@@${this.id}:${s}`,o)}_command(s,...o){return Yd(this._renderer,this.element,this.id,s,o)}onDone(s){this._listen("done",s)}onStart(s){this._listen("start",s)}onDestroy(s){this._listen("destroy",s)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(s){this._command("setPosition",s)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Yd(u,s,o,d,_){return u.setProperty(s,`@@${o}:${d}`,_)}const oc="@.disabled";let sf=(()=>{class u{constructor(o,d,_){this.delegate=o,this.engine=d,this._zone=_,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),d.onRemovalComplete=(D,M)=>{const G=M?.parentNode(D);G&&M.removeChild(G,D)}}createRenderer(o,d){const D=this.delegate.createRenderer(o,d);if(!(o&&d&&d.data&&d.data.animation)){let Xe=this._rendererCache.get(D);return Xe||(Xe=new tu("",D,this.engine,()=>this._rendererCache.delete(D)),this._rendererCache.set(D,Xe)),Xe}const M=d.id,G=d.id+"-"+this._currentId;this._currentId++,this.engine.register(G,o);const te=Xe=>{Array.isArray(Xe)?Xe.forEach(te):this.engine.registerTrigger(M,G,o,Xe.name,Xe)};return d.data.animation.forEach(te),new af(this,G,D,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,d,_){o>=0&&o<this._microtaskId?this._zone.run(()=>d(_)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(D=>{const[M,G]=D;M(G)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,_]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(U.FYo),U.LFG(hm),U.LFG(U.R0b))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})();class tu{constructor(s,o,d,_){this.namespaceId=s,this.delegate=o,this.engine=d,this._onDestroy=_,this.destroyNode=this.delegate.destroyNode?D=>o.destroyNode(D):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(s,o){return this.delegate.createElement(s,o)}createComment(s){return this.delegate.createComment(s)}createText(s){return this.delegate.createText(s)}appendChild(s,o){this.delegate.appendChild(s,o),this.engine.onInsert(this.namespaceId,o,s,!1)}insertBefore(s,o,d,_=!0){this.delegate.insertBefore(s,o,d),this.engine.onInsert(this.namespaceId,o,s,_)}removeChild(s,o,d){this.engine.onRemove(this.namespaceId,o,this.delegate,d)}selectRootElement(s,o){return this.delegate.selectRootElement(s,o)}parentNode(s){return this.delegate.parentNode(s)}nextSibling(s){return this.delegate.nextSibling(s)}setAttribute(s,o,d,_){this.delegate.setAttribute(s,o,d,_)}removeAttribute(s,o,d){this.delegate.removeAttribute(s,o,d)}addClass(s,o){this.delegate.addClass(s,o)}removeClass(s,o){this.delegate.removeClass(s,o)}setStyle(s,o,d,_){this.delegate.setStyle(s,o,d,_)}removeStyle(s,o,d){this.delegate.removeStyle(s,o,d)}setProperty(s,o,d){"@"==o.charAt(0)&&o==oc?this.disableAnimations(s,!!d):this.delegate.setProperty(s,o,d)}setValue(s,o){this.delegate.setValue(s,o)}listen(s,o,d){return this.delegate.listen(s,o,d)}disableAnimations(s,o){this.engine.disableAnimations(s,o)}}class af extends tu{constructor(s,o,d,_,D){super(o,d,_,D),this.factory=s,this.namespaceId=o}setProperty(s,o,d){"@"==o.charAt(0)?"."==o.charAt(1)&&o==oc?this.disableAnimations(s,d=void 0===d||!!d):this.engine.process(this.namespaceId,s,o.slice(1),d):this.delegate.setProperty(s,o,d)}listen(s,o,d){if("@"==o.charAt(0)){const _=function Zd(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(s);let D=o.slice(1),M="";return"@"!=D.charAt(0)&&([D,M]=function Qd(u){const s=u.indexOf(".");return[u.substring(0,s),u.slice(s+1)]}(D)),this.engine.listen(this.namespaceId,_,D,M,G=>{this.factory.scheduleListenerCallback(G._data||-1,d,G)})}return this.delegate.listen(s,o,d)}}const Ah=[{provide:eo._j,useClass:Yf},{provide:Bf,useFactory:function ac(){return new qp}},{provide:hm,useClass:(()=>{class u extends hm{constructor(o,d,_,D){super(o.body,d,_)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(o){return new(o||u)(U.LFG(Ze.K0),U.LFG(Pp),U.LFG(Bf),U.LFG(U.z2F))},u.\u0275prov=U.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:U.FYo,useFactory:function Jd(u,s,o){return new sf(u,s,o)},deps:[h.se,hm,U.R0b]}],Xd=[{provide:Pp,useFactory:()=>new l_},{provide:U.QbO,useValue:"BrowserAnimations"},...Ah],Nh=[{provide:Pp,useClass:xp},{provide:U.QbO,useValue:"NoopAnimations"},...Ah];let Rh=(()=>{class u{static withConfig(o){return{ngModule:u,providers:o.disableAnimations?Nh:Xd}}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u}),u.\u0275inj=U.cJS({providers:Xd,imports:[h.b2]}),u})();var d_=L(4466);class h_{constructor(s,o="/assets/i18n/",d=".json"){this.http=s,this.prefix=o,this.suffix=d}getTranslation(s){return this.http.get(`${this.prefix}${s}${this.suffix}`)}}const f_=[{provide:Vd,useClass:Ga,multi:!0},{provide:Vd,useClass:Yu,multi:!0}];let ng=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=U.oAB({type:u,bootstrap:[Ue]}),u.\u0275inj=U.cJS({providers:[f_,Iu.e],imports:[h.b2,Oe,lt.hO.initializeApp(mt_firebase),xt.ww,ct.yb,yt.TE,nl,ee.IJ,Nt.UX,Rh,pl.Rh.forRoot(),d_.m,Nt.u5,ri,ee.jF,ee._A,Ge.aw.forRoot({loader:{provide:Ge.Zw,useFactory:s=>new h_(s),deps:[Xl]}})]}),u})();(0,U.G48)(),h.q6().bootstrapModule(ng).catch(u=>console.error(u))},4383:(cn,dt,L)=>{L.d(dt,{Rh:()=>Mt,_W:()=>Ut});var h=L(4650),U=L(7340),ee=L(7579),Ce=L(1481),Me=L(6895);const Oe=["toast-component",""];function Ge(We,Ye){if(1&We){const Be=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){h.CHM(Be);const en=h.oxw();return h.KtG(en.remove())}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function Pe(We,Ye){if(1&We&&(h.ynx(0),h._uU(1),h.BQk()),2&We){const Be=h.oxw(2);h.xp6(1),h.hij("[",Be.duplicatesCount+1,"]")}}function Ze(We,Ye){if(1&We&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,Pe,2,1,"ng-container",4),h.qZA()),2&We){const Be=h.oxw();h.Tol(Be.options.titleClass),h.uIk("aria-label",Be.title),h.xp6(1),h.hij(" ",Be.title," "),h.xp6(1),h.Q6J("ngIf",Be.duplicatesCount)}}function we(We,Ye){if(1&We&&h._UZ(0,"div",7),2&We){const Be=h.oxw();h.Tol(Be.options.messageClass),h.Q6J("innerHTML",Be.message,h.oJD)}}function _e(We,Ye){if(1&We&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&We){const Be=h.oxw();h.Tol(Be.options.messageClass),h.uIk("aria-label",Be.message),h.xp6(1),h.hij(" ",Be.message," ")}}function Ue(We,Ye){if(1&We&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&We){const Be=h.oxw();h.xp6(1),h.Udp("width",Be.width+"%")}}function Nt(We,Ye){if(1&We){const Be=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){h.CHM(Be);const en=h.oxw();return h.KtG(en.remove())}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function mt(We,Ye){if(1&We&&(h.ynx(0),h._uU(1),h.BQk()),2&We){const Be=h.oxw(2);h.xp6(1),h.hij("[",Be.duplicatesCount+1,"]")}}function lt(We,Ye){if(1&We&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,mt,2,1,"ng-container",4),h.qZA()),2&We){const Be=h.oxw();h.Tol(Be.options.titleClass),h.uIk("aria-label",Be.title),h.xp6(1),h.hij(" ",Be.title," "),h.xp6(1),h.Q6J("ngIf",Be.duplicatesCount)}}function xt(We,Ye){if(1&We&&h._UZ(0,"div",7),2&We){const Be=h.oxw();h.Tol(Be.options.messageClass),h.Q6J("innerHTML",Be.message,h.oJD)}}function yt(We,Ye){if(1&We&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&We){const Be=h.oxw();h.Tol(Be.options.messageClass),h.uIk("aria-label",Be.message),h.xp6(1),h.hij(" ",Be.message," ")}}function ct(We,Ye){if(1&We&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&We){const Be=h.oxw();h.xp6(1),h.Udp("width",Be.width+"%")}}class gt{constructor(Ye,Be,ot,en,an,Dr){this.toastId=Ye,this.config=Be,this.message=ot,this.title=en,this.toastType=an,this.toastRef=Dr,this._onTap=new ee.x,this._onAction=new ee.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ye){this._onAction.next(Ye)}onAction(){return this._onAction.asObservable()}}const qe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ze=new h.OlP("ToastConfig");class jt{constructor(Ye,Be){this.component=Ye,this.injector=Be}attach(Ye,Be){return this._attachedHost=Ye,Ye.attach(this,Be)}detach(){const Ye=this._attachedHost;if(Ye)return this._attachedHost=void 0,Ye.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ye){this._attachedHost=Ye}}class Ve extends class nt{attach(Ye,Be){return this._attachedPortal=Ye,this.attachComponentPortal(Ye,Be)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ye){this._disposeFn=Ye}}{constructor(Ye,Be,ot){super(),this._hostDomElement=Ye,this._componentFactoryResolver=Be,this._appRef=ot}attachComponentPortal(Ye,Be){const ot=this._componentFactoryResolver.resolveComponentFactory(Ye.component);let en;return en=ot.create(Ye.injector),this._appRef.attachView(en.hostView),this.setDisposeFn(()=>{this._appRef.detachView(en.hostView),en.destroy()}),Be?this._hostDomElement.insertBefore(this._getComponentRootNode(en),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(en)),en}_getComponentRootNode(Ye){return Ye.hostView.rootNodes[0]}}let bt=(()=>{class We{constructor(Be){this._document=Be}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Be=this._document.createElement("div");Be.classList.add("overlay-container"),this._document.body.appendChild(Be),this._containerElement=Be}}return We.\u0275fac=function(Be){return new(Be||We)(h.LFG(Me.K0))},We.\u0275prov=(0,h.Yz7)({factory:function(){return new We((0,h.LFG)(Me.K0))},token:We,providedIn:"root"}),We})();class Se{constructor(Ye){this._portalHost=Ye}attach(Ye,Be=!0){return this._portalHost.attach(Ye,Be)}detach(){return this._portalHost.detach()}}let $e=(()=>{class We{constructor(Be,ot,en,an){this._overlayContainer=Be,this._componentFactoryResolver=ot,this._appRef=en,this._document=an,this._paneElements=new Map}create(Be,ot){return this._createOverlayRef(this.getPaneElement(Be,ot))}getPaneElement(Be="",ot){return this._paneElements.get(ot)||this._paneElements.set(ot,{}),this._paneElements.get(ot)[Be]||(this._paneElements.get(ot)[Be]=this._createPaneElement(Be,ot)),this._paneElements.get(ot)[Be]}_createPaneElement(Be,ot){const en=this._document.createElement("div");return en.id="toast-container",en.classList.add(Be),en.classList.add("toast-container"),ot?ot.getContainerElement().appendChild(en):this._overlayContainer.getContainerElement().appendChild(en),en}_createPortalHost(Be){return new Ve(Be,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Be){return new Se(this._createPortalHost(Be))}}return We.\u0275fac=function(Be){return new(Be||We)(h.LFG(bt),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(Me.K0))},We.\u0275prov=(0,h.Yz7)({factory:function(){return new We((0,h.LFG)(bt),(0,h.LFG)(h._Vd),(0,h.LFG)(h.z2F),(0,h.LFG)(Me.K0))},token:We,providedIn:"root"}),We})();class wt{constructor(Ye){this._overlayRef=Ye,this.duplicatesCount=0,this._afterClosed=new ee.x,this._activate=new ee.x,this._manualClose=new ee.x,this._resetTimeout=new ee.x,this._countDuplicate=new ee.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ye,Be){Ye&&this._resetTimeout.next(),Be&&this._countDuplicate.next(++this.duplicatesCount)}}class tt{constructor(Ye,Be){this._toastPackage=Ye,this._parentInjector=Be}get(Ye,Be,ot){return Ye===gt?this._toastPackage:this._parentInjector.get(Ye,Be,ot)}}let Ut=(()=>{class We{constructor(Be,ot,en,an,Dr){this.overlay=ot,this._injector=en,this.sanitizer=an,this.ngZone=Dr,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Be.default),Be.config),Be.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Be.default.iconClasses),Be.config.iconClasses))}show(Be,ot,en={},an=""){return this._preBuildNotification(an,Be,ot,this.applyConfig(en))}success(Be,ot,en={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Be,ot,this.applyConfig(en))}error(Be,ot,en={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Be,ot,this.applyConfig(en))}info(Be,ot,en={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Be,ot,this.applyConfig(en))}warning(Be,ot,en={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Be,ot,this.applyConfig(en))}clear(Be){for(const ot of this.toasts)if(void 0!==Be){if(ot.toastId===Be)return void ot.toastRef.manualClose()}else ot.toastRef.manualClose()}remove(Be){const ot=this._findToast(Be);if(!ot||(ot.activeToast.toastRef.close(),this.toasts.splice(ot.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const en=this.toasts[this.currentlyActive].toastRef;en.isInactive()||(this.currentlyActive=this.currentlyActive+1,en.activate())}return!0}findDuplicate(Be="",ot="",en,an){const{includeTitleDuplicates:Dr}=this.toastrConfig;for(const jn of this.toasts){const gi=Dr&&jn.title===Be;if((!Dr||gi)&&jn.message===ot)return jn.toastRef.onDuplicate(en,an),jn}return null}applyConfig(Be={}){return Object.assign(Object.assign({},this.toastrConfig),Be)}_findToast(Be){for(let ot=0;ot<this.toasts.length;ot++)if(this.toasts[ot].toastId===Be)return{index:ot,activeToast:this.toasts[ot]};return null}_preBuildNotification(Be,ot,en,an){return an.onActivateTick?this.ngZone.run(()=>this._buildNotification(Be,ot,en,an)):this._buildNotification(Be,ot,en,an)}_buildNotification(Be,ot,en,an){if(!an.toastComponent)throw new Error("toastComponent required");const Dr=this.findDuplicate(en,ot,this.toastrConfig.resetTimeoutOnDuplicate&&an.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&en||ot)&&this.toastrConfig.preventDuplicates&&null!==Dr)return Dr;this.previousToastMessage=ot;let jn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(jn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const gi=this.overlay.create(an.positionClass,this.overlayContainer);this.index=this.index+1;let vr=ot;ot&&an.enableHtml&&(vr=this.sanitizer.sanitize(h.q3G.HTML,ot));const Sr=new wt(gi),Kn=new gt(this.index,an,vr,en,Be,Sr),ir=new tt(Kn,this._injector),Tr=new jt(an.toastComponent,ir),hn=gi.attach(Tr,this.toastrConfig.newestOnTop);Sr.componentInstance=hn.instance;const br={toastId:this.index,title:en||"",message:ot||"",toastRef:Sr,onShown:Sr.afterActivate(),onHidden:Sr.afterClosed(),onTap:Kn.onTap(),onAction:Kn.onAction(),portal:hn};return jn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{br.toastRef.activate()})),this.toasts.push(br),br}}return We.\u0275fac=function(Be){return new(Be||We)(h.LFG(ze),h.LFG($e),h.LFG(h.zs3),h.LFG(Ce.H7),h.LFG(h.R0b))},We.\u0275prov=(0,h.Yz7)({factory:function(){return new We((0,h.LFG)(ze),(0,h.LFG)($e),(0,h.LFG)(h.gxx),(0,h.LFG)(Ce.H7),(0,h.LFG)(h.R0b))},token:We,providedIn:"root"}),We})(),Kt=(()=>{class We{constructor(Be,ot,en){this.toastrService=Be,this.toastPackage=ot,this.ngZone=en,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=ot.message,this.title=ot.title,this.options=ot.config,this.originalTimeout=ot.config.timeOut,this.toastClasses=`${ot.toastType} ${ot.config.toastClass}`,this.sub=ot.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ot.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ot.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ot.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Be=(new Date).getTime();this.width=(this.hideTime-Be)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Be,ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Be),ot)):this.timeout=setTimeout(()=>Be(),ot)}outsideInterval(Be,ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Be),ot)):this.intervalId=setInterval(()=>Be(),ot)}runInsideAngular(Be){this.ngZone?this.ngZone.run(()=>Be()):Be()}}return We.\u0275fac=function(Be){return new(Be||We)(h.Y36(Ut),h.Y36(gt),h.Y36(h.R0b))},We.\u0275cmp=h.Xpm({type:We,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Be,ot){1&Be&&h.NdJ("click",function(){return ot.tapToast()})("mouseenter",function(){return ot.stickAround()})("mouseleave",function(){return ot.delayedHideToast()}),2&Be&&(h.d8E("@flyInOut",ot.state),h.Tol(ot.toastClasses),h.Udp("display",ot.displayStyle))},attrs:Oe,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(Be,ot){1&Be&&(h.YNc(0,Ge,3,0,"button",0),h.YNc(1,Ze,3,5,"div",1),h.YNc(2,we,1,3,"div",2),h.YNc(3,_e,2,4,"div",3),h.YNc(4,Ue,2,2,"div",4)),2&Be&&(h.Q6J("ngIf",ot.options.closeButton),h.xp6(1),h.Q6J("ngIf",ot.title),h.xp6(1),h.Q6J("ngIf",ot.message&&ot.options.enableHtml),h.xp6(1),h.Q6J("ngIf",ot.message&&!ot.options.enableHtml),h.xp6(1),h.Q6J("ngIf",ot.options.progressBar))},dependencies:[Me.O5],encapsulation:2,data:{animation:[(0,U.X$)("flyInOut",[(0,U.SB)("inactive",(0,U.oB)({opacity:0})),(0,U.SB)("active",(0,U.oB)({opacity:1})),(0,U.SB)("removed",(0,U.oB)({opacity:0})),(0,U.eR)("inactive => active",(0,U.jt)("{{ easeTime }}ms {{ easing }}")),(0,U.eR)("active => removed",(0,U.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),We})();const An=Object.assign(Object.assign({},qe),{toastComponent:Kt});let Mt=(()=>{class We{static forRoot(Be={}){return{ngModule:We,providers:[{provide:ze,useValue:{default:An,config:Be}}]}}}return We.\u0275fac=function(Be){return new(Be||We)},We.\u0275mod=h.oAB({type:We}),We.\u0275inj=h.cJS({imports:[Me.ez]}),We})(),pe=(()=>{class We{constructor(Be,ot,en){this.toastrService=Be,this.toastPackage=ot,this.appRef=en,this.width=-1,this.toastClasses="",this.state="inactive",this.message=ot.message,this.title=ot.title,this.options=ot.config,this.originalTimeout=ot.config.timeOut,this.toastClasses=`${ot.toastType} ${ot.config.toastClass}`,this.sub=ot.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ot.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ot.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ot.toastRef.countDuplicate().subscribe(an=>{this.duplicatesCount=an})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Be=(new Date).getTime();this.width=(this.hideTime-Be)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return We.\u0275fac=function(Be){return new(Be||We)(h.Y36(Ut),h.Y36(gt),h.Y36(h.z2F))},We.\u0275cmp=h.Xpm({type:We,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Be,ot){1&Be&&h.NdJ("click",function(){return ot.tapToast()})("mouseenter",function(){return ot.stickAround()})("mouseleave",function(){return ot.delayedHideToast()}),2&Be&&(h.Tol(ot.toastClasses),h.Udp("display",ot.displayStyle))},attrs:Oe,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(Be,ot){1&Be&&(h.YNc(0,Nt,3,0,"button",0),h.YNc(1,lt,3,5,"div",1),h.YNc(2,xt,1,3,"div",2),h.YNc(3,yt,2,4,"div",3),h.YNc(4,ct,2,2,"div",4)),2&Be&&(h.Q6J("ngIf",ot.options.closeButton),h.xp6(1),h.Q6J("ngIf",ot.title),h.xp6(1),h.Q6J("ngIf",ot.message&&ot.options.enableHtml),h.xp6(1),h.Q6J("ngIf",ot.message&&!ot.options.enableHtml),h.xp6(1),h.Q6J("ngIf",ot.options.progressBar))},dependencies:[Me.O5],encapsulation:2}),We})();Object.assign(Object.assign({},qe),{toastComponent:pe})},1135:(cn,dt,L)=>{L.d(dt,{X:()=>U});var h=L(7579);class U extends h.x{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const Me=super._subscribe(Ce);return!Me.closed&&Ce.next(this._value),Me}getValue(){const{hasError:Ce,thrownError:Me,_value:Oe}=this;if(Ce)throw Me;return this._throwIfClosed(),Oe}next(Ce){super.next(this._value=Ce)}}},9751:(cn,dt,L)=>{L.d(dt,{y:()=>Pe});var h=L(930),U=L(727),ee=L(8822),Ce=L(9635),Me=L(2416),Oe=L(576),Ge=L(2806);let Pe=(()=>{class Ue{constructor(mt){mt&&(this._subscribe=mt)}lift(mt){const lt=new Ue;return lt.source=this,lt.operator=mt,lt}subscribe(mt,lt,xt){const yt=function _e(Ue){return Ue&&Ue instanceof h.Lv||function we(Ue){return Ue&&(0,Oe.m)(Ue.next)&&(0,Oe.m)(Ue.error)&&(0,Oe.m)(Ue.complete)}(Ue)&&(0,U.Nn)(Ue)}(mt)?mt:new h.Hp(mt,lt,xt);return(0,Ge.x)(()=>{const{operator:ct,source:je}=this;yt.add(ct?ct.call(yt,je):je?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(mt){try{return this._subscribe(mt)}catch(lt){mt.error(lt)}}forEach(mt,lt){return new(lt=Ze(lt))((xt,yt)=>{const ct=new h.Hp({next:je=>{try{mt(je)}catch(Ht){yt(Ht),ct.unsubscribe()}},error:yt,complete:xt});this.subscribe(ct)})}_subscribe(mt){var lt;return null===(lt=this.source)||void 0===lt?void 0:lt.subscribe(mt)}[ee.L](){return this}pipe(...mt){return(0,Ce.U)(mt)(this)}toPromise(mt){return new(mt=Ze(mt))((lt,xt)=>{let yt;this.subscribe(ct=>yt=ct,ct=>xt(ct),()=>lt(yt))})}}return Ue.create=Nt=>new Ue(Nt),Ue})();function Ze(Ue){var Nt;return null!==(Nt=Ue??Me.v.Promise)&&void 0!==Nt?Nt:Promise}},7579:(cn,dt,L)=>{L.d(dt,{x:()=>Ge});var h=L(9751),U=L(727);const Ce=(0,L(3888).d)(Ze=>function(){Ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=L(8737),Oe=L(2806);let Ge=(()=>{class Ze extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(_e){const Ue=new Pe(this,this);return Ue.operator=_e,Ue}_throwIfClosed(){if(this.closed)throw new Ce}next(_e){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ue of this.currentObservers)Ue.next(_e)}})}error(_e){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=_e;const{observers:Ue}=this;for(;Ue.length;)Ue.shift().error(_e)}})}complete(){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:_e}=this;for(;_e.length;)_e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var _e;return(null===(_e=this.observers)||void 0===_e?void 0:_e.length)>0}_trySubscribe(_e){return this._throwIfClosed(),super._trySubscribe(_e)}_subscribe(_e){return this._throwIfClosed(),this._checkFinalizedStatuses(_e),this._innerSubscribe(_e)}_innerSubscribe(_e){const{hasError:Ue,isStopped:Nt,observers:mt}=this;return Ue||Nt?U.Lc:(this.currentObservers=null,mt.push(_e),new U.w0(()=>{this.currentObservers=null,(0,Me.P)(mt,_e)}))}_checkFinalizedStatuses(_e){const{hasError:Ue,thrownError:Nt,isStopped:mt}=this;Ue?_e.error(Nt):mt&&_e.complete()}asObservable(){const _e=new h.y;return _e.source=this,_e}}return Ze.create=(we,_e)=>new Pe(we,_e),Ze})();class Pe extends Ge{constructor(we,_e){super(),this.destination=we,this.source=_e}next(we){var _e,Ue;null===(Ue=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===Ue||Ue.call(_e,we)}error(we){var _e,Ue;null===(Ue=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===Ue||Ue.call(_e,we)}complete(){var we,_e;null===(_e=null===(we=this.destination)||void 0===we?void 0:we.complete)||void 0===_e||_e.call(we)}_subscribe(we){var _e,Ue;return null!==(Ue=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(we))&&void 0!==Ue?Ue:U.Lc}}},930:(cn,dt,L)=>{L.d(dt,{Hp:()=>xt,Lv:()=>Ue});var h=L(576),U=L(727),ee=L(2416),Ce=L(7849),Me=L(5032);const Oe=Ze("C",void 0,void 0);function Ze(gt,qe,ze){return{kind:gt,value:qe,error:ze}}var we=L(3410),_e=L(2806);class Ue extends U.w0{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,U.Nn)(qe)&&qe.add(this)):this.destination=Ht}static create(qe,ze,jt){return new xt(qe,ze,jt)}next(qe){this.isStopped?je(function Pe(gt){return Ze("N",gt,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?je(function Ge(gt){return Ze("E",void 0,gt)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?je(Oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Nt=Function.prototype.bind;function mt(gt,qe){return Nt.call(gt,qe)}class lt{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:ze}=this;if(ze.next)try{ze.next(qe)}catch(jt){yt(jt)}}error(qe){const{partialObserver:ze}=this;if(ze.error)try{ze.error(qe)}catch(jt){yt(jt)}else yt(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(ze){yt(ze)}}}class xt extends Ue{constructor(qe,ze,jt){let nt;if(super(),(0,h.m)(qe)||!qe)nt={next:qe??void 0,error:ze??void 0,complete:jt??void 0};else{let Ve;this&&ee.v.useDeprecatedNextContext?(Ve=Object.create(qe),Ve.unsubscribe=()=>this.unsubscribe(),nt={next:qe.next&&mt(qe.next,Ve),error:qe.error&&mt(qe.error,Ve),complete:qe.complete&&mt(qe.complete,Ve)}):nt=qe}this.destination=new lt(nt)}}function yt(gt){ee.v.useDeprecatedSynchronousErrorHandling?(0,_e.O)(gt):(0,Ce.h)(gt)}function je(gt,qe){const{onStoppedNotification:ze}=ee.v;ze&&we.z.setTimeout(()=>ze(gt,qe))}const Ht={closed:!0,next:Me.Z,error:function ct(gt){throw gt},complete:Me.Z}},727:(cn,dt,L)=>{L.d(dt,{Lc:()=>Oe,w0:()=>Me,Nn:()=>Ge});var h=L(576);const ee=(0,L(3888).d)(Ze=>function(_e){Ze(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((Ue,Nt)=>`${Nt+1}) ${Ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e});var Ce=L(8737);class Me{constructor(we){this.initialTeardown=we,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let we;if(!this.closed){this.closed=!0;const{_parentage:_e}=this;if(_e)if(this._parentage=null,Array.isArray(_e))for(const mt of _e)mt.remove(this);else _e.remove(this);const{initialTeardown:Ue}=this;if((0,h.m)(Ue))try{Ue()}catch(mt){we=mt instanceof ee?mt.errors:[mt]}const{_finalizers:Nt}=this;if(Nt){this._finalizers=null;for(const mt of Nt)try{Pe(mt)}catch(lt){we=we??[],lt instanceof ee?we=[...we,...lt.errors]:we.push(lt)}}if(we)throw new ee(we)}}add(we){var _e;if(we&&we!==this)if(this.closed)Pe(we);else{if(we instanceof Me){if(we.closed||we._hasParent(this))return;we._addParent(this)}(this._finalizers=null!==(_e=this._finalizers)&&void 0!==_e?_e:[]).push(we)}}_hasParent(we){const{_parentage:_e}=this;return _e===we||Array.isArray(_e)&&_e.includes(we)}_addParent(we){const{_parentage:_e}=this;this._parentage=Array.isArray(_e)?(_e.push(we),_e):_e?[_e,we]:we}_removeParent(we){const{_parentage:_e}=this;_e===we?this._parentage=null:Array.isArray(_e)&&(0,Ce.P)(_e,we)}remove(we){const{_finalizers:_e}=this;_e&&(0,Ce.P)(_e,we),we instanceof Me&&we._removeParent(this)}}Me.EMPTY=(()=>{const Ze=new Me;return Ze.closed=!0,Ze})();const Oe=Me.EMPTY;function Ge(Ze){return Ze instanceof Me||Ze&&"closed"in Ze&&(0,h.m)(Ze.remove)&&(0,h.m)(Ze.add)&&(0,h.m)(Ze.unsubscribe)}function Pe(Ze){(0,h.m)(Ze)?Ze():Ze.unsubscribe()}},2416:(cn,dt,L)=>{L.d(dt,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(cn,dt,L)=>{L.d(dt,{a:()=>we});var h=L(9751),U=L(4742),ee=L(8996),Ce=L(4671),Me=L(3268),Oe=L(3269),Ge=L(1810),Pe=L(5403),Ze=L(9672);function we(...Nt){const mt=(0,Oe.yG)(Nt),lt=(0,Oe.jO)(Nt),{args:xt,keys:yt}=(0,U.D)(Nt);if(0===xt.length)return(0,ee.D)([],mt);const ct=new h.y(function _e(Nt,mt,lt=Ce.y){return xt=>{Ue(mt,()=>{const{length:yt}=Nt,ct=new Array(yt);let je=yt,Ht=yt;for(let gt=0;gt<yt;gt++)Ue(mt,()=>{const qe=(0,ee.D)(Nt[gt],mt);let ze=!1;qe.subscribe((0,Pe.x)(xt,jt=>{ct[gt]=jt,ze||(ze=!0,Ht--),Ht||xt.next(lt(ct.slice()))},()=>{--je||xt.complete()}))},xt)},xt)}}(xt,mt,yt?je=>(0,Ge.n)(yt,je):Ce.y));return lt?ct.pipe((0,Me.Z)(lt)):ct}function Ue(Nt,mt,lt){Nt?(0,Ze.f)(lt,Nt,mt):mt()}},7272:(cn,dt,L)=>{L.d(dt,{z:()=>Me});var h=L(8189),ee=L(3269),Ce=L(8996);function Me(...Oe){return function U(){return(0,h.J)(1)}()((0,Ce.D)(Oe,(0,ee.yG)(Oe)))}},9770:(cn,dt,L)=>{L.d(dt,{P:()=>ee});var h=L(9751),U=L(8421);function ee(Ce){return new h.y(Me=>{(0,U.Xf)(Ce()).subscribe(Me)})}},515:(cn,dt,L)=>{L.d(dt,{E:()=>U});const U=new(L(9751).y)(Me=>Me.complete())},4128:(cn,dt,L)=>{L.d(dt,{D:()=>Pe});var h=L(9751),U=L(4742),ee=L(8421),Ce=L(3269),Me=L(5403),Oe=L(3268),Ge=L(1810);function Pe(...Ze){const we=(0,Ce.jO)(Ze),{args:_e,keys:Ue}=(0,U.D)(Ze),Nt=new h.y(mt=>{const{length:lt}=_e;if(!lt)return void mt.complete();const xt=new Array(lt);let yt=lt,ct=lt;for(let je=0;je<lt;je++){let Ht=!1;(0,ee.Xf)(_e[je]).subscribe((0,Me.x)(mt,gt=>{Ht||(Ht=!0,ct--),xt[je]=gt},()=>yt--,void 0,()=>{(!yt||!Ht)&&(ct||mt.next(Ue?(0,Ge.n)(Ue,xt):xt),mt.complete())}))}});return we?Nt.pipe((0,Oe.Z)(we)):Nt}},8996:(cn,dt,L)=>{L.d(dt,{D:()=>qe});var h=L(8421),U=L(5363),ee=L(9468),Oe=L(9751),Pe=L(2202),Ze=L(576),we=L(9672);function Ue(ze,jt){if(!ze)throw new Error("Iterable cannot be null");return new Oe.y(nt=>{(0,we.f)(nt,jt,()=>{const Ve=ze[Symbol.asyncIterator]();(0,we.f)(nt,jt,()=>{Ve.next().then(bt=>{bt.done?nt.complete():nt.next(bt.value)})},0,!0)})})}var Nt=L(3670),mt=L(8239),lt=L(1144),xt=L(6495),yt=L(2206),ct=L(4532),je=L(3260);function qe(ze,jt){return jt?function gt(ze,jt){if(null!=ze){if((0,Nt.c)(ze))return function Ce(ze,jt){return(0,h.Xf)(ze).pipe((0,ee.R)(jt),(0,U.Q)(jt))}(ze,jt);if((0,lt.z)(ze))return function Ge(ze,jt){return new Oe.y(nt=>{let Ve=0;return jt.schedule(function(){Ve===ze.length?nt.complete():(nt.next(ze[Ve++]),nt.closed||this.schedule())})})}(ze,jt);if((0,mt.t)(ze))return function Me(ze,jt){return(0,h.Xf)(ze).pipe((0,ee.R)(jt),(0,U.Q)(jt))}(ze,jt);if((0,yt.D)(ze))return Ue(ze,jt);if((0,xt.T)(ze))return function _e(ze,jt){return new Oe.y(nt=>{let Ve;return(0,we.f)(nt,jt,()=>{Ve=ze[Pe.h](),(0,we.f)(nt,jt,()=>{let bt,Se;try{({value:bt,done:Se}=Ve.next())}catch($e){return void nt.error($e)}Se?nt.complete():nt.next(bt)},0,!0)}),()=>(0,Ze.m)(Ve?.return)&&Ve.return()})}(ze,jt);if((0,je.L)(ze))return function Ht(ze,jt){return Ue((0,je.Q)(ze),jt)}(ze,jt)}throw(0,ct.z)(ze)}(ze,jt):(0,h.Xf)(ze)}},8421:(cn,dt,L)=>{L.d(dt,{Xf:()=>Nt});var h=L(655),U=L(1144),ee=L(8239),Ce=L(9751),Me=L(3670),Oe=L(2206),Ge=L(4532),Pe=L(6495),Ze=L(3260),we=L(576),_e=L(7849),Ue=L(8822);function Nt(gt){if(gt instanceof Ce.y)return gt;if(null!=gt){if((0,Me.c)(gt))return function mt(gt){return new Ce.y(qe=>{const ze=gt[Ue.L]();if((0,we.m)(ze.subscribe))return ze.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(gt);if((0,U.z)(gt))return function lt(gt){return new Ce.y(qe=>{for(let ze=0;ze<gt.length&&!qe.closed;ze++)qe.next(gt[ze]);qe.complete()})}(gt);if((0,ee.t)(gt))return function xt(gt){return new Ce.y(qe=>{gt.then(ze=>{qe.closed||(qe.next(ze),qe.complete())},ze=>qe.error(ze)).then(null,_e.h)})}(gt);if((0,Oe.D)(gt))return ct(gt);if((0,Pe.T)(gt))return function yt(gt){return new Ce.y(qe=>{for(const ze of gt)if(qe.next(ze),qe.closed)return;qe.complete()})}(gt);if((0,Ze.L)(gt))return function je(gt){return ct((0,Ze.Q)(gt))}(gt)}throw(0,Ge.z)(gt)}function ct(gt){return new Ce.y(qe=>{(function Ht(gt,qe){var ze,jt,nt,Ve;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ze=(0,h.KL)(gt);!(jt=yield ze.next()).done;)if(qe.next(jt.value),qe.closed)return}catch(bt){nt={error:bt}}finally{try{jt&&!jt.done&&(Ve=ze.return)&&(yield Ve.call(ze))}finally{if(nt)throw nt.error}}qe.complete()})})(gt,qe).catch(ze=>qe.error(ze))})}},6451:(cn,dt,L)=>{L.d(dt,{T:()=>Oe});var h=L(8189),U=L(8421),ee=L(515),Ce=L(3269),Me=L(8996);function Oe(...Ge){const Pe=(0,Ce.yG)(Ge),Ze=(0,Ce._6)(Ge,1/0),we=Ge;return we.length?1===we.length?(0,U.Xf)(we[0]):(0,h.J)(Ze)((0,Me.D)(we,Pe)):ee.E}},9646:(cn,dt,L)=>{L.d(dt,{of:()=>ee});var h=L(3269),U=L(8996);function ee(...Ce){const Me=(0,h.yG)(Ce);return(0,U.D)(Ce,Me)}},2843:(cn,dt,L)=>{L.d(dt,{_:()=>ee});var h=L(9751),U=L(576);function ee(Ce,Me){const Oe=(0,U.m)(Ce)?Ce:()=>Ce,Ge=Pe=>Pe.error(Oe());return new h.y(Me?Pe=>Me.schedule(Ge,0,Pe):Ge)}},5403:(cn,dt,L)=>{L.d(dt,{x:()=>U});var h=L(930);function U(Ce,Me,Oe,Ge,Pe){return new ee(Ce,Me,Oe,Ge,Pe)}class ee extends h.Lv{constructor(Me,Oe,Ge,Pe,Ze,we){super(Me),this.onFinalize=Ze,this.shouldUnsubscribe=we,this._next=Oe?function(_e){try{Oe(_e)}catch(Ue){Me.error(Ue)}}:super._next,this._error=Pe?function(_e){try{Pe(_e)}catch(Ue){Me.error(Ue)}finally{this.unsubscribe()}}:super._error,this._complete=Ge?function(){try{Ge()}catch(_e){Me.error(_e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Oe}=this;super.unsubscribe(),!Oe&&(null===(Me=this.onFinalize)||void 0===Me||Me.call(this))}}}},262:(cn,dt,L)=>{L.d(dt,{K:()=>Ce});var h=L(8421),U=L(5403),ee=L(4482);function Ce(Me){return(0,ee.e)((Oe,Ge)=>{let we,Pe=null,Ze=!1;Pe=Oe.subscribe((0,U.x)(Ge,void 0,void 0,_e=>{we=(0,h.Xf)(Me(_e,Ce(Me)(Oe))),Pe?(Pe.unsubscribe(),Pe=null,we.subscribe(Ge)):Ze=!0})),Ze&&(Pe.unsubscribe(),Pe=null,we.subscribe(Ge))})}},4351:(cn,dt,L)=>{L.d(dt,{b:()=>ee});var h=L(5577),U=L(576);function ee(Ce,Me){return(0,U.m)(Me)?(0,h.z)(Ce,Me,1):(0,h.z)(Ce,1)}},6590:(cn,dt,L)=>{L.d(dt,{d:()=>ee});var h=L(4482),U=L(5403);function ee(Ce){return(0,h.e)((Me,Oe)=>{let Ge=!1;Me.subscribe((0,U.x)(Oe,Pe=>{Ge=!0,Oe.next(Pe)},()=>{Ge||Oe.next(Ce),Oe.complete()}))})}},1884:(cn,dt,L)=>{L.d(dt,{x:()=>Ce});var h=L(4671),U=L(4482),ee=L(5403);function Ce(Oe,Ge=h.y){return Oe=Oe??Me,(0,U.e)((Pe,Ze)=>{let we,_e=!0;Pe.subscribe((0,ee.x)(Ze,Ue=>{const Nt=Ge(Ue);(_e||!Oe(we,Nt))&&(_e=!1,we=Nt,Ze.next(Ue))}))})}function Me(Oe,Ge){return Oe===Ge}},9300:(cn,dt,L)=>{L.d(dt,{h:()=>ee});var h=L(4482),U=L(5403);function ee(Ce,Me){return(0,h.e)((Oe,Ge)=>{let Pe=0;Oe.subscribe((0,U.x)(Ge,Ze=>Ce.call(Me,Ze,Pe++)&&Ge.next(Ze)))})}},8746:(cn,dt,L)=>{L.d(dt,{x:()=>U});var h=L(4482);function U(ee){return(0,h.e)((Ce,Me)=>{try{Ce.subscribe(Me)}finally{Me.add(ee)}})}},590:(cn,dt,L)=>{L.d(dt,{P:()=>Ge});var h=L(6805),U=L(9300),ee=L(5698),Ce=L(6590),Me=L(8068),Oe=L(4671);function Ge(Pe,Ze){const we=arguments.length>=2;return _e=>_e.pipe(Pe?(0,U.h)((Ue,Nt)=>Pe(Ue,Nt,_e)):Oe.y,(0,ee.q)(1),we?(0,Ce.d)(Ze):(0,Me.T)(()=>new h.K))}},4004:(cn,dt,L)=>{L.d(dt,{U:()=>ee});var h=L(4482),U=L(5403);function ee(Ce,Me){return(0,h.e)((Oe,Ge)=>{let Pe=0;Oe.subscribe((0,U.x)(Ge,Ze=>{Ge.next(Ce.call(Me,Ze,Pe++))}))})}},9718:(cn,dt,L)=>{L.d(dt,{h:()=>U});var h=L(4004);function U(ee){return(0,h.U)(()=>ee)}},8189:(cn,dt,L)=>{L.d(dt,{J:()=>ee});var h=L(5577),U=L(4671);function ee(Ce=1/0){return(0,h.z)(U.y,Ce)}},5577:(cn,dt,L)=>{L.d(dt,{z:()=>Pe});var h=L(4004),U=L(8421),ee=L(4482),Ce=L(9672),Me=L(5403),Ge=L(576);function Pe(Ze,we,_e=1/0){return(0,Ge.m)(we)?Pe((Ue,Nt)=>(0,h.U)((mt,lt)=>we(Ue,mt,Nt,lt))((0,U.Xf)(Ze(Ue,Nt))),_e):("number"==typeof we&&(_e=we),(0,ee.e)((Ue,Nt)=>function Oe(Ze,we,_e,Ue,Nt,mt,lt,xt){const yt=[];let ct=0,je=0,Ht=!1;const gt=()=>{Ht&&!yt.length&&!ct&&we.complete()},qe=jt=>ct<Ue?ze(jt):yt.push(jt),ze=jt=>{mt&&we.next(jt),ct++;let nt=!1;(0,U.Xf)(_e(jt,je++)).subscribe((0,Me.x)(we,Ve=>{Nt?.(Ve),mt?qe(Ve):we.next(Ve)},()=>{nt=!0},void 0,()=>{if(nt)try{for(ct--;yt.length&&ct<Ue;){const Ve=yt.shift();lt?(0,Ce.f)(we,lt,()=>ze(Ve)):ze(Ve)}gt()}catch(Ve){we.error(Ve)}}))};return Ze.subscribe((0,Me.x)(we,qe,()=>{Ht=!0,gt()})),()=>{xt?.()}}(Ue,Nt,Ze,_e)))}},5363:(cn,dt,L)=>{L.d(dt,{Q:()=>Ce});var h=L(9672),U=L(4482),ee=L(5403);function Ce(Me,Oe=0){return(0,U.e)((Ge,Pe)=>{Ge.subscribe((0,ee.x)(Pe,Ze=>(0,h.f)(Pe,Me,()=>Pe.next(Ze),Oe),()=>(0,h.f)(Pe,Me,()=>Pe.complete(),Oe),Ze=>(0,h.f)(Pe,Me,()=>Pe.error(Ze),Oe)))})}},5026:(cn,dt,L)=>{L.d(dt,{R:()=>Ce});var h=L(4482),U=L(5403);function ee(Me,Oe,Ge,Pe,Ze){return(we,_e)=>{let Ue=Ge,Nt=Oe,mt=0;we.subscribe((0,U.x)(_e,lt=>{const xt=mt++;Nt=Ue?Me(Nt,lt,xt):(Ue=!0,lt),Pe&&_e.next(Nt)},Ze&&(()=>{Ue&&_e.next(Nt),_e.complete()})))}}function Ce(Me,Oe){return(0,h.e)(ee(Me,Oe,arguments.length>=2,!0))}},3099:(cn,dt,L)=>{L.d(dt,{B:()=>Me});var h=L(8421),U=L(7579),ee=L(930),Ce=L(4482);function Me(Ge={}){const{connector:Pe=(()=>new U.x),resetOnError:Ze=!0,resetOnComplete:we=!0,resetOnRefCountZero:_e=!0}=Ge;return Ue=>{let Nt,mt,lt,xt=0,yt=!1,ct=!1;const je=()=>{mt?.unsubscribe(),mt=void 0},Ht=()=>{je(),Nt=lt=void 0,yt=ct=!1},gt=()=>{const qe=Nt;Ht(),qe?.unsubscribe()};return(0,Ce.e)((qe,ze)=>{xt++,!ct&&!yt&&je();const jt=lt=lt??Pe();ze.add(()=>{xt--,0===xt&&!ct&&!yt&&(mt=Oe(gt,_e))}),jt.subscribe(ze),!Nt&&xt>0&&(Nt=new ee.Hp({next:nt=>jt.next(nt),error:nt=>{ct=!0,je(),mt=Oe(Ht,Ze,nt),jt.error(nt)},complete:()=>{yt=!0,je(),mt=Oe(Ht,we),jt.complete()}}),(0,h.Xf)(qe).subscribe(Nt))})(Ue)}}function Oe(Ge,Pe,...Ze){if(!0===Pe)return void Ge();if(!1===Pe)return;const we=new ee.Hp({next:()=>{we.unsubscribe(),Ge()}});return Pe(...Ze).subscribe(we)}},3151:(cn,dt,L)=>{L.d(dt,{d:()=>Me});var h=L(7579),U=L(6063);class ee extends h.x{constructor(Ge=1/0,Pe=1/0,Ze=U.l){super(),this._bufferSize=Ge,this._windowTime=Pe,this._timestampProvider=Ze,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Pe===1/0,this._bufferSize=Math.max(1,Ge),this._windowTime=Math.max(1,Pe)}next(Ge){const{isStopped:Pe,_buffer:Ze,_infiniteTimeWindow:we,_timestampProvider:_e,_windowTime:Ue}=this;Pe||(Ze.push(Ge),!we&&Ze.push(_e.now()+Ue)),this._trimBuffer(),super.next(Ge)}_subscribe(Ge){this._throwIfClosed(),this._trimBuffer();const Pe=this._innerSubscribe(Ge),{_infiniteTimeWindow:Ze,_buffer:we}=this,_e=we.slice();for(let Ue=0;Ue<_e.length&&!Ge.closed;Ue+=Ze?1:2)Ge.next(_e[Ue]);return this._checkFinalizedStatuses(Ge),Pe}_trimBuffer(){const{_bufferSize:Ge,_timestampProvider:Pe,_buffer:Ze,_infiniteTimeWindow:we}=this,_e=(we?1:2)*Ge;if(Ge<1/0&&_e<Ze.length&&Ze.splice(0,Ze.length-_e),!we){const Ue=Pe.now();let Nt=0;for(let mt=1;mt<Ze.length&&Ze[mt]<=Ue;mt+=2)Nt=mt;Nt&&Ze.splice(0,Nt+1)}}}var Ce=L(3099);function Me(Oe,Ge,Pe){let Ze,we=!1;return Oe&&"object"==typeof Oe?({bufferSize:Ze=1/0,windowTime:Ge=1/0,refCount:we=!1,scheduler:Pe}=Oe):Ze=Oe??1/0,(0,Ce.B)({connector:()=>new ee(Ze,Ge,Pe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:we})}},8675:(cn,dt,L)=>{L.d(dt,{O:()=>Ce});var h=L(7272),U=L(3269),ee=L(4482);function Ce(...Me){const Oe=(0,U.yG)(Me);return(0,ee.e)((Ge,Pe)=>{(Oe?(0,h.z)(Me,Ge,Oe):(0,h.z)(Me,Ge)).subscribe(Pe)})}},9468:(cn,dt,L)=>{L.d(dt,{R:()=>U});var h=L(4482);function U(ee,Ce=0){return(0,h.e)((Me,Oe)=>{Oe.add(ee.schedule(()=>Me.subscribe(Oe),Ce))})}},3900:(cn,dt,L)=>{L.d(dt,{w:()=>Ce});var h=L(8421),U=L(4482),ee=L(5403);function Ce(Me,Oe){return(0,U.e)((Ge,Pe)=>{let Ze=null,we=0,_e=!1;const Ue=()=>_e&&!Ze&&Pe.complete();Ge.subscribe((0,ee.x)(Pe,Nt=>{Ze?.unsubscribe();let mt=0;const lt=we++;(0,h.Xf)(Me(Nt,lt)).subscribe(Ze=(0,ee.x)(Pe,xt=>Pe.next(Oe?Oe(Nt,xt,lt,mt++):xt),()=>{Ze=null,Ue()}))},()=>{_e=!0,Ue()}))})}},5698:(cn,dt,L)=>{L.d(dt,{q:()=>Ce});var h=L(515),U=L(4482),ee=L(5403);function Ce(Me){return Me<=0?()=>h.E:(0,U.e)((Oe,Ge)=>{let Pe=0;Oe.subscribe((0,ee.x)(Ge,Ze=>{++Pe<=Me&&(Ge.next(Ze),Me<=Pe&&Ge.complete())}))})}},8505:(cn,dt,L)=>{L.d(dt,{b:()=>Me});var h=L(576),U=L(4482),ee=L(5403),Ce=L(4671);function Me(Oe,Ge,Pe){const Ze=(0,h.m)(Oe)||Ge||Pe?{next:Oe,error:Ge,complete:Pe}:Oe;return Ze?(0,U.e)((we,_e)=>{var Ue;null===(Ue=Ze.subscribe)||void 0===Ue||Ue.call(Ze);let Nt=!0;we.subscribe((0,ee.x)(_e,mt=>{var lt;null===(lt=Ze.next)||void 0===lt||lt.call(Ze,mt),_e.next(mt)},()=>{var mt;Nt=!1,null===(mt=Ze.complete)||void 0===mt||mt.call(Ze),_e.complete()},mt=>{var lt;Nt=!1,null===(lt=Ze.error)||void 0===lt||lt.call(Ze,mt),_e.error(mt)},()=>{var mt,lt;Nt&&(null===(mt=Ze.unsubscribe)||void 0===mt||mt.call(Ze)),null===(lt=Ze.finalize)||void 0===lt||lt.call(Ze)}))}):Ce.y}},8068:(cn,dt,L)=>{L.d(dt,{T:()=>Ce});var h=L(6805),U=L(4482),ee=L(5403);function Ce(Oe=Me){return(0,U.e)((Ge,Pe)=>{let Ze=!1;Ge.subscribe((0,ee.x)(Pe,we=>{Ze=!0,Pe.next(we)},()=>Ze?Pe.complete():Pe.error(Oe())))})}function Me(){return new h.K}},1365:(cn,dt,L)=>{L.d(dt,{M:()=>Ge});var h=L(4482),U=L(5403),ee=L(8421),Ce=L(4671),Me=L(5032),Oe=L(3269);function Ge(...Pe){const Ze=(0,Oe.jO)(Pe);return(0,h.e)((we,_e)=>{const Ue=Pe.length,Nt=new Array(Ue);let mt=Pe.map(()=>!1),lt=!1;for(let xt=0;xt<Ue;xt++)(0,ee.Xf)(Pe[xt]).subscribe((0,U.x)(_e,yt=>{Nt[xt]=yt,!lt&&!mt[xt]&&(mt[xt]=!0,(lt=mt.every(Ce.y))&&(mt=null))},Me.Z));we.subscribe((0,U.x)(_e,xt=>{if(lt){const yt=[xt,...Nt];_e.next(Ze?Ze(...yt):yt)}}))})}},4408:(cn,dt,L)=>{L.d(dt,{o:()=>Me});var h=L(727);class U extends h.w0{constructor(Ge,Pe){super()}schedule(Ge,Pe=0){return this}}const ee={setInterval(Oe,Ge,...Pe){const{delegate:Ze}=ee;return Ze?.setInterval?Ze.setInterval(Oe,Ge,...Pe):setInterval(Oe,Ge,...Pe)},clearInterval(Oe){const{delegate:Ge}=ee;return(Ge?.clearInterval||clearInterval)(Oe)},delegate:void 0};var Ce=L(8737);class Me extends U{constructor(Ge,Pe){super(Ge,Pe),this.scheduler=Ge,this.work=Pe,this.pending=!1}schedule(Ge,Pe=0){var Ze;if(this.closed)return this;this.state=Ge;const we=this.id,_e=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(_e,we,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(Ze=this.id)&&void 0!==Ze?Ze:this.requestAsyncId(_e,this.id,Pe),this}requestAsyncId(Ge,Pe,Ze=0){return ee.setInterval(Ge.flush.bind(Ge,this),Ze)}recycleAsyncId(Ge,Pe,Ze=0){if(null!=Ze&&this.delay===Ze&&!1===this.pending)return Pe;null!=Pe&&ee.clearInterval(Pe)}execute(Ge,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ze=this._execute(Ge,Pe);if(Ze)return Ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,Pe){let we,Ze=!1;try{this.work(Ge)}catch(_e){Ze=!0,we=_e||new Error("Scheduled action threw falsy error")}if(Ze)return this.unsubscribe(),we}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:Pe}=this,{actions:Ze}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)(Ze,this),null!=Ge&&(this.id=this.recycleAsyncId(Pe,Ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(cn,dt,L)=>{L.d(dt,{v:()=>ee});var h=L(6063);class U{constructor(Me,Oe=U.now){this.schedulerActionCtor=Me,this.now=Oe}schedule(Me,Oe=0,Ge){return new this.schedulerActionCtor(this,Me).schedule(Ge,Oe)}}U.now=h.l.now;class ee extends U{constructor(Me,Oe=U.now){super(Me,Oe),this.actions=[],this._active=!1}flush(Me){const{actions:Oe}=this;if(this._active)return void Oe.push(Me);let Ge;this._active=!0;do{if(Ge=Me.execute(Me.state,Me.delay))break}while(Me=Oe.shift());if(this._active=!1,Ge){for(;Me=Oe.shift();)Me.unsubscribe();throw Ge}}}},4986:(cn,dt,L)=>{L.d(dt,{P:()=>Ce,z:()=>ee});var h=L(4408);const ee=new(L(7565).v)(h.o),Ce=ee},6063:(cn,dt,L)=>{L.d(dt,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(cn,dt,L)=>{L.d(dt,{z:()=>h});const h={setTimeout(U,ee,...Ce){const{delegate:Me}=h;return Me?.setTimeout?Me.setTimeout(U,ee,...Ce):setTimeout(U,ee,...Ce)},clearTimeout(U){const{delegate:ee}=h;return(ee?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(cn,dt,L)=>{L.d(dt,{h:()=>U});const U=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(cn,dt,L)=>{L.d(dt,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(cn,dt,L)=>{L.d(dt,{K:()=>U});const U=(0,L(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(cn,dt,L)=>{L.d(dt,{_6:()=>Oe,jO:()=>Ce,yG:()=>Me});var h=L(576),U=L(3532);function ee(Ge){return Ge[Ge.length-1]}function Ce(Ge){return(0,h.m)(ee(Ge))?Ge.pop():void 0}function Me(Ge){return(0,U.K)(ee(Ge))?Ge.pop():void 0}function Oe(Ge,Pe){return"number"==typeof ee(Ge)?Ge.pop():Pe}},4742:(cn,dt,L)=>{L.d(dt,{D:()=>Me});const{isArray:h}=Array,{getPrototypeOf:U,prototype:ee,keys:Ce}=Object;function Me(Ge){if(1===Ge.length){const Pe=Ge[0];if(h(Pe))return{args:Pe,keys:null};if(function Oe(Ge){return Ge&&"object"==typeof Ge&&U(Ge)===ee}(Pe)){const Ze=Ce(Pe);return{args:Ze.map(we=>Pe[we]),keys:Ze}}}return{args:Ge,keys:null}}},8737:(cn,dt,L)=>{function h(U,ee){if(U){const Ce=U.indexOf(ee);0<=Ce&&U.splice(Ce,1)}}L.d(dt,{P:()=>h})},3888:(cn,dt,L)=>{function h(U){const Ce=U(Me=>{Error.call(Me),Me.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}L.d(dt,{d:()=>h})},1810:(cn,dt,L)=>{function h(U,ee){return U.reduce((Ce,Me,Oe)=>(Ce[Me]=ee[Oe],Ce),{})}L.d(dt,{n:()=>h})},2806:(cn,dt,L)=>{L.d(dt,{O:()=>Ce,x:()=>ee});var h=L(2416);let U=null;function ee(Me){if(h.v.useDeprecatedSynchronousErrorHandling){const Oe=!U;if(Oe&&(U={errorThrown:!1,error:null}),Me(),Oe){const{errorThrown:Ge,error:Pe}=U;if(U=null,Ge)throw Pe}}else Me()}function Ce(Me){h.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=Me)}},9672:(cn,dt,L)=>{function h(U,ee,Ce,Me=0,Oe=!1){const Ge=ee.schedule(function(){Ce(),Oe?U.add(this.schedule(null,Me)):this.unsubscribe()},Me);if(U.add(Ge),!Oe)return Ge}L.d(dt,{f:()=>h})},4671:(cn,dt,L)=>{function h(U){return U}L.d(dt,{y:()=>h})},1144:(cn,dt,L)=>{L.d(dt,{z:()=>h});const h=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(cn,dt,L)=>{L.d(dt,{D:()=>U});var h=L(576);function U(ee){return Symbol.asyncIterator&&(0,h.m)(ee?.[Symbol.asyncIterator])}},576:(cn,dt,L)=>{function h(U){return"function"==typeof U}L.d(dt,{m:()=>h})},3670:(cn,dt,L)=>{L.d(dt,{c:()=>ee});var h=L(8822),U=L(576);function ee(Ce){return(0,U.m)(Ce[h.L])}},6495:(cn,dt,L)=>{L.d(dt,{T:()=>ee});var h=L(2202),U=L(576);function ee(Ce){return(0,U.m)(Ce?.[h.h])}},8239:(cn,dt,L)=>{L.d(dt,{t:()=>U});var h=L(576);function U(ee){return(0,h.m)(ee?.then)}},3260:(cn,dt,L)=>{L.d(dt,{L:()=>Ce,Q:()=>ee});var h=L(655),U=L(576);function ee(Me){return(0,h.FC)(this,arguments,function*(){const Ge=Me.getReader();try{for(;;){const{value:Pe,done:Ze}=yield(0,h.qq)(Ge.read());if(Ze)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Pe)}}finally{Ge.releaseLock()}})}function Ce(Me){return(0,U.m)(Me?.getReader)}},3532:(cn,dt,L)=>{L.d(dt,{K:()=>U});var h=L(576);function U(ee){return ee&&(0,h.m)(ee.schedule)}},4482:(cn,dt,L)=>{L.d(dt,{A:()=>U,e:()=>ee});var h=L(576);function U(Ce){return(0,h.m)(Ce?.lift)}function ee(Ce){return Me=>{if(U(Me))return Me.lift(function(Oe){try{return Ce(Oe,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(cn,dt,L)=>{L.d(dt,{Z:()=>Ce});var h=L(4004);const{isArray:U}=Array;function Ce(Me){return(0,h.U)(Oe=>function ee(Me,Oe){return U(Oe)?Me(...Oe):Me(Oe)}(Me,Oe))}},5032:(cn,dt,L)=>{function h(){}L.d(dt,{Z:()=>h})},9635:(cn,dt,L)=>{L.d(dt,{U:()=>ee,z:()=>U});var h=L(4671);function U(...Ce){return ee(Ce)}function ee(Ce){return 0===Ce.length?h.y:1===Ce.length?Ce[0]:function(Oe){return Ce.reduce((Ge,Pe)=>Pe(Ge),Oe)}}},7849:(cn,dt,L)=>{L.d(dt,{h:()=>ee});var h=L(2416),U=L(3410);function ee(Ce){U.z.setTimeout(()=>{const{onUnhandledError:Me}=h.v;if(!Me)throw Ce;Me(Ce)})}},4532:(cn,dt,L)=>{function h(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(dt,{z:()=>h})},655:(cn,dt,L)=>{function Ce(Se,$e){var wt={};for(var tt in Se)Object.prototype.hasOwnProperty.call(Se,tt)&&$e.indexOf(tt)<0&&(wt[tt]=Se[tt]);if(null!=Se&&"function"==typeof Object.getOwnPropertySymbols){var Ut=0;for(tt=Object.getOwnPropertySymbols(Se);Ut<tt.length;Ut++)$e.indexOf(tt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Se,tt[Ut])&&(wt[tt[Ut]]=Se[tt[Ut]])}return wt}function Pe(Se,$e,wt,tt){return new(wt||(wt=Promise))(function(Kt,An){function Mt(ie){try{pe(tt.next(ie))}catch(At){An(At)}}function tn(ie){try{pe(tt.throw(ie))}catch(At){An(At)}}function pe(ie){ie.done?Kt(ie.value):function Ut(Kt){return Kt instanceof wt?Kt:new wt(function(An){An(Kt)})}(ie.value).then(Mt,tn)}pe((tt=tt.apply(Se,$e||[])).next())})}function yt(Se){return this instanceof yt?(this.v=Se,this):new yt(Se)}function ct(Se,$e,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut,tt=wt.apply(Se,$e||[]),Kt=[];return Ut={},An("next"),An("throw"),An("return"),Ut[Symbol.asyncIterator]=function(){return this},Ut;function An(We){tt[We]&&(Ut[We]=function(Ye){return new Promise(function(Be,ot){Kt.push([We,Ye,Be,ot])>1||Mt(We,Ye)})})}function Mt(We,Ye){try{!function tn(We){We.value instanceof yt?Promise.resolve(We.value.v).then(pe,ie):At(Kt[0][2],We)}(tt[We](Ye))}catch(Be){At(Kt[0][3],Be)}}function pe(We){Mt("next",We)}function ie(We){Mt("throw",We)}function At(We,Ye){We(Ye),Kt.shift(),Kt.length&&Mt(Kt[0][0],Kt[0][1])}}function Ht(Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,$e=Se[Symbol.asyncIterator];return $e?$e.call(Se):(Se=function Ue(Se){var $e="function"==typeof Symbol&&Symbol.iterator,wt=$e&&Se[$e],tt=0;if(wt)return wt.call(Se);if(Se&&"number"==typeof Se.length)return{next:function(){return Se&&tt>=Se.length&&(Se=void 0),{value:Se&&Se[tt++],done:!Se}}};throw new TypeError($e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Se),wt={},tt("next"),tt("throw"),tt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function tt(Kt){wt[Kt]=Se[Kt]&&function(An){return new Promise(function(Mt,tn){!function Ut(Kt,An,Mt,tn){Promise.resolve(tn).then(function(pe){Kt({value:pe,done:Mt})},An)}(Mt,tn,(An=Se[Kt](An)).done,An.value)})}}}L.d(dt,{FC:()=>ct,KL:()=>Ht,_T:()=>Ce,mG:()=>Pe,qq:()=>yt})},7340:(cn,dt,L)=>{L.d(dt,{LC:()=>U,SB:()=>Ze,X$:()=>Ce,ZE:()=>je,ZN:()=>ct,_j:()=>h,eR:()=>_e,jt:()=>Me,k1:()=>Ht,l3:()=>ee,oB:()=>Pe,vP:()=>Ge});class h{}class U{}const ee="*";function Ce(gt,qe){return{type:7,name:gt,definitions:qe,options:{}}}function Me(gt,qe=null){return{type:4,styles:qe,timings:gt}}function Ge(gt,qe=null){return{type:2,steps:gt,options:qe}}function Pe(gt){return{type:6,styles:gt,offset:null}}function Ze(gt,qe,ze){return{type:0,name:gt,styles:qe,options:ze}}function _e(gt,qe,ze=null){return{type:1,expr:gt,animation:qe,options:ze}}function yt(gt){Promise.resolve().then(gt)}class ct{constructor(qe=0,ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=qe+ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qe=>qe()),this._onDoneFns=[])}onStart(qe){this._originalOnStartFns.push(qe),this._onStartFns.push(qe)}onDone(qe){this._originalOnDoneFns.push(qe),this._onDoneFns.push(qe)}onDestroy(qe){this._onDestroyFns.push(qe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(qe=>qe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(qe=>qe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(qe){this._position=this.totalTime?qe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(qe){const ze="start"==qe?this._onStartFns:this._onDoneFns;ze.forEach(jt=>jt()),ze.length=0}}class je{constructor(qe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=qe;let ze=0,jt=0,nt=0;const Ve=this.players.length;0==Ve?yt(()=>this._onFinish()):this.players.forEach(bt=>{bt.onDone(()=>{++ze==Ve&&this._onFinish()}),bt.onDestroy(()=>{++jt==Ve&&this._onDestroy()}),bt.onStart(()=>{++nt==Ve&&this._onStart()})}),this.totalTime=this.players.reduce((bt,Se)=>Math.max(bt,Se.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(qe=>qe()),this._onDoneFns=[])}init(){this.players.forEach(qe=>qe.init())}onStart(qe){this._onStartFns.push(qe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(qe=>qe()),this._onStartFns=[])}onDone(qe){this._onDoneFns.push(qe)}onDestroy(qe){this._onDestroyFns.push(qe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(qe=>qe.play())}pause(){this.players.forEach(qe=>qe.pause())}restart(){this.players.forEach(qe=>qe.restart())}finish(){this._onFinish(),this.players.forEach(qe=>qe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(qe=>qe.destroy()),this._onDestroyFns.forEach(qe=>qe()),this._onDestroyFns=[])}reset(){this.players.forEach(qe=>qe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(qe){const ze=qe*this.totalTime;this.players.forEach(jt=>{const nt=jt.totalTime?Math.min(1,ze/jt.totalTime):1;jt.setPosition(nt)})}getPosition(){const qe=this.players.reduce((ze,jt)=>null===ze||jt.totalTime>ze.totalTime?jt:ze,null);return null!=qe?qe.getPosition():0}beforeDestroy(){this.players.forEach(qe=>{qe.beforeDestroy&&qe.beforeDestroy()})}triggerCallback(qe){const ze="start"==qe?this._onStartFns:this._onDoneFns;ze.forEach(jt=>jt()),ze.length=0}}const Ht="!"},6895:(cn,dt,L)=>{L.d(dt,{Do:()=>Ht,EM:()=>Ea,HT:()=>Me,JF:()=>qo,K0:()=>Ge,Mx:()=>co,NF:()=>Bs,O5:()=>mi,Ov:()=>ln,PM:()=>Zs,S$:()=>yt,V_:()=>we,Ye:()=>gt,b0:()=>je,bD:()=>ki,ez:()=>wr,mk:()=>Hr,q:()=>ee,sg:()=>Ns,tP:()=>Yi,w_:()=>Oe});var h=L(4650);let U=null;function ee(){return U}function Me(F){U||(U=F)}class Oe{}const Ge=new h.OlP("DocumentToken");let Pe=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=h.Yz7({token:F,factory:function(){return function Ze(){return(0,h.LFG)(_e)}()},providedIn:"platform"}),F})();const we=new h.OlP("Location Initialized");let _e=(()=>{class F extends Pe{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState($){const ce=ee().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",$,!1),()=>ce.removeEventListener("popstate",$)}onHashChange($){const ce=ee().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",$,!1),()=>ce.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ce,Le){Ue()?this._history.pushState($,ce,Le):this.location.hash=Le}replaceState($,ce,Le){Ue()?this._history.replaceState($,ce,Le):this.location.hash=Le}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)(h.LFG(Ge))},F.\u0275prov=h.Yz7({token:F,factory:function(){return function Nt(){return new _e((0,h.LFG)(Ge))}()},providedIn:"platform"}),F})();function Ue(){return!!window.history.pushState}function mt(F,ne){if(0==F.length)return ne;if(0==ne.length)return F;let $=0;return F.endsWith("/")&&$++,ne.startsWith("/")&&$++,2==$?F+ne.substring(1):1==$?F+ne:F+"/"+ne}function lt(F){const ne=F.match(/#|\?|$/),$=ne&&ne.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function xt(F){return F&&"?"!==F[0]?"?"+F:F}let yt=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=h.Yz7({token:F,factory:function(){return(0,h.f3M)(je)},providedIn:"root"}),F})();const ct=new h.OlP("appBaseHref");let je=(()=>{class F extends yt{constructor($,ce){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=ce??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return mt(this._baseHref,$)}path($=!1){const ce=this._platformLocation.pathname+xt(this._platformLocation.search),Le=this._platformLocation.hash;return Le&&$?`${ce}${Le}`:ce}pushState($,ce,Le,Tt){const Vt=this.prepareExternalUrl(Le+xt(Tt));this._platformLocation.pushState($,ce,Vt)}replaceState($,ce,Le,Tt){const Vt=this.prepareExternalUrl(Le+xt(Tt));this._platformLocation.replaceState($,ce,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(h.LFG(Pe),h.LFG(ct,8))},F.\u0275prov=h.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),Ht=(()=>{class F extends yt{constructor($,ce){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl($){const ce=mt(this._baseHref,$);return ce.length>0?"#"+ce:ce}pushState($,ce,Le,Tt){let Vt=this.prepareExternalUrl(Le+xt(Tt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState($,ce,Vt)}replaceState($,ce,Le,Tt){let Vt=this.prepareExternalUrl(Le+xt(Tt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState($,ce,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return F.\u0275fac=function($){return new($||F)(h.LFG(Pe),h.LFG(ct,8))},F.\u0275prov=h.Yz7({token:F,factory:F.\u0275fac}),F})(),gt=(()=>{class F{constructor($){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ce=this._locationStrategy.getBaseHref();this._baseHref=lt(jt(ce)),this._locationStrategy.onPopState(Le=>{this._subject.emit({url:this.path(!0),pop:!0,state:Le.state,type:Le.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ce=""){return this.path()==this.normalize($+xt(ce))}normalize($){return F.stripTrailingSlash(function ze(F,ne){return F&&ne.startsWith(F)?ne.substring(F.length):ne}(this._baseHref,jt($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ce="",Le=null){this._locationStrategy.pushState(Le,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+xt(ce)),Le)}replaceState($,ce="",Le=null){this._locationStrategy.replaceState(Le,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+xt(ce)),Le)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)})),()=>{const ce=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(ce,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ce){this._urlChangeListeners.forEach(Le=>Le($,ce))}subscribe($,ce,Le){return this._subject.subscribe({next:$,error:ce,complete:Le})}}return F.normalizeQueryParams=xt,F.joinWithSlash=mt,F.stripTrailingSlash=lt,F.\u0275fac=function($){return new($||F)(h.LFG(yt))},F.\u0275prov=h.Yz7({token:F,factory:function(){return function qe(){return new gt((0,h.LFG)(yt))}()},providedIn:"root"}),F})();function jt(F){return F.replace(/\/index.html$/,"")}function co(F,ne){ne=encodeURIComponent(ne);for(const $ of F.split(";")){const ce=$.indexOf("="),[Le,Tt]=-1==ce?[$,""]:[$.slice(0,ce),$.slice(ce+1)];if(Le.trim()===ne)return decodeURIComponent(Tt)}return null}let Hr=(()=>{class F{constructor($,ce,Le,Tt){this._iterableDiffers=$,this._keyValueDiffers=ce,this._ngEl=Le,this._renderer=Tt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),$.forEachChangedItem(ce=>this._toggleClass(ce.key,ce.currentValue)),$.forEachRemovedItem(ce=>{ce.previousValue&&this._toggleClass(ce.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(ce=>{if("string"!=typeof ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(ce.item)}`);this._toggleClass(ce.item,!0)}),$.forEachRemovedItem(ce=>this._toggleClass(ce.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ce=>this._toggleClass(ce,!0)):Object.keys($).forEach(ce=>this._toggleClass(ce,!!$[ce])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ce=>this._toggleClass(ce,!1)):Object.keys($).forEach(ce=>this._toggleClass(ce,!1)))}_toggleClass($,ce){($=$.trim())&&$.split(/\s+/g).forEach(Le=>{ce?this._renderer.addClass(this._ngEl.nativeElement,Le):this._renderer.removeClass(this._ngEl.nativeElement,Le)})}}return F.\u0275fac=function($){return new($||F)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},F.\u0275dir=h.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),F})();class ks{constructor(ne,$,ce,Le){this.$implicit=ne,this.ngForOf=$,this.index=ce,this.count=Le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ns=(()=>{class F{constructor($,ce,Le){this._viewContainer=$,this._template=ce,this._differs=Le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ce=this._viewContainer;$.forEachOperation((Le,Tt,Vt)=>{if(null==Le.previousIndex)ce.createEmbeddedView(this._template,new ks(Le.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)ce.remove(null===Tt?void 0:Tt);else if(null!==Tt){const Fn=ce.get(Tt);ce.move(Fn,Vt),ji(Fn,Le)}});for(let Le=0,Tt=ce.length;Le<Tt;Le++){const Fn=ce.get(Le).context;Fn.index=Le,Fn.count=Tt,Fn.ngForOf=this._ngForOf}$.forEachIdentityChange(Le=>{ji(ce.get(Le.currentIndex),Le)})}static ngTemplateContextGuard($,ce){return!0}}return F.\u0275fac=function($){return new($||F)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},F.\u0275dir=h.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function ji(F,ne){F.context.$implicit=ne.item}let mi=(()=>{class F{constructor($,ce){this._viewContainer=$,this._context=new ba,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){hr("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){hr("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ce){return!0}}return F.\u0275fac=function($){return new($||F)(h.Y36(h.s_b),h.Y36(h.Rgc))},F.\u0275dir=h.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class ba{constructor(){this.$implicit=null,this.ngIf=null}}function hr(F,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,h.AaK)(ne)}'.`)}let Yi=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const ce=this._viewContainerRef;if(this._viewRef&&ce.remove(ce.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Le,ngTemplateOutletContext:Tt,ngTemplateOutletInjector:Vt}=this;this._viewRef=ce.createEmbeddedView(Le,Tt,Vt?{injector:Vt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(h.Y36(h.s_b))},F.\u0275dir=h.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[h.TTD]}),F})();class ut{createSubscription(ne,$){return ne.subscribe({next:$,error:ce=>{throw ce}})}dispose(ne){ne.unsubscribe()}}class Je{createSubscription(ne,$){return ne.then($,ce=>{throw ce})}dispose(ne){}}const vt=new Je,Wt=new ut;let ln=(()=>{class F{constructor($){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=$}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,ce=>this._updateLatestValue($,ce))}_selectStrategy($){if((0,h.QGY)($))return vt;if((0,h.F4k)($))return Wt;throw function ns(F,ne){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,ce){$===this._obj&&(this._latestValue=ce,this._ref.markForCheck())}}return F.\u0275fac=function($){return new($||F)(h.Y36(h.sBO,16))},F.\u0275pipe=h.Yjl({name:"async",type:F,pure:!1,standalone:!0}),F})(),wr=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=h.oAB({type:F}),F.\u0275inj=h.cJS({}),F})();const ki="browser";function Bs(F){return F===ki}function Zs(F){return"server"===F}let Ea=(()=>{class F{}return F.\u0275prov=(0,h.Yz7)({token:F,providedIn:"root",factory:()=>new _i((0,h.LFG)(Ge),window)}),F})();class _i{constructor(ne,$){this.document=ne,this.window=$,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const $=function us(F,ne){const $=F.getElementById(ne)||F.getElementsByName(ne)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const ce=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Le=ce.currentNode;for(;Le;){const Tt=Le.shadowRoot;if(Tt){const Vt=Tt.getElementById(ne)||Tt.querySelector(`[name="${ne}"]`);if(Vt)return Vt}Le=ce.nextNode()}}return null}(this.document,ne);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=ne)}}scrollToElement(ne){const $=ne.getBoundingClientRect(),ce=$.left+this.window.pageXOffset,Le=$.top+this.window.pageYOffset,Tt=this.offset();this.window.scrollTo(ce-Tt[0],Le-Tt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=no(this.window.history)||no(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function no(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class qo{}},4650:(cn,dt,L)=>{L.d(dt,{$8M:()=>Ml,$Z:()=>Ip,AFp:()=>Hb,ALo:()=>ab,AaK:()=>Pe,AsE:()=>nh,BQk:()=>Cn,CHM:()=>oa,CRH:()=>_b,CZH:()=>lv,CqO:()=>_a,D6c:()=>PD,EJc:()=>YE,EiD:()=>Sg,EpF:()=>Nr,F$t:()=>iu,F4k:()=>ws,FYo:()=>gh,FiY:()=>Sn,G48:()=>mD,Gf:()=>gb,GfV:()=>rl,Gpc:()=>_e,Hsn:()=>uf,Ikx:()=>ym,JOm:()=>jo,JVY:()=>hh,KtG:()=>Ta,L6k:()=>ud,LAX:()=>Im,LFG:()=>oo,LMc:()=>FD,LSH:()=>zh,Lbi:()=>WE,Lck:()=>jw,MAs:()=>M,MGl:()=>rr,MMx:()=>Kv,NdJ:()=>nu,O4$:()=>Fn,OlP:()=>Mi,Oqu:()=>w_,PXZ:()=>cD,Q6J:()=>G,QGY:()=>bi,QP$:()=>Yt,QbO:()=>zE,Qsj:()=>Oc,QtT:()=>H0,R0b:()=>ih,RDi:()=>ip,Rgc:()=>my,SBq:()=>Qu,SDv:()=>U0,Sil:()=>QE,Suo:()=>mb,TTD:()=>Wr,TgZ:()=>Xe,Tol:()=>My,Udp:()=>gm,VKq:()=>X0,W1O:()=>wb,WLB:()=>eb,X6Q:()=>gD,XFs:()=>hn,Xpm:()=>Bt,Xts:()=>w,Y36:()=>Lc,YKP:()=>G0,YNc:()=>_,Yjl:()=>De,Yz7:()=>Ye,Z0I:()=>an,ZZ4:()=>v0,_Bn:()=>$0,_UZ:()=>Dt,_Vd:()=>Su,_c5:()=>OD,_uU:()=>By,aQg:()=>b0,c2e:()=>KE,cJS:()=>ot,cg1:()=>C_,d8E:()=>oy,dDg:()=>oD,dqk:()=>Pn,eBb:()=>wg,eFA:()=>ew,ekj:()=>X_,eoX:()=>Qb,f3M:()=>H,g9A:()=>$b,gxx:()=>p,h0i:()=>S_,hGG:()=>xD,hij:()=>E_,iGM:()=>pb,ifc:()=>En,ip1:()=>Ub,jDz:()=>z0,kEZ:()=>tb,kL8:()=>hc,kYT:()=>Fe,kcU:()=>hi,lG2:()=>Qe,lcZ:()=>lb,lqb:()=>pi,lri:()=>Yb,mCW:()=>cd,n5z:()=>Qi,oAB:()=>tr,oJD:()=>Wh,oxw:()=>lf,pB0:()=>Eg,pQV:()=>Hv,q3G:()=>Ci,q4F:()=>Ng,qLn:()=>Fd,qOj:()=>Kf,qZA:()=>st,qzn:()=>ld,rWj:()=>Zb,s9C:()=>eh,sBO:()=>_D,sIi:()=>qf,s_b:()=>sv,soG:()=>uv,tb:()=>Gb,tp0:()=>ar,uIk:()=>af,vHH:()=>lt,vpe:()=>pf,wAp:()=>Fr,xp6:()=>xm,ynx:()=>zt,z2F:()=>cv,z3N:()=>Ac,zSh:()=>ni,zs3:()=>kc});var h=L(7579),U=L(727),ee=L(9751),Ce=L(6451),Me=L(3099);function Oe(n){for(let r in n)if(n[r]===Oe)return r;throw Error("Could not find renamed property on target object.")}function Ge(n,r){for(const l in r)r.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=r[l])}function Pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const l=r.indexOf("\n");return-1===l?r:r.substring(0,l)}function Ze(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const we=Oe({__forward_ref__:Oe});function _e(n){return n.__forward_ref__=_e,n.toString=function(){return Pe(this())},n}function Ue(n){return Nt(n)?n():n}function Nt(n){return"function"==typeof n&&n.hasOwnProperty(we)&&n.__forward_ref__===_e}class lt extends Error{constructor(r,l){super(function xt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,l)),this.code=r}}function yt(n){return"string"==typeof n?n:null==n?"":String(n)}function qe(n,r){throw new lt(-201,!1)}function pe(n,r,l,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${l} ${c} ${r} <=Actual]`))}function Ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function en(n){return Dr(n,Sr)||Dr(n,ir)}function an(n){return null!==en(n)}function Dr(n,r){return n.hasOwnProperty(r)?n[r]:null}function vr(n){return n&&(n.hasOwnProperty(Kn)||n.hasOwnProperty(Tr))?n[Kn]:null}const Sr=Oe({\u0275prov:Oe}),Kn=Oe({\u0275inj:Oe}),ir=Oe({ngInjectableDef:Oe}),Tr=Oe({ngInjectorDef:Oe});var hn=(()=>((hn=hn||{})[hn.Default=0]="Default",hn[hn.Host=1]="Host",hn[hn.Self=2]="Self",hn[hn.SkipSelf=4]="SkipSelf",hn[hn.Optional=8]="Optional",hn))();let br;function Ar(n){const r=br;return br=n,r}function Yr(n,r,l){const c=en(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&hn.Optional?null:void 0!==r?r:void qe(Pe(n))}function Qn(n){return{toString:n}.toString()}var fr=(()=>((fr=fr||{})[fr.OnPush=0]="OnPush",fr[fr.Default=1]="Default",fr))(),En=(()=>{return(n=En||(En={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",En;var n})();const Pn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ii={},kn=[],Ri=Oe({\u0275cmp:Oe}),gn=Oe({\u0275dir:Oe}),Si=Oe({\u0275pipe:Oe}),mr=Oe({\u0275mod:Oe}),si=Oe({\u0275fac:Oe}),Rr=Oe({__NG_ELEMENT_ID__:Oe});let mn=0;function Bt(n){return Qn(()=>{const l=!0===n.standalone,c={},g={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===fr.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||kn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||En.Emulated,id:"c"+mn++,styles:n.styles||kn,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,I=n.features;return g.inputs=Ae(n.inputs,c),g.outputs=Ae(n.outputs),I&&I.forEach(O=>O(g)),g.directiveDefs=v?()=>("function"==typeof v?v():v).map(zn).filter(Bn):null,g.pipeDefs=v?()=>("function"==typeof v?v():v).map(ht).filter(Bn):null,g})}function zn(n){return ae(n)||be(n)}function Bn(n){return null!==n}function tr(n){return Qn(()=>({type:n.type,bootstrap:n.bootstrap||kn,declarations:n.declarations||kn,imports:n.imports||kn,exports:n.exports||kn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fe(n,r){return Qn(()=>{const l=pn(n,!0);l.declarations=r.declarations||kn,l.imports=r.imports||kn,l.exports=r.exports||kn})}function Ae(n,r){if(null==n)return Ii;const l={};for(const c in n)if(n.hasOwnProperty(c)){let g=n[c],v=g;Array.isArray(g)&&(v=g[1],g=g[0]),l[g]=c,r&&(r[g]=v)}return l}const Qe=Bt;function De(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ae(n){return n[Ri]||null}function be(n){return n[gn]||null}function ht(n){return n[Si]||null}function Yt(n){const r=ae(n)||be(n)||ht(n);return null!==r&&r.standalone}function pn(n,r){const l=n[mr]||null;if(!l&&!0===r)throw new Error(`Type ${Pe(n)} does not have '\u0275mod' property.`);return l}function hr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Fs(n){return Array.isArray(n)&&!0===n[1]}function ta(n){return 0!=(8&n.flags)}function gs(n){return 2==(2&n.flags)}function _o(n){return 1==(1&n.flags)}function Pi(n){return null!==n.template}function na(n){return 0!=(256&n[2])}function Jn(n,r){return n.hasOwnProperty(si)?n[si]:null}class _s{constructor(r,l,c){this.previousValue=r,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Wr(){return Ys}function Ys(n){return n.type.prototype.ngOnChanges&&(n.setInput=Gs),wa}function wa(){const n=kr(this),r=n?.current;if(r){const l=n.previous;if(l===Ii)n.previous=r;else for(let c in r)l[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Gs(n,r,l,c){const g=kr(n)||function wr(n,r){return n[yo]=r}(n,{previous:Ii,current:null}),v=g.current||(g.current={}),I=g.previous,O=this.declaredInputs[l],V=I[O];v[O]=new _s(V&&V.currentValue,r,I===Ii),n[c]=r}Wr.ngInherit=!0;const yo="__ngSimpleChanges__";function kr(n){return n[yo]||null}function zr(n){for(;Array.isArray(n);)n=n[0];return n}function no(n,r){return zr(r[n])}function us(n,r){return zr(r[n.index])}function qo(n,r){return n.data[r]}function So(n,r){return n[r]}function Kr(n,r){const l=r[n];return hr(l)?l:l[0]}function or(n){return 64==(64&n[2])}function rs(n,r){return null==r?null:n[r]}function Ui(n){n[18]=0}function ei(n,r){n[5]+=r;let l=n,c=n[3];for(;null!==c&&(1===r&&1===l[5]||-1===r&&0===l[5]);)c[5]+=r,l=c,c=c[3]}const dr={lFrame:Bo(null),bindingsEnabled:!0};function ro(){return dr.bindingsEnabled}function qt(){return dr.lFrame.lView}function pr(){return dr.lFrame.tView}function oa(n){return dr.lFrame.contextLView=n,n[8]}function Ta(n){return dr.lFrame.contextLView=null,n}function cs(){let n=Z();for(;null!==n&&64===n.type;)n=n.parent;return n}function Z(){return dr.lFrame.currentTNode}function W(){const n=dr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}function j(n,r){const l=dr.lFrame;l.currentTNode=n,l.isParent=r}function ue(){return dr.lFrame.isParent}function kt(){dr.lFrame.isParent=!1}function He(){const n=dr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Ct(){return dr.lFrame.bindingIndex}function Vn(){return dr.lFrame.bindingIndex++}function Dn(n){const r=dr.lFrame,l=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,l}function qn(n){dr.lFrame.inI18n=n}function $i(n,r){const l=dr.lFrame;l.bindingIndex=l.bindingRootIndex=n,yi(r)}function yi(n){dr.lFrame.currentDirectiveIndex=n}function Ai(n){const r=dr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function is(){return dr.lFrame.currentQueryIndex}function qr(n){dr.lFrame.currentQueryIndex=n}function vs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Lo(n,r,l){if(l&hn.SkipSelf){let g=r,v=n;for(;!(g=g.parent,null!==g||l&hn.Host||(g=vs(v),null===g||(v=v[15],10&g.type))););if(null===g)return!1;r=g,n=v}const c=dr.lFrame=zi();return c.currentTNode=r,c.lView=n,!0}function Wi(n){const r=zi(),l=n[1];dr.lFrame=r,r.currentTNode=l.firstChild,r.lView=n,r.tView=l,r.contextLView=n,r.bindingIndex=l.bindingStartIndex,r.inI18n=!1}function zi(){const n=dr.lFrame,r=null===n?null:n.child;return null===r?Bo(n):r}function Bo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function po(){const n=dr.lFrame;return dr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const F=po;function ne(){const n=po();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Le(){return dr.lFrame.selectedIndex}function Tt(n){dr.lFrame.selectedIndex=n}function Vt(){const n=dr.lFrame;return qo(n.tView,n.selectedIndex)}function Fn(){dr.lFrame.currentNamespace="svg"}function hi(){!function li(){dr.lFrame.currentNamespace=null}()}function fi(n,r){for(let l=r.directiveStart,c=r.directiveEnd;l<c;l++){const v=n.data[l].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:O,ngAfterViewInit:V,ngAfterViewChecked:X,ngOnDestroy:he}=v;I&&(n.contentHooks||(n.contentHooks=[])).push(-l,I),O&&((n.contentHooks||(n.contentHooks=[])).push(l,O),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(l,O)),V&&(n.viewHooks||(n.viewHooks=[])).push(-l,V),X&&((n.viewHooks||(n.viewHooks=[])).push(l,X),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(l,X)),null!=he&&(n.destroyHooks||(n.destroyHooks=[])).push(l,he)}}function Fi(n,r,l){ua(n,r,3,l)}function aa(n,r,l,c){(3&n[2])===l&&ua(n,r,l,c)}function la(n,r){let l=n[2];(3&l)===r&&(l&=2047,l+=1,n[2]=l)}function ua(n,r,l,c){const v=c??-1,I=r.length-1;let O=0;for(let V=void 0!==c?65535&n[18]:0;V<I;V++)if("number"==typeof r[V+1]){if(O=r[V],null!=c&&O>=c)break}else r[V]<0&&(n[18]+=65536),(O<v||-1==v)&&(qa(n,l,r,V),n[18]=(4294901760&n[18])+V+2),V++}function qa(n,r,l,c){const g=l[c]<0,v=l[c+1],O=n[g?-l[c]:l[c]];if(g){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(O)}finally{}}}else try{v.call(O)}finally{}}class os{constructor(r,l,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function ca(n,r,l){let c=0;for(;c<l.length;){const g=l[c];if("number"==typeof g){if(0!==g)break;c++;const v=l[c++],I=l[c++],O=l[c++];n.setAttribute(r,I,O,v)}else{const v=g,I=l[++c];pu(v)?n.setProperty(r,v,I):n.setAttribute(r,v,I),c++}}return c}function Oa(n){return 3===n||4===n||6===n}function pu(n){return 64===n.charCodeAt(0)}function gu(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let l=-1;for(let c=0;c<r.length;c++){const g=r[c];"number"==typeof g?l=g:0===l||vl(n,l,g,null,-1===l||2===l?r[++c]:null)}}return n}function vl(n,r,l,c,g){let v=0,I=n.length;if(-1===r)I=-1;else for(;v<n.length;){const O=n[v++];if("number"==typeof O){if(O===r){I=-1;break}if(O>r){I=v-1;break}}}for(;v<n.length;){const O=n[v];if("number"==typeof O)break;if(O===l){if(null===c)return void(null!==g&&(n[v+1]=g));if(c===n[v+1])return void(n[v+2]=g)}v++,null!==c&&v++,null!==g&&v++}-1!==I&&(n.splice(I,0,r),v=I+1),n.splice(v++,0,l),null!==c&&n.splice(v++,0,c),null!==g&&n.splice(v++,0,g)}function io(n){return-1!==n}function Ds(n){return 32767&n}function Ca(n,r){let l=function xa(n){return n>>16}(n),c=r;for(;l>0;)c=c[15],l--;return c}let mu=!0;function rn(n){const r=mu;return mu=n,r}let dn=0;const wn={};function yn(n,r){const l=Zt(n,r);if(-1!==l)return l;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Pt(c.data,n),Pt(r,null),Pt(c.blueprint,null));const g=ui(n,r),v=n.injectorIndex;if(io(g)){const I=Ds(g),O=Ca(g,r),V=O[1].data;for(let X=0;X<8;X++)r[v+X]=O[I+X]|V[I+X]}return r[v+8]=g,v}function Pt(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Zt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ui(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,c=null,g=r;for(;null!==g;){if(c=ti(g),null===c)return-1;if(l++,g=g[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ya(n,r,l){!function Pa(n,r,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Rr)&&(c=l[Rr]),null==c&&(c=l[Rr]=dn++);const g=255&c;r.data[n+(g>>5)]|=1<<g}(n,r,l)}function bl(n,r,l){if(l&hn.Optional||void 0!==n)return n;qe()}function Za(n,r,l,c){if(l&hn.Optional&&void 0===c&&(c=null),0==(l&(hn.Self|hn.Host))){const g=n[9],v=Ar(void 0);try{return g?g.get(r,c,l&hn.Optional):Yr(r,c,l&hn.Optional)}finally{Ar(v)}}return bl(c,0,l)}function wl(n,r,l,c=hn.Default,g){if(null!==n){if(1024&r[2]){const I=function Rl(n,r,l,c,g){let v=n,I=r;for(;null!==v&&null!==I&&1024&I[2]&&!(256&I[2]);){const O=zs(v,I,l,c|hn.Self,wn);if(O!==wn)return O;let V=v.parent;if(!V){const X=I[21];if(X){const he=X.get(l,wn,c);if(he!==wn)return he}V=ti(I),I=I[15]}v=V}return g}(n,r,l,c,wn);if(I!==wn)return I}const v=zs(n,r,l,c,wn);if(v!==wn)return v}return Za(r,l,c,g)}function zs(n,r,l,c,g){const v=function ku(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Rr)?n[Rr]:void 0;return"number"==typeof r?r>=0?255&r:Fu:r}(l);if("function"==typeof v){if(!Lo(r,n,c))return c&hn.Host?bl(g,0,c):Za(r,l,c,g);try{const I=v(c);if(null!=I||c&hn.Optional)return I;qe()}finally{F()}}else if("number"==typeof v){let I=null,O=Zt(n,r),V=-1,X=c&hn.Host?r[16][6]:null;for((-1===O||c&hn.SkipSelf)&&(V=-1===O?ui(n,r):r[O+8],-1!==V&&_r(c,!1)?(I=r[1],O=Ds(V),r=Ca(V,r)):O=-1);-1!==O;){const he=r[1];if(El(v,O,he.data)){const Te=Wl(O,r,l,I,c,X);if(Te!==wn)return Te}V=r[O+8],-1!==V&&_r(c,r[1].data[O+8]===X)&&El(v,O,r)?(I=he,O=Ds(V),r=Ca(V,r)):O=-1}}return g}function Wl(n,r,l,c,g,v){const I=r[1],O=I.data[n+8],he=ka(O,I,l,null==c?gs(O)&&mu:c!=I&&0!=(3&O.type),g&hn.Host&&v===O);return null!==he?Qa(r,I,he,O):wn}function ka(n,r,l,c,g){const v=n.providerIndexes,I=r.data,O=1048575&v,V=n.directiveStart,he=v>>20,at=g?O+he:n.directiveEnd;for(let St=c?O:O+he;St<at;St++){const Jt=I[St];if(St<V&&l===Jt||St>=V&&Jt.type===l)return St}if(g){const St=I[V];if(St&&Pi(St)&&St.type===l)return V}return null}function Qa(n,r,l,c){let g=n[l];const v=r.data;if(function Nl(n){return n instanceof os}(g)){const I=g;I.resolving&&function je(n,r){const l=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new lt(-200,`Circular dependency in DI detected for ${n}${l}`)}(function ct(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():yt(n)}(v[l]));const O=rn(I.canSeeViewProviders);I.resolving=!0;const V=I.injectImpl?Ar(I.injectImpl):null;Lo(n,c,hn.Default);try{g=n[l]=I.factory(void 0,v,n,c),r.firstCreatePass&&l>=c.directiveStart&&function ss(n,r,l){const{ngOnChanges:c,ngOnInit:g,ngDoCheck:v}=r.type.prototype;if(c){const I=Ys(r);(l.preOrderHooks||(l.preOrderHooks=[])).push(n,I),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,I)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-n,g),v&&((l.preOrderHooks||(l.preOrderHooks=[])).push(n,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,v))}(l,v[l],r)}finally{null!==V&&Ar(V),rn(O),I.resolving=!1,F()}}return g}function El(n,r,l){return!!(l[r+(n>>5)]&1<<n)}function _r(n,r){return!(n&hn.Self||n&hn.Host&&r)}class da{constructor(r,l){this._tNode=r,this._lView=l}get(r,l,c){return wl(this._tNode,this._lView,r,c,l)}}function Fu(){return new da(cs(),qt())}function Qi(n){return Qn(()=>{const r=n.prototype.constructor,l=r[si]||Mn(r),c=Object.prototype;let g=Object.getPrototypeOf(n.prototype).constructor;for(;g&&g!==c;){const v=g[si]||Mn(g);if(v&&v!==l)return v;g=Object.getPrototypeOf(g)}return v=>new v})}function Mn(n){return Nt(n)?()=>{const r=Mn(Ue(n));return r&&r()}:Jn(n)}function ti(n){const r=n[1],l=r.type;return 2===l?r.declTNode:1===l?n[6]:null}function Ml(n){return function bo(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const l=n.attrs;if(l){const c=l.length;let g=0;for(;g<c;){const v=l[g];if(Oa(v))break;if(0===v)g+=2;else if("number"==typeof v)for(g++;g<c&&"string"==typeof l[g];)g++;else{if(v===r)return l[g+1];g+=2}}}return null}(cs(),n)}const vn="__parameters__";function Ia(n,r,l){return Qn(()=>{const c=function Fa(n){return function(...l){if(n){const c=n(...l);for(const g in c)this[g]=c[g]}}}(r);function g(...v){if(this instanceof g)return c.apply(this,v),this;const I=new g(...v);return O.annotation=I,O;function O(V,X,he){const Te=V.hasOwnProperty(vn)?V[vn]:Object.defineProperty(V,vn,{value:[]})[vn];for(;Te.length<=he;)Te.push(null);return(Te[he]=Te[he]||[]).push(I),V}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=n,g.annotationCls=g,g})}class Mi{constructor(r,l){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Ye({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ts(n,r){void 0===r&&(r=n);for(let l=0;l<n.length;l++){let c=n[l];Array.isArray(c)?(r===n&&(r=n.slice(0,l)),Ts(c,r)):r!==n&&r.push(c)}return r}function La(n,r){n.forEach(l=>Array.isArray(l)?La(l,r):r(l))}function Sa(n,r,l){r>=n.length?n.push(l):n.splice(r,0,l)}function lu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function A(n,r){const l=[];for(let c=0;c<n;c++)l.push(r);return l}function xe(n,r,l){let c=fn(n,r);return c>=0?n[1|c]=l:(c=~c,function B(n,r,l,c){let g=n.length;if(g==r)n.push(l,c);else if(1===g)n.push(c,n[0]),n[0]=l;else{for(g--,n.push(n[g-1],n[g]);g>r;)n[g]=n[g-2],g--;n[r]=l,n[r+1]=c}}(n,c,r,l)),c}function Ft(n,r){const l=fn(n,r);if(l>=0)return n[1|l]}function fn(n,r){return function _n(n,r,l){let c=0,g=n.length>>l;for(;g!==c;){const v=c+(g-c>>1),I=n[v<<l];if(r===I)return v<<l;I>r?g=v:c=v+1}return~(g<<l)}(n,r,1)}const Xa={},Va="__NG_DI_FLAG__",Qo="ngTempTokenPath",uu=/\n/gm,mc="__source";let Dl;function Tl(n){const r=Dl;return Dl=n,r}function yu(n,r=hn.Default){if(void 0===Dl)throw new lt(-203,!1);return null===Dl?Yr(n,void 0,r):Dl.get(n,r&hn.Optional?null:void 0,r)}function oo(n,r=hn.Default){return(function Gn(){return br}()||yu)(Ue(n),r)}function H(n,r=hn.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),oo(n,r)}function q(n){const r=[];for(let l=0;l<n.length;l++){const c=Ue(n[l]);if(Array.isArray(c)){if(0===c.length)throw new lt(900,!1);let g,v=hn.Default;for(let I=0;I<c.length;I++){const O=c[I],V=ke(O);"number"==typeof V?-1===V?g=O.token:v|=V:g=O}r.push(oo(g,v))}else r.push(oo(c))}return r}function se(n,r){return n[Va]=r,n.prototype[Va]=r,n}function ke(n){return n[Va]}const Sn=se(Ia("Optional"),8),ar=se(Ia("SkipSelf"),4);var jo=(()=>((jo=jo||{})[jo.Important=1]="Important",jo[jo.DashCase=2]="DashCase",jo))();const ql=/^>|^->|<!--|-->|--!>|<!-$/g,vu=/(<|>)/;const cl=new Map;let Jo=0;const b="__ngContext__";function E(n,r){hr(r)?(n[b]=r[20],function Os(n){cl.set(n[20],n)}(r)):n[b]=r}let tl;function hl(n,r){return tl(n,r)}function ju(n){const r=n[3];return Fs(r)?r[3]:r}function $u(n){return Uh(n[13])}function Dc(n){return Uh(n[4])}function Uh(n){for(;null!==n&&!Fs(n);)n=n[4];return n}function Yl(n,r,l,c,g){if(null!=c){let v,I=!1;Fs(c)?v=c:hr(c)&&(I=!0,c=c[0]);const O=zr(c);0===n&&null!==l?null==g?Zl(r,l,O):Wu(r,l,O,g||null,!0):1===n&&null!==l?Wu(r,l,O,g||null,!0):2===n?$h(r,O,I):3===n&&r.destroyNode(O),null!=v&&function np(n,r,l,c,g){const v=l[7];v!==zr(l)&&Yl(r,n,c,v,g);for(let O=10;O<l.length;O++){const V=l[O];id(V[1],V,n,r,c,v)}}(r,n,v,l,g)}}function bu(n,r){return n.createText(r)}function Cd(n,r,l){n.setValue(r,l)}function wu(n,r){return n.createComment(function Jc(n){return n.replace(ql,r=>r.replace(vu,"\u200b$1\u200b"))}(r))}function Id(n,r,l){return n.createElement(r,l)}function vi(n,r){const l=n[9],c=l.indexOf(r),g=r[3];512&r[2]&&(r[2]&=-513,ei(g,-1)),l.splice(c,1)}function Ad(n,r){if(n.length<=10)return;const l=10+r,c=n[l];if(c){const g=c[17];null!==g&&g!==n&&vi(g,c),r>0&&(n[l-1][4]=c[4]);const v=lu(n,10+r);!function gg(n,r){id(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const I=v[19];null!==I&&I.detachView(v[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Cc(n,r){if(!(128&r[2])){const l=r[11];l.destroyNode&&id(n,r,l,3,null,null),function ch(n){let r=n[13];if(!r)return Gu(n[1],n);for(;r;){let l=null;if(hr(r))l=r[13];else{const c=r[10];c&&(l=c)}if(!l){for(;r&&!r[4]&&r!==n;)hr(r)&&Gu(r[1],r),r=r[3];null===r&&(r=n),hr(r)&&Gu(r[1],r),l=r&&r[4]}r=l}}(r)}}function Gu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Oo(n,r){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let c=0;c<l.length;c+=2){const g=r[l[c]];if(!(g instanceof os)){const v=l[c+1];if(Array.isArray(v))for(let I=0;I<v.length;I+=2){const O=g[v[I]],V=v[I+1];try{V.call(O)}finally{}}else try{v.call(g)}finally{}}}}(n,r),function ep(n,r){const l=n.cleanup,c=r[7];let g=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const I=l[v+1],O="function"==typeof I?I(r):zr(r[I]),V=c[g=l[v+2]],X=l[v+3];"boolean"==typeof X?O.removeEventListener(l[v],V,X):X>=0?c[g=X]():c[g=-X].unsubscribe(),v+=2}else{const I=c[g=l[v+1]];l[v].call(I)}if(null!==c){for(let v=g+1;v<c.length;v++)(0,c[v])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const l=r[17];if(null!==l&&Fs(r[3])){l!==r[3]&&vi(l,r);const c=r[19];null!==c&&c.detachView(n)}!function Ed(n){cl.delete(n[20])}(r)}}function tp(n,r,l){return td(n,r.parent,l)}function td(n,r,l){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return l[0];if(2&c.flags){const g=n.data[c.directiveStart].encapsulation;if(g===En.None||g===En.Emulated)return null}return us(c,l)}function Wu(n,r,l,c,g){n.insertBefore(r,l,c,g)}function Zl(n,r,l){n.appendChild(r,l)}function Ic(n,r,l,c,g){null!==c?Wu(n,r,l,c,g):Zl(n,r,l)}function Ha(n,r){return n.parentNode(r)}function zu(n,r,l){return ja(n,r,l)}function Ku(n,r,l){return 40&n.type?us(n,l):null}let Sl,Ks,Tu,dh,ja=Ku;function Nd(n,r){ja=n,Sl=r}function rd(n,r,l,c){const g=tp(n,c,r),v=r[11],O=zu(c.parent||r[6],c,r);if(null!=g)if(Array.isArray(l))for(let V=0;V<l.length;V++)Ic(v,g,l[V],O,!1);else Ic(v,g,l,O,!1);void 0!==Sl&&Sl(v,c,r,l,g)}function Ll(n,r){if(null!==r){const l=r.type;if(3&l)return us(r,n);if(4&l)return jh(-1,n[r.index]);if(8&l){const c=r.child;if(null!==c)return Ll(n,c);{const g=n[r.index];return Fs(g)?jh(-1,g):zr(g)}}if(32&l)return hl(r,n)()||zr(n[r.index]);{const c=Hh(n,r);return null!==c?Array.isArray(c)?c[0]:Ll(ju(n[16]),c):Ll(n,r.next)}}return null}function Hh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function jh(n,r){const l=10+n+1;if(l<r.length){const c=r[l],g=c[1].firstChild;if(null!==g)return Ll(c,g)}return r[7]}function $h(n,r,l){const c=Ha(n,r);c&&function nd(n,r,l,c){n.removeChild(r,l,c)}(n,c,r,l)}function Rd(n,r,l,c,g,v,I){for(;null!=l;){const O=c[l.index],V=l.type;if(I&&0===r&&(O&&E(zr(O),c),l.flags|=4),64!=(64&l.flags))if(8&V)Rd(n,r,l.child,c,g,v,!1),Yl(r,n,g,O,v);else if(32&V){const X=hl(l,c);let he;for(;he=X();)Yl(r,n,g,he,v);Yl(r,n,g,O,v)}else 16&V?_g(n,r,c,l,g,v):Yl(r,n,g,O,v);l=I?l.projectionNext:l.next}}function id(n,r,l,c,g,v){Rd(l,c,n.firstChild,r,g,v,!1)}function _g(n,r,l,c,g,v){const I=l[16],V=I[6].projection[c.projection];if(Array.isArray(V))for(let X=0;X<V.length;X++)Yl(r,n,g,V[X],v);else Rd(n,r,V,I[3],g,v,!0)}function sd(n,r,l){n.setAttribute(r,"style",l)}function Sc(n,r,l){""===l?n.removeAttribute(r,"class"):n.setAttribute(r,"class",l)}function Du(n){return function od(){if(void 0===Ks&&(Ks=null,Pn.trustedTypes))try{Ks=Pn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ks}()?.createHTML(n)||n}function ip(n){Tu=n}function _f(){return void 0!==Tu?Tu:typeof document<"u"?document:void 0}function yf(n){return function Gh(){if(void 0===dh&&(dh=null,Pn.trustedTypes))try{dh=Pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dh}()?.createHTML(n)||n}class Od{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yg extends Od{getTypeName(){return"HTML"}}class sp extends Od{getTypeName(){return"Style"}}class vg extends Od{getTypeName(){return"Script"}}class op extends Od{getTypeName(){return"URL"}}class bg extends Od{getTypeName(){return"ResourceURL"}}function Ac(n){return n instanceof Od?n.changingThisBreaksApplicationSecurity:n}function ld(n,r){const l=function Cm(n){return n instanceof Od&&n.getTypeName()||null}(n);if(null!=l&&l!==r){if("ResourceURL"===l&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===r}function hh(n){return new yg(n)}function ud(n){return new sp(n)}function wg(n){return new vg(n)}function Im(n){return new op(n)}function Eg(n){return new bg(n)}function lo(n){const r=new bf(n);return function Cu(){try{return!!(new window.DOMParser).parseFromString(Du(""),"text/html")}catch{return!1}}()?new Dg(r):r}class Dg{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const l=(new window.DOMParser).parseFromString(Du(r),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(r):(l.removeChild(l.firstChild),l)}catch{return null}}}class bf{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(r){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Du(r),l;const c=this.inertDocument.createElement("body");return c.innerHTML=Du(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(r){const l=r.attributes;for(let g=l.length-1;0<g;g--){const I=l.item(g).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&r.removeAttribute(I)}let c=r.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ap=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function cd(n){return(n=String(n)).match(ap)?n:"unsafe:"+n}function qu(n){const r={};for(const l of n.split(","))r[l]=!0;return r}function xd(...n){const r={};for(const l of n)for(const c in l)l.hasOwnProperty(c)&&(r[c]=!0);return r}const Tg=qu("area,br,col,hr,img,wbr"),Cg=qu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lp=qu("rp,rt"),wf=xd(Tg,xd(Cg,qu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xd(lp,qu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xd(lp,Cg)),up=qu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ef=xd(up,qu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Am=qu("script,style,template");class Nm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let l=r.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let g=this.checkClobberedElement(l,l.nextSibling);if(g){l=g;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(r){const l=r.nodeName.toLowerCase();if(!wf.hasOwnProperty(l))return this.sanitizedSomething=!0,!Am.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=r.attributes;for(let g=0;g<c.length;g++){const v=c.item(g),I=v.name,O=I.toLowerCase();if(!Ef.hasOwnProperty(O)){this.sanitizedSomething=!0;continue}let V=v.value;up[O]&&(V=cd(V)),this.buf.push(" ",I,'="',cp(V),'"')}return this.buf.push(">"),!0}endElement(r){const l=r.nodeName.toLowerCase();wf.hasOwnProperty(l)&&!Tg.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(r){this.buf.push(cp(r))}checkClobberedElement(r,l){if(l&&(r.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return l}}const Rm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ig=/([^\#-~ |!])/g;function cp(n){return n.replace(/&/g,"&amp;").replace(Rm,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ig,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Df;function Sg(n,r){let l=null;try{Df=Df||lo(n);let c=r?String(r):"";l=Df.getInertBodyElement(c);let g=5,v=c;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,c=v,v=l.innerHTML,l=Df.getInertBodyElement(c)}while(c!==v);return Du((new Nm).sanitizeChildren(dp(l)||l))}finally{if(l){const c=dp(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function dp(n){return"content"in n&&function hp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ci=(()=>((Ci=Ci||{})[Ci.NONE=0]="NONE",Ci[Ci.HTML=1]="HTML",Ci[Ci.STYLE=2]="STYLE",Ci[Ci.SCRIPT=3]="SCRIPT",Ci[Ci.URL=4]="URL",Ci[Ci.RESOURCE_URL=5]="RESOURCE_URL",Ci))();function Wh(n){const r=m();return r?yf(r.sanitize(Ci.HTML,n)||""):ld(n,"HTML")?yf(Ac(n)):Sg(_f(),yt(n))}function zh(n){const r=m();return r?r.sanitize(Ci.URL,n)||"":ld(n,"URL")?Ac(n):cd(yt(n))}function m(){const n=qt();return n&&n[12]}const w=new Mi("ENVIRONMENT_INITIALIZER"),p=new Mi("INJECTOR",-1),C=new Mi("INJECTOR_DEF_TYPES");class k{get(r,l=Xa){if(l===Xa){const c=new Error(`NullInjectorError: No provider for ${Pe(r)}!`);throw c.name="NullInjectorError",c}return l}}function J(...n){return{\u0275providers:Re(0,n)}}function Re(n,...r){const l=[],c=new Set;let g;return La(r,v=>{const I=v;it(I,l,[],c)&&(g||(g=[]),g.push(I))}),void 0!==g&&rt(g,l),l}function rt(n,r){for(let l=0;l<n.length;l++){const{providers:g}=n[l];La(g,v=>{r.push(v)})}}function it(n,r,l,c){if(!(n=Ue(n)))return!1;let g=null,v=vr(n);const I=!v&&ae(n);if(v||I){if(I&&!I.standalone)return!1;g=n}else{const V=n.ngModule;if(v=vr(V),!v)return!1;g=V}const O=c.has(g);if(I){if(O)return!1;if(c.add(g),I.dependencies){const V="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const X of V)it(X,r,l,c)}}else{if(!v)return!1;{if(null!=v.imports&&!O){let X;c.add(g);try{La(v.imports,he=>{it(he,r,l,c)&&(X||(X=[]),X.push(he))})}finally{}void 0!==X&&rt(X,r)}if(!O){const X=Jn(g)||(()=>new g);r.push({provide:g,useFactory:X,deps:kn},{provide:C,useValue:g,multi:!0},{provide:w,useValue:()=>oo(g),multi:!0})}const V=v.providers;null==V||O||La(V,he=>{r.push(he)})}}return g!==n&&void 0!==n.providers}const $t=Oe({provide:String,useValue:Oe});function Un(n){return null!==n&&"object"==typeof n&&$t in n}function Ni(n){return"function"==typeof n}const ni=new Mi("Set Injector scope."),ci={},di={};let Ji;function Oi(){return void 0===Ji&&(Ji=new k),Ji}class pi{}class qi extends pi{constructor(r,l,c,g){super(),this.parent=l,this.source=c,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ga(r,I=>this.processProvider(I)),this.records.set(p,Us(void 0,this)),g.has("environment")&&this.records.set(pi,Us(void 0,this));const v=this.records.get(ni);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(C.multi,kn,hn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const l=Tl(this),c=Ar(void 0);try{return r()}finally{Tl(l),Ar(c)}}get(r,l=Xa,c=hn.Default){this.assertNotDestroyed();const g=Tl(this),v=Ar(void 0);try{if(!(c&hn.SkipSelf)){let O=this.records.get(r);if(void 0===O){const V=function Iu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mi}(r)&&en(r);O=V&&this.injectableDefInScope(V)?Us(Vs(r),ci):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(c&hn.Self?Oi():this.parent).get(r,l=c&hn.Optional&&l===Xa?null:l)}catch(I){if("NullInjectorError"===I.name){if((I[Qo]=I[Qo]||[]).unshift(Pe(r)),g)throw I;return function pt(n,r,l,c){const g=n[Qo];throw r[mc]&&g.unshift(r[mc]),n.message=function Rt(n,r,l,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let g=Pe(r);if(Array.isArray(r))g=r.map(Pe).join(" -> ");else if("object"==typeof r){let v=[];for(let I in r)if(r.hasOwnProperty(I)){let O=r[I];v.push(I+":"+("string"==typeof O?JSON.stringify(O):Pe(O)))}g=`{${v.join(", ")}}`}return`${l}${c?"("+c+")":""}[${g}]: ${n.replace(uu,"\n  ")}`}("\n"+n.message,g,l,c),n.ngTokenPath=g,n[Qo]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{Ar(v),Tl(g)}}resolveInjectorInitializers(){const r=Tl(this),l=Ar(void 0);try{const c=this.get(w.multi,kn,hn.Self);for(const g of c)g()}finally{Tl(r),Ar(l)}}toString(){const r=[],l=this.records;for(const c of l.keys())r.push(Pe(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new lt(205,!1)}processProvider(r){let l=Ni(r=Ue(r))?r:Ue(r&&r.provide);const c=function Go(n){return Un(n)?Us(void 0,n.useValue):Us(Wo(n),ci)}(r);if(Ni(r)||!0!==r.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=Us(void 0,ci,!0),g.factory=()=>q(g.multi),this.records.set(l,g)),l=r,g.multi.push(r)}this.records.set(l,c)}hydrate(r,l){return l.value===ci&&(l.value=di,l.value=l.factory()),"object"==typeof l.value&&l.value&&function nl(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(r){if(!r.providedIn)return!1;const l=Ue(r.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Vs(n){const r=en(n),l=null!==r?r.factory:Jn(n);if(null!==l)return l;if(n instanceof Mi)throw new lt(204,!1);if(n instanceof Function)return function bs(n){const r=n.length;if(r>0)throw A(r,"?"),new lt(204,!1);const l=function jn(n){const r=n&&(n[Sr]||n[ir]);if(r){const l=function gi(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),r}return null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new lt(204,!1)}function Wo(n,r,l){let c;if(Ni(n)){const g=Ue(n);return Jn(g)||Vs(g)}if(Un(n))c=()=>Ue(n.useValue);else if(function nr(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...q(n.deps||[]));else if(function Hn(n){return!(!n||!n.useExisting)}(n))c=()=>oo(Ue(n.useExisting));else{const g=Ue(n&&(n.useClass||n.provide));if(!function Bl(n){return!!n.deps}(n))return Jn(g)||Vs(g);c=()=>new g(...q(n.deps))}return c}function Us(n,r,l=!1){return{factory:n,value:r,multi:l?[]:void 0}}function hd(n){return!!n.\u0275providers}function Ga(n,r){for(const l of n)Array.isArray(l)?Ga(l,r):hd(l)?Ga(l.\u0275providers,r):r(l)}class fh{}class Zu{resolveComponentFactory(r){throw function Rc(n){const r=Error(`No component factory found for ${Pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Su=(()=>{class n{}return n.NULL=new Zu,n})();function Mc(){return Xi(cs(),qt())}function Xi(n,r){return new Qu(us(n,r))}let Qu=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Mc,n})();function fd(n){return n instanceof Qu?n.nativeElement:n}class gh{}let Oc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Xu(){const n=qt(),l=Kr(cs().index,n);return(hr(l)?l:n)[11]}(),n})(),mh=(()=>{class n{}return n.\u0275prov=Ye({token:n,providedIn:"root",factory:()=>null}),n})();class rl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ng=new rl("14.2.12"),xc={};function yh(n){return n.ngOriginalError}class Fd{constructor(){this._console=console}handleError(r){const l=this._findOriginalError(r);this._console.error("ERROR",r),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(r){let l=r&&yh(r);for(;l&&yh(l);)l=yh(l);return l||null}}function Xl(n){return n instanceof Function?n():n}function F_(n,r,l){let c=n.length;for(;;){const g=n.indexOf(r,l);if(-1===g)return g;if(0===g||n.charCodeAt(g-1)<=32){const v=r.length;if(g+v===c||n.charCodeAt(g+v)<=32)return g}l=g+1}}const Rg="ng-template";function gl(n,r,l){let c=0;for(;c<n.length;){let g=n[c++];if(l&&"class"===g){if(g=n[c],-1!==F_(g.toLowerCase(),r,0))return!0}else if(1===g){for(;c<n.length&&"string"==typeof(g=n[c++]);)if(g.toLowerCase()===r)return!0;return!1}}return!1}function L_(n){return 4===n.type&&n.value!==Rg}function by(n,r,l){return r===(4!==n.type||l?n.value:Rg)}function B_(n,r,l){let c=4;const g=n.attrs||[],v=function Mm(n){for(let r=0;r<n.length;r++)if(Oa(n[r]))return r;return n.length}(g);let I=!1;for(let O=0;O<r.length;O++){const V=r[O];if("number"!=typeof V){if(!I)if(4&c){if(c=2|1&c,""!==V&&!by(n,V,l)||""===V&&1===r.length){if(tc(c))return!1;I=!0}}else{const X=8&c?V:r[++O];if(8&c&&null!==n.attrs){if(!gl(n.attrs,X,l)){if(tc(c))return!1;I=!0}continue}const Te=Mg(8&c?"class":V,g,L_(n),l);if(-1===Te){if(tc(c))return!1;I=!0;continue}if(""!==X){let at;at=Te>v?"":g[Te+1].toLowerCase();const St=8&c?at:null;if(St&&-1!==F_(St,X,0)||2&c&&X!==at){if(tc(c))return!1;I=!0}}}}else{if(!I&&!tc(c)&&!tc(V))return!1;if(I&&tc(V))continue;I=!1,c=V|1&c}}return tc(c)||I}function tc(n){return 0==(1&n)}function Mg(n,r,l,c){if(null===r)return-1;let g=0;if(c||!l){let v=!1;for(;g<r.length;){const I=r[g];if(I===n)return g;if(3===I||6===I)v=!0;else{if(1===I||2===I){let O=r[++g];for(;"string"==typeof O;)O=r[++g];continue}if(4===I)break;if(0===I){g+=4;continue}}g+=v?1:2}return-1}return function Om(n,r){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const c=n[l];if("number"==typeof c)return-1;if(c===r)return l;l++}return-1}(r,n)}function pp(n,r,l=!1){for(let c=0;c<r.length;c++)if(B_(n,r[c],l))return!0;return!1}function Tf(n,r){e:for(let l=0;l<r.length;l++){const c=r[l];if(n.length===c.length){for(let g=0;g<n.length;g++)if(n[g]!==c[g])continue e;return!0}}return!1}function gp(n,r){return n?":not("+r.trim()+")":r}function mp(n){let r=n[0],l=1,c=2,g="",v=!1;for(;l<n.length;){let I=n[l];if("string"==typeof I)if(2&c){const O=n[++l];g+="["+I+(O.length>0?'="'+O+'"':"")+"]"}else 8&c?g+="."+I:4&c&&(g+=" "+I);else""!==g&&!tc(I)&&(r+=gp(v,g),g=""),c=I,v=v||!tc(c);l++}return""!==g&&(r+=gp(v,g)),r}const ri={};function xm(n){V_(pr(),qt(),Le()+n,!1)}function V_(n,r,l,c){if(!c)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&Fi(r,v,l)}else{const v=n.preOrderHooks;null!==v&&aa(r,v,0,l)}Tt(l)}function bh(n,r=null,l=null,c){const g=yp(n,r,l,c);return g.resolveInjectorInitializers(),g}function yp(n,r=null,l=null,c,g=new Set){const v=[l||kn,J(n)];return c=c||("object"==typeof n?void 0:Pe(n)),new qi(v,r||Oi(),c||null,g)}let kc=(()=>{class n{static create(l,c){if(Array.isArray(l))return bh({name:""},c,l,"");{const g=l.name??"";return bh({name:g},l.parent,l.providers,g)}}}return n.THROW_IF_NOT_FOUND=Xa,n.NULL=new k,n.\u0275prov=Ye({token:n,providedIn:"any",factory:()=>oo(p)}),n.__NG_ELEMENT_ID__=-1,n})();function Lc(n,r=hn.Default){const l=qt();return null===l?oo(n,r):wl(cs(),l,Ue(n),r)}function Ip(){throw new Error("invalid")}function Na(n,r){return n<<17|r<<2}function eu(n){return n>>17&32767}function wh(n){return 2|n}function Vl(n){return(131068&n)>>2}function Np(n,r){return-131069&n|r<<2}function nc(n){return 1|n}function Yg(n,r){const l=n.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const g=l[c],v=l[c+1];if(-1!==v){const I=n.data[v];qr(g),I.contentQueries(2,r[v],v)}}}function Jh(n,r,l,c,g,v,I,O,V,X,he){const Te=r.blueprint.slice();return Te[0]=g,Te[2]=76|c,(null!==he||n&&1024&n[2])&&(Te[2]|=1024),Ui(Te),Te[3]=Te[15]=n,Te[8]=l,Te[10]=I||n&&n[10],Te[11]=O||n&&n[11],Te[12]=V||n&&n[12]||null,Te[9]=X||n&&n[9]||null,Te[6]=v,Te[20]=function ga(){return Jo++}(),Te[21]=he,Te[16]=2==r.type?n[16]:Te,Te}function Xh(n,r,l,c,g){let v=n.data[r];if(null===v)v=Hp(n,r,l,c,g),function cr(){return dr.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=l,v.value=c,v.attrs=g;const I=W();v.injectorIndex=null===I?-1:I.injectorIndex}return j(v,!0),v}function Hp(n,r,l,c,g){const v=Z(),I=ue(),V=n.data[r]=function tm(n,r,l,c,g,v){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?v:v&&v.parent,l,r,c,g);return null===n.firstChild&&(n.firstChild=V),null!==v&&(I?null==v.child&&null!==V.parent&&(v.child=V):null===v.next&&(v.next=V)),V}function Mf(n,r,l,c){if(0===l)return-1;const g=r.length;for(let v=0;v<l;v++)r.push(c),n.blueprint.push(c),n.data.push(null);return g}function Zg(n,r,l){Wi(r);try{const c=n.viewQuery;null!==c&&Zp(1,c,l);const g=n.template;null!==g&&Qg(n,r,g,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yg(n,r),n.staticViewQueries&&Zp(2,n.viewQuery,l);const v=n.components;null!==v&&function Qh(n,r){for(let l=0;l<r.length;l++)Y_(n,r[l])}(r,v)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,ne()}}function zd(n,r,l,c){const g=r[2];if(128!=(128&g)){Wi(r);try{Ui(r),function _t(n){return dr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&Qg(n,r,l,2,c);const I=3==(3&g);if(I){const X=n.preOrderCheckHooks;null!==X&&Fi(r,X,null)}else{const X=n.preOrderHooks;null!==X&&aa(r,X,0,null),la(r,0)}if(function Vf(n){for(let r=$u(n);null!==r;r=Dc(r)){if(!r[2])continue;const l=r[9];for(let c=0;c<l.length;c++){const g=l[c],v=g[3];0==(512&g[2])&&ei(v,1),g[2]|=512}}}(r),function Jm(n){for(let r=$u(n);null!==r;r=Dc(r))for(let l=10;l<r.length;l++){const c=r[l],g=c[1];or(c)&&zd(g,c,g.template,c[8])}}(r),null!==n.contentQueries&&Yg(n,r),I){const X=n.contentCheckHooks;null!==X&&Fi(r,X)}else{const X=n.contentHooks;null!==X&&aa(r,X,1),la(r,1)}!function Ul(n,r){const l=n.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const g=l[c];if(g<0)Tt(~g);else{const v=g,I=l[++c],O=l[++c];$i(I,v),O(2,r[v])}}}finally{Tt(-1)}}(n,r);const O=n.components;null!==O&&function Up(n,r){for(let l=0;l<r.length;l++)Xm(n,r[l])}(r,O);const V=n.viewQuery;if(null!==V&&Zp(2,V,c),I){const X=n.viewCheckHooks;null!==X&&Fi(r,X)}else{const X=n.viewHooks;null!==X&&aa(r,X,2),la(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,ei(r[3],-1))}finally{ne()}}}function Qg(n,r,l,c,g){const v=Le(),I=2&c;try{Tt(-1),I&&r.length>22&&V_(n,r,22,!1),l(c,g)}finally{Tt(v)}}function Jg(n,r,l){if(ta(r)){const g=r.directiveEnd;for(let v=r.directiveStart;v<g;v++){const I=n.data[v];I.contentQueries&&I.contentQueries(1,l[v],v)}}}function Xg(n,r,l){!ro()||(function q_(n,r,l,c){const g=l.directiveStart,v=l.directiveEnd;n.firstCreatePass||yn(l,r),E(c,r);const I=l.initialInputs;for(let O=g;O<v;O++){const V=n.data[O],X=Pi(V);X&&jc(r,l,V);const he=Qa(r,n,O,l);E(he,r),null!==I&&Bf(0,O-g,he,V,0,I),X&&(Kr(l.index,r)[8]=he)}}(n,r,l,us(l,r)),128==(128&l.flags)&&function sm(n,r,l){const c=l.directiveStart,g=l.directiveEnd,v=l.index,I=function Gi(){return dr.lFrame.currentDirectiveIndex}();try{Tt(v);for(let O=c;O<g;O++){const V=n.data[O],X=r[O];yi(O),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&zp(V,X)}}finally{Tt(-1),yi(I)}}(n,r,l))}function ef(n,r,l=us){const c=r.localNames;if(null!==c){let g=r.index+1;for(let v=0;v<c.length;v+=2){const I=c[v+1],O=-1===I?l(r,n):n[I];n[g++]=O}}}function Of(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function jp(n,r,l,c,g,v,I,O,V,X){const he=22+c,Te=he+g,at=function $p(n,r){const l=[];for(let c=0;c<r;c++)l.push(c<n?null:ri);return l}(he,Te),St="function"==typeof X?X():X;return at[1]={type:n,blueprint:at,template:l,queries:null,viewQuery:O,declTNode:r,data:at.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:V,consts:St,incompleteFirstPass:!1}}function em(n,r,l,c){const g=t_(r);null===l?g.push(c):(g.push(l),n.firstCreatePass&&$f(n).push(c,g.length-1))}function qm(n,r,l){for(let c in n)if(n.hasOwnProperty(c)){const g=n[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(r,g):l[c]=[r,g]}return l}function Gp(n,r){const c=r.directiveEnd,g=n.data,v=r.attrs,I=[];let O=null,V=null;for(let X=r.directiveStart;X<c;X++){const he=g[X],Te=he.inputs,at=null===v||L_(r)?null:Cy(Te,v);I.push(at),O=qm(Te,X,O),V=qm(he.outputs,X,V)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=16),O.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=O,r.outputs=V}function Hl(n,r,l,c,g,v,I,O){const V=us(r,l);let he,X=r.inputs;!O&&null!=X&&(he=X[c])?(am(n,l,he,c,g),gs(r)&&nm(l,r.index)):3&r.type&&(c=function Ym(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),g=null!=I?I(g,r.value||"",c):g,v.setProperty(V,c,g))}function nm(n,r){const l=Kr(r,n);16&l[2]||(l[2]|=32)}function Kd(n,r,l,c){let g=!1;if(ro()){const v=function Pf(n,r,l){const c=n.directiveRegistry;let g=null;if(c)for(let v=0;v<c.length;v++){const I=c[v];pp(l,I.selectors,!1)&&(g||(g=[]),Ya(yn(l,r),n,I.type),Pi(I)?(Ch(n,l),g.unshift(I)):g.push(I))}return g}(n,r,l),I=null===c?null:{"":-1};if(null!==v){g=!0,Lf(l,n.data.length,v.length);for(let he=0;he<v.length;he++){const Te=v[he];Te.providersResolver&&Te.providersResolver(Te)}let O=!1,V=!1,X=Mf(n,r,v.length,null);for(let he=0;he<v.length;he++){const Te=v[he];l.mergedAttrs=gu(l.mergedAttrs,Te.hostAttrs),Kp(n,l,r,X,Te),Ff(X,Te,I),null!==Te.contentQueries&&(l.flags|=8),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(l.flags|=128);const at=Te.type.prototype;!O&&(at.ngOnChanges||at.ngOnInit||at.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(l.index),O=!0),!V&&(at.ngOnChanges||at.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(l.index),V=!0),X++}Gp(n,l)}I&&function kf(n,r,l){if(r){const c=n.localNames=[];for(let g=0;g<r.length;g+=2){const v=l[r[g+1]];if(null==v)throw new lt(-301,!1);c.push(r[g],v)}}}(l,c,I)}return l.mergedAttrs=gu(l.mergedAttrs,l.attrs),g}function Zm(n,r,l,c,g,v){const I=v.hostBindings;if(I){let O=n.hostBindingOpCodes;null===O&&(O=n.hostBindingOpCodes=[]);const V=~r.index;(function im(n){let r=n.length;for(;r>0;){const l=n[--r];if("number"==typeof l&&l<0)return l}return 0})(O)!=V&&O.push(V),O.push(c,g,I)}}function zp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Ch(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Ff(n,r,l){if(l){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)l[r.exportAs[c]]=n;Pi(r)&&(l[""]=n)}}function Lf(n,r,l){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+l,n.providerIndexes=r}function Kp(n,r,l,c,g){n.data[c]=g;const v=g.factory||(g.factory=Jn(g.type)),I=new os(v,Pi(g),Lc);n.blueprint[c]=I,l[c]=I,Zm(n,r,0,c,Mf(n,l,g.hostVars,ri),g)}function jc(n,r,l){const c=us(r,n),g=Of(l),v=n[10],I=Uf(n,Jh(n,g,null,l.onPush?32:16,c,r,v,v.createRenderer(c,l),null,null,null));n[r.index]=I}function Qm(n,r,l,c,g,v,I){if(null==v)n.removeAttribute(r,g,l);else{const O=null==I?yt(v):I(v,c||"",g);n.setAttribute(r,g,O,l)}}function Bf(n,r,l,c,g,v){const I=v[r];if(null!==I){const O=c.setInput;for(let V=0;V<I.length;){const X=I[V++],he=I[V++],Te=I[V++];null!==O?c.setInput(l,Te,X,he):l[he]=Te}}}function Cy(n,r){let l=null,c=0;for(;c<r.length;){const g=r[c];if(0!==g)if(5!==g){if("number"==typeof g)break;n.hasOwnProperty(g)&&(null===l&&(l=[]),l.push(g,n[g],r[c+1])),c+=2}else c+=2;else c+=4}return l}function qp(n,r,l,c){return new Array(n,!0,!1,r,null,0,c,l,null,null)}function Xm(n,r){const l=Kr(r,n);if(or(l)){const c=l[1];48&l[2]?zd(c,l,c.template,l[8]):l[5]>0&&Yp(l)}}function Yp(n){for(let c=$u(n);null!==c;c=Dc(c))for(let g=10;g<c.length;g++){const v=c[g];if(or(v))if(512&v[2]){const I=v[1];zd(I,v,I.template,v[8])}else v[5]>0&&Yp(v)}const l=n[1].components;if(null!==l)for(let c=0;c<l.length;c++){const g=Kr(l[c],n);or(g)&&g[5]>0&&Yp(g)}}function Y_(n,r){const l=Kr(r,n),c=l[1];(function om(n,r){for(let l=r.length;l<n.blueprint.length;l++)r.push(n.blueprint[l])})(c,l),Zg(c,l,l[8])}function Uf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Hf(n){for(;n;){n[2]|=32;const r=ju(n);if(na(n)&&!r)return n;n=r}return null}function jf(n,r,l,c=!0){const g=r[10];g.begin&&g.begin();try{zd(n,r,n.template,l)}catch(I){throw c&&tf(r,I),I}finally{g.end&&g.end()}}function Zp(n,r,l){qr(0),r(n,l)}function t_(n){return n[7]||(n[7]=[])}function $f(n){return n.cleanup||(n.cleanup=[])}function tf(n,r){const l=n[9],c=l?l.get(Fd,null):null;c&&c.handleError(r)}function am(n,r,l,c,g){for(let v=0;v<l.length;){const I=l[v++],O=l[v++],V=r[I],X=n.data[I];null!==X.setInput?X.setInput(V,g,c,O):V[O]=g}}function $c(n,r,l){const c=no(r,n);Cd(n[11],c,l)}function Gf(n,r,l){let c=l?n.styles:null,g=l?n.classes:null,v=0;if(null!==r)for(let I=0;I<r.length;I++){const O=r[I];"number"==typeof O?v=O:1==v?g=Ze(g,O):2==v&&(c=Ze(c,O+": "+r[++I]+";"))}l?n.styles=c:n.stylesWithoutHost=c,l?n.classes=g:n.classesWithoutHost=g}function Jp(n,r,l,c,g=!1){for(;null!==l;){const v=r[l.index];if(null!==v&&c.push(zr(v)),Fs(v))for(let O=10;O<v.length;O++){const V=v[O],X=V[1].firstChild;null!==X&&Jp(V[1],V,X,c)}const I=l.type;if(8&I)Jp(n,r,l.child,c);else if(32&I){const O=hl(l,r);let V;for(;V=O();)c.push(V)}else if(16&I){const O=Hh(r,l);if(Array.isArray(O))c.push(...O);else{const V=ju(r[16]);Jp(V[1],V,O,c,!0)}}l=g?l.projectionNext:l.next}return c}class qd{constructor(r,l){this._lView=r,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,l=r[1];return Jp(l,r,l.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Fs(r)){const l=r[8],c=l?l.indexOf(this):-1;c>-1&&(Ad(r,c),lu(l,c))}this._attachedToViewContainer=!1}Cc(this._lView[1],this._lView)}onDestroy(r){em(this._lView[1],this._lView,null,r)}markForCheck(){Hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){jf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sd(n,r){id(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new lt(902,!1);this._appRef=r}}class lm extends qd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;jf(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class jl extends Su{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const l=ae(r);return new xi(l,this.ngModule)}}function Wf(n){const r=[];for(let l in n)n.hasOwnProperty(l)&&r.push({propName:n[l],templateName:l});return r}class rf{constructor(r,l){this.injector=r,this.parentInjector=l}get(r,l,c){const g=this.injector.get(r,xc,c);return g!==xc||l===xc?g:this.parentInjector.get(r,l,c)}}class xi extends fh{constructor(r,l){super(),this.componentDef=r,this.ngModule=l,this.componentType=r.type,this.selector=function Og(n){return n.map(mp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Wf(this.componentDef.inputs)}get outputs(){return Wf(this.componentDef.outputs)}create(r,l,c,g){let v=(g=g||this.ngModule)instanceof pi?g:g?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const I=v?new rf(r,v):r,O=I.get(gh,null);if(null===O)throw new lt(407,!1);const V=I.get(mh,null),X=O.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",Te=c?function xf(n,r,l){return n.selectRootElement(r,l===En.ShadowDom)}(X,c,this.componentDef.encapsulation):Id(X,he,function nf(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(he)),at=this.componentDef.onPush?288:272,St=jp(0,null,null,1,0,null,null,null,null,null),Jt=Jh(null,St,null,at,null,null,O,X,V,I,null);let In,Wn;Wi(Jt);try{const gr=function zf(n,r,l,c,g,v){const I=l[1];l[22]=n;const V=Xh(I,22,2,"#host",null),X=V.mergedAttrs=r.hostAttrs;null!==X&&(Gf(V,X,!0),null!==n&&(ca(g,n,X),null!==V.classes&&Sc(g,n,V.classes),null!==V.styles&&sd(g,n,V.styles)));const he=c.createRenderer(n,r),Te=Jh(l,Of(r),null,r.onPush?32:16,l[22],V,c,he,v||null,null,null);return I.firstCreatePass&&(Ya(yn(V,l),I,r.type),Ch(I,V),Lf(V,l.length,1)),Uf(l,Te),l[22]=Te}(Te,this.componentDef,Jt,O,X);if(Te)if(c)ca(X,Te,["ng-version",Ng.full]);else{const{attrs:Vr,classes:un}=function xg(n){const r=[],l=[];let c=1,g=2;for(;c<n.length;){let v=n[c];if("string"==typeof v)2===g?""!==v&&r.push(v,n[++c]):8===g&&l.push(v);else{if(!tc(g))break;g=v}c++}return{attrs:r,classes:l}}(this.componentDef.selectors[0]);Vr&&ca(X,Te,Vr),un&&un.length>0&&Sc(X,Te,un.join(" "))}if(Wn=qo(St,22),void 0!==l){const Vr=Wn.projection=[];for(let un=0;un<this.ngContentSelectors.length;un++){const ii=l[un];Vr.push(null!=ii?Array.from(ii):null)}}In=function Do(n,r,l,c){const g=l[1],v=function rm(n,r,l){const c=cs();n.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Kp(n,c,r,Mf(n,r,1,null),l),Gp(n,c));const g=Qa(r,n,c.directiveStart,c);E(g,r);const v=us(c,r);return v&&E(v,r),g}(g,l,r);if(n[8]=l[8]=v,null!==c)for(const O of c)O(v,r);if(r.contentQueries){const O=cs();r.contentQueries(1,v,O.directiveStart)}const I=cs();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Tt(I.index),Zm(l[1],I,0,I.directiveStart,I.directiveEnd,r),zp(r,v)),v}(gr,this.componentDef,Jt,[il]),Zg(St,Jt,null)}finally{ne()}return new r_(this.componentType,In,Xi(Wn,Jt),Jt,Wn)}}class r_ extends class pl{}{constructor(r,l,c,g,v){super(),this.location=c,this._rootLView=g,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new lm(g),this.componentType=r}setInput(r,l){const c=this._tNode.inputs;let g;if(null!==c&&(g=c[r])){const v=this._rootLView;am(v[1],v,g,r,l),nm(v,this._tNode.index)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function il(){const n=cs();fi(qt()[1],n)}function Kf(n){let r=function Ru(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const c=[n];for(;r;){let g;if(Pi(n))g=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new lt(903,!1);g=r.\u0275dir}if(g){if(l){c.push(g);const I=n;I.inputs=sc(n.inputs),I.declaredInputs=sc(n.declaredInputs),I.outputs=sc(n.outputs);const O=g.hostBindings;O&&dm(n,O);const V=g.viewQuery,X=g.contentQueries;if(V&&i_(n,V),X&&cm(n,X),Ge(n.inputs,g.inputs),Ge(n.declaredInputs,g.declaredInputs),Ge(n.outputs,g.outputs),Pi(g)&&g.data.animation){const he=n.data;he.animation=(he.animation||[]).concat(g.data.animation)}}const v=g.features;if(v)for(let I=0;I<v.length;I++){const O=v[I];O&&O.ngInherit&&O(n),O===Kf&&(l=!1)}}r=Object.getPrototypeOf(r)}!function Mu(n){let r=0,l=null;for(let c=n.length-1;c>=0;c--){const g=n[c];g.hostVars=r+=g.hostVars,g.hostAttrs=gu(g.hostAttrs,l=gu(l,g.hostAttrs))}}(c)}function sc(n){return n===Ii?{}:n===kn?[]:n}function i_(n,r){const l=n.viewQuery;n.viewQuery=l?(c,g)=>{r(c,g),l(c,g)}:r}function cm(n,r){const l=n.contentQueries;n.contentQueries=l?(c,g,v)=>{r(c,g,v),l(c,g,v)}:r}function dm(n,r){const l=n.hostBindings;n.hostBindings=l?(c,g)=>{r(c,g),l(c,g)}:r}let tg=null;function Ih(){if(!tg){const n=Pn.Symbol;if(n&&n.iterator)tg=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<r.length;++l){const c=r[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(tg=c)}}}return tg}function qf(n){return!!Yf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ih()in n)}function Yf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ou(n,r,l){return n[r]=l}function ma(n,r,l){return!Object.is(n[r],l)&&(n[r]=l,!0)}function oc(n,r,l,c){const g=ma(n,r,l);return ma(n,r+1,c)||g}function af(n,r,l,c){const g=qt();return ma(g,Vn(),r)&&(pr(),function Nu(n,r,l,c,g,v){const I=us(n,r);Qm(r[11],I,v,n.value,l,c,g)}(Vt(),g,n,r,l,c)),af}function Qd(n,r,l,c){return ma(n,Vn(),l)?r+yt(l)+c:ri}function _(n,r,l,c,g,v,I,O){const V=qt(),X=pr(),he=n+22,Te=X.firstCreatePass?function d(n,r,l,c,g,v,I,O,V){const X=r.consts,he=Xh(r,n,4,I||null,rs(X,O));Kd(r,l,he,rs(X,V)),fi(r,he);const Te=he.tViews=jp(2,he,c,g,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,X);return null!==r.queries&&(r.queries.template(r,he),Te.queries=r.queries.embeddedTView(he)),he}(he,X,V,r,l,c,g,v,I):X.data[he];j(Te,!1);const at=V[11].createComment("");rd(X,V,at,Te),E(at,V),Uf(V,V[he]=qp(at,V,at,Te)),_o(Te)&&Xg(X,V,Te),null!=I&&ef(V,Te,O)}function M(n){return So(function K(){return dr.lFrame.contextLView}(),22+n)}function G(n,r,l){const c=qt();return ma(c,Vn(),r)&&Hl(pr(),Vt(),c,n,r,c[11],l,!1),G}function te(n,r,l,c,g){const I=g?"class":"style";am(n,l,r.inputs[I],I,c)}function Xe(n,r,l,c){const g=qt(),v=pr(),I=22+n,O=g[11],V=g[I]=Id(O,r,function Zr(){return dr.lFrame.currentNamespace}()),X=v.firstCreatePass?function de(n,r,l,c,g,v,I){const O=r.consts,X=Xh(r,n,2,g,rs(O,v));return Kd(r,l,X,rs(O,I)),null!==X.attrs&&Gf(X,X.attrs,!1),null!==X.mergedAttrs&&Gf(X,X.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,X),X}(I,v,g,0,r,l,c):v.data[I];j(X,!0);const he=X.mergedAttrs;null!==he&&ca(O,V,he);const Te=X.classes;null!==Te&&Sc(O,V,Te);const at=X.styles;return null!==at&&sd(O,V,at),64!=(64&X.flags)&&rd(v,g,V,X),0===function ys(){return dr.lFrame.elementDepthCount}()&&E(V,g),function ml(){dr.lFrame.elementDepthCount++}(),_o(X)&&(Xg(v,g,X),Jg(v,X,g)),null!==c&&ef(g,X),Xe}function st(){let n=cs();ue()?kt():(n=n.parent,j(n,!1));const r=n;!function fo(){dr.lFrame.elementDepthCount--}();const l=pr();return l.firstCreatePass&&(fi(l,n),ta(n)&&l.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Pu(n){return 0!=(16&n.flags)}(r)&&te(l,r,qt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _l(n){return 0!=(32&n.flags)}(r)&&te(l,r,qt(),r.stylesWithoutHost,!1),st}function Dt(n,r,l,c){return Xe(n,r,l,c),st(),Dt}function zt(n,r,l){const c=qt(),g=pr(),v=n+22,I=g.firstCreatePass?function Gt(n,r,l,c,g){const v=r.consts,I=rs(v,c),O=Xh(r,n,8,"ng-container",I);return null!==I&&Gf(O,I,!0),Kd(r,l,O,rs(v,g)),null!==r.queries&&r.queries.elementStart(r,O),O}(v,g,c,r,l):g.data[v];j(I,!0);const O=c[v]=c[11].createComment("");return rd(g,c,O,I),E(O,c),_o(I)&&(Xg(g,c,I),Jg(g,I,c)),null!=l&&ef(c,I),zt}function Cn(){let n=cs();const r=pr();return ue()?kt():(n=n.parent,j(n,!1)),r.firstCreatePass&&(fi(r,n),ta(n)&&r.queries.elementEnd(n)),Cn}function Nr(){return qt()}function bi(n){return!!n&&"function"==typeof n.then}function ws(n){return!!n&&"function"==typeof n.subscribe}const _a=ws;function nu(n,r,l,c){const g=qt(),v=pr(),I=cs();return function Gc(n,r,l,c,g,v,I,O){const V=_o(c),he=n.firstCreatePass&&$f(n),Te=r[8],at=t_(r);let St=!0;if(3&c.type||O){const Wn=us(c,r),gr=O?O(Wn):Wn,Vr=at.length,un=O?uo=>O(zr(uo[c.index])):c.index;let ii=null;if(!O&&V&&(ii=function $l(n,r,l,c){const g=n.cleanup;if(null!=g)for(let v=0;v<g.length-1;v+=2){const I=g[v];if(I===l&&g[v+1]===c){const O=r[7],V=g[v+2];return O.length>V?O[V]:null}"string"==typeof I&&(v+=2)}return null}(n,r,g,c.index)),null!==ii)(ii.__ngLastListenerFn__||ii).__ngNextListenerFn__=v,ii.__ngLastListenerFn__=v,St=!1;else{v=uc(c,r,Te,v,!1);const uo=l.listen(gr,g,v);at.push(v,uo),he&&he.push(g,un,Vr,Vr+1)}}else v=uc(c,r,Te,v,!1);const Jt=c.outputs;let In;if(St&&null!==Jt&&(In=Jt[g])){const Wn=In.length;if(Wn)for(let gr=0;gr<Wn;gr+=2){const Ra=r[In[gr]][In[gr+1]].subscribe(v),Dm=at.length;at.push(v,Ra),he&&he.push(g,c.index,Dm,-(Dm+1))}}}(v,g,g[11],I,n,r,0,c),nu}function lc(n,r,l,c){try{return!1!==l(c)}catch(g){return tf(n,g),!1}}function uc(n,r,l,c,g){return function v(I){if(I===Function)return c;Hf(2&n.flags?Kr(n.index,r):r);let V=lc(r,0,c,I),X=v.__ngNextListenerFn__;for(;X;)V=lc(r,0,X,I)&&V,X=X.__ngNextListenerFn__;return g&&!1===V&&(I.preventDefault(),I.returnValue=!1),V}}function lf(n=1){return function $(n){return(dr.lFrame.contextLView=function ce(n,r){for(;n>0;)r=r[15],n--;return r}(n,dr.lFrame.contextLView))[8]}(n)}function Zf(n,r){let l=null;const c=function qh(n){const r=n.attrs;if(null!=r){const l=r.indexOf(5);if(0==(1&l))return r[l+1]}return null}(n);for(let g=0;g<r.length;g++){const v=r[g];if("*"!==v){if(null===c?pp(n,v,!0):Tf(c,v))return g}else l=g}return l}function iu(n){const r=qt()[16][6];if(!r.projection){const c=r.projection=A(n?n.length:1,null),g=c.slice();let v=r.child;for(;null!==v;){const I=n?Zf(v,n):0;null!==I&&(g[I]?g[I].projectionNext=v:c[I]=v,g[I]=v),v=v.next}}}function uf(n,r=0,l){const c=qt(),g=pr(),v=Xh(g,22+n,16,null,l||null);null===v.projection&&(v.projection=r),kt(),64!=(64&v.flags)&&function Tm(n,r,l){_g(r[11],0,r,l,tp(n,l,r),zu(l.parent||r[6],l,r))}(g,c,v)}function eh(n,r,l){return rr(n,"",r,"",l),eh}function rr(n,r,l,c,g){const v=qt(),I=Qd(v,r,l,c);return I!==ri&&Hl(pr(),Vt(),v,n,I,v[11],g,!1),rr}function zc(n,r,l,c,g){const v=n[l+1],I=null===r;let O=c?eu(v):Vl(v),V=!1;for(;0!==O&&(!1===V||I);){const he=n[O+1];xu(n[O],r)&&(V=!0,n[O+1]=c?nc(he):wh(he)),O=c?eu(he):Vl(he)}V&&(n[l+1]=c?wh(v):nc(v))}function xu(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&fn(n,r)>=0}const To={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Mh(n){return n.substring(To.key,To.keyEnd)}function Ny(n,r){const l=To.textEnd;return l===r?-1:(r=To.keyEnd=function cf(n,r,l){for(;r<l&&n.charCodeAt(r)>32;)r++;return r}(n,To.key=r,l),th(n,r,l))}function th(n,r,l){for(;r<l&&n.charCodeAt(r)<=32;)r++;return r}function gm(n,r,l){return _d(n,r,l,!1),gm}function X_(n,r){return _d(n,r,null,!0),X_}function My(n){!function yd(n,r,l,c){const g=pr(),v=Dn(2);g.firstUpdatePass&&Oy(g,null,v,c);const I=qt();if(l!==ri&&ma(I,v,l)){const O=g.data[Le()];if(Oh(O,c)&&!mm(g,v)){let V=c?O.classesWithoutHost:O.stylesWithoutHost;null!==V&&(l=Ze(V,l||"")),te(g,O,I,l,c)}else!function b_(n,r,l,c,g,v,I,O){g===ri&&(g=kn);let V=0,X=0,he=0<g.length?g[0]:null,Te=0<v.length?v[0]:null;for(;null!==he||null!==Te;){const at=V<g.length?g[V+1]:void 0,St=X<v.length?v[X+1]:void 0;let In,Jt=null;he===Te?(V+=2,X+=2,at!==St&&(Jt=Te,In=St)):null===Te||null!==he&&he<Te?(V+=2,Jt=he):(X+=2,Jt=Te,In=St),null!==Jt&&Ly(n,r,l,c,Jt,In,I,O),he=V<g.length?g[V]:null,Te=X<v.length?v[X]:null}}(g,O,I,I[11],I[v+1],I[v+1]=function Fy(n,r,l){if(null==l||""===l)return kn;const c=[],g=Ac(l);if(Array.isArray(g))for(let v=0;v<g.length;v++)n(c,g[v],!0);else if("object"==typeof g)for(const v in g)g.hasOwnProperty(v)&&n(c,v,g[v]);else"string"==typeof g&&r(c,g);return c}(n,r,l),c,v)}}(xe,dc,n,!0)}function dc(n,r){for(let l=function fm(n){return function __(n){To.key=0,To.keyEnd=0,To.value=0,To.valueEnd=0,To.textEnd=n.length}(n),Ny(n,th(n,0,To.textEnd))}(r);l>=0;l=Ny(r,l))xe(n,Mh(r),!0)}function _d(n,r,l,c){const g=qt(),v=pr(),I=Dn(2);v.firstUpdatePass&&Oy(v,n,I,c),r!==ri&&ma(g,I,r)&&Ly(v,v.data[Le()],g,g[11],n,g[I+1]=function _m(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Pe(Ac(n)))),n}(r,l),c,I)}function mm(n,r){return r>=n.expandoStartIndex}function Oy(n,r,l,c){const g=n.data;if(null===g[l+1]){const v=g[Le()],I=mm(n,l);Oh(v,c)&&null===r&&!I&&(r=!1),r=function _v(n,r,l,c){const g=Ai(n);let v=c?r.residualClasses:r.residualStyles;if(null===g)0===(c?r.classBindings:r.styleBindings)&&(l=ig(l=y_(null,n,r,l,c),r.attrs,c),v=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==g)if(l=y_(g,n,r,l,c),null===v){let V=function xy(n,r,l){const c=l?r.classBindings:r.styleBindings;if(0!==Vl(c))return n[eu(c)]}(n,r,c);void 0!==V&&Array.isArray(V)&&(V=y_(null,n,r,V[1],c),V=ig(V,r.attrs,c),function Py(n,r,l,c){n[eu(l?r.classBindings:r.styleBindings)]=c}(n,r,c,V))}else v=function ky(n,r,l){let c;const g=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<g;v++)c=ig(c,n[v].hostAttrs,l);return ig(c,r.attrs,l)}(n,r,c)}return void 0!==v&&(c?r.residualClasses=v:r.residualStyles=v),l}(g,v,r,c),function g_(n,r,l,c,g,v){let I=v?r.classBindings:r.styleBindings,O=eu(I),V=Vl(I);n[c]=l;let he,X=!1;if(Array.isArray(l)){const Te=l;he=Te[1],(null===he||fn(Te,he)>0)&&(X=!0)}else he=l;if(g)if(0!==V){const at=eu(n[O+1]);n[c+1]=Na(at,O),0!==at&&(n[at+1]=Np(n[at+1],c)),n[O+1]=function Ap(n,r){return 131071&n|r<<17}(n[O+1],c)}else n[c+1]=Na(O,0),0!==O&&(n[O+1]=Np(n[O+1],c)),O=c;else n[c+1]=Na(V,0),0===O?O=c:n[V+1]=Np(n[V+1],c),V=c;X&&(n[c+1]=wh(n[c+1])),zc(n,he,c,!0),zc(n,he,c,!1),function sl(n,r,l,c,g){const v=g?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&fn(v,r)>=0&&(l[c+1]=nc(l[c+1]))}(r,he,n,c,v),I=Na(O,V),v?r.classBindings=I:r.styleBindings=I}(g,v,r,l,I,c)}}function y_(n,r,l,c,g){let v=null;const I=l.directiveEnd;let O=l.directiveStylingLast;for(-1===O?O=l.directiveStart:O++;O<I&&(v=r[O],c=ig(c,v.hostAttrs,g),v!==n);)O++;return null!==n&&(l.directiveStylingLast=O),c}function ig(n,r,l){const c=l?1:2;let g=-1;if(null!==r)for(let v=0;v<r.length;v++){const I=r[v];"number"==typeof I?g=I:g===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xe(n,I,!!l||r[++v]))}return void 0===n?null:n}function Ly(n,r,l,c,g,v,I,O){if(!(3&r.type))return;const V=n.data,X=V[O+1];Kc(function Vg(n){return 1==(1&n)}(X)?df(V,r,l,g,Vl(X),I):void 0)||(Kc(v)||function md(n){return 2==(2&n)}(X)&&(v=df(V,null,l,g,O,I)),function Eu(n,r,l,c,g){if(r)g?n.addClass(l,c):n.removeClass(l,c);else{let v=-1===c.indexOf("-")?void 0:jo.DashCase;null==g?n.removeStyle(l,c,v):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),v|=jo.Important),n.setStyle(l,c,g,v))}}(c,I,no(Le(),l),g,v))}function df(n,r,l,c,g,v){const I=null===r;let O;for(;g>0;){const V=n[g],X=Array.isArray(V),he=X?V[1]:V,Te=null===he;let at=l[g+1];at===ri&&(at=Te?kn:void 0);let St=Te?Ft(at,c):he===c?at:void 0;if(X&&!Kc(St)&&(St=Ft(V,c)),Kc(St)&&(O=St,I))return O;const Jt=n[g+1];g=I?eu(Jt):Vl(Jt)}if(null!==r){let V=v?r.residualClasses:r.residualStyles;null!=V&&(O=Ft(V,c))}return O}function Kc(n){return void 0!==n}function Oh(n,r){return 0!=(n.flags&(r?16:32))}function By(n,r=""){const l=qt(),c=pr(),g=n+22,v=c.firstCreatePass?Xh(c,g,1,r,null):c.data[g],I=l[g]=bu(l[11],r);rd(c,l,I,v),j(v,!1)}function w_(n){return E_("",n,""),w_}function E_(n,r,l){const c=qt(),g=Qd(c,n,r,l);return g!==ri&&$c(c,Le(),g),E_}function nh(n,r,l,c,g){const v=qt(),I=function Sh(n,r,l,c,g,v){const O=oc(n,Ct(),l,g);return Dn(2),O?r+yt(l)+c+yt(g)+v:ri}(v,n,r,l,c,g);return I!==ri&&$c(v,Le(),I),nh}function ym(n,r,l){const c=qt();return ma(c,Vn(),r)&&Hl(pr(),Vt(),c,n,r,c[11],l,!0),ym}function oy(n,r,l){const c=qt();if(ma(c,Vn(),r)){const v=pr(),I=Vt();Hl(v,I,c,n,r,function Qp(n,r,l){return(null===n||Pi(n))&&(l=function Ea(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(l[r.index])),l[11]}(Ai(v.data),I,c),l,!0)}return oy}const Qf=void 0;var T_=["en",[["a","p"],["AM","PM"],Qf],[["AM","PM"],Qf,Qf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qf,"{1} 'at' {0}",Qf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qy(n){const l=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let ag={};function C_(n){const r=function vm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=su(r);if(l)return l;const c=r.split("-")[0];if(l=su(c),l)return l;if("en"===c)return T_;throw new lt(701,!1)}function hc(n){return C_(n)[Fr.PluralCase]}function su(n){return n in ag||(ag[n]=Pn.ng&&Pn.ng.common&&Pn.ng.common.locales&&Pn.ng.common.locales[n]),ag[n]}var Fr=(()=>((Fr=Fr||{})[Fr.LocaleId=0]="LocaleId",Fr[Fr.DayPeriodsFormat=1]="DayPeriodsFormat",Fr[Fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fr[Fr.DaysFormat=3]="DaysFormat",Fr[Fr.DaysStandalone=4]="DaysStandalone",Fr[Fr.MonthsFormat=5]="MonthsFormat",Fr[Fr.MonthsStandalone=6]="MonthsStandalone",Fr[Fr.Eras=7]="Eras",Fr[Fr.FirstDayOfWeek=8]="FirstDayOfWeek",Fr[Fr.WeekendRange=9]="WeekendRange",Fr[Fr.DateFormat=10]="DateFormat",Fr[Fr.TimeFormat=11]="TimeFormat",Fr[Fr.DateTimeFormat=12]="DateTimeFormat",Fr[Fr.NumberSymbols=13]="NumberSymbols",Fr[Fr.NumberFormats=14]="NumberFormats",Fr[Fr.CurrencyCode=15]="CurrencyCode",Fr[Fr.CurrencySymbol=16]="CurrencySymbol",Fr[Fr.CurrencyName=17]="CurrencyName",Fr[Fr.Currencies=18]="Currencies",Fr[Fr.Directionality=19]="Directionality",Fr[Fr.PluralCase=20]="PluralCase",Fr[Fr.ExtraData=21]="ExtraData",Fr))();const bm=["zero","one","two","few","many"],ug="en-US",xh={marker:"element"},rh={marker:"ICU"};var Xo=(()=>((Xo=Xo||{})[Xo.SHIFT=2]="SHIFT",Xo[Xo.APPEND_EAGERLY=1]="APPEND_EAGERLY",Xo[Xo.COMMENT=2]="COMMENT",Xo))();let Yy=ug;function Zy(n){(function tn(n,r){null==n&&pe(r,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(Yy=n.toLowerCase().replace(/_/g,"-"))}function Ph(n,r,l){const c=r.insertBeforeIndex,g=Array.isArray(c)?c[0]:c;return null===g?Ku(n,0,l):zr(l[g])}function Qy(n,r,l,c,g){const v=r.insertBeforeIndex;if(Array.isArray(v)){let I=c,O=null;if(3&r.type||(O=I,I=g),null!==I&&0==(2&r.flags))for(let V=1;V<v.length;V++)Wu(n,I,l[v[V]],O,!1)}}function Jy(n,r){if(n.push(r),n.length>1)for(let l=n.length-2;l>=0;l--){const c=n[l];Xy(c)||ev(c,r)&&null===Pv(c)&&ly(c,r.index)}}function Xy(n){return!(64&n.type)}function ev(n,r){return Xy(r)||n.index>r.index}function Pv(n){const r=n.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function ly(n,r){const l=n.insertBeforeIndex;Array.isArray(l)?l[0]=r:(Nd(Ph,Qy),n.insertBeforeIndex=r)}function ff(n,r){const l=n.data[r];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function uy(n,r,l){const c=Hp(n,l,64,null,null);return Jy(r,c),c}function I_(n,r){const l=r[n.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function cy(n){return n>>>17}function dy(n){return(131070&n)>>>1}let dg=0,hg=0;function fy(n,r,l,c){const g=l[11];let I,v=null;for(let O=0;O<r.length;O++){const V=r[O];if("string"==typeof V){const X=r[++O];null===l[X]&&(l[X]=bu(g,V))}else if("number"==typeof V)switch(1&V){case 0:const X=cy(V);let he,Te;if(null===v&&(v=X,I=Ha(g,c)),X===v?(he=c,Te=I):(he=null,Te=zr(l[X])),null!==Te){const In=dy(V);Wu(g,Te,l[In],he,!1);const gr=ff(n,In);if(null!==gr&&"object"==typeof gr){const Vr=I_(gr,l);null!==Vr&&fy(n,gr.create[Vr],l,l[gr.anchorIdx])}}break;case 1:const St=r[++O],Jt=r[++O];Qm(g,no(V>>>1,l),null,null,St,Jt,null)}else switch(V){case rh:const X=r[++O],he=r[++O];null===l[he]&&E(l[he]=wu(g,X),l);break;case xh:const Te=r[++O],at=r[++O];null===l[at]&&E(l[at]=Id(g,Te,null),l)}}}function rv(n,r,l,c,g){for(let v=0;v<l.length;v++){const I=l[v],O=l[++v];if(I&g){let V="";for(let X=v+1;X<=v+O;X++){const he=l[X];if("string"==typeof he)V+=he;else if("number"==typeof he)if(he<0)V+=yt(r[c-he]);else{const Te=he>>>2;switch(3&he){case 1:const at=l[++X],St=l[++X],Jt=n.data[Te];"string"==typeof Jt?Qm(r[11],r[Te],null,Jt,at,V,St):Hl(n,Jt,r,at,V,r[11],St,!1);break;case 0:const In=r[Te];null!==In&&Cd(r[11],In,V);break;case 2:e(n,ff(n,Te),r,V);break;case 3:i(n,ff(n,Te),c,r)}}}}else{const V=l[v+1];if(V>0&&3==(3&V)){const he=ff(n,V>>>2);r[he.currentCaseLViewIndex]<0&&i(n,he,c,r)}}v+=O}}function i(n,r,l,c){let g=c[r.currentCaseLViewIndex];if(null!==g){let v=dg;g<0&&(g=c[r.currentCaseLViewIndex]=~g,v=-1),rv(n,c,r.update[g],l,v)}}function e(n,r,l,c){const g=function a(n,r){let l=n.cases.indexOf(r);if(-1===l)switch(n.type){case 1:{const c=function fu(n,r){const l=hc(r)(parseInt(n,10)),c=bm[l];return void 0!==c?c:"other"}(r,function xv(){return Yy}());l=n.cases.indexOf(c),-1===l&&"other"!==c&&(l=n.cases.indexOf("other"));break}case 0:l=n.cases.indexOf("other")}return-1===l?null:l}(r,c);if(I_(r,l)!==g&&(t(n,r,l),l[r.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const I=l[r.anchorIdx];I&&fy(n,r.create[g],l,I)}}function t(n,r,l){let c=I_(r,l);if(null!==c){const g=r.remove[c];for(let v=0;v<g.length;v++){const I=g[v];if(I>0){const O=no(I,l);null!==O&&$h(l[11],O)}else t(n,ff(n,~I),l)}}}function f(){const n=[];let l,c,r=-1;function v(O,V){r=0;const X=I_(O,V);c=null!==X?O.remove[X]:kn}function I(){if(r<c.length){const O=c[r++];return O>0?l[O]:(n.push(r,c),v(l[1].data[~O],l),I())}return 0===n.length?null:(c=n.pop(),r=n.pop(),I())}return function g(O,V){for(l=V;n.length;)n.pop();return v(O.value,V),I}}const me=/\ufffd(\d+):?\d*\ufffd/gi,It=/\ufffd(\d+)\ufffd/,Xt=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Yn=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,yr=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,mo=/\uE500/g;function ya(n,r,l,c,g,v,I){const O=Mf(n,c,1,null);let V=O<<Xo.SHIFT,X=W();r===X&&(X=null),null===X&&(V|=Xo.APPEND_EAGERLY),I&&(V|=Xo.COMMENT,function Xc(n){void 0===tl&&(tl=n())}(f)),g.push(V,null===v?"":v);const he=Hp(n,O,I?32:1,null===v?"":v,null);Jy(l,he);const Te=he.index;return j(he,!1),null!==X&&r!==X&&function kv(n,r){let l=n.insertBeforeIndex;null===l?(Nd(Ph,Qy),l=n.insertBeforeIndex=[null,r]):(function bt(n,r,l){n!=r&&pe(l,n,r,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(r))}(X,Te),he}function xs(n,r,l,c,g,v,I){const O=I.match(me),V=ya(n,r,l,v,c,O?null:I,!1);O&&va(g,I,V.index,null,0,null)}function va(n,r,l,c,g,v){const I=n.length,O=I+1;n.push(null,null);const V=I+2,X=r.split(me);let he=0;for(let Te=0;Te<X.length;Te++){const at=X[Te];if(1&Te){const St=g+parseInt(at,10);n.push(-1-St),he|=O0(St)}else""!==at&&n.push(at)}return n.push(l<<2|(c?1:0)),c&&n.push(c,v),n[I]=he,n[O]=n.length-V,he}function O0(n){return 1<<Math.min(n,31)}function x0(n){let r,v,l="",c=0,g=!1;for(;null!==(r=Yn.exec(n));)g?r[0]===`\ufffd/*${v}\ufffd`&&(c=r.index,g=!1):(l+=n.substring(c,r.index+r[0].length),v=r[1],g=!0);return l+=n.slice(c),l}function P0(n,r,l,c,g,v){let I=0;const O={type:g.type,currentCaseLViewIndex:Mf(n,r,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function Cw(n,r,l){n.push(O0(r.mainBinding),2,-1-r.mainBinding,l<<2|2)})(l,g,v),function tv(n,r,l){const c=n.data[r];null===c?n.data[r]=l:c.value=l}(n,v,O);const V=g.values;for(let X=0;X<V.length;X++){const he=V[X],Te=[];for(let at=0;at<he.length;at++){const St=he[at];if("string"!=typeof St){const Jt=Te.push(St)-1;he[at]=`\x3c!--\ufffd${Jt}\ufffd--\x3e`}}I=Dw(n,O,r,l,c,g.cases[X],he.join(""),Te)|I}I&&function Iw(n,r,l){n.push(r,1,l<<2|3)}(l,I,v)}function Ew(n){const r=[],l=[];let c=1,g=0;const v=Vv(n=n.replace(Xt,function(I,O,V){return c="select"===V?0:1,g=parseInt(O.slice(1),10),""}));for(let I=0;I<v.length;){let O=v[I++].trim();1===c&&(O=O.replace(/\s*(?:=)?(\w+)\s*/,"$1")),O.length&&r.push(O);const V=Vv(v[I++]);r.length>l.length&&l.push(V)}return{type:c,mainBinding:g,cases:r,values:l}}function Vv(n){if(!n)return[];let r=0;const l=[],c=[],g=/[{}]/g;let v;for(g.lastIndex=0;v=g.exec(n);){const O=v.index;if("}"==v[0]){if(l.pop(),0==l.length){const V=n.substring(r,O);Xt.test(V)?c.push(Ew(V)):c.push(V),r=O+1}}else{if(0==l.length){const V=n.substring(r,O);c.push(V),r=O+1}l.push("{")}}const I=n.substring(r);return c.push(I),c}function Dw(n,r,l,c,g,v,I,O){const V=[],X=[],he=[];r.cases.push(v),r.create.push(V),r.remove.push(X),r.update.push(he);const at=lo(_f()).getInertBodyElement(I),St=dp(at)||at;return St?k0(n,r,l,c,V,X,he,St,g,O,0):0}function k0(n,r,l,c,g,v,I,O,V,X,he){let Te=0,at=O.firstChild;for(;at;){const St=Mf(n,l,1,null);switch(at.nodeType){case Node.ELEMENT_NODE:const Jt=at,In=Jt.tagName.toLowerCase();if(wf.hasOwnProperty(In)){Uv(g,xh,In,V,St),n.data[St]=In;const un=Jt.attributes;for(let ii=0;ii<un.length;ii++){const uo=un.item(ii),Ra=uo.name.toLowerCase();uo.value.match(me)?Ef.hasOwnProperty(Ra)&&va(I,uo.value,St,uo.name,0,up[Ra]?cd:null):Sw(g,St,uo)}Te=k0(n,r,l,c,g,v,I,at,St,X,he+1)|Te,F0(v,St,he)}break;case Node.TEXT_NODE:const Wn=at.textContent||"",gr=Wn.match(me);Uv(g,null,gr?"":Wn,V,St),F0(v,St,he),gr&&(Te=va(I,Wn,St,null,0,null)|Te);break;case Node.COMMENT_NODE:const Vr=It.exec(at.textContent||"");if(Vr){const ii=X[parseInt(Vr[1],10)];Uv(g,rh,"",V,St),P0(n,l,c,V,ii,St),Tw(v,St,he)}}at=at.nextSibling}return Te}function F0(n,r,l){0===l&&n.push(r)}function Tw(n,r,l){0===l&&(n.push(~r),n.push(r))}function Uv(n,r,l,c,g){null!==r&&n.push(r),n.push(l,g,function Fv(n,r,l){return n|r<<17|l<<1}(0,c,g))}function Sw(n,r,l){n.push(r<<1|1,l.name,l.value)}function B0(n,r,l=-1){const c=pr(),g=qt(),v=22+n,I=rs(c.consts,r),O=W();c.firstCreatePass&&function Is(n,r,l,c,g,v){const I=W(),O=[],V=[],X=[[]];g=function ww(n,r){if(function bw(n){return-1===n}(r))return x0(n);{const l=n.indexOf(`:${r}\ufffd`)+2+r.toString().length,c=n.search(new RegExp(`\ufffd\\/\\*\\d+:${r}\ufffd`));return x0(n.substring(l,c))}}(g,v);const he=function ea(n){return n.replace(mo," ")}(g).split(yr);for(let Te=0;Te<he.length;Te++){let at=he[Te];if(0==(1&Te)){const St=Vv(at);for(let Jt=0;Jt<St.length;Jt++){let In=St[Jt];if(0==(1&Jt)){const Wn=In;""!==Wn&&xs(n,I,X[0],O,V,l,Wn)}else{const Wn=In;if("object"!=typeof Wn)throw new Error(`Unable to parse ICU expression in "${g}" message.`);P0(n,l,V,r,Wn,ya(n,I,X[0],l,O,"",!0).index)}}}else{const St=47===at.charCodeAt(0),In=(at.charCodeAt(St?1:0),22+Number.parseInt(at.substring(St?2:1)));if(St)X.shift(),j(W(),!1);else{const Wn=uy(n,X[0],In);X.unshift([]),j(Wn,!0)}}}n.data[c]={create:O,update:V}}(c,null===O?0:O.index,g,v,I,l);const V=c.data[v],he=td(c,O===g[6]?null:O,g);(function nv(n,r,l,c){const g=n[11];for(let v=0;v<r.length;v++){const I=r[v++],O=r[v],V=(I&Xo.COMMENT)===Xo.COMMENT,X=(I&Xo.APPEND_EAGERLY)===Xo.APPEND_EAGERLY,he=I>>>Xo.SHIFT;let Te=n[he];null===Te&&(Te=n[he]=V?g.createComment(O):bu(g,O)),X&&null!==l&&Wu(g,l,Te,c,!1)}})(g,V.create,he,O&&8&O.type?g[O.index]:null),qn(!0)}function U0(n,r,l){B0(n,r,l),function V0(){qn(!1)}()}function Hv(n){return function Lv(n){n&&(dg|=1<<Math.min(hg,31)),hg++}(ma(qt(),Vn(),n)),Hv}function H0(n){!function Bv(n,r,l){if(hg>0){const c=n.data[l];rv(n,r,Array.isArray(c)?c:c.update,Ct()-hg-1,dg)}dg=0,hg=0}(pr(),qt(),n+22)}function jv(n,r,l,c,g){if(n=Ue(n),Array.isArray(n))for(let v=0;v<n.length;v++)jv(n[v],r,l,c,g);else{const v=pr(),I=qt();let O=Ni(n)?n:Ue(n.provide),V=Wo(n);const X=cs(),he=1048575&X.providerIndexes,Te=X.directiveStart,at=X.providerIndexes>>20;if(Ni(n)||!n.multi){const St=new os(V,g,Lc),Jt=Gv(O,r,g?he:he+at,Te);-1===Jt?(Ya(yn(X,I),v,O),$v(v,n,r.length),r.push(O),X.directiveStart++,X.directiveEnd++,g&&(X.providerIndexes+=1048576),l.push(St),I.push(St)):(l[Jt]=St,I[Jt]=St)}else{const St=Gv(O,r,he+at,Te),Jt=Gv(O,r,he,he+at),In=St>=0&&l[St],Wn=Jt>=0&&l[Jt];if(g&&!Wn||!g&&!In){Ya(yn(X,I),v,O);const gr=function Hw(n,r,l,c,g){const v=new os(n,l,Lc);return v.multi=[],v.index=r,v.componentProviders=0,j0(v,g,c&&!l),v}(g?Uw:Vw,l.length,g,c,V);!g&&Wn&&(l[Jt].providerFactory=gr),$v(v,n,r.length,0),r.push(O),X.directiveStart++,X.directiveEnd++,g&&(X.providerIndexes+=1048576),l.push(gr),I.push(gr)}else $v(v,n,St>-1?St:Jt,j0(l[g?Jt:St],V,!g&&c));!g&&c&&Wn&&l[Jt].componentProviders++}}}function $v(n,r,l,c){const g=Ni(r),v=function Cr(n){return!!n.useClass}(r);if(g||v){const V=(v?Ue(r.useClass):r).prototype.ngOnDestroy;if(V){const X=n.destroyHooks||(n.destroyHooks=[]);if(!g&&r.multi){const he=X.indexOf(l);-1===he?X.push(l,[c,V]):X[he+1].push(c,V)}else X.push(l,V)}}}function j0(n,r,l){return l&&n.componentProviders++,n.multi.push(r)-1}function Gv(n,r,l,c){for(let g=l;g<c;g++)if(r[g]===n)return g;return-1}function Vw(n,r,l,c){return Wv(this.multi,[])}function Uw(n,r,l,c){const g=this.multi;let v;if(this.providerFactory){const I=this.providerFactory.componentProviders,O=Qa(l,l[1],this.providerFactory.index,c);v=O.slice(0,I),Wv(g,v);for(let V=I;V<O.length;V++)v.push(O[V])}else v=[],Wv(g,v);return v}function Wv(n,r){for(let l=0;l<n.length;l++)r.push((0,n[l])());return r}function $0(n,r=[]){return l=>{l.providersResolver=(c,g)=>function Bw(n,r,l){const c=pr();if(c.firstCreatePass){const g=Pi(n);jv(l,c.data,c.blueprint,g,!0),jv(r,c.data,c.blueprint,g,!1)}}(c,g?g(n):n,r)}}class S_{}class G0{}function jw(n,r){return new W0(n,r??null)}class W0 extends S_{constructor(r,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jl(this);const c=pn(r);this._bootstrapComponents=Xl(c.bootstrap),this._r3Injector=yp(r,l,[{provide:S_,useValue:this},{provide:Su,useValue:this.componentFactoryResolver}],Pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class zv extends G0{constructor(r){super(),this.moduleType=r}create(r){return new W0(this.moduleType,r)}}class $w extends S_{constructor(r,l,c){super(),this.componentFactoryResolver=new jl(this),this.instance=null;const g=new qi([...r,{provide:S_,useValue:this},{provide:Su,useValue:this.componentFactoryResolver}],l||Oi(),c,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Kv(n,r,l=null){return new $w(n,r,l).injector}let Gw=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Re(0,l.type),g=c.length>0?Kv([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,g)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ye({token:n,providedIn:"environment",factory:()=>new n(oo(pi))}),n})();function z0(n){n.getStandaloneInjector=r=>r.get(Gw).getOrCreateStandaloneInjector(n)}function X0(n,r,l,c){return nb(qt(),He(),n,r,l,c)}function eb(n,r,l,c,g){return function rb(n,r,l,c,g,v,I){const O=r+l;return oc(n,O,g,v)?Ou(n,O+2,I?c.call(I,g,v):c(g,v)):py(n,O+2)}(qt(),He(),n,r,l,c,g)}function tb(n,r,l,c,g,v){return function ib(n,r,l,c,g,v,I,O){const V=r+l;return function sf(n,r,l,c,g){const v=oc(n,r,l,c);return ma(n,r+2,g)||v}(n,V,g,v,I)?Ou(n,V+3,O?c.call(O,g,v,I):c(g,v,I)):py(n,V+3)}(qt(),He(),n,r,l,c,g,v)}function py(n,r){const l=n[r];return l===ri?void 0:l}function nb(n,r,l,c,g,v){const I=r+l;return ma(n,I,g)?Ou(n,I+1,v?c.call(v,g):c(g)):py(n,I+1)}function ab(n,r){const l=pr();let c;const g=n+22;l.firstCreatePass?(c=function oE(n,r){if(r)for(let l=r.length-1;l>=0;l--){const c=r[l];if(n===c.name)return c}}(r,l.pipeRegistry),l.data[g]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(g,c.onDestroy)):c=l.data[g];const v=c.factory||(c.factory=Jn(c.type)),I=Ar(Lc);try{const O=rn(!1),V=v();return rn(O),function D(n,r,l,c){l>=n.data.length&&(n.data[l]=null,n.blueprint[l]=null),r[l]=c}(l,qt(),g,V),V}finally{Ar(I)}}function lb(n,r,l){const c=n+22,g=qt(),v=So(g,c);return function gy(n,r){return n[1].data[r].pure}(g,c)?nb(g,He(),r,v.transform,l,v):v.transform(l)}function Yv(n){return r=>{setTimeout(n,void 0,r)}}const pf=class dE extends h.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,l,c){let g=r,v=l||(()=>null),I=c;if(r&&"object"==typeof r){const V=r;g=V.next?.bind(V),v=V.error?.bind(V),I=V.complete?.bind(V)}this.__isAsync&&(v=Yv(v),g&&(g=Yv(g)),I&&(I=Yv(I)));const O=super.subscribe({next:g,error:v,complete:I});return r instanceof U.w0&&r.add(O),O}};function hE(){return this._results[Ih()]()}class Zv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ih(),c=Zv.prototype;c[l]||(c[l]=hE)}get changes(){return this._changes||(this._changes=new pf)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,l){return this._results.reduce(r,l)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,l){const c=this;c.dirty=!1;const g=Ts(r);(this._changesDetected=!function Bu(n,r,l){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let g=n[c],v=r[c];if(l&&(g=l(g),v=l(v)),v!==g)return!1}return!0}(c._results,g,l))&&(c._results=g,c.length=g.length,c.last=g[this.length-1],c.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let my=(()=>{class n{}return n.__NG_ELEMENT_ID__=gE,n})();const fE=my,pE=class extends fE{constructor(r,l,c){super(),this._declarationLView=r,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(r,l){const c=this._declarationTContainer.tViews,g=Jh(this._declarationLView,c,r,16,null,c.declTNode,null,null,null,null,l||null);g[17]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[19];return null!==I&&(g[19]=I.createEmbeddedView(c)),Zg(c,g,r),new qd(g)}};function gE(){return iv(cs(),qt())}function iv(n,r){return 4&n.type?new pE(r,n,Xi(n,r)):null}let sv=(()=>{class n{}return n.__NG_ELEMENT_ID__=mE,n})();function mE(){return db(cs(),qt())}const _E=sv,ub=class extends _E{constructor(r,l,c){super(),this._lContainer=r,this._hostTNode=l,this._hostLView=c}get element(){return Xi(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const r=ui(this._hostTNode,this._hostLView);if(io(r)){const l=Ca(r,this._hostLView),c=Ds(r);return new da(l[1].data[c+8],l)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const l=cb(this._lContainer);return null!==l&&l[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,l,c){let g,v;"number"==typeof c?g=c:null!=c&&(g=c.index,v=c.injector);const I=r.createEmbeddedView(l||{},v);return this.insert(I,g),I}createComponent(r,l,c,g,v){const I=r&&!function al(n){return"function"==typeof n}(r);let O;if(I)O=l;else{const Te=l||{};O=Te.index,c=Te.injector,g=Te.projectableNodes,v=Te.environmentInjector||Te.ngModuleRef}const V=I?r:new xi(ae(r)),X=c||this.parentInjector;if(!v&&null==V.ngModule){const at=(I?X:this.parentInjector).get(pi,null);at&&(v=at)}const he=V.create(X,g,void 0,v);return this.insert(he.hostView,O),he}insert(r,l){const c=r._lView,g=c[1];if(function Es(n){return Fs(n[3])}(c)){const he=this.indexOf(r);if(-1!==he)this.detach(he);else{const Te=c[3],at=new ub(Te,Te[6],Te[3]);at.detach(at.indexOf(r))}}const v=this._adjustIndex(l),I=this._lContainer;!function mf(n,r,l,c){const g=10+c,v=l.length;c>0&&(l[g-1][4]=r),c<v-10?(r[4]=l[g],Sa(l,10+c,r)):(l.push(r),r[4]=null),r[3]=l;const I=r[17];null!==I&&l!==I&&function Mo(n,r){const l=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===l?n[9]=[r]:l.push(r)}(I,r);const O=r[19];null!==O&&O.insertView(n),r[2]|=64}(g,c,I,v);const O=jh(v,I),V=c[11],X=Ha(V,I[7]);return null!==X&&function Tc(n,r,l,c,g,v){c[0]=g,c[6]=r,id(n,c,l,1,g,v)}(g,I[6],V,c,X,O),r.attachToViewContainerRef(),Sa(Qv(I),v,r),r}move(r,l){return this.insert(r,l)}indexOf(r){const l=cb(this._lContainer);return null!==l?l.indexOf(r):-1}remove(r){const l=this._adjustIndex(r,-1),c=Ad(this._lContainer,l);c&&(lu(Qv(this._lContainer),l),Cc(c[1],c))}detach(r){const l=this._adjustIndex(r,-1),c=Ad(this._lContainer,l);return c&&null!=lu(Qv(this._lContainer),l)?new qd(c):null}_adjustIndex(r,l=0){return r??this.length+l}};function cb(n){return n[8]}function Qv(n){return n[8]||(n[8]=[])}function db(n,r){let l;const c=r[n.index];if(Fs(c))l=c;else{let g;if(8&n.type)g=zr(c);else{const v=r[11];g=v.createComment("");const I=us(n,r);Wu(v,Ha(v,I),g,function Jr(n,r){return n.nextSibling(r)}(v,I),!1)}r[n.index]=l=qp(c,r,g,n),Uf(r,l)}return new ub(l,n,r)}class Jv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const l=r.queries;if(null!==l){const c=null!==r.contentQueries?r.contentQueries[0]:l.length,g=[];for(let v=0;v<c;v++){const I=l.getByIndex(v);g.push(this.queries[I.indexInDeclarationView].clone())}return new Xv(g)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let l=0;l<this.queries.length;l++)null!==bb(r,l).matches&&this.queries[l].setDirty()}}class hb{constructor(r,l,c=null){this.predicate=r,this.flags=l,this.read=c}}class e0{constructor(r=[]){this.queries=r}elementStart(r,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,l)}elementEnd(r){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(r)}embeddedTView(r){let l=null;for(let c=0;c<this.length;c++){const g=null!==l?l.length:0,v=this.getByIndex(c).embeddedTView(r,g);v&&(v.indexInDeclarationView=c,null!==l?l.push(v):l=[v])}return null!==l?new e0(l):null}template(r,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,l)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class t0{constructor(r,l=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(r,l){this.isApplyingToNode(l)&&this.matchTNode(r,l)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,l){this.elementStart(r,l)}embeddedTView(r,l){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,l),new t0(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let g=0;g<c.length;g++){const v=c[g];this.matchTNodeWithReadOption(r,l,bE(l,v)),this.matchTNodeWithReadOption(r,l,ka(l,r,v,!1,!1))}else c===my?4&l.type&&this.matchTNodeWithReadOption(r,l,-1):this.matchTNodeWithReadOption(r,l,ka(l,r,c,!1,!1))}matchTNodeWithReadOption(r,l,c){if(null!==c){const g=this.metadata.read;if(null!==g)if(g===Qu||g===sv||g===my&&4&l.type)this.addMatch(l.index,-2);else{const v=ka(l,r,g,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,c)}}addMatch(r,l){null===this.matches?this.matches=[r,l]:this.matches.push(r,l)}}function bE(n,r){const l=n.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===r)return l[c+1];return null}function EE(n,r,l,c){return-1===l?function wE(n,r){return 11&n.type?Xi(n,r):4&n.type?iv(n,r):null}(r,n):-2===l?function DE(n,r,l){return l===Qu?Xi(r,n):l===my?iv(r,n):l===sv?db(r,n):void 0}(n,r,c):Qa(n,n[1],l,r)}function fb(n,r,l,c){const g=r[19].queries[c];if(null===g.matches){const v=n.data,I=l.matches,O=[];for(let V=0;V<I.length;V+=2){const X=I[V];O.push(X<0?null:EE(r,v[X],I[V+1],l.metadata.read))}g.matches=O}return g.matches}function n0(n,r,l,c){const g=n.queries.getByIndex(l),v=g.matches;if(null!==v){const I=fb(n,r,g,l);for(let O=0;O<v.length;O+=2){const V=v[O];if(V>0)c.push(I[O/2]);else{const X=v[O+1],he=r[-V];for(let Te=10;Te<he.length;Te++){const at=he[Te];at[17]===at[3]&&n0(at[1],at,X,c)}if(null!==he[9]){const Te=he[9];for(let at=0;at<Te.length;at++){const St=Te[at];n0(St[1],St,X,c)}}}}}return c}function pb(n){const r=qt(),l=pr(),c=is();qr(c+1);const g=bb(l,c);if(n.dirty&&function Fo(n){return 4==(4&n[2])}(r)===(2==(2&g.metadata.flags))){if(null===g.matches)n.reset([]);else{const v=g.crossesNgTemplate?n0(l,r,c,[]):fb(l,r,g,c);n.reset(v,fd),n.notifyOnChanges()}return!0}return!1}function gb(n,r,l){const c=pr();c.firstCreatePass&&(vb(c,new hb(n,r,l),-1),2==(2&r)&&(c.staticViewQueries=!0)),yb(c,qt(),r)}function mb(n,r,l,c){const g=pr();if(g.firstCreatePass){const v=cs();vb(g,new hb(r,l,c),v.index),function CE(n,r){const l=n.contentQueries||(n.contentQueries=[]);r!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,r)}(g,n),2==(2&l)&&(g.staticContentQueries=!0)}yb(g,qt(),l)}function _b(){return function TE(n,r){return n[19].queries[r].queryList}(qt(),is())}function yb(n,r,l){const c=new Zv(4==(4&l));em(n,r,c,c.destroy),null===r[19]&&(r[19]=new Xv),r[19].queries.push(new Jv(c))}function vb(n,r,l){null===n.queries&&(n.queries=new e0),n.queries.track(new t0(r,l))}function bb(n,r){return n.queries.getByIndex(r)}function wb(n,r){return iv(n,r)}function av(...n){}const Ub=new Mi("Application Initializer");let lv=(()=>{class n{constructor(l){this.appInits=l,this.resolve=av,this.reject=av,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,g)=>{this.resolve=c,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const v=this.appInits[g]();if(bi(v))l.push(v);else if(_a(v)){const I=new Promise((O,V)=>{v.subscribe({complete:O,error:V})});l.push(I)}}Promise.all(l).then(()=>{c()}).catch(g=>{this.reject(g)}),0===l.length&&c(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(oo(Ub,8))},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hb=new Mi("AppId",{providedIn:"root",factory:function jb(){return`${l0()}${l0()}${l0()}`}});function l0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $b=new Mi("Platform Initializer"),WE=new Mi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gb=new Mi("appBootstrapListener"),zE=new Mi("AnimationModuleType");let KE=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const uv=new Mi("LocaleId",{providedIn:"root",factory:()=>H(uv,hn.Optional|hn.SkipSelf)||function qE(){return typeof $localize<"u"&&$localize.locale||ug}()}),YE=new Mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZE{constructor(r,l){this.ngModuleFactory=r,this.componentFactories=l}}let QE=(()=>{class n{compileModuleSync(l){return new zv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),v=Xl(pn(l).declarations).reduce((I,O)=>{const V=ae(O);return V&&I.push(new xi(V)),I},[]);return new ZE(c,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eD=(()=>Promise.resolve(0))();function u0(n){typeof Zone>"u"?eD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ih{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pf(!1),this.onMicrotaskEmpty=new pf(!1),this.onStable=new pf(!1),this.onError=new pf(!1),typeof Zone>"u")throw new lt(908,!1);Zone.assertZonePatched();const g=this;if(g._nesting=0,g._outer=g._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;g._inner=g._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!c&&l,g.shouldCoalesceRunChangeDetection=c,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function tD(){let n=Pn.requestAnimationFrame,r=Pn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function iD(n){const r=()=>{!function rD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Pn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,d0(n),n.isCheckStableRunning=!0,c0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),d0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,g,v,I,O)=>{try{return Kb(n),l.invokeTask(g,v,I,O)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),qb(n)}},onInvoke:(l,c,g,v,I,O,V)=>{try{return Kb(n),l.invoke(g,v,I,O,V)}finally{n.shouldCoalesceRunChangeDetection&&r(),qb(n)}},onHasTask:(l,c,g,v)=>{l.hasTask(g,v),c===g&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,d0(n),c0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,c,g,v)=>(l.handleError(g,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ih.isInAngularZone())throw new lt(909,!1)}static assertNotInAngularZone(){if(ih.isInAngularZone())throw new lt(909,!1)}run(r,l,c){return this._inner.run(r,l,c)}runTask(r,l,c,g){const v=this._inner,I=v.scheduleEventTask("NgZoneEvent: "+g,r,nD,av,av);try{return v.runTask(I,l,c)}finally{v.cancelTask(I)}}runGuarded(r,l,c){return this._inner.runGuarded(r,l,c)}runOutsideAngular(r){return this._outer.run(r)}}const nD={};function c0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function d0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Kb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qb(n){n._nesting--,c0(n)}class sD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pf,this.onMicrotaskEmpty=new pf,this.onStable=new pf,this.onError=new pf}run(r,l,c){return r.apply(l,c)}runGuarded(r,l,c){return r.apply(l,c)}runOutsideAngular(r){return r()}runTask(r,l,c,g){return r.apply(l,c)}}const Yb=new Mi(""),Zb=new Mi("");let h0,oD=(()=>{class n{constructor(l,c,g){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,h0||(function aD(n){h0=n}(g),g.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ih.assertNotInAngularZone(),u0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())u0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,g){let v=-1;c&&c>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==v),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:g})}whenStable(l,c,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,g){return[]}}return n.\u0275fac=function(l){return new(l||n)(oo(ih),oo(Qb),oo(Zb))},n.\u0275prov=Ye({token:n,factory:n.\u0275fac}),n})(),Qb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return h0?.findTestabilityInTree(this,l,c)??null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),fg=null;const Jb=new Mi("AllowMultipleToken"),f0=new Mi("PlatformDestroyListeners");class cD{constructor(r,l){this.name=r,this.token=l}}function ew(n,r,l=[]){const c=`Platform: ${r}`,g=new Mi(c);return(v=[])=>{let I=p0();if(!I||I.injector.get(Jb,!1)){const O=[...l,...v,{provide:g,useValue:!0}];n?n(O):function dD(n){if(fg&&!fg.get(Jb,!1))throw new lt(400,!1);fg=n;const r=n.get(nw);(function Xb(n){const r=n.get($b,null);r&&r.forEach(l=>l())})(n)}(function tw(n=[],r){return kc.create({name:r,providers:[{provide:ni,useValue:"platform"},{provide:f0,useValue:new Set([()=>fg=null])},...n]})}(O,c))}return function fD(n){const r=p0();if(!r)throw new lt(401,!1);return r}()}}function p0(){return fg?.get(nw)??null}let nw=(()=>{class n{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const g=function iw(n,r){let l;return l="noop"===n?new sD:("zone.js"===n?void 0:n)||new ih(r),l}(c?.ngZone,function rw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(c)),v=[{provide:ih,useValue:g}];return g.run(()=>{const I=kc.create({providers:v,parent:this.injector,name:l.moduleType.name}),O=l.create(I),V=O.injector.get(Fd,null);if(!V)throw new lt(402,!1);return g.runOutsideAngular(()=>{const X=g.onError.subscribe({next:he=>{V.handleError(he)}});O.onDestroy(()=>{dv(this._modules,O),X.unsubscribe()})}),function sw(n,r,l){try{const c=l();return bi(c)?c.catch(g=>{throw r.runOutsideAngular(()=>n.handleError(g)),g}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(V,g,()=>{const X=O.injector.get(lv);return X.runInitializers(),X.donePromise.then(()=>(Zy(O.injector.get(uv,ug)||ug),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,c=[]){const g=ow({},c);return function lD(n,r,l){const c=new zv(l);return Promise.resolve(c)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,g))}_moduleDoBootstrap(l){const c=l.injector.get(cv);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>c.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new lt(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new lt(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(f0,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(l){return new(l||n)(oo(kc))},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ow(n,r){return Array.isArray(r)?r.reduce(ow,n):{...n,...r}}let cv=(()=>{class n{constructor(l,c,g){this._zone=l,this._injector=c,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new ee.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),I=new ee.y(O=>{let V;this._zone.runOutsideAngular(()=>{V=this._zone.onStable.subscribe(()=>{ih.assertNotInAngularZone(),u0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{ih.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{V.unsubscribe(),X.unsubscribe()}});this.isStable=(0,Ce.T)(v,I.pipe((0,Me.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const g=l instanceof fh;if(!this._injector.get(lv).done)throw!g&&Yt(l),new lt(405,false);let I;I=g?l:this._injector.get(Su).resolveComponentFactory(l),this.componentTypes.push(I.componentType);const O=function uD(n){return n.isBoundToModule}(I)?void 0:this._injector.get(S_),X=I.create(kc.NULL,[],c||I.selector,O),he=X.location.nativeElement,Te=X.injector.get(Yb,null);return Te?.registerApplication(he),X.onDestroy(()=>{this.detachView(X.hostView),dv(this.components,X),Te?.unregisterApplication(he)}),this._loadComponent(X),X}tick(){if(this._runningTick)throw new lt(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;dv(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Gb,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>dv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new lt(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(l){return new(l||n)(oo(ih),oo(pi),oo(Fd))},n.\u0275prov=Ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dv(n,r){const l=n.indexOf(r);l>-1&&n.splice(l,1)}let lw=!0,uw=!1;function gD(){return uw=!0,lw}function mD(){if(uw)throw new Error("Cannot enable prod mode after platform setup.");lw=!1}let _D=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,l){if(gs(n)&&!l){const c=Kr(n.index,r);return new qd(c,c)}return 47&n.type?new qd(r[16],r):null}(cs(),qt(),16==(16&n))}class fw{constructor(){}supports(r){return qf(r)}create(r){return new CD(r)}}const TD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||TD}forEachItem(r){let l;for(l=this._itHead;null!==l;l=l._next)r(l)}forEachOperation(r){let l=this._itHead,c=this._removalsHead,g=0,v=null;for(;l||c;){const I=!c||l&&l.currentIndex<gw(c,g,v)?l:c,O=gw(I,g,v),V=I.currentIndex;if(I===c)g--,c=c._nextRemoved;else if(l=l._next,null==I.previousIndex)g++;else{v||(v=[]);const X=O-g,he=V-g;if(X!=he){for(let at=0;at<X;at++){const St=at<v.length?v[at]:v[at]=0,Jt=St+at;he<=Jt&&Jt<X&&(v[at]=St+1)}v[I.previousIndex]=he-X}}O!==V&&r(I,O,V)}}forEachPreviousItem(r){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)r(l)}forEachAddedItem(r){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)r(l)}forEachMovedItem(r){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)r(l)}forEachRemovedItem(r){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)r(l)}forEachIdentityChange(r){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)r(l)}diff(r){if(null==r&&(r=[]),!qf(r))throw new lt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let g,v,I,l=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let O=0;O<this.length;O++)v=r[O],I=this._trackByFn(O,v),null!==l&&Object.is(l.trackById,I)?(c&&(l=this._verifyReinsertion(l,v,I,O)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,I,O),c=!0),l=l._next}else g=0,function l_(n,r){if(Array.isArray(n))for(let l=0;l<n.length;l++)r(n[l]);else{const l=n[Ih()]();let c;for(;!(c=l.next()).done;)r(c.value)}}(r,O=>{I=this._trackByFn(g,O),null!==l&&Object.is(l.trackById,I)?(c&&(l=this._verifyReinsertion(l,O,I,g)),Object.is(l.item,O)||this._addIdentityChange(l,O)):(l=this._mismatch(l,O,I,g),c=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,l,c,g){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,l)||this._addIdentityChange(r,l),this._reinsertAfter(r,v,g)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,g))?(Object.is(r.item,l)||this._addIdentityChange(r,l),this._moveAfter(r,v,g)):r=this._addAfter(new ID(l,c),v,g),r}_verifyReinsertion(r,l,c,g){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==v?r=this._reinsertAfter(v,r._prev,g):r.currentIndex!=g&&(r.currentIndex=g,this._addToMoves(r,g)),r}_truncate(r){for(;null!==r;){const l=r._next;this._addToRemovals(this._unlink(r)),r=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const g=r._prevRemoved,v=r._nextRemoved;return null===g?this._removalsHead=v:g._nextRemoved=v,null===v?this._removalsTail=g:v._prevRemoved=g,this._insertAfter(r,l,c),this._addToMoves(r,c),r}_moveAfter(r,l,c){return this._unlink(r),this._insertAfter(r,l,c),this._addToMoves(r,c),r}_addAfter(r,l,c){return this._insertAfter(r,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,l,c){const g=null===l?this._itHead:l._next;return r._next=g,r._prev=l,null===g?this._itTail=r:g._prev=r,null===l?this._itHead=r:l._next=r,null===this._linkedRecords&&(this._linkedRecords=new pw),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const l=r._prev,c=r._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,r}_addToMoves(r,l){return r.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,l){return r.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ID{constructor(r,l){this.item=r,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const l=r._prevDup,c=r._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class pw{constructor(){this.map=new Map}put(r){const l=r.trackById;let c=this.map.get(l);c||(c=new SD,this.map.set(l,c)),c.add(r)}get(r,l){const g=this.map.get(r);return g?g.get(r,l):null}remove(r){const l=r.trackById;return this.map.get(l).remove(r)&&this.map.delete(l),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gw(n,r,l){const c=n.previousIndex;if(null===c)return c;let g=0;return l&&c<l.length&&(g=l[c]),c+r+g}class mw{constructor(){}supports(r){return r instanceof Map||Yf(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let l;for(l=this._mapHead;null!==l;l=l._next)r(l)}forEachPreviousItem(r){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)r(l)}forEachChangedItem(r){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)r(l)}forEachAddedItem(r){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)r(l)}forEachRemovedItem(r){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)r(l)}diff(r){if(r){if(!(r instanceof Map||Yf(r)))throw new lt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(g,c);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,l){if(r){const c=r._prev;return l._next=r,l._prev=c,r._prev=l,c&&(c._next=l),r===this._mapHead&&(this._mapHead=l),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(r,l){if(this._records.has(r)){const g=this._records.get(r);this._maybeAddToChanges(g,l);const v=g._prev,I=g._next;return v&&(v._next=I),I&&(I._prev=v),g._next=null,g._prev=null,g}const c=new ND(r);return this._records.set(r,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,l){Object.is(l,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=l,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,l){r instanceof Map?r.forEach(l):Object.keys(r).forEach(c=>l(r[c],c))}}class ND{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _w(){return new v0([new fw])}let v0=(()=>{class n{constructor(l){this.factories=l}static create(l,c){if(null!=c){const g=c.factories.slice();l=l.concat(g)}return new n(l)}static extend(l){return{provide:n,useFactory:c=>n.create(l,c||_w()),deps:[[n,new ar,new Sn]]}}find(l){const c=this.factories.find(g=>g.supports(l));if(null!=c)return c;throw new lt(901,!1)}}return n.\u0275prov=Ye({token:n,providedIn:"root",factory:_w}),n})();function yw(){return new b0([new mw])}let b0=(()=>{class n{constructor(l){this.factories=l}static create(l,c){if(c){const g=c.factories.slice();l=l.concat(g)}return new n(l)}static extend(l){return{provide:n,useFactory:c=>n.create(l,c||yw()),deps:[[n,new ar,new Sn]]}}find(l){const c=this.factories.find(g=>g.supports(l));if(c)return c;throw new lt(901,!1)}}return n.\u0275prov=Ye({token:n,providedIn:"root",factory:yw}),n})();const OD=ew(null,"core",[]);let xD=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(oo(cv))},n.\u0275mod=tr({type:n}),n.\u0275inj=ot({}),n})();function PD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function FD(n,r){const l=ae(n),c=r.elementInjector||Oi();return new xi(l).create(c,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(cn,dt,L)=>{L.d(dt,{EJ:()=>Gs,Fj:()=>mt,JJ:()=>hn,JL:()=>br,Kr:()=>Vi,NI:()=>ji,Oe:()=>ro,On:()=>ra,UX:()=>fo,YN:()=>yo,_:()=>ln,_Y:()=>Yi,cw:()=>ae,kI:()=>gt,sg:()=>Bi,u:()=>_s,u5:()=>ml,wV:()=>ns});var h=L(4650),U=L(6895),ee=L(8996),Ce=L(4128),Me=L(4004);let Oe=(()=>{class Z{constructor(j,ue){this._renderer=j,this._elementRef=ue,this.onChange=kt=>{},this.onTouched=()=>{}}setProperty(j,ue){this._renderer.setProperty(this._elementRef.nativeElement,j,ue)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(h.Qsj),h.Y36(h.SBq))},Z.\u0275dir=h.lG2({type:Z}),Z})(),Ge=(()=>{class Z extends Oe{}return Z.\u0275fac=function(){let W;return function(ue){return(W||(W=h.n5z(Z)))(ue||Z)}}(),Z.\u0275dir=h.lG2({type:Z,features:[h.qOj]}),Z})();const Pe=new h.OlP("NgValueAccessor"),_e={provide:Pe,useExisting:(0,h.Gpc)(()=>mt),multi:!0},Nt=new h.OlP("CompositionEventMode");let mt=(()=>{class Z extends Oe{constructor(j,ue,kt){super(j,ue),this._compositionMode=kt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ue(){const Z=(0,U.q)()?(0,U.q)().getUserAgent():"";return/android (\d+)/.test(Z.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Nt,8))},Z.\u0275dir=h.lG2({type:Z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,ue){1&j&&h.NdJ("input",function(Y){return ue._handleInput(Y.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Y){return ue._compositionEnd(Y.target.value)})},features:[h._Bn([_e]),h.qOj]}),Z})();function xt(Z){return null==Z||("string"==typeof Z||Array.isArray(Z))&&0===Z.length}function yt(Z){return null!=Z&&"number"==typeof Z.length}const ct=new h.OlP("NgValidators"),je=new h.OlP("NgAsyncValidators"),Ht=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gt{static min(W){return function qe(Z){return W=>{if(xt(W.value)||xt(Z))return null;const j=parseFloat(W.value);return!isNaN(j)&&j<Z?{min:{min:Z,actual:W.value}}:null}}(W)}static max(W){return function ze(Z){return W=>{if(xt(W.value)||xt(Z))return null;const j=parseFloat(W.value);return!isNaN(j)&&j>Z?{max:{max:Z,actual:W.value}}:null}}(W)}static required(W){return function jt(Z){return xt(Z.value)?{required:!0}:null}(W)}static requiredTrue(W){return function nt(Z){return!0===Z.value?null:{required:!0}}(W)}static email(W){return function Ve(Z){return xt(Z.value)||Ht.test(Z.value)?null:{email:!0}}(W)}static minLength(W){return function bt(Z){return W=>xt(W.value)||!yt(W.value)?null:W.value.length<Z?{minlength:{requiredLength:Z,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function Se(Z){return W=>yt(W.value)&&W.value.length>Z?{maxlength:{requiredLength:Z,actualLength:W.value.length}}:null}(W)}static pattern(W){return function $e(Z){if(!Z)return wt;let W,j;return"string"==typeof Z?(j="","^"!==Z.charAt(0)&&(j+="^"),j+=Z,"$"!==Z.charAt(Z.length-1)&&(j+="$"),W=new RegExp(j)):(j=Z.toString(),W=Z),ue=>{if(xt(ue.value))return null;const kt=ue.value;return W.test(kt)?null:{pattern:{requiredPattern:j,actualValue:kt}}}}(W)}static nullValidator(W){return null}static compose(W){return pe(W)}static composeAsync(W){return At(W)}}function wt(Z){return null}function tt(Z){return null!=Z}function Ut(Z){return(0,h.QGY)(Z)?(0,ee.D)(Z):Z}function Kt(Z){let W={};return Z.forEach(j=>{W=null!=j?{...W,...j}:W}),0===Object.keys(W).length?null:W}function An(Z,W){return W.map(j=>j(Z))}function tn(Z){return Z.map(W=>function Mt(Z){return!Z.validate}(W)?W:j=>W.validate(j))}function pe(Z){if(!Z)return null;const W=Z.filter(tt);return 0==W.length?null:function(j){return Kt(An(j,W))}}function ie(Z){return null!=Z?pe(tn(Z)):null}function At(Z){if(!Z)return null;const W=Z.filter(tt);return 0==W.length?null:function(j){const ue=An(j,W).map(Ut);return(0,Ce.D)(ue).pipe((0,Me.U)(Kt))}}function We(Z){return null!=Z?At(tn(Z)):null}function Ye(Z,W){return null===Z?[W]:Array.isArray(Z)?[...Z,W]:[Z,W]}function Be(Z){return Z._rawValidators}function ot(Z){return Z._rawAsyncValidators}function en(Z){return Z?Array.isArray(Z)?Z:[Z]:[]}function an(Z,W){return Array.isArray(Z)?Z.includes(W):Z===W}function Dr(Z,W){const j=en(W);return en(Z).forEach(kt=>{an(j,kt)||j.push(kt)}),j}function jn(Z,W){return en(W).filter(j=>!an(Z,j))}class gi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=ie(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=We(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W){this.control&&this.control.reset(W)}hasError(W,j){return!!this.control&&this.control.hasError(W,j)}getError(W,j){return this.control?this.control.getError(W,j):null}}class vr extends gi{get formDirective(){return null}get path(){return null}}class Sr extends gi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kn{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hn=(()=>{class Z extends Kn{constructor(j){super(j)}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(Sr,2))},Z.\u0275dir=h.lG2({type:Z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,ue){2&j&&h.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)},features:[h.qOj]}),Z})(),br=(()=>{class Z extends Kn{constructor(j){super(j)}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(vr,10))},Z.\u0275dir=h.lG2({type:Z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(j,ue){2&j&&h.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)("ng-submitted",ue.isSubmitted)},features:[h.qOj]}),Z})();const si="VALID",Rr="INVALID",mn="PENDING",Bt="DISABLED";function bn(Z){return(Fe(Z)?Z.validators:Z)||null}function zn(Z){return Array.isArray(Z)?ie(Z):Z||null}function Bn(Z,W){return(Fe(W)?W.asyncValidators:Z)||null}function tr(Z){return Array.isArray(Z)?We(Z):Z||null}function Fe(Z){return null!=Z&&!Array.isArray(Z)&&"object"==typeof Z}function Ae(Z,W,j){const ue=Z.controls;if(!(W?Object.keys(ue):ue).length)throw new h.vHH(1e3,"");if(!ue[j])throw new h.vHH(1001,"")}function Qe(Z,W,j){Z._forEachChild((ue,kt)=>{if(void 0===j[kt])throw new h.vHH(1002,"")})}class De{constructor(W,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=W,this._rawAsyncValidators=j,this._composedValidatorFn=zn(this._rawValidators),this._composedAsyncValidatorFn=tr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===si}get invalid(){return this.status===Rr}get pending(){return this.status==mn}get disabled(){return this.status===Bt}get enabled(){return this.status!==Bt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._rawValidators=W,this._composedValidatorFn=zn(W)}setAsyncValidators(W){this._rawAsyncValidators=W,this._composedAsyncValidatorFn=tr(W)}addValidators(W){this.setValidators(Dr(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(Dr(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(jn(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(jn(W,this._rawAsyncValidators))}hasValidator(W){return an(this._rawValidators,W)}hasAsyncValidator(W){return an(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=mn,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=Bt,this.errors=null,this._forEachChild(ue=>{ue.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(ue=>ue(!0))}enable(W={}){const j=this._parentMarkedDirty(W.onlySelf);this.status=si,this._forEachChild(ue=>{ue.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:j}),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===si||this.status===mn)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bt:si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=mn,this._hasOwnPendingAsyncValidator=!0;const j=Ut(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,j={}){this.errors=W,this._updateControlsErrors(!1!==j.emitEvent)}get(W){let j=W;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((ue,kt)=>ue&&ue._find(kt),this)}getError(W,j){const ue=j?this.get(j):this;return ue&&ue.errors?ue.errors[W]:null}hasError(W,j){return!!this.getError(W,j)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Bt:this.errors?Rr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mn)?mn:this._anyControlsHaveStatus(Rr)?Rr:si}_anyControlsHaveStatus(W){return this._anyControls(j=>j.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){Fe(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}}class ae extends De{constructor(W,j,ue){super(bn(j),Bn(ue,j)),this.controls=W,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,j){return this.controls[W]?this.controls[W]:(this.controls[W]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(W,j,ue={}){this.registerControl(W,j),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(W,j={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(W,j,ue={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],j&&this.registerControl(W,j),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,j={}){Qe(this,0,W),Object.keys(W).forEach(ue=>{Ae(this,!0,ue),this.controls[ue].setValue(W[ue],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(W,j={}){null!=W&&(Object.keys(W).forEach(ue=>{const kt=this.controls[ue];kt&&kt.patchValue(W[ue],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(W={},j={}){this._forEachChild((ue,kt)=>{ue.reset(W[kt],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(W,j,ue)=>(W[ue]=j.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(j,ue)=>!!ue._syncPendingControls()||j);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(j=>{const ue=this.controls[j];ue&&W(ue,j)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[j,ue]of Object.entries(this.controls))if(this.contains(j)&&W(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,ue,kt)=>((ue.enabled||this.disabled)&&(j[kt]=ue.value),j))}_reduceChildren(W,j){let ue=W;return this._forEachChild((kt,Y)=>{ue=j(ue,kt,Y)}),ue}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}function Rn(Z,W){return[...W.path,Z]}function Ee(Z,W){ft(Z,W),W.valueAccessor.writeValue(Z.value),Z.disabled&&W.valueAccessor.setDisabledState?.(!0),function ur(Z,W){W.valueAccessor.registerOnChange(j=>{Z._pendingValue=j,Z._pendingChange=!0,Z._pendingDirty=!0,"change"===Z.updateOn&&Ur(Z,W)})}(Z,W),function wi(Z,W){const j=(ue,kt)=>{W.valueAccessor.writeValue(ue),kt&&W.viewToModelUpdate(ue)};Z.registerOnChange(j),W._registerOnDestroy(()=>{Z._unregisterOnChange(j)})}(Z,W),function Xn(Z,W){W.valueAccessor.registerOnTouched(()=>{Z._pendingTouched=!0,"blur"===Z.updateOn&&Z._pendingChange&&Ur(Z,W),"submit"!==Z.updateOn&&Z.markAsTouched()})}(Z,W),function et(Z,W){if(W.valueAccessor.setDisabledState){const j=ue=>{W.valueAccessor.setDisabledState(ue)};Z.registerOnDisabledChange(j),W._registerOnDestroy(()=>{Z._unregisterOnDisabledChange(j)})}}(Z,W)}function ve(Z,W,j=!0){const ue=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(ue),W.valueAccessor.registerOnTouched(ue)),Qt(Z,W),Z&&(W._invokeOnDestroyCallbacks(),Z._registerOnCollectionChange(()=>{}))}function ge(Z,W){Z.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(W)})}function ft(Z,W){const j=Be(Z);null!==W.validator?Z.setValidators(Ye(j,W.validator)):"function"==typeof j&&Z.setValidators([j]);const ue=ot(Z);null!==W.asyncValidator?Z.setAsyncValidators(Ye(ue,W.asyncValidator)):"function"==typeof ue&&Z.setAsyncValidators([ue]);const kt=()=>Z.updateValueAndValidity();ge(W._rawValidators,kt),ge(W._rawAsyncValidators,kt)}function Qt(Z,W){let j=!1;if(null!==Z){if(null!==W.validator){const kt=Be(Z);if(Array.isArray(kt)&&kt.length>0){const Y=kt.filter(K=>K!==W.validator);Y.length!==kt.length&&(j=!0,Z.setValidators(Y))}}if(null!==W.asyncValidator){const kt=ot(Z);if(Array.isArray(kt)&&kt.length>0){const Y=kt.filter(K=>K!==W.asyncValidator);Y.length!==kt.length&&(j=!0,Z.setAsyncValidators(Y))}}}const ue=()=>{};return ge(W._rawValidators,ue),ge(W._rawAsyncValidators,ue),j}function Ur(Z,W){Z._pendingDirty&&Z.markAsDirty(),Z.setValue(Z._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1}function to(Z,W){if(!Z.hasOwnProperty("model"))return!1;const j=Z.model;return!!j.isFirstChange()||!Object.is(W,j.currentValue)}function Ei(Z,W){if(!W)return null;let j,ue,kt;return Array.isArray(W),W.forEach(Y=>{Y.constructor===mt?j=Y:function ps(Z){return Object.getPrototypeOf(Z.constructor)===Ge}(Y)?ue=Y:kt=Y}),kt||ue||j||null}function ks(Z,W){const j=Z.indexOf(W);j>-1&&Z.splice(j,1)}function Ns(Z){return"object"==typeof Z&&null!==Z&&2===Object.keys(Z).length&&"value"in Z&&"disabled"in Z}const ji=class extends De{constructor(W=null,j,ue){super(bn(j),Bn(ue,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fe(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=Ns(W)?W.value:W)}setValue(W,j={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(W,j={}){this.setValue(W,j)}reset(W=this.defaultValue,j={}){this._applyFormState(W),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){ks(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){ks(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){Ns(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},na={provide:Sr,useExisting:(0,h.Gpc)(()=>ra)},Ls=(()=>Promise.resolve())();let ra=(()=>{class Z extends Sr{constructor(j,ue,kt,Y,K){super(),this._changeDetectorRef=K,this.control=new ji,this._registered=!1,this.update=new h.vpe,this._parent=j,this._setValidators(ue),this._setAsyncValidators(kt),this.valueAccessor=Ei(0,Y)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const ue=j.name.previousValue;this.formDirective.removeControl({name:ue,path:this._getPath(ue)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),to(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ee(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){Ls.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const ue=j.isDisabled.currentValue,kt=0!==ue&&(0,h.D6c)(ue);Ls.then(()=>{kt&&!this.control.disabled?this.control.disable():!kt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Rn(j,this._parent):[j]}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(vr,9),h.Y36(ct,10),h.Y36(je,10),h.Y36(Pe,10),h.Y36(h.sBO,8))},Z.\u0275dir=h.lG2({type:Z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([na]),h.qOj,h.TTD]}),Z})(),Yi=(()=>{class Z{}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275dir=h.lG2({type:Z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Z})();const xo={provide:Pe,useExisting:(0,h.Gpc)(()=>ns),multi:!0};let ns=(()=>{class Z extends Ge{writeValue(j){this.setProperty("value",j??"")}registerOnChange(j){this.onChange=ue=>{j(""==ue?null:parseFloat(ue))}}}return Z.\u0275fac=function(){let W;return function(ue){return(W||(W=h.n5z(Z)))(ue||Z)}}(),Z.\u0275dir=h.lG2({type:Z,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(j,ue){1&j&&h.NdJ("input",function(Y){return ue.onChange(Y.target.value)})("blur",function(){return ue.onTouched()})},features:[h._Bn([xo]),h.qOj]}),Z})();const ut={provide:Pe,useExisting:(0,h.Gpc)(()=>ln),multi:!0};let vt=(()=>{class Z{}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275mod=h.oAB({type:Z}),Z.\u0275inj=h.cJS({}),Z})(),Wt=(()=>{class Z{constructor(){this._accessors=[]}add(j,ue){this._accessors.push([j,ue])}remove(j){for(let ue=this._accessors.length-1;ue>=0;--ue)if(this._accessors[ue][1]===j)return void this._accessors.splice(ue,1)}select(j){this._accessors.forEach(ue=>{this._isSameGroup(ue,j)&&ue[1]!==j&&ue[1].fireUncheck(j.value)})}_isSameGroup(j,ue){return!!j[0].control&&j[0]._parent===ue._control._parent&&j[1].name===ue.name}}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275prov=h.Yz7({token:Z,factory:Z.\u0275fac,providedIn:vt}),Z})(),ln=(()=>{class Z extends Ge{constructor(j,ue,kt,Y){super(j,ue),this._registry=kt,this._injector=Y,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Sr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(j){this._state=j===this.value,this.setProperty("checked",this._state)}registerOnChange(j){this._fn=j,this.onChange=()=>{j(this.value),this._registry.select(this)}}fireUncheck(j){this.writeValue(j)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Wt),h.Y36(h.zs3))},Z.\u0275dir=h.lG2({type:Z,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(j,ue){1&j&&h.NdJ("change",function(){return ue.onChange()})("blur",function(){return ue.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[h._Bn([ut]),h.qOj]}),Z})();const Di=new h.OlP("NgModelWithFormControlWarning"),ms={provide:vr,useExisting:(0,h.Gpc)(()=>Bi)};let Bi=(()=>{class Z extends vr{constructor(j,ue){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(j),this._setAsyncValidators(ue)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const ue=this.form.get(j.path);return Ee(ue,j),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),ue}getControl(j){return this.form.get(j.path)}removeControl(j){ve(j.control||null,j,!1),function co(Z,W){const j=Z.indexOf(W);j>-1&&Z.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,ue){this.form.get(j.path).setValue(ue)}onSubmit(j){return this.submitted=!0,function Ps(Z,W){Z._syncPendingControls(),W.forEach(j=>{const ue=j.control;"submit"===ue.updateOn&&ue._pendingChange&&(j.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const ue=j.control,kt=this.form.get(j.path);ue!==kt&&(ve(ue||null,j),(Z=>Z instanceof ji)(kt)&&(Ee(kt,j),j.control=kt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const ue=this.form.get(j.path);(function Nn(Z,W){ft(Z,W)})(ue,j),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const ue=this.form.get(j.path);ue&&function es(Z,W){return Qt(Z,W)}(ue,j)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ft(this.form,this),this._oldForm&&Qt(this._oldForm,this)}_checkFormPresent(){}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(ct,10),h.Y36(je,10))},Z.\u0275dir=h.lG2({type:Z,selectors:[["","formGroup",""]],hostBindings:function(j,ue){1&j&&h.NdJ("submit",function(Y){return ue.onSubmit(Y)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([ms]),h.qOj,h.TTD]}),Z})();const Jn={provide:Sr,useExisting:(0,h.Gpc)(()=>_s)};let _s=(()=>{class Z extends Sr{constructor(j,ue,kt,Y,K){super(),this._ngModelWarningConfig=K,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(ue),this._setAsyncValidators(kt),this.valueAccessor=Ei(0,Y)}set isDisabled(j){}ngOnChanges(j){this._added||this._setUpControl(),to(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Rn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Z._ngModelWarningSentOnce=!1,Z.\u0275fac=function(j){return new(j||Z)(h.Y36(vr,13),h.Y36(ct,10),h.Y36(je,10),h.Y36(Pe,10),h.Y36(Di,8))},Z.\u0275dir=h.lG2({type:Z,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Jn]),h.qOj,h.TTD]}),Z})();const Wr={provide:Pe,useExisting:(0,h.Gpc)(()=>Gs),multi:!0};function Ys(Z,W){return null==Z?`${W}`:(W&&"object"==typeof W&&(W="Object"),`${Z}: ${W}`.slice(0,50))}let Gs=(()=>{class Z extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){this.value=j;const kt=Ys(this._getOptionId(j),j);this.setProperty("value",kt)}registerOnChange(j){this.onChange=ue=>{this.value=this._getOptionValue(ue),j(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(j){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue),j))return ue;return null}_getOptionValue(j){const ue=function wa(Z){return Z.split(":")[0]}(j);return this._optionMap.has(ue)?this._optionMap.get(ue):j}}return Z.\u0275fac=function(){let W;return function(ue){return(W||(W=h.n5z(Z)))(ue||Z)}}(),Z.\u0275dir=h.lG2({type:Z,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(j,ue){1&j&&h.NdJ("change",function(Y){return ue.onChange(Y.target.value)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Wr]),h.qOj]}),Z})(),yo=(()=>{class Z{constructor(j,ue,kt){this._element=j,this._renderer=ue,this._select=kt,this._select&&(this.id=this._select._registerOption())}set ngValue(j){null!=this._select&&(this._select._optionMap.set(this.id,j),this._setElementValue(Ys(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._setElementValue(j),this._select&&this._select.writeValue(this._select.value)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Gs,9))},Z.\u0275dir=h.lG2({type:Z,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Z})();const kr={provide:Pe,useExisting:(0,h.Gpc)(()=>Ms),multi:!0};function wr(Z,W){return null==Z?`${W}`:("string"==typeof W&&(W=`'${W}'`),W&&"object"==typeof W&&(W="Object"),`${Z}: ${W}`.slice(0,50))}let Ms=(()=>{class Z extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){let ue;if(this.value=j,Array.isArray(j)){const kt=j.map(Y=>this._getOptionId(Y));ue=(Y,K)=>{Y._setSelected(kt.indexOf(K.toString())>-1)}}else ue=(kt,Y)=>{kt._setSelected(!1)};this._optionMap.forEach(ue)}registerOnChange(j){this.onChange=ue=>{const kt=[],Y=ue.selectedOptions;if(void 0!==Y){const K=Y;for(let fe=0;fe<K.length;fe++){const He=this._getOptionValue(K[fe].value);kt.push(He)}}else{const K=ue.options;for(let fe=0;fe<K.length;fe++){const Ie=K[fe];if(Ie.selected){const He=this._getOptionValue(Ie.value);kt.push(He)}}}this.value=kt,j(kt)}}_registerOption(j){const ue=(this._idCounter++).toString();return this._optionMap.set(ue,j),ue}_getOptionId(j){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue)._value,j))return ue;return null}_getOptionValue(j){const ue=function ki(Z){return Z.split(":")[0]}(j);return this._optionMap.has(ue)?this._optionMap.get(ue)._value:j}}return Z.\u0275fac=function(){let W;return function(ue){return(W||(W=h.n5z(Z)))(ue||Z)}}(),Z.\u0275dir=h.lG2({type:Z,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(j,ue){1&j&&h.NdJ("change",function(Y){return ue.onChange(Y.target)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([kr]),h.qOj]}),Z})(),Vi=(()=>{class Z{constructor(j,ue,kt){this._element=j,this._renderer=ue,this._select=kt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(j){null!=this._select&&(this._value=j,this._setElementValue(wr(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._select?(this._value=j,this._setElementValue(wr(this.id,j)),this._select.writeValue(this._select.value)):this._setElementValue(j)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}_setSelected(j){this._renderer.setProperty(this._element.nativeElement,"selected",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Z.\u0275fac=function(j){return new(j||Z)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Ms,9))},Z.\u0275dir=h.lG2({type:Z,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Z})(),ys=(()=>{class Z{}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275mod=h.oAB({type:Z}),Z.\u0275inj=h.cJS({imports:[vt]}),Z})(),ml=(()=>{class Z{}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275mod=h.oAB({type:Z}),Z.\u0275inj=h.cJS({imports:[ys]}),Z})(),fo=(()=>{class Z{static withConfig(j){return{ngModule:Z,providers:[{provide:Di,useValue:j.warnOnNgModelWithFormControl}]}}}return Z.\u0275fac=function(j){return new(j||Z)},Z.\u0275mod=h.oAB({type:Z}),Z.\u0275inj=h.cJS({imports:[ys]}),Z})();class ro extends De{constructor(W,j,ue){super(bn(j),Bn(ue,j)),this.controls=W,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(W){return this.controls[this._adjustIndex(W)]}push(W,j={}){this.controls.push(W),this._registerControl(W),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(W,j,ue={}){this.controls.splice(W,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(W,j={}){let ue=this._adjustIndex(W);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(W,j,ue={}){let kt=this._adjustIndex(W);kt<0&&(kt=0),this.controls[kt]&&this.controls[kt]._registerOnCollectionChange(()=>{}),this.controls.splice(kt,1),j&&(this.controls.splice(kt,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(W,j={}){Qe(this,0,W),W.forEach((ue,kt)=>{Ae(this,!1,kt),this.at(kt).setValue(ue,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(W,j={}){null!=W&&(W.forEach((ue,kt)=>{this.at(kt)&&this.at(kt).patchValue(ue,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(W=[],j={}){this._forEachChild((ue,kt)=>{ue.reset(W[kt],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(W=>W.getRawValue())}clear(W={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:W.emitEvent}))}_adjustIndex(W){return W<0?W+this.length:W}_syncPendingControls(){let W=this.controls.reduce((j,ue)=>!!ue._syncPendingControls()||j,!1);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){this.controls.forEach((j,ue)=>{W(j,ue)})}_updateValue(){this.value=this.controls.filter(W=>W.enabled||this.disabled).map(W=>W.value)}_anyControls(W){return this.controls.some(j=>j.enabled&&W(j))}_setUpControls(){this._forEachChild(W=>this._registerControl(W))}_allControlsDisabled(){for(const W of this.controls)if(W.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(W){W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)}_find(W){return this.at(W)??null}}},1481:(cn,dt,L)=>{L.d(dt,{Dx:()=>fr,H7:()=>ht,b2:()=>Gn,q6:()=>ir,se:()=>tt});var h=L(6895),U=L(4650);class ee extends h.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends ee{static makeCurrent(){(0,h.HT)(new Ce)}onAndCancel(ve,ge,et){return ve.addEventListener(ge,et,!1),()=>{ve.removeEventListener(ge,et,!1)}}dispatchEvent(ve,ge){ve.dispatchEvent(ge)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,ge){return(ge=ge||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,ge){return"window"===ge?window:"document"===ge?ve:"body"===ge?ve.body:null}getBaseHref(ve){const ge=function Oe(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==ge?null:function Pe(Ee){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",Ee);const ve=Ge.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(ge)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,h.Mx)(document.cookie,ve)}}let Ge,Me=null;const Ze=new U.OlP("TRANSITION_ID"),_e=[{provide:U.ip1,useFactory:function we(Ee,ve,ge){return()=>{ge.get(U.CZH).donePromise.then(()=>{const et=(0,h.q)(),ft=ve.querySelectorAll(`style[ng-transition="${Ee}"]`);for(let Qt=0;Qt<ft.length;Qt++)et.remove(ft[Qt])})}},deps:[Ze,h.K0,U.zs3],multi:!0}];let Nt=(()=>{class Ee{build(){return new XMLHttpRequest}}return Ee.\u0275fac=function(ge){return new(ge||Ee)},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const mt=new U.OlP("EventManagerPlugins");let lt=(()=>{class Ee{constructor(ge,et){this._zone=et,this._eventNameToPlugin=new Map,ge.forEach(ft=>ft.manager=this),this._plugins=ge.slice().reverse()}addEventListener(ge,et,ft){return this._findPluginFor(et).addEventListener(ge,et,ft)}addGlobalEventListener(ge,et,ft){return this._findPluginFor(et).addGlobalEventListener(ge,et,ft)}getZone(){return this._zone}_findPluginFor(ge){const et=this._eventNameToPlugin.get(ge);if(et)return et;const ft=this._plugins;for(let Qt=0;Qt<ft.length;Qt++){const ur=ft[Qt];if(ur.supports(ge))return this._eventNameToPlugin.set(ge,ur),ur}throw new Error(`No event manager plugin found for event ${ge}`)}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(mt),U.LFG(U.R0b))},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class xt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,ge,et){const ft=(0,h.q)().getGlobalEventTarget(this._doc,ve);if(!ft)throw new Error(`Unsupported event target ${ft} for event ${ge}`);return this.addEventListener(ft,ge,et)}}let yt=(()=>{class Ee{constructor(){this._stylesSet=new Set}addStyles(ge){const et=new Set;ge.forEach(ft=>{this._stylesSet.has(ft)||(this._stylesSet.add(ft),et.add(ft))}),this.onStylesAdded(et)}onStylesAdded(ge){}getAllStyles(){return Array.from(this._stylesSet)}}return Ee.\u0275fac=function(ge){return new(ge||Ee)},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})(),ct=(()=>{class Ee extends yt{constructor(ge){super(),this._doc=ge,this._hostNodes=new Map,this._hostNodes.set(ge.head,[])}_addStylesToHost(ge,et,ft){ge.forEach(Qt=>{const ur=this._doc.createElement("style");ur.textContent=Qt,ft.push(et.appendChild(ur))})}addHost(ge){const et=[];this._addStylesToHost(this._stylesSet,ge,et),this._hostNodes.set(ge,et)}removeHost(ge){const et=this._hostNodes.get(ge);et&&et.forEach(je),this._hostNodes.delete(ge)}onStylesAdded(ge){this._hostNodes.forEach((et,ft)=>{this._addStylesToHost(ge,ft,et)})}ngOnDestroy(){this._hostNodes.forEach(ge=>ge.forEach(je))}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(h.K0))},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();function je(Ee){(0,h.q)().remove(Ee)}const Ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gt=/%COMP%/g;function Se(Ee,ve,ge){for(let et=0;et<ve.length;et++){let ft=ve[et];Array.isArray(ft)?Se(Ee,ft,ge):(ft=ft.replace(gt,Ee),ge.push(ft))}return ge}function $e(Ee){return ve=>{if("__ngUnwrap__"===ve)return Ee;!1===Ee(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let tt=(()=>{class Ee{constructor(ge,et,ft){this.eventManager=ge,this.sharedStylesHost=et,this.appId=ft,this.rendererByCompId=new Map,this.defaultRenderer=new Ut(ge)}createRenderer(ge,et){if(!ge||!et)return this.defaultRenderer;switch(et.encapsulation){case U.ifc.Emulated:{let ft=this.rendererByCompId.get(et.id);return ft||(ft=new tn(this.eventManager,this.sharedStylesHost,et,this.appId),this.rendererByCompId.set(et.id,ft)),ft.applyToHost(ge),ft}case 1:case U.ifc.ShadowDom:return new pe(this.eventManager,this.sharedStylesHost,ge,et);default:if(!this.rendererByCompId.has(et.id)){const ft=Se(et.id,et.styles,[]);this.sharedStylesHost.addStyles(ft),this.rendererByCompId.set(et.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(lt),U.LFG(ct),U.LFG(U.AFp))},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();class Ut{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,ge){return ge?document.createElementNS(Ht[ge]||ge,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,ge){(Mt(ve)?ve.content:ve).appendChild(ge)}insertBefore(ve,ge,et){ve&&(Mt(ve)?ve.content:ve).insertBefore(ge,et)}removeChild(ve,ge){ve&&ve.removeChild(ge)}selectRootElement(ve,ge){let et="string"==typeof ve?document.querySelector(ve):ve;if(!et)throw new Error(`The selector "${ve}" did not match any elements`);return ge||(et.textContent=""),et}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,ge,et,ft){if(ft){ge=ft+":"+ge;const Qt=Ht[ft];Qt?ve.setAttributeNS(Qt,ge,et):ve.setAttribute(ge,et)}else ve.setAttribute(ge,et)}removeAttribute(ve,ge,et){if(et){const ft=Ht[et];ft?ve.removeAttributeNS(ft,ge):ve.removeAttribute(`${et}:${ge}`)}else ve.removeAttribute(ge)}addClass(ve,ge){ve.classList.add(ge)}removeClass(ve,ge){ve.classList.remove(ge)}setStyle(ve,ge,et,ft){ft&(U.JOm.DashCase|U.JOm.Important)?ve.style.setProperty(ge,et,ft&U.JOm.Important?"important":""):ve.style[ge]=et}removeStyle(ve,ge,et){et&U.JOm.DashCase?ve.style.removeProperty(ge):ve.style[ge]=""}setProperty(ve,ge,et){ve[ge]=et}setValue(ve,ge){ve.nodeValue=ge}listen(ve,ge,et){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,ge,$e(et)):this.eventManager.addEventListener(ve,ge,$e(et))}}function Mt(Ee){return"TEMPLATE"===Ee.tagName&&void 0!==Ee.content}class tn extends Ut{constructor(ve,ge,et,ft){super(ve),this.component=et;const Qt=Se(ft+"-"+et.id,et.styles,[]);ge.addStyles(Qt),this.contentAttr=function Ve(Ee){return"_ngcontent-%COMP%".replace(gt,Ee)}(ft+"-"+et.id),this.hostAttr=function bt(Ee){return"_nghost-%COMP%".replace(gt,Ee)}(ft+"-"+et.id)}applyToHost(ve){super.setAttribute(ve,this.hostAttr,"")}createElement(ve,ge){const et=super.createElement(ve,ge);return super.setAttribute(et,this.contentAttr,""),et}}class pe extends Ut{constructor(ve,ge,et,ft){super(ve),this.sharedStylesHost=ge,this.hostEl=et,this.shadowRoot=et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Qt=Se(ft.id,ft.styles,[]);for(let ur=0;ur<Qt.length;ur++){const Xn=document.createElement("style");Xn.textContent=Qt[ur],this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ve,ge){return super.appendChild(this.nodeOrShadowRoot(ve),ge)}insertBefore(ve,ge,et){return super.insertBefore(this.nodeOrShadowRoot(ve),ge,et)}removeChild(ve,ge){return super.removeChild(this.nodeOrShadowRoot(ve),ge)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}}let ie=(()=>{class Ee extends xt{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,et,ft){return ge.addEventListener(et,ft,!1),()=>this.removeEventListener(ge,et,ft)}removeEventListener(ge,et,ft){return ge.removeEventListener(et,ft)}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(h.K0))},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const At=["alt","control","meta","shift"],We={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ye={alt:Ee=>Ee.altKey,control:Ee=>Ee.ctrlKey,meta:Ee=>Ee.metaKey,shift:Ee=>Ee.shiftKey};let Be=(()=>{class Ee extends xt{constructor(ge){super(ge)}supports(ge){return null!=Ee.parseEventName(ge)}addEventListener(ge,et,ft){const Qt=Ee.parseEventName(et),ur=Ee.eventCallback(Qt.fullKey,ft,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,h.q)().onAndCancel(ge,Qt.domEventName,ur))}static parseEventName(ge){const et=ge.toLowerCase().split("."),ft=et.shift();if(0===et.length||"keydown"!==ft&&"keyup"!==ft)return null;const Qt=Ee._normalizeKey(et.pop());let ur="",Xn=et.indexOf("code");if(Xn>-1&&(et.splice(Xn,1),ur="code."),At.forEach(wi=>{const Nn=et.indexOf(wi);Nn>-1&&(et.splice(Nn,1),ur+=wi+".")}),ur+=Qt,0!=et.length||0===Qt.length)return null;const Ur={};return Ur.domEventName=ft,Ur.fullKey=ur,Ur}static matchEventFullKeyCode(ge,et){let ft=We[ge.key]||ge.key,Qt="";return et.indexOf("code.")>-1&&(ft=ge.code,Qt="code."),!(null==ft||!ft)&&(ft=ft.toLowerCase()," "===ft?ft="space":"."===ft&&(ft="dot"),At.forEach(ur=>{ur!==ft&&(0,Ye[ur])(ge)&&(Qt+=ur+".")}),Qt+=ft,Qt===et)}static eventCallback(ge,et,ft){return Qt=>{Ee.matchEventFullKeyCode(Qt,ge)&&ft.runGuarded(()=>et(Qt))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(h.K0))},Ee.\u0275prov=U.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const ir=(0,U.eFA)(U._c5,"browser",[{provide:U.Lbi,useValue:h.bD},{provide:U.g9A,useValue:function gi(){Ce.makeCurrent()},multi:!0},{provide:h.K0,useFactory:function Sr(){return(0,U.RDi)(document),document},deps:[]}]),Tr=new U.OlP(""),hn=[{provide:U.rWj,useClass:class Ue{addToWindow(ve){U.dqk.getAngularTestability=(et,ft=!0)=>{const Qt=ve.findTestabilityInTree(et,ft);if(null==Qt)throw new Error("Could not find testability for element.");return Qt},U.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),U.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),U.dqk.frameworkStabilizers||(U.dqk.frameworkStabilizers=[]),U.dqk.frameworkStabilizers.push(et=>{const ft=U.dqk.getAllAngularTestabilities();let Qt=ft.length,ur=!1;const Xn=function(Ur){ur=ur||Ur,Qt--,0==Qt&&et(ur)};ft.forEach(function(Ur){Ur.whenStable(Xn)})})}findTestabilityInTree(ve,ge,et){return null==ge?null:ve.getTestability(ge)??(et?(0,h.q)().isShadowRoot(ge)?this.findTestabilityInTree(ve,ge.host,!0):this.findTestabilityInTree(ve,ge.parentElement,!0):null)}},deps:[]},{provide:U.lri,useClass:U.dDg,deps:[U.R0b,U.eoX,U.rWj]},{provide:U.dDg,useClass:U.dDg,deps:[U.R0b,U.eoX,U.rWj]}],br=[{provide:U.zSh,useValue:"root"},{provide:U.qLn,useFactory:function vr(){return new U.qLn},deps:[]},{provide:mt,useClass:ie,multi:!0,deps:[h.K0,U.R0b,U.Lbi]},{provide:mt,useClass:Be,multi:!0,deps:[h.K0]},{provide:tt,useClass:tt,deps:[lt,ct,U.AFp]},{provide:U.FYo,useExisting:tt},{provide:yt,useExisting:ct},{provide:ct,useClass:ct,deps:[h.K0]},{provide:lt,useClass:lt,deps:[mt,U.R0b]},{provide:h.JF,useClass:Nt,deps:[]},[]];let Gn=(()=>{class Ee{constructor(ge){}static withServerTransition(ge){return{ngModule:Ee,providers:[{provide:U.AFp,useValue:ge.appId},{provide:Ze,useExisting:U.AFp},_e]}}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(Tr,12))},Ee.\u0275mod=U.oAB({type:Ee}),Ee.\u0275inj=U.cJS({providers:[...br,...hn],imports:[h.ez,U.hGG]}),Ee})(),fr=(()=>{class Ee{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(h.K0))},Ee.\u0275prov=U.Yz7({token:Ee,factory:function(ge){let et=null;return et=ge?new ge:function Qn(){return new fr((0,U.LFG)(h.K0))}(),et},providedIn:"root"}),Ee})();typeof window<"u"&&window;let ht=(()=>{class Ee{}return Ee.\u0275fac=function(ge){return new(ge||Ee)},Ee.\u0275prov=U.Yz7({token:Ee,factory:function(ge){let et=null;return et=ge?new(ge||Ee):U.LFG(pn),et},providedIn:"root"}),Ee})(),pn=(()=>{class Ee extends ht{constructor(ge){super(),this._doc=ge}sanitize(ge,et){if(null==et)return null;switch(ge){case U.q3G.NONE:return et;case U.q3G.HTML:return(0,U.qzn)(et,"HTML")?(0,U.z3N)(et):(0,U.EiD)(this._doc,String(et)).toString();case U.q3G.STYLE:return(0,U.qzn)(et,"Style")?(0,U.z3N)(et):et;case U.q3G.SCRIPT:if((0,U.qzn)(et,"Script"))return(0,U.z3N)(et);throw new Error("unsafe value used in a script context");case U.q3G.URL:return(0,U.qzn)(et,"URL")?(0,U.z3N)(et):(0,U.mCW)(String(et));case U.q3G.RESOURCE_URL:if((0,U.qzn)(et,"ResourceURL"))return(0,U.z3N)(et);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ge} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ge){return(0,U.JVY)(ge)}bypassSecurityTrustStyle(ge){return(0,U.L6k)(ge)}bypassSecurityTrustScript(ge){return(0,U.eBb)(ge)}bypassSecurityTrustUrl(ge){return(0,U.LAX)(ge)}bypassSecurityTrustResourceUrl(ge){return(0,U.pB0)(ge)}}return Ee.\u0275fac=function(ge){return new(ge||Ee)(U.LFG(h.K0))},Ee.\u0275prov=U.Yz7({token:Ee,factory:function(ge){let et=null;return et=ge?new ge:function Yt(Ee){return new pn(Ee.get(h.K0))}(U.LFG(U.zs3)),et},providedIn:"root"}),Ee})()},7799:(cn,dt,L)=>{L.d(dt,{gz:()=>ms,F0:()=>zs,Od:()=>El,yS:()=>ku,Bz:()=>Ti,lC:()=>Zs});var h=L(4650),U=L(8996),ee=L(9646),Ce=L(1135),Me=L(6805),Oe=L(9841),Ge=L(7272),Pe=L(9770),Ze=L(9635),we=L(2843),_e=L(9751),Ue=L(515),Nt=L(727),mt=L(4482),lt=L(5403);function xt(){return(0,mt.e)((A,R)=>{let S=null;A._refCount++;const B=(0,lt.x)(R,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(S=null);const z=A._connection,le=S;S=null,z&&(!le||z===le)&&z.unsubscribe(),R.unsubscribe()});A.subscribe(B),B.closed||(S=A.connect())})}class yt extends _e.y{constructor(R,S){super(),this.source=R,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,mt.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Nt.w0;const S=this.getSubject();R.add(this.source.subscribe((0,lt.x)(S,void 0,()=>{this._teardown(),S.complete()},B=>{this._teardown(),S.error(B)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Nt.w0.EMPTY)}return R}refCount(){return xt()(this)}}var ct=L(7579),je=L(6895),Ht=L(4004),gt=L(3900),qe=L(5698),ze=L(8675),jt=L(9300),nt=L(5577),Ve=L(590),bt=L(4351),Se=L(8505),$e=L(262),wt=L(5026);function tt(A){return A<=0?()=>Ue.E:(0,mt.e)((R,S)=>{let B=[];R.subscribe((0,lt.x)(S,z=>{B.push(z),A<B.length&&B.shift()},()=>{for(const z of B)S.next(z);S.complete()},void 0,()=>{B=null}))})}var Ut=L(8068),Kt=L(6590),An=L(4671);function Mt(A,R){const S=arguments.length>=2;return B=>B.pipe(A?(0,jt.h)((z,le)=>A(z,le,B)):An.y,tt(1),S?(0,Kt.d)(R):(0,Ut.T)(()=>new Me.K))}var pe=L(9718),ie=L(8746),At=L(8189),We=L(1481);const Ye="primary",Be=Symbol("RouteTitle");class ot{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S[0]:S}return null}getAll(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function en(A){return new ot(A)}function an(A,R,S){const B=S.path.split("/");if(B.length>A.length||"full"===S.pathMatch&&(R.hasChildren()||B.length<A.length))return null;const z={};for(let le=0;le<B.length;le++){const Ne=B[le],xe=A[le];if(Ne.startsWith(":"))z[Ne.substring(1)]=xe;else if(Ne!==xe.path)return null}return{consumed:A.slice(0,B.length),posParams:z}}function jn(A,R){const S=A?Object.keys(A):void 0,B=R?Object.keys(R):void 0;if(!S||!B||S.length!=B.length)return!1;let z;for(let le=0;le<S.length;le++)if(z=S[le],!gi(A[z],R[z]))return!1;return!0}function gi(A,R){if(Array.isArray(A)&&Array.isArray(R)){if(A.length!==R.length)return!1;const S=[...A].sort(),B=[...R].sort();return S.every((z,le)=>B[le]===z)}return A===R}function vr(A){return Array.prototype.concat.apply([],A)}function Sr(A){return A.length>0?A[A.length-1]:null}function ir(A,R){for(const S in A)A.hasOwnProperty(S)&&R(A[S],S)}function Tr(A){return(0,h.CqO)(A)?A:(0,h.QGY)(A)?(0,U.D)(Promise.resolve(A)):(0,ee.of)(A)}const Gn={exact:function Qn(A,R,S){if(!kn(A.segments,R.segments)||!En(A.segments,R.segments,S)||A.numberOfChildren!==R.numberOfChildren)return!1;for(const B in R.children)if(!A.children[B]||!Qn(A.children[B],R.children[B],S))return!1;return!0},subset:lr},Ar={exact:function Gr(A,R){return jn(A,R)},subset:function fr(A,R){return Object.keys(R).length<=Object.keys(A).length&&Object.keys(R).every(S=>gi(A[S],R[S]))},ignored:()=>!0};function Yr(A,R,S){return Gn[S.paths](A.root,R.root,S.matrixParams)&&Ar[S.queryParams](A.queryParams,R.queryParams)&&!("exact"===S.fragment&&A.fragment!==R.fragment)}function lr(A,R,S){return Ln(A,R,R.segments,S)}function Ln(A,R,S,B){if(A.segments.length>S.length){const z=A.segments.slice(0,S.length);return!(!kn(z,S)||R.hasChildren()||!En(z,S,B))}if(A.segments.length===S.length){if(!kn(A.segments,S)||!En(A.segments,S,B))return!1;for(const z in R.children)if(!A.children[z]||!lr(A.children[z],R.children[z],B))return!1;return!0}{const z=S.slice(0,A.segments.length),le=S.slice(A.segments.length);return!!(kn(A.segments,z)&&En(A.segments,z,B)&&A.children[Ye])&&Ln(A.children[Ye],R,le,B)}}function En(A,R,S){return R.every((B,z)=>Ar[S](A[z].parameters,B.parameters))}class Pn{constructor(R,S,B){this.root=R,this.queryParams=S,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return mr.serialize(this)}}class On{constructor(R,S){this.segments=R,this.children=S,this.parent=null,ir(S,(B,z)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class Lr{constructor(R,S){this.path=R,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=en(this.parameters)),this._parameterMap}toString(){return Fe(this)}}function kn(A,R){return A.length===R.length&&A.every((S,B)=>S.path===R[B].path)}let gn=(()=>{class A{}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=h.Yz7({token:A,factory:function(){return new Si},providedIn:"root"}),A})();class Si{parse(R){const S=new Rn(R);return new Pn(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(R){const S=`/${Rr(R.root,!0)}`,B=function Qe(A){const R=Object.keys(A).map(S=>{const B=A[S];return Array.isArray(B)?B.map(z=>`${Bt(S)}=${Bt(z)}`).join("&"):`${Bt(S)}=${Bt(B)}`}).filter(S=>!!S);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${S}${B}${"string"==typeof R.fragment?`#${function bn(A){return encodeURI(A)}(R.fragment)}`:""}`}}const mr=new Si;function si(A){return A.segments.map(R=>Fe(R)).join("/")}function Rr(A,R){if(!A.hasChildren())return si(A);if(R){const S=A.children[Ye]?Rr(A.children[Ye],!1):"",B=[];return ir(A.children,(z,le)=>{le!==Ye&&B.push(`${le}:${Rr(z,!1)}`)}),B.length>0?`${S}(${B.join("//")})`:S}{const S=function Ri(A,R){let S=[];return ir(A.children,(B,z)=>{z===Ye&&(S=S.concat(R(B,z)))}),ir(A.children,(B,z)=>{z!==Ye&&(S=S.concat(R(B,z)))}),S}(A,(B,z)=>z===Ye?[Rr(A.children[Ye],!1)]:[`${z}:${Rr(B,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Ye]?`${si(A)}/${S[0]}`:`${si(A)}/(${S.join("//")})`}}function mn(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bt(A){return mn(A).replace(/%3B/gi,";")}function zn(A){return mn(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bn(A){return decodeURIComponent(A)}function tr(A){return Bn(A.replace(/\+/g,"%20"))}function Fe(A){return`${zn(A.path)}${function Ae(A){return Object.keys(A).map(R=>`;${zn(R)}=${zn(A[R])}`).join("")}(A.parameters)}`}const De=/^[^\/()?;=#]+/;function ae(A){const R=A.match(De);return R?R[0]:""}const be=/^[^=?&#]+/,Yt=/^[^&#]+/;class Rn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(R.length>0||Object.keys(S).length>0)&&(B[Ye]=new On(R,S)),B}parseSegment(){const R=ae(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(R),new Lr(Bn(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const S=ae(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const z=ae(this.remaining);z&&(B=z,this.capture(B))}R[Bn(S)]=Bn(B)}parseQueryParam(R){const S=function ht(A){const R=A.match(be);return R?R[0]:""}(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const Ne=function pn(A){const R=A.match(Yt);return R?R[0]:""}(this.remaining);Ne&&(B=Ne,this.capture(B))}const z=tr(S),le=tr(B);if(R.hasOwnProperty(z)){let Ne=R[z];Array.isArray(Ne)||(Ne=[Ne],R[z]=Ne),Ne.push(le)}else R[z]=le}parseParens(R){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=ae(this.remaining),z=this.remaining[B.length];if("/"!==z&&")"!==z&&";"!==z)throw new h.vHH(4010,!1);let le;B.indexOf(":")>-1?(le=B.slice(0,B.indexOf(":")),this.capture(le),this.capture(":")):R&&(le=Ye);const Ne=this.parseChildren();S[le]=1===Object.keys(Ne).length?Ne[Ye]:new On([],Ne),this.consumeOptional("//")}return S}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new h.vHH(4011,!1)}}function Ee(A){return A.segments.length>0?new On([],{[Ye]:A}):A}function ve(A){const R={};for(const B of Object.keys(A.children)){const le=ve(A.children[B]);(le.segments.length>0||le.hasChildren())&&(R[B]=le)}return function ge(A){if(1===A.numberOfChildren&&A.children[Ye]){const R=A.children[Ye];return new On(A.segments.concat(R.segments),R.children)}return A}(new On(A.segments,R))}function et(A){return A instanceof Pn}function Ur(A,R,S,B,z){if(0===S.length)return es(R.root,R.root,R.root,B,z);const le=function ts(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new $s(!0,0,A);let R=0,S=!1;const B=A.reduce((z,le,Ne)=>{if("object"==typeof le&&null!=le){if(le.outlets){const xe={};return ir(le.outlets,(Ft,fn)=>{xe[fn]="string"==typeof Ft?Ft.split("/"):Ft}),[...z,{outlets:xe}]}if(le.segmentPath)return[...z,le.segmentPath]}return"string"!=typeof le?[...z,le]:0===Ne?(le.split("/").forEach((xe,Ft)=>{0==Ft&&"."===xe||(0==Ft&&""===xe?S=!0:".."===xe?R++:""!=xe&&z.push(xe))}),z):[...z,le]},[]);return new $s(S,R,B)}(S);return le.toRoot()?es(R.root,R.root,new On([],{}),B,z):function Ne(Ft){const fn=function ps(A,R,S,B){if(A.isAbsolute)return new Xr(R.root,!0,0);if(-1===B)return new Xr(S,S===R.root,0);return function Ps(A,R,S){let B=A,z=R,le=S;for(;le>z;){if(le-=z,B=B.parent,!B)throw new h.vHH(4005,!1);z=B.segments.length}return new Xr(B,!1,z-le)}(S,B+(wi(A.commands[0])?0:1),A.numberOfDoubleDots)}(le,R,A.snapshot?._urlSegment,Ft),Or=fn.processChildren?Hr(fn.segmentGroup,fn.index,le.commands):co(fn.segmentGroup,fn.index,le.commands);return es(R.root,fn.segmentGroup,Or,B,z)}(A.snapshot?._lastPathIndex)}function wi(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Nn(A){return"object"==typeof A&&null!=A&&A.outlets}function es(A,R,S,B,z){let Ne,le={};B&&ir(B,(Ft,fn)=>{le[fn]=Array.isArray(Ft)?Ft.map(Or=>`${Or}`):`${Ft}`}),Ne=A===R?S:Co(A,R,S);const xe=Ee(ve(Ne));return new Pn(xe,le,z)}function Co(A,R,S){const B={};return ir(A.children,(z,le)=>{B[le]=z===R?S:Co(z,R,S)}),new On(A.segments,B)}class $s{constructor(R,S,B){if(this.isAbsolute=R,this.numberOfDoubleDots=S,this.commands=B,R&&B.length>0&&wi(B[0]))throw new h.vHH(4003,!1);const z=B.find(Nn);if(z&&z!==Sr(B))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xr{constructor(R,S,B){this.segmentGroup=R,this.processChildren=S,this.index=B}}function co(A,R,S){if(A||(A=new On([],{})),0===A.segments.length&&A.hasChildren())return Hr(A,R,S);const B=function Io(A,R,S){let B=0,z=R;const le={match:!1,pathIndex:0,commandIndex:0};for(;z<A.segments.length;){if(B>=S.length)return le;const Ne=A.segments[z],xe=S[B];if(Nn(xe))break;const Ft=`${xe}`,fn=B<S.length-1?S[B+1]:null;if(z>0&&void 0===Ft)break;if(Ft&&fn&&"object"==typeof fn&&void 0===fn.outlets){if(!Ns(Ft,fn,Ne))return le;B+=2}else{if(!Ns(Ft,{},Ne))return le;B++}z++}return{match:!0,pathIndex:z,commandIndex:B}}(A,R,S),z=S.slice(B.commandIndex);if(B.match&&B.pathIndex<A.segments.length){const le=new On(A.segments.slice(0,B.pathIndex),{});return le.children[Ye]=new On(A.segments.slice(B.pathIndex),A.children),Hr(le,0,z)}return B.match&&0===z.length?new On(A.segments,{}):B.match&&!A.hasChildren()?Ss(A,R,S):B.match?Hr(A,0,z):Ss(A,R,S)}function Hr(A,R,S){if(0===S.length)return new On(A.segments,{});{const B=function Ei(A){return Nn(A[0])?A[0].outlets:{[Ye]:A}}(S),z={};return ir(B,(le,Ne)=>{"string"==typeof le&&(le=[le]),null!==le&&(z[Ne]=co(A.children[Ne],R,le))}),ir(A.children,(le,Ne)=>{void 0===B[Ne]&&(z[Ne]=le)}),new On(A.segments,z)}}function Ss(A,R,S){const B=A.segments.slice(0,R);let z=0;for(;z<S.length;){const le=S[z];if(Nn(le)){const Ft=As(le.outlets);return new On(B,Ft)}if(0===z&&wi(S[0])){B.push(new Lr(A.segments[R].path,ks(S[0]))),z++;continue}const Ne=Nn(le)?le.outlets[Ye]:`${le}`,xe=z<S.length-1?S[z+1]:null;Ne&&xe&&wi(xe)?(B.push(new Lr(Ne,ks(xe))),z+=2):(B.push(new Lr(Ne,{})),z++)}return new On(B,{})}function As(A){const R={};return ir(A,(S,B)=>{"string"==typeof S&&(S=[S]),null!==S&&(R[B]=Ss(new On([],{}),0,S))}),R}function ks(A){const R={};return ir(A,(S,B)=>R[B]=`${S}`),R}function Ns(A,R,S){return A==S.path&&jn(R,S.parameters)}class ji{constructor(R,S){this.id=R,this.url=S}}class Rs extends ji{constructor(R,S,B="imperative",z=null){super(R,S),this.type=0,this.navigationTrigger=B,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mi extends ji{constructor(R,S,B){super(R,S),this.urlAfterRedirects=B,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ba extends ji{constructor(R,S,B,z){super(R,S),this.reason=B,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hr extends ji{constructor(R,S,B,z){super(R,S),this.error=B,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fs extends ji{constructor(R,S,B,z){super(R,S),this.urlAfterRedirects=B,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ta extends ji{constructor(R,S,B,z){super(R,S),this.urlAfterRedirects=B,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gs extends ji{constructor(R,S,B,z,le){super(R,S),this.urlAfterRedirects=B,this.state=z,this.shouldActivate=le,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _o extends ji{constructor(R,S,B,z){super(R,S),this.urlAfterRedirects=B,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi extends ji{constructor(R,S,B,z){super(R,S),this.urlAfterRedirects=B,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ls{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ra{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yi{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xo{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ns{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(R,S,B){this.routerEvent=R,this.position=S,this.anchor=B,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vt{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const S=this.pathFromRoot(R);return S.length>1?S[S.length-2]:null}children(R){const S=Wt(R,this._root);return S?S.children.map(B=>B.value):[]}firstChild(R){const S=Wt(R,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(R){const S=ln(R,this._root);return S.length<2?[]:S[S.length-2].children.map(z=>z.value).filter(z=>z!==R)}pathFromRoot(R){return ln(R,this._root).map(S=>S.value)}}function Wt(A,R){if(A===R.value)return R;for(const S of R.children){const B=Wt(A,S);if(B)return B}return null}function ln(A,R){if(A===R.value)return[R];for(const S of R.children){const B=ln(A,S);if(B.length)return B.unshift(R),B}return[]}class xn{constructor(R,S){this.value=R,this.children=S}toString(){return`TreeNode(${this.value})`}}function sr(A){const R={};return A&&A.children.forEach(S=>R[S.value.outlet]=S),R}class Di extends vt{constructor(R,S){super(R),this.snapshot=S,jr(this,R)}toString(){return this.snapshot.toString()}}function oi(A,R){const S=function ho(A,R){const Ne=new Po([],{},{},"",{},Ye,R,null,A.root,-1,{});return new qs("",new xn(Ne,[]))}(A,R),B=new Ce.X([new Lr("",{})]),z=new Ce.X({}),le=new Ce.X({}),Ne=new Ce.X({}),xe=new Ce.X(""),Ft=new ms(B,z,Ne,xe,le,Ye,R,S.root);return Ft.snapshot=S.root,new Di(new xn(Ft,[]),S)}class ms{constructor(R,S,B,z,le,Ne,xe,Ft){this.url=R,this.params=S,this.queryParams=B,this.fragment=z,this.data=le,this.outlet=Ne,this.component=xe,this.title=this.data?.pipe((0,Ht.U)(fn=>fn[Be]))??(0,ee.of)(void 0),this._futureSnapshot=Ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(R=>en(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(R=>en(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bi(A,R="emptyOnly"){const S=A.pathFromRoot;let B=0;if("always"!==R)for(B=S.length-1;B>=1;){const z=S[B],le=S[B-1];if(z.routeConfig&&""===z.routeConfig.path)B--;else{if(le.component)break;B--}}return function Ma(A){return A.reduce((R,S)=>({params:{...R.params,...S.params},data:{...R.data,...S.data},resolve:{...S.data,...R.resolve,...S.routeConfig?.data,...S._resolvedData}}),{params:{},data:{},resolve:{}})}(S.slice(B))}class Po{constructor(R,S,B,z,le,Ne,xe,Ft,fn,Or,_n,Hi){this.url=R,this.params=S,this.queryParams=B,this.fragment=z,this.data=le,this.outlet=Ne,this.component=xe,this.title=this.data?.[Be],this.routeConfig=Ft,this._urlSegment=fn,this._lastPathIndex=Or,this._correctedLastPathIndex=Hi??Or,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=en(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qs extends vt{constructor(R,S){super(S),this.url=R,jr(this,S)}toString(){return Mr(this._root)}}function jr(A,R){R.value._routerState=A,R.children.forEach(S=>jr(A,S))}function Mr(A){const R=A.children.length>0?` { ${A.children.map(Mr).join(", ")} } `:"";return`${A.value}${R}`}function Jn(A){if(A.snapshot){const R=A.snapshot,S=A._futureSnapshot;A.snapshot=S,jn(R.queryParams,S.queryParams)||A.queryParams.next(S.queryParams),R.fragment!==S.fragment&&A.fragment.next(S.fragment),jn(R.params,S.params)||A.params.next(S.params),function Dr(A,R){if(A.length!==R.length)return!1;for(let S=0;S<A.length;++S)if(!jn(A[S],R[S]))return!1;return!0}(R.url,S.url)||A.url.next(S.url),jn(R.data,S.data)||A.data.next(S.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function _s(A,R){const S=jn(A.params,R.params)&&function Ii(A,R){return kn(A,R)&&A.every((S,B)=>jn(S.parameters,R[B].parameters))}(A.url,R.url);return S&&!(!A.parent!=!R.parent)&&(!A.parent||_s(A.parent,R.parent))}function Ys(A,R,S){if(S&&A.shouldReuseRoute(R.value,S.value.snapshot)){const B=S.value;B._futureSnapshot=R.value;const z=function wa(A,R,S){return R.children.map(B=>{for(const z of S.children)if(A.shouldReuseRoute(B.value,z.value.snapshot))return Ys(A,B,z);return Ys(A,B)})}(A,R,S);return new xn(B,z)}{if(A.shouldAttach(R.value)){const le=A.retrieve(R.value);if(null!==le){const Ne=le.route;return Ne.value._futureSnapshot=R.value,Ne.children=R.children.map(xe=>Ys(A,xe)),Ne}}const B=function Gs(A){return new ms(new Ce.X(A.url),new Ce.X(A.params),new Ce.X(A.queryParams),new Ce.X(A.fragment),new Ce.X(A.data),A.outlet,A.component,A)}(R.value),z=R.children.map(le=>Ys(A,le));return new xn(B,z)}}const yo="ngNavigationCancelingError";function kr(A,R){const{redirectTo:S,navigationBehaviorOptions:B}=et(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,z=wr(!1,0,R);return z.url=S,z.navigationBehaviorOptions=B,z}function wr(A,R,S){const B=new Error("NavigationCancelingError: "+(A||""));return B[yo]=!0,B.cancellationCode=R,S&&(B.url=S),B}function ki(A){return Ko(A)&&et(A.url)}function Ko(A){return A&&A[yo]}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vi,this.attachRef=null}}let Vi=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(S,B){const z=this.getOrCreateContext(S);z.outlet=B,this.contexts.set(S,z)}onChildOutletDestroyed(S){const B=this.getContext(S);B&&(B.outlet=null,B.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let B=this.getContext(S);return B||(B=new Ms,this.contexts.set(S,B)),B}getContext(S){return this.contexts.get(S)||null}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Bs=!1;let Zs=(()=>{class A{constructor(S,B,z,le,Ne){this.parentContexts=S,this.location=B,this.changeDetector=le,this.environmentInjector=Ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=z||Ye,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Bs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Bs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Bs);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,B){this.activated=S,this._activatedRoute=B,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,B){if(this.isActivated)throw new h.vHH(4013,Bs);this._activatedRoute=S;const z=this.location,Ne=S._futureSnapshot.component,xe=this.parentContexts.getOrCreateContext(this.name).children,Ft=new Qs(S,xe,z.injector);if(B&&function ia(A){return!!A.resolveComponentFactory}(B)){const fn=B.resolveComponentFactory(Ne);this.activated=z.createComponent(fn,z.length,Ft)}else this.activated=z.createComponent(Ne,{index:z.length,injector:Ft,environmentInjector:B??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(S){return new(S||A)(h.Y36(Vi),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},A.\u0275dir=h.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),A})();class Qs{constructor(R,S,B){this.route=R,this.childContexts=S,this.parent=B}get(R,S){return R===ms?this.route:R===Vi?this.childContexts:this.parent.get(R,S)}}let zr=(()=>{class A{}return A.\u0275fac=function(S){return new(S||A)},A.\u0275cmp=h.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(S,B){1&S&&h._UZ(0,"router-outlet")},dependencies:[Zs],encapsulation:2}),A})();function Ea(A,R){return A.providers&&!A._injector&&(A._injector=(0,h.MMx)(A.providers,R,`Route: ${A.path}`)),A._injector??R}function or(A){const R=A.children&&A.children.map(or),S=R?{...A,children:R}:{...A};return!S.component&&!S.loadComponent&&(R||S.loadChildren)&&S.outlet&&S.outlet!==Ye&&(S.component=zr),S}function Es(A){return A.outlet||Ye}function rs(A,R){const S=A.filter(B=>Es(B)===R);return S.push(...A.filter(B=>Es(B)!==R)),S}function Ui(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let R=A.parent;R;R=R.parent){const S=R.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class dr{constructor(R,S,B,z){this.routeReuseStrategy=R,this.futureState=S,this.currState=B,this.forwardEvent=z}activate(R){const S=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,B,R),Jn(this.futureState.root),this.activateChildRoutes(S,B,R)}deactivateChildRoutes(R,S,B){const z=sr(S);R.children.forEach(le=>{const Ne=le.value.outlet;this.deactivateRoutes(le,z[Ne],B),delete z[Ne]}),ir(z,(le,Ne)=>{this.deactivateRouteAndItsChildren(le,B)})}deactivateRoutes(R,S,B){const z=R.value,le=S?S.value:null;if(z===le)if(z.component){const Ne=B.getContext(z.outlet);Ne&&this.deactivateChildRoutes(R,S,Ne.children)}else this.deactivateChildRoutes(R,S,B);else le&&this.deactivateRouteAndItsChildren(S,B)}deactivateRouteAndItsChildren(R,S){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,S):this.deactivateRouteAndOutlet(R,S)}detachAndStoreRouteSubtree(R,S){const B=S.getContext(R.value.outlet),z=B&&R.value.component?B.children:S,le=sr(R);for(const Ne of Object.keys(le))this.deactivateRouteAndItsChildren(le[Ne],z);if(B&&B.outlet){const Ne=B.outlet.detach(),xe=B.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Ne,route:R,contexts:xe})}}deactivateRouteAndOutlet(R,S){const B=S.getContext(R.value.outlet),z=B&&R.value.component?B.children:S,le=sr(R);for(const Ne of Object.keys(le))this.deactivateRouteAndItsChildren(le[Ne],z);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(R,S,B){const z=sr(S);R.children.forEach(le=>{this.activateRoutes(le,z[le.value.outlet],B),this.forwardEvent(new ns(le.value.snapshot))}),R.children.length&&this.forwardEvent(new Yi(R.value.snapshot))}activateRoutes(R,S,B){const z=R.value,le=S?S.value:null;if(Jn(z),z===le)if(z.component){const Ne=B.getOrCreateContext(z.outlet);this.activateChildRoutes(R,S,Ne.children)}else this.activateChildRoutes(R,S,B);else if(z.component){const Ne=B.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const xe=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),Ne.children.onOutletReAttached(xe.contexts),Ne.attachRef=xe.componentRef,Ne.route=xe.route.value,Ne.outlet&&Ne.outlet.attach(xe.componentRef,xe.route.value),Jn(xe.route.value),this.activateChildRoutes(R,null,Ne.children)}else{const xe=Ui(z.snapshot),Ft=xe?.get(h._Vd)??null;Ne.attachRef=null,Ne.route=z,Ne.resolver=Ft,Ne.injector=xe,Ne.outlet&&Ne.outlet.activateWith(z,Ne.injector),this.activateChildRoutes(R,null,Ne.children)}}else this.activateChildRoutes(R,null,B)}}class Ws{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class sa{constructor(R,S){this.component=R,this.route=S}}function ys(A,R,S){const B=A._root;return ro(B,R?R._root:null,S,[B.value])}function fo(A,R){const S=Symbol(),B=R.get(A,S);return B===S?"function"!=typeof A||(0,h.Z0I)(A)?R.get(A):A:B}function ro(A,R,S,B,z={canDeactivateChecks:[],canActivateChecks:[]}){const le=sr(R);return A.children.forEach(Ne=>{(function Ka(A,R,S,B,z={canDeactivateChecks:[],canActivateChecks:[]}){const le=A.value,Ne=R?R.value:null,xe=S?S.getContext(A.value.outlet):null;if(Ne&&le.routeConfig===Ne.routeConfig){const Ft=function Da(A,R,S){if("function"==typeof S)return S(A,R);switch(S){case"pathParamsChange":return!kn(A.url,R.url);case"pathParamsOrQueryParamsChange":return!kn(A.url,R.url)||!jn(A.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_s(A,R)||!jn(A.queryParams,R.queryParams);default:return!_s(A,R)}}(Ne,le,le.routeConfig.runGuardsAndResolvers);Ft?z.canActivateChecks.push(new Ws(B)):(le.data=Ne.data,le._resolvedData=Ne._resolvedData),ro(A,R,le.component?xe?xe.children:null:S,B,z),Ft&&xe&&xe.outlet&&xe.outlet.isActivated&&z.canDeactivateChecks.push(new sa(xe.outlet.component,Ne))}else Ne&&qt(R,xe,z),z.canActivateChecks.push(new Ws(B)),ro(A,null,le.component?xe?xe.children:null:S,B,z)})(Ne,le[Ne.value.outlet],S,B.concat([Ne.value]),z),delete le[Ne.value.outlet]}),ir(le,(Ne,xe)=>qt(Ne,S.getContext(xe),z)),z}function qt(A,R,S){const B=sr(A),z=A.value;ir(B,(le,Ne)=>{qt(le,z.component?R?R.children.getContext(Ne):null:R,S)}),S.canDeactivateChecks.push(new sa(z.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,z))}function pr(A){return"function"==typeof A}function Y(A){return A instanceof Me.K||"EmptyError"===A?.name}const K=Symbol("INITIAL_VALUE");function fe(){return(0,gt.w)(A=>(0,Oe.a)(A.map(R=>R.pipe((0,qe.q)(1),(0,ze.O)(K)))).pipe((0,Ht.U)(R=>{for(const S of R)if(!0!==S){if(S===K)return K;if(!1===S||S instanceof Pn)return S}return!0}),(0,jt.h)(R=>R!==K),(0,qe.q)(1)))}function Gi(A){return(0,Ze.z)((0,Se.b)(R=>{if(et(R))throw kr(0,R)}),(0,Ht.U)(R=>!0===R))}const Ai={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function is(A,R,S,B,z){const le=qr(A,R,S);return le.matched?function yi(A,R,S,B){const z=R.canMatch;if(!z||0===z.length)return(0,ee.of)(!0);const le=z.map(Ne=>{const xe=fo(Ne,A);return Tr(function j(A){return A&&pr(A.canMatch)}(xe)?xe.canMatch(R,S):A.runInContext(()=>xe(R,S)))});return(0,ee.of)(le).pipe(fe(),Gi())}(B=Ea(R,B),R,S).pipe((0,Ht.U)(Ne=>!0===Ne?le:{...Ai})):(0,ee.of)(le)}function qr(A,R,S){if(""===R.path)return"full"===R.pathMatch&&(A.hasChildren()||S.length>0)?{...Ai}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const z=(R.matcher||an)(S,A,R);if(!z)return{...Ai};const le={};ir(z.posParams,(xe,Ft)=>{le[Ft]=xe.path});const Ne=z.consumed.length>0?{...le,...z.consumed[z.consumed.length-1].parameters}:le;return{matched:!0,consumedSegments:z.consumed,remainingSegments:S.slice(z.consumed.length),parameters:Ne,positionalParamSegments:z.posParams??{}}}function vs(A,R,S,B,z="corrected"){if(S.length>0&&function zi(A,R,S){return S.some(B=>po(A,R,B)&&Es(B)!==Ye)}(A,S,B)){const Ne=new On(R,function Wi(A,R,S,B){const z={};z[Ye]=B,B._sourceSegment=A,B._segmentIndexShift=R.length;for(const le of S)if(""===le.path&&Es(le)!==Ye){const Ne=new On([],{});Ne._sourceSegment=A,Ne._segmentIndexShift=R.length,z[Es(le)]=Ne}return z}(A,R,B,new On(S,A.children)));return Ne._sourceSegment=A,Ne._segmentIndexShift=R.length,{segmentGroup:Ne,slicedSegments:[]}}if(0===S.length&&function Bo(A,R,S){return S.some(B=>po(A,R,B))}(A,S,B)){const Ne=new On(A.segments,function Lo(A,R,S,B,z,le){const Ne={};for(const xe of B)if(po(A,S,xe)&&!z[Es(xe)]){const Ft=new On([],{});Ft._sourceSegment=A,Ft._segmentIndexShift="legacy"===le?A.segments.length:R.length,Ne[Es(xe)]=Ft}return{...z,...Ne}}(A,R,S,B,A.children,z));return Ne._sourceSegment=A,Ne._segmentIndexShift=R.length,{segmentGroup:Ne,slicedSegments:S}}const le=new On(A.segments,A.children);return le._sourceSegment=A,le._segmentIndexShift=R.length,{segmentGroup:le,slicedSegments:S}}function po(A,R,S){return(!(A.hasChildren()||R.length>0)||"full"!==S.pathMatch)&&""===S.path}function F(A,R,S,B){return!!(Es(A)===B||B!==Ye&&po(R,S,A))&&("**"===A.path||qr(R,A,S).matched)}function ne(A,R,S){return 0===R.length&&!A.children[S]}const $=!1;class ce{constructor(R){this.segmentGroup=R||null}}class Le{constructor(R){this.urlTree=R}}function Tt(A){return(0,we._)(new ce(A))}function Vt(A){return(0,we._)(new Le(A))}class li{constructor(R,S,B,z,le){this.injector=R,this.configLoader=S,this.urlSerializer=B,this.urlTree=z,this.config=le,this.allowRedirects=!0}apply(){const R=vs(this.urlTree.root,[],[],this.config).segmentGroup,S=new On(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,S,Ye).pipe((0,Ht.U)(le=>this.createUrlTree(ve(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,$e.K)(le=>{if(le instanceof Le)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof ce?this.noMatchError(le):le}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Ye).pipe((0,Ht.U)(z=>this.createUrlTree(ve(z),R.queryParams,R.fragment))).pipe((0,$e.K)(z=>{throw z instanceof ce?this.noMatchError(z):z}))}noMatchError(R){return new h.vHH(4002,$)}createUrlTree(R,S,B){const z=Ee(R);return new Pn(z,S,B)}expandSegmentGroup(R,S,B,z){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(R,S,B).pipe((0,Ht.U)(le=>new On([],le))):this.expandSegment(R,B,S,B.segments,z,!0)}expandChildren(R,S,B){const z=[];for(const le of Object.keys(B.children))"primary"===le?z.unshift(le):z.push(le);return(0,U.D)(z).pipe((0,bt.b)(le=>{const Ne=B.children[le],xe=rs(S,le);return this.expandSegmentGroup(R,xe,Ne,le).pipe((0,Ht.U)(Ft=>({segment:Ft,outlet:le})))}),(0,wt.R)((le,Ne)=>(le[Ne.outlet]=Ne.segment,le),{}),Mt())}expandSegment(R,S,B,z,le,Ne){return(0,U.D)(B).pipe((0,bt.b)(xe=>this.expandSegmentAgainstRoute(R,S,B,xe,z,le,Ne).pipe((0,$e.K)(fn=>{if(fn instanceof ce)return(0,ee.of)(null);throw fn}))),(0,Ve.P)(xe=>!!xe),(0,$e.K)((xe,Ft)=>{if(Y(xe))return ne(S,z,le)?(0,ee.of)(new On([],{})):Tt(S);throw xe}))}expandSegmentAgainstRoute(R,S,B,z,le,Ne,xe){return F(z,S,le,Ne)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(R,S,z,le,Ne):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,S,B,z,le,Ne):Tt(S):Tt(S)}expandSegmentAgainstRouteUsingRedirect(R,S,B,z,le,Ne){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,B,z,Ne):this.expandRegularSegmentAgainstRouteUsingRedirect(R,S,B,z,le,Ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,S,B,z){const le=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?Vt(le):this.lineralizeSegments(B,le).pipe((0,nt.z)(Ne=>{const xe=new On(Ne,{});return this.expandSegment(R,xe,S,Ne,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,S,B,z,le,Ne){const{matched:xe,consumedSegments:Ft,remainingSegments:fn,positionalParamSegments:Or}=qr(S,z,le);if(!xe)return Tt(S);const _n=this.applyRedirectCommands(Ft,z.redirectTo,Or);return z.redirectTo.startsWith("/")?Vt(_n):this.lineralizeSegments(z,_n).pipe((0,nt.z)(Hi=>this.expandSegment(R,S,B,Hi.concat(fn),Ne,!1)))}matchSegmentAgainstRoute(R,S,B,z,le){return"**"===B.path?(R=Ea(B,R),B.loadChildren?(B._loadedRoutes?(0,ee.of)({routes:B._loadedRoutes,injector:B._loadedInjector}):this.configLoader.loadChildren(R,B)).pipe((0,Ht.U)(xe=>(B._loadedRoutes=xe.routes,B._loadedInjector=xe.injector,new On(z,{})))):(0,ee.of)(new On(z,{}))):is(S,B,z,R).pipe((0,gt.w)(({matched:Ne,consumedSegments:xe,remainingSegments:Ft})=>Ne?this.getChildConfig(R=B._injector??R,B,z).pipe((0,nt.z)(Or=>{const _n=Or.injector??R,Hi=Or.routes,{segmentGroup:Cs,slicedSegments:Li}=vs(S,xe,Ft,Hi),Uo=new On(Cs.segments,Cs.children);if(0===Li.length&&Uo.hasChildren())return this.expandChildren(_n,Hi,Uo).pipe((0,Ht.U)(Ba=>new On(xe,Ba)));if(0===Hi.length&&0===Li.length)return(0,ee.of)(new On(xe,{}));const fa=Es(B)===le;return this.expandSegment(_n,Uo,Hi,Li,fa?Ye:le,!0).pipe((0,Ht.U)(Aa=>new On(xe.concat(Aa.segments),Aa.children)))})):Tt(S)))}getChildConfig(R,S,B){return S.children?(0,ee.of)({routes:S.children,injector:R}):S.loadChildren?void 0!==S._loadedRoutes?(0,ee.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function $i(A,R,S,B){const z=R.canLoad;if(void 0===z||0===z.length)return(0,ee.of)(!0);const le=z.map(Ne=>{const xe=fo(Ne,A);return Tr(function Ta(A){return A&&pr(A.canLoad)}(xe)?xe.canLoad(R,S):A.runInContext(()=>xe(R,S)))});return(0,ee.of)(le).pipe(fe(),Gi())}(R,S,B).pipe((0,nt.z)(z=>z?this.configLoader.loadChildren(R,S).pipe((0,Se.b)(le=>{S._loadedRoutes=le.routes,S._loadedInjector=le.injector})):function ai(A){return(0,we._)(wr($,3))}())):(0,ee.of)({routes:[],injector:R})}lineralizeSegments(R,S){let B=[],z=S.root;for(;;){if(B=B.concat(z.segments),0===z.numberOfChildren)return(0,ee.of)(B);if(z.numberOfChildren>1||!z.children[Ye])return(0,we._)(new h.vHH(4e3,$));z=z.children[Ye]}}applyRedirectCommands(R,S,B){return this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),R,B)}applyRedirectCreateUrlTree(R,S,B,z){const le=this.createSegmentGroup(R,S.root,B,z);return new Pn(le,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(R,S){const B={};return ir(R,(z,le)=>{if("string"==typeof z&&z.startsWith(":")){const xe=z.substring(1);B[le]=S[xe]}else B[le]=z}),B}createSegmentGroup(R,S,B,z){const le=this.createSegments(R,S.segments,B,z);let Ne={};return ir(S.children,(xe,Ft)=>{Ne[Ft]=this.createSegmentGroup(R,xe,B,z)}),new On(le,Ne)}createSegments(R,S,B,z){return S.map(le=>le.path.startsWith(":")?this.findPosParam(R,le,z):this.findOrReturn(le,B))}findPosParam(R,S,B){const z=B[S.path.substring(1)];if(!z)throw new h.vHH(4001,$);return z}findOrReturn(R,S){let B=0;for(const z of S){if(z.path===R.path)return S.splice(B),z;B++}return R}}class fi{}class la{constructor(R,S,B,z,le,Ne,xe,Ft){this.injector=R,this.rootComponentType=S,this.config=B,this.urlTree=z,this.url=le,this.paramsInheritanceStrategy=Ne,this.relativeLinkResolution=xe,this.urlSerializer=Ft}recognize(){const R=vs(this.urlTree.root,[],[],this.config.filter(S=>void 0===S.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Ye).pipe((0,Ht.U)(S=>{if(null===S)return null;const B=new Po([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ye,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new xn(B,S),le=new qs(this.url,z);return this.inheritParamsAndData(le._root),le}))}inheritParamsAndData(R){const S=R.value,B=Bi(S,this.paramsInheritanceStrategy);S.params=Object.freeze(B.params),S.data=Object.freeze(B.data),R.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(R,S,B,z){return 0===B.segments.length&&B.hasChildren()?this.processChildren(R,S,B):this.processSegment(R,S,B,B.segments,z)}processChildren(R,S,B){return(0,U.D)(Object.keys(B.children)).pipe((0,bt.b)(z=>{const le=B.children[z],Ne=rs(S,z);return this.processSegmentGroup(R,Ne,le,z)}),(0,wt.R)((z,le)=>z&&le?(z.push(...le),z):null),function tn(A,R=!1){return(0,mt.e)((S,B)=>{let z=0;S.subscribe((0,lt.x)(B,le=>{const Ne=A(le,z++);(Ne||R)&&B.next(le),!Ne&&B.complete()}))})}(z=>null!==z),(0,Kt.d)(null),Mt(),(0,Ht.U)(z=>{if(null===z)return null;const le=os(z);return function ua(A){A.sort((R,S)=>R.value.outlet===Ye?-1:S.value.outlet===Ye?1:R.value.outlet.localeCompare(S.value.outlet))}(le),le}))}processSegment(R,S,B,z,le){return(0,U.D)(S).pipe((0,bt.b)(Ne=>this.processSegmentAgainstRoute(Ne._injector??R,Ne,B,z,le)),(0,Ve.P)(Ne=>!!Ne),(0,$e.K)(Ne=>{if(Y(Ne))return ne(B,z,le)?(0,ee.of)([]):(0,ee.of)(null);throw Ne}))}processSegmentAgainstRoute(R,S,B,z,le){if(S.redirectTo||!F(S,B,z,le))return(0,ee.of)(null);let Ne;if("**"===S.path){const xe=z.length>0?Sr(z).parameters:{},Ft=Zi(B)+z.length,fn=new Po(z,xe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pu(S),Es(S),S.component??S._loadedComponent??null,S,Yo(B),Ft,_l(S),Ft);Ne=(0,ee.of)({snapshot:fn,consumedSegments:[],remainingSegments:[]})}else Ne=is(B,S,z,R).pipe((0,Ht.U)(({matched:xe,consumedSegments:Ft,remainingSegments:fn,parameters:Or})=>{if(!xe)return null;const _n=Zi(B)+Ft.length;return{snapshot:new Po(Ft,Or,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pu(S),Es(S),S.component??S._loadedComponent??null,S,Yo(B),_n,_l(S),_n),consumedSegments:Ft,remainingSegments:fn}}));return Ne.pipe((0,gt.w)(xe=>{if(null===xe)return(0,ee.of)(null);const{snapshot:Ft,consumedSegments:fn,remainingSegments:Or}=xe;R=S._injector??R;const _n=S._loadedInjector??R,Hi=function qa(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(S),{segmentGroup:Cs,slicedSegments:Li}=vs(B,fn,Or,Hi.filter(fa=>void 0===fa.redirectTo),this.relativeLinkResolution);if(0===Li.length&&Cs.hasChildren())return this.processChildren(_n,Hi,Cs).pipe((0,Ht.U)(fa=>null===fa?null:[new xn(Ft,fa)]));if(0===Hi.length&&0===Li.length)return(0,ee.of)([new xn(Ft,[])]);const Uo=Es(S)===le;return this.processSegment(_n,Hi,Cs,Li,Uo?Ye:le).pipe((0,Ht.U)(fa=>null===fa?null:[new xn(Ft,fa)]))}))}}function vo(A){const R=A.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function os(A){const R=[],S=new Set;for(const B of A){if(!vo(B)){R.push(B);continue}const z=R.find(le=>B.value.routeConfig===le.value.routeConfig);void 0!==z?(z.children.push(...B.children),S.add(z)):R.push(B)}for(const B of S){const z=os(B.children);R.push(new xn(B.value,z))}return R.filter(B=>!S.has(B))}function Yo(A){let R=A;for(;R._sourceSegment;)R=R._sourceSegment;return R}function Zi(A){let R=A,S=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,S+=R._segmentIndexShift??0;return S-1}function Pu(A){return A.data||{}}function _l(A){return A.resolve||{}}function vl(A){return"string"==typeof A.title||null===A.title}function io(A){return(0,gt.w)(R=>{const S=A(R);return S?(0,U.D)(S).pipe((0,Ht.U)(()=>R)):(0,ee.of)(R)})}let Ds=(()=>{class A{buildTitle(S){let B,z=S.root;for(;void 0!==z;)B=this.getResolvedTitleForRoute(z)??B,z=z.children.find(le=>le.outlet===Ye);return B}getResolvedTitleForRoute(S){return S.data[Be]}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=h.Yz7({token:A,factory:function(){return(0,h.f3M)(xa)},providedIn:"root"}),A})(),xa=(()=>{class A extends Ds{constructor(S){super(),this.title=S}updateTitle(S){const B=this.buildTitle(S);void 0!==B&&this.title.setTitle(B)}}return A.\u0275fac=function(S){return new(S||A)(h.LFG(We.Dx))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class mu{}class Ki extends class rn{shouldDetach(R){return!1}store(R,S){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,S){return R.routeConfig===S.routeConfig}}{}const as=new h.OlP("",{providedIn:"root",factory:()=>({})}),wn=new h.OlP("ROUTES");let Pa=(()=>{class A{constructor(S,B){this.injector=S,this.compiler=B,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,ee.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const B=Tr(S.loadComponent()).pipe((0,Se.b)(le=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=le}),(0,ie.x)(()=>{this.componentLoaders.delete(S)})),z=new yt(B,()=>new ct.x).pipe(xt());return this.componentLoaders.set(S,z),z}loadChildren(S,B){if(this.childrenLoaders.get(B))return this.childrenLoaders.get(B);if(B._loadedRoutes)return(0,ee.of)({routes:B._loadedRoutes,injector:B._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(B);const le=this.loadModuleFactoryOrRoutes(B.loadChildren).pipe((0,Ht.U)(xe=>{this.onLoadEndListener&&this.onLoadEndListener(B);let Ft,fn,Or=!1;Array.isArray(xe)?fn=xe:(Ft=xe.create(S).injector,fn=vr(Ft.get(wn,[],h.XFs.Self|h.XFs.Optional)));return{routes:fn.map(or),injector:Ft}}),(0,ie.x)(()=>{this.childrenLoaders.delete(B)})),Ne=new yt(le,()=>new ct.x).pipe(xt());return this.childrenLoaders.set(B,Ne),Ne}loadModuleFactoryOrRoutes(S){return Tr(S()).pipe((0,nt.z)(B=>B instanceof h.YKP||Array.isArray(B)?(0,ee.of)(B):(0,U.D)(this.compiler.compileModuleAsync(B))))}}return A.\u0275fac=function(S){return new(S||A)(h.LFG(h.zs3),h.LFG(h.Sil))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class yn{}class Pt{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,S){return R}}function ui(A){throw A}function Ya(A,R,S){return R.parse("/")}const bo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function wl(){const A=(0,h.f3M)(gn),R=(0,h.f3M)(Vi),S=(0,h.f3M)(je.Ye),B=(0,h.f3M)(h.zs3),z=(0,h.f3M)(h.Sil),le=(0,h.f3M)(wn,{optional:!0})??[],Ne=(0,h.f3M)(as,{optional:!0})??{},xe=(0,h.f3M)(xa),Ft=(0,h.f3M)(Ds,{optional:!0}),fn=(0,h.f3M)(yn,{optional:!0}),Or=(0,h.f3M)(mu,{optional:!0}),_n=new zs(null,A,R,S,B,z,vr(le));return fn&&(_n.urlHandlingStrategy=fn),Or&&(_n.routeReuseStrategy=Or),_n.titleStrategy=Ft??xe,function Za(A,R){A.errorHandler&&(R.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(R.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(R.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(R.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(R.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(R.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(R.canceledNavigationResolution=A.canceledNavigationResolution)}(Ne,_n),_n}let zs=(()=>{class A{constructor(S,B,z,le,Ne,xe,Ft){this.rootComponentType=S,this.urlSerializer=B,this.rootContexts=z,this.location=le,this.config=Ft,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ct.x,this.errorHandler=ui,this.malformedUriErrorHandler=Ya,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,ee.of)(void 0),this.urlHandlingStrategy=new Pt,this.routeReuseStrategy=new Ki,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ne.get(Pa),this.configLoader.onLoadEndListener=Hi=>this.triggerEvent(new Ls(Hi)),this.configLoader.onLoadStartListener=Hi=>this.triggerEvent(new na(Hi)),this.ngModule=Ne.get(h.h0i),this.console=Ne.get(h.c2e);const _n=Ne.get(h.R0b);this.isNgZoneEnabled=_n instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(Ft),this.currentUrlTree=function br(){return new Pn(new On([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ce.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(S){const B=this.events;return S.pipe((0,jt.h)(z=>0!==z.id),(0,Ht.U)(z=>({...z,extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,gt.w)(z=>{let le=!1,Ne=!1;return(0,ee.of)(z).pipe((0,Se.b)(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.rawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gt.w)(xe=>{const Ft=this.browserUrlTree.toString(),fn=!this.navigated||xe.extractedUrl.toString()!==Ft||Ft!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||fn)&&this.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return ka(xe.source)&&(this.browserUrlTree=xe.extractedUrl),(0,ee.of)(xe).pipe((0,gt.w)(_n=>{const Hi=this.transitions.getValue();return B.next(new Rs(_n.id,this.serializeUrl(_n.extractedUrl),_n.source,_n.restoredState)),Hi!==this.transitions.getValue()?Ue.E:Promise.resolve(_n)}),function Zr(A,R,S,B){return(0,gt.w)(z=>function hi(A,R,S,B,z){return new li(A,R,S,B,z).apply()}(A,R,S,z.extractedUrl,B).pipe((0,Ht.U)(le=>({...z,urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Se.b)(_n=>{this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects},z.urlAfterRedirects=_n.urlAfterRedirects}),function ou(A,R,S,B,z,le){return(0,nt.z)(Ne=>function aa(A,R,S,B,z,le,Ne="emptyOnly",xe="legacy"){return new la(A,R,S,B,z,Ne,xe,le).recognize().pipe((0,gt.w)(Ft=>null===Ft?function Fi(A){return new _e.y(R=>R.error(A))}(new fi):(0,ee.of)(Ft)))}(A,R,S,Ne.urlAfterRedirects,B.serialize(Ne.urlAfterRedirects),B,z,le).pipe((0,Ht.U)(xe=>({...Ne,targetSnapshot:xe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Se.b)(_n=>{if(z.targetSnapshot=_n.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!_n.extras.skipLocationChange){const Cs=this.urlHandlingStrategy.merge(_n.urlAfterRedirects,_n.rawUrl);this.setBrowserUrl(Cs,_n)}this.browserUrlTree=_n.urlAfterRedirects}const Hi=new Fs(_n.id,this.serializeUrl(_n.extractedUrl),this.serializeUrl(_n.urlAfterRedirects),_n.targetSnapshot);B.next(Hi)}));if(fn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Hi,extractedUrl:Cs,source:Li,restoredState:Uo,extras:fa}=xe,_u=new Rs(Hi,this.serializeUrl(Cs),Li,Uo);B.next(_u);const Aa=oi(Cs,this.rootComponentType).snapshot;return z={...xe,targetSnapshot:Aa,urlAfterRedirects:Cs,extras:{...fa,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(z)}return this.rawUrlTree=xe.rawUrl,xe.resolve(null),Ue.E}),(0,Se.b)(xe=>{const Ft=new ta(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(Ft)}),(0,Ht.U)(xe=>z={...xe,guards:ys(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)}),function Ie(A,R){return(0,nt.z)(S=>{const{targetSnapshot:B,currentSnapshot:z,guards:{canActivateChecks:le,canDeactivateChecks:Ne}}=S;return 0===Ne.length&&0===le.length?(0,ee.of)({...S,guardsResult:!0}):function He(A,R,S,B){return(0,U.D)(A).pipe((0,nt.z)(z=>function qn(A,R,S,B,z){const le=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,ee.of)(!0);const Ne=le.map(xe=>{const Ft=Ui(R)??z,fn=fo(xe,Ft);return Tr(function W(A){return A&&pr(A.canDeactivate)}(fn)?fn.canDeactivate(A,R,S,B):Ft.runInContext(()=>fn(A,R,S,B))).pipe((0,Ve.P)())});return(0,ee.of)(Ne).pipe(fe())}(z.component,z.route,S,R,B)),(0,Ve.P)(z=>!0!==z,!0))}(Ne,B,z,A).pipe((0,nt.z)(xe=>xe&&function oa(A){return"boolean"==typeof A}(xe)?function Ct(A,R,S,B){return(0,U.D)(R).pipe((0,bt.b)(z=>(0,Ge.z)(function Vn(A,R){return null!==A&&R&&R(new ra(A)),(0,ee.of)(!0)}(z.route.parent,B),function _t(A,R){return null!==A&&R&&R(new xo(A)),(0,ee.of)(!0)}(z.route,B),function cr(A,R,S){const B=R[R.length-1],le=R.slice(0,R.length-1).reverse().map(Ne=>function ml(A){const R=A.routeConfig?A.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:A,guards:R}:null}(Ne)).filter(Ne=>null!==Ne).map(Ne=>(0,Pe.P)(()=>{const xe=Ne.guards.map(Ft=>{const fn=Ui(Ne.node)??S,Or=fo(Ft,fn);return Tr(function Z(A){return A&&pr(A.canActivateChild)}(Or)?Or.canActivateChild(B,A):fn.runInContext(()=>Or(B,A))).pipe((0,Ve.P)())});return(0,ee.of)(xe).pipe(fe())}));return(0,ee.of)(le).pipe(fe())}(A,z.path,S),function Dn(A,R,S){const B=R.routeConfig?R.routeConfig.canActivate:null;if(!B||0===B.length)return(0,ee.of)(!0);const z=B.map(le=>(0,Pe.P)(()=>{const Ne=Ui(R)??S,xe=fo(le,Ne);return Tr(function cs(A){return A&&pr(A.canActivate)}(xe)?xe.canActivate(R,A):Ne.runInContext(()=>xe(R,A))).pipe((0,Ve.P)())}));return(0,ee.of)(z).pipe(fe())}(A,z.route,S))),(0,Ve.P)(z=>!0!==z,!0))}(B,le,A,R):(0,ee.of)(xe)),(0,Ht.U)(xe=>({...S,guardsResult:xe})))})}(this.ngModule.injector,xe=>this.triggerEvent(xe)),(0,Se.b)(xe=>{if(z.guardsResult=xe.guardsResult,et(xe.guardsResult))throw kr(0,xe.guardsResult);const Ft=new gs(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.triggerEvent(Ft)}),(0,jt.h)(xe=>!!xe.guardsResult||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,"",3),!1)),io(xe=>{if(xe.guards.canActivateChecks.length)return(0,ee.of)(xe).pipe((0,Se.b)(Ft=>{const fn=new _o(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(fn)}),(0,gt.w)(Ft=>{let fn=!1;return(0,ee.of)(Ft).pipe(function yl(A,R){return(0,nt.z)(S=>{const{targetSnapshot:B,guards:{canActivateChecks:z}}=S;if(!z.length)return(0,ee.of)(S);let le=0;return(0,U.D)(z).pipe((0,bt.b)(Ne=>function ca(A,R,S,B){const z=A.routeConfig,le=A._resolve;return void 0!==z?.title&&!vl(z)&&(le[Be]=z.title),function Oa(A,R,S,B){const z=function pu(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===z.length)return(0,ee.of)({});const le={};return(0,U.D)(z).pipe((0,nt.z)(Ne=>function gu(A,R,S,B){const z=Ui(R)??B,le=fo(A,z);return Tr(le.resolve?le.resolve(R,S):z.runInContext(()=>le(R,S)))}(A[Ne],R,S,B).pipe((0,Ve.P)(),(0,Se.b)(xe=>{le[Ne]=xe}))),tt(1),(0,pe.h)(le),(0,$e.K)(Ne=>Y(Ne)?Ue.E:(0,we._)(Ne)))}(le,A,R,B).pipe((0,Ht.U)(Ne=>(A._resolvedData=Ne,A.data=Bi(A,S).resolve,z&&vl(z)&&(A.data[Be]=z.title),null)))}(Ne.route,B,A,R)),(0,Se.b)(()=>le++),tt(1),(0,nt.z)(Ne=>le===z.length?(0,ee.of)(S):Ue.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Se.b)({next:()=>fn=!0,complete:()=>{fn||(this.restoreHistory(Ft),this.cancelNavigationTransition(Ft,"",2))}}))}),(0,Se.b)(Ft=>{const fn=new Pi(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(fn)}))}),io(xe=>{const Ft=fn=>{const Or=[];fn.routeConfig?.loadComponent&&!fn.routeConfig._loadedComponent&&Or.push(this.configLoader.loadComponent(fn.routeConfig).pipe((0,Se.b)(_n=>{fn.component=_n}),(0,Ht.U)(()=>{})));for(const _n of fn.children)Or.push(...Ft(_n));return Or};return(0,Oe.a)(Ft(xe.targetSnapshot.root)).pipe((0,Kt.d)(),(0,qe.q)(1))}),io(()=>this.afterPreactivation()),(0,Ht.U)(xe=>{const Ft=function Wr(A,R,S){const B=Ys(A,R._root,S?S._root:void 0);return new Di(B,R)}(this.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return z={...xe,targetRouterState:Ft}}),(0,Se.b)(xe=>{this.currentUrlTree=xe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl),this.routerState=xe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(xe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,xe),this.browserUrlTree=xe.urlAfterRedirects)}),((A,R,S)=>(0,Ht.U)(B=>(new dr(R,B.targetRouterState,B.currentRouterState,S).activate(A),B)))(this.rootContexts,this.routeReuseStrategy,xe=>this.triggerEvent(xe)),(0,Se.b)({next(){le=!0},complete(){le=!0}}),(0,ie.x)(()=>{le||Ne||this.cancelNavigationTransition(z,"",1),this.currentNavigation?.id===z.id&&(this.currentNavigation=null)}),(0,$e.K)(xe=>{if(Ne=!0,Ko(xe)){ki(xe)||(this.navigated=!0,this.restoreHistory(z,!0));const Ft=new ba(z.id,this.serializeUrl(z.extractedUrl),xe.message,xe.cancellationCode);if(B.next(Ft),ki(xe)){const fn=this.urlHandlingStrategy.merge(xe.url,this.rawUrlTree),Or={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ka(z.source)};this.scheduleNavigation(fn,"imperative",null,Or,{resolve:z.resolve,reject:z.reject,promise:z.promise})}else z.resolve(!1)}else{this.restoreHistory(z,!0);const Ft=new hr(z.id,this.serializeUrl(z.extractedUrl),xe,z.targetSnapshot??void 0);B.next(Ft);try{z.resolve(this.errorHandler(xe))}catch(fn){z.reject(fn)}}return Ue.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next({...this.transitions.value,...S})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const B="popstate"===S.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{const z={replaceUrl:!0},le=S.state?.navigationId?S.state:null;if(le){const xe={...le};delete xe.navigationId,delete xe.\u0275routerPageId,0!==Object.keys(xe).length&&(z.state=xe)}const Ne=this.parseUrl(S.url);this.scheduleNavigation(Ne,B,le,z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){this.config=S.map(or),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,B={}){const{relativeTo:z,queryParams:le,fragment:Ne,queryParamsHandling:xe,preserveFragment:Ft}=B,fn=z||this.routerState.root,Or=Ft?this.currentUrlTree.fragment:Ne;let _n=null;switch(xe){case"merge":_n={...this.currentUrlTree.queryParams,...le};break;case"preserve":_n=this.currentUrlTree.queryParams;break;default:_n=le||null}return null!==_n&&(_n=this.removeEmptyProps(_n)),Ur(fn,this.currentUrlTree,S,_n,Or??null)}navigateByUrl(S,B={skipLocationChange:!1}){const z=et(S)?S:this.parseUrl(S),le=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,B)}navigate(S,B={skipLocationChange:!1}){return function Wl(A){for(let R=0;R<A.length;R++){if(null==A[R])throw new h.vHH(4008,false)}}(S),this.navigateByUrl(this.createUrlTree(S,B),B)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let B;try{B=this.urlSerializer.parse(S)}catch(z){B=this.malformedUriErrorHandler(z,this.urlSerializer,S)}return B}isActive(S,B){let z;if(z=!0===B?{...bo}:!1===B?{...bl}:B,et(S))return Yr(this.currentUrlTree,S,z);const le=this.parseUrl(S);return Yr(this.currentUrlTree,le,z)}removeEmptyProps(S){return Object.keys(S).reduce((B,z)=>{const le=S[z];return null!=le&&(B[z]=le),B},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new mi(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,B,z,le,Ne){if(this.disposed)return Promise.resolve(!1);let xe,Ft,fn;Ne?(xe=Ne.resolve,Ft=Ne.reject,fn=Ne.promise):fn=new Promise((Hi,Cs)=>{xe=Hi,Ft=Cs});const Or=++this.navigationId;let _n;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),_n=z&&z.\u0275routerPageId?z.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):_n=0,this.setTransition({id:Or,targetPageId:_n,source:B,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:le,resolve:xe,reject:Ft,promise:fn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),fn.catch(Hi=>Promise.reject(Hi))}setBrowserUrl(S,B){const z=this.urlSerializer.serialize(S),le={...B.extras.state,...this.generateNgRouterState(B.id,B.targetPageId)};this.location.isCurrentPathEqualTo(z)||B.extras.replaceUrl?this.location.replaceState(z,"",le):this.location.go(z,"",le)}restoreHistory(S,B=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===z?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===z&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(z)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,B,z){const le=new ba(S.id,this.serializeUrl(S.extractedUrl),B,z);this.triggerEvent(le),S.resolve(!1)}generateNgRouterState(S,B){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:B}:{navigationId:S}}}return A.\u0275fac=function(S){h.$Z()},A.\u0275prov=h.Yz7({token:A,factory:function(){return wl()},providedIn:"root"}),A})();function ka(A){return"imperative"!==A}let Qa=(()=>{class A{constructor(S,B,z,le,Ne){this.router=S,this.route=B,this.tabIndexAttribute=z,this.renderer=le,this.el=Ne,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ct.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(S){this._preserveFragment=(0,h.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,h.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,h.D6c)(S)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const B=this.renderer,z=this.el.nativeElement;null!==S?B.setAttribute(z,"tabindex",S):B.removeAttribute(z,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(S){return new(S||A)(h.Y36(zs),h.Y36(ms),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},A.\u0275dir=h.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,B){1&S&&h.NdJ("click",function(){return B.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),A})(),ku=(()=>{class A{constructor(S,B,z){this.router=S,this.route=B,this.locationStrategy=z,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ct.x,this.subscription=S.events.subscribe(le=>{le instanceof mi&&this.updateTargetUrlAndHref()})}set preserveFragment(S){this._preserveFragment=(0,h.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,h.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,h.D6c)(S)}get replaceUrl(){return this._replaceUrl}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,B,z,le,Ne){return!!(0!==S||B||z||le||Ne||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(S){return new(S||A)(h.Y36(zs),h.Y36(ms),h.Y36(je.S$))},A.\u0275dir=h.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,B){1&S&&h.NdJ("click",function(le){return B.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&S&&h.uIk("target",B.target)("href",B.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),A})(),El=(()=>{class A{constructor(S,B,z,le,Ne,xe){this.router=S,this.element=B,this.renderer=z,this.cdr=le,this.link=Ne,this.linkWithHref=xe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=S.events.subscribe(Ft=>{Ft instanceof mi&&this.update()})}ngAfterContentInit(){(0,ee.of)(this.links.changes,this.linksWithHrefs.changes,(0,ee.of)(null)).pipe((0,At.J)()).subscribe(S=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const S=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(B=>!!B).map(B=>B.onChanges);this.linkInputChangesSubscription=(0,U.D)(S).pipe((0,At.J)()).subscribe(B=>{this.isActive!==this.isLinkActive(this.router)(B)&&this.update()})}set routerLinkActive(S){const B=Array.isArray(S)?S:S.split(" ");this.classes=B.filter(z=>!!z)}ngOnChanges(S){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const S=this.hasActiveLinks();this.isActive!==S&&(this.isActive=S,this.cdr.markForCheck(),this.classes.forEach(B=>{S?this.renderer.addClass(this.element.nativeElement,B):this.renderer.removeClass(this.element.nativeElement,B)}),S&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(S))})}isLinkActive(S){const B=function _r(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&S.isActive(z.urlTree,B)}hasActiveLinks(){const S=this.isLinkActive(this.router);return this.link&&S(this.link)||this.linkWithHref&&S(this.linkWithHref)||this.links.some(S)||this.linksWithHrefs.some(S)}}return A.\u0275fac=function(S){return new(S||A)(h.Y36(zs),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Qa,8),h.Y36(ku,8))},A.\u0275dir=h.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(S,B,z){if(1&S&&(h.Suo(z,Qa,5),h.Suo(z,ku,5)),2&S){let le;h.iGM(le=h.CRH())&&(B.links=le),h.iGM(le=h.CRH())&&(B.linksWithHrefs=le)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),A})();class da{}let Mn=(()=>{class A{constructor(S,B,z,le,Ne){this.router=S,this.injector=z,this.preloadingStrategy=le,this.loader=Ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,jt.h)(S=>S instanceof mi),(0,bt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,B){const z=[];for(const le of B){le.providers&&!le._injector&&(le._injector=(0,h.MMx)(le.providers,S,`Route: ${le.path}`));const Ne=le._injector??S,xe=le._loadedInjector??Ne;le.loadChildren&&!le._loadedRoutes&&void 0===le.canLoad||le.loadComponent&&!le._loadedComponent?z.push(this.preloadConfig(Ne,le)):(le.children||le._loadedRoutes)&&z.push(this.processRoutes(xe,le.children??le._loadedRoutes))}return(0,U.D)(z).pipe((0,At.J)())}preloadConfig(S,B){return this.preloadingStrategy.preload(B,()=>{let z;z=B.loadChildren&&void 0===B.canLoad?this.loader.loadChildren(S,B):(0,ee.of)(null);const le=z.pipe((0,nt.z)(Ne=>null===Ne?(0,ee.of)(void 0):(B._loadedRoutes=Ne.routes,B._loadedInjector=Ne.injector,this.processRoutes(Ne.injector??S,Ne.routes))));if(B.loadComponent&&!B._loadedComponent){const Ne=this.loader.loadComponent(B);return(0,U.D)([le,Ne]).pipe((0,At.J)())}return le})}}return A.\u0275fac=function(S){return new(S||A)(h.LFG(zs),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(da),h.LFG(Pa))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Rl=new h.OlP("");let ti=(()=>{class A{constructor(S,B,z={}){this.router=S,this.viewportScroller=B,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof mi&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof ut&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,B){this.router.triggerEvent(new ut(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(S){h.$Z()},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac}),A})();function so(A,R){return{\u0275kind:A,\u0275providers:R}}function Zo(A){return[{provide:wn,multi:!0,useValue:A}]}function Ia(){const A=(0,h.f3M)(h.zs3);return R=>{const S=A.get(h.z2F);if(R!==S.components[0])return;const B=A.get(zs),z=A.get(wo);1===A.get(Ol)&&B.initialNavigation(),A.get(ha,null,h.XFs.Optional)?.setUpPreloading(),A.get(Rl,null,h.XFs.Optional)?.init(),B.resetRootComponentType(S.componentTypes[0]),z.closed||(z.next(),z.unsubscribe())}}const wo=new h.OlP("",{factory:()=>new ct.x}),Ol=new h.OlP("",{providedIn:"root",factory:()=>1});const ha=new h.OlP("");function gc(A){return so(0,[{provide:ha,useExisting:Mn},{provide:da,useExisting:A}])}const Vo=new h.OlP("ROUTER_FORROOT_GUARD"),Ot=[je.Ye,{provide:gn,useClass:Si},{provide:zs,useFactory:wl},Vi,{provide:ms,useFactory:function vn(A){return A.routerState.root},deps:[zs]},Pa];function Pl(){return new h.PXZ("Router",zs)}let Ti=(()=>{class A{constructor(S){}static forRoot(S,B){return{ngModule:A,providers:[Ot,[],Zo(S),{provide:Vo,useFactory:Bu,deps:[[zs,new h.FiY,new h.tp0]]},{provide:as,useValue:B||{}},B?.useHash?{provide:je.S$,useClass:je.Do}:{provide:je.S$,useClass:je.b0},{provide:Rl,useFactory:()=>{const A=(0,h.f3M)(zs),R=(0,h.f3M)(je.EM),S=(0,h.f3M)(as);return S.scrollOffset&&R.setOffset(S.scrollOffset),new ti(A,R,S)}},B?.preloadingStrategy?gc(B.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Pl},B?.initialNavigation?Ts(B):[],[{provide:La,useFactory:Ia},{provide:h.tb,multi:!0,useExisting:La}]]}}static forChild(S){return{ngModule:A,providers:[Zo(S)]}}}return A.\u0275fac=function(S){return new(S||A)(h.LFG(Vo,8))},A.\u0275mod=h.oAB({type:A}),A.\u0275inj=h.cJS({imports:[zr]}),A})();function Bu(A){return"guarded"}function Ts(A){return["disabled"===A.initialNavigation?so(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const R=(0,h.f3M)(zs);return()=>{R.setUpLocationChangeListener()}}},{provide:Ol,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?so(2,[{provide:Ol,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:R=>{const S=R.get(je.V_,Promise.resolve());let B=!1;return()=>S.then(()=>new Promise(le=>{const Ne=R.get(zs),xe=R.get(wo);(function z(le){R.get(zs).events.pipe((0,jt.h)(xe=>xe instanceof mi||xe instanceof ba||xe instanceof hr),(0,Ht.U)(xe=>xe instanceof mi||xe instanceof ba&&(0===xe.code||1===xe.code)&&null),(0,jt.h)(xe=>null!==xe),(0,qe.q)(1)).subscribe(()=>{le()})})(()=>{le(!0),B=!0}),Ne.afterPreactivation=()=>(le(!0),B||xe.closed?(0,ee.of)(void 0):xe),Ne.initialNavigation()}))}}]).\u0275providers:[]]}const La=new h.OlP("")},3942:(cn,dt,L)=>{L.d(dt,{Z:()=>lt});var h=L(2090),U=L(4859),ee=L(9681),Ce=L(1877);class Me{constructor(yt,ct){this._delegate=yt,this.firebase=ct,(0,ee._addComponent)(yt,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(yt,ct=ee._DEFAULT_ENTRY_NAME){var je;this._delegate.checkDestroyed();const Ht=this._delegate.container.getProvider(yt);return!Ht.isInitialized()&&"EXPLICIT"===(null===(je=Ht.getComponent())||void 0===je?void 0:je.instantiationMode)&&Ht.initialize(),Ht.getImmediate({identifier:ct})}_removeServiceInstance(yt,ct=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(ct)}_addComponent(yt){(0,ee._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,ee._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ge=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),we=function Ze(){const xt=function Pe(xt){const yt={},ct={__esModule:!0,initializeApp:function gt(nt,Ve={}){const bt=ee.initializeApp(nt,Ve);if((0,h.r3)(yt,bt.name))return yt[bt.name];const Se=new xt(bt,ct);return yt[bt.name]=Se,Se},app:Ht,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function ze(nt){const Ve=nt.name,bt=Ve.replace("-compat","");if(ee._registerComponent(nt)&&"PUBLIC"===nt.type){const Se=($e=Ht())=>{if("function"!=typeof $e[bt])throw Ge.create("invalid-app-argument",{appName:Ve});return $e[bt]()};void 0!==nt.serviceProps&&(0,h.ZB)(Se,nt.serviceProps),ct[bt]=Se,xt.prototype[bt]=function(...$e){return this._getService.bind(this,Ve).apply(this,nt.multipleInstances?$e:[])}}return"PUBLIC"===nt.type?ct[bt]:null},removeApp:function je(nt){delete yt[nt]},useAsService:function jt(nt,Ve){return"serverAuth"===Ve?null:Ve},modularAPIs:ee}};function Ht(nt){if(!(0,h.r3)(yt,nt=nt||ee._DEFAULT_ENTRY_NAME))throw Ge.create("no-app",{appName:nt});return yt[nt]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function qe(){return Object.keys(yt).map(nt=>yt[nt])}}),Ht.App=xt,ct}(Me);return xt.INTERNAL=Object.assign(Object.assign({},xt.INTERNAL),{createFirebaseNamespace:Ze,extendNamespace:function yt(ct){(0,h.ZB)(xt,ct)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),xt}(),_e=new Ce.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){_e.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&_e.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=we;!function mt(xt){(0,ee.registerVersion)("@firebase/app-compat","0.2.0",xt)}()},9681:(cn,dt,L)=>{L.r(dt),L.d(dt,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>tn,_addComponent:()=>We,_addOrOverwriteComponent:()=>Ye,_apps:()=>ie,_clearComponents:()=>an,_components:()=>At,_getProvider:()=>ot,_registerComponent:()=>Be,_removeServiceInstance:()=>en,deleteApp:()=>Tr,getApp:()=>Kn,getApps:()=>ir,initializeApp:()=>Sr,onLog:()=>Gn,registerVersion:()=>br,setLogLevel:()=>Ar});var h=L(5861),U=L(4859),ee=L(1877),Ce=L(2090),Me=L(8766);class Oe{constructor(Bt){this.container=Bt}getPlatformInfoString(){return this.container.getProviders().map(bn=>{if(function Ge(mn){return"VERSION"===mn.getComponent()?.type}(bn)){const zn=bn.getImmediate();return`${zn.library}/${zn.version}`}return null}).filter(bn=>bn).join(" ")}}const Pe="@firebase/app",we=new ee.Yd("@firebase/app"),tn="[DEFAULT]",pe={[Pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ie=new Map,At=new Map;function We(mn,Bt){try{mn.container.addComponent(Bt)}catch(bn){we.debug(`Component ${Bt.name} failed to register with FirebaseApp ${mn.name}`,bn)}}function Ye(mn,Bt){mn.container.addOrOverwriteComponent(Bt)}function Be(mn){const Bt=mn.name;if(At.has(Bt))return we.debug(`There were multiple attempts to register component ${Bt}.`),!1;At.set(Bt,mn);for(const bn of ie.values())We(bn,mn);return!0}function ot(mn,Bt){const bn=mn.container.getProvider("heartbeat").getImmediate({optional:!0});return bn&&bn.triggerHeartbeat(),mn.container.getProvider(Bt)}function en(mn,Bt,bn=tn){ot(mn,Bt).clearInstance(bn)}function an(){At.clear()}const jn=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gi{constructor(Bt,bn,zn){this._isDeleted=!1,this._options=Object.assign({},Bt),this._config=Object.assign({},bn),this._name=bn.name,this._automaticDataCollectionEnabled=bn.automaticDataCollectionEnabled,this._container=zn,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Bt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Bt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Bt){this._isDeleted=Bt}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const vr="9.15.0";function Sr(mn,Bt={}){let bn=mn;"object"!=typeof Bt&&(Bt={name:Bt});const zn=Object.assign({name:tn,automaticDataCollectionEnabled:!1},Bt),Bn=zn.name;if("string"!=typeof Bn||!Bn)throw jn.create("bad-app-name",{appName:String(Bn)});if(bn||(bn=(0,Ce.aH)()),!bn)throw jn.create("no-options");const tr=ie.get(Bn);if(tr){if((0,Ce.vZ)(bn,tr.options)&&(0,Ce.vZ)(zn,tr.config))return tr;throw jn.create("duplicate-app",{appName:Bn})}const Fe=new U.H0(Bn);for(const Qe of At.values())Fe.addComponent(Qe);const Ae=new gi(bn,zn,Fe);return ie.set(Bn,Ae),Ae}function Kn(mn=tn){const Bt=ie.get(mn);if(!Bt&&mn===tn)return Sr();if(!Bt)throw jn.create("no-app",{appName:mn});return Bt}function ir(){return Array.from(ie.values())}function Tr(mn){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(mn){const Bt=mn.name;ie.has(Bt)&&(ie.delete(Bt),yield Promise.all(mn.container.getProviders().map(bn=>bn.delete())),mn.isDeleted=!0)})).apply(this,arguments)}function br(mn,Bt,bn){var zn;let Bn=null!==(zn=pe[mn])&&void 0!==zn?zn:mn;bn&&(Bn+=`-${bn}`);const tr=Bn.match(/\s|\//),Fe=Bt.match(/\s|\//);if(tr||Fe){const Ae=[`Unable to register library "${Bn}" with version "${Bt}":`];return tr&&Ae.push(`library name "${Bn}" contains illegal characters (whitespace or "/")`),tr&&Fe&&Ae.push("and"),Fe&&Ae.push(`version name "${Bt}" contains illegal characters (whitespace or "/")`),void we.warn(Ae.join(" "))}Be(new U.wA(`${Bn}-version`,()=>({library:Bn,version:Bt}),"VERSION"))}function Gn(mn,Bt){if(null!==mn&&"function"!=typeof mn)throw jn.create("invalid-log-argument");(0,ee.Am)(mn,Bt)}function Ar(mn){(0,ee.Ub)(mn)}const Qn="firebase-heartbeat-store";let fr=null;function lr(){return fr||(fr=(0,Me.X3)("firebase-heartbeat-database",1,{upgrade:(mn,Bt)=>{0===Bt&&mn.createObjectStore(Qn)}}).catch(mn=>{throw jn.create("idb-open",{originalErrorMessage:mn.message})})),fr}function En(){return(En=(0,h.Z)(function*(mn){try{return(yield lr()).transaction(Qn).objectStore(Qn).get(Lr(mn))}catch(Bt){if(Bt instanceof Ce.ZR)we.warn(Bt.message);else{const bn=jn.create("idb-get",{originalErrorMessage:Bt?.message});we.warn(bn.message)}}})).apply(this,arguments)}function Pn(mn,Bt){return On.apply(this,arguments)}function On(){return(On=(0,h.Z)(function*(mn,Bt){try{const zn=(yield lr()).transaction(Qn,"readwrite");return yield zn.objectStore(Qn).put(Bt,Lr(mn)),zn.done}catch(bn){if(bn instanceof Ce.ZR)we.warn(bn.message);else{const zn=jn.create("idb-set",{originalErrorMessage:bn?.message});we.warn(zn.message)}}})).apply(this,arguments)}function Lr(mn){return`${mn.name}!${mn.options.appId}`}class Ri{constructor(Bt){this.container=Bt,this._heartbeatsCache=null;const bn=this.container.getProvider("app").getImmediate();this._storage=new mr(bn),this._heartbeatsCachePromise=this._storage.read().then(zn=>(this._heartbeatsCache=zn,zn))}triggerHeartbeat(){var Bt=this;return(0,h.Z)(function*(){const zn=Bt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bn=gn();if(null===Bt._heartbeatsCache&&(Bt._heartbeatsCache=yield Bt._heartbeatsCachePromise),Bt._heartbeatsCache.lastSentHeartbeatDate!==Bn&&!Bt._heartbeatsCache.heartbeats.some(tr=>tr.date===Bn))return Bt._heartbeatsCache.heartbeats.push({date:Bn,agent:zn}),Bt._heartbeatsCache.heartbeats=Bt._heartbeatsCache.heartbeats.filter(tr=>{const Fe=new Date(tr.date).valueOf();return Date.now()-Fe<=2592e6}),Bt._storage.overwrite(Bt._heartbeatsCache)})()}getHeartbeatsHeader(){var Bt=this;return(0,h.Z)(function*(){if(null===Bt._heartbeatsCache&&(yield Bt._heartbeatsCachePromise),null===Bt._heartbeatsCache||0===Bt._heartbeatsCache.heartbeats.length)return"";const bn=gn(),{heartbeatsToSend:zn,unsentEntries:Bn}=function Si(mn,Bt=1024){const bn=[];let zn=mn.slice();for(const Bn of mn){const tr=bn.find(Fe=>Fe.agent===Bn.agent);if(tr){if(tr.dates.push(Bn.date),si(bn)>Bt){tr.dates.pop();break}}else if(bn.push({agent:Bn.agent,dates:[Bn.date]}),si(bn)>Bt){bn.pop();break}zn=zn.slice(1)}return{heartbeatsToSend:bn,unsentEntries:zn}}(Bt._heartbeatsCache.heartbeats),tr=(0,Ce.L)(JSON.stringify({version:2,heartbeats:zn}));return Bt._heartbeatsCache.lastSentHeartbeatDate=bn,Bn.length>0?(Bt._heartbeatsCache.heartbeats=Bn,yield Bt._storage.overwrite(Bt._heartbeatsCache)):(Bt._heartbeatsCache.heartbeats=[],Bt._storage.overwrite(Bt._heartbeatsCache)),tr})()}}function gn(){return(new Date).toISOString().substring(0,10)}class mr{constructor(Bt){this.app=Bt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Bt=this;return(0,h.Z)(function*(){return(yield Bt._canUseIndexedDBPromise)&&(yield function Ln(mn){return En.apply(this,arguments)}(Bt.app))||{heartbeats:[]}})()}overwrite(Bt){var bn=this;return(0,h.Z)(function*(){var zn;if(yield bn._canUseIndexedDBPromise){const tr=yield bn.read();return Pn(bn.app,{lastSentHeartbeatDate:null!==(zn=Bt.lastSentHeartbeatDate)&&void 0!==zn?zn:tr.lastSentHeartbeatDate,heartbeats:Bt.heartbeats})}})()}add(Bt){var bn=this;return(0,h.Z)(function*(){var zn;if(yield bn._canUseIndexedDBPromise){const tr=yield bn.read();return Pn(bn.app,{lastSentHeartbeatDate:null!==(zn=Bt.lastSentHeartbeatDate)&&void 0!==zn?zn:tr.lastSentHeartbeatDate,heartbeats:[...tr.heartbeats,...Bt.heartbeats]})}})()}}function si(mn){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:mn})).length}!function Rr(mn){Be(new U.wA("platform-logger",Bt=>new Oe(Bt),"PRIVATE")),Be(new U.wA("heartbeat",Bt=>new Ri(Bt),"PRIVATE")),br(Pe,"0.9.0",mn),br(Pe,"0.9.0","esm2017"),br("fire-js","")}("")},4859:(cn,dt,L)=>{L.d(dt,{H0:()=>Pe,wA:()=>ee,zt:()=>Me});var h=L(5861),U=L(2090);class ee{constructor(we,_e,Ue){this.name=we,this.instanceFactory=_e,this.type=Ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(we){return this.instantiationMode=we,this}setMultipleInstances(we){return this.multipleInstances=we,this}setServiceProps(we){return this.serviceProps=we,this}setInstanceCreatedCallback(we){return this.onInstanceCreated=we,this}}const Ce="[DEFAULT]";class Me{constructor(we,_e){this.name=we,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(we){const _e=this.normalizeInstanceIdentifier(we);if(!this.instancesDeferred.has(_e)){const Ue=new U.BH;if(this.instancesDeferred.set(_e,Ue),this.isInitialized(_e)||this.shouldAutoInitialize())try{const Nt=this.getOrInitializeService({instanceIdentifier:_e});Nt&&Ue.resolve(Nt)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(we){var _e;const Ue=this.normalizeInstanceIdentifier(we?.identifier),Nt=null!==(_e=we?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(Ue)&&!this.shouldAutoInitialize()){if(Nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ue})}catch(mt){if(Nt)return null;throw mt}}getComponent(){return this.component}setComponent(we){if(we.name!==this.name)throw Error(`Mismatching Component ${we.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=we,this.shouldAutoInitialize()){if(function Ge(Ze){return"EAGER"===Ze.instantiationMode}(we))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[_e,Ue]of this.instancesDeferred.entries()){const Nt=this.normalizeInstanceIdentifier(_e);try{const mt=this.getOrInitializeService({instanceIdentifier:Nt});Ue.resolve(mt)}catch{}}}}clearInstance(we=Ce){this.instancesDeferred.delete(we),this.instancesOptions.delete(we),this.instances.delete(we)}delete(){var we=this;return(0,h.Z)(function*(){const _e=Array.from(we.instances.values());yield Promise.all([..._e.filter(Ue=>"INTERNAL"in Ue).map(Ue=>Ue.INTERNAL.delete()),..._e.filter(Ue=>"_delete"in Ue).map(Ue=>Ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(we=Ce){return this.instances.has(we)}getOptions(we=Ce){return this.instancesOptions.get(we)||{}}initialize(we={}){const{options:_e={}}=we,Ue=this.normalizeInstanceIdentifier(we.instanceIdentifier);if(this.isInitialized(Ue))throw Error(`${this.name}(${Ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Nt=this.getOrInitializeService({instanceIdentifier:Ue,options:_e});for(const[mt,lt]of this.instancesDeferred.entries())Ue===this.normalizeInstanceIdentifier(mt)&&lt.resolve(Nt);return Nt}onInit(we,_e){var Ue;const Nt=this.normalizeInstanceIdentifier(_e),mt=null!==(Ue=this.onInitCallbacks.get(Nt))&&void 0!==Ue?Ue:new Set;mt.add(we),this.onInitCallbacks.set(Nt,mt);const lt=this.instances.get(Nt);return lt&&we(lt,Nt),()=>{mt.delete(we)}}invokeOnInitCallbacks(we,_e){const Ue=this.onInitCallbacks.get(_e);if(Ue)for(const Nt of Ue)try{Nt(we,_e)}catch{}}getOrInitializeService({instanceIdentifier:we,options:_e={}}){let Ue=this.instances.get(we);if(!Ue&&this.component&&(Ue=this.component.instanceFactory(this.container,{instanceIdentifier:(Ze=we,Ze===Ce?void 0:Ze),options:_e}),this.instances.set(we,Ue),this.instancesOptions.set(we,_e),this.invokeOnInitCallbacks(Ue,we),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,we,Ue)}catch{}var Ze;return Ue||null}normalizeInstanceIdentifier(we=Ce){return this.component?this.component.multipleInstances?we:Ce:we}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(we){this.name=we,this.providers=new Map}addComponent(we){const _e=this.getProvider(we.name);if(_e.isComponentSet())throw new Error(`Component ${we.name} has already been registered with ${this.name}`);_e.setComponent(we)}addOrOverwriteComponent(we){this.getProvider(we.name).isComponentSet()&&this.providers.delete(we.name),this.addComponent(we)}getProvider(we){if(this.providers.has(we))return this.providers.get(we);const _e=new Me(we,this);return this.providers.set(we,_e),_e}getProviders(){return Array.from(this.providers.values())}}},1877:(cn,dt,L)=>{L.d(dt,{Am:()=>Ze,Ub:()=>Pe,Yd:()=>Ge,in:()=>U});const h=[];var U=(()=>{return(we=U||(U={}))[we.DEBUG=0]="DEBUG",we[we.VERBOSE=1]="VERBOSE",we[we.INFO=2]="INFO",we[we.WARN=3]="WARN",we[we.ERROR=4]="ERROR",we[we.SILENT=5]="SILENT",U;var we})();const ee={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Ce=U.INFO,Me={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Oe=(we,_e,...Ue)=>{if(_e<we.logLevel)return;const Nt=(new Date).toISOString(),mt=Me[_e];if(!mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[mt](`[${Nt}]  ${we.name}:`,...Ue)};class Ge{constructor(_e){this.name=_e,this._logLevel=Ce,this._logHandler=Oe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in U))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?ee[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,..._e),this._logHandler(this,U.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,..._e),this._logHandler(this,U.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,U.INFO,..._e),this._logHandler(this,U.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,U.WARN,..._e),this._logHandler(this,U.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,..._e),this._logHandler(this,U.ERROR,..._e)}}function Pe(we){h.forEach(_e=>{_e.setLogLevel(we)})}function Ze(we,_e){for(const Ue of h){let Nt=null;_e&&_e.level&&(Nt=ee[_e.level]),Ue.userLogHandler=null===we?null:(mt,lt,...xt)=>{const yt=xt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");lt>=(Nt??mt.logLevel)&&we({level:U[lt].toLowerCase(),message:yt,args:xt,type:mt.name})}}}},4541:(cn,dt,L)=>{L.d(dt,{_A:()=>xl,IJ:()=>kd,jF:()=>Tu,ZS:()=>Ci});var h=L(4650),U=L(6895),ee=L(9751),Ce=L(515),Me=L(9646),Oe=L(7579),Ge=L(8421),Pe=L(5577),Ze=L(1144),we=L(576),_e=L(3268);const Ue=["addListener","removeListener"],Nt=["addEventListener","removeEventListener"],mt=["on","off"];function lt(m,w,p,C){if((0,we.m)(p)&&(C=p,p=void 0),C)return lt(m,w,p).pipe((0,_e.Z)(C));const[k,J]=function je(m){return(0,we.m)(m.addEventListener)&&(0,we.m)(m.removeEventListener)}(m)?Nt.map(Re=>rt=>m[Re](w,rt,p)):function yt(m){return(0,we.m)(m.addListener)&&(0,we.m)(m.removeListener)}(m)?Ue.map(xt(m,w)):function ct(m){return(0,we.m)(m.on)&&(0,we.m)(m.off)}(m)?mt.map(xt(m,w)):[];if(!k&&(0,Ze.z)(m))return(0,Pe.z)(Re=>lt(Re,w,p))((0,Ge.Xf)(m));if(!k)throw new TypeError("Invalid event target");return new ee.y(Re=>{const rt=(...it)=>Re.next(1<it.length?it:it[0]);return k(rt),()=>J(rt)})}function xt(m,w){return p=>C=>m[p](w,C)}var Ht=L(4986),gt=L(3532);const{isArray:jt}=Array;function nt(m){return 1===m.length&&jt(m[0])?m[0]:m}var Ve=L(5403);L(1135),L(9841);var tt=L(5032);new ee.y(tt.Z);var An=L(3269);function Mt(...m){const w=(0,An.jO)(m),p=nt(m);return p.length?new ee.y(C=>{let k=p.map(()=>[]),J=p.map(()=>!1);C.add(()=>{k=J=null});for(let Re=0;!C.closed&&Re<p.length;Re++)(0,Ge.Xf)(p[Re]).subscribe((0,Ve.x)(C,rt=>{if(k[Re].push(rt),k.every(it=>it.length)){const it=k.map(Lt=>Lt.shift());C.next(w?w(...it):it),k.some((Lt,$t)=>!Lt.length&&J[$t])&&C.complete()}},()=>{J[Re]=!0,!k[Re].length&&C.complete()}));return()=>{k=J=null}}):Ce.E}var tn=L(7272),ie=L(4482);function At(m){return(0,ie.e)((w,p)=>{(0,Ge.Xf)(m).subscribe((0,Ve.x)(p,()=>p.complete(),tt.Z)),!p.closed&&w.subscribe(p)})}var We=L(9300),Ye=L(5698),Be=L(4004),an=(L(8675),L(1884),L(3900)),Dr=L(8505),jn=L(1365);L(9718);var Tr=L(4006);Math,Math,Math;const qo=["*"],_t=["dialog"];function Zt(m){return"string"==typeof m}function bo(m){return null!=m}function ka(m){return(m||document.body).getBoundingClientRect()}const _r={animation:!0,transitionTimerDelayMs:5},da=()=>{},{transitionTimerDelayMs:Fu}=_r,Qi=new Map,Mn=(m,w,p,C)=>{let k=C.context||{};const J=Qi.get(w);if(J)switch(C.runningTransition){case"continue":return Ce.E;case"stop":m.run(()=>J.transition$.complete()),k=Object.assign(J.context,k),Qi.delete(w)}const Re=p(w,C.animation,k)||da;if(!C.animation||"none"===window.getComputedStyle(w).transitionProperty)return m.run(()=>Re()),(0,Me.of)(void 0).pipe(function Qa(m){return w=>new ee.y(p=>w.subscribe({next:Re=>m.run(()=>p.next(Re)),error:Re=>m.run(()=>p.error(Re)),complete:()=>m.run(()=>p.complete())}))}(m));const rt=new Oe.x,it=new Oe.x,Lt=rt.pipe(function pe(...m){return w=>(0,tn.z)(w,(0,Me.of)(...m))}(!0));Qi.set(w,{transition$:rt,complete:()=>{it.next(),it.complete()},context:k});const $t=function El(m){const{transitionDelay:w,transitionDuration:p}=window.getComputedStyle(m);return 1e3*(parseFloat(w)+parseFloat(p))}(w);return m.runOutsideAngular(()=>{const Un=lt(w,"transitionend").pipe(At(Lt),(0,We.h)(({target:nr})=>nr===w));(function bt(...m){return 1===(m=nt(m)).length?(0,Ge.Xf)(m[0]):new ee.y(function Se(m){return w=>{let p=[];for(let C=0;p&&!w.closed&&C<m.length;C++)p.push((0,Ge.Xf)(m[C]).subscribe((0,Ve.x)(w,k=>{if(p){for(let J=0;J<p.length;J++)J!==C&&p[J].unsubscribe();p=null}w.next(k)})))}}(m))})(function ze(m=0,w,p=Ht.P){let C=-1;return null!=w&&((0,gt.K)(w)?p=w:C=w),new ee.y(k=>{let J=function qe(m){return m instanceof Date&&!isNaN(m)}(m)?+m-p.now():m;J<0&&(J=0);let Re=0;return p.schedule(function(){k.closed||(k.next(Re++),0<=C?this.schedule(void 0,C):k.complete())},J)})}($t+Fu).pipe(At(Lt)),Un,it).pipe(At(Lt)).subscribe(()=>{Qi.delete(w),m.run(()=>{Re(),rt.next(),rt.complete()})})}),rt.asObservable()};let Qr=(()=>{class m{constructor(){this.animation=_r.animation}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),ha=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),xl=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),A=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),B=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({}),m})();var se=(()=>{return(m=se||(se={}))[m.Tab=9]="Tab",m[m.Enter=13]="Enter",m[m.Escape=27]="Escape",m[m.Space=32]="Space",m[m.PageUp=33]="PageUp",m[m.PageDown=34]="PageDown",m[m.End=35]="End",m[m.Home=36]="Home",m[m.ArrowLeft=37]="ArrowLeft",m[m.ArrowUp=38]="ArrowUp",m[m.ArrowRight=39]="ArrowRight",m[m.ArrowDown=40]="ArrowDown",se;var m})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const xr=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ds(m){const w=Array.from(m.querySelectorAll(xr)).filter(p=>-1!==p.tabIndex);return[w[0],w[w.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Tc=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez,Tr.u5]}),m})(),ep=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({}),m})();class Oo{constructor(w,p,C){this.nodes=w,this.viewRef=p,this.componentRef=C}}let td=(()=>{class m{constructor(p,C){this._el=p,this._zone=C}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ye.q)(1)).subscribe(()=>{Mn(this._zone,this._el.nativeElement,(p,C)=>{C&&ka(p),p.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Mn(this._zone,this._el.nativeElement,({classList:p})=>p.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return m.\u0275fac=function(p){return new(p||m)(h.Y36(h.SBq),h.Y36(h.R0b))},m.\u0275cmp=h.Xpm({type:m,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(p,C){2&p&&(h.Tol("modal-backdrop"+(C.backdropClass?" "+C.backdropClass:"")),h.ekj("show",!C.animation)("fade",C.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(p,C){},encapsulation:2}),m})();class Wu{close(w){}dismiss(w){}}class Zl{constructor(w,p,C,k){this._windowCmptRef=w,this._contentRef=p,this._backdropCmptRef=C,this._beforeDismiss=k,this._closed=new Oe.x,this._dismissed=new Oe.x,this._hidden=new Oe.x,w.instance.dismissEvent.subscribe(J=>{this.dismiss(J)}),this.result=new Promise((J,Re)=>{this._resolve=J,this._reject=Re}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(At(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(At(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(w){this._windowCmptRef&&(this._closed.next(w),this._resolve(w),this._removeModalElements())}_dismiss(w){this._dismissed.next(w),this._reject(w),this._removeModalElements()}dismiss(w){if(this._windowCmptRef)if(this._beforeDismiss){const p=this._beforeDismiss();!function bl(m){return m&&m.then}(p)?!1!==p&&this._dismiss(w):p.then(C=>{!1!==C&&this._dismiss(w)},()=>{})}else this._dismiss(w)}_removeModalElements(){const w=this._windowCmptRef.instance.hide(),p=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Me.of)(void 0);w.subscribe(()=>{const{nativeElement:C}=this._windowCmptRef.location;C.parentNode.removeChild(C),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),p.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:C}=this._backdropCmptRef.location;C.parentNode.removeChild(C),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Mt(w,p).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ic=(()=>{return(m=Ic||(Ic={}))[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",Ic;var m})();let nd=(()=>{class m{constructor(p,C,k){this._document=p,this._elRef=C,this._zone=k,this._closed$=new Oe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new Oe.x,this.hidden=new Oe.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Zt(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(p){this.dismissEvent.emit(p)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ye.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:p}=this._elRef,C={animation:this.animation,runningTransition:"stop"},Re=Mt(Mn(this._zone,p,()=>p.classList.remove("show"),C),Mn(this._zone,this._dialogEl.nativeElement,()=>{},C));return Re.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Re}_show(){const p={animation:this.animation,runningTransition:"continue"};Mt(Mn(this._zone,this._elRef.nativeElement,(J,Re)=>{Re&&ka(J),J.classList.add("show")},p),Mn(this._zone,this._dialogEl.nativeElement,()=>{},p)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:p}=this._elRef;this._zone.runOutsideAngular(()=>{lt(p,"keydown").pipe(At(this._closed$),(0,We.h)(k=>k.which===se.Escape)).subscribe(k=>{this.keyboard?requestAnimationFrame(()=>{k.defaultPrevented||this._zone.run(()=>this.dismiss(Ic.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let C=!1;lt(this._dialogEl.nativeElement,"mousedown").pipe(At(this._closed$),(0,Dr.b)(()=>C=!1),(0,an.w)(()=>lt(p,"mouseup").pipe(At(this._closed$),(0,Ye.q)(1))),(0,We.h)(({target:k})=>p===k)).subscribe(()=>{C=!0}),lt(p,"click").pipe(At(this._closed$)).subscribe(({target:k})=>{p===k&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!C&&this._zone.run(()=>this.dismiss(Ic.BACKDROP_CLICK))),C=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:p}=this._elRef;if(!p.contains(document.activeElement)){const C=p.querySelector("[ngbAutofocus]"),k=ds(p)[0];(C||k||p).focus()}}_restoreFocus(){const p=this._document.body,C=this._elWithFocus;let k;k=C&&C.focus&&p.contains(C)?C:p,this._zone.runOutsideAngular(()=>{setTimeout(()=>k.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Mn(this._zone,this._elRef.nativeElement,({classList:p})=>(p.add("modal-static"),()=>p.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return m.\u0275fac=function(p){return new(p||m)(h.Y36(U.K0),h.Y36(h.SBq),h.Y36(h.R0b))},m.\u0275cmp=h.Xpm({type:m,selectors:[["ngb-modal-window"]],viewQuery:function(p,C){if(1&p&&h.Gf(_t,7),2&p){let k;h.iGM(k=h.CRH())&&(C._dialogEl=k.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(p,C){2&p&&(h.uIk("aria-modal",!0)("aria-labelledby",C.ariaLabelledBy)("aria-describedby",C.ariaDescribedBy),h.Tol("modal d-block"+(C.windowClass?" "+C.windowClass:"")),h.ekj("fade",C.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:qo,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(p,C){1&p&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&p&&h.Tol("modal-dialog"+(C.size?" modal-"+C.size:"")+(C.centered?" modal-dialog-centered":"")+C.fullscreenClass+(C.scrollable?" modal-dialog-scrollable":"")+(C.modalDialogClass?" "+C.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),m})(),mg=(()=>{class m{constructor(p){this._document=p}hide(){const p=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),C=this._document.body,k=C.style,{overflow:J,paddingRight:Re}=k;if(p>0){const rt=parseFloat(window.getComputedStyle(C).paddingRight);k.paddingRight=`${rt+p}px`}return k.overflow="hidden",()=>{p>0&&(k.paddingRight=Re),k.overflow=J}}}return m.\u0275fac=function(p){return new(p||m)(h.LFG(U.K0))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Ha=(()=>{class m{constructor(p,C,k,J,Re,rt){this._applicationRef=p,this._injector=C,this._document=k,this._scrollBar=J,this._rendererFactory=Re,this._ngZone=rt,this._activeWindowCmptHasChanged=new Oe.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const it=this._windowCmpts[this._windowCmpts.length-1];((m,w,p,C=!1)=>{this._ngZone.runOutsideAngular(()=>{const k=lt(w,"focusin").pipe(At(p),(0,Be.U)(J=>J.target));lt(w,"keydown").pipe(At(p),(0,We.h)(J=>J.which===se.Tab),(0,jn.M)(k)).subscribe(([J,Re])=>{const[rt,it]=ds(w);(Re===rt||Re===w)&&J.shiftKey&&(it.focus(),J.preventDefault()),Re===it&&!J.shiftKey&&(rt.focus(),J.preventDefault())}),C&&lt(w,"click").pipe(At(p),(0,jn.M)(k),(0,Be.U)(J=>J[1])).subscribe(J=>J.focus())})})(0,it.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(it.location.nativeElement)}})}_restoreScrollBar(){const p=this._scrollBarRestoreFn;p&&(this._scrollBarRestoreFn=null,p())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(p,C,k){const J=k.container instanceof HTMLElement?k.container:bo(k.container)?this._document.querySelector(k.container):this._document.body,Re=this._rendererFactory.createRenderer(null,null);if(!J)throw new Error(`The specified modal container "${k.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const rt=new Wu,it=this._getContentRef(k.injector||p,C,rt,k);let Lt=!1!==k.backdrop?this._attachBackdrop(J):void 0,$t=this._attachWindowComponent(J,it.nodes),Un=new Zl($t,it,Lt,k.beforeDismiss);return this._registerModalRef(Un),this._registerWindowCmpt($t),Un.hidden.pipe((0,Ye.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Re.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),rt.close=Hn=>{Un.close(Hn)},rt.dismiss=Hn=>{Un.dismiss(Hn)},this._applyWindowOptions($t.instance,k),1===this._modalRefs.length&&Re.addClass(this._document.body,"modal-open"),Lt&&Lt.instance&&(this._applyBackdropOptions(Lt.instance,k),Lt.changeDetectorRef.detectChanges()),$t.changeDetectorRef.detectChanges(),Un}get activeInstances(){return this._activeInstances}dismissAll(p){this._modalRefs.forEach(C=>C.dismiss(p))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(p){let C=(0,h.LMc)(td,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(C.hostView),p.appendChild(C.location.nativeElement),C}_attachWindowComponent(p,C){let k=(0,h.LMc)(nd,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:C});return this._applicationRef.attachView(k.hostView),p.appendChild(k.location.nativeElement),k}_applyWindowOptions(p,C){this._windowAttributes.forEach(k=>{bo(C[k])&&(p[k]=C[k])})}_applyBackdropOptions(p,C){this._backdropAttributes.forEach(k=>{bo(C[k])&&(p[k]=C[k])})}_getContentRef(p,C,k,J){return C?C instanceof h.Rgc?this._createFromTemplateRef(C,k):Zt(C)?this._createFromString(C):this._createFromComponent(p,C,k,J):new Oo([])}_createFromTemplateRef(p,C){const J=p.createEmbeddedView({$implicit:C,close(Re){C.close(Re)},dismiss(Re){C.dismiss(Re)}});return this._applicationRef.attachView(J),new Oo([J.rootNodes],J)}_createFromString(p){const C=this._document.createTextNode(`${p}`);return new Oo([[C]])}_createFromComponent(p,C,k,J){const Re=h.zs3.create({providers:[{provide:Wu,useValue:k}],parent:p}),rt=(0,h.LMc)(C,{environmentInjector:this._applicationRef.injector,elementInjector:Re}),it=rt.location.nativeElement;return J.scrollable&&it.classList.add("component-host-scrollable"),this._applicationRef.attachView(rt.hostView),new Oo([[it]],rt.hostView,rt)}_setAriaHidden(p){const C=p.parentElement;C&&p!==this._document.body&&(Array.from(C.children).forEach(k=>{k!==p&&"SCRIPT"!==k.nodeName&&(this._ariaHiddenValues.set(k,k.getAttribute("aria-hidden")),k.setAttribute("aria-hidden","true"))}),this._setAriaHidden(C))}_revertAriaHidden(){this._ariaHiddenValues.forEach((p,C)=>{p?C.setAttribute("aria-hidden",p):C.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(p){const C=()=>{const k=this._modalRefs.indexOf(p);k>-1&&(this._modalRefs.splice(k,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(p),this._activeInstances.emit(this._modalRefs),p.result.then(C,C)}_registerWindowCmpt(p){this._windowCmpts.push(p),this._activeWindowCmptHasChanged.next(),p.onDestroy(()=>{const C=this._windowCmpts.indexOf(p);C>-1&&(this._windowCmpts.splice(C,1),this._activeWindowCmptHasChanged.next())})}}return m.\u0275fac=function(p){return new(p||m)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(U.K0),h.LFG(mg),h.LFG(h.FYo),h.LFG(h.R0b))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Jr=(()=>{class m{constructor(p){this._ngbConfig=p,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(p){this._animation=p}}return m.\u0275fac=function(p){return new(p||m)(h.LFG(Qr))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),zu=(()=>{class m{constructor(p,C,k){this._injector=p,this._modalStack=C,this._config=k}open(p,C={}){const k={...this._config,animation:this._config.animation,...C};return this._modalStack.open(this._injector,p,k)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(p){this._modalStack.dismissAll(p)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return m.\u0275fac=function(p){return new(p||m)(h.LFG(h.zs3),h.LFG(Ha),h.LFG(Jr))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Ku=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[zu]}),m})(),np=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),Tu=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),op=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),ld=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),ud=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),xd=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),Sm=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),Ef=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({}),m})();new h.OlP("live announcer delay",{providedIn:"root",factory:function cp(){return 100}});let Ci=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[U.ez]}),m})(),Jl=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({}),m})();const Pd=[ha,xl,A,B,Tc,ep,Ku,np,Jl,Tu,op,ld,ud,xd,Sm,Ef,Ci];let kd=(()=>{class m{}return m.\u0275fac=function(p){return new(p||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({imports:[Pd,ha,xl,A,B,Tc,ep,Ku,np,Jl,Tu,op,ld,ud,xd,Sm,Ef,Ci]}),m})()},6188:(cn,dt,L)=>{L.d(dt,{Zw:()=>mt,aw:()=>An,X$:()=>Kt,sK:()=>tt});var h=L(4650),U=L(9646),ee=L(9751),Ce=L(576);function Me(Mt){return!!Mt&&(Mt instanceof ee.y||(0,Ce.m)(Mt.lift)&&(0,Ce.m)(Mt.subscribe))}var Oe=L(4128),Ge=L(7272),Pe=L(9770),Ze=L(5698),we=L(3151),_e=L(4004),Ue=L(4351),Nt=L(3900);class mt{}let lt=(()=>{class Mt extends mt{getTranslation(pe){return(0,U.of)({})}}return Mt.\u0275fac=function(){let tn;return function(ie){return(tn||(tn=h.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class xt{}let yt=(()=>{class Mt{handle(pe){return pe.key}}return Mt.\u0275fac=function(pe){return new(pe||Mt)},Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();function ct(Mt,tn){if(Mt===tn)return!0;if(null===Mt||null===tn)return!1;if(Mt!=Mt&&tn!=tn)return!0;let At,We,Ye,pe=typeof Mt;if(pe==typeof tn&&"object"==pe){if(!Array.isArray(Mt)){if(Array.isArray(tn))return!1;for(We in Ye=Object.create(null),Mt){if(!ct(Mt[We],tn[We]))return!1;Ye[We]=!0}for(We in tn)if(!(We in Ye)&&typeof tn[We]<"u")return!1;return!0}if(!Array.isArray(tn))return!1;if((At=Mt.length)==tn.length){for(We=0;We<At;We++)if(!ct(Mt[We],tn[We]))return!1;return!0}}return!1}function je(Mt){return typeof Mt<"u"&&null!==Mt}function Ht(Mt){return Mt&&"object"==typeof Mt&&!Array.isArray(Mt)}function gt(Mt,tn){let pe=Object.assign({},Mt);return Ht(Mt)&&Ht(tn)&&Object.keys(tn).forEach(ie=>{Ht(tn[ie])?ie in Mt?pe[ie]=gt(Mt[ie],tn[ie]):Object.assign(pe,{[ie]:tn[ie]}):Object.assign(pe,{[ie]:tn[ie]})}),pe}class qe{}let ze=(()=>{class Mt extends qe{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(pe,ie){let At;return At="string"==typeof pe?this.interpolateString(pe,ie):"function"==typeof pe?this.interpolateFunction(pe,ie):pe,At}getValue(pe,ie){let At="string"==typeof ie?ie.split("."):[ie];ie="";do{ie+=At.shift(),!je(pe)||!je(pe[ie])||"object"!=typeof pe[ie]&&At.length?At.length?ie+=".":pe=void 0:(pe=pe[ie],ie="")}while(At.length);return pe}interpolateFunction(pe,ie){return pe(ie)}interpolateString(pe,ie){return ie?pe.replace(this.templateMatcher,(At,We)=>{let Ye=this.getValue(ie,We);return je(Ye)?Ye:At}):pe}}return Mt.\u0275fac=function(){let tn;return function(ie){return(tn||(tn=h.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class jt{}let nt=(()=>{class Mt extends jt{compile(pe,ie){return pe}compileTranslations(pe,ie){return pe}}return Mt.\u0275fac=function(){let tn;return function(ie){return(tn||(tn=h.n5z(Mt)))(ie||Mt)}}(),Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})();class Ve{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new h.vpe,this.onLangChange=new h.vpe,this.onDefaultLangChange=new h.vpe}}const bt=new h.OlP("USE_STORE"),Se=new h.OlP("USE_DEFAULT_LANG"),$e=new h.OlP("DEFAULT_LANGUAGE"),wt=new h.OlP("USE_EXTEND");let tt=(()=>{class Mt{constructor(pe,ie,At,We,Ye,Be=!0,ot=!1,en=!1,an){this.store=pe,this.currentLoader=ie,this.compiler=At,this.parser=We,this.missingTranslationHandler=Ye,this.useDefaultLang=Be,this.isolate=ot,this.extend=en,this.pending=!1,this._onTranslationChange=new h.vpe,this._onLangChange=new h.vpe,this._onDefaultLangChange=new h.vpe,this._langs=[],this._translations={},this._translationRequests={},an&&this.setDefaultLang(an)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(pe){this.isolate?this._defaultLang=pe:this.store.defaultLang=pe}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(pe){this.isolate?this._currentLang=pe:this.store.currentLang=pe}get langs(){return this.isolate?this._langs:this.store.langs}set langs(pe){this.isolate?this._langs=pe:this.store.langs=pe}get translations(){return this.isolate?this._translations:this.store.translations}set translations(pe){this.isolate?this._translations=pe:this.store.translations=pe}setDefaultLang(pe){if(pe===this.defaultLang)return;let ie=this.retrieveTranslations(pe);typeof ie<"u"?(null==this.defaultLang&&(this.defaultLang=pe),ie.pipe((0,Ze.q)(1)).subscribe(At=>{this.changeDefaultLang(pe)})):this.changeDefaultLang(pe)}getDefaultLang(){return this.defaultLang}use(pe){if(pe===this.currentLang)return(0,U.of)(this.translations[pe]);let ie=this.retrieveTranslations(pe);return typeof ie<"u"?(this.currentLang||(this.currentLang=pe),ie.pipe((0,Ze.q)(1)).subscribe(At=>{this.changeLang(pe)}),ie):(this.changeLang(pe),(0,U.of)(this.translations[pe]))}retrieveTranslations(pe){let ie;return(typeof this.translations[pe]>"u"||this.extend)&&(this._translationRequests[pe]=this._translationRequests[pe]||this.getTranslation(pe),ie=this._translationRequests[pe]),ie}getTranslation(pe){this.pending=!0;const ie=this.currentLoader.getTranslation(pe).pipe((0,we.d)(1),(0,Ze.q)(1));return this.loadingTranslations=ie.pipe((0,_e.U)(At=>this.compiler.compileTranslations(At,pe)),(0,we.d)(1),(0,Ze.q)(1)),this.loadingTranslations.subscribe({next:At=>{this.translations[pe]=this.extend&&this.translations[pe]?{...At,...this.translations[pe]}:At,this.updateLangs(),this.pending=!1},error:At=>{this.pending=!1}}),ie}setTranslation(pe,ie,At=!1){ie=this.compiler.compileTranslations(ie,pe),this.translations[pe]=(At||this.extend)&&this.translations[pe]?gt(this.translations[pe],ie):ie,this.updateLangs(),this.onTranslationChange.emit({lang:pe,translations:this.translations[pe]})}getLangs(){return this.langs}addLangs(pe){pe.forEach(ie=>{-1===this.langs.indexOf(ie)&&this.langs.push(ie)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(pe,ie,At){let We;if(ie instanceof Array){let Ye={},Be=!1;for(let ot of ie)Ye[ot]=this.getParsedResult(pe,ot,At),Me(Ye[ot])&&(Be=!0);if(Be){const ot=ie.map(en=>Me(Ye[en])?Ye[en]:(0,U.of)(Ye[en]));return(0,Oe.D)(ot).pipe((0,_e.U)(en=>{let an={};return en.forEach((Dr,jn)=>{an[ie[jn]]=Dr}),an}))}return Ye}if(pe&&(We=this.parser.interpolate(this.parser.getValue(pe,ie),At)),typeof We>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(We=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ie),At)),typeof We>"u"){let Ye={key:ie,translateService:this};typeof At<"u"&&(Ye.interpolateParams=At),We=this.missingTranslationHandler.handle(Ye)}return typeof We<"u"?We:ie}get(pe,ie){if(!je(pe)||!pe.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,Ue.b)(At=>Me(At=this.getParsedResult(At,pe,ie))?At:(0,U.of)(At)));{let At=this.getParsedResult(this.translations[this.currentLang],pe,ie);return Me(At)?At:(0,U.of)(At)}}getStreamOnTranslationChange(pe,ie){if(!je(pe)||!pe.length)throw new Error('Parameter "key" required');return(0,Ge.z)((0,Pe.P)(()=>this.get(pe,ie)),this.onTranslationChange.pipe((0,Nt.w)(At=>{const We=this.getParsedResult(At.translations,pe,ie);return"function"==typeof We.subscribe?We:(0,U.of)(We)})))}stream(pe,ie){if(!je(pe)||!pe.length)throw new Error('Parameter "key" required');return(0,Ge.z)((0,Pe.P)(()=>this.get(pe,ie)),this.onLangChange.pipe((0,Nt.w)(At=>{const We=this.getParsedResult(At.translations,pe,ie);return Me(We)?We:(0,U.of)(We)})))}instant(pe,ie){if(!je(pe)||!pe.length)throw new Error('Parameter "key" required');let At=this.getParsedResult(this.translations[this.currentLang],pe,ie);if(Me(At)){if(pe instanceof Array){let We={};return pe.forEach((Ye,Be)=>{We[pe[Be]]=pe[Be]}),We}return pe}return At}set(pe,ie,At=this.currentLang){this.translations[At][pe]=this.compiler.compile(ie,At),this.updateLangs(),this.onTranslationChange.emit({lang:At,translations:this.translations[At]})}changeLang(pe){this.currentLang=pe,this.onLangChange.emit({lang:pe,translations:this.translations[pe]}),null==this.defaultLang&&this.changeDefaultLang(pe)}changeDefaultLang(pe){this.defaultLang=pe,this.onDefaultLangChange.emit({lang:pe,translations:this.translations[pe]})}reloadLang(pe){return this.resetLang(pe),this.getTranslation(pe)}resetLang(pe){this._translationRequests[pe]=void 0,this.translations[pe]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let pe=window.navigator.languages?window.navigator.languages[0]:null;return pe=pe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof pe>"u"?void 0:(-1!==pe.indexOf("-")&&(pe=pe.split("-")[0]),-1!==pe.indexOf("_")&&(pe=pe.split("_")[0]),pe)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let pe=window.navigator.languages?window.navigator.languages[0]:null;return pe=pe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,pe}}return Mt.\u0275fac=function(pe){return new(pe||Mt)(h.LFG(Ve),h.LFG(mt),h.LFG(jt),h.LFG(qe),h.LFG(xt),h.LFG(Se),h.LFG(bt),h.LFG(wt),h.LFG($e))},Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})(),Kt=(()=>{class Mt{constructor(pe,ie){this.translate=pe,this._ref=ie,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(pe,ie,At){let We=Ye=>{this.value=void 0!==Ye?Ye:pe,this.lastKey=pe,this._ref.markForCheck()};if(At){let Ye=this.translate.getParsedResult(At,pe,ie);Me(Ye.subscribe)?Ye.subscribe(We):We(Ye)}this.translate.get(pe,ie).subscribe(We)}transform(pe,...ie){if(!pe||!pe.length)return pe;if(ct(pe,this.lastKey)&&ct(ie,this.lastParams))return this.value;let At;if(je(ie[0])&&ie.length)if("string"==typeof ie[0]&&ie[0].length){let We=ie[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{At=JSON.parse(We)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ie[0]}`)}}else"object"==typeof ie[0]&&!Array.isArray(ie[0])&&(At=ie[0]);return this.lastKey=pe,this.lastParams=ie,this.updateValue(pe,At),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(We=>{this.lastKey&&We.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(pe,At,We.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(We=>{this.lastKey&&(this.lastKey=null,this.updateValue(pe,At,We.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(pe,At))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return Mt.\u0275fac=function(pe){return new(pe||Mt)(h.Y36(tt,16),h.Y36(h.sBO,16))},Mt.\u0275pipe=h.Yjl({name:"translate",type:Mt,pure:!1}),Mt.\u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac}),Mt})(),An=(()=>{class Mt{static forRoot(pe={}){return{ngModule:Mt,providers:[pe.loader||{provide:mt,useClass:lt},pe.compiler||{provide:jt,useClass:nt},pe.parser||{provide:qe,useClass:ze},pe.missingTranslationHandler||{provide:xt,useClass:yt},Ve,{provide:bt,useValue:pe.isolate},{provide:Se,useValue:pe.useDefaultLang},{provide:wt,useValue:pe.extend},{provide:$e,useValue:pe.defaultLanguage},tt]}}static forChild(pe={}){return{ngModule:Mt,providers:[pe.loader||{provide:mt,useClass:lt},pe.compiler||{provide:jt,useClass:nt},pe.parser||{provide:qe,useClass:ze},pe.missingTranslationHandler||{provide:xt,useClass:yt},{provide:bt,useValue:pe.isolate},{provide:Se,useValue:pe.useDefaultLang},{provide:wt,useValue:pe.extend},{provide:$e,useValue:pe.defaultLanguage},tt]}}}return Mt.\u0275fac=function(pe){return new(pe||Mt)},Mt.\u0275mod=h.oAB({type:Mt}),Mt.\u0275inj=h.cJS({}),Mt})()},259:(cn,dt,L)=>{L.d(dt,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=L(9681);(0,h.registerVersion)("firebase","9.15.0","app")},9260:(cn,dt,L)=>{L.d(dt,{Z:()=>h.Z});var h=L(3942);h.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(cn,dt,L)=>{L.r(dt);var h=L(5861),U=L(3942),ee=L(552),Ce=L(2090),Ge=(L(9681),L(1877),L(4859));function Pe(){return window}function _e(){return(_e=(0,h.Z)(function*(De,ae,be){var ht;const{BuildInfo:Yt}=Pe();(0,ee.ap)(ae.sessionId,"AuthEvent did not contain a session ID");const pn=yield ct(ae.sessionId),Rn={};return(0,ee.aq)()?Rn.ibi=Yt.packageName:(0,ee.ar)()?Rn.apn=Yt.packageName:(0,ee.as)(De,"operation-not-supported-in-this-environment"),Yt.displayName&&(Rn.appDisplayName=Yt.displayName),Rn.sessionId=pn,(0,ee.at)(De,be,ae.type,void 0,null!==(ht=ae.eventId)&&void 0!==ht?ht:void 0,Rn)})).apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(De){const{BuildInfo:ae}=Pe(),be={};(0,ee.aq)()?be.iosBundleId=ae.packageName:(0,ee.ar)()?be.androidPackageName=ae.packageName:(0,ee.as)(De,"operation-not-supported-in-this-environment"),yield(0,ee.au)(De,be)})).apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(De,ae,be){const{cordova:ht}=Pe();let Yt=()=>{};try{yield new Promise((pn,Rn)=>{let Ee=null;function ve(){var ft;pn();const Qt=null===(ft=ht.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Qt&&Qt(),"function"==typeof be?.close&&be.close()}function ge(){Ee||(Ee=window.setTimeout(()=>{Rn((0,ee.aw)(De,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&ge()}ae.addPassiveListener(ve),document.addEventListener("resume",ge,!1),(0,ee.ar)()&&document.addEventListener("visibilitychange",et,!1),Yt=()=>{ae.removePassiveListener(ve),document.removeEventListener("resume",ge,!1),document.removeEventListener("visibilitychange",et,!1),Ee&&window.clearTimeout(Ee)}})}finally{Yt()}})).apply(this,arguments)}function ct(De){return je.apply(this,arguments)}function je(){return(je=(0,h.Z)(function*(De){const ae=Ht(De),be=yield crypto.subtle.digest("SHA-256",ae);return Array.from(new Uint8Array(be)).map(Yt=>Yt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ht(De){if((0,ee.ap)(/[0-9a-zA-Z]+/.test(De),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(De);const ae=new ArrayBuffer(De.length),be=new Uint8Array(ae);for(let ht=0;ht<De.length;ht++)be[ht]=De.charCodeAt(ht);return be}class qe extends ee.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ae=>{this.resolveInialized=ae})}addPassiveListener(ae){this.passiveListeners.add(ae)}removePassiveListener(ae){this.passiveListeners.delete(ae)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ae){return this.resolveInialized(),this.passiveListeners.forEach(be=>be(ae)),super.onEvent(ae)}initialized(){var ae=this;return(0,h.Z)(function*(){yield ae.initPromise})()}}function nt(De){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,h.Z)(function*(De){const ae=yield $e()._get(wt(De));return ae&&(yield $e()._remove(wt(De))),ae})).apply(this,arguments)}function Se(){const De=[],ae="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let be=0;be<20;be++){const ht=Math.floor(Math.random()*ae.length);De.push(ae.charAt(ht))}return De.join("")}function $e(){return(0,ee.az)(ee.b)}function wt(De){return(0,ee.aA)("authEvent",De.config.apiKey,De.name)}function Kt(De){if(!De?.includes("?"))return{};const[ae,...be]=De.split("?");return(0,Ce.zd)(be.join("?"))}function pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.aw)("no-auth-event")}}function Be(){var De;return(null===(De=self?.location)||void 0===De?void 0:De.protocol)||null}function en(De=(0,Ce.z$)()){return!("file:"!==Be()&&"ionic:"!==Be()&&"capacitor:"!==Be()||!De.toLowerCase().match(/iphone|ipad|ipod|android/))}function vr(){try{const De=self.localStorage,ae=ee.aI();if(De)return De.setItem(ae,"1"),De.removeItem(ae),!function gi(De=(0,Ce.z$)()){return function Dr(){return(0,Ce.w1)()&&11===document?.documentMode}()||function jn(De=(0,Ce.z$)()){return/Edge\/\d+/.test(De)}(De)}()||(0,Ce.hl)()}catch{return Sr()&&(0,Ce.hl)()}return!1}function Sr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function ot(){return"http:"===Be()||"https:"===Be()}()||(0,Ce.ru)()||en())&&!function an(){return(0,Ce.b$)()||(0,Ce.UG)()}()&&vr()&&!Sr()}function ir(){return en()&&typeof document<"u"}function hn(){return(hn=(0,h.Z)(function*(){return!!ir()&&new Promise(De=>{const ae=setTimeout(()=>{De(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ae),De(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},Ar=ee.ax,Yr="persistence";function Qn(De){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(De){yield De._initializationPromise;const ae=Ln(),be=ee.aA(Yr,De.config.apiKey,De.name);ae&&ae.setItem(be,De._getPersistence())})).apply(this,arguments)}function Ln(){var De;try{return(null===(De=function br(){return typeof window<"u"?window:null}())||void 0===De?void 0:De.sessionStorage)||null}catch{return null}}const En=ee.ax;class Pn{constructor(){this.browserResolver=ee.az(ee.k),this.cordovaResolver=ee.az(class Mt{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(ae){var be=this;return(0,h.Z)(function*(){const ht=ae._key();let Yt=be.eventManagers.get(ht);return Yt||(Yt=new qe(ae),be.eventManagers.set(ht,Yt),be.attachCallbackListeners(ae,Yt)),Yt})()}_openPopup(ae){(0,ee.as)(ae,"operation-not-supported-in-this-environment")}_openRedirect(ae,be,ht,Yt){var pn=this;return(0,h.Z)(function*(){!function yt(De){var ae,be,ht,Yt,pn,Rn,Ee,ve,ge,et;const ft=Pe();(0,ee.ax)("function"==typeof(null===(ae=ft?.universalLinks)||void 0===ae?void 0:ae.subscribe),De,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.ax)(typeof(null===(be=ft?.BuildInfo)||void 0===be?void 0:be.packageName)<"u",De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.ax)("function"==typeof(null===(pn=null===(Yt=null===(ht=ft?.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Yt?void 0:Yt.browsertab)||void 0===pn?void 0:pn.openUrl),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(ve=null===(Ee=null===(Rn=ft?.cordova)||void 0===Rn?void 0:Rn.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===ve?void 0:ve.isAvailable),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(et=null===(ge=ft?.cordova)||void 0===ge?void 0:ge.InAppBrowser)||void 0===et?void 0:et.open),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ae);const Rn=yield pn._initialize(ae);yield Rn.initialized(),Rn.resetRedirect(),(0,ee.aD)(),yield pn._originValidation(ae);const Ee=function ze(De,ae,be=null){return{type:ae,eventId:be,urlResponse:null,sessionId:Se(),postBody:null,tenantId:De.tenantId,error:(0,ee.aw)(De,"no-auth-event")}}(ae,ht,Yt);yield function jt(De,ae){return $e()._set(wt(De),ae)}(ae,Ee);const ve=yield function we(De,ae,be){return _e.apply(this,arguments)}(ae,Ee,be),ge=yield function mt(De){const{cordova:ae}=Pe();return new Promise(be=>{ae.plugins.browsertab.isAvailable(ht=>{let Yt=null;ht?ae.plugins.browsertab.openUrl(De):Yt=ae.InAppBrowser.open(De,(0,ee.av)()?"_blank":"_system","location=yes"),be(Yt)})})}(ve);return function lt(De,ae,be){return xt.apply(this,arguments)}(ae,Rn,ge)})()}_isIframeWebStorageSupported(ae,be){throw new Error("Method not implemented.")}_originValidation(ae){const be=ae._key();return this.originValidationPromises[be]||(this.originValidationPromises[be]=function Ue(De){return Nt.apply(this,arguments)}(ae)),this.originValidationPromises[be]}attachCallbackListeners(ae,be){const{universalLinks:ht,handleOpenURL:Yt,BuildInfo:pn}=Pe(),Rn=setTimeout((0,h.Z)(function*(){yield nt(ae),be.onEvent(pe())}),500),Ee=function(){var et=(0,h.Z)(function*(ft){clearTimeout(Rn);const Qt=yield nt(ae);let ur=null;Qt&&ft?.url&&(ur=function bt(De,ae){var be,ht;const Yt=function Ut(De){const ae=Kt(De),be=ae.link?decodeURIComponent(ae.link):void 0,ht=Kt(be).link,Yt=ae.deep_link_id?decodeURIComponent(ae.deep_link_id):void 0;return Kt(Yt).link||Yt||ht||be||De}(ae);if(Yt.includes("/__/auth/callback")){const pn=Kt(Yt),Rn=pn.firebaseError?function tt(De){try{return JSON.parse(De)}catch{return null}}(decodeURIComponent(pn.firebaseError)):null,Ee=null===(ht=null===(be=Rn?.code)||void 0===be?void 0:be.split("auth/"))||void 0===ht?void 0:ht[1],ve=Ee?(0,ee.aw)(Ee):null;return ve?{type:De.type,eventId:De.eventId,tenantId:De.tenantId,error:ve,urlResponse:null,sessionId:null,postBody:null}:{type:De.type,eventId:De.eventId,tenantId:De.tenantId,sessionId:De.sessionId,urlResponse:Yt,postBody:null}}return null}(Qt,ft.url)),be.onEvent(ur||pe())});return function(Qt){return et.apply(this,arguments)}}();typeof ht<"u"&&"function"==typeof ht.subscribe&&ht.subscribe(null,Ee);const ve=Yt,ge=`${pn.packageName.toLowerCase()}://`;Pe().handleOpenURL=function(){var et=(0,h.Z)(function*(ft){if(ft.toLowerCase().startsWith(ge)&&Ee({url:ft}),"function"==typeof ve)try{ve(ft)}catch(Qt){console.error(Qt)}});return function(ft){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(ae){var be=this;return(0,h.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._initialize(ae)})()}_openPopup(ae,be,ht,Yt){var pn=this;return(0,h.Z)(function*(){return yield pn.selectUnderlyingResolver(),pn.assertedUnderlyingResolver._openPopup(ae,be,ht,Yt)})()}_openRedirect(ae,be,ht,Yt){var pn=this;return(0,h.Z)(function*(){return yield pn.selectUnderlyingResolver(),pn.assertedUnderlyingResolver._openRedirect(ae,be,ht,Yt)})()}_isIframeWebStorageSupported(ae,be){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ae,be)}_originValidation(ae){return this.assertedUnderlyingResolver._originValidation(ae)}get _shouldInitProactively(){return ir()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return En(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ae=this;return(0,h.Z)(function*(){if(ae.underlyingResolver)return;const be=yield function Tr(){return hn.apply(this,arguments)}();ae.underlyingResolver=be?ae.cordovaResolver:ae.browserResolver})()}}function On(De){return De.unwrap()}function Ii(De){return Ri(De)}function Ri(De){const{_tokenResponse:ae}=De instanceof Ce.ZR?De.customData:De;if(!ae)return null;if(!(De instanceof Ce.ZR)&&"temporaryProof"in ae&&"phoneNumber"in ae)return ee.P.credentialFromResult(De);const be=ae.providerId;if(!be||be===ee.o.PASSWORD)return null;let ht;switch(be){case ee.o.GOOGLE:ht=ee.Q;break;case ee.o.FACEBOOK:ht=ee.N;break;case ee.o.GITHUB:ht=ee.T;break;case ee.o.TWITTER:ht=ee.W;break;default:const{oauthIdToken:Yt,oauthAccessToken:pn,oauthTokenSecret:Rn,pendingToken:Ee,nonce:ve}=ae;return pn||Rn||Yt||Ee?Ee?be.startsWith("saml.")?ee.aL._create(be,Ee):ee.J._fromParams({providerId:be,signInMethod:be,pendingToken:Ee,idToken:Yt,accessToken:pn}):new ee.U(be).credential({idToken:Yt,accessToken:pn,rawNonce:ve}):null}return De instanceof Ce.ZR?ht.credentialFromError(De):ht.credentialFromResult(De)}function gn(De,ae){return ae.catch(be=>{throw be instanceof Ce.ZR&&function kn(De,ae){var be;const ht=null===(be=ae.customData)||void 0===be?void 0:be._tokenResponse;if("auth/multi-factor-auth-required"===ae?.code)ae.resolver=new si(De,ee.an(De,ae));else if(ht){const Yt=Ri(ae),pn=ae;Yt&&(pn.credential=Yt,pn.tenantId=ht.tenantId||void 0,pn.email=ht.email||void 0,pn.phoneNumber=ht.phoneNumber||void 0)}}(De,be),be}).then(be=>{const Yt=be.user;return{operationType:be.operationType,credential:Ii(be),additionalUserInfo:ee.al(be),user:Rr.getOrCreate(Yt)}})}function Si(De,ae){return mr.apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(De,ae){const be=yield ae;return{verificationId:be.verificationId,confirm:ht=>gn(De,be.confirm(ht))}})).apply(this,arguments)}class si{constructor(ae,be){this.resolver=be,this.auth=function Lr(De){return De.wrapped()}(ae)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ae){return gn(On(this.auth),this.resolver.resolveSignIn(ae))}}class Rr{constructor(ae){this._delegate=ae,this.multiFactor=ee.ao(ae)}static getOrCreate(ae){return Rr.USER_MAP.has(ae)||Rr.USER_MAP.set(ae,new Rr(ae)),Rr.USER_MAP.get(ae)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ae){return this._delegate.getIdTokenResult(ae)}getIdToken(ae){return this._delegate.getIdToken(ae)}linkAndRetrieveDataWithCredential(ae){return this.linkWithCredential(ae)}linkWithCredential(ae){var be=this;return(0,h.Z)(function*(){return gn(be.auth,ee.Z(be._delegate,ae))})()}linkWithPhoneNumber(ae,be){var ht=this;return(0,h.Z)(function*(){return Si(ht.auth,ee.l(ht._delegate,ae,be))})()}linkWithPopup(ae){var be=this;return(0,h.Z)(function*(){return gn(be.auth,ee.d(be._delegate,ae,Pn))})()}linkWithRedirect(ae){var be=this;return(0,h.Z)(function*(){return yield Qn(ee.aE(be.auth)),ee.g(be._delegate,ae,Pn)})()}reauthenticateAndRetrieveDataWithCredential(ae){return this.reauthenticateWithCredential(ae)}reauthenticateWithCredential(ae){var be=this;return(0,h.Z)(function*(){return gn(be.auth,ee._(be._delegate,ae))})()}reauthenticateWithPhoneNumber(ae,be){return Si(this.auth,ee.r(this._delegate,ae,be))}reauthenticateWithPopup(ae){return gn(this.auth,ee.e(this._delegate,ae,Pn))}reauthenticateWithRedirect(ae){var be=this;return(0,h.Z)(function*(){return yield Qn(ee.aE(be.auth)),ee.h(be._delegate,ae,Pn)})()}sendEmailVerification(ae){return ee.ab(this._delegate,ae)}unlink(ae){var be=this;return(0,h.Z)(function*(){return yield ee.ak(be._delegate,ae),be})()}updateEmail(ae){return ee.ag(this._delegate,ae)}updatePassword(ae){return ee.ah(this._delegate,ae)}updatePhoneNumber(ae){return ee.u(this._delegate,ae)}updateProfile(ae){return ee.af(this._delegate,ae)}verifyBeforeUpdateEmail(ae,be){return ee.ac(this._delegate,ae,be)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rr.USER_MAP=new WeakMap;const mn=ee.ax;let Bt=(()=>{class De{constructor(be,ht){if(this.app=be,ht.isInitialized())return this._delegate=ht.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Yt}=be.options;mn(Yt,"invalid-api-key",{appName:be.name}),mn(Yt,"invalid-api-key",{appName:be.name});const pn=typeof window<"u"?Pn:void 0;this._delegate=ht.initialize({options:{persistence:zn(Yt,be.name),popupRedirectResolver:pn}}),this._delegate._updateErrorMap(ee.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(be){this._delegate.languageCode=be}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(be){this._delegate.tenantId=be}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(be,ht){ee.G(this._delegate,be,ht)}applyActionCode(be){return ee.a2(this._delegate,be)}checkActionCode(be){return ee.a3(this._delegate,be)}confirmPasswordReset(be,ht){return ee.a1(this._delegate,be,ht)}createUserWithEmailAndPassword(be,ht){var Yt=this;return(0,h.Z)(function*(){return gn(Yt._delegate,ee.a5(Yt._delegate,be,ht))})()}fetchProvidersForEmail(be){return this.fetchSignInMethodsForEmail(be)}fetchSignInMethodsForEmail(be){return ee.aa(this._delegate,be)}isSignInWithEmailLink(be){return ee.a8(this._delegate,be)}getRedirectResult(){var be=this;return(0,h.Z)(function*(){mn(Kn(),be._delegate,"operation-not-supported-in-this-environment");const ht=yield ee.j(be._delegate,Pn);return ht?gn(be._delegate,Promise.resolve(ht)):{credential:null,user:null}})()}addFrameworkForLogging(be){!function ie(De,ae){(0,ee.aE)(De)._logFramework(ae)}(this._delegate,be)}onAuthStateChanged(be,ht,Yt){const{next:pn,error:Rn,complete:Ee}=bn(be,ht,Yt);return this._delegate.onAuthStateChanged(pn,Rn,Ee)}onIdTokenChanged(be,ht,Yt){const{next:pn,error:Rn,complete:Ee}=bn(be,ht,Yt);return this._delegate.onIdTokenChanged(pn,Rn,Ee)}sendSignInLinkToEmail(be,ht){return ee.a7(this._delegate,be,ht)}sendPasswordResetEmail(be,ht){return ee.a0(this._delegate,be,ht||void 0)}setPersistence(be){var ht=this;return(0,h.Z)(function*(){let Yt;switch(function Gr(De,ae){Ar(Object.values(Gn).includes(ae),De,"invalid-persistence-type"),(0,Ce.b$)()?Ar(ae!==Gn.SESSION,De,"unsupported-persistence-type"):(0,Ce.UG)()?Ar(ae===Gn.NONE,De,"unsupported-persistence-type"):Sr()?Ar(ae===Gn.NONE||ae===Gn.LOCAL&&(0,Ce.hl)(),De,"unsupported-persistence-type"):Ar(ae===Gn.NONE||vr(),De,"unsupported-persistence-type")}(ht._delegate,be),be){case Gn.SESSION:Yt=ee.a;break;case Gn.LOCAL:Yt=(yield ee.az(ee.i)._isAvailable())?ee.i:ee.b;break;case Gn.NONE:Yt=ee.L;break;default:return ee.as("argument-error",{appName:ht._delegate.name})}return ht._delegate.setPersistence(Yt)})()}signInAndRetrieveDataWithCredential(be){return this.signInWithCredential(be)}signInAnonymously(){return gn(this._delegate,ee.X(this._delegate))}signInWithCredential(be){return gn(this._delegate,ee.Y(this._delegate,be))}signInWithCustomToken(be){return gn(this._delegate,ee.$(this._delegate,be))}signInWithEmailAndPassword(be,ht){return gn(this._delegate,ee.a6(this._delegate,be,ht))}signInWithEmailLink(be,ht){return gn(this._delegate,ee.a9(this._delegate,be,ht))}signInWithPhoneNumber(be,ht){return Si(this._delegate,ee.s(this._delegate,be,ht))}signInWithPopup(be){var ht=this;return(0,h.Z)(function*(){return mn(Kn(),ht._delegate,"operation-not-supported-in-this-environment"),gn(ht._delegate,ee.c(ht._delegate,be,Pn))})()}signInWithRedirect(be){var ht=this;return(0,h.Z)(function*(){return mn(Kn(),ht._delegate,"operation-not-supported-in-this-environment"),yield Qn(ht._delegate),ee.f(ht._delegate,be,Pn)})()}updateCurrentUser(be){return this._delegate.updateCurrentUser(be)}verifyPasswordResetCode(be){return ee.a4(this._delegate,be)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return De.Persistence=Gn,De})();function bn(De,ae,be){let ht=De;"function"!=typeof De&&({next:ht,error:ae,complete:be}=De);const Yt=ht;return{next:Rn=>Yt(Rn&&Rr.getOrCreate(Rn)),error:ae,complete:be}}function zn(De,ae){const be=function lr(De,ae){const be=Ln();if(!be)return[];const ht=ee.aA(Yr,De,ae);switch(be.getItem(ht)){case Gn.NONE:return[ee.L];case Gn.LOCAL:return[ee.i,ee.a];case Gn.SESSION:return[ee.a];default:return[]}}(De,ae);if(typeof self<"u"&&!be.includes(ee.i)&&be.push(ee.i),typeof window<"u")for(const ht of[ee.b,ee.a])be.includes(ht)||be.push(ht);return be.includes(ee.L)||be.push(ee.L),be}class Bn{constructor(){this.providerId="phone",this._delegate=new ee.P(On(U.Z.auth()))}static credential(ae,be){return ee.P.credential(ae,be)}verifyPhoneNumber(ae,be){return this._delegate.verifyPhoneNumber(ae,be)}unwrap(){return this._delegate}}Bn.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,Bn.PROVIDER_ID=ee.P.PROVIDER_ID;const tr=ee.ax;class Fe{constructor(ae,be,ht=U.Z.app()){var Yt;tr(null===(Yt=ht.options)||void 0===Yt?void 0:Yt.apiKey,"invalid-api-key",{appName:ht.name}),this._delegate=new ee.R(ae,be,ht.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qe(De){De.INTERNAL.registerComponent(new Ge.wA("auth-compat",ae=>{const be=ae.getProvider("app-compat").getImmediate(),ht=ae.getProvider("auth");return new Bt(be,ht)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.M,FacebookAuthProvider:ee.N,GithubAuthProvider:ee.T,GoogleAuthProvider:ee.Q,OAuthProvider:ee.U,SAMLAuthProvider:ee.V,PhoneAuthProvider:Bn,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:Fe,TwitterAuthProvider:ee.W,Auth:Bt,AuthCredential:ee.H,Error:Ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),De.registerVersion("@firebase/auth-compat","0.3.0")}(U.Z)},8766:(cn,dt,L)=>{L.d(dt,{Lj:()=>gt,X3:()=>Ht});var h=L(5861);let ee,Ce;const Ge=new WeakMap,Pe=new WeakMap,Ze=new WeakMap,we=new WeakMap,_e=new WeakMap;let mt={get(Ve,bt,Se){if(Ve instanceof IDBTransaction){if("done"===bt)return Pe.get(Ve);if("objectStoreNames"===bt)return Ve.objectStoreNames||Ze.get(Ve);if("store"===bt)return Se.objectStoreNames[1]?void 0:Se.objectStore(Se.objectStoreNames[0])}return ct(Ve[bt])},set:(Ve,bt,Se)=>(Ve[bt]=Se,!0),has:(Ve,bt)=>Ve instanceof IDBTransaction&&("done"===bt||"store"===bt)||bt in Ve};function yt(Ve){return"function"==typeof Ve?function xt(Ve){return Ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ve)?function(...bt){return Ve.apply(je(this),bt),ct(Ge.get(this))}:function(...bt){return ct(Ve.apply(je(this),bt))}:function(bt,...Se){const $e=Ve.call(je(this),bt,...Se);return Ze.set($e,bt.sort?bt.sort():[bt]),ct($e)}}(Ve):(Ve instanceof IDBTransaction&&function Nt(Ve){if(Pe.has(Ve))return;const bt=new Promise((Se,$e)=>{const wt=()=>{Ve.removeEventListener("complete",tt),Ve.removeEventListener("error",Ut),Ve.removeEventListener("abort",Ut)},tt=()=>{Se(),wt()},Ut=()=>{$e(Ve.error||new DOMException("AbortError","AbortError")),wt()};Ve.addEventListener("complete",tt),Ve.addEventListener("error",Ut),Ve.addEventListener("abort",Ut)});Pe.set(Ve,bt)}(Ve),((Ve,bt)=>bt.some(Se=>Ve instanceof Se))(Ve,function Me(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ve,mt):Ve)}function ct(Ve){if(Ve instanceof IDBRequest)return function Ue(Ve){const bt=new Promise((Se,$e)=>{const wt=()=>{Ve.removeEventListener("success",tt),Ve.removeEventListener("error",Ut)},tt=()=>{Se(ct(Ve.result)),wt()},Ut=()=>{$e(Ve.error),wt()};Ve.addEventListener("success",tt),Ve.addEventListener("error",Ut)});return bt.then(Se=>{Se instanceof IDBCursor&&Ge.set(Se,Ve)}).catch(()=>{}),_e.set(bt,Ve),bt}(Ve);if(we.has(Ve))return we.get(Ve);const bt=yt(Ve);return bt!==Ve&&(we.set(Ve,bt),_e.set(bt,Ve)),bt}const je=Ve=>_e.get(Ve);function Ht(Ve,bt,{blocked:Se,upgrade:$e,blocking:wt,terminated:tt}={}){const Ut=indexedDB.open(Ve,bt),Kt=ct(Ut);return $e&&Ut.addEventListener("upgradeneeded",An=>{$e(ct(Ut.result),An.oldVersion,An.newVersion,ct(Ut.transaction))}),Se&&Ut.addEventListener("blocked",()=>Se()),Kt.then(An=>{tt&&An.addEventListener("close",()=>tt()),wt&&An.addEventListener("versionchange",()=>wt())}).catch(()=>{}),Kt}function gt(Ve,{blocked:bt}={}){const Se=indexedDB.deleteDatabase(Ve);return bt&&Se.addEventListener("blocked",()=>bt()),ct(Se).then(()=>{})}const qe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],jt=new Map;function nt(Ve,bt){if(!(Ve instanceof IDBDatabase)||bt in Ve||"string"!=typeof bt)return;if(jt.get(bt))return jt.get(bt);const Se=bt.replace(/FromIndex$/,""),$e=bt!==Se,wt=ze.includes(Se);if(!(Se in($e?IDBIndex:IDBObjectStore).prototype)||!wt&&!qe.includes(Se))return;const tt=function(){var Ut=(0,h.Z)(function*(Kt,...An){const Mt=this.transaction(Kt,wt?"readwrite":"readonly");let tn=Mt.store;return $e&&(tn=tn.index(An.shift())),(yield Promise.all([tn[Se](...An),wt&&Mt.done]))[0]});return function(An){return Ut.apply(this,arguments)}}();return jt.set(bt,tt),tt}!function lt(Ve){mt=Ve(mt)}(Ve=>({...Ve,get:(bt,Se,$e)=>nt(bt,Se)||Ve.get(bt,Se,$e),has:(bt,Se)=>!!nt(bt,Se)||Ve.has(bt,Se)}))},5861:(cn,dt,L)=>{function h(ee,Ce,Me,Oe,Ge,Pe,Ze){try{var we=ee[Pe](Ze),_e=we.value}catch(Ue){return void Me(Ue)}we.done?Ce(_e):Promise.resolve(_e).then(Oe,Ge)}function U(ee){return function(){var Ce=this,Me=arguments;return new Promise(function(Oe,Ge){var Pe=ee.apply(Ce,Me);function Ze(_e){h(Pe,Oe,Ge,Ze,we,"next",_e)}function we(_e){h(Pe,Oe,Ge,Ze,we,"throw",_e)}Ze(void 0)})}}L.d(dt,{Z:()=>U})}},cn=>{cn(cn.s=668)}]);