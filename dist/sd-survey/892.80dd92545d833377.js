"use strict";(self.webpackChunksd_survey=self.webpackChunksd_survey||[]).push([[892],{7892:(pe,w,c)=>{c.r(w),c.d(w,{AdminModule:()=>de});var p=c(6895),k=c(4466),u=c(7799),e=c(4650),b=c(6132);let q=(()=>{class o{constructor(t){this.auth=t}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-log-in"]],decls:11,vars:0,consts:[[1,"flex","min-h-full","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","space-y-8"],["src","https://mekongtiengiang.com/wp-content/jscdn/assets/img/logos/Full%20logo.svg","alt","The Savoury Dining",1,"mx-auto","w-auto"],[1,"mt-6","text-center","text-3xl","font-bold","tracking-tight","text-gray-900"],[1,"group","relative","flex","w-full","justify-center","rounded-md","border","border-transparent","bg-indigo-600","py-2","px-4","text-sm","font-medium","text-white","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"click"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule","evenodd"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._UZ(3,"img",2),e.TgZ(4,"h2",3),e._uU(5,"Hello there, please log in"),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.auth.login()}),e.TgZ(7,"span",5),e.O4$(),e.TgZ(8,"svg",6),e._UZ(9,"path",7),e.qZA()(),e._uU(10," Sign in with Google "),e.qZA()()())}}),o})();var L=c(5861),g=c(6188);function D(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",24)(1,"a",25),e._uU(2),e.qZA(),e.TgZ(3,"a",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.logOut())}),e._uU(4,"Sign out"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Hello, ",t.currentUser.displayName,"")}}function R(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"a",9),e._uU(3,"Questions"),e.qZA(),e.TgZ(4,"a",9),e._uU(5,"Responses"),e.qZA()(),e.TgZ(6,"div",29)(7,"div",30)(8,"div",5),e._UZ(9,"img",31),e.qZA(),e.TgZ(10,"div",32)(11,"div",33),e._uU(12),e.qZA()()(),e.TgZ(13,"div",34)(14,"a",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.logOut())}),e._uU(15,"Sign out"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("routerLink","/admin/dashboard/questions"),e.xp6(2),e.Q6J("routerLink","/admin/dashboard/responses"),e.xp6(5),e.Q6J("src",t.currentUser.photoURL,e.LSH),e.xp6(3),e.hij("Hello, ",t.currentUser.displayName,"")}}let N=(()=>{class o{constructor(t,n,i){this.router=t,this.auth=n,this.translateService=i,this.showMenu=!1,this.showUserMenu=!1,this.showLangMenu=!1,this.selectedLang="en"}ngOnInit(){try{this.currentUser=this.auth.currentUser(),console.log(this.currentUser)}catch{this.goTo(["admin/log-in"])}this.selectedLang=this.translateService.getDefaultLang(),this.availableLangs=this.translateService.getLangs()}goTo(t,n){this.router&&this.router.navigate(t,n)}toggleMenu(){this.showMenu=!this.showMenu}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}toggleLanguageMenu(){this.showLangMenu=!this.showLangMenu}selectedLangChanged(t){this.translateService.use(t),this.selectedLang=t,this.showLangMenu=!1}logOut(){var t=this;return(0,L.Z)(function*(){yield t.auth.logout()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(b.e),e.Y36(g.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-container"]],decls:32,vars:5,consts:[[1,"min-h-full","bg-white"],[1,"menu-bar"],[1,"mx-auto","max-w-7xl","px-4"],[1,"flex","h-16","items-center","justify-between"],[1,"flex","items-center"],[1,"flex-shrink-0"],["src","https://mekongtiengiang.com/wp-content/jscdn/assets/img/logos/Full%20logo.svg",1,"w-[200px]"],[1,"hidden","md:block"],[1,"ml-10","flex","items-baseline","space-x-4"],["routerLinkActive","active","aria-current","page",1,"menu-item",3,"routerLink"],[1,"-mr-2","flex","md:hidden"],["type","button","aria-controls","mobile-menu","aria-expanded","false",1,"inline-flex","items-center","justify-center","rounded-md","bg-gray-800","p-2","text-gray-400","hover:bg-gray-700","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"hidden","md:flex"],[1,"ml-4","flex","items-center","md:ml-6"],[1,"relative","ml-3"],["type","button","id","user-menu-button","aria-expanded","false","aria-haspopup","true",1,"flex","max-w-xs","items-center","rounded-full","bg-gray-800","text-sm","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],["referrerpolicy","no-referrer",1,"h-8","w-8","rounded-full",3,"src"],["class","absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","role","menu","aria-orientation","vertical","aria-labelledby","user-menu-button","tabindex","-1",4,"ngIf"],["class","md:hidden","id","mobile-menu",4,"ngIf"],["role","menu","aria-orientation","vertical","aria-labelledby","user-menu-button","tabindex","-1",1,"absolute","right-0","z-10","mt-2","w-48","origin-top-right","rounded-md","bg-white","py-1","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["href","#","role","menuitem","tabindex","-1","id","user-menu-item-0",1,"block","px-4","py-2","text-sm","text-gray-700"],["href","#","role","menuitem","tabindex","-1","id","user-menu-item-2",1,"block","px-4","py-2","text-sm","text-gray-700",3,"click"],["id","mobile-menu",1,"md:hidden"],[1,"space-y-1","px-2","pt-2","pb-3","sm:px-3"],[1,"border-t","border-gray-700","pt-4","pb-3"],[1,"flex","items-center","px-5"],["alt","",1,"h-10","w-10","rounded-full",3,"src"],[1,"ml-3"],[1,"text-base","font-medium","leading-none","text-white"],[1,"mt-3","space-y-1","px-2"],["href","#",1,"block","rounded-md","px-3","py-2","text-base","font-medium","text-gray-400","hover:bg-gray-700","hover:text-white",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"a",9),e._uU(10,"Questions"),e.qZA(),e.TgZ(11,"a",9),e._uU(12,"Responses"),e.qZA()()()(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return n.toggleMenu()}),e.TgZ(15,"span",12),e._uU(16,"Open main menu"),e.qZA(),e.O4$(),e.TgZ(17,"svg",13),e._UZ(18,"path",14),e.qZA(),e.TgZ(19,"svg",15),e._UZ(20,"path",16),e.qZA()()(),e.kcU(),e.TgZ(21,"div",17)(22,"div",18)(23,"div",19)(24,"div")(25,"button",20),e.NdJ("click",function(){return n.toggleUserMenu()}),e.TgZ(26,"span",12),e._uU(27,"Open user menu"),e.qZA(),e._UZ(28,"img",21),e.qZA()(),e.YNc(29,D,5,1,"div",22),e.qZA()()()()(),e.YNc(30,R,16,4,"div",23),e.qZA(),e._UZ(31,"router-outlet"),e.qZA()),2&t&&(e.xp6(9),e.Q6J("routerLink","/admin/dashboard/questions"),e.xp6(2),e.Q6J("routerLink","/admin/dashboard/responses"),e.xp6(17),e.Q6J("src",n.currentUser.photoURL,e.LSH),e.xp6(1),e.Q6J("ngIf",n.showUserMenu),e.xp6(1),e.Q6J("ngIf",n.showMenu))},dependencies:[p.O5,u.lC,u.yS,u.Od],styles:[".menu-bar[_ngcontent-%COMP%]{background:rgba(0,0,0,.85);border-bottom:1px solid #37332a;transition:all .5s;z-index:997;padding:15px 0}.menu-bar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{text-transform:uppercase;font-family:FontMedium,serif;font-weight:700;display:flex;align-items:center;justify-content:space-between;padding:10px 0 10px 30px;color:#fff;white-space:nowrap;transition:.3s;font-size:14px;cursor:pointer}.menu-bar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, .menu-bar[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:#e8a049;text-decoration:none}"]}),o})();var T=c(9646),m=c(3101);let f=(()=>{class o{constructor(t,n,i,r){this.router=t,this.auth=n,this.activatedRoute=i,this.afs=r}canActivate(t,n){const i=this.auth.currentUser();return i?(console.log(i),this.afs.collection("users",a=>a.where("email","==",i.email)).snapshotChanges().subscribe(a=>{console.log(a),a&&0!==a.length&&a[0].payload.doc.data().admin||this.auth.logout()}),(0,T.of)(!0)):(this.router.navigate(["admin/log-in"]),(0,T.of)(!1))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(u.F0),e.LFG(b.e),e.LFG(u.gz),e.LFG(m.ST))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var F=c(5226),_=c.n(F),C=c(1481),v=c(377),h=c(7087);let I=(()=>{class o{constructor(t){this.sanitizer=t,this.files=new e.vpe,this.background="#eee"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#999"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#cfcfcf"}onDrop(t){t.preventDefault(),t.stopPropagation(),this.background="#cfcfcf";let n=[];if(t.dataTransfer){for(let i=0;i<t.dataTransfer.files.length;i++){const r=t.dataTransfer.files[i],a=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(r));n.push({file:r,url:a})}n.length>0&&this.files.emit(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.H7))},o.\u0275dir=e.lG2({type:o,selectors:[["","appDragDrop",""]],hostVars:2,hostBindings:function(t,n){1&t&&e.NdJ("dragover",function(r){return n.onDragOver(r)})("dragleave",function(r){return n.onDragLeave(r)})("drop",function(r){return n.onDrop(r)}),2&t&&e.Udp("background",n.background)},outputs:{files:"files"}}),o})();function Q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("files",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.filesDropped(i))}),e.TgZ(1,"div",3),e.O4$(),e.TgZ(2,"svg",4),e._UZ(3,"path",5),e.qZA(),e.kcU(),e.TgZ(4,"div",6)(5,"label",7)(6,"span",8),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",9),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onFileChange(i))}),e.qZA()(),e.TgZ(10,"p",10),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"p",11),e._uU(14),e.ALo(15,"translate"),e.qZA()()()}2&o&&(e.xp6(7),e.Oqu(e.lcZ(8,3,"common.upload")),e.xp6(4),e.Oqu(e.lcZ(12,5,"common.dndDesc")),e.xp6(3),e.Oqu(e.lcZ(15,7,"common.upToText")))}function O(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"img",13),e.NdJ("error",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.imgURL=void 0)}),e.qZA(),e.TgZ(2,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteFile())}),e.O4$(),e.TgZ(3,"svg",15),e._UZ(4,"path",16),e.qZA(),e._uU(5," Delete photo "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgURL,e.LSH)}}let Y=(()=>{class o{constructor(t,n,i){this.sanitizer=t,this.storage=n,this.loaderService=i,this.uploadedFile=new e.vpe,this.files=[]}ngOnInit(){}filesDropped(t){this.files=[t[0]],console.log(this.files),this.upload()}onFileChange(t){let n=[];const i=t.target.files[0];if(!i)return;const r=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(i));n.push({file:i,url:r}),this.files=n,this.upload()}upload(){if(!this.files||0===this.files.length)return;this.loaderService.show();const t=this.files[0].file;console.log("------- uploadFile",t);const n=this.storage.ref(`uploads/${t.name}${Date.now()}`);n.put(t).then(()=>{n.getDownloadURL().subscribe(i=>{this.imgURL=i,this.uploadedFile.emit(i)}),this.loaderService.hide()})}deleteFile(){_().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(this.processDelete(),_().fire("Deleted!","The item has been deleted.","success"))})}processDelete(){!this.imgURL||(this.loaderService.show(),this.storage.refFromURL(this.imgURL).delete(),this.imgURL=void 0,this.uploadedFile.emit(""),this.files=[],this.loaderService.hide())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.H7),e.Y36(v.Q1),e.Y36(h.D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-image-uploader"]],inputs:{imgURL:"imgURL"},outputs:{uploadedFile:"uploadedFile"},decls:2,vars:2,consts:[["appDragDrop","","class","dropzone mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6",3,"files",4,"ngIf"],["class","mt-1 flex relative items-start justify-center space-x-6 px-6 pt-5 pb-6",4,"ngIf"],["appDragDrop","",1,"dropzone","mt-1","flex","justify-center","rounded-md","border-2","border-dashed","border-gray-300","px-6","pt-5","pb-6",3,"files"],[1,"space-y-1","text-center"],["stroke","currentColor","fill","none","viewBox","0 0 48 48","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-400"],["d","M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","text-sm","text-gray-600"],["for","file-upload",1,"relative","cursor-pointer","rounded-md","bg-white","font-medium","text-indigo-600","focus-within:outline-none","focus-within:ring-2","focus-within:ring-indigo-500","focus-within:ring-offset-2","hover:text-indigo-500"],[1,"p-3"],["id","file-upload","name","file-upload","type","file",1,"sr-only",3,"change"],[1,"pl-1"],[1,"text-xs","text-gray-500"],[1,"mt-1","flex","relative","items-start","justify-center","space-x-6","px-6","pt-5","pb-6"],["width","400px",3,"src","error"],["type","button",1,"absolute","right-0","text-red-900","bg-white","hover:bg-red-900","hover:text-white","border","focus:ring-4","focus:outline-none","focus:ring-gray-100","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","inline-flex","items-center","xxxx:focus:ring-gray-600","xxxx:bg-gray-800","xxxx:border-gray-700","xxxx:text-white","xxxx:hover:bg-gray-700","mr-2","mb-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,n){1&t&&(e.YNc(0,Q,16,9,"div",0),e.YNc(1,O,6,1,"div",1)),2&t&&(e.Q6J("ngIf",!n.files.length&&!n.imgURL),e.xp6(1),e.Q6J("ngIf",n.imgURL))},dependencies:[p.O5,I,g.X$]}),o})();var Z=c(4383);let A=(()=>{class o{constructor(t,n,i,r,a,d){this.router=t,this.activatedRoute=n,this.loaderService=i,this.toastrService=r,this.translateService=a,this.afs=d,this.collectionName=""}ngOnInit(){this.objectCollection=this.afs.collection(this.collectionName);const t=this.activatedRoute.snapshot?.params.id||null;this.initForm(),"new"!==t&&(this.id=t,this.loadData())}initForm(){}loadData(){this.id?(this.documentRef=this.objectCollection.doc(this.id),this.documentRef.valueChanges().subscribe(t=>{this.formData=t,this.formGroup&&this.formGroup.patchValue(this.formData)})):console.log("id not found")}onSubmit(t){t.preventDefault(),this.loaderService.show(),this.documentRef?this._updateData():this._createNew()}_updateData(){this.documentRef.update({...this.formGroup.value,updatedAt:Date.now()}).then(t=>{this.loaderService.hide(),this.toastrService.success(this.translateService.instant("common.successfully")),this.goBack(!1)}).catch(t=>{this.loaderService.hide(),this.toastrService.error(this.translateService.instant("common.failed")),console.error(t)})}_createProcess(){return this.objectCollection.add({...this.formGroup.value,createdAt:Date.now()})}_createNew(){this._createProcess().then(t=>{this.loaderService.hide(),this.toastrService.success(this.translateService.instant("common.successfully")),this.goBack(!1)}).catch(t=>{this.loaderService.hide(),this.toastrService.error(this.translateService.instant("common.failed")),console.error(t)})}enableSubmitButton(){return!this.formGroup.valid}goBack(t=!0){this.formGroup.value.photoURL&&t&&this.uploaderComponent.processDelete(),this.router.navigate([".."],{relativeTo:this.activatedRoute})}onFileChange(t){this.formGroup.patchValue({photoURL:t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(h.D),e.Y36(Z._W),e.Y36(g.sK),e.Y36(m.ST))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-base-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(Y,5),2&t){let i;e.iGM(i=e.CRH())&&(n.uploaderComponent=i.first)}},decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"base-form works!"),e.qZA())}}),o})();var l=c(4006);function j(o,s){1&o&&(e.TgZ(0,"h1",34),e._uU(1,"Create Question"),e.qZA())}function S(o,s){1&o&&(e.TgZ(0,"h1",34),e._uU(1,"Update Question"),e.qZA())}let J=(()=>{class o extends A{constructor(t,n,i,r,a,d){super(t,n,i,r,a,d),this.router=t,this.activatedRoute=n,this.loaderService=i,this.toastrService=r,this.translateService=a,this.afs=d,this.collectionName="questions"}initForm(){this.formGroup=new l.cw({question:new l.NI("",[l.kI.required]),type:new l.NI("Text",[l.kI.required]),isRequired:new l.NI(!0,[l.kI.required]),options:new l.NI(""),order:new l.NI(0,[l.kI.required])})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(h.D),e.Y36(Z._W),e.Y36(g.sK),e.Y36(m.ST))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-question-form"]],features:[e.qOj],decls:61,vars:13,consts:[[1,"bg-white","shadow"],[1,"mx-auto","max-w-7xl","py-6","px-4","sm:px-6","lg:px-8"],["class","text-3xl font-bold tracking-tight text-gray-900",4,"ngIf"],[1,"mx-auto","max-w-7xl","py-6","sm:px-6","lg:px-8"],[1,"md:col-span-2","md:mt-0"],[3,"formGroup","submit"],[1,"shadow","sm:overflow-hidden","sm:rounded-md"],[1,"space-y-6","bg-white","px-4","py-5","sm:p-6","max-h-[75vh]","overflow-auto"],[1,"col-span-6","sm:col-span-4"],["for","question",1,"block","text-sm","font-medium","text-gray-700"],[1,"text-rose-500"],["formControlName","question","type","text","name","question","id","question",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["for","question-type",1,"block","text-sm","font-medium","text-gray-700"],["formControlName","type","id","question-type",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["value","text"],["value","textarea"],["value","rating"],["value","multi-select"],["value","contact-form"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"mt-4","space-x-4","flex"],[1,"flex","items-center"],["formControlName","isRequired","id","required","name","isRequired","checked","","type","radio",1,"h-4","w-4","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"value"],["for","required",1,"ml-3","block","text-sm","font-medium","text-gray-700"],["formControlName","isRequired","id","optional","name","isRequired","type","radio",1,"h-4","w-4","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"value"],["for","optional",1,"ml-3","block","text-sm","font-medium","text-gray-700"],["for","question-options",1,"block","text-sm","font-medium","text-gray-700"],["formControlName","options","name","question-code","id","question-options",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["for","question-order",1,"block","text-sm","font-medium","text-gray-700"],["formControlName","order","type","number","name","question-code","id","question-order",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],[1,"bg-gray-50","px-4","py-3","text-right","sm:px-6","space-x-6"],[1,"inline-flex","justify-center","rounded-md","border","border-transparent","bg-red-600","py-2","px-4","text-sm","font-medium","text-white","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2",3,"click"],[1,"inline-flex","justify-center","rounded-md","border","border-transparent","py-2","px-4","text-sm","font-medium","text-white","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"ngClass","disabled"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900"]],template:function(t,n){1&t&&(e.TgZ(0,"header",0)(1,"div",1),e.YNc(2,j,2,0,"h1",2),e.YNc(3,S,2,0,"h1",2),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"form",5),e.NdJ("submit",function(r){return n.onSubmit(r)}),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"Question"),e.TgZ(12,"span",10),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",8)(16,"label",12),e._uU(17,"Question Type"),e.TgZ(18,"span",10),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"select",13)(21,"option",14),e._uU(22,"Text"),e.qZA(),e.TgZ(23,"option",15),e._uU(24,"Long text"),e.qZA(),e.TgZ(25,"option",16),e._uU(26,"Rating"),e.qZA(),e.TgZ(27,"option",17),e._uU(28,"Multi select"),e.qZA(),e.TgZ(29,"option",18),e._uU(30,"Contact Form"),e.qZA()()(),e.TgZ(31,"div",8)(32,"fieldset")(33,"legend",19),e._uU(34,"Required ?"),e.qZA(),e.TgZ(35,"p",20),e._uU(36,"This question is required ?"),e.qZA(),e.TgZ(37,"div",21)(38,"div",22),e._UZ(39,"input",23),e.TgZ(40,"label",24),e._uU(41,"Required"),e.qZA()(),e.TgZ(42,"div",22),e._UZ(43,"input",25),e.TgZ(44,"label",26),e._uU(45,"Optional"),e.qZA()()()()(),e.TgZ(46,"div",8)(47,"label",27),e._uU(48,"Options (Separated by ;)"),e.qZA(),e._UZ(49,"textarea",28),e.qZA(),e.TgZ(50,"div",8)(51,"label",29),e._uU(52,"Order"),e.qZA(),e._UZ(53,"input",30),e.qZA()(),e.TgZ(54,"div",31)(55,"button",32),e.NdJ("click",function(){return n.goBack()}),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"button",33),e._uU(59),e.ALo(60,"translate"),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.documentRef),e.xp6(1),e.Q6J("ngIf",n.documentRef),e.xp6(3),e.Q6J("formGroup",n.formGroup),e.xp6(33),e.Q6J("value",!0),e.xp6(4),e.Q6J("value",!1),e.xp6(13),e.Oqu(e.lcZ(57,9,"common.cancel")),e.xp6(2),e.Q6J("ngClass",n.enableSubmitButton()?"bg-gray-600 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700")("disabled",n.enableSubmitButton()),e.xp6(1),e.Oqu(e.lcZ(60,11,"common.save")))},dependencies:[p.mk,p.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l._,l.JJ,l.JL,l.sg,l.u,g.X$]}),o})();var G=c(5698);let U=(()=>{class o{constructor(t,n,i,r,a,d){this.afs=t,this.activatedRoute=n,this.router=i,this.storage=r,this.loaderService=a,this.translateService=d,this.searchKeyword="",this.isEmpty=!0,this.collectionName="",this.firstItem=null,this.firstResponse=null,this.firstItems=[],this.currentPage=0,this.lastResponse=null,this.disableGoNext=!1,this.disableGoBack=!0}ngOnInit(){this.objectCollection=this.afs.collection(this.collectionName,t=>(this.firestoreQuery=t.limit(201).orderBy("createdAt","desc"),this.firestoreQuery)),this.onAfterLoadData()}openNewForm(){this.router.navigate(["./new"],{relativeTo:this.activatedRoute})}openDetailForm(t){this.router.navigate([`./${t}`],{relativeTo:this.activatedRoute})}deleteItem(t,n){_().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{if(i.isConfirmed){if(n)try{this.storage.storage.refFromURL(n).delete()}catch(r){console.log("e",r)}this.afs.collection(this.collectionName).doc(t).delete(),_().fire("Deleted!","The item has been deleted.","success"),(t===this.firstItem.id||!this.firstItem)&&(this.disableGoBack=!0)}})}search(){this.firstItem=null,this.firstResponse=null,this.lastResponse=null;const t=this.firestoreQuery.where("name",">=",this.searchKeyword).where("name","<=",this.searchKeyword+"\uf8ff");this.objectCollection=this.afs.collection(this.collectionName,()=>t),this.disableGoNext=!1,this.disableGoBack=!0,this.onAfterLoadData()}prevPage(){this.currentPage-=1;const t=this.firestoreQuery.startAt(this.firstItems[this.currentPage]);this.objectCollection=this.afs.collection(this.collectionName,()=>t),this.disableGoNext=!1,this.onAfterLoadData(!1)}nextPage(){this.currentPage+=1;const t=this.firestoreQuery.startAfter(this.lastResponse);this.objectCollection=this.afs.collection(this.collectionName,()=>t),this.disableGoBack=!1,this.onAfterLoadData(!0)}mappingResponse(t){return this.objectList=t.map(n=>(this.loaderService.hide(),{id:n.payload.doc.id,...n.payload.doc.data()}))}onAfterLoadData(t=!0){this.loaderService.show(),this.objectCollection.snapshotChanges().pipe((0,G.q)(1)).subscribe(i=>{this.isEmpty=!i.length,!this.isEmpty&&(this.firstItem?this.disableGoBack=this.firstItem.id===i[0].payload.doc.id:this.firstItem=i[0].payload.doc,this.disableGoNext=i.length<=200,t&&this.firstResponse&&0===this.firstItems.filter(a=>a.id===this.firstResponse.id).length&&this.firstItems.push(this.firstResponse),this.firstResponse=i[0].payload.doc,this.lastResponse=this.disableGoNext?i[i.length-1].payload.doc:i[i.length-2].payload.doc,this.disableGoNext||i.pop(),this.mappingResponse(i))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.ST),e.Y36(u.gz),e.Y36(u.F0),e.Y36(v.Q1),e.Y36(h.D),e.Y36(g.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-base-list"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"base-list works!"),e.qZA())}}),o})();function B(o,s){1&o&&(e.TgZ(0,"span",28),e._uU(1,"Required"),e.qZA())}function H(o,s){1&o&&(e.TgZ(0,"span",29),e._uU(1,"Optional"),e.qZA())}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr",17)(1,"td",18),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e._uU(4),e.qZA(),e.TgZ(5,"td",18),e.YNc(6,B,2,0,"span",19),e.YNc(7,H,2,0,"span",20),e.qZA(),e.TgZ(8,"td",21),e._uU(9),e.qZA(),e.TgZ(10,"td",18)(11,"a",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.openDetailForm(r.id))}),e.O4$(),e.TgZ(12,"svg",7),e._UZ(13,"path",23)(14,"path",24),e.qZA()(),e.kcU(),e.TgZ(15,"a",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteItem(r.id))}),e.O4$(),e.TgZ(16,"svg",26),e._UZ(17,"path",27),e.qZA()()()()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",t.question," "),e.xp6(2),e.hij(" ",n.typeLabel[t.type]," "),e.xp6(2),e.Q6J("ngIf",t.isRequired),e.xp6(1),e.Q6J("ngIf",!t.isRequired),e.xp6(2),e.Oqu(t.options)}}function P(o,s){if(1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"table",12)(1,"thead",13)(2,"tr")(3,"th",14),e._uU(4," Question "),e.qZA(),e.TgZ(5,"th",14),e._uU(6," Type "),e.qZA(),e.TgZ(7,"th",14),e._uU(8," Required? "),e.qZA(),e.TgZ(9,"th",15),e._uU(10," Options "),e.qZA(),e._UZ(11,"th",14),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,$,18,5,"tr",16),e.qZA()()),2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.objectList)}}function z(o,s){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"nav",30),e._UZ(1,"span",31),e.TgZ(2,"ul",32)(3,"li")(4,"a",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.prevPage())}),e.TgZ(5,"span",34),e._uU(6,"Previous"),e.qZA(),e.O4$(),e.TgZ(7,"svg",35),e._UZ(8,"path",36),e.qZA()()(),e.kcU(),e.TgZ(9,"li")(10,"a",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nextPage())}),e.TgZ(11,"span",34),e._uU(12,"Next"),e.qZA(),e.O4$(),e.TgZ(13,"svg",35),e._UZ(14,"path",38),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",t.disableGoBack?"pointer-events-none bg-gray-500":""),e.xp6(6),e.Q6J("ngClass",t.disableGoNext?"pointer-events-none bg-gray-500":"")}}function E(o,s){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",3)(1,"div",39)(2,"div",40)(3,"h2",41),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",42),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openNewForm())}),e._uU(10),e.ALo(11,"translate"),e.O4$(),e.TgZ(12,"svg",7),e._UZ(13,"path",8),e.qZA()()()()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,3,"common.emptyTitle")),e.xp6(3),e.Oqu(e.lcZ(8,5,"common.emptyDesc")),e.xp6(3),e.hij(" ",e.lcZ(11,7,"common.addNew")," "))}let K=(()=>{class o extends U{constructor(t,n,i,r,a,d){super(t,n,i,r,a,d),this.afs=t,this.activatedRoute=n,this.router=i,this.storage=r,this.loaderService=a,this.translateService=d,this.collectionName="questions",this.typeLabel={text:"Text",textarea:"Long text",rating:"Rating","multi-select":"Multi Select","contact-form":"Contact Form"}}mappingResponse(t){return this.objectList=t.map(n=>(this.loaderService.hide(),{id:n.payload.doc.id,...n.payload.doc.data()}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.ST),e.Y36(u.gz),e.Y36(u.F0),e.Y36(v.Q1),e.Y36(h.D),e.Y36(g.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-question-list"]],features:[e.qOj],decls:15,vars:6,consts:[[1,"bg-white","shadow"],[1,"mx-auto","max-w-7xl","py-6","px-4","sm:px-6","lg:px-8"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900"],[1,"mx-auto","max-w-7xl","py-6","sm:px-6","lg:px-8"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"flex","justify-between","items-center","pb-4"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-t-lg","text-sm","px-5","py-2.5","text-center","inline-flex","items-center","xxxx:bg-blue-600","xxxx:hover:bg-blue-700","xxxx:focus:ring-blue-800",3,"click"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"],["class","w-full text-sm text-left text-gray-500 xxxx:text-gray-400",4,"ngIf"],["class","flex justify-between items-center p-4","aria-label","Table navigation",4,"ngIf"],["class","mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",4,"ngIf"],[1,"w-full","text-sm","text-left","text-gray-500","xxxx:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","xxxx:bg-gray-700","xxxx:text-gray-400"],["scope","col",1,"py-3","px-6"],["scope","col-2",1,"py-3","px-6"],["class","bg-white border-b xxxx:bg-gray-800 xxxx:border-gray-700 hover:bg-gray-50 xxxx:hover:bg-gray-600",4,"ngFor","ngForOf"],[1,"bg-white","border-b","xxxx:bg-gray-800","xxxx:border-gray-700","hover:bg-gray-50","xxxx:hover:bg-gray-600"],[1,"py-4","px-6","font-semibold","text-gray-900","xxxx:text-white"],["class","text-red-700",4,"ngIf"],["class","text-green-700",4,"ngIf"],[1,"py-4","px-6","font-semibold","text-gray-900","xxxx:text-white","whitespace-pre-wrap"],["href","javascript:void(0)",1,"inline-block","font-medium","text-blue-300","mr-6","xxxx:text-blue-300","hover:text-blue-600",3,"click"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],["href","javascript:void(0)",1,"inline-block","font-medium","text-red-300","xxxx:text-red-300","hover:text-red-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-red-700"],[1,"text-green-700"],["aria-label","Table navigation",1,"flex","justify-between","items-center","p-4"],[1,"text-sm","font-normal","text-gray-500","xxxx:text-gray-400"],[1,"inline-flex","items-center","-space-x-px"],["href","javascript:void(0)",1,"block","py-2","px-3","ml-0","leading-tight","text-white","bg-sky-300","rounded-l-lg","border","hover:bg-sky-500",3,"ngClass","click"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],["href","javascript:void(0)",1,"block","py-2","px-3","leading-tight","text-white","bg-sky-300","rounded-r-lg","border","hover:bg-sky-500",3,"ngClass","click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"px-4","py-6","sm:px-0"],[1,"h-96","rounded-lg","border-4","border-dashed","border-gray-200","flex","flex-col","items-center","justify-center","space-y-6"],[1,"text-blue-600","text-2xl"],[1,""],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","inline-flex","items-center","xxxx:bg-blue-600","xxxx:hover:bg-blue-700","xxxx:focus:ring-blue-800",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"header",0)(1,"div",1)(2,"h1",2),e._uU(3,"Questions"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.openNewForm()}),e._uU(8),e.ALo(9,"translate"),e.O4$(),e.TgZ(10,"svg",7),e._UZ(11,"path",8),e.qZA()()(),e.YNc(12,P,14,1,"table",9),e.YNc(13,z,15,2,"nav",10),e.YNc(14,E,14,9,"div",11),e.qZA()()),2&t&&(e.xp6(8),e.hij(" ",e.lcZ(9,4,"common.addNew")," "),e.xp6(4),e.Q6J("ngIf",!n.isEmpty),e.xp6(1),e.Q6J("ngIf",!n.isEmpty),e.xp6(1),e.Q6J("ngIf",n.isEmpty))},dependencies:[p.mk,p.sg,p.O5,g.X$]}),o})();var x=c(4541);function V(o,s){1&o&&(e.TgZ(0,"span",25),e._uU(1,"No"),e.qZA())}function X(o,s){1&o&&(e.TgZ(0,"span",26),e._uU(1,"Yes"),e.qZA())}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.openDetailForm(r.id))}),e.TgZ(1,"td",22),e._uU(2),e.qZA(),e.TgZ(3,"td",22),e._uU(4),e.qZA(),e.TgZ(5,"td",22),e._uU(6),e.qZA(),e.TgZ(7,"td",22),e.YNc(8,V,2,0,"span",23),e.YNc(9,X,2,0,"span",24),e.qZA(),e.TgZ(10,"td",22),e._uU(11),e.qZA(),e.TgZ(12,"td",22),e._uU(13),e.ALo(14,"date"),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(2),e.Q6J("ngIf",!t.googleReview),e.xp6(1),e.Q6J("ngIf",t.googleReview),e.xp6(2),e.hij(" ",n.reviewHash[t.store]," "),e.xp6(2),e.hij(" ",e.xi3(14,7,t.createdAt,"YYYY-MM-dd HH:mm")," ")}}function ee(o,s){if(1&o&&(e.TgZ(0,"table",16)(1,"thead",17)(2,"tr")(3,"th",18),e._uU(4," Name "),e.qZA(),e.TgZ(5,"th",18),e._uU(6," Email "),e.qZA(),e.TgZ(7,"th",18),e._uU(8," Phone "),e.qZA(),e.TgZ(9,"th",19),e._uU(10," Google Review ? "),e.qZA(),e.TgZ(11,"th",19),e._uU(12," Store "),e.qZA(),e.TgZ(13,"th",19),e._uU(14," Review date "),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,W,15,10,"tr",20),e.qZA()()),2&o){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.objectList)}}function te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"nav",27),e._UZ(1,"span",28),e.TgZ(2,"ul",29)(3,"li")(4,"a",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.prevPage())}),e.TgZ(5,"span",31),e._uU(6,"Previous"),e.qZA(),e.O4$(),e.TgZ(7,"svg",32),e._UZ(8,"path",33),e.qZA()()(),e.kcU(),e.TgZ(9,"li")(10,"a",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nextPage())}),e.TgZ(11,"span",31),e._uU(12,"Next"),e.qZA(),e.O4$(),e.TgZ(13,"svg",32),e._UZ(14,"path",35),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",t.disableGoBack?"pointer-events-none bg-gray-500":""),e.xp6(6),e.Q6J("ngClass",t.disableGoNext?"pointer-events-none bg-gray-500":"")}}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",36)(2,"div",37)(3,"h2",38),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",39),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openNewForm())}),e._uU(10),e.ALo(11,"translate"),e.O4$(),e.TgZ(12,"svg",41),e._UZ(13,"path",42),e.qZA()()()()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,3,"common.emptyTitle")),e.xp6(3),e.Oqu(e.lcZ(8,5,"common.emptyDesc")),e.xp6(3),e.hij(" ",e.lcZ(11,7,"common.addNew")," "))}const ne={penrith:"Penrith",ns:"North Strathfield",campbelltown:"Campbelltown"};let ie=(()=>{class o extends U{constructor(t,n,i,r,a,d){super(t,n,i,r,a,d),this.afs=t,this.activatedRoute=n,this.router=i,this.storage=r,this.loaderService=a,this.translateService=d,this.collectionName="responses",this.reviewHash=ne}mappingResponse(t){return this.objectList=t.map(n=>(this.loaderService.hide(),{id:n.payload.doc.id,...n.payload.doc.data()}))}onSelectDate(){if(this.filterDate){this.firstItem=null;const t=new Date;t.setFullYear(this.filterDate.year),t.setMonth(this.filterDate.month-1),t.setDate(this.filterDate.day);const n=t;n.setHours(0),n.setMinutes(0),n.setSeconds(0),this.startTimeStamp=Math.floor(n);const i=new Date;i.setFullYear(this.filterDate.year),i.setMonth(this.filterDate.month-1),i.setDate(this.filterDate.day);const r=i;r.setHours(23),r.setMinutes(59),r.setSeconds(59),this.endTimeStamp=Math.floor(r),this.firstResponse=null,this.lastResponse=null;const a=this.firestoreQuery.where("createdAt","<",this.endTimeStamp).where("createdAt",">=",this.startTimeStamp);this.objectCollection=this.afs.collection(this.collectionName,()=>a),this.disableGoNext=!1,this.onAfterLoadData()}else this.objectCollection=this.afs.collection(this.collectionName,t=>(this.firestoreQuery=t.limit(201).orderBy("createdAt","desc"),this.firestoreQuery)),this.onAfterLoadData()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.ST),e.Y36(u.gz),e.Y36(u.F0),e.Y36(v.Q1),e.Y36(h.D),e.Y36(g.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-response-list"]],features:[e.qOj],decls:18,vars:4,consts:[[1,"bg-white","shadow"],[1,"mx-auto","max-w-7xl","py-6","px-4","sm:px-6","lg:px-8"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900"],[1,"mx-auto","max-w-7xl","py-6","sm:px-6","lg:px-8"],[1,"flex","justify-content-between"],[1,"spacer"],[1,"input-group","w-25"],["placeholder","dd/mm/yyyy","name","d2","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","blur","dateSelect","keyup.enter"],["c2","ngModel","d","ngbDatepicker"],["type","button",1,"calendar-btn",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","aria-hidden","true",1,"w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"overflow--auto","relative","shadow-md","sm:rounded-lg"],["class","w-full text-sm text-left text-gray-500 xxxx:text-gray-400",4,"ngIf"],["class","flex justify-between items-center p-4","aria-label","Table navigation",4,"ngIf"],["class","mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",4,"ngIf"],[1,"w-full","text-sm","text-left","text-gray-500","xxxx:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","xxxx:bg-gray-700","xxxx:text-gray-400"],["scope","col",1,"py-3","px-6"],["scope","col-2",1,"py-3","px-6"],["class","cursor-pointer bg-white border-b xxxx:bg-gray-800 xxxx:border-gray-700 hover:bg-gray-50 xxxx:hover:bg-gray-600 hover:bg-sky-500",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","bg-white","border-b","xxxx:bg-gray-800","xxxx:border-gray-700","hover:bg-gray-50","xxxx:hover:bg-gray-600","hover:bg-sky-500",3,"click"],[1,"py-4","px-6","font-semibold","text-gray-900","xxxx:text-white"],["class","text-red-700",4,"ngIf"],["class","text-green-700",4,"ngIf"],[1,"text-red-700"],[1,"text-green-700"],["aria-label","Table navigation",1,"flex","justify-between","items-center","p-4"],[1,"text-sm","font-normal","text-gray-500","xxxx:text-gray-400"],[1,"inline-flex","items-center","-space-x-px"],["href","javascript:void(0)",1,"block","py-2","px-3","ml-0","leading-tight","text-white","bg-sky-300","rounded-l-lg","border","hover:bg-sky-500",3,"ngClass","click"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],["href","javascript:void(0)",1,"block","py-2","px-3","leading-tight","text-white","bg-sky-300","rounded-r-lg","border","hover:bg-sky-500",3,"ngClass","click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"px-4","py-6","sm:px-0"],[1,"h-96","rounded-lg","border-4","border-dashed","border-gray-200","flex","flex-col","items-center","justify-center","space-y-6"],[1,"text-blue-600","text-2xl"],[1,""],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","inline-flex","items-center","xxxx:bg-blue-600","xxxx:hover:bg-blue-700","xxxx:focus:ring-blue-800",3,"click"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"header",0)(1,"div",1)(2,"h1",2),e._uU(3,"Responses"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"div",5),e.TgZ(7,"div",6)(8,"input",7,8),e.NdJ("ngModelChange",function(a){return n.filterDate=a})("blur",function(){return n.onSelectDate()})("dateSelect",function(){return n.onSelectDate()})("keyup.enter",function(){return n.onSelectDate()}),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){e.CHM(i);const a=e.MAs(10);return e.KtG(a.toggle())}),e.O4$(),e.TgZ(12,"svg",10),e._UZ(13,"path",11),e.qZA()()()(),e.kcU(),e.TgZ(14,"div",12),e.YNc(15,ee,17,1,"table",13),e.YNc(16,te,15,2,"nav",14),e.YNc(17,oe,14,9,"div",15),e.qZA()()}2&t&&(e.xp6(8),e.Q6J("ngModel",n.filterDate),e.xp6(7),e.Q6J("ngIf",!n.isEmpty),e.xp6(1),e.Q6J("ngIf",!n.isEmpty),e.xp6(1),e.Q6J("ngIf",n.isEmpty))},dependencies:[p.mk,p.sg,p.O5,l.Fj,l.JJ,l.On,x.J4,p.uU,g.X$],styles:[".calendar-btn[_ngcontent-%COMP%]{border:solid 1px #ccc;padding:0 10px;border-radius:0 5px 5px 0}"]}),o})();function se(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.BQk()),2&o){const t=s.$implicit,n=s.index,i=e.oxw(2);e.xp6(2),e.AsE("",n+1,". ",t.question,""),e.xp6(2),e.hij(" ",i.parseResponse(t.response)," ")}}function re(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4),e._uU(2," Feedback:"),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.formData.feedback," ")}}function ae(o,s){if(1&o&&(e.TgZ(0,"div",2),e.YNc(1,se,5,3,"ng-container",3),e.YNc(2,re,5,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data),e.xp6(1),e.Q6J("ngIf",t.formData.feedback)}}function le(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1," Response not found!\n"),e.qZA())}const ce=[{path:"",redirectTo:"dashboard/questions",pathMatch:"full"},{path:"log-in",component:q},{path:"dashboard",redirectTo:"dashboard/questions",pathMatch:"full"},{path:"dashboard",component:N,children:[{path:"questions/:id",component:J,canActivate:[f]},{path:"questions",component:K,canActivate:[f]},{path:"responses/:id",component:(()=>{class o extends A{constructor(t,n,i,r,a,d){super(t,n,i,r,a,d),this.router=t,this.activatedRoute=n,this.loaderService=i,this.toastrService=r,this.translateService=a,this.afs=d,this.collectionName="responses",this.data=[]}loadData(){this.id?(this.documentRef=this.objectCollection.doc(this.id),this.subscriber$=this.documentRef.valueChanges().subscribe(t=>{this.formData=t,this.data=this.mappingResponse()})):console.log("id not found")}mappingResponse(){if(this.formData){let t=Object.keys(this.formData.response).map(n=>this.formData?.response[n]);return t.sort((n,i)=>parseInt(n.order)-parseInt(i.order)),this.subscriber$.unsubscribe(),t}return[]}parseResponse(t){return"string"==typeof t?t:Array.isArray(t)?t.join(", "):"object"==typeof t?`Name: ${t.name}\n        Email: ${t.email}\n        Phone: ${t.phone}`:JSON.stringify(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(h.D),e.Y36(Z._W),e.Y36(g.sK),e.Y36(m.ST))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-response-detail"]],features:[e.qOj],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[1,"question"],[1,"response"]],template:function(t,n){1&t&&(e.YNc(0,ae,3,2,"div",0),e.YNc(1,le,2,0,"div",1)),2&t&&(e.Q6J("ngIf",n.formData),e.xp6(1),e.Q6J("ngIf",!n.formData))},dependencies:[p.sg,p.O5],styles:[".container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.container[_ngcontent-%COMP%]   .response[_ngcontent-%COMP%]{padding:15px;border-left:solid 5px #ff6f00;margin:0;white-space:pre-line}.container[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{padding:10px 0}"]}),o})(),canActivate:[f]},{path:"responses",component:ie,canActivate:[f]}]}];let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(ce),u.Bz]}),o})(),de=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,ue,k.m,l.UX,l.u5,g.aw,x.IJ,x.jF,x._A,x.ZS]}),o})()}}]);